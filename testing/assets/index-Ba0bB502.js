(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();function _c(e){const n=Object.create(null);for(const i of e.split(","))n[i]=1;return i=>i in n}const wt={},Vi=[],Qn=()=>{},Kd=()=>!1,xr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),yc=e=>e.startsWith("onUpdate:"),qt=Object.assign,bc=(e,n)=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)},qp=Object.prototype.hasOwnProperty,pt=(e,n)=>qp.call(e,n),qe=Array.isArray,Zi=e=>ua(e)==="[object Map]",to=e=>ua(e)==="[object Set]",_u=e=>ua(e)==="[object Date]",st=e=>typeof e=="function",Rt=e=>typeof e=="string",zn=e=>typeof e=="symbol",_t=e=>e!==null&&typeof e=="object",Yd=e=>(_t(e)||st(e))&&st(e.then)&&st(e.catch),Jd=Object.prototype.toString,ua=e=>Jd.call(e),jp=e=>ua(e).slice(8,-1),Xd=e=>ua(e)==="[object Object]",Ar=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zo=_c(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ir=e=>{const n=Object.create(null);return(i=>n[i]||(n[i]=e(i)))},Wp=/-\w/g,Tn=Ir(e=>e.replace(Wp,n=>n.slice(1).toUpperCase())),Gp=/\B([A-Z])/g,Ks=Ir(e=>e.replace(Gp,"-$1").toLowerCase()),Tr=Ir(e=>e.charAt(0).toUpperCase()+e.slice(1)),Cl=Ir(e=>e?`on${Tr(e)}`:""),Zs=(e,n)=>!Object.is(e,n),tr=(e,...n)=>{for(let i=0;i<e.length;i++)e[i](...n)},Qd=(e,n,i,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:i})},Er=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Kp=e=>{const n=Rt(e)?Number(e):NaN;return isNaN(n)?e:n};let yu;const Sr=()=>yu||(yu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tn(e){if(qe(e)){const n={};for(let i=0;i<e.length;i++){const r=e[i],s=Rt(r)?Qp(r):tn(r);if(s)for(const a in s)n[a]=s[a]}return n}else if(Rt(e)||_t(e))return e}const Yp=/;(?![^(]*\))/g,Jp=/:([^]+)/,Xp=/\/\*[^]*?\*\//g;function Qp(e){const n={};return e.replace(Xp,"").split(Yp).forEach(i=>{if(i){const r=i.split(Jp);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function Fe(e){let n="";if(Rt(e))n=e;else if(qe(e))for(let i=0;i<e.length;i++){const r=Fe(e[i]);r&&(n+=r+" ")}else if(_t(e))for(const i in e)e[i]&&(n+=i+" ");return n.trim()}const em="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tm=_c(em);function eh(e){return!!e||e===""}function nm(e,n){if(e.length!==n.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=ki(e[r],n[r]);return i}function ki(e,n){if(e===n)return!0;let i=_u(e),r=_u(n);if(i||r)return i&&r?e.getTime()===n.getTime():!1;if(i=zn(e),r=zn(n),i||r)return e===n;if(i=qe(e),r=qe(n),i||r)return i&&r?nm(e,n):!1;if(i=_t(e),r=_t(n),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,a=Object.keys(n).length;if(s!==a)return!1;for(const l in e){const u=e.hasOwnProperty(l),h=n.hasOwnProperty(l);if(u&&!h||!u&&h||!ki(e[l],n[l]))return!1}}return String(e)===String(n)}function kc(e,n){return e.findIndex(i=>ki(i,n))}const th=e=>!!(e&&e.__v_isRef===!0),T=e=>Rt(e)?e:e==null?"":qe(e)||_t(e)&&(e.toString===Jd||!st(e.toString))?th(e)?T(e.value):JSON.stringify(e,nh,2):String(e),nh=(e,n)=>th(n)?nh(e,n.value):Zi(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[r,s],a)=>(i[Ll(r,a)+" =>"]=s,i),{})}:to(n)?{[`Set(${n.size})`]:[...n.values()].map(i=>Ll(i))}:zn(n)?Ll(n):_t(n)&&!qe(n)&&!Xd(n)?String(n):n,Ll=(e,n="")=>{var i;return zn(e)?`Symbol(${(i=e.description)!=null?i:n})`:e};let Yt;class sh{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Yt,!n&&Yt&&(this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].pause();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].resume();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].resume()}}run(n){if(this._active){const i=Yt;try{return Yt=this,n()}finally{Yt=i}}}on(){++this._on===1&&(this.prevScope=Yt,Yt=this)}off(){this._on>0&&--this._on===0&&(Yt=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function ih(e){return new sh(e)}function oh(){return Yt}function sm(e,n=!1){Yt&&Yt.cleanups.push(e)}let Lt;const xl=new WeakSet;class ah{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Yt&&Yt.active&&Yt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xl.has(this)&&(xl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||lh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,bu(this),ch(this);const n=Lt,i=Fn;Lt=this,Fn=!0;try{return this.fn()}finally{uh(this),Lt=n,Fn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Lc(n);this.deps=this.depsTail=void 0,bu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jl(this)&&this.run()}get dirty(){return jl(this)}}let rh=0,qo,jo;function lh(e,n=!1){if(e.flags|=8,n){e.next=jo,jo=e;return}e.next=qo,qo=e}function wc(){rh++}function Cc(){if(--rh>0)return;if(jo){let n=jo;for(jo=void 0;n;){const i=n.next;n.next=void 0,n.flags&=-9,n=i}}let e;for(;qo;){let n=qo;for(qo=void 0;n;){const i=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=i}}if(e)throw e}function ch(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function uh(e){let n,i=e.depsTail,r=i;for(;r;){const s=r.prevDep;r.version===-1?(r===i&&(i=s),Lc(r),im(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=n,e.depsTail=i}function jl(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(dh(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function dh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qo)||(e.globalVersion=Qo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!jl(e))))return;e.flags|=2;const n=e.dep,i=Lt,r=Fn;Lt=e,Fn=!0;try{ch(e);const s=e.fn(e._value);(n.version===0||Zs(s,e._value))&&(e.flags|=128,e._value=s,n.version++)}catch(s){throw n.version++,s}finally{Lt=i,Fn=r,uh(e),e.flags&=-3}}function Lc(e,n=!1){const{dep:i,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let a=i.computed.deps;a;a=a.nextDep)Lc(a,!0)}!n&&!--i.sc&&i.map&&i.map.delete(i.key)}function im(e){const{prevDep:n,nextDep:i}=e;n&&(n.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=n,e.nextDep=void 0)}let Fn=!0;const hh=[];function ws(){hh.push(Fn),Fn=!1}function Cs(){const e=hh.pop();Fn=e===void 0?!0:e}function bu(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const i=Lt;Lt=void 0;try{n()}finally{Lt=i}}}let Qo=0;class om{constructor(n,i){this.sub=n,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xc{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!Lt||!Fn||Lt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Lt)i=this.activeLink=new om(Lt,this),Lt.deps?(i.prevDep=Lt.depsTail,Lt.depsTail.nextDep=i,Lt.depsTail=i):Lt.deps=Lt.depsTail=i,fh(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=Lt.depsTail,i.nextDep=void 0,Lt.depsTail.nextDep=i,Lt.depsTail=i,Lt.deps===i&&(Lt.deps=r)}return i}trigger(n){this.version++,Qo++,this.notify(n)}notify(n){wc();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Cc()}}}function fh(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)fh(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const dr=new WeakMap,_i=Symbol(""),Wl=Symbol(""),ea=Symbol("");function Jt(e,n,i){if(Fn&&Lt){let r=dr.get(e);r||dr.set(e,r=new Map);let s=r.get(i);s||(r.set(i,s=new xc),s.map=r,s.key=i),s.track()}}function gs(e,n,i,r,s,a){const l=dr.get(e);if(!l){Qo++;return}const u=h=>{h&&h.trigger()};if(wc(),n==="clear")l.forEach(u);else{const h=qe(e),p=h&&Ar(i);if(h&&i==="length"){const f=Number(r);l.forEach((v,b)=>{(b==="length"||b===ea||!zn(b)&&b>=f)&&u(v)})}else switch((i!==void 0||l.has(void 0))&&u(l.get(i)),p&&u(l.get(ea)),n){case"add":h?p&&u(l.get("length")):(u(l.get(_i)),Zi(e)&&u(l.get(Wl)));break;case"delete":h||(u(l.get(_i)),Zi(e)&&u(l.get(Wl)));break;case"set":Zi(e)&&u(l.get(_i));break}}Cc()}function am(e,n){const i=dr.get(e);return i&&i.get(n)}function Bi(e){const n=dt(e);return n===e?n:(Jt(n,"iterate",ea),bn(e)?n:n.map(Un))}function Mr(e){return Jt(e=dt(e),"iterate",ea),e}function Rs(e,n){return Ls(e)?ks(e)?Ki(Un(n)):Ki(n):Un(n)}const rm={__proto__:null,[Symbol.iterator](){return Al(this,Symbol.iterator,e=>Rs(this,e))},concat(...e){return Bi(this).concat(...e.map(n=>qe(n)?Bi(n):n))},entries(){return Al(this,"entries",e=>(e[1]=Rs(this,e[1]),e))},every(e,n){return ds(this,"every",e,n,void 0,arguments)},filter(e,n){return ds(this,"filter",e,n,i=>i.map(r=>Rs(this,r)),arguments)},find(e,n){return ds(this,"find",e,n,i=>Rs(this,i),arguments)},findIndex(e,n){return ds(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return ds(this,"findLast",e,n,i=>Rs(this,i),arguments)},findLastIndex(e,n){return ds(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return ds(this,"forEach",e,n,void 0,arguments)},includes(...e){return Il(this,"includes",e)},indexOf(...e){return Il(this,"indexOf",e)},join(e){return Bi(this).join(e)},lastIndexOf(...e){return Il(this,"lastIndexOf",e)},map(e,n){return ds(this,"map",e,n,void 0,arguments)},pop(){return Po(this,"pop")},push(...e){return Po(this,"push",e)},reduce(e,...n){return ku(this,"reduce",e,n)},reduceRight(e,...n){return ku(this,"reduceRight",e,n)},shift(){return Po(this,"shift")},some(e,n){return ds(this,"some",e,n,void 0,arguments)},splice(...e){return Po(this,"splice",e)},toReversed(){return Bi(this).toReversed()},toSorted(e){return Bi(this).toSorted(e)},toSpliced(...e){return Bi(this).toSpliced(...e)},unshift(...e){return Po(this,"unshift",e)},values(){return Al(this,"values",e=>Rs(this,e))}};function Al(e,n,i){const r=Mr(e),s=r[n]();return r!==e&&!bn(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.done||(a.value=i(a.value)),a}),s}const lm=Array.prototype;function ds(e,n,i,r,s,a){const l=Mr(e),u=l!==e&&!bn(e),h=l[n];if(h!==lm[n]){const v=h.apply(e,a);return u?Un(v):v}let p=i;l!==e&&(u?p=function(v,b){return i.call(this,Rs(e,v),b,e)}:i.length>2&&(p=function(v,b){return i.call(this,v,b,e)}));const f=h.call(l,p,r);return u&&s?s(f):f}function ku(e,n,i,r){const s=Mr(e);let a=i;return s!==e&&(bn(e)?i.length>3&&(a=function(l,u,h){return i.call(this,l,u,h,e)}):a=function(l,u,h){return i.call(this,l,Rs(e,u),h,e)}),s[n](a,...r)}function Il(e,n,i){const r=dt(e);Jt(r,"iterate",ea);const s=r[n](...i);return(s===-1||s===!1)&&Pr(i[0])?(i[0]=dt(i[0]),r[n](...i)):s}function Po(e,n,i=[]){ws(),wc();const r=dt(e)[n].apply(e,i);return Cc(),Cs(),r}const cm=_c("__proto__,__v_isRef,__isVue"),ph=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(zn));function um(e){zn(e)||(e=String(e));const n=dt(this);return Jt(n,"has",e),n.hasOwnProperty(e)}class mh{constructor(n=!1,i=!1){this._isReadonly=n,this._isShallow=i}get(n,i,r){if(i==="__v_skip")return n.__v_skip;const s=this._isReadonly,a=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return a;if(i==="__v_raw")return r===(s?a?bm:yh:a?_h:gh).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const l=qe(n);if(!s){let h;if(l&&(h=rm[i]))return h;if(i==="hasOwnProperty")return um}const u=Reflect.get(n,i,Dt(n)?n:r);if((zn(i)?ph.has(i):cm(i))||(s||Jt(n,"get",i),a))return u;if(Dt(u)){const h=l&&Ar(i)?u:u.value;return s&&_t(h)?Kl(h):h}return _t(u)?s?Kl(u):da(u):u}}class vh extends mh{constructor(n=!1){super(!1,n)}set(n,i,r,s){let a=n[i];const l=qe(n)&&Ar(i);if(!this._isShallow){const p=Ls(a);if(!bn(r)&&!Ls(r)&&(a=dt(a),r=dt(r)),!l&&Dt(a)&&!Dt(r))return p||(a.value=r),!0}const u=l?Number(i)<n.length:pt(n,i),h=Reflect.set(n,i,r,Dt(n)?n:s);return n===dt(s)&&(u?Zs(r,a)&&gs(n,"set",i,r):gs(n,"add",i,r)),h}deleteProperty(n,i){const r=pt(n,i);n[i];const s=Reflect.deleteProperty(n,i);return s&&r&&gs(n,"delete",i,void 0),s}has(n,i){const r=Reflect.has(n,i);return(!zn(i)||!ph.has(i))&&Jt(n,"has",i),r}ownKeys(n){return Jt(n,"iterate",qe(n)?"length":_i),Reflect.ownKeys(n)}}class dm extends mh{constructor(n=!1){super(!0,n)}set(n,i){return!0}deleteProperty(n,i){return!0}}const hm=new vh,fm=new dm,pm=new vh(!0);const Gl=e=>e,ja=e=>Reflect.getPrototypeOf(e);function mm(e,n,i){return function(...r){const s=this.__v_raw,a=dt(s),l=Zi(a),u=e==="entries"||e===Symbol.iterator&&l,h=e==="keys"&&l,p=s[e](...r),f=i?Gl:n?Ki:Un;return!n&&Jt(a,"iterate",h?Wl:_i),{next(){const{value:v,done:b}=p.next();return b?{value:v,done:b}:{value:u?[f(v[0]),f(v[1])]:f(v),done:b}},[Symbol.iterator](){return this}}}}function Wa(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function vm(e,n){const i={get(s){const a=this.__v_raw,l=dt(a),u=dt(s);e||(Zs(s,u)&&Jt(l,"get",s),Jt(l,"get",u));const{has:h}=ja(l),p=n?Gl:e?Ki:Un;if(h.call(l,s))return p(a.get(s));if(h.call(l,u))return p(a.get(u));a!==l&&a.get(s)},get size(){const s=this.__v_raw;return!e&&Jt(dt(s),"iterate",_i),s.size},has(s){const a=this.__v_raw,l=dt(a),u=dt(s);return e||(Zs(s,u)&&Jt(l,"has",s),Jt(l,"has",u)),s===u?a.has(s):a.has(s)||a.has(u)},forEach(s,a){const l=this,u=l.__v_raw,h=dt(u),p=n?Gl:e?Ki:Un;return!e&&Jt(h,"iterate",_i),u.forEach((f,v)=>s.call(a,p(f),p(v),l))}};return qt(i,e?{add:Wa("add"),set:Wa("set"),delete:Wa("delete"),clear:Wa("clear")}:{add(s){!n&&!bn(s)&&!Ls(s)&&(s=dt(s));const a=dt(this);return ja(a).has.call(a,s)||(a.add(s),gs(a,"add",s,s)),this},set(s,a){!n&&!bn(a)&&!Ls(a)&&(a=dt(a));const l=dt(this),{has:u,get:h}=ja(l);let p=u.call(l,s);p||(s=dt(s),p=u.call(l,s));const f=h.call(l,s);return l.set(s,a),p?Zs(a,f)&&gs(l,"set",s,a):gs(l,"add",s,a),this},delete(s){const a=dt(this),{has:l,get:u}=ja(a);let h=l.call(a,s);h||(s=dt(s),h=l.call(a,s)),u&&u.call(a,s);const p=a.delete(s);return h&&gs(a,"delete",s,void 0),p},clear(){const s=dt(this),a=s.size!==0,l=s.clear();return a&&gs(s,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=mm(s,e,n)}),i}function Ac(e,n){const i=vm(e,n);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(pt(i,s)&&s in r?i:r,s,a)}const gm={get:Ac(!1,!1)},_m={get:Ac(!1,!0)},ym={get:Ac(!0,!1)};const gh=new WeakMap,_h=new WeakMap,yh=new WeakMap,bm=new WeakMap;function km(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wm(e){return e.__v_skip||!Object.isExtensible(e)?0:km(jp(e))}function da(e){return Ls(e)?e:Ic(e,!1,hm,gm,gh)}function bh(e){return Ic(e,!1,pm,_m,_h)}function Kl(e){return Ic(e,!0,fm,ym,yh)}function Ic(e,n,i,r,s){if(!_t(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const a=wm(e);if(a===0)return e;const l=s.get(e);if(l)return l;const u=new Proxy(e,a===2?r:i);return s.set(e,u),u}function ks(e){return Ls(e)?ks(e.__v_raw):!!(e&&e.__v_isReactive)}function Ls(e){return!!(e&&e.__v_isReadonly)}function bn(e){return!!(e&&e.__v_isShallow)}function Pr(e){return e?!!e.__v_raw:!1}function dt(e){const n=e&&e.__v_raw;return n?dt(n):e}function Tc(e){return!pt(e,"__v_skip")&&Object.isExtensible(e)&&Qd(e,"__v_skip",!0),e}const Un=e=>_t(e)?da(e):e,Ki=e=>_t(e)?Kl(e):e;function Dt(e){return e?e.__v_isRef===!0:!1}function O(e){return kh(e,!1)}function Cm(e){return kh(e,!0)}function kh(e,n){return Dt(e)?e:new Lm(e,n)}class Lm{constructor(n,i){this.dep=new xc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?n:dt(n),this._value=i?n:Un(n),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(n){const i=this._rawValue,r=this.__v_isShallow||bn(n)||Ls(n);n=r?n:dt(n),Zs(n,i)&&(this._rawValue=n,this._value=r?n:Un(n),this.dep.trigger())}}function F(e){return Dt(e)?e.value:e}const xm={get:(e,n,i)=>n==="__v_raw"?e:F(Reflect.get(e,n,i)),set:(e,n,i,r)=>{const s=e[n];return Dt(s)&&!Dt(i)?(s.value=i,!0):Reflect.set(e,n,i,r)}};function wh(e){return ks(e)?e:new Proxy(e,xm)}function Am(e){const n=qe(e)?new Array(e.length):{};for(const i in e)n[i]=Tm(e,i);return n}class Im{constructor(n,i,r){this._object=n,this._key=i,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=dt(n);let s=!0,a=n;if(!qe(n)||!Ar(String(i)))do s=!Pr(a)||bn(a);while(s&&(a=a.__v_raw));this._shallow=s}get value(){let n=this._object[this._key];return this._shallow&&(n=F(n)),this._value=n===void 0?this._defaultValue:n}set value(n){if(this._shallow&&Dt(this._raw[this._key])){const i=this._object[this._key];if(Dt(i)){i.value=n;return}}this._object[this._key]=n}get dep(){return am(this._raw,this._key)}}function Tm(e,n,i){return new Im(e,n,i)}class Em{constructor(n,i,r){this.fn=n,this.setter=i,this._value=void 0,this.dep=new xc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Lt!==this)return lh(this,!0),!0}get value(){const n=this.dep.track();return dh(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Sm(e,n,i=!1){let r,s;return st(e)?r=e:(r=e.get,s=e.set),new Em(r,s,i)}const Ga={},hr=new WeakMap;let di;function Mm(e,n=!1,i=di){if(i){let r=hr.get(i);r||hr.set(i,r=[]),r.push(e)}}function Pm(e,n,i=wt){const{immediate:r,deep:s,once:a,scheduler:l,augmentJob:u,call:h}=i,p=M=>s?M:bn(M)||s===!1||s===0?_s(M,1):_s(M);let f,v,b,C,S=!1,$=!1;if(Dt(e)?(v=()=>e.value,S=bn(e)):ks(e)?(v=()=>p(e),S=!0):qe(e)?($=!0,S=e.some(M=>ks(M)||bn(M)),v=()=>e.map(M=>{if(Dt(M))return M.value;if(ks(M))return p(M);if(st(M))return h?h(M,2):M()})):st(e)?n?v=h?()=>h(e,2):e:v=()=>{if(b){ws();try{b()}finally{Cs()}}const M=di;di=f;try{return h?h(e,3,[C]):e(C)}finally{di=M}}:v=Qn,n&&s){const M=v,k=s===!0?1/0:s;v=()=>_s(M(),k)}const R=oh(),A=()=>{f.stop(),R&&R.active&&bc(R.effects,f)};if(a&&n){const M=n;n=(...k)=>{M(...k),A()}}let x=$?new Array(e.length).fill(Ga):Ga;const w=M=>{if(!(!(f.flags&1)||!f.dirty&&!M))if(n){const k=f.run();if(s||S||($?k.some((I,E)=>Zs(I,x[E])):Zs(k,x))){b&&b();const I=di;di=f;try{const E=[k,x===Ga?void 0:$&&x[0]===Ga?[]:x,C];x=k,h?h(n,3,E):n(...E)}finally{di=I}}}else f.run()};return u&&u(w),f=new ah(v),f.scheduler=l?()=>l(w,!1):w,C=M=>Mm(M,!1,f),b=f.onStop=()=>{const M=hr.get(f);if(M){if(h)h(M,4);else for(const k of M)k();hr.delete(f)}},n?r?w(!0):x=f.run():l?l(w.bind(null,!0),!0):f.run(),A.pause=f.pause.bind(f),A.resume=f.resume.bind(f),A.stop=A,A}function _s(e,n=1/0,i){if(n<=0||!_t(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=n))return e;if(i.set(e,n),n--,Dt(e))_s(e.value,n,i);else if(qe(e))for(let r=0;r<e.length;r++)_s(e[r],n,i);else if(to(e)||Zi(e))e.forEach(r=>{_s(r,n,i)});else if(Xd(e)){for(const r in e)_s(e[r],n,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&_s(e[r],n,i)}return e}function ha(e,n,i,r){try{return r?e(...r):e()}catch(s){$r(s,n,i)}}function Hn(e,n,i,r){if(st(e)){const s=ha(e,n,i,r);return s&&Yd(s)&&s.catch(a=>{$r(a,n,i)}),s}if(qe(e)){const s=[];for(let a=0;a<e.length;a++)s.push(Hn(e[a],n,i,r));return s}}function $r(e,n,i,r=!0){const s=n?n.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=n&&n.appContext.config||wt;if(n){let u=n.parent;const h=n.proxy,p=`https://vuejs.org/error-reference/#runtime-${i}`;for(;u;){const f=u.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](e,h,p)===!1)return}u=u.parent}if(a){ws(),ha(a,null,10,[e,h,p]),Cs();return}}$m(e,i,s,r,l)}function $m(e,n,i,r=!0,s=!1){if(s)throw e;console.error(e)}const ln=[];let Yn=-1;const qi=[];let Ns=null,zi=0;const Ch=Promise.resolve();let fr=null;function Yi(e){const n=fr||Ch;return e?n.then(this?e.bind(this):e):n}function Om(e){let n=Yn+1,i=ln.length;for(;n<i;){const r=n+i>>>1,s=ln[r],a=ta(s);a<e||a===e&&s.flags&2?n=r+1:i=r}return n}function Ec(e){if(!(e.flags&1)){const n=ta(e),i=ln[ln.length-1];!i||!(e.flags&2)&&n>=ta(i)?ln.push(e):ln.splice(Om(n),0,e),e.flags|=1,Lh()}}function Lh(){fr||(fr=Ch.then(Ah))}function Dm(e){qe(e)?qi.push(...e):Ns&&e.id===-1?Ns.splice(zi+1,0,e):e.flags&1||(qi.push(e),e.flags|=1),Lh()}function wu(e,n,i=Yn+1){for(;i<ln.length;i++){const r=ln[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ln.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function xh(e){if(qi.length){const n=[...new Set(qi)].sort((i,r)=>ta(i)-ta(r));if(qi.length=0,Ns){Ns.push(...n);return}for(Ns=n,zi=0;zi<Ns.length;zi++){const i=Ns[zi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Ns=null,zi=0}}const ta=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ah(e){try{for(Yn=0;Yn<ln.length;Yn++){const n=ln[Yn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ha(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Yn<ln.length;Yn++){const n=ln[Yn];n&&(n.flags&=-2)}Yn=-1,ln.length=0,xh(),fr=null,(ln.length||qi.length)&&Ah()}}let Gt=null,Ih=null;function pr(e){const n=Gt;return Gt=e,Ih=e&&e.type.__scopeId||null,n}function We(e,n=Gt,i){if(!n||e._n)return e;const r=(...s)=>{r._d&&gr(-1);const a=pr(n);let l;try{l=e(...s)}finally{pr(a),r._d&&gr(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function De(e,n){if(Gt===null)return e;const i=Fr(Gt),r=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[a,l,u,h=wt]=n[s];a&&(st(a)&&(a={mounted:a,updated:a}),a.deep&&_s(l),r.push({dir:a,instance:i,value:l,oldValue:void 0,arg:u,modifiers:h}))}return e}function ri(e,n,i,r){const s=e.dirs,a=n&&n.dirs;for(let l=0;l<s.length;l++){const u=s[l];a&&(u.oldValue=a[l].value);let h=u.dir[r];h&&(ws(),Hn(h,i,8,[e.el,u,e,n]),Cs())}}function nr(e,n){if(Qt){let i=Qt.provides;const r=Qt.parent&&Qt.parent.provides;r===i&&(i=Qt.provides=Object.create(r)),i[e]=n}}function An(e,n,i=!1){const r=Oc();if(r||yi){let s=yi?yi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&st(n)?n.call(r&&r.proxy):n}}function Rm(){return!!(Oc()||yi)}const Nm=Symbol.for("v-scx"),Bm=()=>An(Nm);function je(e,n,i){return Th(e,n,i)}function Th(e,n,i=wt){const{immediate:r,deep:s,flush:a,once:l}=i,u=qt({},i),h=n&&r||!n&&a!=="post";let p;if(oa){if(a==="sync"){const C=Bm();p=C.__watcherHandles||(C.__watcherHandles=[])}else if(!h){const C=()=>{};return C.stop=Qn,C.resume=Qn,C.pause=Qn,C}}const f=Qt;u.call=(C,S,$)=>Hn(C,f,S,$);let v=!1;a==="post"?u.scheduler=C=>{an(C,f&&f.suspense)}:a!=="sync"&&(v=!0,u.scheduler=(C,S)=>{S?C():Ec(C)}),u.augmentJob=C=>{n&&(C.flags|=4),v&&(C.flags|=2,f&&(C.id=f.uid,C.i=f))};const b=Pm(e,n,u);return oa&&(p?p.push(b):h&&b()),b}function Fm(e,n,i){const r=this.proxy,s=Rt(e)?e.includes(".")?Eh(r,e):()=>r[e]:e.bind(r,r);let a;st(n)?a=n:(a=n.handler,i=n);const l=fa(this),u=Th(s,a.bind(r),i);return l(),u}function Eh(e,n){const i=n.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}const Sh=Symbol("_vte"),Mh=e=>e.__isTeleport,Wo=e=>e&&(e.disabled||e.disabled===""),Cu=e=>e&&(e.defer||e.defer===""),Lu=e=>typeof SVGElement<"u"&&e instanceof SVGElement,xu=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Yl=(e,n)=>{const i=e&&e.to;return Rt(i)?n?n(i):null:i},Ph={name:"Teleport",__isTeleport:!0,process(e,n,i,r,s,a,l,u,h,p){const{mc:f,pc:v,pbc:b,o:{insert:C,querySelector:S,createText:$,createComment:R}}=p,A=Wo(n.props);let{shapeFlag:x,children:w,dynamicChildren:M}=n;if(e==null){const k=n.el=$(""),I=n.anchor=$("");C(k,i,r),C(I,i,r);const E=(U,Q)=>{x&16&&f(w,U,Q,s,a,l,u,h)},q=()=>{const U=n.target=Yl(n.props,S),Q=$h(U,n,$,C);U&&(l!=="svg"&&Lu(U)?l="svg":l!=="mathml"&&xu(U)&&(l="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(U),A||(E(U,Q),sr(n,!1)))};A&&(E(i,I),sr(n,!0)),Cu(n.props)?(n.el.__isMounted=!1,an(()=>{q(),delete n.el.__isMounted},a)):q()}else{if(Cu(n.props)&&e.el.__isMounted===!1){an(()=>{Ph.process(e,n,i,r,s,a,l,u,h,p)},a);return}n.el=e.el,n.targetStart=e.targetStart;const k=n.anchor=e.anchor,I=n.target=e.target,E=n.targetAnchor=e.targetAnchor,q=Wo(e.props),U=q?i:I,Q=q?k:E;if(l==="svg"||Lu(I)?l="svg":(l==="mathml"||xu(I))&&(l="mathml"),M?(b(e.dynamicChildren,M,U,s,a,l,u),Pc(e,n,!0)):h||v(e,n,U,Q,s,a,l,u,!1),A)q?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Ka(n,i,k,p,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const ce=n.target=Yl(n.props,S);ce&&Ka(n,ce,null,p,0)}else q&&Ka(n,I,E,p,1);sr(n,A)}},remove(e,n,i,{um:r,o:{remove:s}},a){const{shapeFlag:l,children:u,anchor:h,targetStart:p,targetAnchor:f,target:v,props:b}=e;if(v&&(s(p),s(f)),a&&s(h),l&16){const C=a||!Wo(b);for(let S=0;S<u.length;S++){const $=u[S];r($,n,i,C,!!$.dynamicChildren)}}},move:Ka,hydrate:zm};function Ka(e,n,i,{o:{insert:r},m:s},a=2){a===0&&r(e.targetAnchor,n,i);const{el:l,anchor:u,shapeFlag:h,children:p,props:f}=e,v=a===2;if(v&&r(l,n,i),(!v||Wo(f))&&h&16)for(let b=0;b<p.length;b++)s(p[b],n,i,2);v&&r(u,n,i)}function zm(e,n,i,r,s,a,{o:{nextSibling:l,parentNode:u,querySelector:h,insert:p,createText:f}},v){function b($,R,A,x){R.anchor=v(l($),R,u($),i,r,s,a),R.targetStart=A,R.targetAnchor=x}const C=n.target=Yl(n.props,h),S=Wo(n.props);if(C){const $=C._lpa||C.firstChild;if(n.shapeFlag&16)if(S)b(e,n,$,$&&l($));else{n.anchor=l(e);let R=$;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")n.targetStart=R;else if(R.data==="teleport anchor"){n.targetAnchor=R,C._lpa=n.targetAnchor&&l(n.targetAnchor);break}}R=l(R)}n.targetAnchor||$h(C,n,f,p),v($&&l($),n,C,i,r,s,a)}sr(n,S)}else S&&n.shapeFlag&16&&b(e,n,e,l(e));return n.anchor&&l(n.anchor)}const Um=Ph;function sr(e,n){const i=e.ctx;if(i&&i.ut){let r,s;for(n?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",i.uid),r=r.nextSibling;i.ut()}}function $h(e,n,i,r){const s=n.targetStart=i(""),a=n.targetAnchor=i("");return s[Sh]=a,e&&(r(s,e),r(a,e)),a}const ms=Symbol("_leaveCb"),Ya=Symbol("_enterCb");function Hm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return kn(()=>{e.isMounted=!0}),Hh(()=>{e.isUnmounting=!0}),e}const xn=[Function,Array],Oh={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xn,onEnter:xn,onAfterEnter:xn,onEnterCancelled:xn,onBeforeLeave:xn,onLeave:xn,onAfterLeave:xn,onLeaveCancelled:xn,onBeforeAppear:xn,onAppear:xn,onAfterAppear:xn,onAppearCancelled:xn},Dh=e=>{const n=e.subTree;return n.component?Dh(n.component):n},Vm={name:"BaseTransition",props:Oh,setup(e,{slots:n}){const i=Oc(),r=Hm();return()=>{const s=n.default&&Bh(n.default(),!0);if(!s||!s.length)return;const a=Rh(s),l=dt(e),{mode:u}=l;if(r.isLeaving)return Tl(a);const h=Au(a);if(!h)return Tl(a);let p=Jl(h,l,r,i,v=>p=v);h.type!==Xt&&na(h,p);let f=i.subTree&&Au(i.subTree);if(f&&f.type!==Xt&&!hi(f,h)&&Dh(i).type!==Xt){let v=Jl(f,l,r,i);if(na(f,v),u==="out-in"&&h.type!==Xt)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,i.job.flags&8||i.update(),delete v.afterLeave,f=void 0},Tl(a);u==="in-out"&&h.type!==Xt?v.delayLeave=(b,C,S)=>{const $=Nh(r,f);$[String(f.key)]=f,b[ms]=()=>{C(),b[ms]=void 0,delete p.delayedLeave,f=void 0},p.delayedLeave=()=>{S(),delete p.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return a}}};function Rh(e){let n=e[0];if(e.length>1){for(const i of e)if(i.type!==Xt){n=i;break}}return n}const Zm=Vm;function Nh(e,n){const{leavingVNodes:i}=e;let r=i.get(n.type);return r||(r=Object.create(null),i.set(n.type,r)),r}function Jl(e,n,i,r,s){const{appear:a,mode:l,persisted:u=!1,onBeforeEnter:h,onEnter:p,onAfterEnter:f,onEnterCancelled:v,onBeforeLeave:b,onLeave:C,onAfterLeave:S,onLeaveCancelled:$,onBeforeAppear:R,onAppear:A,onAfterAppear:x,onAppearCancelled:w}=n,M=String(e.key),k=Nh(i,e),I=(U,Q)=>{U&&Hn(U,r,9,Q)},E=(U,Q)=>{const ce=Q[1];I(U,Q),qe(U)?U.every(re=>re.length<=1)&&ce():U.length<=1&&ce()},q={mode:l,persisted:u,beforeEnter(U){let Q=h;if(!i.isMounted)if(a)Q=R||h;else return;U[ms]&&U[ms](!0);const ce=k[M];ce&&hi(e,ce)&&ce.el[ms]&&ce.el[ms](),I(Q,[U])},enter(U){let Q=p,ce=f,re=v;if(!i.isMounted)if(a)Q=A||p,ce=x||f,re=w||v;else return;let Le=!1;const Z=U[Ya]=W=>{Le||(Le=!0,W?I(re,[U]):I(ce,[U]),q.delayedLeave&&q.delayedLeave(),U[Ya]=void 0)};Q?E(Q,[U,Z]):Z()},leave(U,Q){const ce=String(e.key);if(U[Ya]&&U[Ya](!0),i.isUnmounting)return Q();I(b,[U]);let re=!1;const Le=U[ms]=Z=>{re||(re=!0,Q(),Z?I($,[U]):I(S,[U]),U[ms]=void 0,k[ce]===e&&delete k[ce])};k[ce]=e,C?E(C,[U,Le]):Le()},clone(U){const Q=Jl(U,n,i,r,s);return s&&s(Q),Q}};return q}function Tl(e){if(Or(e))return e=js(e),e.children=null,e}function Au(e){if(!Or(e))return Mh(e.type)&&e.children?Rh(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:n,children:i}=e;if(i){if(n&16)return i[0];if(n&32&&st(i.default))return i.default()}}function na(e,n){e.shapeFlag&6&&e.component?(e.transition=n,na(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Bh(e,n=!1,i){let r=[],s=0;for(let a=0;a<e.length;a++){let l=e[a];const u=i==null?l.key:String(i)+String(l.key!=null?l.key:a);l.type===ke?(l.patchFlag&128&&s++,r=r.concat(Bh(l.children,n,u))):(n||l.type!==Xt)&&r.push(u!=null?js(l,{key:u}):l)}if(s>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}function Fh(e,n){return st(e)?qt({name:e.name},n,{setup:e}):e}function zh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const mr=new WeakMap;function Go(e,n,i,r,s=!1){if(qe(e)){e.forEach((S,$)=>Go(S,n&&(qe(n)?n[$]:n),i,r,s));return}if(ji(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Go(e,n,i,r.component.subTree);return}const a=r.shapeFlag&4?Fr(r.component):r.el,l=s?null:a,{i:u,r:h}=e,p=n&&n.r,f=u.refs===wt?u.refs={}:u.refs,v=u.setupState,b=dt(v),C=v===wt?Kd:S=>pt(b,S);if(p!=null&&p!==h){if(Iu(n),Rt(p))f[p]=null,C(p)&&(v[p]=null);else if(Dt(p)){p.value=null;const S=n;S.k&&(f[S.k]=null)}}if(st(h))ha(h,u,12,[l,f]);else{const S=Rt(h),$=Dt(h);if(S||$){const R=()=>{if(e.f){const A=S?C(h)?v[h]:f[h]:h.value;if(s)qe(A)&&bc(A,a);else if(qe(A))A.includes(a)||A.push(a);else if(S)f[h]=[a],C(h)&&(v[h]=f[h]);else{const x=[a];h.value=x,e.k&&(f[e.k]=x)}}else S?(f[h]=l,C(h)&&(v[h]=l)):$&&(h.value=l,e.k&&(f[e.k]=l))};if(l){const A=()=>{R(),mr.delete(e)};A.id=-1,mr.set(e,A),an(A,i)}else Iu(e),R()}}}function Iu(e){const n=mr.get(e);n&&(n.flags|=8,mr.delete(e))}Sr().requestIdleCallback;Sr().cancelIdleCallback;const ji=e=>!!e.type.__asyncLoader,Or=e=>e.type.__isKeepAlive;function qm(e,n){Uh(e,"a",n)}function jm(e,n){Uh(e,"da",n)}function Uh(e,n,i=Qt){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Dr(n,r,i),i){let s=i.parent;for(;s&&s.parent;)Or(s.parent.vnode)&&Wm(r,n,i,s),s=s.parent}}function Wm(e,n,i,r){const s=Dr(n,e,r,!0);As(()=>{bc(r[n],s)},i)}function Dr(e,n,i=Qt,r=!1){if(i){const s=i[e]||(i[e]=[]),a=n.__weh||(n.__weh=(...l)=>{ws();const u=fa(i),h=Hn(n,i,e,l);return u(),Cs(),h});return r?s.unshift(a):s.push(a),a}}const xs=e=>(n,i=Qt)=>{(!oa||e==="sp")&&Dr(e,(...r)=>n(...r),i)},Gm=xs("bm"),kn=xs("m"),Km=xs("bu"),Ym=xs("u"),Hh=xs("bum"),As=xs("um"),Jm=xs("sp"),Xm=xs("rtg"),Qm=xs("rtc");function ev(e,n=Qt){Dr("ec",e,n)}const tv="components";function Rr(e,n){return sv(tv,e,!0,n)||e}const nv=Symbol.for("v-ndc");function sv(e,n,i=!0,r=!1){const s=Gt||Qt;if(s){const a=s.type;{const u=Uv(a,!1);if(u&&(u===n||u===Tn(n)||u===Tr(Tn(n))))return a}const l=Tu(s[e]||a[e],n)||Tu(s.appContext[e],n);return!l&&r?a:l}}function Tu(e,n){return e&&(e[n]||e[Tn(n)]||e[Tr(Tn(n))])}function $e(e,n,i,r){let s;const a=i,l=qe(e);if(l||Rt(e)){const u=l&&ks(e);let h=!1,p=!1;u&&(h=!bn(e),p=Ls(e),e=Mr(e)),s=new Array(e.length);for(let f=0,v=e.length;f<v;f++)s[f]=n(h?p?Ki(Un(e[f])):Un(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let u=0;u<e;u++)s[u]=n(u+1,u,void 0,a)}else if(_t(e))if(e[Symbol.iterator])s=Array.from(e,(u,h)=>n(u,h,void 0,a));else{const u=Object.keys(e);s=new Array(u.length);for(let h=0,p=u.length;h<p;h++){const f=u[h];s[h]=n(e[f],f,h,a)}}else s=[];return s}function $o(e,n,i={},r,s){if(Gt.ce||Gt.parent&&ji(Gt.parent)&&Gt.parent.ce){const p=Object.keys(i).length>0;return n!=="default"&&(i.name=n),g(),nt(ke,null,[Oe("slot",i,r&&r())],p?-2:64)}let a=e[n];a&&a._c&&(a._d=!1),g();const l=a&&Vh(a(i)),u=i.key||l&&l.key,h=nt(ke,{key:(u&&!zn(u)?u:`_${n}`)+(!l&&r?"_fb":"")},l||(r?r():[]),l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),h}function Vh(e){return e.some(n=>ia(n)?!(n.type===Xt||n.type===ke&&!Vh(n.children)):!0)?e:null}const Xl=e=>e?cf(e)?Fr(e):Xl(e.parent):null,Ko=qt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xl(e.parent),$root:e=>Xl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qh(e),$forceUpdate:e=>e.f||(e.f=()=>{Ec(e.update)}),$nextTick:e=>e.n||(e.n=Yi.bind(e.proxy)),$watch:e=>Fm.bind(e)}),El=(e,n)=>e!==wt&&!e.__isScriptSetup&&pt(e,n),iv={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:i,setupState:r,data:s,props:a,accessCache:l,type:u,appContext:h}=e;if(n[0]!=="$"){const b=l[n];if(b!==void 0)switch(b){case 1:return r[n];case 2:return s[n];case 4:return i[n];case 3:return a[n]}else{if(El(r,n))return l[n]=1,r[n];if(s!==wt&&pt(s,n))return l[n]=2,s[n];if(pt(a,n))return l[n]=3,a[n];if(i!==wt&&pt(i,n))return l[n]=4,i[n];Ql&&(l[n]=0)}}const p=Ko[n];let f,v;if(p)return n==="$attrs"&&Jt(e.attrs,"get",""),p(e);if((f=u.__cssModules)&&(f=f[n]))return f;if(i!==wt&&pt(i,n))return l[n]=4,i[n];if(v=h.config.globalProperties,pt(v,n))return v[n]},set({_:e},n,i){const{data:r,setupState:s,ctx:a}=e;return El(s,n)?(s[n]=i,!0):r!==wt&&pt(r,n)?(r[n]=i,!0):pt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(a[n]=i,!0)},has({_:{data:e,setupState:n,accessCache:i,ctx:r,appContext:s,props:a,type:l}},u){let h;return!!(i[u]||e!==wt&&u[0]!=="$"&&pt(e,u)||El(n,u)||pt(a,u)||pt(r,u)||pt(Ko,u)||pt(s.config.globalProperties,u)||(h=l.__cssModules)&&h[u])},defineProperty(e,n,i){return i.get!=null?e._.accessCache[n]=0:pt(i,"value")&&this.set(e,n,i.value,null),Reflect.defineProperty(e,n,i)}};function Eu(e){return qe(e)?e.reduce((n,i)=>(n[i]=null,n),{}):e}let Ql=!0;function ov(e){const n=qh(e),i=e.proxy,r=e.ctx;Ql=!1,n.beforeCreate&&Su(n.beforeCreate,e,"bc");const{data:s,computed:a,methods:l,watch:u,provide:h,inject:p,created:f,beforeMount:v,mounted:b,beforeUpdate:C,updated:S,activated:$,deactivated:R,beforeDestroy:A,beforeUnmount:x,destroyed:w,unmounted:M,render:k,renderTracked:I,renderTriggered:E,errorCaptured:q,serverPrefetch:U,expose:Q,inheritAttrs:ce,components:re,directives:Le,filters:Z}=n;if(p&&av(p,r,null),l)for(const me in l){const he=l[me];st(he)&&(r[me]=he.bind(i))}if(s){const me=s.call(i,i);_t(me)&&(e.data=da(me))}if(Ql=!0,a)for(const me in a){const he=a[me],Ae=st(he)?he.bind(i,i):st(he.get)?he.get.bind(i,i):Qn,ee=!st(he)&&st(he.set)?he.set.bind(i):Qn,ve=ae({get:Ae,set:ee});Object.defineProperty(r,me,{enumerable:!0,configurable:!0,get:()=>ve.value,set:Ee=>ve.value=Ee})}if(u)for(const me in u)Zh(u[me],r,i,me);if(h){const me=st(h)?h.call(i):h;Reflect.ownKeys(me).forEach(he=>{nr(he,me[he])})}f&&Su(f,e,"c");function Y(me,he){qe(he)?he.forEach(Ae=>me(Ae.bind(i))):he&&me(he.bind(i))}if(Y(Gm,v),Y(kn,b),Y(Km,C),Y(Ym,S),Y(qm,$),Y(jm,R),Y(ev,q),Y(Qm,I),Y(Xm,E),Y(Hh,x),Y(As,M),Y(Jm,U),qe(Q))if(Q.length){const me=e.exposed||(e.exposed={});Q.forEach(he=>{Object.defineProperty(me,he,{get:()=>i[he],set:Ae=>i[he]=Ae,enumerable:!0})})}else e.exposed||(e.exposed={});k&&e.render===Qn&&(e.render=k),ce!=null&&(e.inheritAttrs=ce),re&&(e.components=re),Le&&(e.directives=Le),U&&zh(e)}function av(e,n,i=Qn){qe(e)&&(e=ec(e));for(const r in e){const s=e[r];let a;_t(s)?"default"in s?a=An(s.from||r,s.default,!0):a=An(s.from||r):a=An(s),Dt(a)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):n[r]=a}}function Su(e,n,i){Hn(qe(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,i)}function Zh(e,n,i,r){let s=r.includes(".")?Eh(i,r):()=>i[r];if(Rt(e)){const a=n[e];st(a)&&je(s,a)}else if(st(e))je(s,e.bind(i));else if(_t(e))if(qe(e))e.forEach(a=>Zh(a,n,i,r));else{const a=st(e.handler)?e.handler.bind(i):n[e.handler];st(a)&&je(s,a,e)}}function qh(e){const n=e.type,{mixins:i,extends:r}=n,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,u=a.get(n);let h;return u?h=u:!s.length&&!i&&!r?h=n:(h={},s.length&&s.forEach(p=>vr(h,p,l,!0)),vr(h,n,l)),_t(n)&&a.set(n,h),h}function vr(e,n,i,r=!1){const{mixins:s,extends:a}=n;a&&vr(e,a,i,!0),s&&s.forEach(l=>vr(e,l,i,!0));for(const l in n)if(!(r&&l==="expose")){const u=rv[l]||i&&i[l];e[l]=u?u(e[l],n[l]):n[l]}return e}const rv={data:Mu,props:Pu,emits:Pu,methods:Fo,computed:Fo,beforeCreate:on,created:on,beforeMount:on,mounted:on,beforeUpdate:on,updated:on,beforeDestroy:on,beforeUnmount:on,destroyed:on,unmounted:on,activated:on,deactivated:on,errorCaptured:on,serverPrefetch:on,components:Fo,directives:Fo,watch:cv,provide:Mu,inject:lv};function Mu(e,n){return n?e?function(){return qt(st(e)?e.call(this,this):e,st(n)?n.call(this,this):n)}:n:e}function lv(e,n){return Fo(ec(e),ec(n))}function ec(e){if(qe(e)){const n={};for(let i=0;i<e.length;i++)n[e[i]]=e[i];return n}return e}function on(e,n){return e?[...new Set([].concat(e,n))]:n}function Fo(e,n){return e?qt(Object.create(null),e,n):n}function Pu(e,n){return e?qe(e)&&qe(n)?[...new Set([...e,...n])]:qt(Object.create(null),Eu(e),Eu(n??{})):n}function cv(e,n){if(!e)return n;if(!n)return e;const i=qt(Object.create(null),e);for(const r in n)i[r]=on(e[r],n[r]);return i}function jh(){return{app:null,config:{isNativeTag:Kd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uv=0;function dv(e,n){return function(r,s=null){st(r)||(r=qt({},r)),s!=null&&!_t(s)&&(s=null);const a=jh(),l=new WeakSet,u=[];let h=!1;const p=a.app={_uid:uv++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Vv,get config(){return a.config},set config(f){},use(f,...v){return l.has(f)||(f&&st(f.install)?(l.add(f),f.install(p,...v)):st(f)&&(l.add(f),f(p,...v))),p},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),p},component(f,v){return v?(a.components[f]=v,p):a.components[f]},directive(f,v){return v?(a.directives[f]=v,p):a.directives[f]},mount(f,v,b){if(!h){const C=p._ceVNode||Oe(r,s);return C.appContext=a,b===!0?b="svg":b===!1&&(b=void 0),e(C,f,b),h=!0,p._container=f,f.__vue_app__=p,Fr(C.component)}},onUnmount(f){u.push(f)},unmount(){h&&(Hn(u,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(f,v){return a.provides[f]=v,p},runWithContext(f){const v=yi;yi=p;try{return f()}finally{yi=v}}};return p}}let yi=null;const hv=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${Tn(n)}Modifiers`]||e[`${Ks(n)}Modifiers`];function fv(e,n,...i){if(e.isUnmounted)return;const r=e.vnode.props||wt;let s=i;const a=n.startsWith("update:"),l=a&&hv(r,n.slice(7));l&&(l.trim&&(s=i.map(f=>Rt(f)?f.trim():f)),l.number&&(s=i.map(Er)));let u,h=r[u=Cl(n)]||r[u=Cl(Tn(n))];!h&&a&&(h=r[u=Cl(Ks(n))]),h&&Hn(h,e,6,s);const p=r[u+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Hn(p,e,6,s)}}const pv=new WeakMap;function Wh(e,n,i=!1){const r=i?pv:n.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let l={},u=!1;if(!st(e)){const h=p=>{const f=Wh(p,n,!0);f&&(u=!0,qt(l,f))};!i&&n.mixins.length&&n.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!a&&!u?(_t(e)&&r.set(e,null),null):(qe(a)?a.forEach(h=>l[h]=null):qt(l,a),_t(e)&&r.set(e,l),l)}function Nr(e,n){return!e||!xr(n)?!1:(n=n.slice(2).replace(/Once$/,""),pt(e,n[0].toLowerCase()+n.slice(1))||pt(e,Ks(n))||pt(e,n))}function $u(e){const{type:n,vnode:i,proxy:r,withProxy:s,propsOptions:[a],slots:l,attrs:u,emit:h,render:p,renderCache:f,props:v,data:b,setupState:C,ctx:S,inheritAttrs:$}=e,R=pr(e);let A,x;try{if(i.shapeFlag&4){const M=s||r,k=M;A=Jn(p.call(k,M,f,v,C,b,S)),x=u}else{const M=n;A=Jn(M.length>1?M(v,{attrs:u,slots:l,emit:h}):M(v,null)),x=n.props?u:mv(u)}}catch(M){Yo.length=0,$r(M,e,1),A=Oe(Xt)}let w=A;if(x&&$!==!1){const M=Object.keys(x),{shapeFlag:k}=w;M.length&&k&7&&(a&&M.some(yc)&&(x=vv(x,a)),w=js(w,x,!1,!0))}return i.dirs&&(w=js(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&na(w,i.transition),A=w,pr(R),A}const mv=e=>{let n;for(const i in e)(i==="class"||i==="style"||xr(i))&&((n||(n={}))[i]=e[i]);return n},vv=(e,n)=>{const i={};for(const r in e)(!yc(r)||!(r.slice(9)in n))&&(i[r]=e[r]);return i};function gv(e,n,i){const{props:r,children:s,component:a}=e,{props:l,children:u,patchFlag:h}=n,p=a.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return r?Ou(r,l,p):!!l;if(h&8){const f=n.dynamicProps;for(let v=0;v<f.length;v++){const b=f[v];if(l[b]!==r[b]&&!Nr(p,b))return!0}}}else return(s||u)&&(!u||!u.$stable)?!0:r===l?!1:r?l?Ou(r,l,p):!0:!!l;return!1}function Ou(e,n,i){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(n[a]!==e[a]&&!Nr(i,a))return!0}return!1}function _v({vnode:e,parent:n},i){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=i,n=n.parent;else break}}const Gh={},Kh=()=>Object.create(Gh),Yh=e=>Object.getPrototypeOf(e)===Gh;function yv(e,n,i,r=!1){const s={},a=Kh();e.propsDefaults=Object.create(null),Jh(e,n,s,a);for(const l in e.propsOptions[0])l in s||(s[l]=void 0);i?e.props=r?s:bh(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function bv(e,n,i,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=e,u=dt(s),[h]=e.propsOptions;let p=!1;if((r||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let v=0;v<f.length;v++){let b=f[v];if(Nr(e.emitsOptions,b))continue;const C=n[b];if(h)if(pt(a,b))C!==a[b]&&(a[b]=C,p=!0);else{const S=Tn(b);s[S]=tc(h,u,S,C,e,!1)}else C!==a[b]&&(a[b]=C,p=!0)}}}else{Jh(e,n,s,a)&&(p=!0);let f;for(const v in u)(!n||!pt(n,v)&&((f=Ks(v))===v||!pt(n,f)))&&(h?i&&(i[v]!==void 0||i[f]!==void 0)&&(s[v]=tc(h,u,v,void 0,e,!0)):delete s[v]);if(a!==u)for(const v in a)(!n||!pt(n,v))&&(delete a[v],p=!0)}p&&gs(e.attrs,"set","")}function Jh(e,n,i,r){const[s,a]=e.propsOptions;let l=!1,u;if(n)for(let h in n){if(Zo(h))continue;const p=n[h];let f;s&&pt(s,f=Tn(h))?!a||!a.includes(f)?i[f]=p:(u||(u={}))[f]=p:Nr(e.emitsOptions,h)||(!(h in r)||p!==r[h])&&(r[h]=p,l=!0)}if(a){const h=dt(i),p=u||wt;for(let f=0;f<a.length;f++){const v=a[f];i[v]=tc(s,h,v,p[v],e,!pt(p,v))}}return l}function tc(e,n,i,r,s,a){const l=e[i];if(l!=null){const u=pt(l,"default");if(u&&r===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&st(h)){const{propsDefaults:p}=s;if(i in p)r=p[i];else{const f=fa(s);r=p[i]=h.call(null,n),f()}}else r=h;s.ce&&s.ce._setProp(i,r)}l[0]&&(a&&!u?r=!1:l[1]&&(r===""||r===Ks(i))&&(r=!0))}return r}const kv=new WeakMap;function Xh(e,n,i=!1){const r=i?kv:n.propsCache,s=r.get(e);if(s)return s;const a=e.props,l={},u=[];let h=!1;if(!st(e)){const f=v=>{h=!0;const[b,C]=Xh(v,n,!0);qt(l,b),C&&u.push(...C)};!i&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!h)return _t(e)&&r.set(e,Vi),Vi;if(qe(a))for(let f=0;f<a.length;f++){const v=Tn(a[f]);Du(v)&&(l[v]=wt)}else if(a)for(const f in a){const v=Tn(f);if(Du(v)){const b=a[f],C=l[v]=qe(b)||st(b)?{type:b}:qt({},b),S=C.type;let $=!1,R=!0;if(qe(S))for(let A=0;A<S.length;++A){const x=S[A],w=st(x)&&x.name;if(w==="Boolean"){$=!0;break}else w==="String"&&(R=!1)}else $=st(S)&&S.name==="Boolean";C[0]=$,C[1]=R,($||pt(C,"default"))&&u.push(v)}}const p=[l,u];return _t(e)&&r.set(e,p),p}function Du(e){return e[0]!=="$"&&!Zo(e)}const Sc=e=>e==="_"||e==="_ctx"||e==="$stable",Mc=e=>qe(e)?e.map(Jn):[Jn(e)],wv=(e,n,i)=>{if(n._n)return n;const r=We((...s)=>Mc(n(...s)),i);return r._c=!1,r},Qh=(e,n,i)=>{const r=e._ctx;for(const s in e){if(Sc(s))continue;const a=e[s];if(st(a))n[s]=wv(s,a,r);else if(a!=null){const l=Mc(a);n[s]=()=>l}}},ef=(e,n)=>{const i=Mc(n);e.slots.default=()=>i},tf=(e,n,i)=>{for(const r in n)(i||!Sc(r))&&(e[r]=n[r])},Cv=(e,n,i)=>{const r=e.slots=Kh();if(e.vnode.shapeFlag&32){const s=n._;s?(tf(r,n,i),i&&Qd(r,"_",s,!0)):Qh(n,r)}else n&&ef(e,n)},Lv=(e,n,i)=>{const{vnode:r,slots:s}=e;let a=!0,l=wt;if(r.shapeFlag&32){const u=n._;u?i&&u===1?a=!1:tf(s,n,i):(a=!n.$stable,Qh(n,s)),l=n}else n&&(ef(e,n),l={default:1});if(a)for(const u in s)!Sc(u)&&l[u]==null&&delete s[u]},an=Ev;function xv(e){return Av(e)}function Av(e,n){const i=Sr();i.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:u,createComment:h,setText:p,setElementText:f,parentNode:v,nextSibling:b,setScopeId:C=Qn,insertStaticContent:S}=e,$=(D,z,j,le=null,fe=null,de=null,Ie=void 0,Te=null,xe=!!z.dynamicChildren)=>{if(D===z)return;D&&!hi(D,z)&&(le=V(D),Ee(D,fe,de,!0),D=null),z.patchFlag===-2&&(xe=!1,z.dynamicChildren=null);const{type:_e,ref:ze,shapeFlag:Me}=z;switch(_e){case Br:R(D,z,j,le);break;case Xt:A(D,z,j,le);break;case ir:D==null&&x(z,j,le,Ie);break;case ke:re(D,z,j,le,fe,de,Ie,Te,xe);break;default:Me&1?k(D,z,j,le,fe,de,Ie,Te,xe):Me&6?Le(D,z,j,le,fe,de,Ie,Te,xe):(Me&64||Me&128)&&_e.process(D,z,j,le,fe,de,Ie,Te,xe,we)}ze!=null&&fe?Go(ze,D&&D.ref,de,z||D,!z):ze==null&&D&&D.ref!=null&&Go(D.ref,null,de,D,!0)},R=(D,z,j,le)=>{if(D==null)r(z.el=u(z.children),j,le);else{const fe=z.el=D.el;z.children!==D.children&&p(fe,z.children)}},A=(D,z,j,le)=>{D==null?r(z.el=h(z.children||""),j,le):z.el=D.el},x=(D,z,j,le)=>{[D.el,D.anchor]=S(D.children,z,j,le,D.el,D.anchor)},w=({el:D,anchor:z},j,le)=>{let fe;for(;D&&D!==z;)fe=b(D),r(D,j,le),D=fe;r(z,j,le)},M=({el:D,anchor:z})=>{let j;for(;D&&D!==z;)j=b(D),s(D),D=j;s(z)},k=(D,z,j,le,fe,de,Ie,Te,xe)=>{if(z.type==="svg"?Ie="svg":z.type==="math"&&(Ie="mathml"),D==null)I(z,j,le,fe,de,Ie,Te,xe);else{const _e=D.el&&D.el._isVueCE?D.el:null;try{_e&&_e._beginPatch(),U(D,z,fe,de,Ie,Te,xe)}finally{_e&&_e._endPatch()}}},I=(D,z,j,le,fe,de,Ie,Te)=>{let xe,_e;const{props:ze,shapeFlag:Me,transition:Ue,dirs:Ge}=D;if(xe=D.el=l(D.type,de,ze&&ze.is,ze),Me&8?f(xe,D.children):Me&16&&q(D.children,xe,null,le,fe,Sl(D,de),Ie,Te),Ge&&ri(D,null,le,"created"),E(xe,D,D.scopeId,Ie,le),ze){for(const Je in ze)Je!=="value"&&!Zo(Je)&&a(xe,Je,null,ze[Je],de,le);"value"in ze&&a(xe,"value",null,ze.value,de),(_e=ze.onVnodeBeforeMount)&&Gn(_e,le,D)}Ge&&ri(D,null,le,"beforeMount");const Ke=Iv(fe,Ue);Ke&&Ue.beforeEnter(xe),r(xe,z,j),((_e=ze&&ze.onVnodeMounted)||Ke||Ge)&&an(()=>{_e&&Gn(_e,le,D),Ke&&Ue.enter(xe),Ge&&ri(D,null,le,"mounted")},fe)},E=(D,z,j,le,fe)=>{if(j&&C(D,j),le)for(let de=0;de<le.length;de++)C(D,le[de]);if(fe){let de=fe.subTree;if(z===de||of(de.type)&&(de.ssContent===z||de.ssFallback===z)){const Ie=fe.vnode;E(D,Ie,Ie.scopeId,Ie.slotScopeIds,fe.parent)}}},q=(D,z,j,le,fe,de,Ie,Te,xe=0)=>{for(let _e=xe;_e<D.length;_e++){const ze=D[_e]=Te?Bs(D[_e]):Jn(D[_e]);$(null,ze,z,j,le,fe,de,Ie,Te)}},U=(D,z,j,le,fe,de,Ie)=>{const Te=z.el=D.el;let{patchFlag:xe,dynamicChildren:_e,dirs:ze}=z;xe|=D.patchFlag&16;const Me=D.props||wt,Ue=z.props||wt;let Ge;if(j&&li(j,!1),(Ge=Ue.onVnodeBeforeUpdate)&&Gn(Ge,j,z,D),ze&&ri(z,D,j,"beforeUpdate"),j&&li(j,!0),(Me.innerHTML&&Ue.innerHTML==null||Me.textContent&&Ue.textContent==null)&&f(Te,""),_e?Q(D.dynamicChildren,_e,Te,j,le,Sl(z,fe),de):Ie||he(D,z,Te,null,j,le,Sl(z,fe),de,!1),xe>0){if(xe&16)ce(Te,Me,Ue,j,fe);else if(xe&2&&Me.class!==Ue.class&&a(Te,"class",null,Ue.class,fe),xe&4&&a(Te,"style",Me.style,Ue.style,fe),xe&8){const Ke=z.dynamicProps;for(let Je=0;Je<Ke.length;Je++){const He=Ke[Je],vt=Me[He],xt=Ue[He];(xt!==vt||He==="value")&&a(Te,He,vt,xt,fe,j)}}xe&1&&D.children!==z.children&&f(Te,z.children)}else!Ie&&_e==null&&ce(Te,Me,Ue,j,fe);((Ge=Ue.onVnodeUpdated)||ze)&&an(()=>{Ge&&Gn(Ge,j,z,D),ze&&ri(z,D,j,"updated")},le)},Q=(D,z,j,le,fe,de,Ie)=>{for(let Te=0;Te<z.length;Te++){const xe=D[Te],_e=z[Te],ze=xe.el&&(xe.type===ke||!hi(xe,_e)||xe.shapeFlag&198)?v(xe.el):j;$(xe,_e,ze,null,le,fe,de,Ie,!0)}},ce=(D,z,j,le,fe)=>{if(z!==j){if(z!==wt)for(const de in z)!Zo(de)&&!(de in j)&&a(D,de,z[de],null,fe,le);for(const de in j){if(Zo(de))continue;const Ie=j[de],Te=z[de];Ie!==Te&&de!=="value"&&a(D,de,Te,Ie,fe,le)}"value"in j&&a(D,"value",z.value,j.value,fe)}},re=(D,z,j,le,fe,de,Ie,Te,xe)=>{const _e=z.el=D?D.el:u(""),ze=z.anchor=D?D.anchor:u("");let{patchFlag:Me,dynamicChildren:Ue,slotScopeIds:Ge}=z;Ge&&(Te=Te?Te.concat(Ge):Ge),D==null?(r(_e,j,le),r(ze,j,le),q(z.children||[],j,ze,fe,de,Ie,Te,xe)):Me>0&&Me&64&&Ue&&D.dynamicChildren&&D.dynamicChildren.length===Ue.length?(Q(D.dynamicChildren,Ue,j,fe,de,Ie,Te),(z.key!=null||fe&&z===fe.subTree)&&Pc(D,z,!0)):he(D,z,j,ze,fe,de,Ie,Te,xe)},Le=(D,z,j,le,fe,de,Ie,Te,xe)=>{z.slotScopeIds=Te,D==null?z.shapeFlag&512?fe.ctx.activate(z,j,le,Ie,xe):Z(z,j,le,fe,de,Ie,xe):W(D,z,xe)},Z=(D,z,j,le,fe,de,Ie)=>{const Te=D.component=Rv(D,le,fe);if(Or(D)&&(Te.ctx.renderer=we),Nv(Te,!1,Ie),Te.asyncDep){if(fe&&fe.registerDep(Te,Y,Ie),!D.el){const xe=Te.subTree=Oe(Xt);A(null,xe,z,j),D.placeholder=xe.el}}else Y(Te,D,z,j,fe,de,Ie)},W=(D,z,j)=>{const le=z.component=D.component;if(gv(D,z,j))if(le.asyncDep&&!le.asyncResolved){me(le,z,j);return}else le.next=z,le.update();else z.el=D.el,le.vnode=z},Y=(D,z,j,le,fe,de,Ie)=>{const Te=()=>{if(D.isMounted){let{next:Me,bu:Ue,u:Ge,parent:Ke,vnode:Je}=D;{const gt=nf(D);if(gt){Me&&(Me.el=Je.el,me(D,Me,Ie)),gt.asyncDep.then(()=>{D.isUnmounted||Te()});return}}let He=Me,vt;li(D,!1),Me?(Me.el=Je.el,me(D,Me,Ie)):Me=Je,Ue&&tr(Ue),(vt=Me.props&&Me.props.onVnodeBeforeUpdate)&&Gn(vt,Ke,Me,Je),li(D,!0);const xt=$u(D),Ct=D.subTree;D.subTree=xt,$(Ct,xt,v(Ct.el),V(Ct),D,fe,de),Me.el=xt.el,He===null&&_v(D,xt.el),Ge&&an(Ge,fe),(vt=Me.props&&Me.props.onVnodeUpdated)&&an(()=>Gn(vt,Ke,Me,Je),fe)}else{let Me;const{el:Ue,props:Ge}=z,{bm:Ke,m:Je,parent:He,root:vt,type:xt}=D,Ct=ji(z);li(D,!1),Ke&&tr(Ke),!Ct&&(Me=Ge&&Ge.onVnodeBeforeMount)&&Gn(Me,He,z),li(D,!0);{vt.ce&&vt.ce._def.shadowRoot!==!1&&vt.ce._injectChildStyle(xt);const gt=D.subTree=$u(D);$(null,gt,j,le,D,fe,de),z.el=gt.el}if(Je&&an(Je,fe),!Ct&&(Me=Ge&&Ge.onVnodeMounted)){const gt=z;an(()=>Gn(Me,He,gt),fe)}(z.shapeFlag&256||He&&ji(He.vnode)&&He.vnode.shapeFlag&256)&&D.a&&an(D.a,fe),D.isMounted=!0,z=j=le=null}};D.scope.on();const xe=D.effect=new ah(Te);D.scope.off();const _e=D.update=xe.run.bind(xe),ze=D.job=xe.runIfDirty.bind(xe);ze.i=D,ze.id=D.uid,xe.scheduler=()=>Ec(ze),li(D,!0),_e()},me=(D,z,j)=>{z.component=D;const le=D.vnode.props;D.vnode=z,D.next=null,bv(D,z.props,le,j),Lv(D,z.children,j),ws(),wu(D),Cs()},he=(D,z,j,le,fe,de,Ie,Te,xe=!1)=>{const _e=D&&D.children,ze=D?D.shapeFlag:0,Me=z.children,{patchFlag:Ue,shapeFlag:Ge}=z;if(Ue>0){if(Ue&128){ee(_e,Me,j,le,fe,de,Ie,Te,xe);return}else if(Ue&256){Ae(_e,Me,j,le,fe,de,Ie,Te,xe);return}}Ge&8?(ze&16&&pe(_e,fe,de),Me!==_e&&f(j,Me)):ze&16?Ge&16?ee(_e,Me,j,le,fe,de,Ie,Te,xe):pe(_e,fe,de,!0):(ze&8&&f(j,""),Ge&16&&q(Me,j,le,fe,de,Ie,Te,xe))},Ae=(D,z,j,le,fe,de,Ie,Te,xe)=>{D=D||Vi,z=z||Vi;const _e=D.length,ze=z.length,Me=Math.min(_e,ze);let Ue;for(Ue=0;Ue<Me;Ue++){const Ge=z[Ue]=xe?Bs(z[Ue]):Jn(z[Ue]);$(D[Ue],Ge,j,null,fe,de,Ie,Te,xe)}_e>ze?pe(D,fe,de,!0,!1,Me):q(z,j,le,fe,de,Ie,Te,xe,Me)},ee=(D,z,j,le,fe,de,Ie,Te,xe)=>{let _e=0;const ze=z.length;let Me=D.length-1,Ue=ze-1;for(;_e<=Me&&_e<=Ue;){const Ge=D[_e],Ke=z[_e]=xe?Bs(z[_e]):Jn(z[_e]);if(hi(Ge,Ke))$(Ge,Ke,j,null,fe,de,Ie,Te,xe);else break;_e++}for(;_e<=Me&&_e<=Ue;){const Ge=D[Me],Ke=z[Ue]=xe?Bs(z[Ue]):Jn(z[Ue]);if(hi(Ge,Ke))$(Ge,Ke,j,null,fe,de,Ie,Te,xe);else break;Me--,Ue--}if(_e>Me){if(_e<=Ue){const Ge=Ue+1,Ke=Ge<ze?z[Ge].el:le;for(;_e<=Ue;)$(null,z[_e]=xe?Bs(z[_e]):Jn(z[_e]),j,Ke,fe,de,Ie,Te,xe),_e++}}else if(_e>Ue)for(;_e<=Me;)Ee(D[_e],fe,de,!0),_e++;else{const Ge=_e,Ke=_e,Je=new Map;for(_e=Ke;_e<=Ue;_e++){const yt=z[_e]=xe?Bs(z[_e]):Jn(z[_e]);yt.key!=null&&Je.set(yt.key,_e)}let He,vt=0;const xt=Ue-Ke+1;let Ct=!1,gt=0;const nn=new Array(xt);for(_e=0;_e<xt;_e++)nn[_e]=0;for(_e=Ge;_e<=Me;_e++){const yt=D[_e];if(vt>=xt){Ee(yt,fe,de,!0);continue}let et;if(yt.key!=null)et=Je.get(yt.key);else for(He=Ke;He<=Ue;He++)if(nn[He-Ke]===0&&hi(yt,z[He])){et=He;break}et===void 0?Ee(yt,fe,de,!0):(nn[et-Ke]=_e+1,et>=gt?gt=et:Ct=!0,$(yt,z[et],j,null,fe,de,Ie,Te,xe),vt++)}const jt=Ct?Tv(nn):Vi;for(He=jt.length-1,_e=xt-1;_e>=0;_e--){const yt=Ke+_e,et=z[yt],St=z[yt+1],bt=yt+1<ze?St.el||sf(St):le;nn[_e]===0?$(null,et,j,bt,fe,de,Ie,Te,xe):Ct&&(He<0||_e!==jt[He]?ve(et,j,bt,2):He--)}}},ve=(D,z,j,le,fe=null)=>{const{el:de,type:Ie,transition:Te,children:xe,shapeFlag:_e}=D;if(_e&6){ve(D.component.subTree,z,j,le);return}if(_e&128){D.suspense.move(z,j,le);return}if(_e&64){Ie.move(D,z,j,we);return}if(Ie===ke){r(de,z,j);for(let Me=0;Me<xe.length;Me++)ve(xe[Me],z,j,le);r(D.anchor,z,j);return}if(Ie===ir){w(D,z,j);return}if(le!==2&&_e&1&&Te)if(le===0)Te.beforeEnter(de),r(de,z,j),an(()=>Te.enter(de),fe);else{const{leave:Me,delayLeave:Ue,afterLeave:Ge}=Te,Ke=()=>{D.ctx.isUnmounted?s(de):r(de,z,j)},Je=()=>{de._isLeaving&&de[ms](!0),Me(de,()=>{Ke(),Ge&&Ge()})};Ue?Ue(de,Ke,Je):Je()}else r(de,z,j)},Ee=(D,z,j,le=!1,fe=!1)=>{const{type:de,props:Ie,ref:Te,children:xe,dynamicChildren:_e,shapeFlag:ze,patchFlag:Me,dirs:Ue,cacheIndex:Ge}=D;if(Me===-2&&(fe=!1),Te!=null&&(ws(),Go(Te,null,j,D,!0),Cs()),Ge!=null&&(z.renderCache[Ge]=void 0),ze&256){z.ctx.deactivate(D);return}const Ke=ze&1&&Ue,Je=!ji(D);let He;if(Je&&(He=Ie&&Ie.onVnodeBeforeUnmount)&&Gn(He,z,D),ze&6)ue(D.component,j,le);else{if(ze&128){D.suspense.unmount(j,le);return}Ke&&ri(D,null,z,"beforeUnmount"),ze&64?D.type.remove(D,z,j,we,le):_e&&!_e.hasOnce&&(de!==ke||Me>0&&Me&64)?pe(_e,z,j,!1,!0):(de===ke&&Me&384||!fe&&ze&16)&&pe(xe,z,j),le&&Be(D)}(Je&&(He=Ie&&Ie.onVnodeUnmounted)||Ke)&&an(()=>{He&&Gn(He,z,D),Ke&&ri(D,null,z,"unmounted")},j)},Be=D=>{const{type:z,el:j,anchor:le,transition:fe}=D;if(z===ke){ge(j,le);return}if(z===ir){M(D);return}const de=()=>{s(j),fe&&!fe.persisted&&fe.afterLeave&&fe.afterLeave()};if(D.shapeFlag&1&&fe&&!fe.persisted){const{leave:Ie,delayLeave:Te}=fe,xe=()=>Ie(j,de);Te?Te(D.el,de,xe):xe()}else de()},ge=(D,z)=>{let j;for(;D!==z;)j=b(D),s(D),D=j;s(z)},ue=(D,z,j)=>{const{bum:le,scope:fe,job:de,subTree:Ie,um:Te,m:xe,a:_e}=D;Ru(xe),Ru(_e),le&&tr(le),fe.stop(),de&&(de.flags|=8,Ee(Ie,D,z,j)),Te&&an(Te,z),an(()=>{D.isUnmounted=!0},z)},pe=(D,z,j,le=!1,fe=!1,de=0)=>{for(let Ie=de;Ie<D.length;Ie++)Ee(D[Ie],z,j,le,fe)},V=D=>{if(D.shapeFlag&6)return V(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const z=b(D.anchor||D.el),j=z&&z[Sh];return j?b(j):z};let J=!1;const te=(D,z,j)=>{let le;D==null?z._vnode&&(Ee(z._vnode,null,null,!0),le=z._vnode.component):$(z._vnode||null,D,z,null,null,null,j),z._vnode=D,J||(J=!0,wu(le),xh(),J=!1)},we={p:$,um:Ee,m:ve,r:Be,mt:Z,mc:q,pc:he,pbc:Q,n:V,o:e};return{render:te,hydrate:void 0,createApp:dv(te)}}function Sl({type:e,props:n},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:i}function li({effect:e,job:n},i){i?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function Iv(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Pc(e,n,i=!1){const r=e.children,s=n.children;if(qe(r)&&qe(s))for(let a=0;a<r.length;a++){const l=r[a];let u=s[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=s[a]=Bs(s[a]),u.el=l.el),!i&&u.patchFlag!==-2&&Pc(l,u)),u.type===Br&&(u.patchFlag!==-1?u.el=l.el:u.__elIndex=a+(e.type===ke?1:0)),u.type===Xt&&!u.el&&(u.el=l.el)}}function Tv(e){const n=e.slice(),i=[0];let r,s,a,l,u;const h=e.length;for(r=0;r<h;r++){const p=e[r];if(p!==0){if(s=i[i.length-1],e[s]<p){n[r]=s,i.push(r);continue}for(a=0,l=i.length-1;a<l;)u=a+l>>1,e[i[u]]<p?a=u+1:l=u;p<e[i[a]]&&(a>0&&(n[r]=i[a-1]),i[a]=r)}}for(a=i.length,l=i[a-1];a-- >0;)i[a]=l,l=n[l];return i}function nf(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:nf(n)}function Ru(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function sf(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?sf(n.subTree):null}const of=e=>e.__isSuspense;function Ev(e,n){n&&n.pendingBranch?qe(e)?n.effects.push(...e):n.effects.push(e):Dm(e)}const ke=Symbol.for("v-fgt"),Br=Symbol.for("v-txt"),Xt=Symbol.for("v-cmt"),ir=Symbol.for("v-stc"),Yo=[];let yn=null;function g(e=!1){Yo.push(yn=e?null:[])}function Sv(){Yo.pop(),yn=Yo[Yo.length-1]||null}let sa=1;function gr(e,n=!1){sa+=e,e<0&&yn&&n&&(yn.hasOnce=!0)}function af(e){return e.dynamicChildren=sa>0?yn||Vi:null,Sv(),sa>0&&yn&&yn.push(e),e}function y(e,n,i,r,s,a){return af(d(e,n,i,r,s,a,!0))}function nt(e,n,i,r,s){return af(Oe(e,n,i,r,s,!0))}function ia(e){return e?e.__v_isVNode===!0:!1}function hi(e,n){return e.type===n.type&&e.key===n.key}const rf=({key:e})=>e??null,or=({ref:e,ref_key:n,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||Dt(e)||st(e)?{i:Gt,r:e,k:n,f:!!i}:e:null);function d(e,n=null,i=null,r=0,s=null,a=e===ke?0:1,l=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&rf(n),ref:n&&or(n),scopeId:Ih,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Gt};return u?($c(h,i),a&128&&e.normalize(h)):i&&(h.shapeFlag|=Rt(i)?8:16),sa>0&&!l&&yn&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&yn.push(h),h}const Oe=Mv;function Mv(e,n=null,i=null,r=0,s=null,a=!1){if((!e||e===nv)&&(e=Xt),ia(e)){const u=js(e,n,!0);return i&&$c(u,i),sa>0&&!a&&yn&&(u.shapeFlag&6?yn[yn.indexOf(e)]=u:yn.push(u)),u.patchFlag=-2,u}if(Hv(e)&&(e=e.__vccOpts),n){n=Pv(n);let{class:u,style:h}=n;u&&!Rt(u)&&(n.class=Fe(u)),_t(h)&&(Pr(h)&&!qe(h)&&(h=qt({},h)),n.style=tn(h))}const l=Rt(e)?1:of(e)?128:Mh(e)?64:_t(e)?4:st(e)?2:0;return d(e,n,i,r,s,l,a,!0)}function Pv(e){return e?Pr(e)||Yh(e)?qt({},e):e:null}function js(e,n,i=!1,r=!1){const{props:s,ref:a,patchFlag:l,children:u,transition:h}=e,p=n?lf(s||{},n):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&rf(p),ref:n&&n.ref?i&&a?qe(a)?a.concat(or(n)):[a,or(n)]:or(n):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==ke?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&js(e.ssContent),ssFallback:e.ssFallback&&js(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&r&&na(f,h.clone(f)),f}function Ve(e=" ",n=0){return Oe(Br,null,e,n)}function $v(e,n){const i=Oe(ir,null,e);return i.staticCount=n,i}function B(e="",n=!1){return n?(g(),nt(Xt,null,e)):Oe(Xt,null,e)}function Jn(e){return e==null||typeof e=="boolean"?Oe(Xt):qe(e)?Oe(ke,null,e.slice()):ia(e)?Bs(e):Oe(Br,null,String(e))}function Bs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:js(e)}function $c(e,n){let i=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(qe(n))i=16;else if(typeof n=="object")if(r&65){const s=n.default;s&&(s._c&&(s._d=!1),$c(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=n._;!s&&!Yh(n)?n._ctx=Gt:s===3&&Gt&&(Gt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else st(n)?(n={default:n,_ctx:Gt},i=32):(n=String(n),r&64?(i=16,n=[Ve(n)]):i=8);e.children=n,e.shapeFlag|=i}function lf(...e){const n={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")n.class!==r.class&&(n.class=Fe([n.class,r.class]));else if(s==="style")n.style=tn([n.style,r.style]);else if(xr(s)){const a=n[s],l=r[s];l&&a!==l&&!(qe(a)&&a.includes(l))&&(n[s]=a?[].concat(a,l):l)}else s!==""&&(n[s]=r[s])}return n}function Gn(e,n,i,r=null){Hn(e,n,7,[i,r])}const Ov=jh();let Dv=0;function Rv(e,n,i){const r=e.type,s=(n?n.appContext:e.appContext)||Ov,a={uid:Dv++,vnode:e,type:r,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new sh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xh(r,s),emitsOptions:Wh(r,s),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=n?n.root:a,a.emit=fv.bind(null,a),e.ce&&e.ce(a),a}let Qt=null;const Oc=()=>Qt||Gt;let _r,nc;{const e=Sr(),n=(i,r)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(r),a=>{s.length>1?s.forEach(l=>l(a)):s[0](a)}};_r=n("__VUE_INSTANCE_SETTERS__",i=>Qt=i),nc=n("__VUE_SSR_SETTERS__",i=>oa=i)}const fa=e=>{const n=Qt;return _r(e),e.scope.on(),()=>{e.scope.off(),_r(n)}},Nu=()=>{Qt&&Qt.scope.off(),_r(null)};function cf(e){return e.vnode.shapeFlag&4}let oa=!1;function Nv(e,n=!1,i=!1){n&&nc(n);const{props:r,children:s}=e.vnode,a=cf(e);yv(e,r,a,n),Cv(e,s,i||n);const l=a?Bv(e,n):void 0;return n&&nc(!1),l}function Bv(e,n){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,iv);const{setup:r}=i;if(r){ws();const s=e.setupContext=r.length>1?zv(e):null,a=fa(e),l=ha(r,e,0,[e.props,s]),u=Yd(l);if(Cs(),a(),(u||e.sp)&&!ji(e)&&zh(e),u){if(l.then(Nu,Nu),n)return l.then(h=>{Bu(e,h)}).catch(h=>{$r(h,e,0)});e.asyncDep=l}else Bu(e,l)}else uf(e)}function Bu(e,n,i){st(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:_t(n)&&(e.setupState=wh(n)),uf(e)}function uf(e,n,i){const r=e.type;e.render||(e.render=r.render||Qn);{const s=fa(e);ws();try{ov(e)}finally{Cs(),s()}}}const Fv={get(e,n){return Jt(e,"get",""),e[n]}};function zv(e){const n=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Fv),slots:e.slots,emit:e.emit,expose:n}}function Fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(wh(Tc(e.exposed)),{get(n,i){if(i in n)return n[i];if(i in Ko)return Ko[i](e)},has(n,i){return i in n||i in Ko}})):e.proxy}function Uv(e,n=!0){return st(e)?e.displayName||e.name:e.name||n&&e.__name}function Hv(e){return st(e)&&"__vccOpts"in e}const ae=(e,n)=>Sm(e,n,oa);function Dc(e,n,i){try{gr(-1);const r=arguments.length;return r===2?_t(n)&&!qe(n)?ia(n)?Oe(e,null,[n]):Oe(e,n):Oe(e,null,n):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&ia(i)&&(i=[i]),Oe(e,n,i))}finally{gr(1)}}const Vv="3.5.26";let sc;const Fu=typeof window<"u"&&window.trustedTypes;if(Fu)try{sc=Fu.createPolicy("vue",{createHTML:e=>e})}catch{}const df=sc?e=>sc.createHTML(e):e=>e,Zv="http://www.w3.org/2000/svg",qv="http://www.w3.org/1998/Math/MathML",ps=typeof document<"u"?document:null,zu=ps&&ps.createElement("template"),jv={insert:(e,n,i)=>{n.insertBefore(e,i||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,i,r)=>{const s=n==="svg"?ps.createElementNS(Zv,e):n==="mathml"?ps.createElementNS(qv,e):i?ps.createElement(e,{is:i}):ps.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>ps.createTextNode(e),createComment:e=>ps.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ps.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,i,r,s,a){const l=i?i.previousSibling:n.lastChild;if(s&&(s===a||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),i),!(s===a||!(s=s.nextSibling)););else{zu.innerHTML=df(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=zu.content;if(r==="svg"||r==="mathml"){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}n.insertBefore(u,i)}return[l?l.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}},$s="transition",Oo="animation",aa=Symbol("_vtc"),hf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Wv=qt({},Oh,hf),Gv=e=>(e.displayName="Transition",e.props=Wv,e),Ml=Gv((e,{slots:n})=>Dc(Zm,Kv(e),n)),ci=(e,n=[])=>{qe(e)?e.forEach(i=>i(...n)):e&&e(...n)},Uu=e=>e?qe(e)?e.some(n=>n.length>1):e.length>1:!1;function Kv(e){const n={};for(const re in e)re in hf||(n[re]=e[re]);if(e.css===!1)return n;const{name:i="v",type:r,duration:s,enterFromClass:a=`${i}-enter-from`,enterActiveClass:l=`${i}-enter-active`,enterToClass:u=`${i}-enter-to`,appearFromClass:h=a,appearActiveClass:p=l,appearToClass:f=u,leaveFromClass:v=`${i}-leave-from`,leaveActiveClass:b=`${i}-leave-active`,leaveToClass:C=`${i}-leave-to`}=e,S=Yv(s),$=S&&S[0],R=S&&S[1],{onBeforeEnter:A,onEnter:x,onEnterCancelled:w,onLeave:M,onLeaveCancelled:k,onBeforeAppear:I=A,onAppear:E=x,onAppearCancelled:q=w}=n,U=(re,Le,Z,W)=>{re._enterCancelled=W,ui(re,Le?f:u),ui(re,Le?p:l),Z&&Z()},Q=(re,Le)=>{re._isLeaving=!1,ui(re,v),ui(re,C),ui(re,b),Le&&Le()},ce=re=>(Le,Z)=>{const W=re?E:x,Y=()=>U(Le,re,Z);ci(W,[Le,Y]),Hu(()=>{ui(Le,re?h:a),hs(Le,re?f:u),Uu(W)||Vu(Le,r,$,Y)})};return qt(n,{onBeforeEnter(re){ci(A,[re]),hs(re,a),hs(re,l)},onBeforeAppear(re){ci(I,[re]),hs(re,h),hs(re,p)},onEnter:ce(!1),onAppear:ce(!0),onLeave(re,Le){re._isLeaving=!0;const Z=()=>Q(re,Le);hs(re,v),re._enterCancelled?(hs(re,b),ju(re)):(ju(re),hs(re,b)),Hu(()=>{re._isLeaving&&(ui(re,v),hs(re,C),Uu(M)||Vu(re,r,R,Z))}),ci(M,[re,Z])},onEnterCancelled(re){U(re,!1,void 0,!0),ci(w,[re])},onAppearCancelled(re){U(re,!0,void 0,!0),ci(q,[re])},onLeaveCancelled(re){Q(re),ci(k,[re])}})}function Yv(e){if(e==null)return null;if(_t(e))return[Pl(e.enter),Pl(e.leave)];{const n=Pl(e);return[n,n]}}function Pl(e){return Kp(e)}function hs(e,n){n.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[aa]||(e[aa]=new Set)).add(n)}function ui(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const i=e[aa];i&&(i.delete(n),i.size||(e[aa]=void 0))}function Hu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Jv=0;function Vu(e,n,i,r){const s=e._endId=++Jv,a=()=>{s===e._endId&&r()};if(i!=null)return setTimeout(a,i);const{type:l,timeout:u,propCount:h}=Xv(e,n);if(!l)return r();const p=l+"end";let f=0;const v=()=>{e.removeEventListener(p,b),a()},b=C=>{C.target===e&&++f>=h&&v()};setTimeout(()=>{f<h&&v()},u+1),e.addEventListener(p,b)}function Xv(e,n){const i=window.getComputedStyle(e),r=S=>(i[S]||"").split(", "),s=r(`${$s}Delay`),a=r(`${$s}Duration`),l=Zu(s,a),u=r(`${Oo}Delay`),h=r(`${Oo}Duration`),p=Zu(u,h);let f=null,v=0,b=0;n===$s?l>0&&(f=$s,v=l,b=a.length):n===Oo?p>0&&(f=Oo,v=p,b=h.length):(v=Math.max(l,p),f=v>0?l>p?$s:Oo:null,b=f?f===$s?a.length:h.length:0);const C=f===$s&&/\b(?:transform|all)(?:,|$)/.test(r(`${$s}Property`).toString());return{type:f,timeout:v,propCount:b,hasTransform:C}}function Zu(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((i,r)=>qu(i)+qu(e[r])))}function qu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ju(e){return(e?e.ownerDocument:document).body.offsetHeight}function Qv(e,n,i){const r=e[aa];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):i?e.setAttribute("class",n):e.className=n}const yr=Symbol("_vod"),ff=Symbol("_vsh"),Ws={name:"show",beforeMount(e,{value:n},{transition:i}){e[yr]=e.style.display==="none"?"":e.style.display,i&&n?i.beforeEnter(e):Do(e,n)},mounted(e,{value:n},{transition:i}){i&&n&&i.enter(e)},updated(e,{value:n,oldValue:i},{transition:r}){!n!=!i&&(r?n?(r.beforeEnter(e),Do(e,!0),r.enter(e)):r.leave(e,()=>{Do(e,!1)}):Do(e,n))},beforeUnmount(e,{value:n}){Do(e,n)}};function Do(e,n){e.style.display=n?e[yr]:"none",e[ff]=!n}const eg=Symbol(""),tg=/(?:^|;)\s*display\s*:/;function ng(e,n,i){const r=e.style,s=Rt(i);let a=!1;if(i&&!s){if(n)if(Rt(n))for(const l of n.split(";")){const u=l.slice(0,l.indexOf(":")).trim();i[u]==null&&ar(r,u,"")}else for(const l in n)i[l]==null&&ar(r,l,"");for(const l in i)l==="display"&&(a=!0),ar(r,l,i[l])}else if(s){if(n!==i){const l=r[eg];l&&(i+=";"+l),r.cssText=i,a=tg.test(i)}}else n&&e.removeAttribute("style");yr in e&&(e[yr]=a?r.display:"",e[ff]&&(r.display="none"))}const Wu=/\s*!important$/;function ar(e,n,i){if(qe(i))i.forEach(r=>ar(e,n,r));else if(i==null&&(i=""),n.startsWith("--"))e.setProperty(n,i);else{const r=sg(e,n);Wu.test(i)?e.setProperty(Ks(r),i.replace(Wu,""),"important"):e[r]=i}}const Gu=["Webkit","Moz","ms"],$l={};function sg(e,n){const i=$l[n];if(i)return i;let r=Tn(n);if(r!=="filter"&&r in e)return $l[n]=r;r=Tr(r);for(let s=0;s<Gu.length;s++){const a=Gu[s]+r;if(a in e)return $l[n]=a}return n}const Ku="http://www.w3.org/1999/xlink";function Yu(e,n,i,r,s,a=tm(n)){r&&n.startsWith("xlink:")?i==null?e.removeAttributeNS(Ku,n.slice(6,n.length)):e.setAttributeNS(Ku,n,i):i==null||a&&!eh(i)?e.removeAttribute(n):e.setAttribute(n,a?"":zn(i)?String(i):i)}function Ju(e,n,i,r,s){if(n==="innerHTML"||n==="textContent"){i!=null&&(e[n]=n==="innerHTML"?df(i):i);return}const a=e.tagName;if(n==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(u!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(n),e._value=i;return}let l=!1;if(i===""||i==null){const u=typeof e[n];u==="boolean"?i=eh(i):i==null&&u==="string"?(i="",l=!0):u==="number"&&(i=0,l=!0)}try{e[n]=i}catch{}l&&e.removeAttribute(s||n)}function ys(e,n,i,r){e.addEventListener(n,i,r)}function ig(e,n,i,r){e.removeEventListener(n,i,r)}const Xu=Symbol("_vei");function og(e,n,i,r,s=null){const a=e[Xu]||(e[Xu]={}),l=a[n];if(r&&l)l.value=r;else{const[u,h]=ag(n);if(r){const p=a[n]=cg(r,s);ys(e,u,p,h)}else l&&(ig(e,u,l,h),a[n]=void 0)}}const Qu=/(?:Once|Passive|Capture)$/;function ag(e){let n;if(Qu.test(e)){n={};let r;for(;r=e.match(Qu);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ks(e.slice(2)),n]}let Ol=0;const rg=Promise.resolve(),lg=()=>Ol||(rg.then(()=>Ol=0),Ol=Date.now());function cg(e,n){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Hn(ug(r,i.value),n,5,[r])};return i.value=e,i.attached=lg(),i}function ug(e,n){if(qe(n)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},n.map(r=>s=>!s._stopped&&r&&r(s))}else return n}const ed=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,dg=(e,n,i,r,s,a)=>{const l=s==="svg";n==="class"?Qv(e,r,l):n==="style"?ng(e,i,r):xr(n)?yc(n)||og(e,n,i,r,a):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):hg(e,n,r,l))?(Ju(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Yu(e,n,r,l,a,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Rt(r))?Ju(e,Tn(n),r,a,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),Yu(e,n,r,l))};function hg(e,n,i,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&ed(n)&&st(i));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ed(n)&&Rt(i)?!1:n in e}const Gs=e=>{const n=e.props["onUpdate:modelValue"]||!1;return qe(n)?i=>tr(n,i):n};function fg(e){e.target.composing=!0}function td(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const In=Symbol("_assign");function nd(e,n,i){return n&&(e=e.trim()),i&&(e=Er(e)),e}const it={created(e,{modifiers:{lazy:n,trim:i,number:r}},s){e[In]=Gs(s);const a=r||s.props&&s.props.type==="number";ys(e,n?"change":"input",l=>{l.target.composing||e[In](nd(e.value,i,a))}),(i||a)&&ys(e,"change",()=>{e.value=nd(e.value,i,a)}),n||(ys(e,"compositionstart",fg),ys(e,"compositionend",td),ys(e,"change",td))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:i,modifiers:{lazy:r,trim:s,number:a}},l){if(e[In]=Gs(l),e.composing)return;const u=(a||e.type==="number")&&!/^0\d/.test(e.value)?Er(e.value):e.value,h=n??"";u!==h&&(document.activeElement===e&&e.type!=="range"&&(r&&n===i||s&&e.value.trim()===h)||(e.value=h))}},Wi={deep:!0,created(e,n,i){e[In]=Gs(i),ys(e,"change",()=>{const r=e._modelValue,s=Ji(e),a=e.checked,l=e[In];if(qe(r)){const u=kc(r,s),h=u!==-1;if(a&&!h)l(r.concat(s));else if(!a&&h){const p=[...r];p.splice(u,1),l(p)}}else if(to(r)){const u=new Set(r);a?u.add(s):u.delete(s),l(u)}else l(pf(e,a))})},mounted:sd,beforeUpdate(e,n,i){e[In]=Gs(i),sd(e,n,i)}};function sd(e,{value:n,oldValue:i},r){e._modelValue=n;let s;if(qe(n))s=kc(n,r.props.value)>-1;else if(to(n))s=n.has(r.props.value);else{if(n===i)return;s=ki(n,pf(e,!0))}e.checked!==s&&(e.checked=s)}const id={created(e,{value:n},i){e.checked=ki(n,i.props.value),e[In]=Gs(i),ys(e,"change",()=>{e[In](Ji(e))})},beforeUpdate(e,{value:n,oldValue:i},r){e[In]=Gs(r),n!==i&&(e.checked=ki(n,r.props.value))}},_n={deep:!0,created(e,{value:n,modifiers:{number:i}},r){const s=to(n);ys(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>i?Er(Ji(l)):Ji(l));e[In](e.multiple?s?new Set(a):a:a[0]),e._assigning=!0,Yi(()=>{e._assigning=!1})}),e[In]=Gs(r)},mounted(e,{value:n}){od(e,n)},beforeUpdate(e,n,i){e[In]=Gs(i)},updated(e,{value:n}){e._assigning||od(e,n)}};function od(e,n){const i=e.multiple,r=qe(n);if(!(i&&!r&&!to(n))){for(let s=0,a=e.options.length;s<a;s++){const l=e.options[s],u=Ji(l);if(i)if(r){const h=typeof u;h==="string"||h==="number"?l.selected=n.some(p=>String(p)===String(u)):l.selected=kc(n,u)>-1}else l.selected=n.has(u);else if(ki(Ji(l),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ji(e){return"_value"in e?e._value:e.value}function pf(e,n){const i=n?"_trueValue":"_falseValue";return i in e?e[i]:n}const pg=["ctrl","shift","alt","meta"],mg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>pg.some(i=>e[`${i}Key`]&&!n.includes(i))},Tt=(e,n)=>{const i=e._withMods||(e._withMods={}),r=n.join(".");return i[r]||(i[r]=((s,...a)=>{for(let l=0;l<n.length;l++){const u=mg[n[l]];if(u&&u(s,n))return}return e(s,...a)}))},vg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mf=(e,n)=>{const i=e._withKeys||(e._withKeys={}),r=n.join(".");return i[r]||(i[r]=(s=>{if(!("key"in s))return;const a=Ks(s.key);if(n.some(l=>l===a||vg[l]===a))return e(s)}))},gg=qt({patchProp:dg},jv);let ad;function _g(){return ad||(ad=xv(gg))}const yg=((...e)=>{const n=_g().createApp(...e),{mount:i}=n;return n.mount=r=>{const s=kg(r);if(!s)return;const a=n._component;!st(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=i(s,!1,bg(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},n});function bg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function kg(e){return Rt(e)?document.querySelector(e):e}let vf;const zr=e=>vf=e,gf=Symbol();function ic(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Jo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Jo||(Jo={}));function wg(){const e=ih(!0),n=e.run(()=>O({}));let i=[],r=[];const s=Tc({install(a){zr(s),s._a=a,a.provide(gf,s),a.config.globalProperties.$pinia=s,r.forEach(l=>i.push(l)),r=[]},use(a){return this._a?i.push(a):r.push(a),this},_p:i,_a:null,_e:e,_s:new Map,state:n});return s}const _f=()=>{};function rd(e,n,i,r=_f){e.add(n);const s=()=>{e.delete(n)&&r()};return!i&&oh()&&sm(s),s}function Fi(e,...n){e.forEach(i=>{i(...n)})}const Cg=e=>e(),ld=Symbol(),Dl=Symbol();function oc(e,n){e instanceof Map&&n instanceof Map?n.forEach((i,r)=>e.set(r,i)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i],s=e[i];ic(s)&&ic(r)&&e.hasOwnProperty(i)&&!Dt(r)&&!ks(r)?e[i]=oc(s,r):e[i]=r}return e}const Lg=Symbol();function xg(e){return!ic(e)||!Object.prototype.hasOwnProperty.call(e,Lg)}const{assign:Ds}=Object;function Ag(e){return!!(Dt(e)&&e.effect)}function Ig(e,n,i,r){const{state:s,actions:a,getters:l}=n,u=i.state.value[e];let h;function p(){u||(i.state.value[e]=s?s():{});const f=Am(i.state.value[e]);return Ds(f,a,Object.keys(l||{}).reduce((v,b)=>(v[b]=Tc(ae(()=>{zr(i);const C=i._s.get(e);return l[b].call(C,C)})),v),{}))}return h=yf(e,p,n,i,r,!0),h}function yf(e,n,i={},r,s,a){let l;const u=Ds({actions:{}},i),h={deep:!0};let p,f,v=new Set,b=new Set,C;const S=r.state.value[e];!a&&!S&&(r.state.value[e]={}),O({});let $;function R(q){let U;p=f=!1,typeof q=="function"?(q(r.state.value[e]),U={type:Jo.patchFunction,storeId:e,events:C}):(oc(r.state.value[e],q),U={type:Jo.patchObject,payload:q,storeId:e,events:C});const Q=$=Symbol();Yi().then(()=>{$===Q&&(p=!0)}),f=!0,Fi(v,U,r.state.value[e])}const A=a?function(){const{state:U}=i,Q=U?U():{};this.$patch(ce=>{Ds(ce,Q)})}:_f;function x(){l.stop(),v.clear(),b.clear(),r._s.delete(e)}const w=(q,U="")=>{if(ld in q)return q[Dl]=U,q;const Q=function(){zr(r);const ce=Array.from(arguments),re=new Set,Le=new Set;function Z(me){re.add(me)}function W(me){Le.add(me)}Fi(b,{args:ce,name:Q[Dl],store:k,after:Z,onError:W});let Y;try{Y=q.apply(this&&this.$id===e?this:k,ce)}catch(me){throw Fi(Le,me),me}return Y instanceof Promise?Y.then(me=>(Fi(re,me),me)).catch(me=>(Fi(Le,me),Promise.reject(me))):(Fi(re,Y),Y)};return Q[ld]=!0,Q[Dl]=U,Q},M={_p:r,$id:e,$onAction:rd.bind(null,b),$patch:R,$reset:A,$subscribe(q,U={}){const Q=rd(v,q,U.detached,()=>ce()),ce=l.run(()=>je(()=>r.state.value[e],re=>{(U.flush==="sync"?f:p)&&q({storeId:e,type:Jo.direct,events:C},re)},Ds({},h,U)));return Q},$dispose:x},k=da(M);r._s.set(e,k);const E=(r._a&&r._a.runWithContext||Cg)(()=>r._e.run(()=>(l=ih()).run(()=>n({action:w}))));for(const q in E){const U=E[q];if(Dt(U)&&!Ag(U)||ks(U))a||(S&&xg(U)&&(Dt(U)?U.value=S[q]:oc(U,S[q])),r.state.value[e][q]=U);else if(typeof U=="function"){const Q=w(U,q);E[q]=Q,u.actions[q]=U}}return Ds(k,E),Ds(dt(k),E),Object.defineProperty(k,"$state",{get:()=>r.state.value[e],set:q=>{R(U=>{Ds(U,q)})}}),r._p.forEach(q=>{Ds(k,l.run(()=>q({store:k,app:r._a,pinia:r,options:u})))}),S&&a&&i.hydrate&&i.hydrate(k.$state,S),p=!0,f=!0,k}function Rc(e,n,i){let r;const s=typeof n=="function";r=s?i:n;function a(l,u){const h=Rm();return l=l||(h?An(gf,null):null),l&&zr(l),l=vf,l._s.has(e)||(s?yf(e,n,r,l):Ig(e,r,l)),l._s.get(e)}return a.$id=e,a}const Ze=(e,n)=>{const i=e.__vccOpts||e;for(const[r,s]of n)i[r]=s;return i},Tg={},Eg={id:"app"};function Sg(e,n){const i=Rr("router-view");return g(),y("div",Eg,[Oe(i)])}const Mg=Ze(Tg,[["render",Sg]]);const Ui=typeof document<"u";function bf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Pg(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&bf(e.default)}const ft=Object.assign;function Rl(e,n){const i={};for(const r in n){const s=n[r];i[r]=Vn(s)?s.map(e):e(s)}return i}const Xo=()=>{},Vn=Array.isArray;function cd(e,n){const i={};for(const r in e)i[r]=r in n?n[r]:e[r];return i}const kf=/#/g,$g=/&/g,Og=/\//g,Dg=/=/g,Rg=/\?/g,wf=/\+/g,Ng=/%5B/g,Bg=/%5D/g,Cf=/%5E/g,Fg=/%60/g,Lf=/%7B/g,zg=/%7C/g,xf=/%7D/g,Ug=/%20/g;function Nc(e){return e==null?"":encodeURI(""+e).replace(zg,"|").replace(Ng,"[").replace(Bg,"]")}function Hg(e){return Nc(e).replace(Lf,"{").replace(xf,"}").replace(Cf,"^")}function ac(e){return Nc(e).replace(wf,"%2B").replace(Ug,"+").replace(kf,"%23").replace($g,"%26").replace(Fg,"`").replace(Lf,"{").replace(xf,"}").replace(Cf,"^")}function Vg(e){return ac(e).replace(Dg,"%3D")}function Zg(e){return Nc(e).replace(kf,"%23").replace(Rg,"%3F")}function qg(e){return Zg(e).replace(Og,"%2F")}function ra(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const jg=/\/$/,Wg=e=>e.replace(jg,"");function Nl(e,n,i="/"){let r,s={},a="",l="";const u=n.indexOf("#");let h=n.indexOf("?");return h=u>=0&&h>u?-1:h,h>=0&&(r=n.slice(0,h),a=n.slice(h,u>0?u:n.length),s=e(a.slice(1))),u>=0&&(r=r||n.slice(0,u),l=n.slice(u,n.length)),r=Jg(r??n,i),{fullPath:r+a+l,path:r,query:s,hash:ra(l)}}function Gg(e,n){const i=n.query?e(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function ud(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Kg(e,n,i){const r=n.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&Xi(n.matched[r],i.matched[s])&&Af(n.params,i.params)&&e(n.query)===e(i.query)&&n.hash===i.hash}function Xi(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Af(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!Yg(e[i],n[i]))return!1;return!0}function Yg(e,n){return Vn(e)?dd(e,n):Vn(n)?dd(n,e):e?.valueOf()===n?.valueOf()}function dd(e,n){return Vn(n)?e.length===n.length&&e.every((i,r)=>i===n[r]):e.length===1&&e[0]===n}function Jg(e,n){if(e.startsWith("/"))return e;if(!e)return n;const i=n.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=i.length-1,l,u;for(l=0;l<r.length;l++)if(u=r[l],u!==".")if(u==="..")a>1&&a--;else break;return i.slice(0,a).join("/")+"/"+r.slice(l).join("/")}const Os={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let rc=(function(e){return e.pop="pop",e.push="push",e})({}),Bl=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Xg(e){if(!e)if(Ui){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Wg(e)}const Qg=/^[^#]+#/;function e_(e,n){return e.replace(Qg,"#")+n}function t_(e,n){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-i.left-(n.left||0),top:r.top-i.top-(n.top||0)}}const Ur=()=>({left:window.scrollX,top:window.scrollY});function n_(e){let n;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;n=t_(s,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function hd(e,n){return(history.state?history.state.position-n:-1)+e}const lc=new Map;function s_(e,n){lc.set(e,n)}function i_(e){const n=lc.get(e);return lc.delete(e),n}function o_(e){return typeof e=="string"||e&&typeof e=="object"}function If(e){return typeof e=="string"||typeof e=="symbol"}let Ot=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Tf=Symbol("");Ot.MATCHER_NOT_FOUND+"",Ot.NAVIGATION_GUARD_REDIRECT+"",Ot.NAVIGATION_ABORTED+"",Ot.NAVIGATION_CANCELLED+"",Ot.NAVIGATION_DUPLICATED+"";function Qi(e,n){return ft(new Error,{type:e,[Tf]:!0},n)}function fs(e,n){return e instanceof Error&&Tf in e&&(n==null||!!(e.type&n))}const a_=["params","query","hash"];function r_(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const i of a_)i in e&&(n[i]=e[i]);return JSON.stringify(n,null,2)}function l_(e){const n={};if(e===""||e==="?")return n;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(wf," "),a=s.indexOf("="),l=ra(a<0?s:s.slice(0,a)),u=a<0?null:ra(s.slice(a+1));if(l in n){let h=n[l];Vn(h)||(h=n[l]=[h]),h.push(u)}else n[l]=u}return n}function fd(e){let n="";for(let i in e){const r=e[i];if(i=Vg(i),r==null){r!==void 0&&(n+=(n.length?"&":"")+i);continue}(Vn(r)?r.map(s=>s&&ac(s)):[r&&ac(r)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+i,s!=null&&(n+="="+s))})}return n}function c_(e){const n={};for(const i in e){const r=e[i];r!==void 0&&(n[i]=Vn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return n}const u_=Symbol(""),pd=Symbol(""),Hr=Symbol(""),Bc=Symbol(""),cc=Symbol("");function Ro(){let e=[];function n(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:n,list:()=>e.slice(),reset:i}}function Fs(e,n,i,r,s,a=l=>l()){const l=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((u,h)=>{const p=b=>{b===!1?h(Qi(Ot.NAVIGATION_ABORTED,{from:i,to:n})):b instanceof Error?h(b):o_(b)?h(Qi(Ot.NAVIGATION_GUARD_REDIRECT,{from:n,to:b})):(l&&r.enterCallbacks[s]===l&&typeof b=="function"&&l.push(b),u())},f=a(()=>e.call(r&&r.instances[s],n,i,p));let v=Promise.resolve(f);e.length<3&&(v=v.then(p)),v.catch(b=>h(b))})}function Fl(e,n,i,r,s=a=>a()){const a=[];for(const l of e)for(const u in l.components){let h=l.components[u];if(!(n!=="beforeRouteEnter"&&!l.instances[u]))if(bf(h)){const p=(h.__vccOpts||h)[n];p&&a.push(Fs(p,i,r,l,u,s))}else{let p=h();a.push(()=>p.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${u}" at "${l.path}"`);const v=Pg(f)?f.default:f;l.mods[u]=f,l.components[u]=v;const b=(v.__vccOpts||v)[n];return b&&Fs(b,i,r,l,u,s)()}))}}return a}function d_(e,n){const i=[],r=[],s=[],a=Math.max(n.matched.length,e.matched.length);for(let l=0;l<a;l++){const u=n.matched[l];u&&(e.matched.find(p=>Xi(p,u))?r.push(u):i.push(u));const h=e.matched[l];h&&(n.matched.find(p=>Xi(p,h))||s.push(h))}return[i,r,s]}let h_=()=>location.protocol+"//"+location.host;function Ef(e,n){const{pathname:i,search:r,hash:s}=n,a=e.indexOf("#");if(a>-1){let l=s.includes(e.slice(a))?e.slice(a).length:1,u=s.slice(l);return u[0]!=="/"&&(u="/"+u),ud(u,"")}return ud(i,e)+r+s}function f_(e,n,i,r){let s=[],a=[],l=null;const u=({state:b})=>{const C=Ef(e,location),S=i.value,$=n.value;let R=0;if(b){if(i.value=C,n.value=b,l&&l===S){l=null;return}R=$?b.position-$.position:0}else r(C);s.forEach(A=>{A(i.value,S,{delta:R,type:rc.pop,direction:R?R>0?Bl.forward:Bl.back:Bl.unknown})})};function h(){l=i.value}function p(b){s.push(b);const C=()=>{const S=s.indexOf(b);S>-1&&s.splice(S,1)};return a.push(C),C}function f(){if(document.visibilityState==="hidden"){const{history:b}=window;if(!b.state)return;b.replaceState(ft({},b.state,{scroll:Ur()}),"")}}function v(){for(const b of a)b();a=[],window.removeEventListener("popstate",u),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",u),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:h,listen:p,destroy:v}}function md(e,n,i,r=!1,s=!1){return{back:e,current:n,forward:i,replaced:r,position:window.history.length,scroll:s?Ur():null}}function p_(e){const{history:n,location:i}=window,r={value:Ef(e,i)},s={value:n.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function a(h,p,f){const v=e.indexOf("#"),b=v>-1?(i.host&&document.querySelector("base")?e:e.slice(v))+h:h_()+e+h;try{n[f?"replaceState":"pushState"](p,"",b),s.value=p}catch(C){console.error(C),i[f?"replace":"assign"](b)}}function l(h,p){a(h,ft({},n.state,md(s.value.back,h,s.value.forward,!0),p,{position:s.value.position}),!0),r.value=h}function u(h,p){const f=ft({},s.value,n.state,{forward:h,scroll:Ur()});a(f.current,f,!0),a(h,ft({},md(r.value,h,null),{position:f.position+1},p),!1),r.value=h}return{location:r,state:s,push:u,replace:l}}function m_(e){e=Xg(e);const n=p_(e),i=f_(e,n.state,n.location,n.replace);function r(a,l=!0){l||i.pauseListeners(),history.go(a)}const s=ft({location:"",base:e,go:r,createHref:e_.bind(null,e)},n,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function v_(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),m_(e)}let mi=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Vt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Vt||{});const g_={type:mi.Static,value:""},__=/[a-zA-Z0-9_]/;function y_(e){if(!e)return[[]];if(e==="/")return[[g_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(C){throw new Error(`ERR (${i})/"${p}": ${C}`)}let i=Vt.Static,r=i;const s=[];let a;function l(){a&&s.push(a),a=[]}let u=0,h,p="",f="";function v(){p&&(i===Vt.Static?a.push({type:mi.Static,value:p}):i===Vt.Param||i===Vt.ParamRegExp||i===Vt.ParamRegExpEnd?(a.length>1&&(h==="*"||h==="+")&&n(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),a.push({type:mi.Param,value:p,regexp:f,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):n("Invalid state to consume buffer"),p="")}function b(){p+=h}for(;u<e.length;){if(h=e[u++],h==="\\"&&i!==Vt.ParamRegExp){r=i,i=Vt.EscapeNext;continue}switch(i){case Vt.Static:h==="/"?(p&&v(),l()):h===":"?(v(),i=Vt.Param):b();break;case Vt.EscapeNext:b(),i=r;break;case Vt.Param:h==="("?i=Vt.ParamRegExp:__.test(h)?b():(v(),i=Vt.Static,h!=="*"&&h!=="?"&&h!=="+"&&u--);break;case Vt.ParamRegExp:h===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+h:i=Vt.ParamRegExpEnd:f+=h;break;case Vt.ParamRegExpEnd:v(),i=Vt.Static,h!=="*"&&h!=="?"&&h!=="+"&&u--,f="";break;default:n("Unknown state");break}}return i===Vt.ParamRegExp&&n(`Unfinished custom RegExp for param "${p}"`),v(),l(),s}const vd="[^/]+?",b_={sensitive:!1,strict:!1,start:!0,end:!0};var rn=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(rn||{});const k_=/[.+*?^${}()[\]/\\]/g;function w_(e,n){const i=ft({},b_,n),r=[];let s=i.start?"^":"";const a=[];for(const p of e){const f=p.length?[]:[rn.Root];i.strict&&!p.length&&(s+="/");for(let v=0;v<p.length;v++){const b=p[v];let C=rn.Segment+(i.sensitive?rn.BonusCaseSensitive:0);if(b.type===mi.Static)v||(s+="/"),s+=b.value.replace(k_,"\\$&"),C+=rn.Static;else if(b.type===mi.Param){const{value:S,repeatable:$,optional:R,regexp:A}=b;a.push({name:S,repeatable:$,optional:R});const x=A||vd;if(x!==vd){C+=rn.BonusCustomRegExp;try{`${x}`}catch(M){throw new Error(`Invalid custom RegExp for param "${S}" (${x}): `+M.message)}}let w=$?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;v||(w=R&&p.length<2?`(?:/${w})`:"/"+w),R&&(w+="?"),s+=w,C+=rn.Dynamic,R&&(C+=rn.BonusOptional),$&&(C+=rn.BonusRepeatable),x===".*"&&(C+=rn.BonusWildcard)}f.push(C)}r.push(f)}if(i.strict&&i.end){const p=r.length-1;r[p][r[p].length-1]+=rn.BonusStrict}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const l=new RegExp(s,i.sensitive?"":"i");function u(p){const f=p.match(l),v={};if(!f)return null;for(let b=1;b<f.length;b++){const C=f[b]||"",S=a[b-1];v[S.name]=C&&S.repeatable?C.split("/"):C}return v}function h(p){let f="",v=!1;for(const b of e){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const C of b)if(C.type===mi.Static)f+=C.value;else if(C.type===mi.Param){const{value:S,repeatable:$,optional:R}=C,A=S in p?p[S]:"";if(Vn(A)&&!$)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const x=Vn(A)?A.join("/"):A;if(!x)if(R)b.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${S}"`);f+=x}}return f||"/"}return{re:l,score:r,keys:a,parse:u,stringify:h}}function C_(e,n){let i=0;for(;i<e.length&&i<n.length;){const r=n[i]-e[i];if(r)return r;i++}return e.length<n.length?e.length===1&&e[0]===rn.Static+rn.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===rn.Static+rn.Segment?1:-1:0}function Sf(e,n){let i=0;const r=e.score,s=n.score;for(;i<r.length&&i<s.length;){const a=C_(r[i],s[i]);if(a)return a;i++}if(Math.abs(s.length-r.length)===1){if(gd(r))return 1;if(gd(s))return-1}return s.length-r.length}function gd(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const L_={strict:!1,end:!0,sensitive:!1};function x_(e,n,i){const r=w_(y_(e.path),i),s=ft(r,{record:e,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function A_(e,n){const i=[],r=new Map;n=cd(L_,n);function s(v){return r.get(v)}function a(v,b,C){const S=!C,$=yd(v);$.aliasOf=C&&C.record;const R=cd(n,v),A=[$];if("alias"in v){const M=typeof v.alias=="string"?[v.alias]:v.alias;for(const k of M)A.push(yd(ft({},$,{components:C?C.record.components:$.components,path:k,aliasOf:C?C.record:$})))}let x,w;for(const M of A){const{path:k}=M;if(b&&k[0]!=="/"){const I=b.record.path,E=I[I.length-1]==="/"?"":"/";M.path=b.record.path+(k&&E+k)}if(x=x_(M,b,R),C?C.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),S&&v.name&&!bd(x)&&l(v.name)),Mf(x)&&h(x),$.children){const I=$.children;for(let E=0;E<I.length;E++)a(I[E],x,C&&C.children[E])}C=C||x}return w?()=>{l(w)}:Xo}function l(v){if(If(v)){const b=r.get(v);b&&(r.delete(v),i.splice(i.indexOf(b),1),b.children.forEach(l),b.alias.forEach(l))}else{const b=i.indexOf(v);b>-1&&(i.splice(b,1),v.record.name&&r.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function u(){return i}function h(v){const b=E_(v,i);i.splice(b,0,v),v.record.name&&!bd(v)&&r.set(v.record.name,v)}function p(v,b){let C,S={},$,R;if("name"in v&&v.name){if(C=r.get(v.name),!C)throw Qi(Ot.MATCHER_NOT_FOUND,{location:v});R=C.record.name,S=ft(_d(b.params,C.keys.filter(w=>!w.optional).concat(C.parent?C.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),v.params&&_d(v.params,C.keys.map(w=>w.name))),$=C.stringify(S)}else if(v.path!=null)$=v.path,C=i.find(w=>w.re.test($)),C&&(S=C.parse($),R=C.record.name);else{if(C=b.name?r.get(b.name):i.find(w=>w.re.test(b.path)),!C)throw Qi(Ot.MATCHER_NOT_FOUND,{location:v,currentLocation:b});R=C.record.name,S=ft({},b.params,v.params),$=C.stringify(S)}const A=[];let x=C;for(;x;)A.unshift(x.record),x=x.parent;return{name:R,path:$,params:S,matched:A,meta:T_(A)}}e.forEach(v=>a(v));function f(){i.length=0,r.clear()}return{addRoute:a,resolve:p,removeRoute:l,clearRoutes:f,getRoutes:u,getRecordMatcher:s}}function _d(e,n){const i={};for(const r of n)r in e&&(i[r]=e[r]);return i}function yd(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:I_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function I_(e){const n={},i=e.props||!1;if("component"in e)n.default=i;else for(const r in e.components)n[r]=typeof i=="object"?i[r]:i;return n}function bd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function T_(e){return e.reduce((n,i)=>ft(n,i.meta),{})}function E_(e,n){let i=0,r=n.length;for(;i!==r;){const a=i+r>>1;Sf(e,n[a])<0?r=a:i=a+1}const s=S_(e);return s&&(r=n.lastIndexOf(s,r-1)),r}function S_(e){let n=e;for(;n=n.parent;)if(Mf(n)&&Sf(e,n)===0)return n}function Mf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function kd(e){const n=An(Hr),i=An(Bc),r=ae(()=>{const h=F(e.to);return n.resolve(h)}),s=ae(()=>{const{matched:h}=r.value,{length:p}=h,f=h[p-1],v=i.matched;if(!f||!v.length)return-1;const b=v.findIndex(Xi.bind(null,f));if(b>-1)return b;const C=wd(h[p-2]);return p>1&&wd(f)===C&&v[v.length-1].path!==C?v.findIndex(Xi.bind(null,h[p-2])):b}),a=ae(()=>s.value>-1&&D_(i.params,r.value.params)),l=ae(()=>s.value>-1&&s.value===i.matched.length-1&&Af(i.params,r.value.params));function u(h={}){if(O_(h)){const p=n[F(e.replace)?"replace":"push"](F(e.to)).catch(Xo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>p),p}return Promise.resolve()}return{route:r,href:ae(()=>r.value.href),isActive:a,isExactActive:l,navigate:u}}function M_(e){return e.length===1?e[0]:e}const P_=Fh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:kd,setup(e,{slots:n}){const i=da(kd(e)),{options:r}=An(Hr),s=ae(()=>({[Cd(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[Cd(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const a=n.default&&M_(n.default(i));return e.custom?a:Dc("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},a)}}}),$_=P_;function O_(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function D_(e,n){for(const i in n){const r=n[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!Vn(s)||s.length!==r.length||r.some((a,l)=>a.valueOf()!==s[l].valueOf()))return!1}return!0}function wd(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Cd=(e,n,i)=>e??n??i,R_=Fh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:i}){const r=An(cc),s=ae(()=>e.route||r.value),a=An(pd,0),l=ae(()=>{let p=F(a);const{matched:f}=s.value;let v;for(;(v=f[p])&&!v.components;)p++;return p}),u=ae(()=>s.value.matched[l.value]);nr(pd,ae(()=>l.value+1)),nr(u_,u),nr(cc,s);const h=O();return je(()=>[h.value,u.value,e.name],([p,f,v],[b,C,S])=>{f&&(f.instances[v]=p,C&&C!==f&&p&&p===b&&(f.leaveGuards.size||(f.leaveGuards=C.leaveGuards),f.updateGuards.size||(f.updateGuards=C.updateGuards))),p&&f&&(!C||!Xi(f,C)||!b)&&(f.enterCallbacks[v]||[]).forEach($=>$(p))},{flush:"post"}),()=>{const p=s.value,f=e.name,v=u.value,b=v&&v.components[f];if(!b)return Ld(i.default,{Component:b,route:p});const C=v.props[f],S=C?C===!0?p.params:typeof C=="function"?C(p):C:null,R=Dc(b,ft({},S,n,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(v.instances[f]=null)},ref:h}));return Ld(i.default,{Component:R,route:p})||R}}});function Ld(e,n){if(!e)return null;const i=e(n);return i.length===1?i[0]:i}const N_=R_;function B_(e){const n=A_(e.routes,e),i=e.parseQuery||l_,r=e.stringifyQuery||fd,s=e.history,a=Ro(),l=Ro(),u=Ro(),h=Cm(Os);let p=Os;Ui&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Rl.bind(null,V=>""+V),v=Rl.bind(null,qg),b=Rl.bind(null,ra);function C(V,J){let te,we;return If(V)?(te=n.getRecordMatcher(V),we=J):we=V,n.addRoute(we,te)}function S(V){const J=n.getRecordMatcher(V);J&&n.removeRoute(J)}function $(){return n.getRoutes().map(V=>V.record)}function R(V){return!!n.getRecordMatcher(V)}function A(V,J){if(J=ft({},J||h.value),typeof V=="string"){const j=Nl(i,V,J.path),le=n.resolve({path:j.path},J),fe=s.createHref(j.fullPath);return ft(j,le,{params:b(le.params),hash:ra(j.hash),redirectedFrom:void 0,href:fe})}let te;if(V.path!=null)te=ft({},V,{path:Nl(i,V.path,J.path).path});else{const j=ft({},V.params);for(const le in j)j[le]==null&&delete j[le];te=ft({},V,{params:v(j)}),J.params=v(J.params)}const we=n.resolve(te,J),Xe=V.hash||"";we.params=f(b(we.params));const D=Gg(r,ft({},V,{hash:Hg(Xe),path:we.path})),z=s.createHref(D);return ft({fullPath:D,hash:Xe,query:r===fd?c_(V.query):V.query||{}},we,{redirectedFrom:void 0,href:z})}function x(V){return typeof V=="string"?Nl(i,V,h.value.path):ft({},V)}function w(V,J){if(p!==V)return Qi(Ot.NAVIGATION_CANCELLED,{from:J,to:V})}function M(V){return E(V)}function k(V){return M(ft(x(V),{replace:!0}))}function I(V,J){const te=V.matched[V.matched.length-1];if(te&&te.redirect){const{redirect:we}=te;let Xe=typeof we=="function"?we(V,J):we;return typeof Xe=="string"&&(Xe=Xe.includes("?")||Xe.includes("#")?Xe=x(Xe):{path:Xe},Xe.params={}),ft({query:V.query,hash:V.hash,params:Xe.path!=null?{}:V.params},Xe)}}function E(V,J){const te=p=A(V),we=h.value,Xe=V.state,D=V.force,z=V.replace===!0,j=I(te,we);if(j)return E(ft(x(j),{state:typeof j=="object"?ft({},Xe,j.state):Xe,force:D,replace:z}),J||te);const le=te;le.redirectedFrom=J;let fe;return!D&&Kg(r,we,te)&&(fe=Qi(Ot.NAVIGATION_DUPLICATED,{to:le,from:we}),ve(we,we,!0,!1)),(fe?Promise.resolve(fe):Q(le,we)).catch(de=>fs(de)?fs(de,Ot.NAVIGATION_GUARD_REDIRECT)?de:ee(de):he(de,le,we)).then(de=>{if(de){if(fs(de,Ot.NAVIGATION_GUARD_REDIRECT))return E(ft({replace:z},x(de.to),{state:typeof de.to=="object"?ft({},Xe,de.to.state):Xe,force:D}),J||le)}else de=re(le,we,!0,z,Xe);return ce(le,we,de),de})}function q(V,J){const te=w(V,J);return te?Promise.reject(te):Promise.resolve()}function U(V){const J=ge.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(V):V()}function Q(V,J){let te;const[we,Xe,D]=d_(V,J);te=Fl(we.reverse(),"beforeRouteLeave",V,J);for(const j of we)j.leaveGuards.forEach(le=>{te.push(Fs(le,V,J))});const z=q.bind(null,V,J);return te.push(z),pe(te).then(()=>{te=[];for(const j of a.list())te.push(Fs(j,V,J));return te.push(z),pe(te)}).then(()=>{te=Fl(Xe,"beforeRouteUpdate",V,J);for(const j of Xe)j.updateGuards.forEach(le=>{te.push(Fs(le,V,J))});return te.push(z),pe(te)}).then(()=>{te=[];for(const j of D)if(j.beforeEnter)if(Vn(j.beforeEnter))for(const le of j.beforeEnter)te.push(Fs(le,V,J));else te.push(Fs(j.beforeEnter,V,J));return te.push(z),pe(te)}).then(()=>(V.matched.forEach(j=>j.enterCallbacks={}),te=Fl(D,"beforeRouteEnter",V,J,U),te.push(z),pe(te))).then(()=>{te=[];for(const j of l.list())te.push(Fs(j,V,J));return te.push(z),pe(te)}).catch(j=>fs(j,Ot.NAVIGATION_CANCELLED)?j:Promise.reject(j))}function ce(V,J,te){u.list().forEach(we=>U(()=>we(V,J,te)))}function re(V,J,te,we,Xe){const D=w(V,J);if(D)return D;const z=J===Os,j=Ui?history.state:{};te&&(we||z?s.replace(V.fullPath,ft({scroll:z&&j&&j.scroll},Xe)):s.push(V.fullPath,Xe)),h.value=V,ve(V,J,te,z),ee()}let Le;function Z(){Le||(Le=s.listen((V,J,te)=>{if(!ue.listening)return;const we=A(V),Xe=I(we,ue.currentRoute.value);if(Xe){E(ft(Xe,{replace:!0,force:!0}),we).catch(Xo);return}p=we;const D=h.value;Ui&&s_(hd(D.fullPath,te.delta),Ur()),Q(we,D).catch(z=>fs(z,Ot.NAVIGATION_ABORTED|Ot.NAVIGATION_CANCELLED)?z:fs(z,Ot.NAVIGATION_GUARD_REDIRECT)?(E(ft(x(z.to),{force:!0}),we).then(j=>{fs(j,Ot.NAVIGATION_ABORTED|Ot.NAVIGATION_DUPLICATED)&&!te.delta&&te.type===rc.pop&&s.go(-1,!1)}).catch(Xo),Promise.reject()):(te.delta&&s.go(-te.delta,!1),he(z,we,D))).then(z=>{z=z||re(we,D,!1),z&&(te.delta&&!fs(z,Ot.NAVIGATION_CANCELLED)?s.go(-te.delta,!1):te.type===rc.pop&&fs(z,Ot.NAVIGATION_ABORTED|Ot.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),ce(we,D,z)}).catch(Xo)}))}let W=Ro(),Y=Ro(),me;function he(V,J,te){ee(V);const we=Y.list();return we.length?we.forEach(Xe=>Xe(V,J,te)):console.error(V),Promise.reject(V)}function Ae(){return me&&h.value!==Os?Promise.resolve():new Promise((V,J)=>{W.add([V,J])})}function ee(V){return me||(me=!V,Z(),W.list().forEach(([J,te])=>V?te(V):J()),W.reset()),V}function ve(V,J,te,we){const{scrollBehavior:Xe}=e;if(!Ui||!Xe)return Promise.resolve();const D=!te&&i_(hd(V.fullPath,0))||(we||!te)&&history.state&&history.state.scroll||null;return Yi().then(()=>Xe(V,J,D)).then(z=>z&&n_(z)).catch(z=>he(z,V,J))}const Ee=V=>s.go(V);let Be;const ge=new Set,ue={currentRoute:h,listening:!0,addRoute:C,removeRoute:S,clearRoutes:n.clearRoutes,hasRoute:R,getRoutes:$,resolve:A,options:e,push:M,replace:k,go:Ee,back:()=>Ee(-1),forward:()=>Ee(1),beforeEach:a.add,beforeResolve:l.add,afterEach:u.add,onError:Y.add,isReady:Ae,install(V){V.component("RouterLink",$_),V.component("RouterView",N_),V.config.globalProperties.$router=ue,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>F(h)}),Ui&&!Be&&h.value===Os&&(Be=!0,M(s.location).catch(we=>{}));const J={};for(const we in Os)Object.defineProperty(J,we,{get:()=>h.value[we],enumerable:!0});V.provide(Hr,ue),V.provide(Bc,bh(J)),V.provide(cc,h);const te=V.unmount;ge.add(V),V.unmount=function(){ge.delete(V),ge.size<1&&(p=Os,Le&&Le(),Le=null,h.value=Os,Be=!1,me=!1),te()}}};function pe(V){return V.reduce((J,te)=>J.then(()=>U(te)),Promise.resolve())}return ue}function pa(){return An(Hr)}function Fc(e){return An(Bc)}const F_={},z_={class:"home"},U_={class:"container"},H_={class:"actions"};function V_(e,n){const i=Rr("router-link");return g(),y("div",z_,[d("div",U_,[n[1]||(n[1]=d("h1",null,"Volunteer Check-in System ",-1)),n[2]||(n[2]=d("p",{class:"subtitle"},"Manage race marshals and volunteers with ease",-1)),d("div",H_,[Oe(i,{to:"/admin/login",class:"btn btn-primary"},{default:We(()=>[...n[0]||(n[0]=[Ve(" Admin Portal ",-1)])]),_:1})]),n[3]||(n[3]=$v('<div class="features" data-v-536ab6a4><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Admins</h3><ul data-v-536ab6a4><li data-v-536ab6a4>Create and manage events</li><li data-v-536ab6a4>Define marshal locations</li><li data-v-536ab6a4>Assign marshals to locations</li><li data-v-536ab6a4>Real-time check-in monitoring</li><li data-v-536ab6a4>Map view of all locations</li></ul></div><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Marshals</h3><ul data-v-536ab6a4><li data-v-536ab6a4>View your assigned location</li><li data-v-536ab6a4>Check in with GPS verification</li><li data-v-536ab6a4>Access emergency contact info</li><li data-v-536ab6a4>View all marshal locations</li></ul></div></div>',1))])])}const Z_=Ze(F_,[["render",V_],["__scopeId","data-v-536ab6a4"]]);function Pf(e,n){return function(){return e.apply(n,arguments)}}const{toString:q_}=Object.prototype,{getPrototypeOf:zc}=Object,{iterator:Vr,toStringTag:$f}=Symbol,Zr=(e=>n=>{const i=q_.call(n);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Zn=e=>(e=e.toLowerCase(),n=>Zr(n)===e),qr=e=>n=>typeof n===e,{isArray:no}=Array,eo=qr("undefined");function ma(e){return e!==null&&!eo(e)&&e.constructor!==null&&!eo(e.constructor)&&pn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Of=Zn("ArrayBuffer");function j_(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Of(e.buffer),n}const W_=qr("string"),pn=qr("function"),Df=qr("number"),va=e=>e!==null&&typeof e=="object",G_=e=>e===!0||e===!1,rr=e=>{if(Zr(e)!=="object")return!1;const n=zc(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!($f in e)&&!(Vr in e)},K_=e=>{if(!va(e)||ma(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Y_=Zn("Date"),J_=Zn("File"),X_=Zn("Blob"),Q_=Zn("FileList"),ey=e=>va(e)&&pn(e.pipe),ty=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||pn(e.append)&&((n=Zr(e))==="formdata"||n==="object"&&pn(e.toString)&&e.toString()==="[object FormData]"))},ny=Zn("URLSearchParams"),[sy,iy,oy,ay]=["ReadableStream","Request","Response","Headers"].map(Zn),ry=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ga(e,n,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),no(e))for(r=0,s=e.length;r<s;r++)n.call(null,e[r],r,e);else{if(ma(e))return;const a=i?Object.getOwnPropertyNames(e):Object.keys(e),l=a.length;let u;for(r=0;r<l;r++)u=a[r],n.call(null,e[u],u,e)}}function Rf(e,n){if(ma(e))return null;n=n.toLowerCase();const i=Object.keys(e);let r=i.length,s;for(;r-- >0;)if(s=i[r],n===s.toLowerCase())return s;return null}const vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Nf=e=>!eo(e)&&e!==vi;function uc(){const{caseless:e,skipUndefined:n}=Nf(this)&&this||{},i={},r=(s,a)=>{const l=e&&Rf(i,a)||a;rr(i[l])&&rr(s)?i[l]=uc(i[l],s):rr(s)?i[l]=uc({},s):no(s)?i[l]=s.slice():(!n||!eo(s))&&(i[l]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&ga(arguments[s],r);return i}const ly=(e,n,i,{allOwnKeys:r}={})=>(ga(n,(s,a)=>{i&&pn(s)?e[a]=Pf(s,i):e[a]=s},{allOwnKeys:r}),e),cy=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),uy=(e,n,i,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),i&&Object.assign(e.prototype,i)},dy=(e,n,i,r)=>{let s,a,l;const u={};if(n=n||{},e==null)return n;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)l=s[a],(!r||r(l,e,n))&&!u[l]&&(n[l]=e[l],u[l]=!0);e=i!==!1&&zc(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},hy=(e,n,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=n.length;const r=e.indexOf(n,i);return r!==-1&&r===i},fy=e=>{if(!e)return null;if(no(e))return e;let n=e.length;if(!Df(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=e[n];return i},py=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&zc(Uint8Array)),my=(e,n)=>{const r=(e&&e[Vr]).call(e);let s;for(;(s=r.next())&&!s.done;){const a=s.value;n.call(e,a[0],a[1])}},vy=(e,n)=>{let i;const r=[];for(;(i=e.exec(n))!==null;)r.push(i);return r},gy=Zn("HTMLFormElement"),_y=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,s){return r.toUpperCase()+s}),xd=(({hasOwnProperty:e})=>(n,i)=>e.call(n,i))(Object.prototype),yy=Zn("RegExp"),Bf=(e,n)=>{const i=Object.getOwnPropertyDescriptors(e),r={};ga(i,(s,a)=>{let l;(l=n(s,a,e))!==!1&&(r[a]=l||s)}),Object.defineProperties(e,r)},by=e=>{Bf(e,(n,i)=>{if(pn(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(pn(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},ky=(e,n)=>{const i={},r=s=>{s.forEach(a=>{i[a]=!0})};return no(e)?r(e):r(String(e).split(n)),i},wy=()=>{},Cy=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function Ly(e){return!!(e&&pn(e.append)&&e[$f]==="FormData"&&e[Vr])}const xy=e=>{const n=new Array(10),i=(r,s)=>{if(va(r)){if(n.indexOf(r)>=0)return;if(ma(r))return r;if(!("toJSON"in r)){n[s]=r;const a=no(r)?[]:{};return ga(r,(l,u)=>{const h=i(l,s+1);!eo(h)&&(a[u]=h)}),n[s]=void 0,a}}return r};return i(e,0)},Ay=Zn("AsyncFunction"),Iy=e=>e&&(va(e)||pn(e))&&pn(e.then)&&pn(e.catch),Ff=((e,n)=>e?setImmediate:n?((i,r)=>(vi.addEventListener("message",({source:s,data:a})=>{s===vi&&a===i&&r.length&&r.shift()()},!1),s=>{r.push(s),vi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",pn(vi.postMessage)),Ty=typeof queueMicrotask<"u"?queueMicrotask.bind(vi):typeof process<"u"&&process.nextTick||Ff,Ey=e=>e!=null&&pn(e[Vr]),oe={isArray:no,isArrayBuffer:Of,isBuffer:ma,isFormData:ty,isArrayBufferView:j_,isString:W_,isNumber:Df,isBoolean:G_,isObject:va,isPlainObject:rr,isEmptyObject:K_,isReadableStream:sy,isRequest:iy,isResponse:oy,isHeaders:ay,isUndefined:eo,isDate:Y_,isFile:J_,isBlob:X_,isRegExp:yy,isFunction:pn,isStream:ey,isURLSearchParams:ny,isTypedArray:py,isFileList:Q_,forEach:ga,merge:uc,extend:ly,trim:ry,stripBOM:cy,inherits:uy,toFlatObject:dy,kindOf:Zr,kindOfTest:Zn,endsWith:hy,toArray:fy,forEachEntry:my,matchAll:vy,isHTMLForm:gy,hasOwnProperty:xd,hasOwnProp:xd,reduceDescriptors:Bf,freezeMethods:by,toObjectSet:ky,toCamelCase:_y,noop:wy,toFiniteNumber:Cy,findKey:Rf,global:vi,isContextDefined:Nf,isSpecCompliantForm:Ly,toJSONObject:xy,isAsyncFn:Ay,isThenable:Iy,setImmediate:Ff,asap:Ty,isIterable:Ey};function ot(e,n,i,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}oe.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const zf=ot.prototype,Uf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Uf[e]={value:e}});Object.defineProperties(ot,Uf);Object.defineProperty(zf,"isAxiosError",{value:!0});ot.from=(e,n,i,r,s,a)=>{const l=Object.create(zf);oe.toFlatObject(e,l,function(f){return f!==Error.prototype},p=>p!=="isAxiosError");const u=e&&e.message?e.message:"Error",h=n==null&&e?e.code:n;return ot.call(l,u,h,i,r,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",a&&Object.assign(l,a),l};const Sy=null;function dc(e){return oe.isPlainObject(e)||oe.isArray(e)}function Hf(e){return oe.endsWith(e,"[]")?e.slice(0,-2):e}function Ad(e,n,i){return e?e.concat(n).map(function(s,a){return s=Hf(s),!i&&a?"["+s+"]":s}).join(i?".":""):n}function My(e){return oe.isArray(e)&&!e.some(dc)}const Py=oe.toFlatObject(oe,{},null,function(n){return/^is[A-Z]/.test(n)});function jr(e,n,i){if(!oe.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,i=oe.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,R){return!oe.isUndefined(R[$])});const r=i.metaTokens,s=i.visitor||f,a=i.dots,l=i.indexes,h=(i.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(n);if(!oe.isFunction(s))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(oe.isDate(S))return S.toISOString();if(oe.isBoolean(S))return S.toString();if(!h&&oe.isBlob(S))throw new ot("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(S)||oe.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function f(S,$,R){let A=S;if(S&&!R&&typeof S=="object"){if(oe.endsWith($,"{}"))$=r?$:$.slice(0,-2),S=JSON.stringify(S);else if(oe.isArray(S)&&My(S)||(oe.isFileList(S)||oe.endsWith($,"[]"))&&(A=oe.toArray(S)))return $=Hf($),A.forEach(function(w,M){!(oe.isUndefined(w)||w===null)&&n.append(l===!0?Ad([$],M,a):l===null?$:$+"[]",p(w))}),!1}return dc(S)?!0:(n.append(Ad(R,$,a),p(S)),!1)}const v=[],b=Object.assign(Py,{defaultVisitor:f,convertValue:p,isVisitable:dc});function C(S,$){if(!oe.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+$.join("."));v.push(S),oe.forEach(S,function(A,x){(!(oe.isUndefined(A)||A===null)&&s.call(n,A,oe.isString(x)?x.trim():x,$,b))===!0&&C(A,$?$.concat(x):[x])}),v.pop()}}if(!oe.isObject(e))throw new TypeError("data must be an object");return C(e),n}function Id(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function Uc(e,n){this._pairs=[],e&&jr(e,this,n)}const Vf=Uc.prototype;Vf.append=function(n,i){this._pairs.push([n,i])};Vf.toString=function(n){const i=n?function(r){return n.call(this,r,Id)}:Id;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function $y(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Zf(e,n,i){if(!n)return e;const r=i&&i.encode||$y;oe.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let a;if(s?a=s(n,i):a=oe.isURLSearchParams(n)?n.toString():new Uc(n,i).toString(r),a){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Td{constructor(){this.handlers=[]}use(n,i,r){return this.handlers.push({fulfilled:n,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){oe.forEach(this.handlers,function(r){r!==null&&n(r)})}}const qf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oy=typeof URLSearchParams<"u"?URLSearchParams:Uc,Dy=typeof FormData<"u"?FormData:null,Ry=typeof Blob<"u"?Blob:null,Ny={isBrowser:!0,classes:{URLSearchParams:Oy,FormData:Dy,Blob:Ry},protocols:["http","https","file","blob","url","data"]},Hc=typeof window<"u"&&typeof document<"u",hc=typeof navigator=="object"&&navigator||void 0,By=Hc&&(!hc||["ReactNative","NativeScript","NS"].indexOf(hc.product)<0),Fy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zy=Hc&&window.location.href||"http://localhost",Uy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hc,hasStandardBrowserEnv:By,hasStandardBrowserWebWorkerEnv:Fy,navigator:hc,origin:zy},Symbol.toStringTag,{value:"Module"})),en={...Uy,...Ny};function Hy(e,n){return jr(e,new en.classes.URLSearchParams,{visitor:function(i,r,s,a){return en.isNode&&oe.isBuffer(i)?(this.append(r,i.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...n})}function Vy(e){return oe.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function Zy(e){const n={},i=Object.keys(e);let r;const s=i.length;let a;for(r=0;r<s;r++)a=i[r],n[a]=e[a];return n}function jf(e){function n(i,r,s,a){let l=i[a++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),h=a>=i.length;return l=!l&&oe.isArray(s)?s.length:l,h?(oe.hasOwnProp(s,l)?s[l]=[s[l],r]:s[l]=r,!u):((!s[l]||!oe.isObject(s[l]))&&(s[l]=[]),n(i,r,s[l],a)&&oe.isArray(s[l])&&(s[l]=Zy(s[l])),!u)}if(oe.isFormData(e)&&oe.isFunction(e.entries)){const i={};return oe.forEachEntry(e,(r,s)=>{n(Vy(r),s,i,0)}),i}return null}function qy(e,n,i){if(oe.isString(e))try{return(n||JSON.parse)(e),oe.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const _a={transitional:qf,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const r=i.getContentType()||"",s=r.indexOf("application/json")>-1,a=oe.isObject(n);if(a&&oe.isHTMLForm(n)&&(n=new FormData(n)),oe.isFormData(n))return s?JSON.stringify(jf(n)):n;if(oe.isArrayBuffer(n)||oe.isBuffer(n)||oe.isStream(n)||oe.isFile(n)||oe.isBlob(n)||oe.isReadableStream(n))return n;if(oe.isArrayBufferView(n))return n.buffer;if(oe.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let u;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Hy(n,this.formSerializer).toString();if((u=oe.isFileList(n))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return jr(u?{"files[]":n}:n,h&&new h,this.formSerializer)}}return a||s?(i.setContentType("application/json",!1),qy(n)):n}],transformResponse:[function(n){const i=this.transitional||_a.transitional,r=i&&i.forcedJSONParsing,s=this.responseType==="json";if(oe.isResponse(n)||oe.isReadableStream(n))return n;if(n&&oe.isString(n)&&(r&&!this.responseType||s)){const l=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(n,this.parseReviver)}catch(u){if(l)throw u.name==="SyntaxError"?ot.from(u,ot.ERR_BAD_RESPONSE,this,null,this.response):u}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:en.classes.FormData,Blob:en.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],e=>{_a.headers[e]={}});const jy=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wy=e=>{const n={};let i,r,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),i=l.substring(0,s).trim().toLowerCase(),r=l.substring(s+1).trim(),!(!i||n[i]&&jy[i])&&(i==="set-cookie"?n[i]?n[i].push(r):n[i]=[r]:n[i]=n[i]?n[i]+", "+r:r)}),n},Ed=Symbol("internals");function No(e){return e&&String(e).trim().toLowerCase()}function lr(e){return e===!1||e==null?e:oe.isArray(e)?e.map(lr):String(e)}function Gy(e){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)n[r[1]]=r[2];return n}const Ky=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function zl(e,n,i,r,s){if(oe.isFunction(r))return r.call(this,n,i);if(s&&(n=i),!!oe.isString(n)){if(oe.isString(r))return n.indexOf(r)!==-1;if(oe.isRegExp(r))return r.test(n)}}function Yy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,r)=>i.toUpperCase()+r)}function Jy(e,n){const i=oe.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(s,a,l){return this[r].call(this,n,s,a,l)},configurable:!0})})}let mn=class{constructor(n){n&&this.set(n)}set(n,i,r){const s=this;function a(u,h,p){const f=No(h);if(!f)throw new Error("header name must be a non-empty string");const v=oe.findKey(s,f);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||h]=lr(u))}const l=(u,h)=>oe.forEach(u,(p,f)=>a(p,f,h));if(oe.isPlainObject(n)||n instanceof this.constructor)l(n,i);else if(oe.isString(n)&&(n=n.trim())&&!Ky(n))l(Wy(n),i);else if(oe.isObject(n)&&oe.isIterable(n)){let u={},h,p;for(const f of n){if(!oe.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[p=f[0]]=(h=u[p])?oe.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}l(u,i)}else n!=null&&a(i,n,r);return this}get(n,i){if(n=No(n),n){const r=oe.findKey(this,n);if(r){const s=this[r];if(!i)return s;if(i===!0)return Gy(s);if(oe.isFunction(i))return i.call(this,s,r);if(oe.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=No(n),n){const r=oe.findKey(this,n);return!!(r&&this[r]!==void 0&&(!i||zl(this,this[r],r,i)))}return!1}delete(n,i){const r=this;let s=!1;function a(l){if(l=No(l),l){const u=oe.findKey(r,l);u&&(!i||zl(r,r[u],u,i))&&(delete r[u],s=!0)}}return oe.isArray(n)?n.forEach(a):a(n),s}clear(n){const i=Object.keys(this);let r=i.length,s=!1;for(;r--;){const a=i[r];(!n||zl(this,this[a],a,n,!0))&&(delete this[a],s=!0)}return s}normalize(n){const i=this,r={};return oe.forEach(this,(s,a)=>{const l=oe.findKey(r,a);if(l){i[l]=lr(s),delete i[a];return}const u=n?Yy(a):String(a).trim();u!==a&&delete i[a],i[u]=lr(s),r[u]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return oe.forEach(this,(r,s)=>{r!=null&&r!==!1&&(i[s]=n&&oe.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const r=new this(n);return i.forEach(s=>r.set(s)),r}static accessor(n){const r=(this[Ed]=this[Ed]={accessors:{}}).accessors,s=this.prototype;function a(l){const u=No(l);r[u]||(Jy(s,l),r[u]=!0)}return oe.isArray(n)?n.forEach(a):a(n),this}};mn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(mn.prototype,({value:e},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[i]=r}}});oe.freezeMethods(mn);function Ul(e,n){const i=this||_a,r=n||i,s=mn.from(r.headers);let a=r.data;return oe.forEach(e,function(u){a=u.call(i,a,s.normalize(),n?n.status:void 0)}),s.normalize(),a}function Wf(e){return!!(e&&e.__CANCEL__)}function so(e,n,i){ot.call(this,e??"canceled",ot.ERR_CANCELED,n,i),this.name="CanceledError"}oe.inherits(so,ot,{__CANCEL__:!0});function Gf(e,n,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):n(new ot("Request failed with status code "+i.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Xy(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Qy(e,n){e=e||10;const i=new Array(e),r=new Array(e);let s=0,a=0,l;return n=n!==void 0?n:1e3,function(h){const p=Date.now(),f=r[a];l||(l=p),i[s]=h,r[s]=p;let v=a,b=0;for(;v!==s;)b+=i[v++],v=v%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),p-l<n)return;const C=f&&p-f;return C?Math.round(b*1e3/C):void 0}}function eb(e,n){let i=0,r=1e3/n,s,a;const l=(p,f=Date.now())=>{i=f,s=null,a&&(clearTimeout(a),a=null),e(...p)};return[(...p)=>{const f=Date.now(),v=f-i;v>=r?l(p,f):(s=p,a||(a=setTimeout(()=>{a=null,l(s)},r-v)))},()=>s&&l(s)]}const br=(e,n,i=3)=>{let r=0;const s=Qy(50,250);return eb(a=>{const l=a.loaded,u=a.lengthComputable?a.total:void 0,h=l-r,p=s(h),f=l<=u;r=l;const v={loaded:l,total:u,progress:u?l/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&f?(u-l)/p:void 0,event:a,lengthComputable:u!=null,[n?"download":"upload"]:!0};e(v)},i)},Sd=(e,n)=>{const i=e!=null;return[r=>n[0]({lengthComputable:i,total:e,loaded:r}),n[1]]},Md=e=>(...n)=>oe.asap(()=>e(...n)),tb=en.hasStandardBrowserEnv?((e,n)=>i=>(i=new URL(i,en.origin),e.protocol===i.protocol&&e.host===i.host&&(n||e.port===i.port)))(new URL(en.origin),en.navigator&&/(msie|trident)/i.test(en.navigator.userAgent)):()=>!0,nb=en.hasStandardBrowserEnv?{write(e,n,i,r,s,a,l){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(n)}`];oe.isNumber(i)&&u.push(`expires=${new Date(i).toUTCString()}`),oe.isString(r)&&u.push(`path=${r}`),oe.isString(s)&&u.push(`domain=${s}`),a===!0&&u.push("secure"),oe.isString(l)&&u.push(`SameSite=${l}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sb(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ib(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Kf(e,n,i){let r=!sb(n);return e&&(r||i==!1)?ib(e,n):n}const Pd=e=>e instanceof mn?{...e}:e;function wi(e,n){n=n||{};const i={};function r(p,f,v,b){return oe.isPlainObject(p)&&oe.isPlainObject(f)?oe.merge.call({caseless:b},p,f):oe.isPlainObject(f)?oe.merge({},f):oe.isArray(f)?f.slice():f}function s(p,f,v,b){if(oe.isUndefined(f)){if(!oe.isUndefined(p))return r(void 0,p,v,b)}else return r(p,f,v,b)}function a(p,f){if(!oe.isUndefined(f))return r(void 0,f)}function l(p,f){if(oe.isUndefined(f)){if(!oe.isUndefined(p))return r(void 0,p)}else return r(void 0,f)}function u(p,f,v){if(v in n)return r(p,f);if(v in e)return r(void 0,p)}const h={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(p,f,v)=>s(Pd(p),Pd(f),v,!0)};return oe.forEach(Object.keys({...e,...n}),function(f){const v=h[f]||s,b=v(e[f],n[f],f);oe.isUndefined(b)&&v!==u||(i[f]=b)}),i}const Yf=e=>{const n=wi({},e);let{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:u}=n;if(n.headers=l=mn.from(l),n.url=Zf(Kf(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),oe.isFormData(i)){if(en.hasStandardBrowserEnv||en.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(oe.isFunction(i.getHeaders)){const h=i.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([f,v])=>{p.includes(f.toLowerCase())&&l.set(f,v)})}}if(en.hasStandardBrowserEnv&&(r&&oe.isFunction(r)&&(r=r(n)),r||r!==!1&&tb(n.url))){const h=s&&a&&nb.read(a);h&&l.set(s,h)}return n},ob=typeof XMLHttpRequest<"u",ab=ob&&function(e){return new Promise(function(i,r){const s=Yf(e);let a=s.data;const l=mn.from(s.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=s,f,v,b,C,S;function $(){C&&C(),S&&S(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let R=new XMLHttpRequest;R.open(s.method.toUpperCase(),s.url,!0),R.timeout=s.timeout;function A(){if(!R)return;const w=mn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),k={data:!u||u==="text"||u==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:w,config:e,request:R};Gf(function(E){i(E),$()},function(E){r(E),$()},k),R=null}"onloadend"in R?R.onloadend=A:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(A)},R.onabort=function(){R&&(r(new ot("Request aborted",ot.ECONNABORTED,e,R)),R=null)},R.onerror=function(M){const k=M&&M.message?M.message:"Network Error",I=new ot(k,ot.ERR_NETWORK,e,R);I.event=M||null,r(I),R=null},R.ontimeout=function(){let M=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const k=s.transitional||qf;s.timeoutErrorMessage&&(M=s.timeoutErrorMessage),r(new ot(M,k.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,e,R)),R=null},a===void 0&&l.setContentType(null),"setRequestHeader"in R&&oe.forEach(l.toJSON(),function(M,k){R.setRequestHeader(k,M)}),oe.isUndefined(s.withCredentials)||(R.withCredentials=!!s.withCredentials),u&&u!=="json"&&(R.responseType=s.responseType),p&&([b,S]=br(p,!0),R.addEventListener("progress",b)),h&&R.upload&&([v,C]=br(h),R.upload.addEventListener("progress",v),R.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(f=w=>{R&&(r(!w||w.type?new so(null,e,R):w),R.abort(),R=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const x=Xy(s.url);if(x&&en.protocols.indexOf(x)===-1){r(new ot("Unsupported protocol "+x+":",ot.ERR_BAD_REQUEST,e));return}R.send(a||null)})},rb=(e,n)=>{const{length:i}=e=e?e.filter(Boolean):[];if(n||i){let r=new AbortController,s;const a=function(p){if(!s){s=!0,u();const f=p instanceof Error?p:this.reason;r.abort(f instanceof ot?f:new so(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,a(new ot(`timeout ${n} of ms exceeded`,ot.ETIMEDOUT))},n);const u=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),e=null)};e.forEach(p=>p.addEventListener("abort",a));const{signal:h}=r;return h.unsubscribe=()=>oe.asap(u),h}},lb=function*(e,n){let i=e.byteLength;if(i<n){yield e;return}let r=0,s;for(;r<i;)s=r+n,yield e.slice(r,s),r=s},cb=async function*(e,n){for await(const i of ub(e))yield*lb(i,n)},ub=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:i,value:r}=await n.read();if(i)break;yield r}}finally{await n.cancel()}},$d=(e,n,i,r)=>{const s=cb(e,n);let a=0,l,u=h=>{l||(l=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:p,value:f}=await s.next();if(p){u(),h.close();return}let v=f.byteLength;if(i){let b=a+=v;i(b)}h.enqueue(new Uint8Array(f))}catch(p){throw u(p),p}},cancel(h){return u(h),s.return()}},{highWaterMark:2})},Od=64*1024,{isFunction:Ja}=oe,db=(({Request:e,Response:n})=>({Request:e,Response:n}))(oe.global),{ReadableStream:Dd,TextEncoder:Rd}=oe.global,Nd=(e,...n)=>{try{return!!e(...n)}catch{return!1}},hb=e=>{e=oe.merge.call({skipUndefined:!0},db,e);const{fetch:n,Request:i,Response:r}=e,s=n?Ja(n):typeof fetch=="function",a=Ja(i),l=Ja(r);if(!s)return!1;const u=s&&Ja(Dd),h=s&&(typeof Rd=="function"?(S=>$=>S.encode($))(new Rd):async S=>new Uint8Array(await new i(S).arrayBuffer())),p=a&&u&&Nd(()=>{let S=!1;const $=new i(en.origin,{body:new Dd,method:"POST",get duplex(){return S=!0,"half"}}).headers.has("Content-Type");return S&&!$}),f=l&&u&&Nd(()=>oe.isReadableStream(new r("").body)),v={stream:f&&(S=>S.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(S=>{!v[S]&&(v[S]=($,R)=>{let A=$&&$[S];if(A)return A.call($);throw new ot(`Response type '${S}' is not supported`,ot.ERR_NOT_SUPPORT,R)})});const b=async S=>{if(S==null)return 0;if(oe.isBlob(S))return S.size;if(oe.isSpecCompliantForm(S))return(await new i(en.origin,{method:"POST",body:S}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(S)||oe.isArrayBuffer(S))return S.byteLength;if(oe.isURLSearchParams(S)&&(S=S+""),oe.isString(S))return(await h(S)).byteLength},C=async(S,$)=>{const R=oe.toFiniteNumber(S.getContentLength());return R??b($)};return async S=>{let{url:$,method:R,data:A,signal:x,cancelToken:w,timeout:M,onDownloadProgress:k,onUploadProgress:I,responseType:E,headers:q,withCredentials:U="same-origin",fetchOptions:Q}=Yf(S),ce=n||fetch;E=E?(E+"").toLowerCase():"text";let re=rb([x,w&&w.toAbortSignal()],M),Le=null;const Z=re&&re.unsubscribe&&(()=>{re.unsubscribe()});let W;try{if(I&&p&&R!=="get"&&R!=="head"&&(W=await C(q,A))!==0){let ve=new i($,{method:"POST",body:A,duplex:"half"}),Ee;if(oe.isFormData(A)&&(Ee=ve.headers.get("content-type"))&&q.setContentType(Ee),ve.body){const[Be,ge]=Sd(W,br(Md(I)));A=$d(ve.body,Od,Be,ge)}}oe.isString(U)||(U=U?"include":"omit");const Y=a&&"credentials"in i.prototype,me={...Q,signal:re,method:R.toUpperCase(),headers:q.normalize().toJSON(),body:A,duplex:"half",credentials:Y?U:void 0};Le=a&&new i($,me);let he=await(a?ce(Le,Q):ce($,me));const Ae=f&&(E==="stream"||E==="response");if(f&&(k||Ae&&Z)){const ve={};["status","statusText","headers"].forEach(ue=>{ve[ue]=he[ue]});const Ee=oe.toFiniteNumber(he.headers.get("content-length")),[Be,ge]=k&&Sd(Ee,br(Md(k),!0))||[];he=new r($d(he.body,Od,Be,()=>{ge&&ge(),Z&&Z()}),ve)}E=E||"text";let ee=await v[oe.findKey(v,E)||"text"](he,S);return!Ae&&Z&&Z(),await new Promise((ve,Ee)=>{Gf(ve,Ee,{data:ee,headers:mn.from(he.headers),status:he.status,statusText:he.statusText,config:S,request:Le})})}catch(Y){throw Z&&Z(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,S,Le),{cause:Y.cause||Y}):ot.from(Y,Y&&Y.code,S,Le)}}},fb=new Map,Jf=e=>{let n=e&&e.env||{};const{fetch:i,Request:r,Response:s}=n,a=[r,s,i];let l=a.length,u=l,h,p,f=fb;for(;u--;)h=a[u],p=f.get(h),p===void 0&&f.set(h,p=u?new Map:hb(n)),f=p;return p};Jf();const Vc={http:Sy,xhr:ab,fetch:{get:Jf}};oe.forEach(Vc,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const Bd=e=>`- ${e}`,pb=e=>oe.isFunction(e)||e===null||e===!1;function mb(e,n){e=oe.isArray(e)?e:[e];const{length:i}=e;let r,s;const a={};for(let l=0;l<i;l++){r=e[l];let u;if(s=r,!pb(r)&&(s=Vc[(u=String(r)).toLowerCase()],s===void 0))throw new ot(`Unknown adapter '${u}'`);if(s&&(oe.isFunction(s)||(s=s.get(n))))break;a[u||"#"+l]=s}if(!s){const l=Object.entries(a).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=i?l.length>1?`since :
`+l.map(Bd).join(`
`):" "+Bd(l[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return s}const Xf={getAdapter:mb,adapters:Vc};function Hl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new so(null,e)}function Fd(e){return Hl(e),e.headers=mn.from(e.headers),e.data=Ul.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Xf.getAdapter(e.adapter||_a.adapter,e)(e).then(function(r){return Hl(e),r.data=Ul.call(e,e.transformResponse,r),r.headers=mn.from(r.headers),r},function(r){return Wf(r)||(Hl(e),r&&r.response&&(r.response.data=Ul.call(e,e.transformResponse,r.response),r.response.headers=mn.from(r.response.headers))),Promise.reject(r)})}const Qf="1.13.2",Wr={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Wr[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const zd={};Wr.transitional=function(n,i,r){function s(a,l){return"[Axios v"+Qf+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,u)=>{if(n===!1)throw new ot(s(l," has been removed"+(i?" in "+i:"")),ot.ERR_DEPRECATED);return i&&!zd[l]&&(zd[l]=!0,console.warn(s(l," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(a,l,u):!0}};Wr.spelling=function(n){return(i,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function vb(e,n,i){if(typeof e!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],l=n[a];if(l){const u=e[a],h=u===void 0||l(u,a,e);if(h!==!0)throw new ot("option "+a+" must be "+h,ot.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ot("Unknown option "+a,ot.ERR_BAD_OPTION)}}const cr={assertOptions:vb,validators:Wr},Kn=cr.validators;let bi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Td,response:new Td}}async request(n,i){try{return await this._request(n,i)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=wi(this.defaults,i);const{transitional:r,paramsSerializer:s,headers:a}=i;r!==void 0&&cr.assertOptions(r,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),s!=null&&(oe.isFunction(s)?i.paramsSerializer={serialize:s}:cr.assertOptions(s,{encode:Kn.function,serialize:Kn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),cr.assertOptions(i,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=a&&oe.merge(a.common,a[i.method]);a&&oe.forEach(["delete","get","head","post","put","patch","common"],S=>{delete a[S]}),i.headers=mn.concat(l,a);const u=[];let h=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(i)===!1||(h=h&&$.synchronous,u.unshift($.fulfilled,$.rejected))});const p=[];this.interceptors.response.forEach(function($){p.push($.fulfilled,$.rejected)});let f,v=0,b;if(!h){const S=[Fd.bind(this),void 0];for(S.unshift(...u),S.push(...p),b=S.length,f=Promise.resolve(i);v<b;)f=f.then(S[v++],S[v++]);return f}b=u.length;let C=i;for(;v<b;){const S=u[v++],$=u[v++];try{C=S(C)}catch(R){$.call(this,R);break}}try{f=Fd.call(this,C)}catch(S){return Promise.reject(S)}for(v=0,b=p.length;v<b;)f=f.then(p[v++],p[v++]);return f}getUri(n){n=wi(this.defaults,n);const i=Kf(n.baseURL,n.url,n.allowAbsoluteUrls);return Zf(i,n.params,n.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(n){bi.prototype[n]=function(i,r){return this.request(wi(r||{},{method:n,url:i,data:(r||{}).data}))}});oe.forEach(["post","put","patch"],function(n){function i(r){return function(a,l,u){return this.request(wi(u||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}bi.prototype[n]=i(),bi.prototype[n+"Form"]=i(!0)});let gb=class ep{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(a){i=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(u=>{r.subscribe(u),a=u}).then(s);return l.cancel=function(){r.unsubscribe(a)},l},n(function(a,l,u){r.reason||(r.reason=new so(a,l,u),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=r=>{n.abort(r)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new ep(function(s){n=s}),cancel:n}}};function _b(e){return function(i){return e.apply(null,i)}}function yb(e){return oe.isObject(e)&&e.isAxiosError===!0}const fc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fc).forEach(([e,n])=>{fc[n]=e});function tp(e){const n=new bi(e),i=Pf(bi.prototype.request,n);return oe.extend(i,bi.prototype,n,{allOwnKeys:!0}),oe.extend(i,n,null,{allOwnKeys:!0}),i.create=function(s){return tp(wi(e,s))},i}const Bt=tp(_a);Bt.Axios=bi;Bt.CanceledError=so;Bt.CancelToken=gb;Bt.isCancel=Wf;Bt.VERSION=Qf;Bt.toFormData=jr;Bt.AxiosError=ot;Bt.Cancel=Bt.CanceledError;Bt.all=function(n){return Promise.all(n)};Bt.spread=_b;Bt.isAxiosError=yb;Bt.mergeConfig=wi;Bt.AxiosHeaders=mn;Bt.formToJSON=e=>jf(oe.isHTMLForm(e)?new FormData(e):e);Bt.getAdapter=Xf.getAdapter;Bt.HttpStatusCode=fc;Bt.default=Bt;const{Axios:XD,AxiosError:QD,CanceledError:eR,isCancel:tR,CancelToken:nR,VERSION:sR,all:iR,Cancel:oR,isAxiosError:aR,spread:rR,toFormData:lR,AxiosHeaders:cR,HttpStatusCode:uR,formToJSON:dR,getAdapter:hR,mergeConfig:fR}=Bt,bb="https://sterobson-volunteercheckin-testing.azurewebsites.net/api",kb="VolunteerCheckinOffline",wb=1;let Bn=null;async function Is(){return Bn||new Promise((e,n)=>{const i=indexedDB.open(kb,wb);i.onerror=()=>{console.error("Failed to open IndexedDB:",i.error),n(i.error)},i.onsuccess=()=>{Bn=i.result,e(Bn)},i.onupgradeneeded=r=>{const s=r.target.result;s.objectStoreNames.contains("eventData")||s.createObjectStore("eventData",{keyPath:"eventId"}),s.objectStoreNames.contains("pendingActions")||s.createObjectStore("pendingActions",{keyPath:"id",autoIncrement:!0}).createIndex("createdAt","createdAt",{unique:!1}),s.objectStoreNames.contains("syncMeta")||s.createObjectStore("syncMeta",{keyPath:"key"})}})}async function la(e,n){return await Is(),new Promise((i,r)=>{const s=Bn.transaction(["eventData","syncMeta"],"readwrite"),a=s.objectStore("eventData"),l=s.objectStore("syncMeta"),u={eventId:e,...n,cachedAt:new Date().toISOString()};a.put(u),l.put({key:`lastSync_${e}`,value:new Date().toISOString()}),s.oncomplete=()=>i(),s.onerror=()=>r(s.error)})}async function qs(e){return await Is(),new Promise((n,i)=>{const a=Bn.transaction(["eventData"],"readonly").objectStore("eventData").get(e);a.onsuccess=()=>n(a.result||null),a.onerror=()=>i(a.error)})}async function zo(e,n,i){const r=await qs(e);r&&(r[n]=i,r.cachedAt=new Date().toISOString(),await la(e,r))}async function Cb(e){return await Is(),new Promise((n,i)=>{const s=Bn.transaction(["pendingActions"],"readwrite").objectStore("pendingActions"),a={...e,createdAt:new Date().toISOString(),attempts:0,lastAttempt:null,status:"pending"},l=s.add(a);l.onsuccess=()=>n(l.result),l.onerror=()=>i(l.error)})}async function np(){return await Is(),new Promise((e,n)=>{const a=Bn.transaction(["pendingActions"],"readonly").objectStore("pendingActions").index("createdAt").getAll();a.onsuccess=()=>{const l=a.result.filter(u=>u.status==="pending"||u.status==="retrying");e(l)},a.onerror=()=>n(a.error)})}async function kr(){return(await np()).length}async function Ud(e,n){return await Is(),new Promise((i,r)=>{const s=Bn.transaction(["pendingActions"],"readwrite"),a=s.objectStore("pendingActions"),l=a.get(e);l.onsuccess=()=>{const u=l.result;u&&(Object.assign(u,n),a.put(u))},s.oncomplete=()=>i(),s.onerror=()=>r(s.error)})}async function Hd(e){return await Is(),new Promise((n,i)=>{const a=Bn.transaction(["pendingActions"],"readwrite").objectStore("pendingActions").delete(e);a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})}async function Lb(e){return await Is(),new Promise((n,i)=>{const a=Bn.transaction(["syncMeta"],"readonly").objectStore("syncMeta").get(`lastSync_${e}`);a.onsuccess=()=>n(a.result?.value||null),a.onerror=()=>i(a.error)})}const Se=Bt.create({baseURL:bb,headers:{"Content-Type":"application/json"},timeout:15e3});let pc=!1;async function xb(){}function Vd(e){const n=[/\/events\/([^\/]+)/,/\/assignments\/([^\/]+)/,/\/locations\/([^\/]+)/,/\/checklist-items\/([^\/]+)/,/\/areas\/([^\/]+)/,/\/marshals\/([^\/]+)/];for(const i of n){const r=e.match(i);if(r)return r[1]}return null}function Ab(e){return!!(!e.response&&e.request||e.response&&e.response.status>=500||e.code==="ECONNABORTED")}Se.interceptors.request.use(e=>{const n=localStorage.getItem("adminEmail");n&&(e.headers["X-Admin-Email"]=n);const i=localStorage.getItem("sessionToken");return i&&(e.headers.Authorization=`Bearer ${i}`),e});Se.interceptors.response.use(e=>{pc=!1;const n=e.config.url,i=Vd(n);return e.config.method,e},async e=>{const n=e.config;if(Ab(e)&&(pc=!0,n.method==="get")){const i=Vd(n.url);if(i){const r=await qs(i);if(r)return console.log("Returning cached data for:",n.url),Promise.resolve({data:r,status:200,statusText:"OK (cached)",headers:{},config:n,cached:!0})}}return Promise.reject(e)});async function Rn(e,n,i){return await Cb({type:e,payload:n,eventId:n.eventId}),await xb(),{data:i,status:200,statusText:"OK (queued)",queued:!0}}function hn(){return pc||!navigator.onLine}const bs={requestLogin:e=>Se.post("/auth/request-login",{email:e}),verifyToken:e=>Se.post("/auth/verify-token",{token:e}),instantLogin:e=>Se.post("/auth/instant-login",{email:e}),createAdmin:e=>Se.post("/auth/create-admin",{email:e}),marshalLogin:(e,n)=>Se.post("/auth/marshal-login",{eventId:e,magicCode:n}),getMe:e=>Se.get("/auth/me",{params:{eventId:e}}),logout:()=>Se.post("/auth/logout")},Xa={getProfile:()=>Se.get("/auth/profile"),updateProfile:e=>Se.put("/auth/profile",e),getPerson:(e,n)=>Se.get(`/people/${e}`,{params:{eventId:n}}),updatePerson:(e,n,i)=>Se.put(`/people/${e}`,i,{params:{eventId:n}})},fi={create:e=>Se.post("/events",e),getAll:()=>Se.get("/events"),getById:e=>Se.get(`/events/${e}`),update:(e,n)=>Se.put(`/events/${e}`,n),delete:e=>Se.delete(`/events/${e}`),uploadGpx:(e,n)=>{const i=new FormData;return i.append("gpx",n),Se.post(`/events/${e}/upload-gpx`,i,{headers:{"Content-Type":"multipart/form-data"}})}},zs={create:e=>Se.post("/locations",e),getById:(e,n)=>Se.get(`/locations/${e}/${n}`),getByEvent:e=>Se.get(`/events/${e}/locations`),update:(e,n,i)=>Se.put(`/locations/${e}/${n}`,i),delete:(e,n)=>Se.delete(`/locations/${e}/${n}`),importCsv:(e,n,i)=>{const r=new FormData;return r.append("csv",n),Se.post(`/locations/import/${e}?deleteExisting=${i}`,r,{headers:{"Content-Type":"multipart/form-data"}})},bulkUpdateTimes:(e,n)=>Se.post(`/locations/bulk-update-times/${e}`,{timeDelta:n})},Uo={create:e=>Se.post("/assignments",e),getById:(e,n)=>Se.get(`/assignments/${e}/${n}`),getByEvent:e=>Se.get(`/assignments/event/${e}`),delete:(e,n)=>Se.delete(`/assignments/${e}/${n}`),getEventStatus:e=>Se.get(`/events/${e}/status`)},Hs={checkIn:e=>Se.post("/checkin",e),adminCheckIn:(e,n)=>Se.post(`/checkin/admin/${e}/${n}`)},Vl={getAdmins:e=>Se.get(`/events/${e}/admins`),addAdmin:(e,n)=>Se.post(`/events/${e}/admins`,{userEmail:n}),removeAdmin:(e,n)=>Se.delete(`/events/${e}/admins/${n}`)},Xn={create:e=>Se.post("/marshals",e),getByEvent:e=>Se.get(`/events/${e}/marshals`),getById:(e,n)=>Se.get(`/marshals/${e}/${n}`),update:(e,n,i)=>Se.put(`/marshals/${e}/${n}`,i),delete:(e,n)=>Se.delete(`/marshals/${e}/${n}`),getMagicLink:(e,n)=>Se.get(`/marshals/${e}/${n}/magic-link`),sendMagicLink:(e,n)=>Se.post(`/marshals/${e}/${n}/send-magic-link`),importCsv:(e,n)=>{const i=new FormData;return i.append("csv",n),Se.post(`/marshals/import/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})}},Us={create:e=>Se.post("/areas",e),getByEvent:e=>Se.get(`/events/${e}/areas`),getById:(e,n)=>Se.get(`/areas/${e}/${n}`),update:(e,n,i)=>Se.put(`/areas/${e}/${n}`,i),delete:(e,n)=>Se.delete(`/areas/${e}/${n}`),recalculate:e=>Se.post(`/areas/recalculate/${e}`),getCheckpoints:(e,n)=>Se.get(`/areas/${e}/${n}/locations`),getAreaLeads:(e,n)=>Se.get(`/areas/${e}/${n}/leads`),getAreaLeadDashboard:e=>Se.get(`/events/${e}/area-lead-dashboard`)},It={create:(e,n)=>Se.post(`/events/${e}/checklist-items`,n),getByEvent:e=>Se.get(`/events/${e}/checklist-items`),getById:(e,n)=>Se.get(`/checklist-items/${e}/${n}`),update:(e,n,i)=>Se.put(`/checklist-items/${e}/${n}`,i),delete:(e,n)=>Se.delete(`/checklist-items/${e}/${n}`),getReport:e=>Se.get(`/events/${e}/checklist-report`),getMarshalChecklist:(e,n)=>Se.get(`/events/${e}/marshals/${n}/checklist`),getCheckpointChecklist:(e,n)=>Se.get(`/events/${e}/locations/${n}/checklist`),getAreaChecklist:(e,n)=>Se.get(`/events/${e}/areas/${n}/checklist`),complete:(e,n,i)=>Se.post(`/checklist-items/${e}/${n}/complete`,i),uncomplete:(e,n,i)=>Se.post(`/checklist-items/${e}/${n}/uncomplete`,i)},vs={create:(e,n)=>Se.post(`/events/${e}/notes`,n),getByEvent:e=>Se.get(`/events/${e}/notes`),getById:(e,n)=>Se.get(`/events/${e}/notes/${n}`),update:(e,n,i)=>Se.put(`/events/${e}/notes/${n}`,i),delete:(e,n)=>Se.delete(`/events/${e}/notes/${n}`),getMarshalNotes:(e,n)=>Se.get(`/events/${e}/marshals/${n}/notes`),getMyNotes:e=>Se.get(`/events/${e}/my-notes`)},Hi={create:(e,n)=>Se.post(`/events/${e}/contacts`,n),getByEvent:e=>Se.get(`/events/${e}/contacts`),getById:(e,n)=>Se.get(`/events/${e}/contacts/${n}`),update:(e,n,i)=>Se.put(`/events/${e}/contacts/${n}`,i),delete:(e,n)=>Se.delete(`/events/${e}/contacts/${n}`),getRoles:e=>Se.get(`/events/${e}/contact-roles`),getMarshalContacts:(e,n)=>Se.get(`/events/${e}/marshals/${n}/contacts`),getMyContacts:e=>Se.get(`/events/${e}/my-contacts`)},Gr=Rc("auth",()=>{const e=O(localStorage.getItem("adminEmail")||null),n=O(!!e.value),i=O(!1);return{adminEmail:e,isAuthenticated:n,loginPending:i,requestLogin:async u=>{const h=await bs.requestLogin(u);return h.data.success&&(i.value=!0),h.data},verifyToken:async u=>{const h=await bs.verifyToken(u);return h.data.success&&(e.value=h.data.person?.email,n.value=!0,i.value=!1,localStorage.setItem("adminEmail",h.data.person?.email),localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},instantLogin:async u=>{const h=await bs.instantLogin(u);return h.data.success&&(e.value=h.data.email,n.value=!0,localStorage.setItem("adminEmail",h.data.email),h.data.sessionToken&&localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},logout:async()=>{try{await bs.logout()}catch{}e.value=null,n.value=!1,i.value=!1,localStorage.removeItem("adminEmail"),localStorage.removeItem("sessionToken")}}}),Ib={class:"admin-login"},Tb={class:"login-card"},Eb={key:0,class:"email-sent"},Sb={class:"form-group"},Mb=["disabled"],Pb={key:0,class:"error"},$b={__name:"AdminLogin",setup(e){const n=Gr(),i=O(""),r=O(!1),s=O(null),a=O(!1),l=async()=>{r.value=!0,s.value=null;try{const h=await n.requestLogin(i.value);h.success?a.value=!0:s.value=h.message||"Failed to send login link. Please try again."}catch{s.value="Failed to send login link. Please try again."}finally{r.value=!1}},u=()=>{i.value="",a.value=!1,s.value=null};return(h,p)=>{const f=Rr("router-link");return g(),y("div",Ib,[d("div",Tb,[p[7]||(p[7]=d("h2",null,"Admin Login",-1)),a.value?(g(),y("div",Eb,[p[2]||(p[2]=d("div",{class:"check-icon"},"",-1)),p[3]||(p[3]=d("h3",null,"Check your email!",-1)),d("p",null,[p[1]||(p[1]=Ve("We've sent a login link to ",-1)),d("strong",null,T(i.value),1)]),p[4]||(p[4]=d("p",{class:"hint"},"The link will expire in 15 minutes.",-1)),d("button",{onClick:u,class:"btn btn-secondary"}," Use a different email ")])):(g(),y(ke,{key:1},[p[5]||(p[5]=d("p",{class:"instruction"},"Enter your email to receive a login link",-1)),d("form",{onSubmit:Tt(l,["prevent"])},[d("div",Sb,[De(d("input",{"onUpdate:modelValue":p[0]||(p[0]=v=>i.value=v),type:"email",placeholder:"admin@example.com",required:"",class:"form-input"},null,512),[[it,i.value]])]),d("button",{type:"submit",class:"btn btn-primary",disabled:r.value},T(r.value?"Sending...":"Send login link"),9,Mb)],32),s.value?(g(),y("div",Pb,T(s.value),1)):B("",!0)],64)),Oe(f,{to:"/",class:"back-link"},{default:We(()=>[...p[6]||(p[6]=[Ve(" Back to Home",-1)])]),_:1})])])}}},Ob=Ze($b,[["__scopeId","data-v-50552d01"]]),Db={class:"admin-verify"},Rb={class:"verify-card"},Nb={key:0,class:"status"},Bb={key:1,class:"status error"},Fb={key:2,class:"status success"},zb={__name:"AdminVerify",setup(e){const n=pa(),i=Fc(),r=Gr(),s=O(!0),a=O(null);return kn(async()=>{const l=i.query.token;if(!l){a.value="No login token provided. Please request a new login link.",s.value=!1;return}try{const u=await r.verifyToken(l);u.success?setTimeout(()=>{n.push({name:"AdminDashboard"})},1e3):a.value=u.message||"Invalid or expired login link. Please request a new one."}catch(u){console.error("Verification error:",u),a.value="Failed to verify login. Please try again."}finally{s.value=!1}}),(l,u)=>{const h=Rr("router-link");return g(),y("div",Db,[d("div",Rb,[s.value?(g(),y("div",Nb,[...u[0]||(u[0]=[d("div",{class:"spinner"},null,-1),d("h2",null,"Verifying your login...",-1),d("p",null,"Please wait while we confirm your identity.",-1)])])):a.value?(g(),y("div",Bb,[u[2]||(u[2]=d("h2",null,"Login Failed",-1)),d("p",null,T(a.value),1),Oe(h,{to:"/admin/login",class:"btn btn-primary"},{default:We(()=>[...u[1]||(u[1]=[Ve(" Try Again ",-1)])]),_:1})])):(g(),y("div",Fb,[...u[3]||(u[3]=[d("h2",null,"Login Successful!",-1),d("p",null,"Redirecting to dashboard...",-1)])]))])])}}},Ub=Ze(zb,[["__scopeId","data-v-7bb86bfc"]]),sp=Rc("events",()=>{const e=O([]),n=O(null),i=O([]),r=O([]),s=O(null),a=O(!1),l=O(null),u=async()=>{a.value=!0,l.value=null;try{const I=await fi.getAll();e.value=I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},h=async I=>{a.value=!0,l.value=null;try{const E=await fi.getById(I);n.value=E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}},p=async I=>{a.value=!0,l.value=null;try{const E=await fi.create(I);return e.value.push(E.data),E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}},f=async(I,E)=>{a.value=!0,l.value=null;try{const q=await fi.update(I,E),U=e.value.findIndex(Q=>Q.id===I);return U!==-1&&(e.value[U]=q.data),n.value?.id===I&&(n.value=q.data),q.data}catch(q){throw l.value=q.message,q}finally{a.value=!1}},v=async I=>{a.value=!0,l.value=null;try{await fi.delete(I),e.value=e.value.filter(E=>E.id!==I)}catch(E){throw l.value=E.message,E}finally{a.value=!1}},b=async I=>{a.value=!0,l.value=null;try{const E=await zs.getByEvent(I);i.value=E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}};return{events:e,currentEvent:n,locations:i,assignments:r,eventStatus:s,loading:a,error:l,fetchEvents:u,fetchEvent:h,createEvent:p,updateEvent:f,deleteEvent:v,fetchLocations:b,createLocation:async I=>{a.value=!0,l.value=null;try{const E=await zs.create(I);return i.value.push(E.data),E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}},updateLocation:async(I,E,q)=>{a.value=!0,l.value=null;try{const U=await zs.update(I,E,q),Q=i.value.findIndex(ce=>ce.id===E);return Q!==-1&&(i.value[Q]=U.data),U.data}catch(U){throw l.value=U.message,U}finally{a.value=!1}},deleteLocation:async(I,E)=>{a.value=!0,l.value=null;try{await zs.delete(I,E),i.value=i.value.filter(q=>q.id!==E)}catch(q){throw l.value=q.message,q}finally{a.value=!1}},bulkUpdateLocationTimes:async(I,E)=>{a.value=!0,l.value=null;try{const q=await zs.bulkUpdateTimes(I,E);return await b(I),q.data}catch(q){throw l.value=q.message,q}finally{a.value=!1}},fetchAssignments:async I=>{a.value=!0,l.value=null;try{const E=await Uo.getByEvent(I);r.value=E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}},createAssignment:async I=>{a.value=!0,l.value=null;try{const E=await Uo.create(I);return r.value.push(E.data),E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}},deleteAssignment:async(I,E)=>{a.value=!0,l.value=null;try{await Uo.delete(I,E),r.value=r.value.filter(q=>q.id!==E)}catch(q){throw l.value=q.message,q}finally{a.value=!1}},fetchEventStatus:async I=>{a.value=!0,l.value=null;try{const E=await Uo.getEventStatus(I);return s.value=E.data,E.data}catch(E){throw l.value=E.message,E}finally{a.value=!1}},updateAssignmentCheckIn:I=>{const E=r.value.findIndex(q=>q.id===I.id);E!==-1&&(r.value[E]=I),s.value&&s.value.locations.forEach(q=>{const U=q.assignments.findIndex(Q=>Q.id===I.id);U!==-1&&(q.assignments[U]=I,q.checkedInCount=q.assignments.filter(Q=>Q.isCheckedIn).length)})}}}),Hb={class:"confirm-modal"},Vb={class:"confirm-actions"},Zb={__name:"ConfirmModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm"},message:{type:String,required:!0},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const i=n,r=()=>{i("confirm")},s=()=>{i("cancel")};return(a,l)=>e.show?(g(),y("div",{key:0,class:"modal-overlay",onClick:Tt(s,["self"])},[d("div",Hb,[d("h3",null,T(e.title),1),d("p",null,T(e.message),1),d("div",Vb,[d("button",{onClick:s,class:"btn btn-secondary"},T(e.cancelText),1),d("button",{onClick:r,class:"btn btn-primary"},T(e.confirmText),1)])])])):B("",!0)}},Kr=Ze(Zb,[["__scopeId","data-v-4bd2c256"]]),qb={class:"base-modal-header"},jb={key:0,class:"base-modal-title"},Wb={key:0,class:"base-modal-tab-header"},Gb={class:"base-modal-body"},Kb={key:1,class:"base-modal-footer"},Yb={key:0,class:"base-modal-actions"},Jb={__name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:""},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},variant:{type:String,default:"center",validator:e=>["center","sidebar"].includes(e)},zIndex:{type:Number,default:1e3},closeOnOverlay:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},confirmOnClose:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=e,r=n,s=O(!1),a=O(!1),l=()=>{i.closeOnOverlay&&u()},u=()=>{i.confirmOnClose&&i.isDirty?s.value=!0:r("close")},h=()=>{s.value=!1,r("close")},p=()=>{s.value=!1};return(f,v)=>e.show?(g(),y("div",{key:0,class:"base-modal-overlay",style:tn({zIndex:e.zIndex}),onClick:Tt(l,["self"])},[d("div",{class:Fe(["base-modal",[`base-modal--${e.size}`,`base-modal--${e.variant}`]])},[d("div",qb,[$o(f.$slots,"header",{},()=>[e.title?(g(),y("h2",jb,T(e.title),1)):B("",!0)]),e.showCloseButton?(g(),y("button",{key:0,onClick:u,class:"base-modal-close",type:"button","aria-label":"Close"},"  ")):B("",!0)]),f.$slots["tab-header"]?(g(),y("div",Wb,[$o(f.$slots,"tab-header",{},void 0)])):B("",!0),d("div",Gb,[$o(f.$slots,"default",{},void 0)]),f.$slots.footer||f.$slots.actions?(g(),y("div",Kb,[$o(f.$slots,"footer",{},()=>[f.$slots.actions?(g(),y("div",Yb,[$o(f.$slots,"actions",{},void 0,!0)])):B("",!0)])])):B("",!0)],2),e.confirmOnClose&&!a.value?(g(),nt(Kr,{key:0,show:s.value,title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to close?",onConfirm:h,onCancel:p},null,8,["show"])):B("",!0)],4)):B("",!0)}},Ft=Ze(Jb,[["__scopeId","data-v-45873bc7"]]);function ip(e="details",n=[]){const i=O(e),r=v=>{i.value=v},s=()=>{i.value=e},a=v=>i.value===v,l=ae(()=>n.length===0?-1:n.indexOf(i.value)),u=(v=!1)=>{if(n.length===0)return;const b=l.value;if(b===-1)return;const C=b+1;C<n.length?i.value=n[C]:v&&(i.value=n[0])},h=(v=!1)=>{if(n.length===0)return;const b=l.value;if(b===-1)return;const C=b-1;C>=0?i.value=n[C]:v&&(i.value=n[n.length-1])},p=ae(()=>{if(n.length===0)return!1;const v=l.value;return v!==-1&&v<n.length-1}),f=ae(()=>n.length===0?!1:l.value>0);return{activeTab:i,activeTabIndex:l,hasNextTab:p,hasPreviousTab:f,switchTab:r,resetTab:s,isActiveTab:a,nextTab:u,previousTab:h}}const op=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEDT/AEST)"}],Xb={class:"tabs"},Qb={class:"tab-content"},ek={class:"form-group"},tk={class:"form-group"},nk={class:"form-group"},sk={class:"form-group"},ik=["value"],ok={class:"tab-content"},ak={class:"emergency-contacts-section"},rk={key:0,class:"empty-state"},lk={class:"card-header"},ck=["onClick"],uk={class:"form-group"},dk=["onUpdate:modelValue"],hk={class:"form-group"},fk=["onUpdate:modelValue"],pk={class:"form-group"},mk=["onUpdate:modelValue"],vk={__name:"EventFormModal",props:{show:{type:Boolean,default:!1},eventData:{type:Object,default:()=>({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]})},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:n}){const i=e,r=n,{activeTab:s,switchTab:a,resetTab:l}=ip("basic",["basic","emergency"]),u=O({...i.eventData});je(()=>i.eventData,b=>{u.value={...b},u.value.emergencyContacts||(u.value.emergencyContacts=[])},{deep:!0}),je(()=>i.show,b=>{b&&l()});const h=()=>{u.value.emergencyContacts.push({name:"",phone:"",details:""})},p=b=>{u.value.emergencyContacts.splice(b,1)},f=()=>{r("submit",{...u.value})},v=()=>{r("close")};return(b,C)=>(g(),nt(Ft,{show:e.show,title:e.isEditing?"Edit Event":"Create New Event",size:"large",onClose:v},{"tab-header":We(()=>[d("div",Xb,[d("button",{type:"button",onClick:C[0]||(C[0]=S=>F(a)("basic")),class:Fe(["tab-button",{active:F(s)==="basic"}])}," Basic Details ",2),d("button",{type:"button",onClick:C[1]||(C[1]=S=>F(a)("emergency")),class:Fe(["tab-button",{active:F(s)==="emergency"}])}," Emergency Contacts ",2)])]),actions:We(()=>[d("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:f,class:"btn btn-primary"},T(e.isEditing?"Update":"Create"),1)]),default:We(()=>[d("form",{onSubmit:Tt(f,["prevent"])},[De(d("div",Qb,[d("div",ek,[C[6]||(C[6]=d("label",null,"Event Name *",-1)),De(d("input",{"onUpdate:modelValue":C[2]||(C[2]=S=>u.value.name=S),type:"text",required:"",class:"form-input"},null,512),[[it,u.value.name]])]),d("div",tk,[C[7]||(C[7]=d("label",null,"Description",-1)),De(d("textarea",{"onUpdate:modelValue":C[3]||(C[3]=S=>u.value.description=S),rows:"3",class:"form-input"},null,512),[[it,u.value.description]])]),d("div",nk,[C[8]||(C[8]=d("label",null,"Event Date *",-1)),De(d("input",{"onUpdate:modelValue":C[4]||(C[4]=S=>u.value.eventDate=S),type:"datetime-local",required:"",class:"form-input"},null,512),[[it,u.value.eventDate]])]),d("div",sk,[C[9]||(C[9]=d("label",null,"Time Zone *",-1)),De(d("select",{"onUpdate:modelValue":C[5]||(C[5]=S=>u.value.timeZoneId=S),required:"",class:"form-input"},[(g(!0),y(ke,null,$e(F(op),S=>(g(),y("option",{key:S.value,value:S.value},T(S.label),9,ik))),128))],512),[[_n,u.value.timeZoneId]])])],512),[[Ws,F(s)==="basic"]]),De(d("div",ok,[d("div",ak,[d("div",{class:"section-header-small"},[C[10]||(C[10]=d("h3",null,"Emergency Contacts",-1)),d("button",{type:"button",onClick:h,class:"btn btn-small btn-primary"}," + Add Contact ")]),u.value.emergencyContacts.length===0?(g(),y("div",rk,[...C[11]||(C[11]=[d("p",null,'No emergency contacts added yet. Click "Add Contact" to add one.',-1)])])):B("",!0),(g(!0),y(ke,null,$e(u.value.emergencyContacts,(S,$)=>(g(),y("div",{key:$,class:"emergency-contact-card"},[d("div",lk,[d("h4",null,"Contact "+T($+1),1),d("button",{type:"button",onClick:R=>p($),class:"btn-remove"},"  ",8,ck)]),d("div",uk,[C[12]||(C[12]=d("label",null,"Name *",-1)),De(d("input",{"onUpdate:modelValue":R=>S.name=R,type:"text",required:"",class:"form-input",placeholder:"Contact person name"},null,8,dk),[[it,S.name]])]),d("div",hk,[C[13]||(C[13]=d("label",null,"Phone *",-1)),De(d("input",{"onUpdate:modelValue":R=>S.phone=R,type:"tel",required:"",class:"form-input",placeholder:"+1 (555) 123-4567"},null,8,fk),[[it,S.phone]])]),d("div",pk,[C[14]||(C[14]=d("label",null,"Additional Details",-1)),De(d("textarea",{"onUpdate:modelValue":R=>S.details=R,rows:"2",class:"form-input",placeholder:"Role, availability, or other important information..."},null,8,mk),[[it,S.details]])])]))),128))])],512),[[Ws,F(s)==="emergency"]])],32)]),_:1},8,["show","title"]))}},gk=Ze(vk,[["__scopeId","data-v-35885c7a"]]),_k={class:"admin-dashboard"},yk={class:"header"},bk={class:"header-actions"},kk={class:"user-email"},wk={class:"container"},Ck={class:"section"},Lk={class:"section-header"},xk={key:0,class:"loading"},Ak={key:1,class:"empty"},Ik={key:2,class:"events-grid"},Tk=["onClick"],Ek={class:"event-date"},Sk={class:"event-desc"},Mk={class:"event-actions"},Pk=["onClick"],$k=["onClick"],Ok={__name:"AdminDashboard",setup(e){const n=pa(),i=Gr(),r=sp(),s=O(!0),a=O(!1),l=O(null),u=O({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}),h=O([]),p=O(!1),f=O(""),v=O(""),b=O(null),C=async()=>{s.value=!0;try{await r.fetchEvents(),h.value=r.events}catch(U){console.error("Failed to load events:",U)}finally{s.value=!1}},S=async U=>{try{const Q={...U,adminEmail:i.adminEmail};l.value?await r.updateEvent(l.value.id,Q):await r.createEvent(Q),h.value=r.events,w()}catch(Q){console.error("Failed to save event:",Q),alert("Failed to save event. Please try again.")}},$=U=>{l.value=U,u.value={name:U.name,description:U.description,eventDate:q(U.eventDate),timeZoneId:U.timeZoneId||"UTC",emergencyContacts:U.emergencyContacts?JSON.parse(JSON.stringify(U.emergencyContacts)):[]}},R=async U=>{f.value="Delete Event",v.value=`Are you sure you want to delete "${U.name}"?`,b.value=async()=>{try{await r.deleteEvent(U.id),h.value=r.events}catch(Q){console.error("Failed to delete event:",Q),alert("Failed to delete event. Please try again.")}},p.value=!0},A=()=>{p.value=!1,b.value&&(b.value(),b.value=null)},x=()=>{p.value=!1,b.value=null},w=()=>{a.value=!1,l.value=null,u.value={name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}},M=U=>{if(!U){console.error("Cannot navigate to event: eventId is undefined");return}n.push({name:"AdminEventManage",params:{eventId:U}})},k=()=>{n.push({name:"AdminProfile"})},I=()=>{i.logout(),n.push({name:"Home"})},E=U=>new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),q=U=>{const Q=new Date(U),ce=Q.getFullYear(),re=String(Q.getMonth()+1).padStart(2,"0"),Le=String(Q.getDate()).padStart(2,"0"),Z=String(Q.getHours()).padStart(2,"0"),W=String(Q.getMinutes()).padStart(2,"0");return`${ce}-${re}-${Le}T${Z}:${W}`};return kn(()=>{C()}),(U,Q)=>(g(),y("div",_k,[d("header",yk,[Q[1]||(Q[1]=d("h1",null,"Admin Dashboard",-1)),d("div",bk,[d("span",kk,T(F(i).adminEmail),1),d("button",{onClick:k,class:"btn btn-secondary"},"Profile"),d("button",{onClick:I,class:"btn btn-secondary"},"Logout")])]),d("div",wk,[d("div",Ck,[d("div",Lk,[Q[2]||(Q[2]=d("h2",null,"Your Events",-1)),d("button",{onClick:Q[0]||(Q[0]=ce=>a.value=!0),class:"btn btn-primary"}," Create New Event ")]),s.value?(g(),y("div",xk,"Loading events...")):h.value.length===0?(g(),y("div",Ak,[...Q[3]||(Q[3]=[d("p",null,"No events yet. Create your first event to get started!",-1)])])):(g(),y("div",Ik,[(g(!0),y(ke,null,$e(h.value,ce=>(g(),y("div",{key:ce.id,class:"event-card",onClick:re=>M(ce.id)},[d("h3",null,T(ce.name),1),d("p",Ek,T(E(ce.eventDate)),1),d("p",Sk,T(ce.description),1),d("div",Mk,[d("button",{onClick:Tt(re=>$(ce),["stop"]),class:"btn btn-small btn-secondary"}," Edit ",8,Pk),d("button",{onClick:Tt(re=>R(ce),["stop"]),class:"btn btn-small btn-danger"}," Delete ",8,$k)])],8,Tk))),128))]))])]),Oe(gk,{show:a.value||!!l.value,eventData:u.value,isEditing:!!l.value,onClose:w,onSubmit:S},null,8,["show","eventData","isEditing"]),Oe(Kr,{show:p.value,title:f.value,message:v.value,onConfirm:A,onCancel:x},null,8,["show","title","message"])]))}},Dk=Ze(Ok,[["__scopeId","data-v-c3a3ad82"]]),Rk=Rc("profile",()=>{const e=O(null),n=O(!1),i=O(null);return{profile:e,loading:n,error:i,fetchProfile:async()=>{n.value=!0,i.value=null;try{const h=await Xa.getProfile();return e.value=h.data,h.data}catch(h){throw i.value=h.response?.data?.message||"Failed to load profile",h}finally{n.value=!1}},updateProfile:async h=>{n.value=!0,i.value=null;try{const p=await Xa.updateProfile(h);return e.value=p.data,p.data}catch(p){throw i.value=p.response?.data?.message||"Failed to update profile",p}finally{n.value=!1}},fetchPerson:async(h,p)=>{n.value=!0,i.value=null;try{return(await Xa.getPerson(h,p)).data}catch(f){throw i.value=f.response?.data?.message||"Failed to load person",f}finally{n.value=!1}},updatePerson:async(h,p,f)=>{n.value=!0,i.value=null;try{return(await Xa.updatePerson(h,p,f)).data}catch(v){throw i.value=v.response?.data?.message||"Failed to update person",v}finally{n.value=!1}},clearProfile:()=>{e.value=null,i.value=null}}}),Nk={class:"form-group"},Bk={class:"form-group"},Fk={class:"form-group"},zk={__name:"EditProfileModal",props:{show:{type:Boolean,default:!1},profile:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=O({name:"",email:"",phone:""});je(()=>i.profile,h=>{h&&(s.value={name:h.name||"",email:h.email||"",phone:h.phone||""})},{immediate:!0,deep:!0}),je(()=>i.show,h=>{h&&i.profile&&(s.value={name:i.profile.name||"",email:i.profile.email||"",phone:i.profile.phone||""})});const a=()=>{r("update:isDirty",!0)},l=()=>{if(!s.value.name.trim()){alert("Name is required");return}if(!s.value.email.trim()){alert("Email is required");return}r("submit",{name:s.value.name.trim(),email:s.value.email.trim(),phone:s.value.phone?.trim()||""})},u=()=>{r("close")};return(h,p)=>(g(),nt(Ft,{show:e.show,title:"Edit Profile",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:u},{actions:We(()=>[d("button",{type:"button",onClick:u,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:l,class:"btn btn-primary"}," Save changes ")]),default:We(()=>[d("form",{onSubmit:Tt(l,["prevent"])},[d("div",Nk,[p[3]||(p[3]=d("label",null,"Name *",-1)),De(d("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>s.value.name=f),type:"text",required:"",class:"form-input",placeholder:"Your name",onInput:a},null,544),[[it,s.value.name]])]),d("div",Bk,[p[4]||(p[4]=d("label",null,"Email *",-1)),De(d("input",{"onUpdate:modelValue":p[1]||(p[1]=f=>s.value.email=f),type:"email",required:"",class:"form-input",placeholder:"Your email address",onInput:a},null,544),[[it,s.value.email]])]),d("div",Fk,[p[5]||(p[5]=d("label",null,"Phone",-1)),De(d("input",{"onUpdate:modelValue":p[2]||(p[2]=f=>s.value.phone=f),type:"tel",class:"form-input",placeholder:"Your phone number",onInput:a},null,544),[[it,s.value.phone]])])],32)]),_:1},8,["show","is-dirty"]))}},Uk=Ze(zk,[["__scopeId","data-v-2ce1a930"]]),Hk={class:"admin-profile"},Vk={class:"header"},Zk={class:"header-actions"},qk={class:"user-email"},jk={class:"container"},Wk={class:"section"},Gk={class:"section-header"},Kk={key:0,class:"loading"},Yk={key:1,class:"error"},Jk={key:2,class:"profile-details"},Xk={class:"profile-field"},Qk={class:"field-value"},ew={class:"profile-field"},tw={class:"field-value"},nw={class:"profile-field"},sw={class:"field-value"},iw={class:"profile-field"},ow={class:"field-value"},aw={__name:"AdminProfile",setup(e){const n=pa(),i=Gr(),r=Rk(),s=O(!1),a=async()=>{try{await r.fetchProfile()}catch(p){console.error("Failed to load profile:",p)}},l=async p=>{try{await r.updateProfile(p),s.value=!1}catch(f){console.error("Failed to save profile:",f),alert("Failed to save profile. Please try again.")}},u=()=>{i.logout(),n.push({name:"Home"})},h=()=>{n.push({name:"AdminDashboard"})};return kn(()=>{a()}),(p,f)=>(g(),y("div",Hk,[d("header",Vk,[f[2]||(f[2]=d("h1",null,"My Profile",-1)),d("div",Zk,[d("span",qk,T(F(i).adminEmail),1),d("button",{onClick:u,class:"btn btn-secondary"},"Logout")])]),d("div",jk,[d("div",Wk,[d("div",Gk,[f[3]||(f[3]=d("h2",null,"Profile Information",-1)),d("button",{onClick:f[0]||(f[0]=v=>s.value=!0),class:"btn btn-primary"}," Edit Profile ")]),F(r).loading?(g(),y("div",Kk,"Loading profile...")):F(r).error?(g(),y("div",Yk,[d("p",null,T(F(r).error),1),d("button",{onClick:a,class:"btn btn-secondary"},"Retry")])):F(r).profile?(g(),y("div",Jk,[d("div",Xk,[f[4]||(f[4]=d("label",null,"Name",-1)),d("div",Qk,T(F(r).profile.name||""),1)]),d("div",ew,[f[5]||(f[5]=d("label",null,"Email",-1)),d("div",tw,T(F(r).profile.email||""),1)]),d("div",nw,[f[6]||(f[6]=d("label",null,"Phone",-1)),d("div",sw,T(F(r).profile.phone||""),1)]),d("div",iw,[f[7]||(f[7]=d("label",null,"System Admin",-1)),d("div",ow,[d("span",{class:Fe(["badge",F(r).profile.isSystemAdmin?"badge-success":"badge-secondary"])},T(F(r).profile.isSystemAdmin?"Yes":"No"),3)])])])):B("",!0)]),d("div",{class:"section"},[d("button",{onClick:h,class:"btn btn-secondary"}," Back to Dashboard ")])]),Oe(Uk,{show:s.value,profile:F(r).profile,onClose:f[1]||(f[1]=v=>s.value=!1),onSubmit:l},null,8,["show","profile"])]))}},rw=Ze(aw,[["__scopeId","data-v-e8d20355"]]);function lw(){const e=O(!1),n=O(""),i=O(""),r=O(null);return{showConfirmModal:e,confirmModalTitle:n,confirmModalMessage:i,showConfirm:(h,p,f)=>{n.value=h,i.value=p,r.value=f,e.value=!0},handleConfirmModalConfirm:()=>{e.value=!1,r.value&&(r.value(),r.value=null)},handleConfirmModalCancel:()=>{e.value=!1,r.value=null},closeConfirmModal:()=>{e.value=!1,r.value=null}}}const ur=O({people:"Marshals",checkpoint:"Checkpoints",area:"Areas",checklist:"Checklists",course:"Course"}),Zd={people:{People:{singular:"Person",plural:"People"},Marshals:{singular:"Marshal",plural:"Marshals"},Volunteers:{singular:"Volunteer",plural:"Volunteers"},Helpers:{singular:"Helper",plural:"Helpers"},Staff:{singular:"Staff member",plural:"Staff"},Stewards:{singular:"Steward",plural:"Stewards"}},checkpoint:{Checkpoints:{singular:"Checkpoint",plural:"Checkpoints"},Stations:{singular:"Station",plural:"Stations"},Locations:{singular:"Location",plural:"Locations"}},area:{Areas:{singular:"Area",plural:"Areas"},Regions:{singular:"Region",plural:"Regions"},Zones:{singular:"Zone",plural:"Zones"}},checklist:{Checklists:{singular:"Checklist",plural:"Checklists"},Tasks:{singular:"Task",plural:"Tasks"}},course:{Course:{singular:"Course",plural:"Courses"},Route:{singular:"Route",plural:"Routes"},Track:{singular:"Track",plural:"Tracks"},Trail:{singular:"Trail",plural:"Trails"},Path:{singular:"Path",plural:"Paths"}}},Bo={people:["Helpers","Marshals","People","Staff","Stewards","Volunteers"],checkpoint:["Checkpoints","Locations","Stations"],area:["Areas","Regions","Zones"],checklist:["Checklists","Tasks"],course:["Course","Path","Route","Track","Trail"]};function mc(e){e&&(ur.value={people:e.peopleTerm||"Marshals",checkpoint:e.checkpointTerm||"Checkpoints",area:e.areaTerm||"Areas",checklist:e.checklistTerm||"Checklists",course:e.courseTerm||"Course"})}const On=e=>e.toLowerCase(),Dn=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function ht(){const e=f=>{const v=ur.value[f];return Zd[f]?.[v]?.singular||v},n=f=>{const v=ur.value[f];return Zd[f]?.[v]?.plural||v},i=ae(()=>({person:e("people"),checkpoint:e("checkpoint"),area:e("area"),checklist:e("checklist"),course:e("course"),people:n("people"),checkpoints:n("checkpoint"),areas:n("area"),checklists:n("checklist"),courses:n("course")})),r=ae(()=>({person:On(e("people")),checkpoint:On(e("checkpoint")),area:On(e("area")),checklist:On(e("checklist")),course:On(e("course")),people:On(n("people")),checkpoints:On(n("checkpoint")),areas:On(n("area")),checklists:On(n("checklist")),courses:On(n("course"))})),s=ae(()=>({person:Dn(e("people")),checkpoint:Dn(e("checkpoint")),area:Dn(e("area")),checklist:Dn(e("checklist")),course:Dn(e("course")),people:Dn(n("people")),checkpoints:Dn(n("checkpoint")),areas:Dn(n("area")),checklists:Dn(n("checklist")),courses:Dn(n("course"))})),a=ae(()=>({course:i.value.course,checkpoints:i.value.checkpoints,areas:i.value.areas,marshals:i.value.people,checklists:i.value.checklists,notes:"Notes",details:"Event details"}));return{terms:i,termsLower:r,termsSentence:s,tabLabels:a,singular:e,plural:n,formatCount:(f,v)=>v===1?`1 ${e(f)}`:`${v} ${n(f)}`,lower:(f,v=!0)=>On(v?n(f):e(f)),title:(f,v=!0)=>v?n(f):e(f),sentence:(f,v=!0)=>Dn(v?n(f):e(f)),terminology:ur}}const cw=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",wr=e=>{if(!e)return"";const n=new Date(e),i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),a=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return`${i}-${r}-${s}T${a}:${l}`},Cr=e=>{if(!e||e.trim()==="")return!0;if(!/^[a-z]{1,20}[./][a-z]{1,20}[./][a-z]{1,20}$/.test(e))return!1;const i=e.includes("."),r=e.includes("/");return i!==r};function uw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ho={exports:{}};var dw=Ho.exports,qd;function hw(){return qd||(qd=1,(function(e,n){(function(i,r){r(n)})(dw,(function(i){var r="1.9.4";function s(t){var o,c,m,_;for(c=1,m=arguments.length;c<m;c++){_=arguments[c];for(o in _)t[o]=_[o]}return t}var a=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function l(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var m=c.call(arguments,2);return function(){return t.apply(o,m.length?m.concat(c.call(arguments)):arguments)}}var u=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++u),t._leaflet_id}function p(t,o,c){var m,_,P,H;return H=function(){m=!1,_&&(P.apply(c,_),_=!1)},P=function(){m?_=arguments:(t.apply(c,arguments),setTimeout(H,o),m=!0)},P}function f(t,o,c){var m=o[1],_=o[0],P=m-_;return t===m&&c?t:((t-_)%P+P)%P+_}function v(){return!1}function b(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function C(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(t){return C(t).split(/\s+/)}function $(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function R(t,o,c){var m=[];for(var _ in t)m.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(t[_]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function x(t,o){return t.replace(A,function(c,m){var _=o[m];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(o)),_})}var w=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function M(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var E=0;function q(t){var o=+new Date,c=Math.max(0,16-(o-E));return E=o+c,window.setTimeout(t,c)}var U=window.requestAnimationFrame||I("RequestAnimationFrame")||q,Q=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ce(t,o,c){if(c&&U===q)t.call(o);else return U.call(window,l(t,o))}function re(t){t&&Q.call(window,t)}var Le={__proto__:null,extend:s,create:a,bind:l,get lastId(){return u},stamp:h,throttle:p,wrapNum:f,falseFn:v,formatNum:b,trim:C,splitWords:S,setOptions:$,getParamString:R,template:x,isArray:w,indexOf:M,emptyImageUrl:k,requestFn:U,cancelFn:Q,requestAnimFrame:ce,cancelAnimFrame:re};function Z(){}Z.extend=function(t){var o=function(){$(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,m=a(c);m.constructor=o,o.prototype=m;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(o[_]=this[_]);return t.statics&&s(o,t.statics),t.includes&&(W(t.includes),s.apply(null,[m].concat(t.includes))),s(m,t),delete m.statics,delete m.includes,m.options&&(m.options=c.options?a(c.options):{},s(m.options,t.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,H=m._initHooks.length;P<H;P++)m._initHooks[P].call(this)}},o},Z.include=function(t){var o=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},Z.mergeOptions=function(t){return s(this.prototype.options,t),this},Z.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function W(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=w(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o);else{t=S(t);for(var _=0,P=t.length;_<P;_++)this._on(t[_],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var m in t)this._off(m,t[m],o);else{t=S(t);for(var _=arguments.length===1,P=0,H=t.length;P<H;P++)_?this._off(t[P]):this._off(t[P],o,c)}return this},_on:function(t,o,c,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var _={fn:o,ctx:c};m&&(_.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(_)}},_off:function(t,o,c){var m,_,P;if(this._events&&(m=this._events[t],!!m)){if(arguments.length===1){if(this._firingCount)for(_=0,P=m.length;_<P;_++)m[_].fn=v;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var H=this._listens(t,o,c);if(H!==!1){var K=m[H];this._firingCount&&(K.fn=v,this._events[t]=m=m.slice()),m.splice(H,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var m=s({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var _=this._events[t];if(_){this._firingCount=this._firingCount+1||1;for(var P=0,H=_.length;P<H;P++){var K=_[P],ie=K.fn;K.once&&this.off(t,ie,K.ctx),ie.call(K.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(t,o,c,m){typeof t!="string"&&console.warn('"string" type argument expected');var _=o;typeof o!="function"&&(m=!!o,_=void 0,c=void 0);var P=this._events&&this._events[t];if(P&&P.length&&this._listens(t,_,c)!==!1)return!0;if(m){for(var H in this._eventParents)if(this._eventParents[H].listens(t,o,c,m))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var m=this._events[t]||[];if(!o)return!!m.length;c===this&&(c=void 0);for(var _=0,P=m.length;_<P;_++)if(m[_].fn===o&&m[_].ctx===c)return _;return!1},once:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o,!0);else{t=S(t);for(var _=0,P=t.length;_<P;_++)this._on(t[_],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var me=Z.extend(Y);function he(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var Ae=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};he.prototype={clone:function(){return new he(this.x,this.y)},add:function(t){return this.clone()._add(ee(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(ee(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new he(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new he(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ae(this.x),this.y=Ae(this.y),this},distanceTo:function(t){t=ee(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=ee(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=ee(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function ee(t,o,c){return t instanceof he?t:w(t)?new he(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new he(t.x,t.y):new he(t,o,c)}function ve(t,o){if(t)for(var c=o?[t,o]:t,m=0,_=c.length;m<_;m++)this.extend(c[m])}ve.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof he||typeof t[0]=="number"||"x"in t)o=c=ee(t);else if(t=Ee(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof he?t=ee(t):t=Ee(t),t instanceof ve?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=Ee(t);var o=this.min,c=this.max,m=t.min,_=t.max,P=_.x>=o.x&&m.x<=c.x,H=_.y>=o.y&&m.y<=c.y;return P&&H},overlaps:function(t){t=Ee(t);var o=this.min,c=this.max,m=t.min,_=t.max,P=_.x>o.x&&m.x<c.x,H=_.y>o.y&&m.y<c.y;return P&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,m=Math.abs(o.x-c.x)*t,_=Math.abs(o.y-c.y)*t;return Ee(ee(o.x-m,o.y-_),ee(c.x+m,c.y+_))},equals:function(t){return t?(t=Ee(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Ee(t,o){return!t||t instanceof ve?t:new ve(t,o)}function Be(t,o){if(t)for(var c=o?[t,o]:t,m=0,_=c.length;m<_;m++)this.extend(c[m])}Be.prototype={extend:function(t){var o=this._southWest,c=this._northEast,m,_;if(t instanceof ue)m=t,_=t;else if(t instanceof Be){if(m=t._southWest,_=t._northEast,!m||!_)return this}else return t?this.extend(pe(t)||ge(t)):this;return!o&&!c?(this._southWest=new ue(m.lat,m.lng),this._northEast=new ue(_.lat,_.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,m=Math.abs(o.lat-c.lat)*t,_=Math.abs(o.lng-c.lng)*t;return new Be(new ue(o.lat-m,o.lng-_),new ue(c.lat+m,c.lng+_))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ue||"lat"in t?t=pe(t):t=ge(t);var o=this._southWest,c=this._northEast,m,_;return t instanceof Be?(m=t.getSouthWest(),_=t.getNorthEast()):m=_=t,m.lat>=o.lat&&_.lat<=c.lat&&m.lng>=o.lng&&_.lng<=c.lng},intersects:function(t){t=ge(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),_=t.getNorthEast(),P=_.lat>=o.lat&&m.lat<=c.lat,H=_.lng>=o.lng&&m.lng<=c.lng;return P&&H},overlaps:function(t){t=ge(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),_=t.getNorthEast(),P=_.lat>o.lat&&m.lat<c.lat,H=_.lng>o.lng&&m.lng<c.lng;return P&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=ge(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(t,o){return t instanceof Be?t:new Be(t,o)}function ue(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}ue.prototype={equals:function(t,o){if(!t)return!1;t=pe(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+b(this.lat,t)+", "+b(this.lng,t)+")"},distanceTo:function(t){return J.distance(this,pe(t))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return ge([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function pe(t,o,c){return t instanceof ue?t:w(t)&&typeof t[0]!="object"?t.length===3?new ue(t[0],t[1],t[2]):t.length===2?new ue(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ue(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new ue(t,o,c)}var V={latLngToPoint:function(t,o){var c=this.projection.project(t),m=this.scale(o);return this.transformation._transform(c,m)},pointToLatLng:function(t,o){var c=this.scale(o),m=this.transformation.untransform(t,c);return this.projection.unproject(m)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),m=this.transformation.transform(o.min,c),_=this.transformation.transform(o.max,c);return new ve(m,_)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?f(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?f(t.lat,this.wrapLat,!0):t.lat,m=t.alt;return new ue(c,o,m)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),m=o.lat-c.lat,_=o.lng-c.lng;if(m===0&&_===0)return t;var P=t.getSouthWest(),H=t.getNorthEast(),K=new ue(P.lat-m,P.lng-_),ie=new ue(H.lat-m,H.lng-_);return new Be(K,ie)}},J=s({},V,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,m=t.lat*c,_=o.lat*c,P=Math.sin((o.lat-t.lat)*c/2),H=Math.sin((o.lng-t.lng)*c/2),K=P*P+Math.cos(m)*Math.cos(_)*H*H,ie=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*ie}}),te=6378137,we={R:te,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,t.lat),-c),_=Math.sin(m*o);return new he(this.R*t.lng*o,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(t){var o=180/Math.PI;return new ue((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=te*Math.PI;return new ve([-t,-t],[t,t])})()};function Xe(t,o,c,m){if(w(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=m}Xe.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new he((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function D(t,o,c,m){return new Xe(t,o,c,m)}var z=s({},J,{code:"EPSG:3857",projection:we,transformation:(function(){var t=.5/(Math.PI*we.R);return D(t,.5,-t,.5)})()}),j=s({},z,{code:"EPSG:900913"});function le(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function fe(t,o){var c="",m,_,P,H,K,ie;for(m=0,P=t.length;m<P;m++){for(K=t[m],_=0,H=K.length;_<H;_++)ie=K[_],c+=(_?"L":"M")+ie.x+" "+ie.y;c+=o?Ne.svg?"z":"x":""}return c||"M0 0"}var de=document.documentElement.style,Ie="ActiveXObject"in window,Te=Ie&&!document.addEventListener,xe="msLaunchUri"in navigator&&!("documentMode"in document),_e=cn("webkit"),ze=cn("android"),Me=cn("android 2")||cn("android 3"),Ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ge=ze&&cn("Google")&&Ue<537&&!("AudioNode"in window),Ke=!!window.opera,Je=!xe&&cn("chrome"),He=cn("gecko")&&!_e&&!Ke&&!Ie,vt=!Je&&cn("safari"),xt=cn("phantom"),Ct="OTransition"in de,gt=navigator.platform.indexOf("Win")===0,nn=Ie&&"transition"in de,jt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Me,yt="MozPerspective"in de,et=!window.L_DISABLE_3D&&(nn||jt||yt)&&!Ct&&!xt,St=typeof orientation<"u"||cn("mobile"),bt=St&&_e,es=St&&jt,vn=!window.PointerEvent&&window.MSPointerEvent,qn=!!(window.PointerEvent||vn),ne="ontouchstart"in window||!!window.TouchEvent,X=!window.L_NO_TOUCH&&(ne||qn),se=St&&Ke,Pe=St&&He,rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,At=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return t})(),En=(function(){return!!document.createElement("canvas").getContext})(),Sn=!!(document.createElementNS&&le("svg").createSVGRect),ts=!!Sn&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ci=!Sn&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),io=navigator.platform.indexOf("Mac")===0,oo=navigator.platform.indexOf("Linux")===0;function cn(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ne={ie:Ie,ielt9:Te,edge:xe,webkit:_e,android:ze,android23:Me,androidStock:Ge,opera:Ke,chrome:Je,gecko:He,safari:vt,phantom:xt,opera12:Ct,win:gt,ie3d:nn,webkit3d:jt,gecko3d:yt,any3d:et,mobile:St,mobileWebkit:bt,mobileWebkit3d:es,msPointer:vn,pointer:qn,touch:X,touchNative:ne,mobileOpera:se,mobileGecko:Pe,retina:rt,passiveEvents:At,canvas:En,svg:Sn,vml:Ci,inlineSvg:ts,mac:io,linux:oo},ns=Ne.msPointer?"MSPointerDown":"pointerdown",Ts=Ne.msPointer?"MSPointerMove":"pointermove",Ys=Ne.msPointer?"MSPointerUp":"pointerup",ao=Ne.msPointer?"MSPointerCancel":"pointercancel",ro={touchstart:ns,touchmove:Ts,touchend:Ys,touchcancel:ao},ya={touchstart:Nt,touchmove:Li,touchend:Li,touchcancel:Li},Es={},lo=!1;function Xr(t,o,c){return o==="touchstart"&&tl(),ya[o]?(c=ya[o].bind(this,c),t.addEventListener(ro[o],c,!1),c):(console.warn("wrong event specified:",o),v)}function ba(t,o,c){if(!ro[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(ro[o],c,!1)}function Qr(t){Es[t.pointerId]=t}function el(t){Es[t.pointerId]&&(Es[t.pointerId]=t)}function ka(t){delete Es[t.pointerId]}function tl(){lo||(document.addEventListener(ns,Qr,!0),document.addEventListener(Ts,el,!0),document.addEventListener(Ys,ka,!0),document.addEventListener(ao,ka,!0),lo=!0)}function Li(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in Es)o.touches.push(Es[c]);o.changedTouches=[o],t(o)}}function Nt(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Ht(o),Li(t,o)}function nl(t){var o={},c,m;for(m in t)c=t[m],o[m]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var sl=200;function wa(t,o){t.addEventListener("dblclick",o);var c=0,m;function _(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var H=xa(P);if(!(H.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!H.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var K=Date.now();K-c<=sl?(m++,m===2&&o(nl(P))):m=1,c=K}}}return t.addEventListener("click",_),{dblclick:o,simDblclick:_}}function il(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var co=Ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mt=Ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),uo=Mt==="webkitTransition"||Mt==="OTransition"?Mt+"End":"transitionend";function xi(t){return typeof t=="string"?document.getElementById(t):t}function ss(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(t,null);c=m?m[o]:null}return c==="auto"?null:c}function ut(t,o,c){var m=document.createElement(t);return m.className=o||"",c&&c.appendChild(m),m}function kt(t){var o=t.parentNode;o&&o.removeChild(t)}function Js(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function jn(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function Ss(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function ho(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=Ai(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function Qe(t,o){if(t.classList!==void 0)for(var c=S(o),m=0,_=c.length;m<_;m++)t.classList.add(c[m]);else if(!ho(t,o)){var P=Ai(t);fo(t,(P?P+" ":"")+o)}}function Et(t,o){t.classList!==void 0?t.classList.remove(o):fo(t,C((" "+Ai(t)+" ").replace(" "+o+" "," ")))}function fo(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function Ai(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function un(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&ol(t,o)}function ol(t,o){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+m+"(opacity="+o+")"}function Ii(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function Mn(t,o,c){var m=o||new he(0,0);t.style[co]=(Ne.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function Pt(t,o){t._leaflet_pos=o,Ne.any3d?Mn(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function is(t){return t._leaflet_pos||new he(0,0)}var Xs,Qs,ei;if("onselectstart"in document)Xs=function(){tt(window,"selectstart",Ht)},Qs=function(){mt(window,"selectstart",Ht)};else{var ti=Ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xs=function(){if(ti){var t=document.documentElement.style;ei=t[ti],t[ti]="none"}},Qs=function(){ti&&(document.documentElement.style[ti]=ei,ei=void 0)}}function po(){tt(window,"dragstart",Ht)}function mo(){mt(window,"dragstart",Ht)}var Ti,ni;function vo(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(si(),Ti=t,ni=t.style.outlineStyle,t.style.outlineStyle="none",tt(window,"keydown",si))}function si(){Ti&&(Ti.style.outlineStyle=ni,Ti=void 0,ni=void 0,mt(window,"keydown",si))}function Ca(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function go(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var _o={__proto__:null,TRANSFORM:co,TRANSITION:Mt,TRANSITION_END:uo,get:xi,getStyle:ss,create:ut,remove:kt,empty:Js,toFront:jn,toBack:Ss,hasClass:ho,addClass:Qe,removeClass:Et,setClass:fo,getClass:Ai,setOpacity:un,testProp:Ii,setTransform:Mn,setPosition:Pt,getPosition:is,get disableTextSelection(){return Xs},get enableTextSelection(){return Qs},disableImageDrag:po,enableImageDrag:mo,preventOutline:vo,restoreOutline:si,getSizedParentNode:Ca,getScale:go};function tt(t,o,c,m){if(o&&typeof o=="object")for(var _ in o)yo(t,_,o[_],c);else{o=S(o);for(var P=0,H=o.length;P<H;P++)yo(t,o[P],c,m)}return this}var wn="_leaflet_events";function mt(t,o,c,m){if(arguments.length===1)La(t),delete t[wn];else if(o&&typeof o=="object")for(var _ in o)Si(t,_,o[_],c);else if(o=S(o),arguments.length===2)La(t,function(K){return M(o,K)!==-1});else for(var P=0,H=o.length;P<H;P++)Si(t,o[P],c,m);return this}function La(t,o){for(var c in t[wn]){var m=c.split(/\d/)[0];(!o||o(m))&&Si(t,m,null,null,c)}}var Ei={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function yo(t,o,c,m){var _=o+h(c)+(m?"_"+h(m):"");if(t[wn]&&t[wn][_])return this;var P=function(K){return c.call(m||t,K||window.event)},H=P;!Ne.touchNative&&Ne.pointer&&o.indexOf("touch")===0?P=Xr(t,o,P):Ne.touch&&o==="dblclick"?P=wa(t,P):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(Ei[o]||o,P,Ne.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(P=function(K){K=K||window.event,ko(t,K)&&H(K)},t.addEventListener(Ei[o],P,!1)):t.addEventListener(o,H,!1):t.attachEvent("on"+o,P),t[wn]=t[wn]||{},t[wn][_]=P}function Si(t,o,c,m,_){_=_||o+h(c)+(m?"_"+h(m):"");var P=t[wn]&&t[wn][_];if(!P)return this;!Ne.touchNative&&Ne.pointer&&o.indexOf("touch")===0?ba(t,o,P):Ne.touch&&o==="dblclick"?il(t,P):"removeEventListener"in t?t.removeEventListener(Ei[o]||o,P,!1):t.detachEvent("on"+o,P),t[wn][_]=null}function os(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function bo(t){return yo(t,"wheel",os),this}function ii(t){return tt(t,"mousedown touchstart dblclick contextmenu",os),t._leaflet_disable_click=!0,this}function Ht(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function as(t){return Ht(t),os(t),this}function xa(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function Aa(t,o){if(!o)return new he(t.clientX,t.clientY);var c=go(o),m=c.boundingClientRect;return new he((t.clientX-m.left)/c.x-o.clientLeft,(t.clientY-m.top)/c.y-o.clientTop)}var al=Ne.linux&&Ne.chrome?window.devicePixelRatio:Ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ia(t){return Ne.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/al:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function ko(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var rl={__proto__:null,on:tt,off:mt,stopPropagation:os,disableScrollPropagation:bo,disableClickPropagation:ii,preventDefault:Ht,stop:as,getPropagationPath:xa,getMousePosition:Aa,getWheelDelta:Ia,isExternalTarget:ko,addListener:tt,removeListener:mt},Ta=me.extend({run:function(t,o,c,m){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=is(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ce(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),Pt(this._el,c),this.fire("step")},_complete:function(){re(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),at=me.extend({options:{crs:z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=$(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(pe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mt&&Ne.any3d&&!Ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),tt(this._proxy,uo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(pe(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var m=this.getZoomScale(o),_=this.getSize().divideBy(2),P=t instanceof he?t:this.latLngToContainerPoint(t),H=P.subtract(_).multiplyBy(1-1/m),K=this.containerPointToLatLng(_.add(H));return this.setView(K,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():ge(t);var c=ee(o.paddingTopLeft||o.padding||[0,0]),m=ee(o.paddingBottomRight||o.padding||[0,0]),_=this.getBoundsZoom(t,!1,c.add(m));if(_=typeof o.maxZoom=="number"?Math.min(o.maxZoom,_):_,_===1/0)return{center:t.getCenter(),zoom:_};var P=m.subtract(c).divideBy(2),H=this.project(t.getSouthWest(),_),K=this.project(t.getNorthEast(),_),ie=this.unproject(H.add(K).divideBy(2).add(P),_);return{center:ie,zoom:_}},fitBounds:function(t,o){if(t=ge(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=ee(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ta,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Qe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!Ne.any3d)return this.setView(t,o,c);this._stop();var m=this.project(this.getCenter()),_=this.project(t),P=this.getSize(),H=this._zoom;t=pe(t),o=o===void 0?H:o;var K=Math.max(P.x,P.y),ie=K*this.getZoomScale(H,o),ye=_.distanceTo(m)||1,Re=1.42,Ye=Re*Re;function lt(Ut){var qa=Ut?-1:1,Up=Ut?ie:K,Hp=ie*ie-K*K+qa*Ye*Ye*ye*ye,Vp=2*Up*Ye*ye,wl=Hp/Vp,gu=Math.sqrt(wl*wl+1)-wl,Zp=gu<1e-9?-18:Math.log(gu);return Zp}function sn(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function Zt(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}function Ln(Ut){return sn(Ut)/Zt(Ut)}var dn=lt(0);function Ni(Ut){return K*(Zt(dn)/Zt(dn+Re*Ut))}function Np(Ut){return K*(Zt(dn)*Ln(dn+Re*Ut)-sn(dn))/Ye}function Bp(Ut){return 1-Math.pow(1-Ut,1.5)}var Fp=Date.now(),mu=(lt(1)-dn)/Re,zp=c.duration?1e3*c.duration:1e3*mu*.8;function vu(){var Ut=(Date.now()-Fp)/zp,qa=Bp(Ut)*mu;Ut<=1?(this._flyToFrame=ce(vu,this),this._move(this.unproject(m.add(_.subtract(m).multiplyBy(Np(qa)/ye)),H),this.getScaleZoom(K/Ni(qa),H),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),vu.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=ge(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,ge(t));return c.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=ee(o.paddingTopLeft||o.padding||[0,0]),m=ee(o.paddingBottomRight||o.padding||[0,0]),_=this.project(this.getCenter()),P=this.project(t),H=this.getPixelBounds(),K=Ee([H.min.add(c),H.max.subtract(m)]),ie=K.getSize();if(!K.contains(P)){this._enforcingBounds=!0;var ye=P.subtract(K.getCenter()),Re=K.extend(P).getSize().subtract(ie);_.x+=ye.x<0?-Re.x:Re.x,_.y+=ye.y<0?-Re.y:Re.y,this.panTo(this.unproject(_),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=o.divideBy(2).round(),_=c.divideBy(2).round(),P=m.subtract(_);return!P.x&&!P.y?this:(t.animate&&t.pan?this.panBy(P):(t.pan&&this._rawPanBy(P),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,m=new ue(o,c),_=m.toBounds(t.coords.accuracy*2),P=this._locateOptions;if(P.setView){var H=this.getBoundsZoom(_);this.setView(m,P.maxZoom?Math.min(H,P.maxZoom):H)}var K={latlng:m,bounds:_,timestamp:t.timestamp};for(var ie in t.coords)typeof t.coords[ie]=="number"&&(K[ie]=t.coords[ie]);this.fire("locationfound",K)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(re(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)kt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),m=ut("div",c,o||this._mapPane);return t&&(this._panes[t]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new Be(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=ge(t),c=ee(c||[0,0]);var m=this.getZoom()||0,_=this.getMinZoom(),P=this.getMaxZoom(),H=t.getNorthWest(),K=t.getSouthEast(),ie=this.getSize().subtract(c),ye=Ee(this.project(K,m),this.project(H,m)).getSize(),Re=Ne.any3d?this.options.zoomSnap:1,Ye=ie.x/ye.x,lt=ie.y/ye.y,sn=o?Math.max(Ye,lt):Math.min(Ye,lt);return m=this.getScaleZoom(sn,m),Re&&(m=Math.round(m/(Re/100))*(Re/100),m=o?Math.ceil(m/Re)*Re:Math.floor(m/Re)*Re),Math.max(_,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new he(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new ve(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var m=c.zoom(t*c.scale(o));return isNaN(m)?1/0:m},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(pe(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(ee(t),o)},layerPointToLatLng:function(t){var o=ee(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(pe(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(pe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ge(t))},distance:function(t,o){return this.options.crs.distance(pe(t),pe(o))},containerPointToLayerPoint:function(t){return ee(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return ee(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(ee(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(t)))},mouseEventToContainerPoint:function(t){return Aa(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=xi(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");tt(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ne.any3d,Qe(t,"leaflet-container"+(Ne.touch?" leaflet-touch":"")+(Ne.retina?" leaflet-retina":"")+(Ne.ielt9?" leaflet-oldie":"")+(Ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=ss(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pt(this._mapPane,new he(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qe(t.markerPane,"leaflet-zoom-hide"),Qe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){Pt(this._mapPane,new he(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var _=this._zoom!==o;this._moveStart(_,c)._move(t,o)._moveEnd(_),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,m){o===void 0&&(o=this._zoom);var _=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),m?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return re(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Pt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var o=t?mt:tt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Ne.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){re(this._resizeRequest),this._resizeRequest=ce(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],m,_=o==="mouseout"||o==="mouseover",P=t.target||t.srcElement,H=!1;P;){if(m=this._targets[h(P)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){H=!0;break}if(m&&m.listens(o,!0)&&(_&&!ko(P,t)||(c.push(m),_))||P===this._container)break;P=P.parentNode}return!c.length&&!H&&!_&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&vo(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var m=s({},t);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var _=this._findEventTargets(t,o);if(c){for(var P=[],H=0;H<c.length;H++)c[H].listens(o,!0)&&P.push(c[H]);_=P.concat(_)}if(_.length){o==="contextmenu"&&Ht(t);var K=_[0],ie={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ye=K.getLatLng&&(!K._radius||K._radius<=10);ie.containerPoint=ye?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(t),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=ye?K.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(H=0;H<_.length;H++)if(_[H].fire(o,ie,!0),ie.originalEvent._stopped||_[H].options.bubblingMouseEvents===!1&&M(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return is(this._mapPane)||new he(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return Ee([this.project(t.getSouthWest(),o)._subtract(m),this.project(t.getNorthWest(),o)._subtract(m),this.project(t.getSouthEast(),o)._subtract(m),this.project(t.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var m=this.project(t,o),_=this.getSize().divideBy(2),P=new ve(m.subtract(_),m.add(_)),H=this._getBoundsOffset(P,c,o);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?t:this.unproject(m.add(H),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),m=new ve(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(t,o,c){var m=Ee(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),_=m.min.subtract(t.min),P=m.max.subtract(t.max),H=this._rebound(_.x,-P.x),K=this._rebound(_.y,-P.y);return new he(H,K)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),m=Ne.any3d?this.options.zoomSnap:1;return m&&(t=Math.round(t/m)*m),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=ut("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=co,m=this._proxy.style[c];Mn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();Mn(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),_=this._getCenterOffset(t)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(_)?!1:(ce(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,Qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ll(t,o){return new at(t,o)}var Kt=Z.extend({options:{position:"topright"},initialize:function(t){$(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),m=t._controlCorners[c];return Qe(o,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),oi=function(t){return new Kt(t)};at.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=ut("div",o+"control-container",this._container);function m(_,P){var H=o+_+" "+o+P;t[_+P]=ut("div",H,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)kt(this._controlCorners[t]);kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wo=Kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,m){return c<m?-1:m<c?1:0}},initialize:function(t,o,c){$(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in t)this._addLayer(t[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Kt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ut("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),ii(o),bo(o);var m=this._section=ut("section",t+"-list");c&&(this._map.on("click",this.collapse,this),tt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=ut("a",t+"-toggle",o);_.href="#",_.title="Layers",_.setAttribute("role","button"),tt(_,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){Ht(P),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=ut("div",t+"-base",m),this._separator=ut("div",t+"-separator",m),this._overlaysList=ut("div",t+"-overlays",m),o.appendChild(m)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(m,_){return this.options.sortFunction(m.layer,_.layer,m.name,_.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Js(this._baseLayersList),Js(this._overlaysList),this._layerControlInputs=[];var t,o,c,m,_=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),o=o||m.overlay,t=t||!m.overlay,_+=m.overlay?0:1;return this.options.hideSingleBase&&(t=t&&_>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(h(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),m;t.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+h(this),c),this._layerControlInputs.push(m),m.layerId=h(t.layer),tt(m,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+t.name;var P=document.createElement("span");o.appendChild(P),P.appendChild(m),P.appendChild(_);var H=t.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,m=[],_=[];this._handlingClick=!0;for(var P=t.length-1;P>=0;P--)o=t[P],c=this._getLayer(o.layerId).layer,o.checked?m.push(c):o.checked||_.push(c);for(P=0;P<_.length;P++)this._map.hasLayer(_[P])&&this._map.removeLayer(_[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,m=this._map.getZoom(),_=t.length-1;_>=0;_--)o=t[_],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,tt(t,"click",Ht),this.expand();var o=this;setTimeout(function(){mt(t,"click",Ht),o._preventClick=!1})}}),Co=function(t,o,c){return new wo(t,o,c)},ai=Kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=ut("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,m,_){var P=ut("a",c,m);return P.innerHTML=t,P.href="#",P.title=o,P.setAttribute("role","button"),P.setAttribute("aria-label",o),ii(P),tt(P,"click",as),tt(P,"click",_,this),tt(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Et(this._zoomInButton,o),Et(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Qe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Qe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ai,this.addControl(this.zoomControl))});var cl=function(t){return new ai(t)},Ea=Kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=ut("div",o),m=this.options;return this._addScales(m,o+"-line",c),t.on(m.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=ut("div",o,c)),t.imperial&&(this._iScale=ut("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,m,_;o>5280?(c=o/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(_=this._getRoundNum(o),this._updateScale(this._iScale,_+" ft",_/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),ul=function(t){return new Ea(t)},dl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Lo=Kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ne.inlineSvg?dl+" ":"")+"Leaflet</a>"},initialize:function(t){$(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ut("div","leaflet-control-attribution"),ii(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new Lo().addTo(this)});var Sa=function(t){return new Lo(t)};Kt.Layers=wo,Kt.Zoom=ai,Kt.Scale=Ea,Kt.Attribution=Lo,oi.layers=Co,oi.zoom=cl,oi.scale=ul,oi.attribution=Sa;var Cn=Z.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cn.addTo=function(t,o){return t.addHandler(o,this),this};var hl={Events:Y},Ma=Ne.touch?"touchstart mousedown":"mousedown",Pn=me.extend({options:{clickTolerance:3},initialize:function(t,o,c,m){$(this,m),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(tt(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pn._dragging===this&&this.finishDrag(!0),mt(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ho(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Pn._dragging===this&&this.finishDrag();return}if(!(Pn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Pn._dragging=this,this._preventOutline&&vo(this._element),po(),Xs(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=Ca(this._element);this._startPoint=new he(o.clientX,o.clientY),this._startPos=is(this._element),this._parentScale=go(c);var m=t.type==="mousedown";tt(document,m?"mousemove":"touchmove",this._onMove,this),tt(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new he(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Ht(t),this._moved||(this.fire("dragstart"),this._moved=!0,Qe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Pt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Et(document.body,"leaflet-dragging"),this._lastTarget&&(Et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mt(document,"mousemove touchmove",this._onMove,this),mt(document,"mouseup touchend touchcancel",this._onUp,this),mo(),Qs();var o=this._moved&&this._moving;this._moving=!1,Pn._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Pa(t,o,c){var m,_=[1,4,2,8],P,H,K,ie,ye,Re,Ye,lt;for(P=0,Re=t.length;P<Re;P++)t[P]._code=Ce(t[P],o);for(K=0;K<4;K++){for(Ye=_[K],m=[],P=0,Re=t.length,H=Re-1;P<Re;H=P++)ie=t[P],ye=t[H],ie._code&Ye?ye._code&Ye||(lt=be(ye,ie,Ye,o,c),lt._code=Ce(lt,o),m.push(lt)):(ye._code&Ye&&(lt=be(ye,ie,Ye,o,c),lt._code=Ce(lt,o),m.push(lt)),m.push(ie));t=m}return t}function xo(t,o){var c,m,_,P,H,K,ie,ye,Re;if(!t||t.length===0)throw new Error("latlngs not passed");$t(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Ye=pe([0,0]),lt=ge(t),sn=lt.getNorthWest().distanceTo(lt.getSouthWest())*lt.getNorthEast().distanceTo(lt.getNorthWest());sn<1700&&(Ye=Ao(t));var Zt=t.length,Ln=[];for(c=0;c<Zt;c++){var dn=pe(t[c]);Ln.push(o.project(pe([dn.lat-Ye.lat,dn.lng-Ye.lng])))}for(K=ie=ye=0,c=0,m=Zt-1;c<Zt;m=c++)_=Ln[c],P=Ln[m],H=_.y*P.x-P.y*_.x,ie+=(_.x+P.x)*H,ye+=(_.y+P.y)*H,K+=H*3;K===0?Re=Ln[0]:Re=[ie/K,ye/K];var Ni=o.unproject(ee(Re));return pe([Ni.lat+Ye.lat,Ni.lng+Ye.lng])}function Ao(t){for(var o=0,c=0,m=0,_=0;_<t.length;_++){var P=pe(t[_]);o+=P.lat,c+=P.lng,m++}return pe([o/m,c/m])}var fl={__proto__:null,clipPolygon:Pa,polygonCenter:xo,centroid:Ao};function $a(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=ml(t,c),t=Oa(t,c),t}function Mi(t,o,c){return Math.sqrt(zt(t,o,c,!0))}function pl(t,o,c){return zt(t,o,c)}function Oa(t,o){var c=t.length,m=typeof Uint8Array<"u"?Uint8Array:Array,_=new m(c);_[0]=_[c-1]=1,Io(t,_,o,0,c-1);var P,H=[];for(P=0;P<c;P++)_[P]&&H.push(t[P]);return H}function Io(t,o,c,m,_){var P=0,H,K,ie;for(K=m+1;K<=_-1;K++)ie=zt(t[K],t[m],t[_],!0),ie>P&&(H=K,P=ie);P>c&&(o[H]=1,Io(t,o,c,m,H),Io(t,o,c,H,_))}function ml(t,o){for(var c=[t[0]],m=1,_=0,P=t.length;m<P;m++)ct(t[m],t[_])>o&&(c.push(t[m]),_=m);return _<P-1&&c.push(t[P-1]),c}var N;function G(t,o,c,m,_){var P=m?N:Ce(t,c),H=Ce(o,c),K,ie,ye;for(N=H;;){if(!(P|H))return[t,o];if(P&H)return!1;K=P||H,ie=be(t,o,K,c,_),ye=Ce(ie,c),K===P?(t=ie,P=ye):(o=ie,H=ye)}}function be(t,o,c,m,_){var P=o.x-t.x,H=o.y-t.y,K=m.min,ie=m.max,ye,Re;return c&8?(ye=t.x+P*(ie.y-t.y)/H,Re=ie.y):c&4?(ye=t.x+P*(K.y-t.y)/H,Re=K.y):c&2?(ye=ie.x,Re=t.y+H*(ie.x-t.x)/P):c&1&&(ye=K.x,Re=t.y+H*(K.x-t.x)/P),new he(ye,Re,_)}function Ce(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function ct(t,o){var c=o.x-t.x,m=o.y-t.y;return c*c+m*m}function zt(t,o,c,m){var _=o.x,P=o.y,H=c.x-_,K=c.y-P,ie=H*H+K*K,ye;return ie>0&&(ye=((t.x-_)*H+(t.y-P)*K)/ie,ye>1?(_=c.x,P=c.y):ye>0&&(_+=H*ye,P+=K*ye)),H=t.x-_,K=t.y-P,m?H*H+K*K:new he(_,P)}function $t(t){return!w(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ms(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$t(t)}function Gc(t,o){var c,m,_,P,H,K,ie,ye;if(!t||t.length===0)throw new Error("latlngs not passed");$t(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Re=pe([0,0]),Ye=ge(t),lt=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());lt<1700&&(Re=Ao(t));var sn=t.length,Zt=[];for(c=0;c<sn;c++){var Ln=pe(t[c]);Zt.push(o.project(pe([Ln.lat-Re.lat,Ln.lng-Re.lng])))}for(c=0,m=0;c<sn-1;c++)m+=Zt[c].distanceTo(Zt[c+1])/2;if(m===0)ye=Zt[0];else for(c=0,P=0;c<sn-1;c++)if(H=Zt[c],K=Zt[c+1],_=H.distanceTo(K),P+=_,P>m){ie=(P-m)/_,ye=[K.x-ie*(K.x-H.x),K.y-ie*(K.y-H.y)];break}var dn=o.unproject(ee(ye));return pe([dn.lat+Re.lat,dn.lng+Re.lng])}var hp={__proto__:null,simplify:$a,pointToSegmentDistance:Mi,closestPointOnSegment:pl,clipSegment:G,_getEdgeIntersection:be,_getBitCode:Ce,_sqClosestPointOnSegment:zt,isFlat:$t,_flat:Ms,polylineCenter:Gc},vl={project:function(t){return new he(t.lng,t.lat)},unproject:function(t){return new ue(t.y,t.x)},bounds:new ve([-180,-90],[180,90])},gl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ve([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,m=t.lat*o,_=this.R_MINOR/c,P=Math.sqrt(1-_*_),H=P*Math.sin(m),K=Math.tan(Math.PI/4-m/2)/Math.pow((1-H)/(1+H),P/2);return m=-c*Math.log(Math.max(K,1e-10)),new he(t.lng*o*c,m)},unproject:function(t){for(var o=180/Math.PI,c=this.R,m=this.R_MINOR/c,_=Math.sqrt(1-m*m),P=Math.exp(-t.y/c),H=Math.PI/2-2*Math.atan(P),K=0,ie=.1,ye;K<15&&Math.abs(ie)>1e-7;K++)ye=_*Math.sin(H),ye=Math.pow((1-ye)/(1+ye),_/2),ie=Math.PI/2-2*Math.atan(P*ye)-H,H+=ie;return new ue(H*o,t.x*o/c)}},fp={__proto__:null,LonLat:vl,Mercator:gl,SphericalMercator:we},pp=s({},J,{code:"EPSG:3395",projection:gl,transformation:(function(){var t=.5/(Math.PI*gl.R);return D(t,.5,-t,.5)})()}),Kc=s({},J,{code:"EPSG:4326",projection:vl,transformation:D(1/180,1,-1/180,.5)}),mp=s({},V,{projection:vl,transformation:D(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,m=o.lat-t.lat;return Math.sqrt(c*c+m*m)},infinite:!0});V.Earth=J,V.EPSG3395=pp,V.EPSG3857=z,V.EPSG900913=j,V.EPSG4326=Kc,V.Simple=mp;var $n=me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});at.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=h(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?w(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=h(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var _=this._zoomBoundLayers[m].options;t=_.minZoom===void 0?t:Math.min(t,_.minZoom),o=_.maxZoom===void 0?o:Math.max(o,_.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pi=$n.extend({initialize:function(t,o){$(this,o),this._layers={};var c,m;if(t)for(c=0,m=t.length;c<m;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[t]&&m[t].apply(m,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),vp=function(t,o){return new Pi(t,o)},rs=Pi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Be;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),gp=function(t,o){return new rs(t,o)},$i=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){$(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(t,o){var c=this.options,m=c[o+"Size"];typeof m=="number"&&(m=[m,m]);var _=ee(m),P=ee(o==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),P&&(t.style.marginLeft=-P.x+"px",t.style.marginTop=-P.y+"px"),_&&(t.style.width=_.x+"px",t.style.height=_.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return Ne.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function _p(t){return new $i(t)}var To=$i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof To.imagePath!="string"&&(To.imagePath=this._detectIconPath()),(this.options.imagePath||To.imagePath)+$i.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,m,_){var P=m.exec(c);return P&&P[_]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ut("div","leaflet-default-icon-path",document.body),o=ss(t,"background-image")||ss(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Yc=Cn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Pn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,m=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,P=is(o._icon),H=c.getPixelBounds(),K=c.getPixelOrigin(),ie=Ee(H.min._subtract(K).add(_),H.max._subtract(K).subtract(_));if(!ie.contains(P)){var ye=ee((Math.max(ie.max.x,P.x)-ie.max.x)/(H.max.x-ie.max.x)-(Math.min(ie.min.x,P.x)-ie.min.x)/(H.min.x-ie.min.x),(Math.max(ie.max.y,P.y)-ie.max.y)/(H.max.y-ie.max.y)-(Math.min(ie.min.y,P.y)-ie.min.y)/(H.min.y-ie.min.y)).multiplyBy(m);c.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),Pt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ce(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(re(this._panRequest),this._panRequest=ce(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,m=is(o._icon),_=o._map.layerPointToLatLng(m);c&&Pt(c,m),o._latlng=_,t.latlng=_,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){re(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Da=$n.extend({options:{icon:new To,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){$(this,o),this._latlng=pe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=pe(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),Qe(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(c,"focus",this._panOnFocus,this);var _=t.icon.createShadow(this._shadow),P=!1;_!==this._shadow&&(this._removeShadow(),P=!0),_&&(Qe(_,o),_.alt=""),this._shadow=_,t.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&P&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(this._icon,"focus",this._panOnFocus,this),kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&kt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Pt(this._icon,t),this._shadow&&Pt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yc)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yc(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&un(this._icon,t),this._shadow&&un(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?ee(o.iconSize):ee(0,0),m=o.iconAnchor?ee(o.iconAnchor):ee(0,0);t.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yp(t,o){return new Da(t,o)}var Ps=$n.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return $(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ra=Ps.extend({options:{fill:!0,radius:10},initialize:function(t,o){$(this,o),this._latlng=pe(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=pe(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return Ps.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),m=[t+c,o+c];this._pxBounds=new ve(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bp(t,o){return new Ra(t,o)}var _l=Ra.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),$(this,o),this._latlng=pe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Be(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ps.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===J.distance){var _=Math.PI/180,P=this._mRadius/J.R/_,H=c.project([o+P,t]),K=c.project([o-P,t]),ie=H.add(K).divideBy(2),ye=c.unproject(ie).lat,Re=Math.acos((Math.cos(P*_)-Math.sin(o*_)*Math.sin(ye*_))/(Math.cos(o*_)*Math.cos(ye*_)))/_;(isNaN(Re)||Re===0)&&(Re=P/Math.cos(Math.PI/180*o)),this._point=ie.subtract(c.getPixelOrigin()),this._radius=isNaN(Re)?0:ie.x-c.project([ye,t-Re]).x,this._radiusY=ie.y-H.y}else{var Ye=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Ye).x}this._updateBounds()}});function kp(t,o,c){return new _l(t,o,c)}var ls=Ps.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){$(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,m=zt,_,P,H=0,K=this._parts.length;H<K;H++)for(var ie=this._parts[H],ye=1,Re=ie.length;ye<Re;ye++){_=ie[ye-1],P=ie[ye];var Ye=m(t,_,P,!0);Ye<o&&(o=Ye,c=m(t,_,P))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=pe(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Be,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return $t(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=$t(t),m=0,_=t.length;m<_;m++)c?(o[m]=pe(t[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(t[m]);return o},_project:function(){var t=new ve;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new he(t,t);this._rawPxBounds&&(this._pxBounds=new ve([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var m=t[0]instanceof ue,_=t.length,P,H;if(m){for(H=[],P=0;P<_;P++)H[P]=this._map.latLngToLayerPoint(t[P]),c.extend(H[P]);o.push(H)}else for(P=0;P<_;P++)this._projectLatlngs(t[P],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,m,_,P,H,K,ie;for(c=0,_=0,P=this._rings.length;c<P;c++)for(ie=this._rings[c],m=0,H=ie.length;m<H-1;m++)K=G(ie[m],ie[m+1],t,m,!0),K&&(o[_]=o[_]||[],o[_].push(K[0]),(K[1]!==ie[m+1]||m===H-2)&&(o[_].push(K[1]),_++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,m=t.length;c<m;c++)t[c]=$a(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,m,_,P,H,K,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,P=this._parts.length;c<P;c++)for(K=this._parts[c],m=0,H=K.length,_=H-1;m<H;_=m++)if(!(!o&&m===0)&&Mi(t,K[_],K[m])<=ie)return!0;return!1}});function wp(t,o){return new ls(t,o)}ls._flat=Ms;var Oi=ls.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=ls.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof ue&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){ls.prototype._setLatLngs.call(this,t),$t(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $t(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new he(o,o);if(t=new ve(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,_=this._rings.length,P;m<_;m++)P=Pa(this._rings[m],t,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,m,_,P,H,K,ie,ye;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(P=0,ie=this._parts.length;P<ie;P++)for(c=this._parts[P],H=0,ye=c.length,K=ye-1;H<ye;K=H++)m=c[H],_=c[K],m.y>t.y!=_.y>t.y&&t.x<(_.x-m.x)*(t.y-m.y)/(_.y-m.y)+m.x&&(o=!o);return o||ls.prototype._containsPoint.call(this,t,!0)}});function Cp(t,o){return new Oi(t,o)}var cs=rs.extend({initialize:function(t,o){$(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=w(t)?t:t.features,c,m,_;if(o){for(c=0,m=o.length;c<m;c++)_=o[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var P=this.options;if(P.filter&&!P.filter(t))return this;var H=Na(t,P);return H?(H.feature=za(t),H.defaultOptions=H.options,this.resetStyle(H),P.onEachFeature&&P.onEachFeature(t,H),this.addLayer(H)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function Na(t,o){var c=t.type==="Feature"?t.geometry:t,m=c?c.coordinates:null,_=[],P=o&&o.pointToLayer,H=o&&o.coordsToLatLng||yl,K,ie,ye,Re;if(!m&&!c)return null;switch(c.type){case"Point":return K=H(m),Jc(P,t,K,o);case"MultiPoint":for(ye=0,Re=m.length;ye<Re;ye++)K=H(m[ye]),_.push(Jc(P,t,K,o));return new rs(_);case"LineString":case"MultiLineString":return ie=Ba(m,c.type==="LineString"?0:1,H),new ls(ie,o);case"Polygon":case"MultiPolygon":return ie=Ba(m,c.type==="Polygon"?1:2,H),new Oi(ie,o);case"GeometryCollection":for(ye=0,Re=c.geometries.length;ye<Re;ye++){var Ye=Na({geometry:c.geometries[ye],type:"Feature",properties:t.properties},o);Ye&&_.push(Ye)}return new rs(_);case"FeatureCollection":for(ye=0,Re=c.features.length;ye<Re;ye++){var lt=Na(c.features[ye],o);lt&&_.push(lt)}return new rs(_);default:throw new Error("Invalid GeoJSON object.")}}function Jc(t,o,c,m){return t?t(o,c):new Da(c,m&&m.markersInheritOptions&&m)}function yl(t){return new ue(t[1],t[0],t[2])}function Ba(t,o,c){for(var m=[],_=0,P=t.length,H;_<P;_++)H=o?Ba(t[_],o-1,c):(c||yl)(t[_]),m.push(H);return m}function bl(t,o){return t=pe(t),t.alt!==void 0?[b(t.lng,o),b(t.lat,o),b(t.alt,o)]:[b(t.lng,o),b(t.lat,o)]}function Fa(t,o,c,m){for(var _=[],P=0,H=t.length;P<H;P++)_.push(o?Fa(t[P],$t(t[P])?0:o-1,c,m):bl(t[P],m));return!o&&c&&_.length>0&&_.push(_[0].slice()),_}function Di(t,o){return t.feature?s({},t.feature,{geometry:o}):za(o)}function za(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var kl={toGeoJSON:function(t){return Di(this,{type:"Point",coordinates:bl(this.getLatLng(),t)})}};Da.include(kl),_l.include(kl),Ra.include(kl),ls.include({toGeoJSON:function(t){var o=!$t(this._latlngs),c=Fa(this._latlngs,o?1:0,!1,t);return Di(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Oi.include({toGeoJSON:function(t){var o=!$t(this._latlngs),c=o&&!$t(this._latlngs[0]),m=Fa(this._latlngs,c?2:o?1:0,!0,t);return o||(m=[m]),Di(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),Pi.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),Di(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",m=[];return this.eachLayer(function(_){if(_.toGeoJSON){var P=_.toGeoJSON(t);if(c)m.push(P.geometry);else{var H=za(P);H.type==="FeatureCollection"?m.push.apply(m,H.features):m.push(H)}}}),c?Di(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Xc(t,o){return new cs(t,o)}var Lp=Xc,Ua=$n.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=ge(o),$(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&Ss(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ge(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ut("img");if(Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Mn(this._image,c,o)},_reset:function(){var t=this._image,o=new ve(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Pt(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){un(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),xp=function(t,o,c){return new Ua(t,o,c)},Qc=Ua.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ut("video");if(Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),m=[],_=0;_<c.length;_++)m.push(c[_].src);this._url=c.length>0?m:[o.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var H=ut("source");H.src=this._url[P],o.appendChild(H)}}});function Ap(t,o,c){return new Qc(t,o,c)}var eu=Ua.extend({_initImage:function(){var t=this._image=this._url;Qe(t,"leaflet-image-layer"),this._zoomAnimated&&Qe(t,"leaflet-zoom-animated"),this.options.className&&Qe(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Ip(t,o,c){return new eu(t,o,c)}var Wn=$n.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof ue||w(t))?(this._latlng=pe(t),$(this,o)):($(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&un(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&un(this._container,1),this.bringToFront(),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(un(this._container,0),this._removeTimeout=setTimeout(l(kt,void 0,this._container),200)):kt(this._container),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=pe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&Ss(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof rs){o=null;var c=this._source._layers;for(var m in c)if(c[m]._map){o=c[m];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=ee(this.options.offset),c=this._getAnchor();this._zoomAnimated?Pt(this._container,t.add(c)):o=o.add(t).add(c);var m=this._containerBottom=-o.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(t,o,c,m){var _=o;return _ instanceof t||(_=new t(m).setContent(o)),c&&_.setLatLng(c),_}}),$n.include({_initOverlay:function(t,o,c,m){var _=c;return _ instanceof t?($(_,m),_._source=this):(_=o&&!m?o:new t(m,this),_.setContent(c)),_}});var Ha=Wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Wn.prototype.openOn.call(this,t)},onAdd:function(t){Wn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ps||this._source.on("preclick",os))},onRemove:function(t){Wn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ps||this._source.off("preclick",os))},getEvents:function(){var t=Wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ut("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=ut("div",t+"-content-wrapper",o);if(this._contentNode=ut("div",t+"-content",c),ii(o),bo(this._contentNode),tt(o,"contextmenu",os),this._tipContainer=ut("div",t+"-tip-container",o),this._tip=ut("div",t+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=ut("a",t+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',tt(m,"click",function(_){Ht(_),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var m=t.offsetHeight,_=this.options.maxHeight,P="leaflet-popup-scrolled";_&&m>_?(o.height=_+"px",Qe(t,P)):Et(t,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();Pt(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(ss(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,m=this._containerWidth,_=new he(this._containerLeft,-c-this._containerBottom);_._add(is(this._container));var P=t.layerPointToContainerPoint(_),H=ee(this.options.autoPanPadding),K=ee(this.options.autoPanPaddingTopLeft||H),ie=ee(this.options.autoPanPaddingBottomRight||H),ye=t.getSize(),Re=0,Ye=0;P.x+m+ie.x>ye.x&&(Re=P.x+m-ye.x+ie.x),P.x-Re-K.x<0&&(Re=P.x-K.x),P.y+c+ie.y>ye.y&&(Ye=P.y+c-ye.y+ie.y),P.y-Ye-K.y<0&&(Ye=P.y-K.y),(Re||Ye)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Re,Ye]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tp=function(t,o){return new Ha(t,o)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(t,o,c){return this._initOverlay(Ha,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),$n.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Ha,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof rs||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){as(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof Ps)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Va=Wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Wn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Wn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Wn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ut("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,m=this._map,_=this._container,P=m.latLngToContainerPoint(m.getCenter()),H=m.layerPointToContainerPoint(t),K=this.options.direction,ie=_.offsetWidth,ye=_.offsetHeight,Re=ee(this.options.offset),Ye=this._getAnchor();K==="top"?(o=ie/2,c=ye):K==="bottom"?(o=ie/2,c=0):K==="center"?(o=ie/2,c=ye/2):K==="right"?(o=0,c=ye/2):K==="left"?(o=ie,c=ye/2):H.x<P.x?(K="right",o=0,c=ye/2):(K="left",o=ie+(Re.x+Ye.x)*2,c=ye/2),t=t.subtract(ee(o,c,!0)).add(Re).add(Ye),Et(_,"leaflet-tooltip-right"),Et(_,"leaflet-tooltip-left"),Et(_,"leaflet-tooltip-top"),Et(_,"leaflet-tooltip-bottom"),Qe(_,"leaflet-tooltip-"+K),Pt(_,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&un(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ep=function(t,o){return new Va(t,o)};at.include({openTooltip:function(t,o,c){return this._initOverlay(Va,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),$n.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Va,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof rs||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(tt(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),tt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,m;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),m=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var tu=$i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Js(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=ee(c.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Sp(t){return new tu(t)}$i.Default=To;var Eo=$n.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){$(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),kt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ss(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof he?t:new he(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),m=0,_=o.length,P;m<_;m++)P=o[m].style.zIndex,o[m]!==this._container&&P&&(c=t(c,+P));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ne.ielt9){un(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var m in this._tiles){var _=this._tiles[m];if(!(!_.current||!_.loaded)){var P=Math.min(1,(t-_.loaded)/200);un(_.el,P),P<1?o=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(re(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ut("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(kt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[t],_=this._map;return m||(m=this._levels[t]={},m.el=ut("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=_.project(_.unproject(_.getPixelOrigin()),t).round(),m.zoom=t,this._setZoomTransform(m,_.getCenter(),_.getZoom()),v(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)kt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,m){var _=Math.floor(t/2),P=Math.floor(o/2),H=c-1,K=new he(+_,+P);K.z=+H;var ie=this._tileCoordsToKey(K),ye=this._tiles[ie];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),H>m?this._retainParent(_,P,H,m):!1)},_retainChildren:function(t,o,c,m){for(var _=2*t;_<2*t+2;_++)for(var P=2*o;P<2*o+2;P++){var H=new he(_,P);H.z=c+1;var K=this._tileCoordsToKey(H),ie=this._tiles[K];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);c+1<m&&this._retainChildren(_,P,c+1,m)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,m){var _=Math.round(o);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var P=this.options.updateWhenZooming&&_!==this._tileZoom;(!m||P)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var m=this._map.getZoomScale(c,t.zoom),_=t.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,c)).round();Ne.any3d?Mn(t.el,_,m):Pt(t.el,_)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],m).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],m).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],m).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(c,this._tileZoom),_=o.project(t,this._tileZoom).floor(),P=o.getSize().divideBy(m*2);return new ve(_.subtract(P),_.add(P))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(t),_=this._pxBoundsToTileRange(m),P=_.getCenter(),H=[],K=this.options.keepBuffer,ie=new ve(_.getBottomLeft().subtract([K,-K]),_.getTopRight().add([K,-K]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Re=this._tiles[ye].coords;(Re.z!==this._tileZoom||!ie.contains(new he(Re.x,Re.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var Ye=_.min.y;Ye<=_.max.y;Ye++)for(var lt=_.min.x;lt<=_.max.x;lt++){var sn=new he(lt,Ye);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var Zt=this._tiles[this._tileCoordsToKey(sn)];Zt?Zt.current=!0:H.push(sn)}}if(H.sort(function(dn,Ni){return dn.distanceTo(P)-Ni.distanceTo(P)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(lt=0;lt<H.length;lt++)this._addTile(H[lt],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(t);return ge(this.options.bounds).overlaps(m)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),m=t.scaleBy(c),_=m.add(c),P=o.unproject(m,t.z),H=o.unproject(_,t.z);return[P,H]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new Be(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new he(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(kt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Qe(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=v,t.onmousemove=v,Ne.ielt9&&this.options.opacity<1&&un(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),m=this._tileCoordsToKey(t),_=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(_),this.createTile.length<2&&ce(l(this._tileReady,this,t,null,_)),Pt(_,c),this._tiles[m]={el:_,coords:t,current:!0},o.appendChild(_),this.fire("tileloadstart",{tile:_,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var m=this._tileCoordsToKey(t);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(un(c.el,0),re(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(Qe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ne.ielt9||!this._map._fadeAnimated?ce(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new he(this._wrapX?f(t.x,this._wrapX):t.x,this._wrapY?f(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new ve(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Mp(t){return new Eo(t)}var Ri=Eo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=$(this,o),o.detectRetina&&Ne.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return tt(c,"load",l(this._tileOnLoad,this,o,c)),tt(c,"error",l(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:Ne.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return x(this._url,s(o,this.options))},_tileOnLoad:function(t,o){Ne.ielt9?setTimeout(l(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(t=o-t),t+m},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=v,o.onerror=v,!o.complete)){o.src=k;var c=this._tiles[t].coords;kt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",k),Eo.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===k))return Eo.prototype._tileReady.call(this,t,o,c)}});function nu(t,o){return new Ri(t,o)}var su=Ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=s({},this.defaultWmsParams);for(var m in o)m in this.options||(c[m]=o[m]);o=$(this,o);var _=o.detectRetina&&Ne.retina?2:1,P=this.getTileSize();c.width=P.x*_,c.height=P.y*_,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,m=Ee(c.project(o[0]),c.project(o[1])),_=m.min,P=m.max,H=(this._wmsVersion>=1.3&&this._crs===Kc?[_.y,_.x,P.y,P.x]:[_.x,_.y,P.x,P.y]).join(","),K=Ri.prototype.getTileUrl.call(this,t);return K+R(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(t,o){return s(this.wmsParams,t),o||this.redraw(),this}});function Pp(t,o){return new su(t,o)}Ri.WMS=su,nu.wms=Pp;var us=$n.extend({options:{padding:.1},initialize:function(t){$(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,o),P=m.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(t,o));Ne.any3d?Mn(this._container,P,c):Pt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new ve(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),iu=us.extend({options:{tolerance:0},getEvents:function(){var t=us.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){us.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");tt(t,"mousemove",this._onMouseMove,this),tt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),tt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){re(this._redrawRequest),delete this._ctx,kt(this._container),mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){us.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),m=Ne.retina?2:1;Pt(o,t.min),o.width=m*c.x,o.height=m*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",Ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){us.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,m=o.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],m,_;for(_=0;_<o.length;_++){if(m=Number(o[_]),isNaN(m))return;c.push(m)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ce(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ve,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)t=m.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,m,_,P,H=t._parts,K=H.length,ie=this._ctx;if(K){for(ie.beginPath(),c=0;c<K;c++){for(m=0,_=H[c].length;m<_;m++)P=H[c][m],ie[m?"lineTo":"moveTo"](P.x,P.y);o&&ie.closePath()}this._fillStroke(ie,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,m=Math.max(Math.round(t._radius),1),_=(Math.max(Math.round(t._radiusY),1)||m)/m;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(o.x,o.y/_,m,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,m,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Et(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,m,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(o)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(t),m&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([m],t,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function ou(t){return Ne.canvas?new iu(t):null}var So=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),$p={_initContainer:function(){this._container=ut("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(us.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=So("shape");Qe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=So("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;kt(o),t.removeInteractiveTarget(o),delete this._layers[h(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,m=t.options,_=t._container;_.stroked=!!m.stroke,_.filled=!!m.fill,m.stroke?(o||(o=t._stroke=So("stroke")),_.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=w(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(_.removeChild(o),t._stroke=null),m.fill?(c||(c=t._fill=So("fill")),_.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(_.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),m=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){jn(t._container)},_bringToBack:function(t){Ss(t._container)}},Za=Ne.vml?So:le,Mo=us.extend({_initContainer:function(){this._container=Za("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Za("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){kt(this._container),mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){us.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Pt(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=Za("path");t.options.className&&Qe(o,t.options.className),t.options.interactive&&Qe(o,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){kt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,fe(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),m=Math.max(Math.round(t._radiusY),1)||c,_="a"+c+","+m+" 0 1,0 ",P=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(t,P)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){jn(t._path)},_bringToBack:function(t){Ss(t._path)}});Ne.vml&&Mo.include($p);function au(t){return Ne.svg||Ne.vml?new Mo(t):null}at.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&ou(t)||au(t)}});var ru=Oi.extend({initialize:function(t,o){Oi.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ge(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Op(t,o){return new ru(t,o)}Mo.create=Za,Mo.pointsToPath=fe,cs.geometryToLayer=Na,cs.coordsToLatLng=yl,cs.coordsToLatLngs=Ba,cs.latLngToCoords=bl,cs.latLngsToCoords=Fa,cs.getFeature=Di,cs.asFeature=za,at.mergeOptions({boxZoom:!0});var lu=Cn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xs(),po(),this._startPoint=this._map.mouseEventToContainerPoint(t),tt(document,{contextmenu:as,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ut("div","leaflet-zoom-box",this._container),Qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new ve(this._point,this._startPoint),c=o.getSize();Pt(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(kt(this._box),Et(this._container,"leaflet-crosshair")),Qs(),mo(),mt(document,{contextmenu:as,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new Be(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",lu),at.mergeOptions({doubleClickZoom:!0});var cu=Cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),m=o.options.zoomDelta,_=t.originalEvent.shiftKey?c-m:c+m;o.options.doubleClickZoom==="center"?o.setZoom(_):o.setZoomAround(t.containerPoint,_)}});at.addInitHook("addHandler","doubleClickZoom",cu),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var uu=Cn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Pn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Et(this._map._container,"leaflet-grab"),Et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ge(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,_=(m-o+c)%t+o-c,P=(m+o+c)%t-o-c,H=Math.abs(_+c)<Math.abs(P+c)?_:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(t){var o=this._map,c=o.options,m=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),m)o.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,H=c.easeLinearity,K=_.multiplyBy(H/P),ie=K.distanceTo([0,0]),ye=Math.min(c.inertiaMaxSpeed,ie),Re=K.multiplyBy(ye/ie),Ye=ye/(c.inertiaDeceleration*H),lt=Re.multiplyBy(-Ye/2).round();!lt.x&&!lt.y?o.fire("moveend"):(lt=o._limitOffset(lt,o.options.maxBounds),ce(function(){o.panBy(lt,{duration:Ye,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",uu),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var du=Cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),tt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,m=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,m,_;for(m=0,_=c.left.length;m<_;m++)o[c.left[m]]=[-1*t,0];for(m=0,_=c.right.length;m<_;m++)o[c.right[m]]=[t,0];for(m=0,_=c.down.length;m<_;m++)o[c.down[m]]=[0,t];for(m=0,_=c.up.length;m<_;m++)o[c.up[m]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,m,_;for(m=0,_=c.zoomIn.length;m<_;m++)o[c.zoomIn[m]]=t;for(m=0,_=c.zoomOut.length;m<_;m++)o[c.zoomOut[m]]=-t},_addHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,m;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[o],t.shiftKey&&(m=ee(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(ee(m),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(_)}else c.panBy(m)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;as(t)}}});at.addInitHook("addHandler","keyboard",du),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hu=Cn.extend({addHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Ia(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),m),as(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=c?Math.ceil(_/c)*c:_,H=t._limitZoom(o+(this._delta>0?P:-P))-o;this._delta=0,this._startTime=null,H&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+H):t.setZoomAround(this._lastMousePos,o+H))}});at.addInitHook("addHandler","scrollWheelZoom",hu);var Dp=600;at.mergeOptions({tapHold:Ne.touchNative&&Ne.safari&&Ne.mobile,tapTolerance:15});var fu=Cn.extend({addHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new he(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(tt(document,"touchend",Ht),tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Dp),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){mt(document,"touchend",Ht),mt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new he(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});at.addInitHook("addHandler","tapHold",fu),at.mergeOptions({touchZoom:Ne.touch,bounceAtZoomLimits:!0});var pu=Cn.extend({addHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),Ht(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]),_=c.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(_,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&_<1||this._zoom>o.getMaxZoom()&&_>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var P=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(_===1&&P.x===0&&P.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),re(this._animRequest);var H=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ce(H,this,!0),Ht(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,re(this._animRequest),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",pu),at.BoxZoom=lu,at.DoubleClickZoom=cu,at.Drag=uu,at.Keyboard=du,at.ScrollWheelZoom=hu,at.TapHold=fu,at.TouchZoom=pu,i.Bounds=ve,i.Browser=Ne,i.CRS=V,i.Canvas=iu,i.Circle=_l,i.CircleMarker=Ra,i.Class=Z,i.Control=Kt,i.DivIcon=tu,i.DivOverlay=Wn,i.DomEvent=rl,i.DomUtil=_o,i.Draggable=Pn,i.Evented=me,i.FeatureGroup=rs,i.GeoJSON=cs,i.GridLayer=Eo,i.Handler=Cn,i.Icon=$i,i.ImageOverlay=Ua,i.LatLng=ue,i.LatLngBounds=Be,i.Layer=$n,i.LayerGroup=Pi,i.LineUtil=hp,i.Map=at,i.Marker=Da,i.Mixin=hl,i.Path=Ps,i.Point=he,i.PolyUtil=fl,i.Polygon=Oi,i.Polyline=ls,i.Popup=Ha,i.PosAnimation=Ta,i.Projection=fp,i.Rectangle=ru,i.Renderer=us,i.SVG=Mo,i.SVGOverlay=eu,i.TileLayer=Ri,i.Tooltip=Va,i.Transformation=Xe,i.Util=Le,i.VideoOverlay=Qc,i.bind=l,i.bounds=Ee,i.canvas=ou,i.circle=kp,i.circleMarker=bp,i.control=oi,i.divIcon=Sp,i.extend=s,i.featureGroup=gp,i.geoJSON=Xc,i.geoJson=Lp,i.gridLayer=Mp,i.icon=_p,i.imageOverlay=xp,i.latLng=pe,i.latLngBounds=ge,i.layerGroup=vp,i.map=ll,i.marker=yp,i.point=ee,i.polygon=Cp,i.polyline=wp,i.popup=Tp,i.rectangle=Op,i.setOptions=$,i.stamp=h,i.svg=au,i.svgOverlay=Ip,i.tileLayer=nu,i.tooltip=Ep,i.transformation=D,i.version=r,i.videoOverlay=Ap;var Rp=window.L;i.noConflict=function(){return window.L=Rp,this},window.L=i}))})(Ho,Ho.exports)),Ho.exports}var fw=hw();const Wt=uw(fw);(function(e,n,i){function r(s,a){for(;(s=s.parentElement)&&!s.classList.contains(a););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,a){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),a=this._poly,l=a.getLatLngs(),u=l.splice(-1,1)[0];this._poly.setLatLngs(l),this._markerGroup.removeLayer(s),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(u,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent),l=this._map.layerPointToLatLng(a);this._currentLatLng=l,this._updateTooltip(l),this._updateGuide(a),this._mouseMarker.setLatLng(l),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var a=s.originalEvent,l=a.clientX,u=a.clientY;this._startPoint.call(this,l,u)}},_startPoint:function(s,a){this._mouseDownOrigin=L.point(s,a)},_onMouseUp:function(s){var a=s.originalEvent,l=a.clientX,u=a.clientY;this._endPoint.call(this,l,u,s),this._clickHandled=null},_endPoint:function(s,a,l){if(this._mouseDownOrigin){var u=L.point(s,a).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(l.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(l.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(u)<9*(e.devicePixelRatio||1)&&this.addVertex(l.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var a,l,u=s.originalEvent;!u.touches||!u.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=u.touches[0].clientX,l=u.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,l),this._endPoint.call(this,a,l,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var a;if(this._markers.length>0){var l;if(this.type===L.Draw.Polyline.TYPE)l=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;l=this._markers[0]}var u=this._map.latLngToContainerPoint(l.getLatLng()),h=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),p=this._map.latLngToContainerPoint(h.getLatLng());a=u.distanceTo(p)}else a=1/0;return a},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var a=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(s){var a=this._markers?this._markers.length:0;a>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),s))},_updateTooltip:function(s){var a=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(s,a){var l,u,h,p=Math.floor(Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))),f=this.options.guidelineDistance,v=this.options.maxGuideLineLength,b=p>v?p-v:f;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));b<p;b+=this.options.guidelineDistance)l=b/p,u={x:Math.floor(s.x*(1-l)+l*a.x),y:Math.floor(s.y*(1-l)+l*a.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,u)},_updateGuideColor:function(s){if(this._guidesContainer)for(var a=0,l=this._guidesContainer.childNodes.length;a<l;a++)this._guidesContainer.childNodes[a].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,a,l=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=l?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),s},_updateRunningMeasure:function(s,a){var l,u,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(l=h-(a?2:1),u=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[l].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[l].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=u*(a?1:-1))},_getMeasurementString:function(){var s,a=this._currentLatLng,l=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?l&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(l)*(this.options.factor||1):this._measurementRunningTotal||0:l&&a?this._measurementRunningTotal+this._map.distance(a,l)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,a){L.Draw.Polyline.prototype.initialize.call(this,s,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,a;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:s,subtext:a}},_getMeasurementString:function(){var s=this._area,a="";return s||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(a+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,a){var l;!this.options.allowIntersection&&this.options.showArea&&(l=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(l)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,a)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!r(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,a,l,u=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,p=this.options.showArea;return h&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(s),l=p?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:u.text,subtext:l}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(s);else var a=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var a,l=s.latlng,u=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(l),this._isDrawing){this._drawShape(l),a=this._shape.getRadius().toFixed(1);var p="";u&&(p=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:p})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,a){this._marker=s,L.setOptions(this,a)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,a){var l=parseInt(s.style.marginTop,10)-a,u=parseInt(s.style.marginLeft,10)-a;s.style.marginTop=l+"px",s.style.marginLeft=u+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var a=0;a<this._verticesHandlers.length;a++)s(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,a,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this._latlngs=a,L.setOptions(this,l)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,a=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),a&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.removeClass(a,l)}),s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.addClass(a,l)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,a=s._path;a&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.removeClass(a,l)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.addClass(a,l)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,a,l,u,h=this._defaultShape();for(s=0,l=h.length;s<l;s++)u=this._createMarker(h[s],s),u.on("click",this._onMarkerClick,this),u.on("contextmenu",this._onContextMenu,this),this._markers.push(u);var p,f;for(s=0,a=l-1;s<l;a=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(p=this._markers[a],f=this._markers[s],this._createMiddleMarker(p,f),this._updatePrevNext(p,f))},_createMarker:function(s,a){var l=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return l._origLatLng=s,l._index=a,l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(l),l},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),a=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),a},_removeMarker:function(s){var a=s._index;this._markerGroup.removeLayer(s),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var a=s.target,l=this._poly,u=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),l.options.poly){var h=l._map._editTooltip;if(!l.options.poly.allowIntersection&&l.intersects()){L.extend(a._origLatLng,u),a.setLatLng(u);var p=l.options.color;l.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){l.setStyle({color:p}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var f=this._poly.getLatLngs();this._poly._convertLatLngs(f,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,l=s.target;this._defaultShape().length<a||(this._removeMarker(l),this._updatePrevNext(l._prev,l._next),l._middleLeft&&this._markerGroup.removeLayer(l._middleLeft),l._middleRight&&this._markerGroup.removeLayer(l._middleRight),l._prev&&l._next?this._createMiddleMarker(l._prev,l._next):l._prev?l._next||(l._prev._middleRight=null):l._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var a=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(a),u=s.target;L.extend(u._origLatLng,l),u._middleLeft&&u._middleLeft.setLatLng(this._getMiddleLatLng(u._prev,u)),u._middleRight&&u._middleRight.setLatLng(this._getMiddleLatLng(u,u._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,a){this._markerGroup.eachLayer(function(l){l._index>s&&(l._index+=a)})},_createMiddleMarker:function(s,a){var l,u,h,p=this._getMiddleLatLng(s,a),f=this._createMarker(p);f.setOpacity(.6),s._middleRight=a._middleLeft=f,u=function(){f.off("touchmove",u,this);var v=a._index;f._index=v,f.off("click",l,this).on("click",this._onMarkerClick,this),p.lat=f.getLatLng().lat,p.lng=f.getLatLng().lng,this._spliceLatLngs(v,0,p),this._markers.splice(v,0,f),f.setOpacity(1),this._updateIndexes(v,1),a._index++,this._updatePrevNext(s,f),this._updatePrevNext(f,a),this._poly.fire("editstart")},h=function(){f.off("dragstart",u,this),f.off("dragend",h,this),f.off("touchmove",u,this),this._createMiddleMarker(s,f),this._createMiddleMarker(f,a)},l=function(){u.call(this),h.call(this),this._fireEdit()},f.on("click",l,this).on("dragstart",u,this).on("dragend",h,this).on("touchmove",u,this),this._markerGroup.addLayer(f)},_updatePrevNext:function(s,a){s&&(s._next=a),a&&(a._prev=s)},_getMiddleLatLng:function(s,a){var l=this._poly._map,u=l.project(s.getLatLng()),h=l.project(a.getLatLng());return l.unproject(u._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,a)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var a=0,l=this._resizeMarkers.length;a<l;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,a){var l=new L.Marker.Touch(s,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(l),this._markerGroup.addLayer(l),l},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var a=s.target,l=a.getLatLng();a===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var a=this._getCorners(),l=s.target,u=l._cornerIndex;l.setOpacity(0),this._oppositeCorner=a[(u+2)%4],this._toggleCornerMarkers(0,u)}this._shape.fire("editstart")},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(a);return s.target===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),a=s.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var a=0,l=s.length;a<l;a++)this._resizeMarkers.push(this._createMarker(s[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var a=this._getCorners(),l=s.target,u=l._cornerIndex;this._oppositeCorner=a[(u+2)%4],this._toggleCornerMarkers(0,u)},_onMarkerDragEnd:function(s){var a,l,u=s.target;u===this._moveMarker&&(a=this._shape.getBounds(),l=a.getCenter(),u.setLatLng(l)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var a,l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),u=this._shape.getBounds(),h=u.getCenter(),p=[],f=0,v=l.length;f<v;f++)a=[l[f].lat-h.lat,l[f].lng-h.lng],p.push([s.lat+a[0],s.lng+a[1]]);this._shape.setLatLngs(p),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var a;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var a=0,l=this._resizeMarkers.length;a<l;a++)this._resizeMarkers[a].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),a=0,l=this._resizeMarkers.length;a<l;a++)this._resizeMarkers[a].setLatLng(s[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),a=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var a=this._shape._radius*Math.cos(Math.PI/4),l=this._map.project(s);return this._map.unproject([l.x+a,l.y-a])},_resize:function(s){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(s):radius=this._map.distance(a,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,a){var l={};if(s.touches!==void 0){if(!s.touches.length)return;l=s.touches[0]}else if(s.pointerType!=="touch"||(l=s,!this._filterClick(s)))return;var u=this._map.mouseEventToContainerPoint(l),h=this._map.mouseEventToLayerPoint(l),p=this._map.layerPointToLatLng(h);this._map.fire(a,{latlng:p,layerPoint:h,containerPoint:u,pageX:l.pageX,pageY:l.pageY,originalEvent:s})},_filterClick:function(s){var a=s.timeStamp||s.originalEvent.timeStamp,l=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return l&&l>100&&l<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(s,a)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var u=s.indexOf("Edge/");return u>0&&parseInt(s.substring(u+5,s.indexOf(".",u)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var l=0;l<a.length;l++)L.DomEvent.on(s,a[l],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var u=s.indexOf("Edge/");return u>0&&parseInt(s.substring(u+5,s.indexOf(".",u)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var a=[],l=0,u=s.length;l<u;l++)Array.isArray(s[l])?a.push(L.LatLngUtil.cloneLatLngs(s[l])):a.push(this.cloneLatLng(s[l]));return a},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},(function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var l,u,h=a.length,p=0,f=Math.PI/180;if(h>2){for(var v=0;v<h;v++)l=a[v],u=a[(v+1)%h],p+=(u.lng-l.lng)*f*(2+Math.sin(l.lat*f)+Math.sin(u.lat*f));p=6378137*p*6378137/2}return Math.abs(p)},formattedNumber:function(a,l){var u=parseFloat(a).toFixed(l),h=L.drawLocal.format&&L.drawLocal.format.numeric,p=h&&h.delimiters,f=p&&p.thousands,v=p&&p.decimal;if(f||v){var b=u.split(".");u=f?b[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f):b[0],v=v||".",b.length>1&&(u=u+v+b[1])}return u},readableArea:function(a,l,f){var h,p,f=L.Util.extend({},s,f);return l?(p=["ha","m"],type=typeof l,type==="string"?p=[l]:type!=="boolean"&&(p=l),h=a>=1e6&&p.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,f.km)+" km":a>=1e4&&p.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,f.ha)+" ha":L.GeometryUtil.formattedNumber(a,f.m)+" m"):(a/=.836127,h=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,f.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,f.ac)+" acres":L.GeometryUtil.formattedNumber(a,f.yd)+" yd"),h},readableDistance:function(a,l,u,h,v){var f,v=L.Util.extend({},s,v);switch(l?typeof l=="string"?l:"metric":u?"feet":h?"nauticalMile":"yards"){case"metric":f=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(a,v.m)+" m";break;case"feet":a*=3.28083,f=L.GeometryUtil.formattedNumber(a,v.ft)+" ft";break;case"nauticalMile":a*=.53996,f=L.GeometryUtil.formattedNumber(a/1e3,v.nm)+" nm";break;default:a*=1.09361,f=a>1760?L.GeometryUtil.formattedNumber(a/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(a,v.yd)+" yd"}return f},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,a,l,u){return this._checkCounterclockwise(s,l,u)!==this._checkCounterclockwise(a,l,u)&&this._checkCounterclockwise(s,a,l)!==this._checkCounterclockwise(s,a,u)},_checkCounterclockwise:function(s,a,l){return(l.y-s.y)*(a.x-s.x)>(a.y-s.y)*(l.x-s.x)}}),L.Polyline.include({intersects:function(){var s,a,l,u=this._getProjectedPoints(),h=u?u.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=h-1;s>=3;s--)if(a=u[s-1],l=u[s],this._lineSegmentsIntersectsRange(a,l,s-2))return!0;return!1},newLatLngIntersects:function(s,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),a)},newPointIntersects:function(s,a){var l=this._getProjectedPoints(),u=l?l.length:0,h=l?l[u-1]:null,p=u-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,s,p,a?1:0)},_tooFewPointsForIntersection:function(s){var a=this._getProjectedPoints(),l=a?a.length:0;return l+=s||0,!a||l<=3},_lineSegmentsIntersectsRange:function(s,a,l,u){var h,p,f=this._getProjectedPoints();u=u||0;for(var v=l;v>u;v--)if(h=f[v-1],p=f[v],L.LineUtil.segmentsIntersect(s,a,h,p))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],a=this._defaultShape(),l=0;l<a.length;l++)s.push(this._map.latLngToLayerPoint(a[l]));return s}}),L.Polygon.include({intersects:function(){var s,a,l,u,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=h.length,a=h[0],l=h[s-1],u=s-2,this._lineSegmentsIntersectsRange(l,a,u,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var a,l=L.DomUtil.create("div","leaflet-draw"),u=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(a=this._toolbars[h].addToolbar(s))&&(u||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),u=!0),l.appendChild(a));return l},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(s)},_toolbarEnabled:function(s){var a=s.target;for(var l in this._toolbars)this._toolbars[l]!==a&&this._toolbars[l].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var a,l=L.DomUtil.create("div","leaflet-draw-section"),u=0,h=this._toolbarClass||"",p=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,a=0;a<p.length;a++)p[a].enabled&&this._initModeHandler(p[a].handler,this._toolbarContainer,u++,h,p[a].title);if(u)return this._lastButtonIndex=--u,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),l.appendChild(this._toolbarContainer),l.appendChild(this._actionsContainer),l},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,l=this._actionButtons.length;a<l;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,a,l,u,h){var p=s.type;this._modes[p]={},this._modes[p].handler=s,this._modes[p].button=this._createButton({type:p,title:h,className:u+"-"+p,container:a,callback:this._modes[p].handler.enable,context:this._modes[p].handler}),this._modes[p].buttonIndex=l,this._modes[p].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var a=L.DomUtil.create("a",s.className||"",s.container),l=L.DomUtil.create("span","sr-only",s.container);a.href="#",a.appendChild(l),s.title&&(a.title=s.title,l.innerHTML=s.title),s.text&&(a.innerHTML=s.text,l.innerHTML=s.text);var u=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,u,s.callback,s.context),a},_disposeButton:function(s,a){var l=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,l,a)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var a,l,u,h,p=this._actionsContainer,f=this.getActions(s),v=f.length;for(l=0,u=this._actionButtons.length;l<u;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback);for(this._actionButtons=[];p.firstChild;)p.removeChild(p.firstChild);for(var b=0;b<v;b++)"enabled"in f[b]&&!f[b].enabled||(a=L.DomUtil.create("li","",p),h=this._createButton({title:f[b].title,text:f[b].text,container:a,callback:f[b].callback,context:f[b].context}),this._actionButtons.push({button:h,callback:f[b].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,a=this._lastButtonIndex,l=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=l+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var a=this._map.latLngToLayerPoint(s),l=this._container;return this._container&&(this._visible&&(l.style.visibility="inherit"),L.DomUtil.setPosition(l,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var a in this.options)this.options.hasOwnProperty(a)&&s[a]&&(s[a]=L.extend({},this.options[a],s[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var a in this._modes)this._modes.hasOwnProperty(a)&&s.hasOwnProperty(a)&&this._modes[a].handler.setOptions(s[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(s){var a=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,a=this.options.featureGroup,l=a.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(s.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var a=L.Util.stamp(s);this._uneditedLayerProps[a]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var a=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[a].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[a].latlng),s.setRadius(this._uneditedLayerProps[a].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[a].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var a,l,u=s.layer||s.target||s;this._backupLayer(u),this.options.poly&&(l=L.Util.extend({},this.options.poly),u.options.poly=l),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=u.options.color,a.fillColor=u.options.fillColor),u.options.original=L.extend({},u.options),u.options.editing=a),u instanceof L.Marker?(u.editing&&u.editing.enable(),u.dragging.enable(),u.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):u.editing.enable()},_disableLayerEdit:function(s){var a=s.layer||s.target||s;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(s){var a=s.originalEvent.changedTouches[0],l=this._map.mouseEventToLayerPoint(a),u=this._map.layerPointToLatLng(l);s.target.setLatLng(u)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var a=s.layer||s.target||s;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(s){var a=s.layer||s.target||s;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);const ap=(e,n)=>e?e.length<=n?e:e.substring(0,n)+"...":"",jd=e=>e.length*6+12,Zl=(e,n)=>!(e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom),pw=(e,n)=>{if(!e||n.length===0)return new Set;const i=[],r=e.getBounds();n.forEach(l=>{if(r.contains(l.getLatLng())){const u=e.latLngToContainerPoint(l.getLatLng()),h=l.locationData;h&&i.push({marker:l,pixelPos:u,location:h})}});const s=i.map(({marker:l,pixelPos:u,location:h})=>{const v=jd(h.name),b=h.description?jd(`${h.name}: ${ap(h.description,50)}`):v;return{marker:l,location:h,markerBox:{left:u.x-15,right:u.x+15,top:u.y-15,bottom:u.y+15},baseLabelBox:{left:u.x-v/2,right:u.x+v/2,top:u.y+15+2,bottom:u.y+15+2+20},descLabelBox:h.description?{left:u.x-b/2,right:u.x+b/2,top:u.y+15+2,bottom:u.y+15+2+20}:null}}),a=new Set;return s.forEach(({marker:l,location:u,markerBox:h,baseLabelBox:p,descLabelBox:f},v)=>{if(!u.description)return;let b=!1;for(let C=0;C<s.length;C++){if(v===C)continue;const S=s[C];if(Zl(f,S.markerBox)||Zl(f,S.baseLabelBox)){b=!0;break}if(S.descLabelBox&&a.has(S.location.id)&&Zl(f,S.descLabelBox)){b=!0;break}}b||a.add(u.id)}),a},mw={__name:"MapView",props:{locations:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},center:{type:Object,default:null},zoom:{type:Number,default:13},clickable:{type:Boolean,default:!1},areas:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1},userLocation:{type:Object,default:null},highlightLocationId:{type:String,default:null},highlightLocationIds:{type:Array,default:()=>[]},allLocationsForBounds:{type:Array,default:()=>[]},marshalMode:{type:Boolean,default:!1}},emits:["location-click","map-click","area-click","polygon-complete","polygon-drawing"],setup(e,{expose:n,emit:i}){const r=e,s=i,a=O(null);let l=null;n({getMapCenter:()=>{if(l){const U=l.getCenter();return{lat:U.lat,lng:U.lng}}return null},getMapZoom:()=>l?l.getZoom():null});const p=O([]);let f=null;const v=O(!0),b=O(!1),C=O(new Set),S=O([]);let $=null,R=null,A=null;const x=()=>{if(!l)return;const U=pw(l,p.value),Q=Array.from(C.value).sort().join(","),ce=Array.from(U).sort().join(",");Q!==ce&&(C.value=U,q())},w=()=>{if(A&&(A.remove(),A=null),!l||!r.userLocation)return;const U=Wt.divIcon({className:"user-location-marker",html:`
      <div style="
        position: relative;
        width: 20px;
        height: 20px;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          background-color: #4285f4;
          border: 3px solid white;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        "></div>
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 40px;
          height: 40px;
          background-color: rgba(66, 133, 244, 0.2);
          border-radius: 50%;
          animation: pulse 2s ease-out infinite;
        "></div>
      </div>
    `,iconSize:[40,40],iconAnchor:[20,20]});A=Wt.marker([r.userLocation.lat,r.userLocation.lng],{icon:U}).addTo(l).bindPopup("Your location")},M=()=>{if(!a.value)return;let U=51.505,Q=-.09,ce=13;const re=r.allLocationsForBounds.length>0?r.allLocationsForBounds:r.locations,Le=[];re.length>0&&Le.push(...re.map(Z=>({lat:Z.latitude,lng:Z.longitude}))),r.route&&r.route.length>0&&Le.push(...r.route.map(Z=>({lat:Z.lat,lng:Z.lng}))),r.center?(U=r.center.lat,Q=r.center.lng,ce=r.zoom??13):Le.length>0&&(U=Le.reduce((Z,W)=>Z+W.lat,0)/Le.length,Q=Le.reduce((Z,W)=>Z+W.lng,0)/Le.length,ce=10),l=Wt.map(a.value).setView([U,Q],ce),Wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(l),r.clickable&&l.on("click",Z=>{r.drawingMode||s("map-click",{lat:Z.latlng.lat,lng:Z.latlng.lng})}),l.on("zoomend moveend",()=>{x()}),q(),k(),I(),w(),E()},k=()=>{if(f&&(f.remove(),f=null),!l||r.route.length===0)return;const U=r.route.map(Q=>[Q.lat,Q.lng]);f=Wt.polyline(U,{color:"blue",weight:4,opacity:.7}).addTo(l)},I=()=>{S.value.forEach(U=>U.remove()),S.value=[],!(!l||r.areas.length===0)&&r.areas.forEach(U=>{const Q=typeof U.polygon=="string"?JSON.parse(U.polygon):U.polygon;if(!Q||Q.length===0)return;const ce=Q.map(W=>[W.lat,W.lng]),re=U.id===r.selectedAreaId,Le=U.color||"#667eea",Z=Wt.polygon(ce,{color:Le,fillColor:Le,fillOpacity:re?.4:.2,weight:re?3:2,opacity:.8}).addTo(l);Z.setStyle({pane:"overlayPane"}),r.drawingMode||(Z.on("click",()=>s("area-click",U)),Z.on("mouseover",()=>{Z.setStyle({fillOpacity:.4})}),Z.on("mouseout",()=>{Z.setStyle({fillOpacity:re?.4:.2})})),S.value.push(Z)})},E=()=>{if(l)if(R||(R=new Wt.FeatureGroup,l.addLayer(R)),$&&(l.removeControl($),$=null),r.drawingMode){$=new Wt.Control.Draw({draw:{polygon:{allowIntersection:!1,showArea:!1,shapeOptions:{color:"#667eea",weight:3,opacity:.8,fillOpacity:.3},repeatMode:!1,touchExtend:!0,metric:!0,feet:!1,nautic:!1},polyline:!1,rectangle:!1,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:R,remove:!1}}),l.addControl($);let U=null;const Q=W=>{U={x:W.originalEvent.clientX,y:W.originalEvent.clientY}},ce=W=>{U&&(W.originalEvent.clientX-U.x,W.originalEvent.clientY-U.y)},re=()=>{U=null};l.on("mousedown",Q),l.on("mousemove",ce),l.on("mouseup",re),new Wt.Draw.Polygon(l,$.options.draw.polygon).enable(),l._drawingHandlers={handleMouseDown:Q,handleMouseMove:ce,handleMouseUp:re};const Z=W=>{if(W.layers&&W.layers.getLayers().length>0){const Y=W.layers.getLayers()[0];if(Y&&Y.getLatLngs){const me=Y.getLatLngs()[0]||[];s("polygon-drawing",me)}}};l.on(Wt.Draw.Event.DRAWVERTEX,Z),l._drawVertexHandler=Z,l.on(Wt.Draw.Event.CREATED,W=>{const me=W.layer.getLatLngs()[0].map(he=>({lat:he.lat,lng:he.lng}));s("polygon-complete",me),R.clearLayers(),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(Wt.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)})}else R&&R.clearLayers(),l.off(Wt.Draw.Event.CREATED),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(Wt.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)},q=()=>{if(!(l&&l._animatingZoom)&&(p.value.forEach(U=>U.remove()),p.value=[],!!l)){if(r.locations.forEach(U=>{const Q=U.checkedInCount||0,ce=U.requiredMarshals||1,re=Q>=ce,Le=Q===0,Z=r.highlightLocationId===U.id||r.highlightLocationIds.includes(U.id),W=r.marshalMode&&!Z;let Y;r.marshalMode?Y=Z?"#667eea":"#999":Y=re?"green":Le?"red":"orange";const me=U.areaColor||"#999",he=U.areaId&&!r.marshalMode,ee=C.value.has(U.id)&&U.description?`${U.name}: ${ap(U.description,50)}`:U.name,ve=Z?`
      <div style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        border: 3px solid #667eea;
        border-radius: 50%;
        animation: highlight-pulse 1.5s ease-out infinite;
      "></div>
    `:"",Ee=W?"0.6":"1",Be=Z?"36px":r.marshalMode?"20px":"30px",ge=Z?"#667eea":W?"#e0e0e0":"white",ue=Z?"white":W?"#888":"#333",pe=Z?"#667eea":"white",V=r.marshalMode&&!Z||r.marshalMode?"":`${Q}/${ce}`,J=Wt.divIcon({className:"custom-marker",html:`
        <div style="display: flex; flex-direction: column; align-items: center; position: relative; opacity: ${Ee};">
          ${ve}
          <div style="position: relative; display: flex; align-items: center; gap: 4px;">
            ${he?`<div style="
              width: 8px;
              height: 8px;
              border-radius: 50%;
              background-color: ${me};
              border: 2px solid white;
              box-shadow: 0 1px 2px rgba(0,0,0,0.3);
            "></div>`:""}
            <div style="
              background-color: ${Y};
              width: ${Be};
              height: ${Be};
              border-radius: 50%;
              border: 3px solid ${pe};
              box-shadow: 0 2px 5px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
              color: white;
              font-weight: bold;
              font-size: ${Z?"14px":"12px"};
            ">
              ${V}
            </div>
          </div>
          <div style="
            background-color: ${ge};
            padding: 2px 6px;
            border-radius: 3px;
            font-size: ${Z?"12px":"11px"};
            font-weight: bold;
            color: ${ue};
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            margin-top: 2px;
          ">
            ${ee}
          </div>
        </div>
      `,iconSize:[30,50],iconAnchor:[15,25]}),te=r.marshalMode?`<b>${U.name}</b>${U.description?`<br>${U.description}`:""}`:`<b>${U.name}</b><br>${U.description||""}<br>Checked in: ${Q}/${ce}`,we=Wt.marker([U.latitude,U.longitude],{icon:J}).addTo(l).bindPopup(te);we.on("click",()=>{s("location-click",U)}),we.locationData=U,p.value.push(we)}),l&&v.value&&!r.center&&!b.value){const U=[],Q=r.allLocationsForBounds.length>0?r.allLocationsForBounds:r.locations;if(Q.length>0&&U.push(...Q.map(ce=>[ce.latitude,ce.longitude])),r.route.length>0&&U.push(...r.route.map(ce=>[ce.lat,ce.lng])),U.length>0){const ce=Wt.latLngBounds(U);l.fitBounds(ce,{padding:[50,50]}),v.value=!1,b.value=!0}}else r.center&&(v.value=!1);setTimeout(()=>{l&&!l._animatingZoom&&x()},100)}};return kn(()=>{b.value=!1,v.value=!0,M();let U,Q=0,ce=0;const re=new ResizeObserver(Le=>{if(l&&Le.length>0){const{width:Z,height:W}=Le[0].contentRect;(Math.abs(Z-Q)>10||Math.abs(W-ce)>10)&&(Q=Z,ce=W,clearTimeout(U),U=setTimeout(()=>{l.invalidateSize()},150))}});a.value&&re.observe(a.value),As(()=>{clearTimeout(U),re.disconnect()})}),je(()=>r.locations,U=>{if(q(),l&&!b.value&&U.length>0&&!r.center){const Q=U.map(Z=>Z.latitude),ce=U.map(Z=>Z.longitude),re=Q.reduce((Z,W)=>Z+W,0)/Q.length,Le=ce.reduce((Z,W)=>Z+W,0)/ce.length;l.setView([re,Le],10),b.value=!0,v.value=!1}},{deep:!0}),je(()=>r.route,U=>{if(k(),q(),l&&!b.value&&U&&U.length>0&&!r.center){const Q=U.map(Z=>Z.lat),ce=U.map(Z=>Z.lng),re=Q.reduce((Z,W)=>Z+W,0)/Q.length,Le=ce.reduce((Z,W)=>Z+W,0)/ce.length;l.setView([re,Le],10),b.value=!0,v.value=!1}},{deep:!0}),je(()=>r.center,U=>{l&&l.setView([U.lat,U.lng],r.zoom)}),je(()=>r.areas,()=>{I()},{deep:!0}),je(()=>r.selectedAreaId,()=>{I()}),je(()=>r.drawingMode,()=>{E()}),je(()=>r.userLocation,()=>{w()},{deep:!0}),je(()=>r.highlightLocationId,()=>{q()}),je(()=>r.highlightLocationIds,()=>{q()},{deep:!0}),je(()=>r.marshalMode,()=>{q()}),(U,Q)=>(g(),y("div",{ref_key:"mapContainer",ref:a,class:"map-container"},null,512))}},ca=Ze(mw,[["__scopeId","data-v-1cdd9dc1"]]);function fn(e,n){return e.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}const vw={class:"areas-selection"},gw={key:0,class:"areas-selection-header"},_w={class:"areas-list"},yw=["checked","onChange"],bw={__name:"AreasSelection",props:{areas:{type:Array,default:()=>[]},selectedAreaIds:{type:Array,default:()=>[]}},emits:["update:selectedAreaIds"],setup(e,{emit:n}){const i=e,r=n,s=ae(()=>[...i.areas].sort((h,p)=>h.displayOrder!==p.displayOrder?h.displayOrder-p.displayOrder:fn(h.name,p.name))),a=ae(()=>i.areas.length>0&&i.selectedAreaIds.length===i.areas.length),l=h=>{const p=[...i.selectedAreaIds],f=p.indexOf(h);f>=0?p.splice(f,1):p.push(h),r("update:selectedAreaIds",p)},u=()=>{a.value?r("update:selectedAreaIds",[]):r("update:selectedAreaIds",i.areas.map(h=>h.id))};return(h,p)=>(g(),y("div",vw,[e.areas.length>1?(g(),y("div",gw,[d("button",{onClick:u,class:"toggle-all-btn"},T(a.value?"Deselect all":"Select all"),1)])):B("",!0),d("div",_w,[(g(!0),y(ke,null,$e(s.value,f=>(g(),y("label",{class:"area-checkbox",key:f.id},[d("input",{type:"checkbox",checked:e.selectedAreaIds.includes(f.id),onChange:v=>l(f.id)},null,40,yw),d("span",{class:"area-color-dot",style:tn({backgroundColor:f.color||"#667eea"})},null,4),Ve(" "+T(f.name),1)]))),128))])]))}},rp=Ze(bw,[["__scopeId","data-v-46364246"]]),kw={class:"course-areas-tab"},ww={class:"map-wrapper"},Cw={key:0},Lw={key:1},xw={key:0,class:"filters-content"},Aw={class:"filter-section"},Iw={class:"filter-checkbox"},Tw={class:"filter-checkbox"},Ew={class:"filter-checkbox"},Sw={key:0,class:"filter-section"},Mw={key:0},Pw={key:1},$w={key:0,class:"add-menu-content"},Ow={__name:"CourseAreasTab",props:{checkpoints:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1}},emits:["map-click","location-click","area-click","import-checkpoints","upload-route","select-location","add-area","select-area","polygon-complete","cancel-drawing","add-checkpoint-from-map","add-many-checkpoints-from-map","add-area-from-map"],setup(e,{expose:n,emit:i}){const r=e,s=i,a=O(null),l=O(null),u=O(!0),h=O(!1),p=O(null),f=O({showRoute:!0,showCheckpoints:!0,showAreas:!0,selectedAreas:[]}),v=()=>{u.value=!u.value,u.value||(h.value=!1)},b=()=>{h.value=!h.value,h.value&&(u.value=!0)},C=I=>{h.value=!1,I==="checkpoint"?(s("add-checkpoint-from-map"),R()):I==="many-checkpoints"?(s("add-many-checkpoints-from-map"),R()):I==="area"&&(s("add-area-from-map"),R())},S=()=>{h.value=!1,s("import-checkpoints")},$=()=>{h.value=!1,s("upload-route")},R=()=>{a.value&&a.value.scrollIntoView({behavior:"smooth",block:"start"})};n({scrollMapIntoView:R,getMapCenter:()=>l.value?.getMapCenter()||null,getMapZoom:()=>l.value?.getMapZoom()||null}),je(()=>r.areas,I=>{if(I.length>0){const E=new Set(f.value.selectedAreas);I.forEach(q=>{E.has(q.id)||f.value.selectedAreas.push(q.id)}),f.value.selectedAreas=f.value.selectedAreas.filter(q=>I.some(U=>U.id===q))}},{immediate:!0}),ae(()=>[...r.areas].sort((I,E)=>I.displayOrder!==E.displayOrder?I.displayOrder-E.displayOrder:fn(I.name,E.name)));const w=ae(()=>f.value.showRoute?r.route:[]),M=ae(()=>f.value.showCheckpoints?r.checkpoints.filter(I=>{const E=I.areaIds||I.AreaIds;return E&&Array.isArray(E)?E.some(q=>f.value.selectedAreas.includes(q)):I.areaId?f.value.selectedAreas.includes(I.areaId):!1}):[]),k=ae(()=>f.value.showAreas?r.areas.filter(I=>f.value.selectedAreas.includes(I.id)):[]);return(I,E)=>(g(),y("div",kw,[d("div",{class:"map-section",ref_key:"mapSection",ref:a},[d("div",ww,[Oe(ca,{ref_key:"mapView",ref:l,locations:M.value,route:w.value,areas:k.value,allLocationsForBounds:e.checkpoints,selectedAreaId:e.selectedAreaId,clickable:!0,drawingMode:e.drawingMode,onMapClick:E[0]||(E[0]=q=>I.$emit("map-click",q)),onLocationClick:E[1]||(E[1]=q=>I.$emit("location-click",q)),onAreaClick:E[2]||(E[2]=q=>I.$emit("area-click",q)),onPolygonComplete:E[3]||(E[3]=q=>I.$emit("polygon-complete",q))},null,8,["locations","route","areas","allLocationsForBounds","selectedAreaId","drawingMode"])]),h.value?B("",!0):(g(),y("div",{key:0,class:Fe(["visibility-filters",{collapsed:u.value}])},[d("button",{onClick:v,class:"filters-toggle"},[u.value?(g(),y("span",Cw,"Show...")):(g(),y("span",Lw,""))]),u.value?B("",!0):(g(),y("div",xw,[d("div",Aw,[E[14]||(E[14]=d("h4",null,"Show on map:",-1)),d("label",Iw,[De(d("input",{type:"checkbox","onUpdate:modelValue":E[4]||(E[4]=q=>f.value.showRoute=q)},null,512),[[Wi,f.value.showRoute]]),E[11]||(E[11]=Ve(" Route ",-1))]),d("label",Tw,[De(d("input",{type:"checkbox","onUpdate:modelValue":E[5]||(E[5]=q=>f.value.showCheckpoints=q)},null,512),[[Wi,f.value.showCheckpoints]]),E[12]||(E[12]=Ve(" Checkpoints ",-1))]),d("label",Ew,[De(d("input",{type:"checkbox","onUpdate:modelValue":E[6]||(E[6]=q=>f.value.showAreas=q)},null,512),[[Wi,f.value.showAreas]]),E[13]||(E[13]=Ve(" Areas ",-1))])]),e.areas.length>0&&f.value.showAreas?(g(),y("div",Sw,[E[15]||(E[15]=d("h4",null,"Filter areas:",-1)),Oe(rp,{areas:e.areas,"selected-area-ids":f.value.selectedAreas,"onUpdate:selectedAreaIds":E[7]||(E[7]=q=>f.value.selectedAreas=q)},null,8,["areas","selected-area-ids"])])):B("",!0)]))],2)),u.value?(g(),y("div",{key:1,class:Fe(["add-menu",{expanded:h.value}])},[d("button",{onClick:b,class:"add-toggle",ref_key:"addButtonRef",ref:p},[h.value?(g(),y("span",Mw,"")):(g(),y("span",Pw,"Add..."))],512),h.value?(g(),y("div",$w,[d("button",{onClick:E[8]||(E[8]=q=>C("checkpoint")),class:"add-menu-item"}," Checkpoint "),d("button",{onClick:E[9]||(E[9]=q=>C("many-checkpoints")),class:"add-menu-item"}," Many checkpoints "),d("button",{onClick:E[10]||(E[10]=q=>C("area")),class:"add-menu-item"}," Area "),d("button",{onClick:S,class:"add-menu-item"}," Import checkpoints... "),d("button",{onClick:$,class:"add-menu-item"}," Upload route... ")])):B("",!0)],2)):B("",!0)],512)]))}},Dw=Ze(Ow,[["__scopeId","data-v-aa8741b6"]]),Rw=(e,n)=>{const i=String(e).trim(),r=String(n).trim(),s=parseFloat(i),a=parseFloat(r),l=!isNaN(s)&&String(s)===i,u=!isNaN(a)&&String(a)===r;return l&&u?s-a:i.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"})},Nw=e=>e&&e.isCheckedIn?"":"",Bw={class:"marshals-tab"},Fw={class:"marshals-tab-header"},zw={class:"button-group"},Uw={class:"marshals-grid"},Hw={class:"marshals-table"},Vw={key:0,class:"sort-indicator"},Zw={key:0,class:"sort-indicator"},qw={key:0,class:"sort-indicator"},jw=["onClick"],Ww=["rowspan"],Gw=["value","onChange"],Kw=["onClick"],Yw={style:{color:"#999","font-style":"italic"}},Jw={__name:"MarshalsTab",props:{marshals:{type:Array,required:!0},assignments:{type:Array,required:!0},locations:{type:Array,required:!0}},emits:["add-marshal","import-marshals","select-marshal","delete-marshal","change-assignment-status"],setup(e,{emit:n}){const{terms:i}=ht(),r=e,s=O("name"),a=O("asc"),l=b=>{s.value===b?a.value=a.value==="asc"?"desc":"asc":(s.value=b,a.value="asc")},u=b=>r.assignments.filter(C=>C.marshalId===b),h=b=>{const C=r.locations.find(S=>S.id===b);return C?C.name:"Unknown"},p=ae(()=>{const b=[...r.marshals];return b.sort((C,S)=>{let $=0;if(s.value==="name")$=C.name.localeCompare(S.name);else if(s.value==="checkpoint"){const R=u(C.id),A=u(S.id),x=R.length>0?h(R[0].locationId):"",w=A.length>0?h(A[0].locationId):"";$=Rw(x,w)}else if(s.value==="status"){const R=u(C.id),A=u(S.id),x=R.length>0&&R[0].isCheckedIn?1:0;$=(A.length>0&&A[0].isCheckedIn?1:0)-x}return a.value==="asc"?$:-$}),b}),f=b=>b.isAdminCheckedIn?"admin-checked-in":b.isWrongLocation?"wrong-location":b.isCheckedIn?"checked-in":"not-checked-in",v=b=>b.isCheckedIn?"status-checked-in":"status-not-checked-in";return(b,C)=>(g(),y("div",Bw,[d("div",Fw,[d("h2",null,T(F(i).people)+" management",1),d("div",zw,[d("button",{onClick:C[0]||(C[0]=S=>b.$emit("add-marshal")),class:"btn btn-primary"}," Add "+T(F(i).person.toLowerCase()),1),d("button",{onClick:C[1]||(C[1]=S=>b.$emit("import-marshals")),class:"btn btn-secondary"}," Import CSV ")])]),d("div",Uw,[d("table",Hw,[d("thead",null,[d("tr",null,[d("th",{onClick:C[2]||(C[2]=S=>l("name")),class:"sortable"},[C[6]||(C[6]=Ve(" Name ",-1)),s.value==="name"?(g(),y("span",Vw,T(a.value==="asc"?"":""),1)):B("",!0)]),d("th",{onClick:C[3]||(C[3]=S=>l("checkpoint")),class:"sortable"},[Ve(T(F(i).checkpoint)+" ",1),s.value==="checkpoint"?(g(),y("span",Zw,T(a.value==="asc"?"":""),1)):B("",!0)]),d("th",{onClick:C[4]||(C[4]=S=>l("status")),class:"sortable"},[C[7]||(C[7]=Ve(" Status ",-1)),s.value==="status"?(g(),y("span",qw,T(a.value==="asc"?"":""),1)):B("",!0)])])]),d("tbody",null,[(g(!0),y(ke,null,$e(p.value,S=>(g(),y(ke,{key:S.id},[u(S.id).length>0?(g(!0),y(ke,{key:0},$e(u(S.id),($,R)=>(g(),y("tr",{key:`${S.id}-${$.id}`,class:"marshal-row",onClick:A=>b.$emit("select-marshal",S)},[R===0?(g(),y("td",{key:0,rowspan:u(S.id).length},T(S.name),9,Ww)):B("",!0),d("td",null,T(h($.locationId)),1),d("td",{onClick:C[5]||(C[5]=Tt(()=>{},["stop"]))},[d("select",{value:f($),onChange:A=>b.$emit("change-assignment-status",{assignment:$,status:A.target.value}),class:Fe(["status-select hide-on-mobile",v($)])},[...C[8]||(C[8]=[d("option",{value:"not-checked-in"},"Not checked-in",-1),d("option",{value:"checked-in"},"Checked-in",-1),d("option",{value:"admin-checked-in"},"Admin checked-in",-1),d("option",{value:"wrong-location"},"Checked-in but not at correct location",-1)])],42,Gw),d("span",{class:Fe(["status-icon show-on-mobile",v($)])},T(F(Nw)($)),3)])],8,jw))),128)):(g(),y("tr",{key:1,class:"marshal-row",onClick:$=>b.$emit("select-marshal",S)},[d("td",null,T(S.name),1),d("td",Yw,"No "+T(F(i).checkpoint.toLowerCase())+" assigned",1),C[9]||(C[9]=d("td",null,[d("span",{class:"hide-on-mobile"},"-"),d("span",{class:"status-icon show-on-mobile",style:{color:"#999"}},"-")],-1))],8,Kw))],64))),128))])])])]))}},Xw=Ze(Jw,[["__scopeId","data-v-6b4bda15"]]),Qw={class:"checklists-tab"},eC={class:"checklists-tab-header"},tC={class:"button-group"},nC={class:"filters-section"},sC={class:"filter-group"},iC={class:"filter-checkbox"},oC=["checked"],aC={key:0,class:"checkbox-dropdown"},rC={class:"checkbox-dropdown-header"},lC={class:"checkbox-list"},cC=["checked","onChange"],uC={class:"filter-group"},dC={class:"filter-checkbox"},hC=["checked"],fC={key:0,class:"checkbox-dropdown"},pC={class:"checkbox-dropdown-header"},mC={class:"checkbox-list"},vC=["checked","onChange"],gC={class:"filter-group"},_C={class:"filter-checkbox"},yC=["checked"],bC={key:0,class:"checkbox-dropdown"},kC={class:"checkbox-dropdown-header"},wC={class:"checkbox-list"},CC=["checked","onChange"],LC={class:"checklist-items-list"},xC={key:0,class:"empty-state"},AC={class:"checklist-item-content"},IC=["onClick"],TC={class:"checklist-item-scopes"},EC=["onClick"],SC={__name:"ChecklistsTab",props:{checklistItems:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},completionReport:{type:Object,default:null}},emits:["add-checklist-item","select-checklist-item"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=O(!0),l=O(!0),u=O(!0),h=O([]),p=O([]),f=O([]),v=ae(()=>[...s.areas].sort((Ae,ee)=>Ae.displayOrder!==ee.displayOrder?Ae.displayOrder-ee.displayOrder:fn(Ae.name,ee.name))),b=ae(()=>[...s.locations].sort((Ae,ee)=>fn(Ae.name,ee.name))),C=ae(()=>[...s.marshals].sort((Ae,ee)=>fn(Ae.name,ee.name))),S=ae(()=>s.areas.length>0&&h.value.length===s.areas.length),$=ae(()=>s.locations.length>0&&p.value.length===s.locations.length),R=ae(()=>s.marshals.length>0&&f.value.length===s.marshals.length),A=ae(()=>!a.value||!l.value||!u.value),x=()=>{a.value=!a.value,!a.value&&h.value.length===0&&(h.value=s.areas.map(Ae=>Ae.id))},w=()=>{l.value=!l.value,!l.value&&p.value.length===0&&(p.value=s.locations.map(Ae=>Ae.id))},M=()=>{u.value=!u.value,!u.value&&f.value.length===0&&(f.value=s.marshals.map(Ae=>Ae.id))},k=Ae=>{const ee=h.value.indexOf(Ae);ee>=0?h.value.splice(ee,1):h.value.push(Ae)},I=Ae=>{const ee=p.value.indexOf(Ae);ee>=0?p.value.splice(ee,1):p.value.push(Ae)},E=Ae=>{const ee=f.value.indexOf(Ae);ee>=0?f.value.splice(ee,1):f.value.push(Ae)},q=()=>{S.value?h.value=[]:h.value=s.areas.map(Ae=>Ae.id)},U=()=>{$.value?p.value=[]:p.value=s.locations.map(Ae=>Ae.id)},Q=()=>{R.value?f.value=[]:f.value=s.marshals.map(Ae=>Ae.id)},ce=()=>{a.value=!0,l.value=!0,u.value=!0,h.value=[],p.value=[],f.value=[]},re=Ae=>{const ee=s.marshals.find(ve=>ve.id===Ae);return!ee||!ee.assignments?[]:ee.assignments.map(ve=>ve.locationId)},Le=Ae=>{const ee=new Set;return Ae.forEach(ve=>{const Ee=s.locations.find(Be=>Be.id===ve);Ee&&Ee.areaIds&&Ee.areaIds.forEach(Be=>ee.add(Be))}),Array.from(ee)},Z=(Ae,ee)=>{if(!ee)return!1;const ve=re(Ae),Ee=Le(ve);return ee.scope==="SpecificPeople"&&ee.itemType==="Marshal"?ee.ids.includes(Ae)||ee.ids.includes("ALL_MARSHALS"):ee.scope==="EveryoneAtCheckpoints"&&ee.itemType==="Checkpoint"?ee.ids.includes("ALL_CHECKPOINTS")||ve.some(Be=>ee.ids.includes(Be)):ee.scope==="OnePerCheckpoint"&&ee.itemType==="Checkpoint"?ee.ids.includes("ALL_CHECKPOINTS")||ve.some(Be=>ee.ids.includes(Be)):ee.scope==="OnePerCheckpoint"&&ee.itemType==="Area"?ee.ids.includes("ALL_AREAS")||Ee.some(Be=>ee.ids.includes(Be)):ee.scope==="EveryoneInAreas"&&ee.itemType==="Area"?ee.ids.includes("ALL_AREAS")||Ee.some(Be=>ee.ids.includes(Be)):ee.scope==="OnePerArea"&&ee.itemType==="Area"?ee.ids.includes("ALL_AREAS")||Ee.some(Be=>ee.ids.includes(Be)):(ee.scope==="EveryAreaLead"||ee.scope==="OneLeadPerArea")&&ee.itemType==="Area"?ee.ids.includes("ALL_AREAS")||Ee.some(Be=>ee.ids.includes(Be)):!1},W=ae(()=>{let Ae=s.checklistItems;return!a.value&&h.value.length>0&&(Ae=Ae.filter(ee=>ee.scopeConfigurations?ee.scopeConfigurations.some(ve=>ve.itemType==="Area"&&h.value.some(Ee=>ve.ids.includes(Ee))):!1)),!l.value&&p.value.length>0&&(Ae=Ae.filter(ee=>ee.scopeConfigurations?ee.scopeConfigurations.some(ve=>ve.itemType==="Checkpoint"&&p.value.some(Ee=>ve.ids.includes(Ee))):!1)),!u.value&&f.value.length>0&&(Ae=Ae.filter(ee=>ee.scopeConfigurations?f.value.some(ve=>ee.scopeConfigurations.some(Ee=>Z(ve,Ee))):!1)),Ae}),Y=ae(()=>[...W.value].sort((Ae,ee)=>Ae.displayOrder!==ee.displayOrder?Ae.displayOrder-ee.displayOrder:fn(Ae.text,ee.text))),me=Ae=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${r.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${r.value.checkpoints}`,SpecificPeople:`Specific ${r.value.people}`,OnePerArea:`One per ${r.value.area}`,OnePerCheckpoint:`One per ${r.value.checkpoint}`,EveryAreaLead:`Every ${r.value.area} lead`,OneLeadPerArea:`One lead per ${r.value.area}`,AreaLead:`${i.value.area} lead`})[Ae]||Ae,he=Ae=>{if(!Ae)return"";const ee=me(Ae.scope);if(Ae.itemType===null)return ee;const ve=Ae.ids||[];if(ve.includes("ALL_MARSHALS"))return`${ee} (Everyone)`;if(ve.includes("ALL_AREAS"))return`${ee} (All ${r.value.areas})`;if(ve.includes("ALL_CHECKPOINTS"))return`${ee} (All ${r.value.checkpoints})`;const Ee=ve.length;return Ee===0?ee:`${ee} (${Ee})`};return(Ae,ee)=>(g(),y("div",Qw,[d("div",eC,[d("h2",null,T(F(i).checklists),1),d("div",tC,[d("button",{onClick:ee[0]||(ee[0]=ve=>Ae.$emit("add-checklist-item")),class:"btn btn-primary"}," Add "+T(F(r).checklist),1)])]),d("div",nC,[d("div",sC,[d("h4",null,"Filter by "+T(F(r).area)+":",1),d("label",iC,[d("input",{type:"checkbox",checked:a.value,onChange:x},null,40,oC),Ve(" All "+T(F(r).areas),1)]),a.value?B("",!0):(g(),y("div",aC,[d("div",rC,[d("button",{onClick:q,class:"toggle-all-btn"},T(S.value?"Deselect all":"Select all"),1)]),d("div",lC,[(g(!0),y(ke,null,$e(v.value,ve=>(g(),y("label",{key:ve.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:h.value.includes(ve.id),onChange:Ee=>k(ve.id)},null,40,cC),d("span",{class:"area-color-dot",style:tn({backgroundColor:ve.color||"#667eea"})},null,4),Ve(" "+T(ve.name),1)]))),128))])]))]),d("div",uC,[d("h4",null,"Filter by "+T(F(r).checkpoint)+":",1),d("label",dC,[d("input",{type:"checkbox",checked:l.value,onChange:w},null,40,hC),Ve(" All "+T(F(r).checkpoints),1)]),l.value?B("",!0):(g(),y("div",fC,[d("div",pC,[d("button",{onClick:U,class:"toggle-all-btn"},T($.value?"Deselect all":"Select all"),1)]),d("div",mC,[(g(!0),y(ke,null,$e(b.value,ve=>(g(),y("label",{key:ve.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:p.value.includes(ve.id),onChange:Ee=>I(ve.id)},null,40,vC),Ve(" "+T(ve.name),1)]))),128))])]))]),d("div",gC,[d("h4",null,"Filter by "+T(F(r).person)+":",1),d("label",_C,[d("input",{type:"checkbox",checked:u.value,onChange:M},null,40,yC),Ve(" All "+T(F(r).people),1)]),u.value?B("",!0):(g(),y("div",bC,[d("div",kC,[d("button",{onClick:Q,class:"toggle-all-btn"},T(R.value?"Deselect all":"Select all"),1)]),d("div",wC,[(g(!0),y(ke,null,$e(C.value,ve=>(g(),y("label",{key:ve.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:f.value.includes(ve.id),onChange:Ee=>E(ve.id)},null,40,CC),Ve(" "+T(ve.name),1)]))),128))])]))]),A.value?(g(),y("button",{key:0,onClick:ce,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),d("div",LC,[W.value.length===0?(g(),y("div",xC,[d("p",null,T(A.value?"No checklist items match the selected filters.":"No checklist items yet. Create one to get started!"),1)])):B("",!0),(g(!0),y(ke,null,$e(Y.value,ve=>(g(),y("div",{key:ve.itemId,class:"checklist-item-card"},[d("div",AC,[d("div",{class:"checklist-item-title",onClick:Ee=>Ae.$emit("select-checklist-item",ve,"details")},[d("strong",null,T(ve.text),1)],8,IC),d("div",TC,[(g(!0),y(ke,null,$e(ve.scopeConfigurations,(Ee,Be)=>(g(),y("span",{key:Be,class:"scope-badge",onClick:ge=>Ae.$emit("select-checklist-item",ve,"visibility")},T(he(Ee)),9,EC))),128))])])]))),128))])]))}},MC=Ze(SC,[["__scopeId","data-v-5b51ce47"]]),PC={class:"notes-tab"},$C={class:"notes-tab-header"},OC={class:"button-group"},DC={class:"filters-section"},RC={class:"filter-group"},NC={class:"priority-filters"},BC=["checked","onChange"],FC={class:"filter-group"},zC={class:"filter-checkbox"},UC=["checked"],HC={key:0,class:"checkbox-dropdown"},VC={class:"checkbox-list"},ZC=["checked","onChange"],qC={class:"notes-list"},jC={key:0,class:"empty-state"},WC=["onClick"],GC={class:"note-header"},KC={class:"note-title-row"},YC={key:0,class:"pin-icon",title:"Pinned"},JC={class:"note-meta"},XC={key:0,class:"category-badge"},QC={class:"created-info"},e1={key:0,class:"note-preview"},t1={class:"note-scopes"},n1={__name:"NotesTab",props:{notes:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]}},emits:["add-note","select-note"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=[{value:"Urgent",label:"Urgent"},{value:"High",label:"High"},{value:"Normal",label:"Normal"},{value:"Low",label:"Low"}],a=O(!0),l=O([]),u=O(["Urgent","High","Normal","Low"]),h=ae(()=>[...r.areas].sort((M,k)=>M.displayOrder!==k.displayOrder?M.displayOrder-k.displayOrder:fn(M.name,k.name))),p=ae(()=>!a.value||u.value.length<4),f=()=>{a.value=!a.value,!a.value&&l.value.length===0&&(l.value=r.areas.map(M=>M.id))},v=M=>{const k=l.value.indexOf(M);k>=0?l.value.splice(k,1):l.value.push(M)},b=M=>{const k=u.value.indexOf(M);k>=0?u.value.splice(k,1):u.value.push(M)},C=()=>{a.value=!0,l.value=[],u.value=["Urgent","High","Normal","Low"]},S=ae(()=>{let M=r.notes;return u.value.length<4&&(M=M.filter(k=>u.value.includes(k.priority||"Normal"))),!a.value&&l.value.length>0&&(M=M.filter(k=>k.scopeConfigurations?k.scopeConfigurations.some(I=>I.itemType==="Area"&&l.value.some(E=>I.ids.includes(E))):!1)),M}),$=ae(()=>{const M={Urgent:0,High:1,Normal:2,Low:3};return[...S.value].sort((k,I)=>{if(k.isPinned!==I.isPinned)return k.isPinned?-1:1;const E=M[k.priority]??2,q=M[I.priority]??2;return E!==q?E-q:k.displayOrder!==I.displayOrder?k.displayOrder-I.displayOrder:fn(k.title,I.title)})}),R=M=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,OnePerArea:`One per ${i.value.area}`,OneLeadPerArea:`One lead per ${i.value.area}`})[M]||M,A=M=>{if(!M)return"";const k=R(M.scope);if(M.itemType===null)return k;const I=M.ids||[];if(I.includes("ALL_MARSHALS"))return`${k} (Everyone)`;if(I.includes("ALL_AREAS"))return`${k} (All ${i.value.areas})`;if(I.includes("ALL_CHECKPOINTS"))return`${k} (All ${i.value.checkpoints})`;const E=I.length;return E===0?k:`${k} (${E})`},x=M=>{if(!M)return"";const k=150;return M.length<=k?M:M.substring(0,k)+"..."},w=M=>{if(!M)return"";const k=new Date(M),E=new Date-k,q=Math.floor(E/6e4),U=Math.floor(E/36e5),Q=Math.floor(E/864e5);return q<1?"Just now":q<60?`${q}m ago`:U<24?`${U}h ago`:Q<7?`${Q}d ago`:k.toLocaleDateString()};return(M,k)=>(g(),y("div",PC,[d("div",$C,[k[1]||(k[1]=d("h2",null,"Notes",-1)),d("div",OC,[d("button",{onClick:k[0]||(k[0]=I=>M.$emit("add-note")),class:"btn btn-primary"}," Add note ")])]),d("div",DC,[d("div",RC,[k[2]||(k[2]=d("h4",null,"Filter by priority:",-1)),d("div",NC,[(g(),y(ke,null,$e(s,I=>d("label",{key:I.value,class:"filter-checkbox"},[d("input",{type:"checkbox",checked:u.value.includes(I.value),onChange:E=>b(I.value)},null,40,BC),d("span",{class:Fe(["priority-dot",I.value.toLowerCase()])},null,2),Ve(" "+T(I.label),1)])),64))])]),d("div",FC,[k[4]||(k[4]=d("h4",null,"Filter by area:",-1)),d("label",zC,[d("input",{type:"checkbox",checked:a.value,onChange:f},null,40,UC),k[3]||(k[3]=Ve(" All areas ",-1))]),a.value?B("",!0):(g(),y("div",HC,[d("div",VC,[(g(!0),y(ke,null,$e(h.value,I=>(g(),y("label",{key:I.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:l.value.includes(I.id),onChange:E=>v(I.id)},null,40,ZC),d("span",{class:"area-color-dot",style:tn({backgroundColor:I.color||"#667eea"})},null,4),Ve(" "+T(I.name),1)]))),128))])]))]),p.value?(g(),y("button",{key:0,onClick:C,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),d("div",qC,[S.value.length===0?(g(),y("div",jC,[d("p",null,T(p.value?"No notes match the selected filters.":"No notes yet. Create one to get started!"),1)])):B("",!0),(g(!0),y(ke,null,$e($.value,I=>(g(),y("div",{key:I.noteId,class:Fe(["note-card",{pinned:I.isPinned}]),onClick:E=>M.$emit("select-note",I)},[d("div",GC,[d("div",KC,[I.isPinned?(g(),y("span",YC,"")):B("",!0),d("span",{class:Fe(["priority-indicator",I.priority?.toLowerCase()||"normal"])},null,2),d("strong",null,T(I.title),1)]),d("div",JC,[I.category?(g(),y("span",XC,T(I.category),1)):B("",!0),d("span",QC,T(w(I.createdAt)),1)])]),I.content?(g(),y("div",e1,T(x(I.content)),1)):B("",!0),d("div",t1,[(g(!0),y(ke,null,$e(I.scopeConfigurations,(E,q)=>(g(),y("span",{key:q,class:"scope-badge"},T(A(E)),1))),128))])],10,WC))),128))])]))}},s1=Ze(n1,[["__scopeId","data-v-f0d2cbb3"]]),i1={class:"contacts-tab"},o1={class:"contacts-tab-header"},a1={class:"button-group"},r1={class:"filters-section"},l1={class:"filter-group"},c1={class:"filter-checkbox"},u1=["checked"],d1={key:0,class:"checkbox-dropdown"},h1={class:"checkbox-list"},f1=["checked","onChange"],p1={class:"contacts-list"},m1={key:0,class:"empty-state"},v1=["onClick"],g1={class:"contact-header"},_1={class:"contact-title-row"},y1={key:0,class:"primary-badge",title:"Primary contact"},b1={class:"role-badge"},k1={class:"contact-details"},w1={key:0,class:"contact-phone"},C1={key:1,class:"contact-email"},L1={key:0,class:"contact-notes"},x1={class:"contact-scopes"},A1={__name:"ContactsTab",props:{contacts:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})}},emits:["add-contact","select-contact"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=O(!0),a=O([]),l=ae(()=>{const A=new Set([...r.availableRoles.builtInRoles||[],...r.availableRoles.customRoles||[],...r.contacts.map(x=>x.role)]);return Array.from(A).sort()}),u=ae(()=>!s.value),h=()=>{s.value=!s.value,!s.value&&a.value.length===0&&(a.value=[...l.value])},p=A=>{const x=a.value.indexOf(A);x>=0?a.value.splice(x,1):a.value.push(A)},f=()=>{s.value=!0,a.value=[]},v=ae(()=>{let A=r.contacts;return!s.value&&a.value.length>0&&(A=A.filter(x=>a.value.includes(x.role))),A}),b=ae(()=>[...v.value].sort((A,x)=>{if(A.isPrimary!==x.isPrimary)return A.isPrimary?-1:1;const w=A.role.localeCompare(x.role);return w!==0?w:A.displayOrder!==x.displayOrder?A.displayOrder-x.displayOrder:fn(A.name,x.name)})),C=A=>A?A==="AreaLead"?`${i.value.area.charAt(0).toUpperCase()+i.value.area.slice(1)} Lead`:A.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()).trim():"",S=A=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`})[A]||A,$=A=>{if(!A)return"";const x=S(A.scope);if(A.itemType===null)return x;const w=A.ids||[];if(w.includes("ALL_MARSHALS"))return`${x} (Everyone)`;if(w.includes("ALL_AREAS"))return`${x} (All ${i.value.areas})`;if(w.includes("ALL_CHECKPOINTS"))return`${x} (All ${i.value.checkpoints})`;const M=w.length;return M===0?x:`${x} (${M})`},R=A=>{if(!A)return"";const x=100;return A.length<=x?A:A.substring(0,x)+"..."};return(A,x)=>(g(),y("div",i1,[d("div",o1,[x[1]||(x[1]=d("h2",null,"Contacts",-1)),d("div",a1,[d("button",{onClick:x[0]||(x[0]=w=>A.$emit("add-contact")),class:"btn btn-primary"}," Add contact ")])]),d("div",r1,[d("div",l1,[x[3]||(x[3]=d("h4",null,"Filter by role:",-1)),d("label",c1,[d("input",{type:"checkbox",checked:s.value,onChange:h},null,40,u1),x[2]||(x[2]=Ve(" All roles ",-1))]),s.value?B("",!0):(g(),y("div",d1,[d("div",h1,[(g(!0),y(ke,null,$e(l.value,w=>(g(),y("label",{key:w,class:"checkbox-item"},[d("input",{type:"checkbox",checked:a.value.includes(w),onChange:M=>p(w)},null,40,f1),Ve(" "+T(C(w)),1)]))),128))])]))]),u.value?(g(),y("button",{key:0,onClick:f,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),d("div",p1,[v.value.length===0?(g(),y("div",m1,[d("p",null,T(u.value?"No contacts match the selected filters.":"No contacts yet. Create one to get started!"),1)])):B("",!0),(g(!0),y(ke,null,$e(b.value,w=>(g(),y("div",{key:w.contactId,class:Fe(["contact-card",{primary:w.isPrimary}]),onClick:M=>A.$emit("select-contact",w)},[d("div",g1,[d("div",_1,[w.isPrimary?(g(),y("span",y1,"")):B("",!0),d("strong",null,T(w.name),1),d("span",b1,T(C(w.role)),1)]),d("div",k1,[w.phone?(g(),y("span",w1,T(w.phone),1)):B("",!0),w.email?(g(),y("span",C1,T(w.email),1)):B("",!0)])]),w.notes?(g(),y("div",L1,T(R(w.notes)),1)):B("",!0),d("div",x1,[(g(!0),y(ke,null,$e(w.scopeConfigurations,(M,k)=>(g(),y("span",{key:k,class:"scope-badge"},T($(M)),1))),128))])],10,v1))),128))])]))}},I1=Ze(A1,[["__scopeId","data-v-62313ae0"]]),T1={class:"admins-list"},E1={class:"admin-info"},S1={class:"admin-role"},M1=["onClick"],P1={__name:"AdminsList",props:{admins:{type:Array,required:!0}},emits:["add-admin","remove-admin"],setup(e){return(n,i)=>(g(),y("div",null,[i[1]||(i[1]=d("h3",null,"Event administrators",-1)),d("button",{onClick:i[0]||(i[0]=r=>n.$emit("add-admin")),class:"btn btn-small btn-primary"}," Add administrator "),d("div",T1,[(g(!0),y(ke,null,$e(e.admins,r=>(g(),y("div",{key:r.userEmail,class:"admin-item"},[d("div",E1,[d("strong",null,T(r.userEmail),1),d("span",S1,T(r.role),1)]),e.admins.length>1?(g(),y("button",{key:0,onClick:s=>n.$emit("remove-admin",r.userEmail),class:"btn btn-small btn-danger"}," Remove ",8,M1)):B("",!0)]))),128))])]))}},$1=Ze(P1,[["__scopeId","data-v-c76441fb"]]),O1={class:"event-details-tab"},D1={class:"accordion"},R1={class:"accordion-section"},N1={class:"accordion-icon"},B1={key:0,class:"accordion-content"},F1={class:"form-group"},z1={class:"form-group"},U1={class:"form-group"},H1={class:"form-group"},V1=["value"],Z1={class:"form-actions"},q1=["disabled"],j1={class:"accordion-section"},W1={class:"accordion-title"},G1={class:"accordion-icon"},K1={key:0,class:"accordion-content"},Y1={class:"accordion-section"},J1={class:"accordion-icon"},X1={key:0,class:"accordion-content"},Q1={class:"terminology-grid"},eL={class:"term-group"},tL=["value"],nL={class:"term-group"},sL=["value"],iL={class:"term-group"},oL=["value"],aL={class:"term-group"},rL=["value"],lL={class:"term-group"},cL=["value"],uL={class:"form-actions"},dL=["disabled"],hL={__name:"EventDetailsTab",props:{eventData:{type:Object,required:!0},admins:{type:Array,default:()=>[]},formDirty:{type:Boolean,default:!1}},emits:["submit","add-admin","remove-admin","update:formDirty"],setup(e,{emit:n}){const{terms:i}=ht(),r=e,s=n,a=O({...r.eventData}),l=O(null),u=f=>{l.value=l.value===f?null:f};je(()=>r.eventData,f=>{a.value={...f}},{deep:!0});const h=()=>{s("update:formDirty",!0)},p=()=>{s("submit",{...a.value})};return(f,v)=>(g(),y("div",O1,[d("div",D1,[d("div",R1,[d("button",{class:Fe(["accordion-header",{active:l.value==="info"}]),onClick:v[0]||(v[0]=b=>u("info"))},[v[14]||(v[14]=d("span",{class:"accordion-title"},"Event Information",-1)),d("span",N1,T(l.value==="info"?"":"+"),1)],2),l.value==="info"?(g(),y("div",B1,[d("form",{onSubmit:Tt(p,["prevent"]),class:"event-details-form"},[d("div",F1,[v[15]||(v[15]=d("label",null,"Event Name",-1)),De(d("input",{"onUpdate:modelValue":v[1]||(v[1]=b=>a.value.name=b),type:"text",required:"",class:"form-input",onInput:h},null,544),[[it,a.value.name]])]),d("div",z1,[v[16]||(v[16]=d("label",null,"Description",-1)),De(d("textarea",{"onUpdate:modelValue":v[2]||(v[2]=b=>a.value.description=b),rows:"3",class:"form-input",onInput:h},null,544),[[it,a.value.description]])]),d("div",U1,[v[17]||(v[17]=d("label",null,"Event Date & Time",-1)),De(d("input",{"onUpdate:modelValue":v[3]||(v[3]=b=>a.value.eventDate=b),type:"datetime-local",required:"",class:"form-input",onInput:h},null,544),[[it,a.value.eventDate]])]),d("div",H1,[v[18]||(v[18]=d("label",null,"Time Zone",-1)),De(d("select",{"onUpdate:modelValue":v[4]||(v[4]=b=>a.value.timeZoneId=b),required:"",class:"form-input",onChange:h},[(g(!0),y(ke,null,$e(F(op),b=>(g(),y("option",{key:b.value,value:b.value},T(b.label),9,V1))),128))],544),[[_n,a.value.timeZoneId]])]),d("div",Z1,[d("button",{type:"submit",class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,q1)])],32)])):B("",!0)]),d("div",j1,[d("button",{class:Fe(["accordion-header",{active:l.value==="admins"}]),onClick:v[5]||(v[5]=b=>u("admins"))},[d("span",W1,"Administrators ("+T(e.admins.length)+")",1),d("span",G1,T(l.value==="admins"?"":"+"),1)],2),l.value==="admins"?(g(),y("div",K1,[Oe($1,{admins:e.admins,onAddAdmin:v[6]||(v[6]=b=>f.$emit("add-admin")),onRemoveAdmin:v[7]||(v[7]=b=>f.$emit("remove-admin",b))},null,8,["admins"])])):B("",!0)]),d("div",Y1,[d("button",{class:Fe(["accordion-header",{active:l.value==="terminology"}]),onClick:v[8]||(v[8]=b=>u("terminology"))},[v[19]||(v[19]=d("span",{class:"accordion-title"},"Terminology Settings",-1)),d("span",J1,T(l.value==="terminology"?"":"+"),1)],2),l.value==="terminology"?(g(),y("div",X1,[v[20]||(v[20]=d("p",{class:"section-description"}," Customise how things are named throughout the application. ",-1)),d("div",Q1,[d("div",eL,[d("label",null,T(F(i).people)+" are called",1),De(d("select",{"onUpdate:modelValue":v[9]||(v[9]=b=>a.value.peopleTerm=b),class:"form-input",onChange:h},[(g(!0),y(ke,null,$e(F(Bo).people,b=>(g(),y("option",{key:b,value:b},T(b),9,tL))),128))],544),[[_n,a.value.peopleTerm]])]),d("div",nL,[d("label",null,T(F(i).checkpoints)+" are called",1),De(d("select",{"onUpdate:modelValue":v[10]||(v[10]=b=>a.value.checkpointTerm=b),class:"form-input",onChange:h},[(g(!0),y(ke,null,$e(F(Bo).checkpoint,b=>(g(),y("option",{key:b,value:b},T(b),9,sL))),128))],544),[[_n,a.value.checkpointTerm]])]),d("div",iL,[d("label",null,T(F(i).areas)+" are called",1),De(d("select",{"onUpdate:modelValue":v[11]||(v[11]=b=>a.value.areaTerm=b),class:"form-input",onChange:h},[(g(!0),y(ke,null,$e(F(Bo).area,b=>(g(),y("option",{key:b,value:b},T(b),9,oL))),128))],544),[[_n,a.value.areaTerm]])]),d("div",aL,[d("label",null,T(F(i).checklists)+" are called",1),De(d("select",{"onUpdate:modelValue":v[12]||(v[12]=b=>a.value.checklistTerm=b),class:"form-input",onChange:h},[(g(!0),y(ke,null,$e(F(Bo).checklist,b=>(g(),y("option",{key:b,value:b},T(b),9,rL))),128))],544),[[_n,a.value.checklistTerm]])]),d("div",lL,[d("label",null,T(F(i).course)+" is called",1),De(d("select",{"onUpdate:modelValue":v[13]||(v[13]=b=>a.value.courseTerm=b),class:"form-input",onChange:h},[(g(!0),y(ke,null,$e(F(Bo).course,b=>(g(),y("option",{key:b,value:b},T(b),9,cL))),128))],544),[[_n,a.value.courseTerm]])])]),d("div",uL,[d("button",{onClick:p,class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,dL)])])):B("",!0)])])]))}},fL=Ze(hL,[["__scopeId","data-v-2b66b552"]]),pL={class:"button-group"},mL={key:0,class:"add-dropdown"},vL={key:0,class:"filter-group"},gL={class:"filter-checkbox"},_L=["checked"],yL={class:"locations-list"},bL=["onClick"],kL={class:"location-info"},wL={class:"location-header"},CL={class:"location-description"},LL={class:"location-status"},xL={class:"location-assignments"},AL={__name:"CheckpointsList",props:{locations:{type:Array,required:!0},areas:{type:Array,default:()=>[]}},emits:["add-checkpoint-manually","import-checkpoints","select-location"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O(!0),u=O([]),h=O(null),p=O(null),f=O(!1),v=()=>{f.value=!f.value},b=()=>{f.value=!1,a("add-checkpoint-manually")},C=()=>{f.value=!1,a("import-checkpoints")},S=w=>{p.value&&!p.value.contains(w.target)&&(f.value=!1)};kn(()=>{document.addEventListener("click",S)}),As(()=>{document.removeEventListener("click",S)});const $=()=>{l.value=!l.value,!l.value&&u.value.length===0&&(u.value=s.areas.map(w=>w.id))},R=ae(()=>{let w=s.locations;return!l.value&&u.value.length>0&&(w=w.filter(M=>(M.areaIds||M.AreaIds||[]).some(I=>u.value.includes(I)))),[...w].sort((M,k)=>fn(M.name,k.name))}),A=w=>{const M=s.areas.find(k=>k.id===w);return M?M.name:null},x=w=>{const M=s.areas.find(k=>k.id===w);return M?M.color:"#999"};return(w,M)=>(g(),y("div",null,[d("h3",null,T(F(i).checkpoints)+" ("+T(e.locations.length)+")",1),d("div",pL,[d("div",{class:"add-menu-wrapper",ref_key:"menuWrapperRef",ref:p},[d("button",{ref_key:"addButtonRef",ref:h,onClick:v,class:"btn btn-small btn-primary"}," Add... ",512),f.value?(g(),y("div",mL,[d("button",{onClick:b,class:"dropdown-item"}," Add "+T(F(r).checkpoint)+" manually ",1),d("button",{onClick:C,class:"dropdown-item"}," Import from CSV... ")])):B("",!0)],512)]),e.areas.length>0?(g(),y("div",vL,[d("h4",null,"Filter by "+T(F(i).area.toLowerCase())+":",1),d("label",gL,[d("input",{type:"checkbox",checked:l.value,onChange:$},null,40,_L),Ve(" All "+T(F(i).areas.toLowerCase())+" ("+T(e.locations.length)+") ",1)]),l.value?B("",!0):(g(),nt(rp,{key:0,areas:e.areas,"selected-area-ids":u.value,"onUpdate:selectedAreaIds":M[0]||(M[0]=k=>u.value=k)},null,8,["areas","selected-area-ids"]))])):B("",!0),d("div",yL,[(g(!0),y(ke,null,$e(R.value,k=>(g(),y("div",{key:k.id,class:Fe(["location-item",{"location-full":k.checkedInCount>=k.requiredMarshals,"location-missing":k.checkedInCount===0}]),onClick:I=>w.$emit("select-location",k)},[d("div",kL,[d("div",wL,[d("strong",null,T(k.name),1),(g(!0),y(ke,null,$e(k.areaIds||k.AreaIds||[],I=>(g(),y("span",{key:I,class:"area-badge",style:tn({backgroundColor:x(I)})},T(A(I)),5))),128))]),d("span",CL,T(k.description),1),d("span",LL,T(k.checkedInCount)+"/"+T(k.requiredMarshals),1)]),d("div",xL,[(g(!0),y(ke,null,$e(k.assignments,I=>(g(),y("span",{key:I.id,class:Fe(["assignment-badge",{"checked-in":I.isCheckedIn}])},T(I.marshalName),3))),128))])],10,bL))),128))])]))}},IL=Ze(AL,[["__scopeId","data-v-6e64a151"]]),TL={class:"button-group"},EL={class:"areas-list"},SL=["onClick"],ML={class:"area-info"},PL={class:"area-header"},$L={key:0,class:"default-badge"},OL={key:0,class:"area-description"},DL={class:"area-stats"},RL={class:"stat-badge"},NL={class:"stat-badge"},BL={key:0,class:"empty-state"},FL={__name:"AreasList",props:{areas:{type:Array,required:!0},checkpoints:{type:Array,default:()=>[]}},emits:["add-area","select-area"],setup(e){const{terms:n,formatCount:i}=ht(),r=e,s=ae(()=>[...r.areas].sort((u,h)=>u.displayOrder!==h.displayOrder?u.displayOrder-h.displayOrder:fn(u.name,h.name))),a=u=>u.checkpointCount!==void 0?u.checkpointCount:r.checkpoints.filter(h=>h.areaId===u.id).length,l=u=>{if(!u.contacts)return 0;const h=typeof u.contacts=="string"?JSON.parse(u.contacts):u.contacts;return Array.isArray(h)?h.length:0};return(u,h)=>(g(),y("div",null,[d("h3",null,T(F(n).areas)+" ("+T(e.areas.length)+")",1),d("div",TL,[d("button",{onClick:h[0]||(h[0]=p=>u.$emit("add-area")),class:"btn btn-small btn-primary"}," Add "+T(F(n).area.toLowerCase()),1)]),d("div",EL,[(g(!0),y(ke,null,$e(s.value,p=>(g(),y("div",{key:p.id,class:"area-item",style:tn({borderLeftColor:p.color||"#667eea"}),onClick:f=>u.$emit("select-area",p)},[d("div",ML,[d("div",PL,[d("strong",null,T(p.name),1),p.isDefault?(g(),y("span",$L,"Default")):B("",!0)]),p.description?(g(),y("p",OL,T(p.description),1)):B("",!0),d("div",DL,[d("span",RL,T(F(i)("checkpoint",a(p))),1),d("span",NL,T(l(p))+" contact"+T(l(p)===1?"":"s"),1)])])],12,SL))),128)),e.areas.length===0?(g(),y("div",BL,[d("p",null,"No "+T(F(n).areas.toLowerCase())+' yet. Click "Add '+T(F(n).area.toLowerCase())+'" to create one.',1)])):B("",!0)])]))}},zL=Ze(FL,[["__scopeId","data-v-1ef45bfd"]]),UL={course:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>',checkpoint:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',area:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',marshal:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',checklist:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>',details:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16h6"/></svg>',location:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>',map:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',contacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',eventContacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 8V6a2 2 0 0 0-2-2h-2"/><path d="M22 12v2a2 2 0 0 1-2 2h-2"/></svg>',event:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>'},gn=e=>UL[e]||"",HL={class:"responsive-tabs"},VL={class:"visible-tabs"},ZL=["onClick"],qL=["innerHTML"],jL={class:"hamburger-only"},WL=["innerHTML"],GL={class:"hamburger-label"},KL=["onClick"],YL=["innerHTML"],JL={__name:"ResponsiveTabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,r=n,s=O(null),a=O(null),l=O(!1),u=O({}),h=ae(()=>i.tabs.find(C=>C.value===i.modelValue)),p=ae(()=>h.value?h.value.label:"Menu"),f=()=>{if(l.value=!l.value,l.value&&a.value){const C=a.value.getBoundingClientRect();u.value={top:`${C.bottom+4}px`}}},v=C=>{r("update:modelValue",C),l.value=!1},b=C=>{if(!s.value)return;const S=s.value.contains(C.target);l.value&&!S&&(l.value=!1)};return kn(()=>{document.addEventListener("click",b)}),As(()=>{document.removeEventListener("click",b)}),(C,S)=>(g(),y("div",HL,[d("div",VL,[(g(!0),y(ke,null,$e(e.tabs,$=>(g(),y("button",{key:$.value,class:Fe(["tab-button",{active:e.modelValue===$.value}]),onClick:R=>C.$emit("update:modelValue",$.value),type:"button"},[$.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:F(gn)($.icon)},null,8,qL)):B("",!0),Ve(" "+T($.label),1)],10,ZL))),128))]),d("div",jL,[d("div",{class:"hamburger-menu",ref_key:"hamburgerMenu",ref:s},[d("button",{ref_key:"hamburgerButton",ref:a,class:Fe(["hamburger-button",{active:l.value}]),onClick:Tt(f,["stop"]),type:"button"},[S[1]||(S[1]=d("span",{class:"hamburger-icon"},"",-1)),h.value?.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:F(gn)(h.value.icon)},null,8,WL)):B("",!0),d("span",GL,T(p.value),1)],2),l.value?(g(),y("div",{key:0,class:"hamburger-dropdown",style:tn(u.value),onClick:S[0]||(S[0]=Tt(()=>{},["stop"]))},[(g(!0),y(ke,null,$e(e.tabs,$=>(g(),y("button",{key:$.value,class:Fe(["dropdown-item",{active:e.modelValue===$.value}]),onClick:Tt(R=>v($.value),["stop"]),type:"button"},[$.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:F(gn)($.icon)},null,8,YL)):B("",!0),Ve(" "+T($.label),1)],10,KL))),128))],4)):B("",!0)],512)])]))}},XL=Ze(JL,[["__scopeId","data-v-1710ea17"]]),QL={class:"share-link-container"},e0=["value"],t0={__name:"ShareLinkModal",props:{show:{type:Boolean,default:!1},link:{type:String,required:!0},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=n,r=O(!1),s=O(null),a=()=>{s.value&&(s.value.select(),document.execCommand("copy"),r.value=!0,setTimeout(()=>{r.value=!1},2e3))},l=()=>{i("close")};return(u,h)=>(g(),nt(Ft,{show:e.show,title:"Marshal check-in link",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:l},{actions:We(()=>[d("button",{onClick:l,class:"btn btn-secondary"},"Close")]),default:We(()=>[h[0]||(h[0]=d("p",{class:"instruction"},"Share this link with marshals so they can check in:",-1)),d("div",QL,[d("input",{value:e.link,readonly:"",class:"form-input",ref_key:"linkInput",ref:s},null,8,e0),d("button",{onClick:a,class:"btn btn-primary"},T(r.value?"Copied!":"Copy"),1)])]),_:1},8,["show","is-dirty"]))}},n0=Ze(t0,[["__scopeId","data-v-e3c38c66"]]),s0={class:"success-content"},i0={class:"success-message"},o0={class:"link-section"},a0={class:"help-text"},r0={key:0,class:"loading-text"},l0={key:1,class:"magic-link-container"},c0=["value"],u0={class:"magic-link-actions"},d0=["disabled"],h0={key:0,class:"success-text"},f0={key:1,class:"error-text"},p0={key:2,class:"error-text"},m0={__name:"MarshalCreatedModal",props:{show:{type:Boolean,default:!1},eventId:{type:String,required:!0},marshalId:{type:String,default:null},marshalName:{type:String,default:""}},emits:["close"],setup(e,{emit:n}){const{terms:i}=ht(),r=e,s=n,a=O(""),l=O(!1),u=O(!1),h=O(""),p=O(!1),f=O(!1),v=O(!1),b=O(""),C=async()=>{if(!(!r.eventId||!r.marshalId)){u.value=!0,h.value="";try{const A=await Xn.getMagicLink(r.eventId,r.marshalId);a.value=A.data.magicLink,l.value=A.data.hasEmail}catch(A){console.error("Failed to fetch magic link:",A),h.value="Failed to load login link"}finally{u.value=!1}}},S=async()=>{try{await navigator.clipboard.writeText(a.value),p.value=!0,setTimeout(()=>{p.value=!1},2e3)}catch(A){console.error("Failed to copy:",A)}},$=async()=>{if(!(!r.eventId||!r.marshalId)){f.value=!0,v.value=!1,b.value="";try{await Xn.sendMagicLink(r.eventId,r.marshalId),v.value=!0,setTimeout(()=>{v.value=!1},3e3)}catch(A){console.error("Failed to send email:",A),b.value=A.response?.data?.message||"Failed to send email"}finally{f.value=!1}}},R=()=>{s("close")};return je(()=>r.show,A=>{A&&r.marshalId?C():(a.value="",l.value=!1,h.value="",p.value=!1,v.value=!1,b.value="")},{immediate:!0}),(A,x)=>(g(),nt(Ft,{show:e.show,title:`${F(i).person} created`,size:"medium","confirm-on-close":!1,"is-dirty":!1,onClose:R},{actions:We(()=>[d("button",{onClick:R,class:"btn btn-primary"},"Done")]),default:We(()=>[d("div",s0,[x[2]||(x[2]=d("div",{class:"success-icon"},"",-1)),d("p",i0,[d("strong",null,T(e.marshalName),1),x[1]||(x[1]=Ve(" has been added successfully. ",-1))])]),d("div",o0,[x[3]||(x[3]=d("label",null,"Login Link",-1)),d("p",a0," Share this unique link with "+T(e.marshalName)+" so they can access their dashboard and check in. ",1),u.value?(g(),y("div",r0,"Loading link...")):a.value?(g(),y("div",l0,[d("input",{type:"text",value:a.value,readonly:"",class:"form-input magic-link-input",onFocus:x[0]||(x[0]=w=>w.target.select())},null,40,c0),d("div",u0,[d("button",{type:"button",class:"btn btn-secondary",onClick:S},T(p.value?"Copied!":"Copy link"),1),l.value?(g(),y("button",{key:0,type:"button",class:"btn btn-primary",disabled:f.value,onClick:$},T(f.value?"Sending...":"Send via email"),9,d0)):B("",!0)]),v.value?(g(),y("p",h0,"Email sent successfully!")):B("",!0),b.value?(g(),y("p",f0,T(b.value),1)):B("",!0)])):h.value?(g(),y("div",p0,T(h.value),1)):B("",!0)])]),_:1},8,["show","title"]))}},v0=Ze(m0,[["__scopeId","data-v-f28f1004"]]),g0={class:"form-group"},_0={__name:"AddAdminModal",props:{show:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=O("");je(()=>i.show,h=>{h||(s.value="")});const a=()=>{r("update:isDirty",!0)},l=()=>{r("submit",s.value)},u=()=>{r("close")};return(h,p)=>(g(),nt(Ft,{show:e.show,title:"Add event administrator",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:u},{actions:We(()=>[d("button",{type:"button",onClick:u,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:l,class:"btn btn-primary"}," Add administrator ")]),default:We(()=>[p[2]||(p[2]=d("p",{class:"instruction"},"Enter the email address of the administrator to add",-1)),d("form",{onSubmit:Tt(l,["prevent"])},[d("div",g0,[p[1]||(p[1]=d("label",null,"Email address",-1)),De(d("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>s.value=f),type:"email",required:"",class:"form-input",placeholder:"admin@example.com",onInput:a},null,544),[[it,s.value]])])],32)]),_:1},8,["show","is-dirty"]))}},y0=Ze(_0,[["__scopeId","data-v-43ad537f"]]),b0={class:"form-group"},k0={key:0,class:"error"},w0=["disabled"],C0={__name:"UploadRouteModal",props:{show:{type:Boolean,default:!1},uploading:{type:Boolean,default:!1},error:{type:String,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=O(null);je(()=>i.show,h=>{h||(s.value=null)});const a=h=>{s.value=h.target.files[0],r("update:isDirty",!0)},l=()=>{s.value&&r("submit",s.value)},u=()=>{r("close")};return(h,p)=>(g(),nt(Ft,{show:e.show,title:"Upload GPX route",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:u},{actions:We(()=>[d("button",{type:"button",onClick:u,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:l,class:"btn btn-primary",disabled:e.uploading},T(e.uploading?"Uploading...":"Upload route"),9,w0)]),default:We(()=>[p[1]||(p[1]=d("p",{class:"instruction"},"Upload a GPX file to display the event route on the map",-1)),d("form",{onSubmit:Tt(l,["prevent"])},[d("div",b0,[p[0]||(p[0]=d("label",null,"GPX file",-1)),d("input",{type:"file",accept:".gpx",onChange:a,required:"",class:"form-input"},null,32)]),e.error?(g(),y("div",k0,T(e.error),1)):B("",!0)],32)]),_:1},8,["show","is-dirty"]))}},L0=Ze(C0,[["__scopeId","data-v-1c1d3033"]]),x0={class:"instruction"},A0={class:"form-group"},I0={class:"form-group"},T0={class:"checkbox-label"},E0={key:0,class:"error"},S0={key:1,class:"import-result"},M0={key:0,class:"import-errors"},P0=["disabled"],$0={__name:"ImportLocationsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O(null),u=O(!1);je(()=>s.show,b=>{b||(l.value=null,u.value=!1)});const h=b=>{l.value=b.target.files[0],a("update:isDirty",!0)},p=()=>{a("update:isDirty",!0)},f=()=>{l.value&&a("submit",{file:l.value,deleteExisting:u.value})},v=()=>{a("close")};return(b,C)=>(g(),nt(Ft,{show:e.show,title:`Import ${F(r).checkpoints} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:v},{actions:We(()=>[d("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:f,class:"btn btn-primary",disabled:e.importing},T(e.importing?"Importing...":`Import ${F(r).checkpoints}`),9,P0)]),default:We(()=>[d("p",x0,"Upload a CSV file with columns: Label, Lat/Latitude, Long/Longitude, What3Words (optional), "+T(F(i).people)+" (optional)",1),C[3]||(C[3]=d("div",{class:"csv-example"},[d("strong",null,"Example CSV format:"),d("pre",null,`Label,Latitude,Longitude,What3Words,Marshals
Checkpoint 1,51.505,-0.09,filled.count.soap,"John Doe, Jane Smith"
Checkpoint 2,51.510,-0.10,index.home.raft,Bob Wilson`)],-1)),d("form",{onSubmit:Tt(f,["prevent"])},[d("div",A0,[C[1]||(C[1]=d("label",null,"CSV file",-1)),d("input",{type:"file",accept:".csv",onChange:h,required:"",class:"form-input"},null,32)]),d("div",I0,[d("label",T0,[De(d("input",{type:"checkbox","onUpdate:modelValue":C[0]||(C[0]=S=>u.value=S),onChange:p},null,544),[[Wi,u.value]]),Ve(" Delete existing "+T(F(r).checkpoints)+" before import ",1)])]),e.error?(g(),y("div",E0,T(e.error),1)):B("",!0),e.result?(g(),y("div",S0,[d("p",null,"Created "+T(e.result.locationsCreated)+" "+T(F(r).checkpoints)+" and "+T(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(g(),y("div",M0,[C[2]||(C[2]=d("strong",null,"Errors:",-1)),d("ul",null,[(g(!0),y(ke,null,$e(e.result.errors,(S,$)=>(g(),y("li",{key:$},T(S),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},O0=Ze($0,[["__scopeId","data-v-e0a01848"]]),D0={class:"instruction"},R0={class:"form-group"},N0={key:0,class:"error"},B0={key:1,class:"import-result"},F0={key:0,class:"import-errors"},z0=["disabled"],U0={__name:"ImportMarshalsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O(null);je(()=>s.show,f=>{f||(l.value=null)});const u=f=>{l.value=f.target.files[0],a("update:isDirty",!0)},h=()=>{l.value&&a("submit",l.value)},p=()=>{a("close")};return(f,v)=>(g(),nt(Ft,{show:e.show,title:`Import ${F(r).people} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:p},{actions:We(()=>[d("button",{type:"button",onClick:p,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:h,class:"btn btn-primary",disabled:e.importing},T(e.importing?"Importing...":`Import ${F(r).people}`),9,z0)]),default:We(()=>[d("p",D0,"Upload a CSV file with columns: Name, Email (optional), Phone (optional), "+T(F(i).checkpoint)+" (optional)",1),v[2]||(v[2]=d("div",{class:"csv-example"},[d("strong",null,"Example CSV format:"),d("pre",null,`Name,Email,Phone,Checkpoint
John Doe,john@example.com,555-1234,Checkpoint 1
Jane Smith,jane@example.com,555-5678,Checkpoint 2`)],-1)),d("form",{onSubmit:Tt(h,["prevent"])},[d("div",R0,[v[0]||(v[0]=d("label",null,"CSV file",-1)),d("input",{type:"file",accept:".csv",onChange:u,required:"",class:"form-input"},null,32)]),e.error?(g(),y("div",N0,T(e.error),1)):B("",!0),e.result?(g(),y("div",B0,[d("p",null,"Imported "+T(e.result.marshalsCreated)+" "+T(F(r).people)+" and "+T(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(g(),y("div",F0,[v[1]||(v[1]=d("strong",null,"Errors:",-1)),d("ul",null,[(g(!0),y(ke,null,$e(e.result.errors,(b,C)=>(g(),y("li",{key:C},T(b),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},H0=Ze(U0,[["__scopeId","data-v-dcaed17c"]]),V0={key:0,class:"tabs"},Z0=["onClick"],q0=["innerHTML"],j0=["innerHTML"],W0={class:"current-tab-label"},G0={key:0,class:"hamburger-menu"},K0=["onClick"],Y0=["innerHTML"],J0=400,X0={__name:"TabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,r=n,s=O(null),a=O(null),l=O(!1),u=O(!1),h=ae(()=>{const $=i.tabs.find(R=>R.value===i.modelValue);return $?$.label:""}),p=ae(()=>i.tabs.find(R=>R.value===i.modelValue)?.icon||null),f=()=>{if(!s.value)return;const $=s.value.clientWidth,R=i.tabs.length*100;l.value=R>$||$<J0},v=()=>{u.value=!u.value},b=$=>{r("update:modelValue",$),u.value=!1},C=$=>{a.value&&!a.value.contains($.target)&&(u.value=!1)};let S=null;return kn(()=>{Yi(()=>{f(),s.value&&typeof ResizeObserver<"u"&&(S=new ResizeObserver(()=>{f()}),S.observe(s.value)),document.addEventListener("click",C)})}),As(()=>{S&&S.disconnect(),document.removeEventListener("click",C)}),je(()=>i.tabs,()=>{Yi(()=>{f()})},{deep:!0}),($,R)=>(g(),y("div",{class:"tabs-container",ref_key:"containerRef",ref:s},[l.value?(g(),y("div",{key:1,class:"hamburger-container",ref_key:"hamburgerRef",ref:a},[d("button",{class:"hamburger-button",onClick:v,type:"button","aria-label":"Tab menu"},[p.value?(g(),y("span",{key:0,class:"current-tab-icon",innerHTML:F(gn)(p.value)},null,8,j0)):B("",!0),d("span",W0,T(h.value),1),R[0]||(R[0]=d("span",{class:"hamburger-chevron"},"",-1))]),u.value?(g(),y("div",G0,[(g(!0),y(ke,null,$e(e.tabs,A=>(g(),y("button",{key:A.value,class:Fe(["menu-item",{active:e.modelValue===A.value}]),onClick:x=>b(A.value),type:"button"},[A.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:F(gn)(A.icon)},null,8,Y0)):B("",!0),Ve(" "+T(A.label),1)],10,K0))),128))])):B("",!0)],512)):(g(),y("div",V0,[(g(!0),y(ke,null,$e(e.tabs,A=>(g(),y("button",{key:A.value,class:Fe(["tab-button",{active:e.modelValue===A.value}]),onClick:x=>$.$emit("update:modelValue",A.value),type:"button"},[A.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:F(gn)(A.icon)},null,8,q0)):B("",!0),Ve(" "+T(A.label),1)],10,Z0))),128))]))],512))}},Zc=Ze(X0,[["__scopeId","data-v-5c12f1ab"]]),Q0={class:"tab-content"},ex={class:"form-group"},tx=["value"],nx={class:"form-group"},sx=["value"],ix={class:"form-group"},ox={class:"area-display"},ax={key:0,class:"no-area"},rx={class:"form-group"},lx={class:"checkbox-label"},cx=["checked"],ux={key:0,class:"custom-times-section"},dx={class:"form-group"},hx=["value"],fx={class:"form-group"},px=["value"],mx={__name:"LocationDetailsTab",props:{form:{type:Object,required:!0},areas:{type:Array,default:()=>[]},eventDate:{type:String,default:""}},emits:["update:form","input","save"],setup(e,{emit:n}){const i=e,r=n,s=ae(()=>(i.form.areaIds||i.form.AreaIds||[]).map(h=>i.areas.find(p=>p.id===h)).filter(h=>h!==void 0)),a=(u,h)=>{r("update:form",{...i.form,[u]:h}),r("input")},l=u=>{const h={...i.form,useCustomTimes:u};if(!u)h.startTime="",h.endTime="";else if(!h.startTime&&!h.endTime&&i.eventDate){const p=wr(i.eventDate);h.startTime=p,h.endTime=p}r("update:form",h),r("input")};return(u,h)=>(g(),y("div",Q0,[d("form",{onSubmit:h[5]||(h[5]=Tt(p=>u.$emit("save"),["prevent"]))},[d("div",ex,[h[6]||(h[6]=d("label",null,"Name",-1)),d("input",{value:e.form.name,onInput:h[0]||(h[0]=p=>a("name",p.target.value)),type:"text",required:"",class:"form-input"},null,40,tx)]),d("div",nx,[h[7]||(h[7]=d("label",null,"Description (optional)",-1)),d("input",{value:e.form.description,onInput:h[1]||(h[1]=p=>a("description",p.target.value)),type:"text",class:"form-input"},null,40,sx)]),d("div",ix,[h[8]||(h[8]=d("label",null,"Area (auto-assigned by location)",-1)),d("div",ox,[s.value.length===0?(g(),y("span",ax," Not in any area polygon ")):B("",!0),(g(!0),y(ke,null,$e(s.value,p=>(g(),y("span",{key:p.id,class:"area-badge",style:tn({backgroundColor:p.color||"#667eea"})},T(p.name),5))),128))]),h[9]||(h[9]=d("small",{class:"form-help"}," Areas are automatically assigned based on checkpoint location within area boundaries ",-1))]),d("div",rx,[d("label",lx,[d("input",{checked:e.form.useCustomTimes,onChange:h[2]||(h[2]=p=>l(p.target.checked)),type:"checkbox"},null,40,cx),h[10]||(h[10]=Ve(" Use custom date/time for this checkpoint ",-1))]),h[11]||(h[11]=d("small",{class:"form-help"}," By default, marshals are expected during the event date/time. Enable this to set a specific time range. ",-1))]),e.form.useCustomTimes?(g(),y("div",ux,[d("div",dx,[h[12]||(h[12]=d("label",null,"Start Date & Time (optional)",-1)),d("input",{value:e.form.startTime,onInput:h[3]||(h[3]=p=>a("startTime",p.target.value)),type:"datetime-local",class:"form-input"},null,40,hx),h[13]||(h[13]=d("small",{class:"form-help"}," When marshal should arrive at this checkpoint ",-1))]),d("div",fx,[h[14]||(h[14]=d("label",null,"End Date & Time (optional)",-1)),d("input",{value:e.form.endTime,onInput:h[4]||(h[4]=p=>a("endTime",p.target.value)),type:"datetime-local",class:"form-input"},null,40,px),h[15]||(h[15]=d("small",{class:"form-help"}," When marshal can leave this checkpoint ",-1))])])):B("",!0)],32)]))}},vx=Ze(mx,[["__scopeId","data-v-60977929"]]),gx={class:"tab-content"},_x={class:"form-group"},yx=["value"],bx={key:0,class:"form-error"},kx={class:"form-row"},wx={class:"form-group"},Cx=["value","disabled"],Lx={class:"form-group"},xx=["value","disabled"],Ax={class:"form-group"},Ix={__name:"LocationCoordinatesTab",props:{form:{type:Object,required:!0},isMoving:{type:Boolean,default:!1}},emits:["update:form","input","save","move-location"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=p=>p==null||p===""?"":Number(p).toFixed(6),l=(p,f)=>{s("update:form",{...r.form,[p]:f}),s("input")},u=(p,f)=>{s("update:form",{...r.form,[p]:Number(f)}),s("input")},h=p=>{if(!p)return!0;const f=p.includes(".")?p.split("."):p.split("/");if(f.length!==3)return!1;const v=/^[a-z]{1,20}$/;return f.every(b=>v.test(b))};return(p,f)=>(g(),y("div",gx,[d("form",{onSubmit:f[4]||(f[4]=Tt(v=>p.$emit("save"),["prevent"]))},[d("div",_x,[f[5]||(f[5]=d("label",null,"What3Words (optional)",-1)),d("input",{value:e.form.what3Words,onInput:f[0]||(f[0]=v=>l("what3Words",v.target.value)),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap"},null,40,yx),e.form.what3Words&&!h(e.form.what3Words)?(g(),y("small",bx," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),d("div",kx,[d("div",wx,[f[6]||(f[6]=d("label",null,"Longitude",-1)),d("input",{value:a(e.form.longitude),onInput:f[1]||(f[1]=v=>u("longitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., -0.091234"},null,40,Cx)]),d("div",Lx,[f[7]||(f[7]=d("label",null,"Latitude",-1)),d("input",{value:a(e.form.latitude),onInput:f[2]||(f[2]=v=>u("latitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., 51.505123"},null,40,xx)])]),d("div",Ax,[d("button",{type:"button",onClick:f[3]||(f[3]=v=>p.$emit("move-location")),class:Fe(["btn btn-secondary btn-with-icon",{"btn-primary":e.isMoving}])},[f[8]||(f[8]=d("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),Ve(" "+T(e.isMoving?"Click on map to set new location...":`Move ${F(i).checkpoint}...`),1)],2)])],32)]))}},Tx=Ze(Ix,[["__scopeId","data-v-86bee5e5"]]);function lp(e){const n=O(new Map),i=f=>n.value.has(f.id)?n.value.get(f.id):f.isCheckedIn;return{pendingCheckInChanges:n,getEffectiveCheckInStatus:i,handleToggleCheckIn:f=>{const b=!i(f);b===f.isCheckedIn?n.value.delete(f.id):n.value.set(f.id,b),e&&e()},getStatusIcon:f=>i(f)?"":"",getStatusColor:f=>i(f)?"#28a745":"#dc3545",getStatusText:f=>i(f)?"Checked in":"Not checked in",formatTime:f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",clearPendingChanges:()=>{n.value.clear()},getPendingChanges:()=>Array.from(n.value.entries()).map(([f,v])=>({assignmentId:f,shouldBeCheckedIn:v}))}}const Ex={class:"tab-content"},Sx={class:"form-group"},Mx=["value"],Px={class:"section-title"},$x={class:"assignments-list"},Ox={class:"assignment-info"},Dx={class:"assignment-header"},Rx=["title"],Nx={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},Bx={key:2,class:"pending-badge"},Fx={key:3,class:"pending-badge"},zx={key:0,class:"check-in-info"},Ux={class:"check-in-method"},Hx={class:"assignment-actions"},Vx=["onClick"],Zx=["onClick"],qx={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},jx={value:""},Wx=["value"],Gx={__name:"LocationAssignmentsTab",props:{form:{type:Object,required:!0},assignments:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]}},emits:["update:form","input","remove-assignment","assign-marshal"],setup(e,{expose:n,emit:i}){const{termsLower:r}=ht(),s=e,a=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:u,handleToggleCheckIn:h,getStatusIcon:p,getStatusColor:f,getStatusText:v,formatTime:b}=lp(()=>a("input")),C=O(""),S=ae(()=>s.assignments?.length||0),$=ae(()=>s.assignments?[...s.assignments].sort((w,M)=>{const k=w.marshalName?.toLowerCase()||"",I=M.marshalName?.toLowerCase()||"";return k.localeCompare(I)}):[]),R=ae(()=>{const w=[...s.availableMarshals];return w.sort((M,k)=>(M.name||"").localeCompare(k.name||"",void 0,{numeric:!0,sensitivity:"base"})),w}),A=()=>{C.value&&(a("assign-marshal",C.value),C.value="")},x=(w,M)=>{a("update:form",{...s.form,[w]:Number(M)}),a("input")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),C.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([w,M])=>({assignmentId:w,shouldBeCheckedIn:M}))}),(w,M)=>(g(),y("div",Ex,[d("div",Sx,[d("label",null,"Required "+T(F(r).people),1),d("input",{value:e.form.requiredMarshals,onInput:M[0]||(M[0]=k=>x("requiredMarshals",k.target.value)),type:"number",min:"1",required:"",class:"form-input"},null,40,Mx)]),d("h3",Px,"Assigned "+T(F(r).people)+" ("+T(S.value)+")",1),d("div",$x,[(g(!0),y(ke,null,$e($.value,k=>(g(),y("div",{key:k.id,class:Fe(["assignment-item",{"checked-in":!k.isPending&&F(u)(k),"is-pending":k.isPending}])},[d("div",Ox,[d("div",Dx,[k.isPending?(g(),y("span",Nx,"  ")):(g(),y("span",{key:0,class:"status-indicator",style:tn({color:F(f)(k)}),title:F(v)(k)},T(F(p)(k)),13,Rx)),d("strong",null,T(k.marshalName),1),k.isPending?(g(),y("span",Bx," (will be assigned on save) ")):F(l).has(k.id)?(g(),y("span",Fx," (unsaved) ")):B("",!0)]),!k.isPending&&F(u)(k)?(g(),y("span",zx,[k.isCheckedIn&&!F(l).has(k.id)?(g(),y(ke,{key:0},[Ve(T(F(b)(k.checkInTime))+" ",1),d("span",Ux,"("+T(k.checkInMethod)+")",1)],64)):(g(),y(ke,{key:1},[Ve(" Will be checked in on save ")],64))])):B("",!0)]),d("div",Hx,[k.isPending?B("",!0):(g(),y("button",{key:0,onClick:I=>F(h)(k),class:Fe(["btn btn-small",F(u)(k)?"btn-danger":"btn-secondary"])},T(F(u)(k)?"Undo":"Check in"),11,Vx)),d("button",{onClick:I=>w.$emit("remove-assignment",k),class:"btn btn-small btn-danger"}," Remove ",8,Zx)])],2))),128)),R.value.length>0?(g(),y("div",qx,[d("label",null,"Assign "+T(F(r).person),1),De(d("select",{"onUpdate:modelValue":M[1]||(M[1]=k=>C.value=k),class:"form-input",onChange:A},[d("option",jx,"Select a "+T(F(r).person)+"...",1),(g(!0),y(ke,null,$e(R.value,k=>(g(),y("option",{key:k.id,value:k.id},T(k.name),9,Wx))),128))],544),[[_n,C.value]])])):B("",!0)])]))}},Kx=Ze(Gx,[["__scopeId","data-v-2c486110"]]),Yx={class:"checkpoint-checklist-view"},Jx={key:0,class:"loading-state"},Xx={key:1,class:"error-state"},Qx={key:2,class:"empty-state"},eA={key:3,class:"empty-state"},tA={key:4,class:"checklist-items"},nA={class:"item-checkbox"},sA=["checked","disabled","onChange"],iA={class:"item-content"},oA={class:"item-header"},aA={class:"item-text-wrapper"},rA={class:"item-text"},lA={key:0,class:"item-context"},cA={class:"item-scope"},uA=["title"],dA={key:0,class:"completion-info"},hA={key:0,class:"pending-text"},fA={class:"completion-text"},pA={class:"completion-time"},mA={key:1,class:"uncomplete-info"},vA={key:2,class:"disabled-reason"},gA={__name:"CheckpointChecklistView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const{terms:r,termsLower:s}=ht(),a=e,l=i,u=O([]),h=O(!1),p=O(null),f=O(new Map),v=ae(()=>a.assignments.length===0),b=ae(()=>u.value.map(k=>{const I=f.value.get(`${k.itemId}|||${k.completionContextId}`),E=I!==void 0?I.complete:k.isCompleted,q=I!==void 0&&I.complete!==k.isCompleted;return{...k,localIsCompleted:E,isModified:q}})),C=async()=>{if(!(!a.eventId||!a.locationId&&!a.areaId)){h.value=!0,p.value=null;try{const k=a.locationId?await It.getCheckpointChecklist(a.eventId,a.locationId):await It.getAreaChecklist(a.eventId,a.areaId);if(u.value=k.data||[],a.modelValue&&a.modelValue.length>0){const I=new Map;a.modelValue.forEach(E=>{I.set(`${E.itemId}|||${E.contextId}`,{complete:E.complete,contextType:E.contextType,contextId:E.contextId})}),f.value=I}}catch(k){console.error("Failed to load checklist:",k),p.value=k.response?.data?.message||"Failed to load checklist"}finally{h.value=!1}}},S=k=>{const I=k.contextOwnerMarshalId||(a.assignments.length>0?a.assignments[0].marshalId:null);if(!I)return;const E=`${k.itemId}|||${k.completionContextId}`,q=f.value.get(E),U=q!==void 0?q.complete:k.isCompleted;f.value.set(E,{complete:!U,contextType:k.completionContextType,contextId:k.completionContextId,marshalId:I}),$()},$=()=>{const k=[];for(const[I,E]of f.value.entries()){const[q,U]=I.split("|||"),Q=u.value.find(ce=>ce.itemId===q&&ce.completionContextId===U);Q&&E.complete!==Q.isCompleted&&k.push({itemId:q,complete:E.complete,contextType:E.contextType,contextId:E.contextId,marshalId:E.marshalId})}l("update:modelValue",k),l("change",k)};n({resetLocalState:()=>{if(f.value=new Map,a.modelValue&&a.modelValue.length>0){const k=new Map;a.modelValue.forEach(I=>{k.set(`${I.itemId}|||${I.contextId}`,{complete:I.complete,contextType:I.contextType,contextId:I.contextId,marshalId:I.marshalId})}),f.value=k}},loadChecklist:C});const A=k=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:`Your ${s.value.areas}`,EveryoneAtCheckpoints:`Your ${s.value.checkpoints}`,OnePerCheckpoint:`One per ${s.value.checkpoint}`,OnePerArea:`One per ${s.value.area}`,EveryAreaLead:`${r.value.area} lead`,OneLeadPerArea:`One lead per ${s.value.area}`})[k.matchedScope]||k.matchedScope,x=k=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to certain people",EveryoneInAreas:`This item is for everyone in certain ${s.value.areas}`,EveryoneAtCheckpoints:`This item is for everyone at certain ${s.value.checkpoints}`,OnePerCheckpoint:`One person at the ${s.value.checkpoint} needs to complete this`,OnePerArea:`One person in the ${s.value.area} needs to complete this`,EveryAreaLead:`This item is for ${s.value.area} leads only`,OneLeadPerArea:`One ${s.value.area} lead needs to complete this`})[k.matchedScope]||"",w=k=>{if(!k.completionContextType||!k.completionContextId)return null;if(k.completionContextType==="Checkpoint"){const I=a.locations.find(q=>q.id===k.completionContextId);if(!I)return null;const E=I.description?`${I.name} - ${I.description}`:I.name;return`at ${s.value.checkpoint} ${E}`}if(k.completionContextType==="Area"){const I=a.areas.find(E=>E.id===k.completionContextId);return I?`in ${s.value.area} ${I.name}`:null}return k.completionContextType==="Personal"?k.contextOwnerName?`for ${k.contextOwnerName}`:"assigned individually":null},M=k=>k?new Date(k).toLocaleString():"";return je(()=>[a.eventId,a.locationId,a.areaId],()=>{C()},{immediate:!0}),(k,I)=>(g(),y("div",Yx,[h.value?(g(),y("div",Jx," Loading checklist... ")):p.value?(g(),y("div",Xx,[d("p",null,T(p.value),1),d("button",{onClick:C,class:"btn btn-secondary btn-small"}," Retry ")])):v.value?(g(),y("div",Qx,[...I[0]||(I[0]=[d("p",null,"No marshals assigned to this checkpoint yet.",-1),d("p",{class:"help-text"},"Assign marshals to enable checklist completion.",-1)])])):u.value.length===0?(g(),y("div",eA,[...I[1]||(I[1]=[d("p",null,"No checklist items for this checkpoint.",-1)])])):(g(),y("div",tA,[(g(!0),y(ke,null,$e(b.value,E=>(g(),y("div",{key:`${E.itemId}-${E.completionContextId}`,class:Fe(["checklist-item",{"item-completed":E.localIsCompleted,"item-modified":E.isModified}])},[d("div",nA,[d("input",{type:"checkbox",checked:E.localIsCompleted,disabled:!E.canBeCompletedByMe&&!E.localIsCompleted,onChange:q=>S(E)},null,40,sA)]),d("div",iA,[d("div",oA,[d("div",aA,[d("div",rA,T(E.text),1),w(E)?(g(),y("div",lA,T(w(E)),1)):B("",!0)]),d("div",cA,[d("span",{class:"scope-pill",title:x(E)},T(A(E)),9,uA)])]),E.localIsCompleted?(g(),y("div",dA,[E.isModified&&!E.isCompleted?(g(),y("span",hA," Will be marked as completed (pending save) ")):(g(),y(ke,{key:1},[d("span",fA," Completed by "+T(E.completedByActorName||"Unknown"),1),d("span",pA,T(M(E.completedAt)),1)],64))])):B("",!0),E.isModified&&E.isCompleted&&!E.localIsCompleted?(g(),y("div",mA,[...I[2]||(I[2]=[d("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!E.canBeCompletedByMe&&!E.localIsCompleted?(g(),y("div",vA," Already completed by someone else ")):B("",!0)])],2))),128))]))]))}},cp=Ze(gA,[["__scopeId","data-v-9dc97489"]]),_A={class:"notes-view"},yA={key:0,class:"loading-state"},bA={key:1,class:"error-state"},kA={key:2,class:"empty-state"},wA={key:3,class:"notes-list"},CA={class:"note-header"},LA={class:"note-title-row"},xA={key:0,class:"pin-icon",title:"Pinned"},AA={class:"note-title"},IA={class:"note-meta"},TA={key:0,class:"category-badge"},EA={key:0,class:"note-content"},SA={class:"note-footer"},MA={class:"created-info"},PA={key:0,class:"scope-info"},$A={__name:"NotesView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},marshalId:{type:String,default:null},allNotes:{type:Array,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},showScope:{type:Boolean,default:!0}},setup(e,{expose:n}){const i=e,r=O([]),s=O(!1),a=O(null),l=ae(()=>i.marshalId?"No notes for this marshal.":i.areaId?"No notes for this area.":i.locationId?"No notes for this checkpoint.":"No notes available."),u=ae(()=>i.areaId?i.locations.filter(A=>A.areaIds&&A.areaIds.includes(i.areaId)):[]),h=ae(()=>u.value.map(A=>A.id)),p=ae(()=>{if(!i.areaId)return[];const A=new Set;return i.assignments.filter(x=>h.value.includes(x.locationId)).forEach(x=>A.add(x.marshalId)),Array.from(A)}),f=A=>i.assignments.filter(x=>x.marshalId===A).map(x=>x.locationId),v=A=>{const x=f(A),w=new Set;for(const M of x){const k=i.locations.find(I=>I.id===M);k?.areaIds&&k.areaIds.forEach(I=>w.add(I))}return Array.from(w)},b=(A,x)=>{if(!A.scopeConfigurations)return null;for(const w of A.scopeConfigurations){if(w.itemType==="Area"){if(x.type==="area"&&(w.ids.includes(x.areaId)||w.ids.includes("ALL_AREAS")))return{matched:!0,scope:w.scope==="EveryAreaLead"?"Area leads":"Area"};if(x.type==="checkpoint"){const k=i.locations.find(I=>I.id===x.locationId)?.areaIds||[];if(w.ids.includes("ALL_AREAS")||k.some(I=>w.ids.includes(I)))return{matched:!0,scope:w.scope==="EveryAreaLead"?"Area leads":"Area"}}}if(w.itemType==="Checkpoint"){if(x.type==="checkpoint"&&(w.ids.includes(x.locationId)||w.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint"};if(x.type==="area"&&x.checkpointIds.some(k=>w.ids.includes(k)||w.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint in area"}}if(w.itemType==="Marshal"){if(x.type==="marshal"&&(w.ids.includes(x.marshalId)||w.ids.includes("ALL_MARSHALS")))return{matched:!0,scope:"Marshal"};if(x.type==="checkpoint"){const M=i.assignments.filter(I=>I.locationId===x.locationId).map(I=>I.marshalId);if(w.ids.includes("ALL_MARSHALS")||M.some(I=>w.ids.includes(I)))return{matched:!0,scope:"Marshal at checkpoint"}}if(x.type==="area"&&(w.ids.includes("ALL_MARSHALS")||x.marshalIds.some(k=>w.ids.includes(k))))return{matched:!0,scope:"Marshal in area"}}if(x.type==="marshal"&&x.checkpointIds&&x.areaIds){if(w.itemType==="Checkpoint"&&(w.ids.includes("ALL_CHECKPOINTS")||x.checkpointIds.some(k=>w.ids.includes(k))))return{matched:!0,scope:"Assigned checkpoint"};if(w.itemType==="Area"&&(w.ids.includes("ALL_AREAS")||x.areaIds.some(k=>w.ids.includes(k))))return{matched:!0,scope:w.scope==="EveryAreaLead"?"Area lead":"Area"}}}return null},C=ae(()=>{let A=i.allNotes||r.value;if(!A||A.length===0)return[];if(i.areaId&&i.allNotes){const x={type:"area",areaId:i.areaId,checkpointIds:h.value,marshalIds:p.value},w=[],M=new Set;for(const k of A){if(M.has(k.noteId))continue;const I=b(k,x);I&&(M.add(k.noteId),w.push({...k,matchedScope:I.scope}))}return w}if(i.locationId&&i.allNotes){const x={type:"checkpoint",locationId:i.locationId},w=[],M=new Set;for(const k of A){if(M.has(k.noteId))continue;const I=b(k,x);I&&(M.add(k.noteId),w.push({...k,matchedScope:I.scope}))}return w}if(i.marshalId&&i.allNotes){const x=f(i.marshalId),w=v(i.marshalId),M={type:"marshal",marshalId:i.marshalId,checkpointIds:x,areaIds:w},k=[],I=new Set;for(const E of A){if(I.has(E.noteId))continue;const q=b(E,M);q&&(I.add(E.noteId),k.push({...E,matchedScope:q.scope}))}return k}return A}),S=ae(()=>{const A={Urgent:0,High:1,Normal:2,Low:3};return[...C.value].sort((x,w)=>{if(x.isPinned!==w.isPinned)return x.isPinned?-1:1;const M=A[x.priority]??2,k=A[w.priority]??2;return M!==k?M-k:x.displayOrder!==w.displayOrder?x.displayOrder-w.displayOrder:new Date(w.createdAt)-new Date(x.createdAt)})}),$=async()=>{if(i.allNotes===null&&i.eventId){s.value=!0,a.value=null;try{let A;i.marshalId?A=await vs.getMarshalNotes(i.eventId,i.marshalId):A=await vs.getByEvent(i.eventId),r.value=A.data||[]}catch(A){console.error("Failed to load notes:",A),a.value=A.response?.data?.message||"Failed to load notes"}finally{s.value=!1}}};je(()=>[i.eventId,i.locationId,i.areaId,i.marshalId],()=>{i.allNotes===null&&$()},{immediate:!0});const R=A=>{if(!A)return"";const x=new Date(A),M=new Date-x,k=Math.floor(M/6e4),I=Math.floor(M/36e5),E=Math.floor(M/864e5);return k<1?"just now":k<60?`${k}m ago`:I<24?`${I}h ago`:E<7?`${E}d ago`:x.toLocaleDateString()};return n({loadNotes:$}),(A,x)=>(g(),y("div",_A,[s.value?(g(),y("div",yA," Loading notes... ")):a.value?(g(),y("div",bA,[d("p",null,T(a.value),1),d("button",{onClick:$,class:"btn btn-secondary btn-small"}," Retry ")])):C.value.length===0?(g(),y("div",kA,[d("p",null,T(l.value),1)])):(g(),y("div",wA,[(g(!0),y(ke,null,$e(S.value,w=>(g(),y("div",{key:w.noteId,class:Fe(["note-item",{pinned:w.isPinned}])},[d("div",CA,[d("div",LA,[w.isPinned?(g(),y("span",xA,"")):B("",!0),d("span",{class:Fe(["priority-indicator",(w.priority||"Normal").toLowerCase()])},null,2),d("strong",AA,T(w.title),1)]),d("div",IA,[w.category?(g(),y("span",TA,T(w.category),1)):B("",!0),d("span",{class:Fe(["priority-badge",(w.priority||"Normal").toLowerCase()])},T(w.priority||"Normal"),3)])]),w.content?(g(),y("div",EA,T(w.content),1)):B("",!0),d("div",SA,[d("span",MA," Created by "+T(w.createdByName||"Unknown")+"  "+T(R(w.createdAt)),1),w.matchedScope&&e.showScope?(g(),y("span",PA,T(w.matchedScope),1)):B("",!0)])],2))),128))]))]))}},Yr=Ze($A,[["__scopeId","data-v-bd15ca42"]]),OA={class:"checklist-preview"},DA={class:"preview-actions"},RA={class:"preview-header"},NA={key:0,class:"add-item-form"},BA=["placeholder"],FA=["disabled"],zA={key:1,class:"pending-items"},UA={class:"item-content"},HA={class:"item-header"},VA={class:"item-text"},ZA={class:"item-scope"},qA=["onClick"],jA={key:2,class:"empty-state"},WA={key:0,class:"help-text"},GA={key:3,class:"checklist-items"},KA={class:"item-content"},YA={class:"item-header"},JA={class:"item-text"},XA={class:"item-scope"},QA=["title"],eI={key:0,class:"item-context"},tI={__name:"ChecklistPreviewForLocation",props:{allChecklistItems:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=O(!1),l=O(""),u=O([...r.modelValue]);je(()=>r.modelValue,A=>{u.value=[...A]},{deep:!0});const h=()=>{l.value.trim()&&(u.value.push({text:l.value.trim(),isNew:!0}),l.value="",a.value=!1,f())},p=A=>{u.value.splice(A,1),f()},f=()=>{s("update:modelValue",[...u.value]),s("change")},v=A=>{const x=A.scope,w=A.itemType,M=A.ids||[];return(x==="EveryoneAtCheckpoints"||x==="OnePerCheckpoint")&&w==="Checkpoint"?M.includes("ALL_CHECKPOINTS"):x==="OnePerCheckpoint"&&w==="Area"?M.includes("ALL_AREAS")?!0:M.some(k=>r.pendingAreaIds.includes(k)):(x==="EveryoneInAreas"||x==="OnePerArea"||x==="EveryAreaLead"||x==="OneLeadPerArea")&&w==="Area"?M.includes("ALL_AREAS")?!0:M.some(k=>r.pendingAreaIds.includes(k)):!1},b=ae(()=>r.allChecklistItems.filter(A=>A.scopeConfigurations&&A.scopeConfigurations.length>0?A.scopeConfigurations.some(x=>v(x)):!1)),C=A=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[A]||A,S=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"Unknown";const x=A.scopeConfigurations.find(M=>v(M));if(!x)return C(A.scopeConfigurations[0].scope);const w=x.ids||[];return w.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:w.includes("ALL_AREAS")?`All ${i.value.areas}`:C(x.scope)},$=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"";const x=A.scopeConfigurations.find(M=>v(M));return x&&{EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[x.scope]||""},R=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return null;const x=A.scopeConfigurations.find(k=>v(k));if(!x)return null;const w=x.itemType,M=x.ids||[];if(M.includes("ALL_CHECKPOINTS")||M.includes("ALL_AREAS"))return null;if(w==="Area"){const k=r.areas.filter(I=>M.includes(I.id)&&r.pendingAreaIds.includes(I.id)).map(I=>I.name);if(k.length>0)return`In: ${k.join(", ")}`}return null};return(A,x)=>(g(),y("div",OA,[d("div",DA,[d("p",RA,T(e.isEditing?`Add new ${F(i).checklist} for this ${F(i).checkpoint}:`:`${F(i).checklists} that will apply at this ${F(i).checkpoint}:`),1),d("button",{type:"button",class:"add-item-btn",onClick:x[0]||(x[0]=w=>a.value=!a.value)},T(a.value?"Cancel":`+ Add ${F(i).checklist}`),1)]),a.value?(g(),y("div",NA,[De(d("input",{"onUpdate:modelValue":x[1]||(x[1]=w=>l.value=w),type:"text",placeholder:`Enter ${F(i).checklist} text...`,class:"add-item-input",onKeyup:mf(h,["enter"])},null,40,BA),[[it,l.value]]),d("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,FA)])):B("",!0),u.value.length>0?(g(),y("div",zA,[(g(!0),y(ke,null,$e(u.value,(w,M)=>(g(),y("div",{key:`pending-${M}`,class:"checklist-item pending"},[x[3]||(x[3]=d("div",{class:"item-checkbox"},[d("input",{type:"checkbox",checked:!1,disabled:""})],-1)),d("div",UA,[d("div",HA,[d("div",VA,T(w.text),1),d("div",ZA,[x[2]||(x[2]=d("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),d("button",{type:"button",class:"remove-item-btn",onClick:k=>p(M),title:"Remove"},"  ",8,qA)])])])]))),128))])):B("",!0),!e.isEditing&&b.value.length===0&&u.value.length===0?(g(),y("div",jA,[d("p",null,"No "+T(F(i).checklists)+" will apply based on the current "+T(F(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(g(),y("p",WA," Assign "+T(F(i).areas)+" to see relevant "+T(F(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&b.value.length>0?(g(),y("div",GA,[(g(!0),y(ke,null,$e(b.value,w=>(g(),y("div",{key:w.id,class:"checklist-item"},[x[4]||(x[4]=d("div",{class:"item-checkbox"},[d("input",{type:"checkbox",checked:!1,disabled:""})],-1)),d("div",KA,[d("div",YA,[d("div",JA,T(w.text),1),d("div",XA,[d("span",{class:"scope-pill",title:$(w)},T(S(w)),9,QA)])]),R(w)?(g(),y("div",eI,T(R(w)),1)):B("",!0)])]))),128))])):B("",!0)]))}},nI=Ze(tI,[["__scopeId","data-v-b2164204"]]),sI={class:"notes-preview"},iI={class:"preview-actions"},oI={class:"preview-header"},aI={key:0,class:"add-item-form"},rI={class:"add-form-fields"},lI=["disabled"],cI={key:1,class:"pending-items"},uI={class:"note-header"},dI={class:"note-title"},hI={class:"note-actions"},fI=["onClick"],pI={key:0,class:"note-content"},mI={key:2,class:"empty-state"},vI={key:0,class:"help-text"},gI={key:3,class:"notes-list"},_I={class:"note-header"},yI={class:"note-title"},bI=["title"],kI={key:0,class:"note-content"},wI={key:1,class:"note-context"},CI={__name:"NotesPreviewForLocation",props:{allNotes:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=O(!1),l=O(""),u=O(""),h=O([...r.modelValue]);je(()=>r.modelValue,x=>{h.value=[...x]},{deep:!0});const p=()=>{!l.value.trim()&&!u.value.trim()||(h.value.push({title:l.value.trim(),content:u.value.trim(),isNew:!0}),l.value="",u.value="",a.value=!1,v())},f=x=>{h.value.splice(x,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},b=x=>{const w=x.scope,M=x.itemType,k=x.ids||[];return w==="EveryoneAtCheckpoints"&&M==="Checkpoint"?k.includes("ALL_CHECKPOINTS"):w==="EveryoneInAreas"&&M==="Area"?k.includes("ALL_AREAS")?!0:k.some(I=>r.pendingAreaIds.includes(I)):!1},C=ae(()=>r.allNotes.filter(x=>x.scopeConfigurations&&x.scopeConfigurations.length>0?x.scopeConfigurations.some(w=>b(w)):!1)),S=x=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[x]||x,$=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"Unknown";const w=x.scopeConfigurations.find(k=>b(k));if(!w)return S(x.scopeConfigurations[0].scope);const M=w.ids||[];return M.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:M.includes("ALL_AREAS")?`All ${i.value.areas}`:S(w.scope)},R=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"";const w=x.scopeConfigurations.find(k=>b(k));return w&&{EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[w.scope]||""},A=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return null;const w=x.scopeConfigurations.find(I=>b(I));if(!w)return null;const M=w.itemType,k=w.ids||[];if(k.includes("ALL_CHECKPOINTS")||k.includes("ALL_AREAS"))return null;if(M==="Area"){const I=r.areas.filter(E=>k.includes(E.id)&&r.pendingAreaIds.includes(E.id)).map(E=>E.name);if(I.length>0)return`In: ${I.join(", ")}`}return null};return(x,w)=>(g(),y("div",sI,[d("div",iI,[d("p",oI,T(e.isEditing?`Add new note for this ${F(i).checkpoint}:`:`Notes that will be visible at this ${F(i).checkpoint}:`),1),d("button",{type:"button",class:"add-item-btn",onClick:w[0]||(w[0]=M=>a.value=!a.value)},T(a.value?"Cancel":"+ Add note"),1)]),a.value?(g(),y("div",aI,[d("div",rI,[De(d("input",{"onUpdate:modelValue":w[1]||(w[1]=M=>l.value=M),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[it,l.value]]),De(d("textarea",{"onUpdate:modelValue":w[2]||(w[2]=M=>u.value=M),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[it,u.value]])]),d("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!u.value.trim(),onClick:p}," Add ",8,lI)])):B("",!0),h.value.length>0?(g(),y("div",cI,[(g(!0),y(ke,null,$e(h.value,(M,k)=>(g(),y("div",{key:`pending-${k}`,class:"note-item pending"},[d("div",uI,[d("span",dI,T(M.title||"Untitled"),1),d("div",hI,[w[3]||(w[3]=d("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),d("button",{type:"button",class:"remove-item-btn",onClick:I=>f(k),title:"Remove"},"  ",8,fI)])]),M.content?(g(),y("div",pI,T(M.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&C.value.length===0&&h.value.length===0?(g(),y("div",mI,[d("p",null,"No notes will apply based on the current "+T(F(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(g(),y("p",vI," Assign "+T(F(i).areas)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&C.value.length>0?(g(),y("div",gI,[(g(!0),y(ke,null,$e(C.value,M=>(g(),y("div",{key:M.id,class:"note-item"},[d("div",_I,[d("span",yI,T(M.title||"Untitled"),1),d("span",{class:"scope-pill",title:R(M)},T($(M)),9,bI)]),M.content?(g(),y("div",kI,T(M.content),1)):B("",!0),A(M)?(g(),y("div",wI,T(A(M)),1)):B("",!0)]))),128))])):B("",!0)]))}},LI=Ze(CI,[["__scopeId","data-v-30a436c2"]]),xI={class:"custom-footer"},AI={key:1},II={__name:"EditLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:null},assignments:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventDate:{type:String,default:""},areas:{type:Array,default:()=>[]},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","move-location","toggle-check-in","remove-assignment","assign-marshal","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O("details"),u=O(!1),h=O(null),p=O(null),f=O([]),v=O([]),b=O([]),C=O({name:"",description:"",what3Words:"",latitude:0,longitude:0,requiredMarshals:1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:[]}),S=ae(()=>s.location&&s.location.id),$=ae(()=>S.value?`Edit ${r.value.checkpoint}: ${s.location?.name||""}`:`Add ${r.value.checkpoint}`),R=ae(()=>[{value:"details",label:"Details",icon:"details"},{value:"location",label:"Location",icon:"location"},{value:"marshals",label:i.value.people,icon:"marshal"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),A=ae(()=>R.value.findIndex(Z=>Z.value===l.value)),x=ae(()=>A.value===R.value.length-1),w=ae(()=>x.value?null:R.value[A.value+1]),M=ae(()=>x.value?`Create ${r.value.checkpoint}`:`Add ${w.value.label.toLowerCase()}...`);je(()=>s.location,Z=>{if(Z){let W="",Y="";Z.startTime&&(W=wr(Z.startTime)),Z.endTime&&(Y=wr(Z.endTime)),C.value={name:Z.name||"",description:Z.description||"",what3Words:Z.what3Words||"",latitude:Z.latitude||0,longitude:Z.longitude||0,requiredMarshals:Z.requiredMarshals||1,useCustomTimes:!!(Z.startTime||Z.endTime),startTime:W,endTime:Y,areaIds:Z.areaIds||Z.AreaIds||[]}}},{immediate:!0,deep:!0}),je(()=>s.show,Z=>{Z&&(l.value="details",u.value=!1,f.value=[],v.value=[],b.value=[],S.value||(C.value={name:s.location?.name||"",description:s.location?.description||"",what3Words:s.location?.what3Words||"",latitude:s.location?.latitude||0,longitude:s.location?.longitude||0,requiredMarshals:s.location?.requiredMarshals||1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:s.location?.areaIds||[]}),h.value?.clearPendingChanges&&h.value.clearPendingChanges(),p.value?.resetLocalState&&p.value.resetLocalState())});const k=()=>{a("update:isDirty",!0)},I=()=>{u.value=!u.value,a("move-location",{isMoving:u.value,formData:{...C.value}})},E=Z=>{f.value=Z,k()},q=()=>{S.value||x.value?U():l.value=w.value.value},U=()=>{const Z={...C.value,startTime:C.value.useCustomTimes&&C.value.startTime?new Date(C.value.startTime).toISOString():null,endTime:C.value.useCustomTimes&&C.value.endTime?new Date(C.value.endTime).toISOString():null,checkInChanges:h.value?.getPendingChanges?.()||[],checklistChanges:f.value||[],pendingAssignments:s.assignments.filter(W=>W.isPending).map(W=>({marshalId:W.marshalId})),pendingNewChecklistItems:v.value,pendingNewNotes:b.value};a("save",Z)},Q=()=>{s.location&&s.location.id&&a("delete",s.location.id)},ce=Z=>{a("remove-assignment",Z)},re=Z=>{a("assign-marshal",Z)},Le=()=>{a("close")};return(Z,W)=>(g(),nt(Ft,{show:e.show,title:$.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Le},{"tab-header":We(()=>[Oe(Zc,{modelValue:l.value,"onUpdate:modelValue":W[0]||(W[0]=Y=>l.value=Y),tabs:R.value},null,8,["modelValue","tabs"])]),footer:We(()=>[d("div",xI,[S.value?(g(),y("button",{key:0,type:"button",onClick:Q,class:"btn btn-danger"}," Delete "+T(F(r).checkpoint),1)):(g(),y("div",AI)),d("button",{type:"button",onClick:q,class:"btn btn-primary"},T(S.value?"Save changes":M.value),1)])]),default:We(()=>[l.value==="details"?(g(),nt(vx,{key:0,form:C.value,areas:e.areas,"event-date":e.eventDate,"onUpdate:form":W[1]||(W[1]=Y=>C.value=Y),onInput:k,onSave:U},null,8,["form","areas","event-date"])):B("",!0),l.value==="location"?(g(),nt(Tx,{key:1,form:C.value,"is-moving":u.value,"onUpdate:form":W[2]||(W[2]=Y=>C.value=Y),onInput:k,onSave:U,onMoveLocation:I},null,8,["form","is-moving"])):B("",!0),l.value==="marshals"?(g(),nt(Kx,{key:2,ref_key:"assignmentsTabRef",ref:h,form:C.value,assignments:e.assignments,"available-marshals":e.availableMarshals,"onUpdate:form":W[3]||(W[3]=Y=>C.value=Y),onInput:k,onRemoveAssignment:ce,onAssignMarshal:re},null,8,["form","assignments","available-marshals"])):B("",!0),l.value==="checklists"&&S.value?(g(),nt(cp,{key:3,ref_key:"checklistTabRef",ref:p,modelValue:f.value,"onUpdate:modelValue":W[4]||(W[4]=Y=>f.value=Y),"event-id":e.eventId,"location-id":e.location.id,locations:e.allLocations,areas:e.areas,assignments:e.assignments,onChange:E},null,8,["modelValue","event-id","location-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"?(g(),nt(nI,{key:4,modelValue:v.value,"onUpdate:modelValue":W[5]||(W[5]=Y=>v.value=Y),"all-checklist-items":e.allChecklistItems,"pending-area-ids":C.value.areaIds,areas:e.areas,"is-editing":S.value,onChange:k},null,8,["modelValue","all-checklist-items","pending-area-ids","areas","is-editing"])):B("",!0),l.value==="notes"&&S.value?(g(),nt(Yr,{key:5,"event-id":e.eventId,"location-id":e.location?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","location-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(g(),nt(LI,{key:6,modelValue:b.value,"onUpdate:modelValue":W[6]||(W[6]=Y=>b.value=Y),"all-notes":e.notes,"pending-area-ids":C.value.areaIds,areas:e.areas,"is-editing":S.value,onChange:k},null,8,["modelValue","all-notes","pending-area-ids","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},TI=Ze(II,[["__scopeId","data-v-b2783ab5"]]),EI={class:"tab-content"},SI={class:"form-group"},MI=["value"],PI={class:"form-group"},$I=["value"],OI={class:"form-group"},DI=["value"],RI={class:"form-group"},NI=["value"],BI={key:0,class:"magic-link-section"},FI={key:0,class:"loading-text"},zI={key:1,class:"magic-link-container"},UI={class:"magic-link-row"},HI=["value"],VI={key:0,class:"magic-link-actions"},ZI=["disabled"],qI={key:1,class:"success-text"},jI={key:2,class:"error-text"},WI={key:2,class:"error-text"},GI={__name:"MarshalDetailsTab",props:{form:{type:Object,required:!0},eventId:{type:String,default:null},marshalId:{type:String,default:null}},emits:["update:form","input"],setup(e,{emit:n}){const i=e,r=n,s=O(""),a=O(!1),l=O(!1),u=O(""),h=O(!1),p=O(!1),f=O(!1),v=O(""),b=(R,A)=>{r("update:form",{...i.form,[R]:A}),r("input")},C=async()=>{if(!(!i.eventId||!i.marshalId)){l.value=!0,u.value="";try{const R=await Xn.getMagicLink(i.eventId,i.marshalId);s.value=R.data.magicLink,a.value=R.data.hasEmail}catch(R){console.error("Failed to fetch magic link:",R),u.value="Failed to load login link"}finally{l.value=!1}}},S=async()=>{try{await navigator.clipboard.writeText(s.value),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(R){console.error("Failed to copy:",R)}},$=async()=>{if(!(!i.eventId||!i.marshalId)){p.value=!0,f.value=!1,v.value="";try{await Xn.sendMagicLink(i.eventId,i.marshalId),f.value=!0,setTimeout(()=>{f.value=!1},3e3)}catch(R){console.error("Failed to send email:",R),v.value=R.response?.data?.message||"Failed to send email"}finally{p.value=!1}}};return je(()=>i.marshalId,R=>{R?C():(s.value="",a.value=!1)},{immediate:!0}),(R,A)=>(g(),y("div",EI,[d("div",SI,[A[5]||(A[5]=d("label",null,"Name *",-1)),d("input",{value:e.form.name,onInput:A[0]||(A[0]=x=>b("name",x.target.value)),type:"text",required:"",class:"form-input"},null,40,MI)]),d("div",PI,[A[6]||(A[6]=d("label",null,"Email",-1)),d("input",{value:e.form.email,onInput:A[1]||(A[1]=x=>b("email",x.target.value)),type:"email",class:"form-input"},null,40,$I)]),d("div",OI,[A[7]||(A[7]=d("label",null,"Phone number",-1)),d("input",{value:e.form.phoneNumber,onInput:A[2]||(A[2]=x=>b("phoneNumber",x.target.value)),type:"tel",class:"form-input"},null,40,DI)]),d("div",RI,[A[8]||(A[8]=d("label",null,"Notes",-1)),d("textarea",{value:e.form.notes,onInput:A[3]||(A[3]=x=>b("notes",x.target.value)),class:"form-input",rows:"3",placeholder:"e.g., Needs to leave by 11am"},null,40,NI)]),e.marshalId?(g(),y("div",BI,[A[9]||(A[9]=d("label",null,"Login Link",-1)),A[10]||(A[10]=d("p",{class:"help-text"},"Share this unique link with the marshal so they can access their dashboard.",-1)),l.value?(g(),y("div",FI,"Loading link...")):s.value?(g(),y("div",zI,[d("div",UI,[d("input",{type:"text",value:s.value,readonly:"",class:"form-input magic-link-input",onFocus:A[4]||(A[4]=x=>x.target.select())},null,40,HI),d("button",{type:"button",class:"btn btn-secondary",onClick:S},T(h.value?"Copied!":"Copy link"),1)]),a.value?(g(),y("div",VI,[d("button",{type:"button",class:"btn btn-primary",disabled:p.value,onClick:$},T(p.value?"Sending...":"Send via email"),9,ZI)])):B("",!0),f.value?(g(),y("p",qI,"Email sent successfully!")):B("",!0),v.value?(g(),y("p",jI,T(v.value),1)):B("",!0)])):u.value?(g(),y("div",WI,T(u.value),1)):B("",!0)])):B("",!0)]))}},KI=Ze(GI,[["__scopeId","data-v-3a8f4f1d"]]),YI={class:"tab-content"},JI={class:"section-title"},XI={class:"assignments-list"},QI={class:"assignment-info"},eT={class:"assignment-header"},tT=["title"],nT={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},sT={key:2,class:"pending-badge"},iT={key:3,class:"pending-badge"},oT={key:0,class:"check-in-info"},aT={class:"check-in-method"},rT={class:"assignment-actions"},lT=["onClick"],cT=["onClick"],uT={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},dT={value:""},hT=["value"],fT={__name:"MarshalCheckpointsTab",props:{assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},isNewMarshal:{type:Boolean,default:!1}},emits:["input","remove-assignment","assign-to-location"],setup(e,{expose:n,emit:i}){const{termsLower:r}=ht(),s=e,a=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:u,handleToggleCheckIn:h,getStatusIcon:p,getStatusColor:f,getStatusText:v,formatTime:b}=lp(()=>a("input")),C=O(""),S=ae(()=>s.assignments?.length||0),$=ae(()=>{const A=[...s.availableLocations];return A.sort((x,w)=>x.name.localeCompare(w.name,void 0,{numeric:!0,sensitivity:"base"})),A}),R=()=>{C.value&&(a("assign-to-location",C.value),C.value="")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),C.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([A,x])=>({assignmentId:A,shouldBeCheckedIn:x}))}),(A,x)=>(g(),y("div",YI,[d("h3",JI,"Assigned "+T(F(r).checkpoints)+" ("+T(S.value)+")",1),d("div",XI,[(g(!0),y(ke,null,$e(e.assignments,w=>(g(),y("div",{key:w.id,class:Fe(["assignment-item",{"checked-in":!w.isPending&&F(u)(w),"is-pending":w.isPending}])},[d("div",QI,[d("div",eT,[w.isPending?(g(),y("span",nT,"  ")):(g(),y("span",{key:0,class:"status-indicator",style:tn({color:F(f)(w)}),title:F(v)(w)},T(F(p)(w)),13,tT)),d("strong",null,T(w.locationName),1),w.isPending?(g(),y("span",sT," (will be assigned on save) ")):F(l).has(w.id)?(g(),y("span",iT," (unsaved) ")):B("",!0)]),!w.isPending&&F(u)(w)?(g(),y("span",oT,[w.isCheckedIn&&!F(l).has(w.id)?(g(),y(ke,{key:0},[Ve(T(F(b)(w.checkInTime))+" ",1),d("span",aT,"("+T(w.checkInMethod)+")",1)],64)):(g(),y(ke,{key:1},[Ve(" Will be checked in on save ")],64))])):B("",!0)]),d("div",rT,[w.isPending?B("",!0):(g(),y("button",{key:0,onClick:M=>F(h)(w),class:Fe(["btn btn-small",F(u)(w)?"btn-danger":"btn-secondary"])},T(F(u)(w)?"Undo":"Check in"),11,lT)),d("button",{onClick:M=>A.$emit("remove-assignment",w),class:"btn btn-small btn-danger"}," Remove ",8,cT)])],2))),128)),$.value.length>0?(g(),y("div",uT,[d("label",null,"Assign to "+T(F(r).checkpoint),1),De(d("select",{"onUpdate:modelValue":x[0]||(x[0]=w=>C.value=w),class:"form-input",onChange:R},[d("option",dT,"Select a "+T(F(r).checkpoint)+"...",1),(g(!0),y(ke,null,$e($.value,w=>(g(),y("option",{key:w.id,value:w.id},T(w.name),9,hT))),128))],544),[[_n,C.value]])])):B("",!0)])]))}},pT=Ze(fT,[["__scopeId","data-v-5b6e7012"]]),mT={class:"marshal-checklist-view"},vT={key:0,class:"loading-state"},gT={key:1,class:"error-state"},_T={key:2,class:"empty-state"},yT={key:3,class:"checklist-items"},bT={class:"item-checkbox"},kT=["checked","disabled","onChange"],wT={class:"item-content"},CT={class:"item-header"},LT={class:"item-text-wrapper"},xT={class:"item-text"},AT={key:0,class:"item-context"},IT={class:"item-scope"},TT=["title"],ET={key:0,class:"completion-info"},ST={key:0,class:"pending-text"},MT={class:"completion-text"},PT={class:"completion-time"},$T={key:1,class:"uncomplete-info"},OT={key:2,class:"disabled-reason"},DT={__name:"MarshalChecklistView",props:{eventId:{type:String,required:!0},marshalId:{type:String,required:!0},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const{terms:r,termsLower:s}=ht(),a=e,l=i,u=O([]),h=O(!1),p=O(null),f=O(new Map),v=ae(()=>u.value.map(k=>{const I=f.value.get(k.itemId),E=I!==void 0?I.complete:k.isCompleted,q=I!==void 0&&I.complete!==k.isCompleted;return{...k,localIsCompleted:E,isModified:q}})),b=async()=>{if(!(!a.eventId||!a.marshalId)){h.value=!0,p.value=null;try{const k=await It.getMarshalChecklist(a.eventId,a.marshalId);if(u.value=k.data||[],a.modelValue&&a.modelValue.length>0){const I=new Map;a.modelValue.forEach(E=>{I.set(E.itemId,{complete:E.complete,contextType:E.contextType,contextId:E.contextId})}),f.value=I}}catch(k){console.error("Failed to load checklist:",k),p.value=k.response?.data?.message||"Failed to load checklist"}finally{h.value=!1}}},C=k=>{const I=f.value.get(k.itemId),E=I!==void 0?I.complete:k.isCompleted;f.value.set(k.itemId,{complete:!E,contextType:k.completionContextType,contextId:k.completionContextId}),S()},S=()=>{const k=[];for(const[I,E]of f.value.entries()){const q=u.value.find(U=>U.itemId===I);q&&E.complete!==q.isCompleted&&k.push({itemId:I,complete:E.complete,contextType:E.contextType,contextId:E.contextId})}l("update:modelValue",k),l("change",k)};n({resetLocalState:()=>{if(f.value=new Map,a.modelValue&&a.modelValue.length>0){const k=new Map;a.modelValue.forEach(I=>{k.set(I.itemId,{complete:I.complete,contextType:I.contextType,contextId:I.contextId})}),f.value=k}},loadChecklist:b});const R=k=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:`Your ${s.value.areas}`,EveryoneAtCheckpoints:`Your ${s.value.checkpoints}`,OnePerCheckpoint:`One per ${s.value.checkpoint}`,OnePerArea:`One per ${s.value.area}`,EveryAreaLead:`${r.value.area} lead`,OneLeadPerArea:`One lead per ${s.value.area}`})[k.matchedScope]||k.matchedScope,A=k=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to this person",EveryoneInAreas:`This item is for everyone in certain ${s.value.areas}`,EveryoneAtCheckpoints:`This item is for everyone at certain ${s.value.checkpoints}`,OnePerCheckpoint:`One person at the ${s.value.checkpoint} needs to complete this`,OnePerArea:`One person in the ${s.value.area} needs to complete this`,EveryAreaLead:`This item is for ${s.value.area} leads only`,OneLeadPerArea:`One ${s.value.area} lead needs to complete this`})[k.matchedScope]||"",x=k=>k.completionContextType==="Checkpoint"||k.completionContextType==="Area"?"Already completed by someone else":"Cannot be completed",w=k=>{if(!k.completionContextType||!k.completionContextId)return null;if(k.completionContextType==="Checkpoint"){const I=a.locations.find(q=>q.id===k.completionContextId);if(!I)return null;const E=I.description?`${I.name} - ${I.description}`:I.name;return`at ${s.value.checkpoint} ${E}`}if(k.completionContextType==="Area"){const I=a.areas.find(E=>E.id===k.completionContextId);return I?`in ${s.value.area} ${I.name}`:null}return k.completionContextType==="Personal"?k.contextOwnerName?`for ${k.contextOwnerName}`:"assigned individually":null},M=k=>k?new Date(k).toLocaleString():"";return je(()=>[a.eventId,a.marshalId],()=>{b()},{immediate:!0}),(k,I)=>(g(),y("div",mT,[h.value?(g(),y("div",vT," Loading checklist... ")):p.value?(g(),y("div",gT,[d("p",null,T(p.value),1),d("button",{onClick:b,class:"btn btn-secondary btn-small"}," Retry ")])):u.value.length===0?(g(),y("div",_T,[...I[0]||(I[0]=[d("p",null,"No checklist items for this person.",-1)])])):(g(),y("div",yT,[(g(!0),y(ke,null,$e(v.value,E=>(g(),y("div",{key:E.itemId,class:Fe(["checklist-item",{"item-completed":E.localIsCompleted,"item-modified":E.isModified}])},[d("div",bT,[d("input",{type:"checkbox",checked:E.localIsCompleted,disabled:!E.canBeCompletedByMe,onChange:q=>C(E)},null,40,kT)]),d("div",wT,[d("div",CT,[d("div",LT,[d("div",xT,T(E.text),1),w(E)?(g(),y("div",AT,T(w(E)),1)):B("",!0)]),d("div",IT,[d("span",{class:"scope-pill",title:A(E)},T(R(E)),9,TT)])]),E.localIsCompleted?(g(),y("div",ET,[E.isModified&&!E.isCompleted?(g(),y("span",ST," Will be marked as completed (pending save) ")):(g(),y(ke,{key:1},[d("span",MT," Completed by "+T(E.completedByActorName||"Unknown"),1),d("span",PT,T(M(E.completedAt)),1)],64))])):B("",!0),E.isModified&&E.isCompleted&&!E.localIsCompleted?(g(),y("div",$T,[...I[1]||(I[1]=[d("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!E.canBeCompletedByMe&&!E.localIsCompleted?(g(),y("div",OT,T(x(E)),1)):B("",!0)])],2))),128))]))]))}},RT=Ze(DT,[["__scopeId","data-v-73be4aeb"]]),NT={class:"checklist-preview"},BT={class:"preview-actions"},FT={class:"preview-header"},zT={key:0,class:"add-item-form"},UT=["placeholder"],HT=["disabled"],VT={key:1,class:"pending-items"},ZT={class:"item-content"},qT={class:"item-header"},jT={class:"item-text"},WT={class:"item-scope"},GT=["onClick"],KT={key:2,class:"empty-state"},YT={key:0,class:"help-text"},JT={key:3,class:"checklist-items"},XT={class:"item-content"},QT={class:"item-header"},eE={class:"item-text"},tE={class:"item-scope"},nE=["title"],sE={key:0,class:"item-context"},iE={__name:"ChecklistPreview",props:{allChecklistItems:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=O(!1),l=O(""),u=O([...r.modelValue]);je(()=>r.modelValue,x=>{u.value=[...x]},{deep:!0});const h=()=>{l.value.trim()&&(u.value.push({text:l.value.trim(),isNew:!0}),l.value="",a.value=!1,f())},p=x=>{u.value.splice(x,1),f()},f=()=>{s("update:modelValue",[...u.value]),s("change")},v=ae(()=>{const x=new Set;for(const w of r.pendingLocationIds){const M=r.allLocations.find(k=>k.id===w);M&&(M.areaIds||M.AreaIds||[]).forEach(I=>x.add(I))}return[...x]}),b=x=>{const w=x.scope,M=x.itemType,k=x.ids||[];return w==="SpecificPeople"&&M==="Marshal"?k.includes("ALL_MARSHALS"):(w==="EveryoneAtCheckpoints"||w==="OnePerCheckpoint")&&M==="Checkpoint"?k.includes("ALL_CHECKPOINTS")?!0:k.some(I=>r.pendingLocationIds.includes(I)):w==="OnePerCheckpoint"&&M==="Area"?k.includes("ALL_AREAS")?!0:k.some(I=>v.value.includes(I)):(w==="EveryoneInAreas"||w==="OnePerArea"||w==="EveryAreaLead"||w==="OneLeadPerArea")&&M==="Area"?k.includes("ALL_AREAS")?!0:k.some(I=>v.value.includes(I)):!1},C=ae(()=>r.allChecklistItems.filter(x=>x.scopeConfigurations&&x.scopeConfigurations.length>0?x.scopeConfigurations.some(w=>b(w)):!1)),S=x=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[x]||x,$=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"Unknown";const w=x.scopeConfigurations.find(k=>b(k));if(!w)return S(x.scopeConfigurations[0].scope);const M=w.ids||[];return M.includes("ALL_MARSHALS")?"Everyone":M.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:M.includes("ALL_AREAS")?`All ${i.value.areas}`:S(w.scope)},R=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"";const w=x.scopeConfigurations.find(k=>b(k));return w&&{SpecificPeople:"This item is for everyone at the event",EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[w.scope]||""},A=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return null;const w=x.scopeConfigurations.find(I=>b(I));if(!w)return null;const M=w.itemType,k=w.ids||[];if(k.includes("ALL_MARSHALS")||k.includes("ALL_CHECKPOINTS")||k.includes("ALL_AREAS"))return null;if(M==="Checkpoint"){const I=r.allLocations.filter(E=>k.includes(E.id)&&r.pendingLocationIds.includes(E.id)).map(E=>E.name);if(I.length>0)return`At: ${I.join(", ")}`}if(M==="Area"){const I=r.areas.filter(E=>k.includes(E.id)&&v.value.includes(E.id)).map(E=>E.name);if(I.length>0)return`In: ${I.join(", ")}`}return null};return(x,w)=>(g(),y("div",NT,[d("div",BT,[d("p",FT,T(e.isEditing?`Add new ${F(i).checklist} for this ${F(i).person}:`:`${F(i).checklists} that will apply to this ${F(i).person}:`),1),d("button",{type:"button",class:"add-item-btn",onClick:w[0]||(w[0]=M=>a.value=!a.value)},T(a.value?"Cancel":`+ Add ${F(i).checklist}`),1)]),a.value?(g(),y("div",zT,[De(d("input",{"onUpdate:modelValue":w[1]||(w[1]=M=>l.value=M),type:"text",placeholder:`Enter ${F(i).checklist} text...`,class:"add-item-input",onKeyup:mf(h,["enter"])},null,40,UT),[[it,l.value]]),d("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,HT)])):B("",!0),u.value.length>0?(g(),y("div",VT,[(g(!0),y(ke,null,$e(u.value,(M,k)=>(g(),y("div",{key:`pending-${k}`,class:"checklist-item pending"},[w[3]||(w[3]=d("div",{class:"item-checkbox"},[d("input",{type:"checkbox",checked:!1,disabled:""})],-1)),d("div",ZT,[d("div",qT,[d("div",jT,T(M.text),1),d("div",WT,[w[2]||(w[2]=d("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),d("button",{type:"button",class:"remove-item-btn",onClick:I=>p(k),title:"Remove"},"  ",8,GT)])])])]))),128))])):B("",!0),!e.isEditing&&C.value.length===0&&u.value.length===0?(g(),y("div",KT,[d("p",null,"No "+T(F(i).checklists)+" will apply based on the current "+T(F(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(g(),y("p",YT," Assign "+T(F(i).checkpoints)+" to see relevant "+T(F(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&C.value.length>0?(g(),y("div",JT,[(g(!0),y(ke,null,$e(C.value,M=>(g(),y("div",{key:M.id,class:"checklist-item"},[w[4]||(w[4]=d("div",{class:"item-checkbox"},[d("input",{type:"checkbox",checked:!1,disabled:""})],-1)),d("div",XT,[d("div",QT,[d("div",eE,T(M.text),1),d("div",tE,[d("span",{class:"scope-pill",title:R(M)},T($(M)),9,nE)])]),A(M)?(g(),y("div",sE,T(A(M)),1)):B("",!0)])]))),128))])):B("",!0)]))}},oE=Ze(iE,[["__scopeId","data-v-1c92d629"]]),aE={class:"notes-preview"},rE={class:"preview-actions"},lE={class:"preview-header"},cE={key:0,class:"add-item-form"},uE={class:"add-form-fields"},dE=["disabled"],hE={key:1,class:"pending-items"},fE={class:"note-header"},pE={class:"note-title"},mE={class:"note-actions"},vE=["onClick"],gE={key:0,class:"note-content"},_E={key:2,class:"empty-state"},yE={key:0,class:"help-text"},bE={key:3,class:"notes-list"},kE={class:"note-header"},wE={class:"note-title"},CE=["title"],LE={key:0,class:"note-content"},xE={key:1,class:"note-context"},AE={__name:"NotesPreview",props:{allNotes:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=O(!1),l=O(""),u=O(""),h=O([...r.modelValue]);je(()=>r.modelValue,w=>{h.value=[...w]},{deep:!0});const p=()=>{!l.value.trim()&&!u.value.trim()||(h.value.push({title:l.value.trim(),content:u.value.trim(),isNew:!0}),l.value="",u.value="",a.value=!1,v())},f=w=>{h.value.splice(w,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},b=ae(()=>{const w=new Set;for(const M of r.pendingLocationIds){const k=r.allLocations.find(I=>I.id===M);k&&(k.areaIds||k.AreaIds||[]).forEach(E=>w.add(E))}return[...w]}),C=w=>{const M=w.scope,k=w.itemType,I=w.ids||[];return M==="SpecificPeople"&&k==="Marshal"?I.includes("ALL_MARSHALS"):M==="EveryoneAtCheckpoints"&&k==="Checkpoint"?I.includes("ALL_CHECKPOINTS")?!0:I.some(E=>r.pendingLocationIds.includes(E)):M==="EveryoneInAreas"&&k==="Area"?I.includes("ALL_AREAS")?!0:I.some(E=>b.value.includes(E)):!1},S=ae(()=>r.allNotes.filter(w=>w.scopeConfigurations&&w.scopeConfigurations.length>0?w.scopeConfigurations.some(M=>C(M)):!1)),$=w=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[w]||w,R=w=>{if(!w.scopeConfigurations||w.scopeConfigurations.length===0)return"Unknown";const M=w.scopeConfigurations.find(I=>C(I));if(!M)return $(w.scopeConfigurations[0].scope);const k=M.ids||[];return k.includes("ALL_MARSHALS")?"Everyone":k.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:k.includes("ALL_AREAS")?`All ${i.value.areas}`:$(M.scope)},A=w=>{if(!w.scopeConfigurations||w.scopeConfigurations.length===0)return"";const M=w.scopeConfigurations.find(I=>C(I));return M&&{SpecificPeople:"This note is for everyone at the event",EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[M.scope]||""},x=w=>{if(!w.scopeConfigurations||w.scopeConfigurations.length===0)return null;const M=w.scopeConfigurations.find(E=>C(E));if(!M)return null;const k=M.itemType,I=M.ids||[];if(I.includes("ALL_MARSHALS")||I.includes("ALL_CHECKPOINTS")||I.includes("ALL_AREAS"))return null;if(k==="Checkpoint"){const E=r.allLocations.filter(q=>I.includes(q.id)&&r.pendingLocationIds.includes(q.id)).map(q=>q.name);if(E.length>0)return`At: ${E.join(", ")}`}if(k==="Area"){const E=r.areas.filter(q=>I.includes(q.id)&&b.value.includes(q.id)).map(q=>q.name);if(E.length>0)return`In: ${E.join(", ")}`}return null};return(w,M)=>(g(),y("div",aE,[d("div",rE,[d("p",lE,T(e.isEditing?`Add new note for this ${F(i).person}:`:`Notes that will be visible to this ${F(i).person}:`),1),d("button",{type:"button",class:"add-item-btn",onClick:M[0]||(M[0]=k=>a.value=!a.value)},T(a.value?"Cancel":"+ Add note"),1)]),a.value?(g(),y("div",cE,[d("div",uE,[De(d("input",{"onUpdate:modelValue":M[1]||(M[1]=k=>l.value=k),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[it,l.value]]),De(d("textarea",{"onUpdate:modelValue":M[2]||(M[2]=k=>u.value=k),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[it,u.value]])]),d("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!u.value.trim(),onClick:p}," Add ",8,dE)])):B("",!0),h.value.length>0?(g(),y("div",hE,[(g(!0),y(ke,null,$e(h.value,(k,I)=>(g(),y("div",{key:`pending-${I}`,class:"note-item pending"},[d("div",fE,[d("span",pE,T(k.title||"Untitled"),1),d("div",mE,[M[3]||(M[3]=d("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),d("button",{type:"button",class:"remove-item-btn",onClick:E=>f(I),title:"Remove"},"  ",8,vE)])]),k.content?(g(),y("div",gE,T(k.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&S.value.length===0&&h.value.length===0?(g(),y("div",_E,[d("p",null,"No notes will be visible based on the current "+T(F(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(g(),y("p",yE," Assign "+T(F(i).checkpoints)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&S.value.length>0?(g(),y("div",bE,[(g(!0),y(ke,null,$e(S.value,k=>(g(),y("div",{key:k.id,class:"note-item"},[d("div",kE,[d("span",wE,T(k.title||"Untitled"),1),d("span",{class:"scope-pill",title:A(k)},T(R(k)),9,CE)]),k.content?(g(),y("div",LE,T(k.content),1)):B("",!0),x(k)?(g(),y("div",xE,T(x(k)),1)):B("",!0)]))),128))])):B("",!0)]))}},IE=Ze(AE,[["__scopeId","data-v-dc8ac5e7"]]),TE={class:"custom-footer"},EE={key:1},SE={__name:"EditMarshalModal",props:{show:{type:Boolean,default:!1},marshal:{type:Object,default:null},eventId:{type:String,required:!0},assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},eventNotes:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","toggle-check-in","remove-assignment","assign-to-location","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O("details"),u=O(null),h=O(null),p=O([]),f=O([]),v=O([]),b=O([]),C=O({name:"",email:"",phoneNumber:"",notes:""}),S=ae(()=>{const W=s.isEditing?`Edit ${r.value.person}`:`Create ${r.value.person}`,Y=C.value.name?.trim();return Y?`${W} - ${Y}`:W}),$=ae(()=>[{value:"details",label:"Details",icon:"details"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),R=ae(()=>$.value.findIndex(W=>W.value===l.value)),A=ae(()=>R.value===$.value.length-1),x=ae(()=>A.value?null:$.value[R.value+1]),w=ae(()=>A.value?`Create ${r.value.person}`:`Add ${x.value.label.toLowerCase()}...`),M=ae(()=>f.value.map(W=>W.locationId)),k=ae(()=>s.isEditing?s.assignments:f.value.map(W=>({id:`pending-${W.locationId}`,locationId:W.locationId,locationName:s.allLocations.find(Y=>Y.id===W.locationId)?.name||"Unknown",isPending:!0}))),I=ae(()=>{if(s.isEditing)return s.availableLocations;const W=f.value.map(Y=>Y.locationId);return s.allLocations.filter(Y=>!W.includes(Y.id))});je(()=>s.marshal,W=>{W?C.value={name:W.name||"",email:W.email||"",phoneNumber:W.phoneNumber||"",notes:W.notes||""}:C.value={name:"",email:"",phoneNumber:"",notes:""}},{immediate:!0,deep:!0}),je(()=>s.show,W=>{W&&(l.value="details",p.value=[],f.value=[],v.value=[],b.value=[],s.isEditing||(C.value={name:"",email:"",phoneNumber:"",notes:""}),u.value?.clearPendingChanges&&u.value.clearPendingChanges(),h.value?.resetLocalState&&h.value.resetLocalState())});const E=()=>{a("update:isDirty",!0)},q=()=>{a("update:isDirty",!0)},U=()=>{s.isEditing||A.value?Q():l.value=x.value.value},Q=()=>{const W={...C.value,checkInChanges:u.value?.getPendingChanges?.()||[],checklistChanges:p.value||[],pendingAssignments:s.isEditing?[]:f.value,pendingNewChecklistItems:v.value,pendingNewNotes:b.value};a("save",W)},ce=()=>{a("delete")},re=W=>{!s.isEditing&&W.isPending?f.value=f.value.filter(Y=>Y.locationId!==W.locationId):a("remove-assignment",W)},Le=W=>{s.isEditing?a("assign-to-location",W):(f.value.push({locationId:W}),a("update:isDirty",!0))},Z=()=>{a("close")};return(W,Y)=>(g(),nt(Ft,{show:e.show,title:S.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Z},{"tab-header":We(()=>[Oe(Zc,{modelValue:l.value,"onUpdate:modelValue":Y[0]||(Y[0]=me=>l.value=me),tabs:$.value},null,8,["modelValue","tabs"])]),footer:We(()=>[d("div",TE,[e.isEditing?(g(),y("button",{key:0,type:"button",onClick:ce,class:"btn btn-danger"}," Delete "+T(F(r).person),1)):(g(),y("div",EE)),d("button",{type:"button",onClick:U,class:"btn btn-primary"},T(e.isEditing?"Save changes":w.value),1)])]),default:We(()=>[l.value==="details"?(g(),nt(KI,{key:0,form:C.value,"event-id":e.eventId,"marshal-id":e.isEditing?e.marshal?.id:null,"onUpdate:form":Y[1]||(Y[1]=me=>C.value=me),onInput:E},null,8,["form","event-id","marshal-id"])):B("",!0),l.value==="checkpoints"?(g(),nt(pT,{key:1,ref_key:"checkpointsTabRef",ref:u,assignments:k.value,"available-locations":I.value,"is-new-marshal":!e.isEditing,onInput:E,onRemoveAssignment:re,onAssignToLocation:Le},null,8,["assignments","available-locations","is-new-marshal"])):B("",!0),l.value==="checklists"&&e.isEditing?(g(),nt(RT,{key:2,ref_key:"checklistTabRef",ref:h,modelValue:p.value,"onUpdate:modelValue":Y[2]||(Y[2]=me=>p.value=me),"event-id":e.eventId,"marshal-id":e.marshal.id,locations:e.allLocations,areas:e.areas,onChange:q},null,8,["modelValue","event-id","marshal-id","locations","areas"])):B("",!0),l.value==="checklists"?(g(),nt(oE,{key:3,modelValue:v.value,"onUpdate:modelValue":Y[3]||(Y[3]=me=>v.value=me),"all-checklist-items":e.allChecklistItems,"pending-location-ids":M.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:E},null,8,["modelValue","all-checklist-items","pending-location-ids","all-locations","areas","is-editing"])):B("",!0),l.value==="notes"&&e.isEditing?(g(),nt(Yr,{key:4,"event-id":e.eventId,"marshal-id":e.marshal?.id,"all-notes":e.eventNotes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","marshal-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(g(),nt(IE,{key:5,modelValue:b.value,"onUpdate:modelValue":Y[4]||(Y[4]=me=>b.value=me),"all-notes":e.eventNotes,"pending-location-ids":M.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:E},null,8,["modelValue","all-notes","pending-location-ids","all-locations","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},ME=Ze(SE,[["__scopeId","data-v-3cd98423"]]),PE={class:"locations-list"},$E={class:"conflict-actions"},OE={__name:"AssignmentConflictModal",props:{show:{type:Boolean,default:!1},conflictData:{type:Object,default:()=>({marshalName:"",locations:[]})}},emits:["close","choice"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=n,a=u=>{s("choice",u)},l=()=>{s("close")};return(u,h)=>(g(),nt(Ft,{show:e.show,title:`${F(i).person} already assigned`,size:"medium","z-index":1100,onClose:l},{actions:We(()=>[d("div",$E,[d("button",{onClick:h[0]||(h[0]=p=>a("move")),class:"btn btn-primary btn-full"}," Move to this "+T(F(r).checkpoint)+" (remove from others) ",1),d("button",{onClick:h[1]||(h[1]=p=>a("both")),class:"btn btn-secondary btn-full"}," Assign to both (keep existing assignments) "),d("button",{onClick:h[2]||(h[2]=p=>a("choose-other")),class:"btn btn-secondary btn-full"}," Choose someone else "),d("button",{onClick:h[3]||(h[3]=p=>a("cancel")),class:"btn btn-secondary btn-full"}," Cancel ")])]),default:We(()=>[d("p",null,[d("strong",null,T(e.conflictData.marshalName),1),h[4]||(h[4]=Ve(" is currently assigned to: ",-1))]),d("ul",PE,[(g(!0),y(ke,null,$e(e.conflictData.locations,p=>(g(),y("li",{key:p},T(p),1))),128))]),h[5]||(h[5]=d("p",null,"What would you like to do?",-1))]),_:1},8,["show","title"]))}},DE=Ze(OE,[["__scopeId","data-v-b64e5b37"]]),RE={key:0,class:"assign-marshal-section"},NE={value:""},BE=["value"],FE=["disabled"],zE={key:1,class:"assign-marshal-section create-mode"},UE={class:"form-group"},HE={class:"form-group"},VE={class:"form-group"},ZE={__name:"AssignMarshalModal",props:{show:{type:Boolean,default:!1},locationName:{type:String,default:""},marshals:{type:Array,default:()=>[]}},emits:["close","assign-existing","create-and-assign"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=O(!1),l=O(""),u=O({name:"",email:"",phoneNumber:""});je(()=>r.show,C=>{C||(a.value=!1,l.value="",u.value={name:"",email:"",phoneNumber:""})});const h=()=>{a.value=!0},p=()=>{l.value&&s("assign-existing",l.value)},f=()=>{u.value.name&&s("create-and-assign",{...u.value})},v=()=>{a.value=!1,u.value={name:"",email:"",phoneNumber:""}},b=()=>{s("close")};return(C,S)=>(g(),nt(Ft,{show:e.show,title:a.value?`Create new ${F(i).person}`:`Assign ${F(i).person} to ${e.locationName}`,size:"medium",onClose:b},{actions:We(()=>[a.value?(g(),y(ke,{key:0},[d("button",{onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{onClick:f,class:"btn btn-primary"}," Create & assign ")],64)):B("",!0)]),default:We(()=>[a.value?(g(),y("div",zE,[d("h3",null,"Create new "+T(F(i).person),1),d("div",UE,[S[5]||(S[5]=d("label",null,"Name *",-1)),De(d("input",{"onUpdate:modelValue":S[1]||(S[1]=$=>u.value.name=$),type:"text",required:"",class:"form-input"},null,512),[[it,u.value.name]])]),d("div",HE,[S[6]||(S[6]=d("label",null,"Email",-1)),De(d("input",{"onUpdate:modelValue":S[2]||(S[2]=$=>u.value.email=$),type:"email",class:"form-input"},null,512),[[it,u.value.email]])]),d("div",VE,[S[7]||(S[7]=d("label",null,"Phone",-1)),De(d("input",{"onUpdate:modelValue":S[3]||(S[3]=$=>u.value.phoneNumber=$),type:"tel",class:"form-input"},null,512),[[it,u.value.phoneNumber]])])])):(g(),y("div",RE,[d("h3",null,"Select existing "+T(F(i).person),1),De(d("select",{"onUpdate:modelValue":S[0]||(S[0]=$=>l.value=$),class:"form-input"},[d("option",NE,"Choose a "+T(F(i).person)+"...",1),(g(!0),y(ke,null,$e(e.marshals,$=>(g(),y("option",{key:$.id,value:$.id},[Ve(T($.name)+" ",1),$.assignedLocationIds&&$.assignedLocationIds.length>0?(g(),y(ke,{key:0},[Ve(" (assigned to "+T($.assignedLocationIds.length)+" "+T($.assignedLocationIds.length>1?F(i).checkpoints:F(i).checkpoint)+") ",1)],64)):B("",!0)],8,BE))),128))],512),[[_n,l.value]]),d("button",{onClick:p,class:"btn btn-primary btn-full",style:{"margin-top":"1rem"},disabled:!l.value}," Assign selected "+T(F(i).person),9,FE),S[4]||(S[4]=d("div",{class:"divider"},"OR",-1)),d("button",{onClick:h,class:"btn btn-secondary btn-full"}," Create new "+T(F(i).person),1)]))]),_:1},8,["show","title"]))}},qE=Ze(ZE,[["__scopeId","data-v-f95e76a2"]]),jE={class:"shift-times-content"},WE={class:"info-text"},GE={class:"time-delta-info"},KE={class:"delta-detail"},YE={class:"delta-detail"},JE={class:"delta-summary"},XE={class:"affected-checkpoints"},QE={class:"option-selection"},eS={class:"radio-option"},tS={class:"radio-option"},nS={__name:"ShiftCheckpointTimesModal",props:{show:{type:Boolean,default:!1},oldEventDate:{type:String,required:!0},newEventDate:{type:String,required:!0},affectedCheckpointsCount:{type:Number,default:0}},emits:["confirm","cancel"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O("shift"),u=ae(()=>{const b=new Date(s.oldEventDate);return new Date(s.newEventDate)-b}),h=b=>new Date(b).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=b=>{const C=Math.abs(b),S=b>=0?"+":"-",$=Math.floor(C/(1e3*60*60*24)),R=Math.floor(C%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(C%(1e3*60*60)/(1e3*60)),x=[];return $>0&&x.push(`${$}d`),R>0&&x.push(`${R}h`),A>0&&x.push(`${A}m`),`${S}${x.join(" ")}`},f=()=>{a("confirm",{shouldShift:l.value==="shift",timeDelta:u.value})},v=()=>{a("cancel")};return(b,C)=>(g(),nt(Ft,{show:e.show,title:`Shift ${F(i).checkpoint} Times?`,size:"medium",onClose:v},{actions:We(()=>[d("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:f,class:"btn btn-primary"},T(l.value==="shift"?"Shift Times":"Keep Times"),1)]),default:We(()=>[d("div",jE,[d("p",WE," You've changed the event date/time. Some "+T(F(r).checkpoints)+" have custom times set. ",1),d("div",GE,[C[2]||(C[2]=d("strong",null,"Event time change:",-1)),d("div",KE," Old: "+T(h(e.oldEventDate)),1),d("div",YE," New: "+T(h(e.newEventDate)),1),d("div",JE," Delta: "+T(p(u.value)),1)]),d("p",XE,[d("strong",null,T(e.affectedCheckpointsCount)+" "+T(e.affectedCheckpointsCount===1?F(r).checkpoint:F(r).checkpoints),1),C[3]||(C[3]=Ve(" with custom times will be shifted by the same amount. ",-1))]),d("div",QE,[d("label",eS,[De(d("input",{"onUpdate:modelValue":C[0]||(C[0]=S=>l.value=S),type:"radio",value:"shift",name:"shift-option"},null,512),[[id,l.value]]),d("div",null,[d("strong",null,"Shift all "+T(F(r).checkpoint)+" times",1),C[4]||(C[4]=d("small",null,"Recommended: Maintains relative timing",-1))])]),d("label",tS,[De(d("input",{"onUpdate:modelValue":C[1]||(C[1]=S=>l.value=S),type:"radio",value:"keep",name:"shift-option"},null,512),[[id,l.value]]),d("div",null,[d("strong",null,"Keep "+T(F(r).checkpoint)+" times unchanged",1),d("small",null,T(F(i).checkpoint)+" times will stay at their current values",1)])])])])]),_:1},8,["show","title"]))}},sS=Ze(nS,[["__scopeId","data-v-0e706cff"]]),up=[{name:"Charcoal",hex:"#2d3748"},{name:"Dark Gray",hex:"#4a5568"},{name:"Gray",hex:"#718096"},{name:"Red",hex:"#f56565"},{name:"Coral",hex:"#ff6b6b"},{name:"Rose",hex:"#fb7185"},{name:"Pink",hex:"#ed64a6"},{name:"Magenta",hex:"#d946ef"},{name:"Fuchsia",hex:"#e879f9"},{name:"Purple",hex:"#9f7aea"},{name:"Violet",hex:"#a78bfa"},{name:"Lavender",hex:"#b197fc"},{name:"Indigo",hex:"#5a67d8"},{name:"Navy",hex:"#4263eb"},{name:"Blue",hex:"#667eea"},{name:"Sky",hex:"#0ea5e9"},{name:"Cyan",hex:"#0bc5ea"},{name:"Aqua",hex:"#22d3ee"},{name:"Teal",hex:"#38b2ac"},{name:"Emerald",hex:"#10b981"},{name:"Green",hex:"#48bb78"},{name:"Mint",hex:"#51cf66"},{name:"Lime",hex:"#84cc16"},{name:"Olive",hex:"#a3b18a"},{name:"Yellow",hex:"#ecc94b"},{name:"Amber",hex:"#f59e0b"},{name:"Orange",hex:"#ed8936"},{name:"Peach",hex:"#ff922b"},{name:"Light Gray",hex:"#cbd5e0"},{name:"Silver",hex:"#e2e8f0"},{name:"Cream",hex:"#f7fafc"}],vc="#667eea";function Wd(e){const n=e.map(r=>r.color);return up.find(r=>!n.includes(r.hex))?.hex||vc}const iS={key:0,class:"tab-content"},oS={class:"form-group"},aS=["disabled"],rS={class:"form-group"},lS={class:"form-group"},cS={class:"color-picker"},uS=["title","onClick"],dS={key:1,class:"tab-content"},hS={class:"boundary-section"},fS={class:"boundary-actions"},pS={key:2,class:"tab-content"},mS={class:"section-title"},vS={class:"contacts-actions"},gS={key:0,class:"area-contacts-list"},_S=["onClick"],yS={class:"contact-info"},bS={key:0,class:"contact-role-badge"},kS={key:1,class:"contact-details"},wS={key:0},CS={key:1},LS={key:3,class:"tab-content"},xS={class:"section-title"},AS={key:0,class:"empty-state"},IS={key:1,class:"checkpoints-list"},TS=["onClick"],ES={class:"checkpoint-header"},SS={class:"checkpoint-name-section"},MS={key:0,class:"checkpoint-description"},PS={class:"checkpoint-stats"},$S={class:"checkpoint-details"},OS={class:"detail-row"},DS={class:"detail-label"},RS={class:"detail-value"},NS={key:0,class:"warning-text"},BS={class:"detail-row"},FS={class:"detail-value"},zS={key:0,class:"detail-row"},US={key:1,class:"detail-row"},HS={key:4,class:"placeholder-message"},VS={key:6,class:"placeholder-message"},ZS={key:8,class:"placeholder-message"},qS={class:"custom-footer"},jS={key:1},WS={__name:"EditAreaModal",props:{show:{type:Boolean,default:!1},area:{type:Object,default:null},checkpoints:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]}},emits:["close","save","delete","draw-boundary","update:isDirty","select-checkpoint","add-area-contact","edit-contact"],setup(e,{emit:n}){const{terms:i,termsLower:r}=ht(),s=e,a=n,l=O("details"),u=O(null),h=O([]),p=O({}),f=O({}),v=O({name:"",description:"",color:vc,displayOrder:0,isDefault:!1,polygon:[]}),b=ae(()=>s.area&&s.area.id),C=ae(()=>[{value:"details",label:"Details",icon:"details"},{value:"boundary",label:"Boundary",icon:"area"},{value:"contacts",label:"Contacts",icon:"marshal"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),S=ae(()=>C.value.findIndex(ge=>ge.value===l.value)),$=ae(()=>S.value===C.value.length-1),R=ae(()=>$.value?null:C.value[S.value+1]),A=ae(()=>$.value?`Create ${r.value.area}`:`Add ${R.value.label.toLowerCase()}...`),x=ae(()=>{if(!s.area||!s.area.id)return[];const ge=s.checkpoints.filter(ue=>ue.areaIds&&ue.areaIds.includes(s.area.id)).map(ue=>ue.id);return s.assignments.filter(ue=>ge.includes(ue.locationId))}),w=ae(()=>!s.area||!s.area.id?[]:s.checkpoints.filter(ge=>ge.areaIds&&ge.areaIds.includes(s.area.id))),M=ae(()=>{const ge=[...w.value];return ge.sort((ue,pe)=>{const V=ue.name.match(/^(\d+)/),J=pe.name.match(/^(\d+)/);if(V&&J){const te=parseInt(V[1]),we=parseInt(J[1]);if(te!==we)return te-we}return ue.name.localeCompare(pe.name,void 0,{numeric:!0,sensitivity:"base"})}),ge}),k=ae(()=>!s.area||!s.area.id?[]:s.contacts.filter(ge=>ge.scopeConfigurations?ge.scopeConfigurations.some(ue=>ue.scope==="EveryoneInAreas"&&ue.itemType==="Area"?ue.ids?.includes("ALL_AREAS")?!0:ue.ids?.includes(s.area.id):!1):!1)),I=ge=>s.assignments.filter(ue=>ue.locationId===ge),E=ge=>I(ge.id).filter(pe=>pe.isCheckedIn).length,q=ge=>{const ue=I(ge.id);if(ue.length===0)return"status-none";const pe=ue.filter(V=>V.isCheckedIn).length;return pe===0?"status-none":pe===ue.length?"status-complete":"status-partial"},U=ge=>{const ue=I(ge.id);if(ue.length===0)return`No ${r.value.people}`;const pe=ue.filter(V=>V.isCheckedIn).length;return pe===0?"Not checked in":pe===ue.length?"Fully checked in":`Partially checked in (${pe}/${ue.length})`},Q=ge=>{const ue=p.value[ge];return!ue||ue.total===0?"":ue.completed===ue.total?"status-complete":ue.completed===0?"status-none":"status-partial"},ce=ge=>{const ue=p.value[ge];return ue?ue.total===0?"No tasks":ue.completed===ue.total?"All tasks completed":`${ue.completed}/${ue.total} completed`:""},re=async ge=>{if(!(p.value[ge]||f.value[ge])){f.value[ge]=!0;try{const pe=(await It.getCheckpointChecklist(s.eventId,ge)).data||[];p.value[ge]={total:pe.length,completed:pe.filter(V=>V.isCompleted).length}}catch(ue){console.error("Failed to load checklist status for checkpoint:",ge,ue),p.value[ge]={total:0,completed:0}}finally{f.value[ge]=!1}}};je(()=>s.area,ge=>{if(ge){const ue=ge.polygon?typeof ge.polygon=="string"?JSON.parse(ge.polygon):ge.polygon:[];v.value={name:ge.name||"",description:ge.description||"",color:ge.color||vc,displayOrder:ge.displayOrder||0,isDefault:ge.isDefault||!1,polygon:ue}}else v.value={name:"",description:"",color:Wd(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[]}},{immediate:!0,deep:!0}),je(()=>s.show,ge=>{ge&&(l.value="details",h.value=[],p.value={},f.value={},b.value||(v.value={name:"",description:"",color:Wd(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[]}),u.value?.resetLocalState&&u.value.resetLocalState())}),je(l,ge=>{ge==="checkpoints"&&s.area&&s.area.id&&w.value.forEach(ue=>{setTimeout(()=>re(ue.id),0)})});const Le=()=>{a("update:isDirty",!0)},Z=ge=>{v.value.color=ge,Le()},W=()=>{a("draw-boundary",v.value)},Y=()=>{v.value.polygon=[],Le()},me=()=>{a("add-area-contact",s.area)},he=ge=>ge?ge.replace(/([A-Z])/g," $1").replace(/^./,ue=>ue.toUpperCase()).trim():"",Ae=ge=>{h.value=ge,Le()},ee=()=>{b.value||$.value?ve():l.value=R.value.value},ve=()=>{const ge=s.area?{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null,displayOrder:v.value.displayOrder,checklistChanges:h.value||[]}:{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null};a("save",ge)},Ee=()=>{a("delete",s.area.id)},Be=()=>{a("close")};return(ge,ue)=>(g(),nt(Ft,{show:e.show,title:e.area&&e.area.id?`Edit ${F(r).area}: ${e.area.name}`:`Create new ${F(r).area}`,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Be},{"tab-header":We(()=>[Oe(Zc,{modelValue:l.value,"onUpdate:modelValue":ue[0]||(ue[0]=pe=>l.value=pe),tabs:C.value},null,8,["modelValue","tabs"])]),footer:We(()=>[d("div",qS,[b.value&&!v.value.isDefault?(g(),y("button",{key:0,type:"button",onClick:Ee,class:"btn btn-danger"}," Delete "+T(F(r).area),1)):(g(),y("div",jS)),d("button",{type:"button",onClick:ee,class:"btn btn-primary"},T(b.value?"Save changes":A.value),1)])]),default:We(()=>[l.value==="details"?(g(),y("div",iS,[d("form",{onSubmit:Tt(ve,["prevent"])},[d("div",oS,[ue[4]||(ue[4]=d("label",null,"Name *",-1)),De(d("input",{"onUpdate:modelValue":ue[1]||(ue[1]=pe=>v.value.name=pe),type:"text",required:"",class:"form-input",disabled:v.value.isDefault,onInput:Le},null,40,aS),[[it,v.value.name]])]),d("div",rS,[ue[5]||(ue[5]=d("label",null,"Description",-1)),De(d("textarea",{"onUpdate:modelValue":ue[2]||(ue[2]=pe=>v.value.description=pe),class:"form-input",rows:"3",onInput:Le},null,544),[[it,v.value.description]])]),d("div",lS,[ue[6]||(ue[6]=d("label",null,"Color *",-1)),d("div",cS,[(g(!0),y(ke,null,$e(F(up),pe=>(g(),y("div",{key:pe.hex,class:Fe(["color-swatch",{selected:v.value.color===pe.hex}]),style:tn({backgroundColor:pe.hex}),title:pe.name,onClick:V=>Z(pe.hex)},null,14,uS))),128))])])],32)])):B("",!0),l.value==="boundary"?(g(),y("div",dS,[d("div",hS,[ue[7]||(ue[7]=d("div",{class:"instructions-card"},[d("p",null,[d("strong",null,"Draw a polygon on the map to define this area's boundary")]),d("p",null,' Click "Draw on Map" to activate drawing mode. Click on the map to add vertices, and double-click to complete the polygon. ')],-1)),d("div",fS,[d("button",{onClick:W,class:"btn btn-primary btn-full"}," Draw on Map "),v.value.polygon&&v.value.polygon.length>0?(g(),y("button",{key:0,onClick:Y,class:"btn btn-danger btn-full"}," Clear Boundary ")):B("",!0)])])])):B("",!0),l.value==="contacts"?(g(),y("div",pS,[d("h3",mS,T(F(i).area)+" contacts",1),d("div",vS,[d("button",{onClick:me,class:"btn btn-primary btn-full"}," Add contact for this "+T(F(r).area),1)]),k.value.length>0?(g(),y("div",gS,[d("h4",null,"Contacts visible in this "+T(F(r).area)+" ("+T(k.value.length)+")",1),(g(!0),y(ke,null,$e(k.value,pe=>(g(),y("div",{key:pe.contactId,class:"contact-item",onClick:V=>ge.$emit("edit-contact",pe)},[d("div",yS,[d("strong",null,T(pe.name),1),pe.role?(g(),y("span",bS,T(he(pe.role)),1)):B("",!0),pe.phone||pe.email?(g(),y("div",kS,[pe.phone?(g(),y("span",wS,T(pe.phone),1)):B("",!0),pe.email?(g(),y("span",CS,T(pe.email),1)):B("",!0)])):B("",!0)])],8,_S))),128))])):B("",!0)])):B("",!0),l.value==="checkpoints"&&b.value?(g(),y("div",LS,[d("h3",xS,T(F(i).checkpoints)+" in "+T(e.area?.name)+" ("+T(w.value.length)+")",1),w.value.length===0?(g(),y("div",AS,[d("p",null,"No "+T(F(r).checkpoints)+" in this "+T(F(r).area)+" yet.",1)])):(g(),y("div",IS,[(g(!0),y(ke,null,$e(M.value,pe=>(g(),y("div",{key:pe.id,class:"checkpoint-card",onClick:V=>ge.$emit("select-checkpoint",pe)},[d("div",ES,[d("div",SS,[d("h4",null,T(pe.name),1),pe.description?(g(),y("p",MS,T(pe.description),1)):B("",!0)]),d("div",PS,[d("div",{class:Fe(["stat-badge",q(pe)])},T(U(pe)),3)])]),d("div",$S,[d("div",OS,[d("span",DS,T(F(i).people)+":",1),d("span",RS,[Ve(T(I(pe.id).length)+" / "+T(pe.requiredMarshals)+" ",1),I(pe.id).length<pe.requiredMarshals?(g(),y("span",NS," ("+T(pe.requiredMarshals-I(pe.id).length)+" needed) ",1)):B("",!0)])]),d("div",BS,[ue[8]||(ue[8]=d("span",{class:"detail-label"},"Checked in:",-1)),d("span",FS,T(E(pe))+" / "+T(I(pe.id).length),1)]),p.value[pe.id]?(g(),y("div",zS,[ue[9]||(ue[9]=d("span",{class:"detail-label"},"Tasks:",-1)),d("span",{class:Fe(["detail-value",Q(pe.id)])},T(ce(pe.id)),3)])):f.value[pe.id]?(g(),y("div",US,[...ue[10]||(ue[10]=[d("span",{class:"detail-label"},"Tasks:",-1),d("span",{class:"detail-value loading-text"},"Loading...",-1)])])):B("",!0)])],8,TS))),128))]))])):B("",!0),l.value==="checkpoints"&&!b.value?(g(),y("div",HS,[d("p",null,T(F(i).checkpoints)+" will be automatically assigned based on boundaries after the "+T(F(r).area)+" is created.",1)])):B("",!0),l.value==="checklists"&&b.value?(g(),nt(cp,{key:5,ref_key:"checklistTabRef",ref:u,modelValue:h.value,"onUpdate:modelValue":ue[3]||(ue[3]=pe=>h.value=pe),"event-id":e.eventId,"area-id":e.area.id,locations:e.allLocations,areas:e.areas,assignments:x.value,onChange:Ae},null,8,["modelValue","event-id","area-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"&&!b.value?(g(),y("div",VS,[d("p",null,T(F(i).checklists)+" can be assigned after the "+T(F(r).area)+" is created.",1)])):B("",!0),l.value==="notes"&&b.value?(g(),nt(Yr,{key:7,"event-id":e.eventId,"area-id":e.area?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","area-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"&&!b.value?(g(),y("div",ZS,[d("p",null,"Notes can be viewed after the "+T(F(r).area)+" is created.",1)])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},GS=Ze(WS,[["__scopeId","data-v-ad57309b"]]),KS={class:"scope-configuration-editor"},YS={class:"editor-header"},JS={class:"scope-types-list"},XS=["onClick"],QS={class:"scope-type-label"},eM={class:"scope-type-pill"},tM={class:"expand-label"},nM={class:"expand-icon"},sM={class:"modal-content"},iM={class:"modal-header"},oM={class:"modal-body"},aM={class:"scope-help"},rM={key:0,class:"form-group"},lM={class:"checkbox-label special-option"},cM=["checked"],uM={key:0,class:"specific-selection"},dM=["placeholder"],hM={class:"checkbox-group scrollable"},fM=["checked","onChange"],pM={key:1,class:"form-group"},mM={class:"checkbox-label special-option"},vM=["checked"],gM={key:0,class:"specific-selection"},_M={class:"checkbox-group scrollable"},yM=["checked","onChange"],bM={key:2,class:"form-group"},kM={class:"checkbox-label special-option"},wM=["checked"],CM={key:0,class:"specific-selection"},LM=["placeholder"],xM={class:"checkbox-group scrollable"},AM=["checked","onChange"],IM={class:"checkpoint-info"},TM={class:"checkpoint-name"},EM={key:0,class:"checkpoint-description"},SM={__name:"ScopeConfigurationEditor",props:{modelValue:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},excludeScopes:{type:Array,default:()=>[]},headerText:{type:String,default:"Who can see and complete this item?"}},emits:["update:modelValue","user-changed"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=ae(()=>[{scope:"SpecificPeople",label:`Specific ${i.value.people}`},{scope:"EveryoneAtCheckpoints",label:`Every ${i.value.person} at specified ${i.value.checkpoints}`},{scope:"OnePerCheckpoint",label:`One ${i.value.person} at each specified ${i.value.checkpoint}`},{scope:"OnePerArea",label:`One ${i.value.person} in specified ${i.value.areas}`},{scope:"EveryoneInAreas",label:`Everyone in specified ${i.value.areas}`},{scope:"EveryAreaLead",label:`Every ${i.value.area} lead at specified ${i.value.areas}`},{scope:"OneLeadPerArea",label:`One lead per specified ${i.value.area}`}]),l=O({SpecificPeople:{enabled:!0,ids:["ALL_MARSHALS"]},EveryoneInAreas:{enabled:!1,ids:[]},EveryoneAtCheckpoints:{enabled:!1,ids:[]},OnePerCheckpoint:{enabled:!1,ids:[]},OnePerArea:{enabled:!1,ids:[]},EveryAreaLead:{enabled:!1,ids:[]},OneLeadPerArea:{enabled:!1,ids:[]}}),u=O(null),h=O(""),p=O(""),f=O(!r.isEditing);let v=!0,b=!1;const C=ae(()=>a.value.filter(V=>!r.excludeScopes.includes(V.scope))),S=ae(()=>f.value?C.value:C.value.filter(V=>q(V.scope))),$=ae(()=>C.value.filter(J=>q(J.scope)).length<C.value.length),R=ae(()=>{const V=C.value.filter(J=>q(J.scope)).length;return C.value.length-V});je(()=>r.modelValue,V=>{if(V){if(b){b=!1;return}v=!0,Object.keys(l.value).forEach(J=>{l.value[J]={enabled:!1,ids:[]}}),V.forEach(J=>{J.scope==="Everyone"?l.value.SpecificPeople={enabled:!0,ids:["ALL_MARSHALS"]}:J.scope==="AreaLead"?l.value.EveryAreaLead={enabled:!0,ids:[...J.ids]}:l.value[J.scope]&&(l.value[J.scope]={enabled:!0,ids:[...J.ids]})}),v=!1}},{immediate:!0});const A=()=>{const V=[];return Object.keys(l.value).forEach(J=>{const te=l.value[J];if(te.enabled){const we={scope:J,itemType:x(J),ids:[...te.ids]};V.push(we)}}),V};je(l,()=>{if(v)return;if(Object.keys(l.value).some(te=>te!=="SpecificPeople"&&l.value[te].enabled)&&l.value.SpecificPeople?.ids.includes("ALL_MARSHALS")){const te=l.value.SpecificPeople.ids.indexOf("ALL_MARSHALS");l.value.SpecificPeople.ids.splice(te,1),l.value.SpecificPeople.ids.length===0&&(l.value.SpecificPeople.enabled=!1)}b=!0;const J=A();s("update:modelValue",J),s("user-changed")},{deep:!0});const x=V=>w(V)?"Area":M(V)?"Checkpoint":k(V)?"Marshal":null,w=V=>V==="EveryoneInAreas"||V==="OnePerArea"||V==="EveryAreaLead"||V==="OneLeadPerArea",M=V=>V==="EveryoneAtCheckpoints"||V==="OnePerCheckpoint",k=V=>V==="SpecificPeople",I=V=>{const J=a.value.find(te=>te.scope===V);return J?J.label:V},E=V=>({SpecificPeople:`Select "Everyone at the event" or choose specific ${i.value.people} who must complete this (personal completion)`,EveryoneAtCheckpoints:`Every ${i.value.person} at the selected ${i.value.checkpoints} must complete this (personal completion)`,OnePerCheckpoint:`One completion needed at each selected ${i.value.checkpoint} (shared completion)`,OnePerArea:`One completion needed in each selected ${i.value.area} (shared completion)`,EveryoneInAreas:`Every ${i.value.person} in the selected ${i.value.areas} must complete this (personal completion)`,EveryAreaLead:`Every ${i.value.area} lead at the selected ${i.value.areas} must complete this individually (personal completion)`,OneLeadPerArea:`One completion per ${i.value.area}, only ${i.value.area} leads can complete (shared among leads)`})[V]||"",q=V=>l.value[V]?.enabled||!1,U=V=>{const J=l.value[V];if(!J||!J.enabled)return"No";const te=J.ids||[];if(w(V)){if(te.includes("ALL_AREAS"))return`All ${i.value.areas}`;const we=te.length;return we>0?`${we} ${we!==1?i.value.areas:i.value.area}`:`Select ${i.value.areas}...`}if(M(V)){if(te.includes("ALL_CHECKPOINTS"))return`All ${i.value.checkpoints}`;const we=te.length;return we>0?`${we} ${we!==1?i.value.checkpoints:i.value.checkpoint}`:`Select ${i.value.checkpoints}...`}if(k(V)){if(te.includes("ALL_MARSHALS"))return"Everyone";const we=te.length;return we>0?`${we} ${we!==1?i.value.people:i.value.person}`:`Select ${i.value.people}...`}return"Configured"},Q=V=>{u.value=V,h.value="",p.value=""},ce=()=>{u.value=null},re=()=>{u.value&&(l.value[u.value]={enabled:!1,ids:[]}),ce()},Le=()=>u.value&&l.value[u.value]?.ids.includes("ALL_MARSHALS"),Z=()=>{if(!u.value)return;const V=l.value[u.value];Le()?(V.ids=[],V.enabled=!1):(V.ids=["ALL_MARSHALS"],V.enabled=!0)},W=V=>u.value&&l.value[u.value]?.ids.includes(V),Y=V=>{if(!u.value)return;const J=l.value[u.value],te=J.ids.indexOf(V);te>=0?(J.ids.splice(te,1),J.ids.length===0&&(J.enabled=!1)):(J.ids.push(V),J.enabled=!0)},me=ae(()=>{if(!p.value)return r.marshals;const V=p.value.toLowerCase();return r.marshals.filter(J=>J.name.toLowerCase().includes(V)||J.email&&J.email.toLowerCase().includes(V))}),he=()=>u.value&&l.value[u.value]?.ids.includes("ALL_AREAS"),Ae=()=>{if(!u.value)return;const V=l.value[u.value];he()?(V.ids=[],V.enabled=!1):(V.ids=["ALL_AREAS"],V.enabled=!0)},ee=V=>u.value&&l.value[u.value]?.ids.includes(V),ve=V=>{if(!u.value)return;const J=l.value[u.value],te=J.ids.indexOf(V);te>=0?(J.ids.splice(te,1),J.ids.length===0&&(J.enabled=!1)):(J.ids.push(V),J.enabled=!0)},Ee=()=>u.value&&l.value[u.value]?.ids.includes("ALL_CHECKPOINTS"),Be=()=>{if(!u.value)return;const V=l.value[u.value];Ee()?(V.ids=[],V.enabled=!1):(V.ids=["ALL_CHECKPOINTS"],V.enabled=!0)},ge=V=>u.value&&l.value[u.value]?.ids.includes(V),ue=V=>{if(!u.value)return;const J=l.value[u.value],te=J.ids.indexOf(V);te>=0?(J.ids.splice(te,1),J.ids.length===0&&(J.enabled=!1)):(J.ids.push(V),J.enabled=!0)},pe=ae(()=>{let V=r.locations;if(h.value){const J=h.value.toLowerCase();V=V.filter(te=>te.name.toLowerCase().includes(J)||te.description&&te.description.toLowerCase().includes(J))}return[...V].sort((J,te)=>fn(J.name,te.name))});return(V,J)=>(g(),y("div",KS,[d("div",YS,[d("h4",null,T(e.headerText),1)]),d("div",JS,[(g(!0),y(ke,null,$e(S.value,te=>(g(),y("div",{key:te.scope,class:Fe(["scope-type-row",{active:q(te.scope)}]),onClick:we=>Q(te.scope)},[d("div",QS,T(te.label),1),d("div",eM,T(U(te.scope)),1)],10,XS))),128)),$.value?(g(),y("div",{key:0,class:"expand-row",onClick:J[0]||(J[0]=te=>f.value=!f.value)},[d("div",tM,T(f.value?"Show less":`Show ${R.value} more option${R.value!==1?"s":""}...`),1),d("div",nM,T(f.value?"":""),1)])):B("",!0)]),u.value?(g(),y("div",{key:0,class:"scope-config-modal",onClick:Tt(ce,["self"])},[d("div",sM,[d("div",iM,[d("h5",null,T(I(u.value)),1),d("button",{onClick:ce,class:"btn-close",type:"button"},"")]),d("div",oM,[d("p",aM,T(E(u.value)),1),k(u.value)?(g(),y("div",rM,[d("label",lM,[d("input",{type:"checkbox",checked:Le(),onChange:Z},null,40,cM),d("span",null,[J[3]||(J[3]=d("strong",null,"Everyone at the event",-1)),Ve(" (all current and future "+T(F(i).people)+")",1)])]),Le()?B("",!0):(g(),y("div",uM,[De(d("input",{"onUpdate:modelValue":J[1]||(J[1]=te=>p.value=te),type:"text",placeholder:`Search ${F(i).people}...`,class:"search-input"},null,8,dM),[[it,p.value]]),d("div",hM,[(g(!0),y(ke,null,$e(me.value,te=>(g(),y("label",{key:te.id,class:"checkbox-label"},[d("input",{type:"checkbox",checked:W(te.id),onChange:we=>Y(te.id)},null,40,fM),d("span",null,T(te.name),1)]))),128))])]))])):B("",!0),w(u.value)?(g(),y("div",pM,[d("label",mM,[d("input",{type:"checkbox",checked:he(),onChange:Ae},null,40,vM),d("span",null,[d("strong",null,"All "+T(F(i).areas),1),Ve(" (includes future "+T(F(i).areas)+")",1)])]),he()?B("",!0):(g(),y("div",gM,[d("div",_M,[(g(!0),y(ke,null,$e(e.areas,te=>(g(),y("label",{key:te.id,class:"checkbox-label"},[d("input",{type:"checkbox",checked:ee(te.id),onChange:we=>ve(te.id)},null,40,yM),d("span",{class:"area-color-dot",style:tn({backgroundColor:te.color||"#667eea"})},null,4),d("span",null,T(te.name),1)]))),128))])]))])):B("",!0),M(u.value)?(g(),y("div",bM,[d("label",kM,[d("input",{type:"checkbox",checked:Ee(),onChange:Be},null,40,wM),d("span",null,[d("strong",null,"All "+T(F(i).checkpoints),1),Ve(" (includes future "+T(F(i).checkpoints)+")",1)])]),Ee()?B("",!0):(g(),y("div",CM,[De(d("input",{"onUpdate:modelValue":J[2]||(J[2]=te=>h.value=te),type:"text",placeholder:`Search ${F(i).checkpoints}...`,class:"search-input"},null,8,LM),[[it,h.value]]),d("div",xM,[(g(!0),y(ke,null,$e(pe.value,te=>(g(),y("label",{key:te.id,class:"checkbox-label"},[d("input",{type:"checkbox",checked:ge(te.id),onChange:we=>ue(te.id)},null,40,AM),d("div",IM,[d("span",TM,T(te.name),1),te.description?(g(),y("span",EM," - "+T(te.description),1)):B("",!0)])]))),128))])]))])):B("",!0)]),d("div",{class:"modal-footer"},[d("button",{onClick:re,class:"btn btn-secondary",type:"button"},"Deselect all"),d("button",{onClick:ce,class:"btn btn-primary",type:"button"},"Done")])])])):B("",!0)]))}},qc=Ze(SM,[["__scopeId","data-v-e1e2471d"]]),MM=["innerHTML"],PM={__name:"InfoModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Information"},message:{type:String,required:!0},okText:{type:String,default:"OK"}},emits:["close"],setup(e,{emit:n}){const i=n,r=()=>{i("close")};return(s,a)=>(g(),nt(Ft,{show:e.show,title:e.title,size:"small","z-index":2e3,onClose:r},{actions:We(()=>[d("button",{onClick:r,class:"btn btn-primary"},T(e.okText),1)]),default:We(()=>[d("div",{class:"info-content",innerHTML:e.message},null,8,MM)]),_:1},8,["show","title"]))}},Jr=Ze(PM,[["__scopeId","data-v-897177d3"]]),$M={class:"tab-headers"},OM={class:"tab-content"},DM={class:"form-group"},RM=["placeholder"],NM={key:0,class:"checkbox-label-inline create-separate-items"},BM={class:"tab-content"},FM={class:"custom-footer"},zM={__name:"EditChecklistItemModal",props:{show:{type:Boolean,default:!1},checklistItem:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=O(!1),a=O(""),l=O("details"),u=O({text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0}),h=ae(()=>!!i.checklistItem);je(()=>i.show,A=>{A&&(l.value=i.initialTab,i.checklistItem?u.value={text:i.checklistItem.text||"",scopeConfigurations:i.checklistItem.scopeConfigurations?JSON.parse(JSON.stringify(i.checklistItem.scopeConfigurations)):[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:i.checklistItem.displayOrder||0,isRequired:i.checklistItem.isRequired!==!1,visibleFrom:i.checklistItem.visibleFrom?p(i.checklistItem.visibleFrom):null,visibleUntil:i.checklistItem.visibleUntil?p(i.checklistItem.visibleUntil):null,mustCompleteBy:i.checklistItem.mustCompleteBy?p(i.checklistItem.mustCompleteBy):null,createSeparateItems:!1}:u.value={text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0},r("update:isDirty",!1))});const p=A=>{if(!A)return null;const x=new Date(A),w=x.getTimezoneOffset();return new Date(x.getTime()-w*60*1e3).toISOString().slice(0,16)},f=A=>A?new Date(A).toISOString():null,v=()=>{r("update:isDirty",!0)},b=()=>{r("close")},C=()=>{l.value="visibility"},S=A=>{a.value=A,s.value=!0},$=()=>{if(!u.value.text||!u.value.text.trim()){S("Please enter checklist item text");return}if(!u.value.scopeConfigurations||u.value.scopeConfigurations.length===0){S("Please select at least one scope");return}if(!u.value.scopeConfigurations.some(w=>!(w.itemType!==null&&(!w.ids||w.ids.length===0)))){S("Please configure at least one scope with valid selections");return}const x={text:u.value.text,scopeConfigurations:u.value.scopeConfigurations,displayOrder:u.value.displayOrder||0,isRequired:u.value.isRequired,visibleFrom:f(u.value.visibleFrom),visibleUntil:f(u.value.visibleUntil),mustCompleteBy:f(u.value.mustCompleteBy)};h.value||(x.createSeparateItems=u.value.createSeparateItems),r("save",x)},R=()=>{r("delete",i.checklistItem.itemId)};return(A,x)=>(g(),y(ke,null,[Oe(Ft,{show:e.show,title:h.value?"Edit checklist item":"Create checklist item",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:b},{footer:We(()=>[d("div",FM,[h.value?(g(),y("button",{key:0,type:"button",onClick:R,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(g(),y("button",{key:1,type:"button",onClick:C,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(g(),y("button",{key:2,type:"button",onClick:$,class:"btn btn-primary"},T(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:We(()=>[d("div",$M,[d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="details"}]),onClick:x[0]||(x[0]=w=>l.value="details")}," Details ",2),d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="visibility"}]),onClick:x[1]||(x[1]=w=>l.value="visibility")}," Visibility ",2)]),d("form",{onSubmit:Tt($,["prevent"]),class:"checklist-form"},[De(d("div",OM,[d("div",DM,[x[7]||(x[7]=d("label",{for:"text"},"Checklist text: *",-1)),De(d("textarea",{id:"text","onUpdate:modelValue":x[2]||(x[2]=w=>u.value.text=w),onInput:v,required:"",rows:"3",placeholder:u.value.createSeparateItems?"Enter checklist items, one per line...":"Enter the checklist item text..."},null,40,RM),[[it,u.value.text]]),h.value?B("",!0):(g(),y("label",NM,[De(d("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=w=>u.value.createSeparateItems=w),onChange:v},null,544),[[Wi,u.value.createSeparateItems]]),x[6]||(x[6]=d("span",null,"Each line creates a new item",-1))]))])],512),[[Ws,l.value==="details"]]),De(d("div",BM,[Oe(qc,{modelValue:u.value.scopeConfigurations,"onUpdate:modelValue":x[4]||(x[4]=w=>u.value.scopeConfigurations=w),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,onUserChanged:v},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ws,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Oe(Jr,{show:s.value,title:"Validation Error",message:a.value,onClose:x[5]||(x[5]=w=>s.value=!1)},null,8,["show","message"])],64))}},UM=Ze(zM,[["__scopeId","data-v-2c532f20"]]),HM={class:"tab-headers"},VM={class:"tab-content"},ZM={class:"form-group"},qM={class:"form-group"},jM={class:"form-row"},WM={class:"form-group"},GM={class:"form-group"},KM={class:"form-row"},YM={class:"form-group"},JM={class:"form-group checkbox-group-inline"},XM={class:"checkbox-label-inline"},QM={class:"tab-content"},eP={class:"custom-footer"},tP={__name:"EditNoteModal",props:{show:{type:Boolean,default:!1},note:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=O(!1),a=O(""),l=O("details"),u=O({title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1}),h=ae(()=>!!i.note);je(()=>i.show,$=>{$&&(l.value=i.initialTab,i.note?u.value={title:i.note.title||"",content:i.note.content||"",scopeConfigurations:i.note.scopeConfigurations?JSON.parse(JSON.stringify(i.note.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:i.note.displayOrder||0,priority:i.note.priority||"Normal",category:i.note.category||"",isPinned:i.note.isPinned||!1}:u.value={title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1},r("update:isDirty",!1))});const p=()=>{r("update:isDirty",!0)},f=()=>{r("close")},v=()=>{l.value="visibility"},b=$=>{a.value=$,s.value=!0},C=()=>{if(!u.value.title||!u.value.title.trim()){b("Please enter a note title");return}if(!u.value.scopeConfigurations||u.value.scopeConfigurations.length===0){b("Please select at least one visibility scope");return}if(!u.value.scopeConfigurations.some(A=>!(A.itemType!==null&&(!A.ids||A.ids.length===0)))){b("Please configure at least one scope with valid selections");return}const R={title:u.value.title.trim(),content:u.value.content||"",scopeConfigurations:u.value.scopeConfigurations,displayOrder:u.value.displayOrder||0,priority:u.value.priority||"Normal",category:u.value.category?.trim()||null,isPinned:u.value.isPinned||!1};r("save",R)},S=()=>{r("delete",i.note.noteId)};return($,R)=>(g(),y(ke,null,[Oe(Ft,{show:e.show,title:h.value?"Edit note":"Create note",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:f},{footer:We(()=>[d("div",eP,[h.value?(g(),y("button",{key:0,type:"button",onClick:S,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(g(),y("button",{key:1,type:"button",onClick:v,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(g(),y("button",{key:2,type:"button",onClick:C,class:"btn btn-primary"},T(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:We(()=>[d("div",HM,[d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="details"}]),onClick:R[0]||(R[0]=A=>l.value="details")}," Details ",2),d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="visibility"}]),onClick:R[1]||(R[1]=A=>l.value="visibility")}," Visibility ",2)]),d("form",{onSubmit:Tt(C,["prevent"]),class:"note-form"},[De(d("div",VM,[d("div",ZM,[R[10]||(R[10]=d("label",{for:"title"},"Title: *",-1)),De(d("input",{id:"title","onUpdate:modelValue":R[2]||(R[2]=A=>u.value.title=A),type:"text",onInput:p,required:"",placeholder:"Enter note title..."},null,544),[[it,u.value.title]])]),d("div",qM,[R[11]||(R[11]=d("label",{for:"content"},"Content:",-1)),De(d("textarea",{id:"content","onUpdate:modelValue":R[3]||(R[3]=A=>u.value.content=A),onInput:p,rows:"6",placeholder:"Enter note content (supports markdown)..."},null,544),[[it,u.value.content]])]),d("div",jM,[d("div",WM,[R[13]||(R[13]=d("label",{for:"priority"},"Priority:",-1)),De(d("select",{id:"priority","onUpdate:modelValue":R[4]||(R[4]=A=>u.value.priority=A),onChange:p},[...R[12]||(R[12]=[d("option",{value:"Urgent"},"Urgent",-1),d("option",{value:"High"},"High",-1),d("option",{value:"Normal"},"Normal",-1),d("option",{value:"Low"},"Low",-1)])],544),[[_n,u.value.priority]])]),d("div",GM,[R[14]||(R[14]=d("label",{for:"category"},"Category:",-1)),De(d("input",{id:"category","onUpdate:modelValue":R[5]||(R[5]=A=>u.value.category=A),type:"text",onInput:p,placeholder:"e.g., Safety, Logistics..."},null,544),[[it,u.value.category]])])]),d("div",KM,[d("div",YM,[R[15]||(R[15]=d("label",{for:"displayOrder"},"Display order:",-1)),De(d("input",{id:"displayOrder","onUpdate:modelValue":R[6]||(R[6]=A=>u.value.displayOrder=A),type:"number",onInput:p,min:"0"},null,544),[[it,u.value.displayOrder,void 0,{number:!0}]]),R[16]||(R[16]=d("span",{class:"help-text"},"Lower numbers appear first",-1))]),d("div",JM,[d("label",XM,[De(d("input",{type:"checkbox","onUpdate:modelValue":R[7]||(R[7]=A=>u.value.isPinned=A),onChange:p},null,544),[[Wi,u.value.isPinned]]),R[17]||(R[17]=d("span",null,"Pin to top",-1))]),R[18]||(R[18]=d("span",{class:"help-text"},"Pinned notes always appear at the top",-1))])])],512),[[Ws,l.value==="details"]]),De(d("div",QM,[Oe(qc,{modelValue:u.value.scopeConfigurations,"onUpdate:modelValue":R[8]||(R[8]=A=>u.value.scopeConfigurations=A),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this note?",onUserChanged:p},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ws,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Oe(Jr,{show:s.value,title:"Validation Error",message:a.value,onClose:R[9]||(R[9]=A=>s.value=!1)},null,8,["show","message"])],64))}},nP=Ze(tP,[["__scopeId","data-v-0ffed598"]]),sP={class:"tab-headers"},iP={class:"tab-content"},oP={class:"form-group"},aP={for:"marshalId"},rP=["value"],lP={class:"help-text"},cP={class:"form-group"},uP=["disabled"],dP={class:"form-group"},hP={class:"role-input-group"},fP={key:0,label:"Built-in Roles"},pP=["value"],mP={key:1,label:"Custom Roles"},vP=["value"],gP={class:"form-row"},_P={class:"form-group"},yP={class:"form-group"},bP={class:"form-group"},kP={class:"tab-content"},wP={class:"custom-footer"},CP={__name:"EditContactModal",props:{show:{type:Boolean,default:!1},contact:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})},isDirty:{type:Boolean,default:!1},preselectedArea:{type:Object,default:null}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const{terms:i}=ht(),r=e,s=n,a=O(!1),l=O(""),u=O("details"),h=O(!1),p=O({role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}),f=ae(()=>!!r.contact),v=ae(()=>!!p.value.marshalId),b=ae(()=>[...r.marshals].sort((k,I)=>fn(k.name,I.name)));je(()=>r.show,k=>{if(k){if(u.value=r.initialTab,r.contact){const I=[...r.availableRoles.builtInRoles||[],...r.availableRoles.customRoles||[]];h.value=r.contact.role&&!I.includes(r.contact.role),p.value={role:r.contact.role||"",name:r.contact.name||"",phone:r.contact.phone||"",email:r.contact.email||"",notes:r.contact.notes||"",marshalId:r.contact.marshalId||null,scopeConfigurations:r.contact.scopeConfigurations?JSON.parse(JSON.stringify(r.contact.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}}else{h.value=!1;const I=r.preselectedArea?[{scope:"EveryoneInAreas",itemType:"Area",ids:[r.preselectedArea.id]}]:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}];p.value={role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:I}}s("update:isDirty",!1)}});const C=k=>k?k==="AreaLead"?`${i.value.area} Lead`:k.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase()).trim():"",S=()=>{s("update:isDirty",!0)},$=()=>{if(p.value.marshalId){const k=r.marshals.find(I=>I.id===p.value.marshalId);k&&(p.value.name=k.name,!p.value.phone&&k.phoneNumber&&(p.value.phone=k.phoneNumber),!p.value.email&&k.email&&(p.value.email=k.email))}S()},R=()=>{s("close")},A=()=>{if(!p.value.role||!p.value.role.trim()){x("Please select or enter a role");return}if(!p.value.name||!p.value.name.trim()){x("Please enter a contact name");return}u.value="visibility"},x=k=>{l.value=k,a.value=!0},w=()=>{if(!p.value.role||!p.value.role.trim()){x("Please select or enter a role");return}if(!p.value.name||!p.value.name.trim()){x("Please enter a contact name");return}if(!p.value.scopeConfigurations||p.value.scopeConfigurations.length===0){x("Please select at least one visibility scope");return}if(!p.value.scopeConfigurations.some(E=>!(E.itemType!==null&&(!E.ids||E.ids.length===0)))){x("Please configure at least one scope with valid selections");return}const I={role:p.value.role.trim(),name:p.value.name.trim(),phone:p.value.phone?.trim()||null,email:p.value.email?.trim()||null,notes:p.value.notes?.trim()||null,marshalId:p.value.marshalId||null,scopeConfigurations:p.value.scopeConfigurations};s("save",I)},M=()=>{s("delete",r.contact.contactId)};return(k,I)=>(g(),y(ke,null,[Oe(Ft,{show:e.show,title:f.value?"Edit contact":"Create contact",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:R},{footer:We(()=>[d("div",wP,[f.value?(g(),y("button",{key:0,type:"button",onClick:M,class:"btn btn-danger"}," Delete ")):B("",!0),!f.value&&u.value==="details"?(g(),y("button",{key:1,type:"button",onClick:A,class:"btn btn-primary"}," Next ")):B("",!0),f.value||u.value==="visibility"?(g(),y("button",{key:2,type:"button",onClick:w,class:"btn btn-primary"},T(f.value?"Save changes":"Create"),1)):B("",!0)])]),default:We(()=>[d("div",sP,[d("button",{type:"button",class:Fe(["tab-header",{active:u.value==="details"}]),onClick:I[0]||(I[0]=E=>u.value="details")}," Details ",2),d("button",{type:"button",class:Fe(["tab-header",{active:u.value==="visibility"}]),onClick:I[1]||(I[1]=E=>u.value="visibility")}," Visibility ",2)]),d("form",{onSubmit:Tt(w,["prevent"]),class:"contact-form"},[De(d("div",iP,[d("div",oP,[d("label",aP,"Link to "+T(F(i).person.toLowerCase())+":",1),De(d("select",{id:"marshalId","onUpdate:modelValue":I[2]||(I[2]=E=>p.value.marshalId=E),onChange:$},[I[12]||(I[12]=d("option",{value:null},"-- Not linked --",-1)),(g(!0),y(ke,null,$e(b.value,E=>(g(),y("option",{key:E.id,value:E.id},T(E.name),9,rP))),128))],544),[[_n,p.value.marshalId]]),d("span",lP,"Optionally link to an existing "+T(F(i).person.toLowerCase())+" in the system",1)]),d("div",cP,[I[13]||(I[13]=d("label",{for:"name"},"Name: *",-1)),De(d("input",{id:"name","onUpdate:modelValue":I[3]||(I[3]=E=>p.value.name=E),type:"text",onInput:S,disabled:v.value,class:Fe({"input-disabled":v.value}),placeholder:"Contact name..."},null,42,uP),[[it,p.value.name]])]),d("div",dP,[I[15]||(I[15]=d("label",{for:"role"},"Role: *",-1)),d("div",hP,[h.value?De((g(),y("input",{key:1,id:"customRole","onUpdate:modelValue":I[5]||(I[5]=E=>p.value.role=E),type:"text",onInput:S,placeholder:"Enter custom role name..."},null,544)),[[it,p.value.role]]):De((g(),y("select",{key:0,id:"role","onUpdate:modelValue":I[4]||(I[4]=E=>p.value.role=E),onChange:S},[I[14]||(I[14]=d("option",{value:"",disabled:""},"Select a role...",-1)),e.availableRoles.builtInRoles?.length>0?(g(),y("optgroup",fP,[(g(!0),y(ke,null,$e(e.availableRoles.builtInRoles,E=>(g(),y("option",{key:E,value:E},T(C(E)),9,pP))),128))])):B("",!0),e.availableRoles.customRoles?.length>0?(g(),y("optgroup",mP,[(g(!0),y(ke,null,$e(e.availableRoles.customRoles,E=>(g(),y("option",{key:E,value:E},T(C(E)),9,vP))),128))])):B("",!0)],544)),[[_n,p.value.role]]),d("button",{type:"button",class:"toggle-custom-btn",onClick:I[6]||(I[6]=E=>h.value=!h.value)},T(h.value?"Use existing":"Custom"),1)])]),d("div",gP,[d("div",_P,[I[16]||(I[16]=d("label",{for:"phone"},"Phone:",-1)),De(d("input",{id:"phone","onUpdate:modelValue":I[7]||(I[7]=E=>p.value.phone=E),type:"tel",onInput:S,placeholder:"Phone number..."},null,544),[[it,p.value.phone]])]),d("div",yP,[I[17]||(I[17]=d("label",{for:"email"},"Email:",-1)),De(d("input",{id:"email","onUpdate:modelValue":I[8]||(I[8]=E=>p.value.email=E),type:"email",onInput:S,placeholder:"Email address..."},null,544),[[it,p.value.email]])])]),d("div",bP,[I[18]||(I[18]=d("label",{for:"notes"},"Notes / Instructions:",-1)),De(d("textarea",{id:"notes","onUpdate:modelValue":I[9]||(I[9]=E=>p.value.notes=E),onInput:S,rows:"3",placeholder:"Additional notes or instructions for when to contact..."},null,544),[[it,p.value.notes]])])],512),[[Ws,u.value==="details"]]),De(d("div",kP,[Oe(qc,{modelValue:p.value.scopeConfigurations,"onUpdate:modelValue":I[10]||(I[10]=E=>p.value.scopeConfigurations=E),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":f.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this contact?",onUserChanged:S},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ws,u.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Oe(Jr,{show:a.value,title:"Validation Error",message:l.value,onClose:I[11]||(I[11]=E=>a.value=!1)},null,8,["show","message"])],64))}},LP=Ze(CP,[["__scopeId","data-v-cc705819"]]),xP={key:0,class:"fullscreen-map-overlay"},AP={class:"fullscreen-map-header"},IP={class:"context-info"},TP={key:0},EP={class:"action-buttons"},SP=["disabled"],MP={class:"fullscreen-map-container"},PP=Object.assign({inheritAttrs:!1},{__name:"FullscreenMapOverlay",props:{show:{type:Boolean,required:!0},mode:{type:String,validator:e=>["place-checkpoint","move-checkpoint","draw-area","add-multiple"].includes(e)},contextTitle:{type:String,default:""},contextDescription:{type:String,default:""},canComplete:{type:Boolean,default:!1}},emits:["done","cancel","map-click","polygon-complete","polygon-drawing","location-click","area-click"],setup(e,{emit:n}){const i=e,r=n,s=()=>{r("done")},a=()=>{r("cancel")},l=u=>{u.key==="Escape"&&i.show&&a()};return kn(()=>{document.addEventListener("keydown",l)}),As(()=>{document.removeEventListener("keydown",l)}),(u,h)=>(g(),nt(Um,{to:"body"},[e.show?(g(),y("div",xP,[d("div",AP,[d("div",IP,[d("h3",null,T(e.contextTitle),1),e.contextDescription?(g(),y("p",TP,T(e.contextDescription),1)):B("",!0)]),d("div",EP,[d("button",{onClick:a,class:"btn btn-cancel"}," Cancel "),d("button",{onClick:s,class:"btn btn-done",disabled:!e.canComplete}," Done ",8,SP)])]),d("div",MP,[Oe(ca,lf(u.$attrs,{onMapClick:h[0]||(h[0]=p=>u.$emit("map-click",p)),onPolygonComplete:h[1]||(h[1]=p=>u.$emit("polygon-complete",p)),onPolygonDrawing:h[2]||(h[2]=p=>u.$emit("polygon-drawing",p)),onLocationClick:h[3]||(h[3]=p=>u.$emit("location-click",p)),onAreaClick:h[4]||(h[4]=p=>u.$emit("area-click",p))}),null,16)])])):B("",!0)]))}}),$P=Ze(PP,[["__scopeId","data-v-b1a57a82"]]),OP={class:"form-group"},DP={class:"form-group"},RP={class:"form-group"},NP={key:0,class:"form-error"},BP={class:"form-row"},FP={class:"form-group",style:{flex:"1"}},zP={class:"form-group",style:{flex:"1"}},UP={class:"form-group",style:{flex:"0 0 auto"}},HP={class:"form-group"},VP={__name:"AddLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:()=>({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""})},isDirty:{type:Boolean,default:!1}},emits:["close","save","set-on-map","update:isDirty","update:location"],setup(e,{emit:n}){const{termsLower:i}=ht(),r=e,s=n,a=O({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""});je(()=>r.location,p=>{p&&(a.value={...p})},{immediate:!0,deep:!0});const l=()=>{s("update:isDirty",!0),s("update:location",{...a.value})},u=()=>{if(!Cr(a.value.what3Words)&&a.value.what3Words){alert("Invalid What3Words format.");return}s("save",a.value)},h=()=>{s("close")};return(p,f)=>(g(),nt(Ft,{show:e.show,title:`Add ${F(i).checkpoint}`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:h},{actions:We(()=>[d("button",{type:"button",onClick:h,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:u,class:"btn btn-primary"}," Add "+T(F(i).checkpoint),1)]),default:We(()=>[d("form",{onSubmit:Tt(u,["prevent"])},[d("div",OP,[f[7]||(f[7]=d("label",null,"Name",-1)),De(d("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>a.value.name=v),type:"text",required:"",class:"form-input",onInput:l},null,544),[[it,a.value.name]])]),d("div",DP,[f[8]||(f[8]=d("label",null,"Description",-1)),De(d("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>a.value.description=v),type:"text",class:"form-input",onInput:l},null,544),[[it,a.value.description]])]),d("div",RP,[f[9]||(f[9]=d("label",null,"What3Words (optional)",-1)),De(d("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>a.value.what3Words=v),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap",onInput:l},null,544),[[it,a.value.what3Words]]),a.value.what3Words&&!F(Cr)(a.value.what3Words)?(g(),y("small",NP," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),d("div",BP,[d("div",FP,[f[10]||(f[10]=d("label",null,"Longitude",-1)),De(d("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>a.value.longitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[it,a.value.longitude,void 0,{number:!0}]])]),d("div",zP,[f[11]||(f[11]=d("label",null,"Latitude",-1)),De(d("input",{"onUpdate:modelValue":f[4]||(f[4]=v=>a.value.latitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[it,a.value.latitude,void 0,{number:!0}]])]),d("div",UP,[f[12]||(f[12]=d("label",null,"",-1)),d("button",{type:"button",class:"icon-btn",title:"Set location on map",onClick:f[5]||(f[5]=v=>p.$emit("set-on-map"))},"  ")])]),d("div",HP,[d("label",null,"Required "+T(F(i).people),1),De(d("input",{"onUpdate:modelValue":f[6]||(f[6]=v=>a.value.requiredMarshals=v),type:"number",min:"1",required:"",class:"form-input",onInput:l},null,544),[[it,a.value.requiredMarshals,void 0,{number:!0}]])])],32)]),_:1},8,["show","title","is-dirty"]))}},ZP=Ze(VP,[["__scopeId","data-v-dcbdc216"]]),qP={class:"admin-event-manage"},jP={class:"header"},WP={class:"header-left"},GP={key:0},KP={class:"event-date"},YP={class:"header-actions"},JP={class:"container"},XP={class:"tabs-nav"},QP={class:"tab-content-wrapper"},e$={key:1,class:"tab-panel"},t$={key:2,class:"tab-panel"},n$={__name:"AdminEventManage",setup(e){const n=Fc(),i=pa(),r=sp(),{activeTab:s,switchTab:a}=ip("details",["details","course","areas","checkpoints","marshals","notes","checklists","contacts"]),{showConfirmModal:l,confirmModalTitle:u,confirmModalMessage:h,showConfirm:p,handleConfirmModalConfirm:f,handleConfirmModalCancel:v}=lw(),{tabLabels:b,termsLower:C}=ht(),S=ae(()=>[{value:"details",label:"Event details",icon:"details"},{value:"course",label:b.value.course,icon:"course"},{value:"areas",label:b.value.areas,icon:"area"},{value:"checkpoints",label:b.value.checkpoints,icon:"checkpoint"},{value:"marshals",label:b.value.marshals,icon:"marshal"},{value:"notes",label:"Notes",icon:"notes"},{value:"checklists",label:b.value.checklists,icon:"checklist"},{value:"contacts",label:"Contacts",icon:"contacts"}]),$=O(null),R=O([]),A=O([]),x=O(null),w=O(!1),M=O(null),k=O(!1),I=O(!1),E=O(null),q=O(""),U=O([]),Q=O(!1),ce=O(!1),re=O(!1),Le=O(null),Z=O(!1),W=O(!1),Y=O(!1),me=O(!1),he=O(null),Ae=O(null),ee=O(null),ve=O(!1),Ee=O(!1),Be=O({id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),ge=O(!1),ue=O(!1),pe=O({marshalName:"",locations:[],marshal:null}),V=O(null),J=O([]),te=O(!1),we=O(null),Xe=O({id:"",name:"",email:"",phoneNumber:"",notes:""}),D=O(!1),z=O([]),j=O([]),le=O([]),fe=O([]),de=O(!1),Ie=O(""),Te=O(""),xe=O({name:"",description:"",eventDate:"",timeZoneId:"UTC",peopleTerm:"Marshals",checkpointTerm:"Checkpoints",areaTerm:"Areas",checklistTerm:"Checklists",courseTerm:"Course"}),_e=O(!1),ze=O(!1),Me=O(""),Ue=O(""),Ge=O(0),Ke=O({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),Je=O([]),He=O(null),vt=O(!1),xt=O(null),Ct=O(!1),gt=O(null),nn=O(!1),jt=O(1),yt=O(!1),et=O(null),St=O({}),bt=O(null),es=O(null),vn=O(null),qn=O([]),ne=O(null),X=O(null),se=O([]),Pe=O(null),rt=O(!1),At=O("details"),En=O(null),Sn=O([]),ts=O(null),Ci=O(!1),io=O("details"),oo=O([]),cn=O({builtInRoles:[],customRoles:[]}),Ne=O(null),ns=O(!1),Ts=O("details"),Ys=O(null),ao=O(null),ro=ae(()=>ao.value?.marshalId!=null),ya=()=>{i.push(`/event/${n.params.eventId}`)},Es=ae(()=>`${window.location.origin}/#/event/${n.params.eventId}`),lo=ae(()=>{const N=[];return A.value.forEach(G=>{G.assignments&&N.push(...G.assignments)}),N}),Xr=ae(()=>{if(!we.value)return A.value;const N=we.value.assignedLocationIds||[],G=le.value.map(Ce=>Ce.locationId),be=fe.value;return A.value.filter(Ce=>!N.includes(Ce.id)&&!G.includes(Ce.id)||be.includes(Ce.id))}),ba=ae(()=>{let N=J.value;if(x.value){const G=x.value.assignments.map(Ce=>Ce.marshalName),be=z.value.map(Ce=>Ce.marshalName);N=J.value.filter(Ce=>!G.includes(Ce.name)&&!be.includes(Ce.name))}return N.slice().sort((G,be)=>G.name.localeCompare(be.name))}),Qr=ae(()=>et.value==="place-checkpoint"||et.value==="move-checkpoint"?bt.value!==null:et.value==="draw-area"?He.value?.polygon?.length>0||vn.value&&vn.value.length>=3:et.value==="add-multiple"),el=ae(()=>{const N=[...A.value];return et.value==="place-checkpoint"&&bt.value&&N.push({id:"temp-single",name:Ke.value.name||"New Checkpoint",latitude:bt.value.lat,longitude:bt.value.lng,requiredMarshals:Ke.value.requiredMarshals||1,assignments:[],isTemporary:!0}),et.value==="move-checkpoint"&&bt.value&&x.value&&N.push({id:"temp-move",name:x.value.name+" (new position)",latitude:bt.value.lat,longitude:bt.value.lng,requiredMarshals:x.value.requiredMarshals,assignments:[],isTemporary:!0}),et.value==="add-multiple"&&N.push(...qn.value),N}),ka=ae(()=>{const N=[...Je.value];if(et.value==="draw-area"&&He.value?.polygon?.length>0){const G=N.findIndex(be=>be.id===He.value.id);G>=0?N[G]={...He.value}:N.push({...He.value,id:He.value.id||"temp-area"})}return N}),tl=()=>{i.push("/admin/dashboard")},Li=()=>{i.push({name:"AdminProfile"})},Nt=(N=!0)=>{D.value=N},nl=()=>{_e.value=!0},sl=async N=>{try{N&&(xe.value={...N});const G=$.value.eventDate,be=xe.value.eventDate;if(G!==be){const Ce=R.value.filter(ct=>ct.startTime||ct.endTime);if(Ce.length>0){Me.value=G,Ue.value=be,Ge.value=Ce.length,ze.value=!0;return}}await wa(!1,null)}catch(G){console.error("Failed to update event:",G),alert("Failed to update event. Please try again.")}},wa=async(N,G)=>{try{if(await r.updateEvent(n.params.eventId,{...xe.value}),N&&G!==null){const be=Math.floor(Math.abs(G)/1e3),Ce=G<0,ct=Math.floor(be/3600),zt=Math.floor(be%3600/60),$t=be%60,Ms=`${Ce?"-":""}${ct.toString().padStart(2,"0")}:${zt.toString().padStart(2,"0")}:${$t.toString().padStart(2,"0")}`;await r.bulkUpdateLocationTimes(n.params.eventId,Ms)}await Mt(),_e.value=!1}catch(be){console.error("Failed to update event:",be),alert("Failed to update event. Please try again.")}},il=async({shouldShift:N,timeDelta:G})=>{ze.value=!1,await wa(N,G)},co=()=>{ze.value=!1,Mt()},Mt=async()=>{try{await r.fetchEvent(n.params.eventId),$.value=r.currentEvent,$.value&&(xe.value={name:$.value.name||"",description:$.value.description||"",eventDate:wr($.value.eventDate),timeZoneId:$.value.timeZoneId||"UTC",peopleTerm:$.value.peopleTerm||"Marshals",checkpointTerm:$.value.checkpointTerm||"Checkpoints",areaTerm:$.value.areaTerm||"Areas",checklistTerm:$.value.checklistTerm||"Checklists",courseTerm:$.value.courseTerm||"Course"},_e.value=!1,mc($.value)),await r.fetchLocations(n.params.eventId),R.value=r.locations,await r.fetchEventStatus(n.params.eventId),A.value=r.eventStatus.locations,await _o(),await uo(),await xi(),await ss(),await ut(),await kt()}catch(N){console.error("Failed to load event data:",N)}},uo=async()=>{try{const N=await Xn.getByEvent(n.params.eventId);J.value=N.data}catch(N){console.error("Failed to load marshals:",N)}},xi=async()=>{try{const N=await Us.getByEvent(n.params.eventId);Je.value=N.data}catch(N){console.error("Failed to load areas:",N)}},ss=async()=>{try{const[N,G]=await Promise.all([It.getByEvent(n.params.eventId),It.getReport(n.params.eventId)]);se.value=N.data,En.value=G.data}catch(N){console.error("Failed to load checklists:",N)}},ut=async()=>{try{const N=await vs.getByEvent(n.params.eventId);Sn.value=N.data}catch(N){console.error("Failed to load notes:",N)}},kt=async()=>{try{const[N,G]=await Promise.all([Hi.getByEvent(n.params.eventId),Hi.getRoles(n.params.eventId)]);oo.value=N.data,cn.value=G.data}catch(N){console.error("Failed to load contacts:",N)}},Js=()=>{He.value=null,D.value=!1,vt.value=!0},jn=N=>{He.value=N,xt.value=N.id,D.value=!1,vt.value=!0},Ss=async N=>{try{if(He.value&&He.value.id){if(await Us.update(n.params.eventId,He.value.id,N),N.checklistChanges&&N.checklistChanges.length>0)for(const G of N.checklistChanges)try{G.complete?await It.complete(n.params.eventId,G.itemId,{marshalId:G.marshalId,contextType:G.contextType,contextId:G.contextId}):await It.uncomplete(n.params.eventId,G.itemId,{marshalId:G.marshalId,contextType:G.contextType,contextId:G.contextId})}catch(be){console.error("Failed to update checklist item:",G,be)}}else await Us.create({eventId:n.params.eventId,...N});await xi(),await Mt(),Qe()}catch(G){console.error("Failed to save area:",G),alert(G.response?.data?.message||"Failed to save area. Please try again.")}},ho=async N=>{p("Delete Area","Are you sure you want to delete this area? Checkpoints will be automatically reassigned.",async()=>{try{await Us.delete(n.params.eventId,N),await Us.recalculate(n.params.eventId),await xi(),await Mt(),Qe()}catch(G){console.error("Failed to delete area:",G),alert(G.response?.data?.message||"Failed to delete area. Please try again.")}})},Qe=()=>{vt.value=!1,He.value=null,xt.value=null,D.value=!1,Ct.value=!1,gt.value=null},Et=N=>{Qe(),Ne.value=null,Ts.value="details",D.value=!1,Ys.value=N,ns.value=!0},fo=N=>{Qe(),Ne.value=N,Ts.value="details",D.value=!1,ns.value=!0},Ai=()=>{Pe.value=null,At.value="details",D.value=!1,rt.value=!0},un=(N,G="details")=>{Pe.value=N,At.value=G,D.value=!1,rt.value=!0},ol=async N=>{try{if(Pe.value&&Pe.value.itemId)await It.update(n.params.eventId,Pe.value.itemId,N);else{const G=await It.create(n.params.eventId,N);G.data.count&&G.data.count>1&&(Ie.value="Checklist Items Created",Te.value=`Successfully created ${G.data.count} checklist items.`,de.value=!0)}await ss(),Mn()}catch(G){console.error("Failed to save checklist item:",G);const be=G.response?.data?.message||"Failed to save checklist item. Please try again.";alert(be)}},Ii=async N=>{p("Delete Checklist Item","Are you sure you want to delete this checklist item?",async()=>{try{await It.delete(n.params.eventId,N),await ss(),Mn()}catch(G){console.error("Failed to delete checklist item:",G),alert(G.response?.data?.message||"Failed to delete checklist item. Please try again.")}})},Mn=()=>{rt.value=!1,Pe.value=null,D.value=!1},Pt=()=>{ts.value=null,io.value="details",D.value=!1,Ci.value=!0},is=N=>{ts.value=N,io.value="details",D.value=!1,Ci.value=!0},Xs=async N=>{try{ts.value&&ts.value.noteId?await vs.update(n.params.eventId,ts.value.noteId,N):await vs.create(n.params.eventId,N),await ut(),ei()}catch(G){console.error("Failed to save note:",G);const be=G.response?.data?.message||"Failed to save note. Please try again.";alert(be)}},Qs=async N=>{p("Delete Note","Are you sure you want to delete this note?",async()=>{try{await vs.delete(n.params.eventId,N),await ut(),ei()}catch(G){console.error("Failed to delete note:",G),alert(G.response?.data?.message||"Failed to delete note. Please try again.")}})},ei=()=>{Ci.value=!1,ts.value=null,D.value=!1},ti=()=>{Ne.value=null,Ts.value="details",Ys.value=null,D.value=!1,ns.value=!0},po=N=>{Ne.value=N,Ts.value="details",D.value=!1,ns.value=!0},mo=async N=>{try{Ne.value&&Ne.value.contactId?await Hi.update(n.params.eventId,Ne.value.contactId,N):await Hi.create(n.params.eventId,N),await kt(),ni()}catch(G){console.error("Failed to save contact:",G);const be=G.response?.data?.message||"Failed to save contact. Please try again.";alert(be)}},Ti=async N=>{p("Delete Contact","Are you sure you want to delete this contact?",async()=>{try{await Hi.delete(n.params.eventId,N),await kt(),ni()}catch(G){console.error("Failed to delete contact:",G),alert(G.response?.data?.message||"Failed to delete contact. Please try again.")}})},ni=()=>{ns.value=!1,Ne.value=null,Ys.value=null,D.value=!1},vo=N=>{if(gt.value=N,vt.value=!1,M.value){const G=M.value.getMapCenter(),be=M.value.getMapZoom();G&&be!==null&&(ne.value=G,X.value=be)}yt.value=!0,et.value="draw-area",Ct.value=!0,St.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},si=N=>{gt.value?He.value={...He.value||{},...gt.value,polygon:N}:He.value={...He.value,polygon:N}},Ca=N=>{vn.value=N},go=()=>{Ct.value=!1,gt.value&&(He.value=gt.value,vt.value=!0,gt.value=null)},_o=async()=>{try{const N=await Vl.getAdmins(n.params.eventId);U.value=N.data}catch(N){console.error("Failed to load event admins:",N)}},tt=async N=>{try{await Vl.addAdmin(n.params.eventId,N),await _o(),mt()}catch(G){console.error("Failed to add admin:",G),alert(G.response?.data?.message||"Failed to add administrator. Please try again.")}},wn=async N=>{p("Remove Administrator",`Remove ${N} as an administrator?`,async()=>{try{await Vl.removeAdmin(n.params.eventId,N),await _o()}catch(G){console.error("Failed to remove admin:",G),alert(G.response?.data?.message||"Failed to remove administrator. Please try again.")}})},mt=()=>{Q.value=!1,D.value=!1},La=async N=>{if(!N){Le.value="Please select a GPX file";return}re.value=!0,Le.value=null;try{await fi.uploadGpx(n.params.eventId,N),await Mt(),Ei()}catch(G){console.error("Failed to upload route:",G),Le.value=G.response?.data?.message||"Failed to upload route. Please try again."}finally{re.value=!1}},Ei=()=>{ce.value=!1,Le.value=null},yo=async({file:N,deleteExisting:G})=>{if(!N){he.value="Please select a CSV file";return}Y.value=!0,he.value=null,Ae.value=null;try{const be=await zs.importCsv(n.params.eventId,N,G);Ae.value=be.data,await Mt(),Si();const Ce=be.data;let ct=`<p>Created <strong>${Ce.locationsCreated}</strong> location(s) and <strong>${Ce.assignmentsCreated}</strong> assignment(s)</p>`;Ce.errors&&Ce.errors.length>0&&(ct+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',Ce.errors.forEach(zt=>{ct+=`<li>${zt}</li>`}),ct+="</ul>"),Ie.value="Import Complete",Te.value=ct,de.value=!0}catch(be){console.error("Failed to import locations:",be),he.value=be.response?.data?.message||"Failed to import locations. Please try again."}finally{Y.value=!1}},Si=()=>{Z.value=!1,he.value=null,Ae.value=null},os=async N=>{if(w.value)Ke.value.latitude=N.lat,Ke.value.longitude=N.lng;else if(Ee.value)Be.value.latitude=N.lat,Be.value.longitude=N.lng,x.value&&(x.value={...x.value,latitude:N.lat,longitude:N.lng}),Ee.value=!1,ve.value=!0,Nt();else if(nn.value)try{await r.createLocation({eventId:n.params.eventId,name:`Checkpoint ${jt.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""}),jt.value++,await Mt()}catch(G){console.error("Failed to create checkpoint:",G),alert("Failed to create checkpoint. Please try again.")}},bo=N=>{et.value==="place-checkpoint"||et.value==="move-checkpoint"?bt.value=N:et.value==="add-multiple"&&Ia(N)},ii=N=>{Ke.value={...N}},Ht=()=>{w.value=!1,bt.value=null,yt.value=!0,et.value="place-checkpoint",St.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},as=()=>{if(M.value){const N=M.value.getMapCenter(),G=M.value.getMapZoom();N&&G!==null&&(ne.value=N,X.value=G)}Ke.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},bt.value=null,yt.value=!0,et.value="place-checkpoint",St.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},xa=()=>{if(M.value){const N=M.value.getMapCenter(),G=M.value.getMapZoom();N&&G!==null&&(ne.value=N,X.value=G)}He.value={id:null,name:"",description:"",color:"#667eea",polygon:[],checkpointIds:[],marshalIds:[],displayOrder:Je.value.length},yt.value=!0,et.value="draw-area",Ct.value=!0,St.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},Aa=()=>{x.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},Be.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},z.value=[],j.value=[],D.value=!1,ve.value=!0},al=()=>{const N=A.value.map(G=>{const be=G.name.match(/^Checkpoint (\d+)$/);return be?parseInt(be[1]):0}).filter(G=>G>0);if(jt.value=N.length>0?Math.max(...N)+1:1,M.value){const G=M.value.getMapCenter(),be=M.value.getMapZoom();G&&be!==null&&(ne.value=G,X.value=be)}yt.value=!0,et.value="add-multiple",nn.value=!0,St.value={title:"Add multiple checkpoints",description:`Click on map to add checkpoints. Next: Checkpoint ${jt.value}`}},Ia=N=>{qn.value.push({id:`temp-${jt.value}`,name:`Checkpoint ${jt.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",assignments:[],isTemporary:!0}),jt.value++,St.value={...St.value,description:`Click on map to add checkpoints. Next: Checkpoint ${jt.value}`}},ko=()=>{if(et.value==="place-checkpoint"){const N=bt.value||{lat:0,lng:0};x.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},Be.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""},z.value=[],j.value=[],D.value=!1,at(),ve.value=!0}else if(et.value==="move-checkpoint")bt.value&&(Be.value.latitude=bt.value.lat,Be.value.longitude=bt.value.lng,x.value&&(x.value={...x.value,...es.value||{},latitude:bt.value.lat,longitude:bt.value.lng}),Nt()),es.value=null,at(),ve.value=!0;else if(et.value==="draw-area"){if(vn.value&&vn.value.length>=3){const N=vn.value.map(G=>({lat:G.lat,lng:G.lng}));gt.value?He.value={...He.value||{},...gt.value,polygon:N}:He.value={...He.value||{},polygon:N}}Ct.value=!1,at(),vt.value=!0,gt.value=null,vn.value=null}else et.value==="add-multiple"&&rl()},rl=async()=>{const N=[...qn.value];try{for(const G of N)await r.createLocation({eventId:n.params.eventId,name:G.name,description:G.description,latitude:G.latitude,longitude:G.longitude,requiredMarshals:G.requiredMarshals,what3Words:G.what3Words});qn.value=[],nn.value=!1,at(),await Mt()}catch(G){console.error("Failed to create checkpoints:",G),alert("Failed to create checkpoints. Please try again.")}},Ta=()=>{et.value==="draw-area"?(gt.value&&(He.value=gt.value,vt.value=!0,gt.value=null),Ct.value=!1,vn.value=null):et.value==="add-multiple"&&(qn.value=[],nn.value=!1),at()},at=()=>{yt.value=!1,et.value=null,St.value={},bt.value=null,ne.value=null,X.value=null,Ct.value&&(Ct.value=!1)},ll=N=>{Kt(N)},Kt=N=>{x.value=N,Be.value={id:N.id,name:N.name,description:N.description||"",latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||""},z.value=[],j.value=[],D.value=!1,ve.value=!0,setTimeout(()=>{M.value?.scrollMapIntoView()},100)},oi=async N=>{if(!Cr(N.what3Words)){alert("Invalid What3Words format. Please use word.word.word or word/word/word (lowercase letters only, 1-20 characters each)");return}try{await r.createLocation({eventId:n.params.eventId,...N}),await Mt(),wo()}catch(G){console.error("Failed to save location:",G),alert("Failed to save location. Please try again.")}},wo=()=>{w.value=!1,Ke.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},D.value=!1,D.value=!1},Co=()=>{ve.value=!1,x.value=null,Ee.value=!1,ge.value=!1,es.value=null,Be.value={id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},z.value=[],j.value=[],D.value=!1},ai=()=>{ge.value=!1},cl=N=>{if(N?.formData&&(es.value=N.formData),ve.value=!1,bt.value=null,M.value){const be=M.value.getMapCenter(),Ce=M.value.getMapZoom();be&&Ce!==null&&(ne.value=be,X.value=Ce)}const G=es.value?.name||x.value?.name;yt.value=!0,et.value="move-checkpoint",St.value={title:`Move ${C.value.checkpoint}: ${G}`,description:"Click on the map to set the new location"}},Ea=async N=>{if(!Cr(N.what3Words)){alert("Invalid What3Words format.");return}try{const G=!x.value.id;if(G){const be=await r.createLocation({eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const Ce of N.pendingAssignments)await r.createAssignment({eventId:n.params.eventId,locationId:be.id,marshalId:Ce.marshalId})}else{const be=x.value.id;if(await zs.update(n.params.eventId,be,{eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const Ce of N.pendingNewChecklistItems)Ce.text?.trim()&&await It.create(n.params.eventId,{text:Ce.text,scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[be]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const Ce of N.pendingNewNotes)!Ce.title?.trim()&&!Ce.content?.trim()||await vs.create(n.params.eventId,{title:Ce.title||"Untitled",content:Ce.content||"",scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[be]}],displayOrder:0,priority:"Normal",isPinned:!1});for(const Ce of j.value)await r.deleteAssignment(n.params.eventId,Ce);for(const Ce of z.value)await r.createAssignment({eventId:n.params.eventId,locationId:x.value.id,marshalId:Ce.marshalId});if(N.checkInChanges&&N.checkInChanges.length>0)for(const Ce of N.checkInChanges){const ct=x.value.assignments.find(zt=>zt.id===Ce.assignmentId);ct&&ct.isCheckedIn!==Ce.shouldBeCheckedIn&&await Hs.adminCheckIn(n.params.eventId,Ce.assignmentId)}}if(!G&&N.checklistChanges&&N.checklistChanges.length>0)for(const be of N.checklistChanges)try{be.complete?await It.complete(n.params.eventId,be.itemId,{marshalId:be.marshalId,contextType:be.contextType,contextId:be.contextId}):await It.uncomplete(n.params.eventId,be.itemId,{marshalId:be.marshalId,contextType:be.contextType,contextId:be.contextId})}catch(Ce){console.error("Failed to update checklist item:",be,Ce)}await Mt(),Co()}catch(G){console.error("Failed to update location:",G),alert("Failed to update location. Please try again.")}},ul=async N=>{p("Delete Location","Are you sure you want to delete this location?",async()=>{try{await zs.delete(n.params.eventId,N),await Mt(),Co()}catch(G){console.error("Failed to delete location:",G),alert("Failed to delete location. Please try again.")}})},dl=N=>{if(N.toString().startsWith("temp-")){const G=x.value.assignments.find(be=>be.id===N);G&&(z.value=z.value.filter(be=>be.marshalId!==G.marshalId)),x.value.assignments=x.value.assignments.filter(be=>be.id!==N),Nt()}else j.value.includes(N)||(j.value.push(N),x.value.assignments=x.value.assignments.filter(G=>G.id!==N),Nt())},Lo=async N=>{await Sa(N)},Sa=async N=>{const G=J.value.find(Ce=>Ce.id===N);if(!G)return;const be=A.value.filter(Ce=>Ce.assignments?.some(ct=>ct.marshalId===N&&Ce.id!==x.value.id));if(be.length>0){pe.value={marshalName:G.name,locations:be.map(ct=>ct.name),marshal:G};const Ce=await new Promise(ct=>{V.value=ct,ue.value=!0});if(Ce==="cancel"||Ce==="choose-other")return;if(Ce==="move")for(const ct of be){const zt=ct.assignments.find($t=>$t.marshalId===N);if(zt){j.value.push(zt.id);const $t=A.value.findIndex(Ms=>Ms.id===ct.id);$t!==-1&&(A.value[$t].assignments=A.value[$t].assignments.filter(Ms=>Ms.id!==zt.id))}}}z.value.push({marshalId:G.id,marshalName:G.name}),x.value.assignments||(x.value.assignments=[]),x.value.assignments.push({id:`temp-${Date.now()}`,marshalId:G.id,marshalName:G.name,locationId:x.value.id,isCheckedIn:!1,isPending:!0}),Nt(),ai()},Cn=async N=>{try{const be=(await Xn.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber})).data;await uo(),z.value.push({marshalId:be.id,marshalName:be.name}),Nt(),ai()}catch(G){console.error("Failed to create marshal:",G),alert("Failed to create marshal. Please try again.")}},hl=()=>{we.value=null,Xe.value={id:"",name:"",email:"",phoneNumber:"",notes:""},le.value=[],fe.value=[],D.value=!1,te.value=!0},Ma=N=>{we.value=N,Xe.value={id:N.id,name:N.name,email:N.email||"",phoneNumber:N.phoneNumber||"",notes:N.notes||""},le.value=[],fe.value=[],D.value=!1,te.value=!0},Pn=()=>{if(!we.value)return[];const N=[];return A.value.forEach(G=>{G.assignments.filter(Ce=>Ce.marshalName===we.value.name).forEach(Ce=>{N.push({...Ce,locationName:G.name})})}),N},Pa=async N=>{try{let G=we.value?.id,be=!1;if(we.value){if(await Xn.update(n.params.eventId,we.value.id,{name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const Ce of N.pendingNewChecklistItems)Ce.text?.trim()&&await It.create(n.params.eventId,{text:Ce.text,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[G]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const Ce of N.pendingNewNotes)!Ce.title?.trim()&&!Ce.content?.trim()||await vs.create(n.params.eventId,{title:Ce.title||"Untitled",content:Ce.content||"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[G]}],displayOrder:0,priority:"Normal",isPinned:!1})}else G=(await Xn.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]})).data.id,be=!0;for(const Ce of fe.value)await r.deleteAssignment(n.params.eventId,Ce);for(const Ce of le.value)await r.createAssignment({eventId:n.params.eventId,locationId:Ce.locationId,marshalId:G});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const Ce of N.pendingAssignments)await r.createAssignment({eventId:n.params.eventId,locationId:Ce.locationId,marshalId:G});if(N.checkInChanges&&N.checkInChanges.length>0){const Ce=Pn();for(const ct of N.checkInChanges){const zt=Ce.find($t=>$t.id===ct.assignmentId);zt&&zt.isCheckedIn!==ct.shouldBeCheckedIn&&await Hs.adminCheckIn(n.params.eventId,ct.assignmentId)}}if(N.checklistChanges&&N.checklistChanges.length>0)for(const Ce of N.checklistChanges)try{const ct={marshalId:G};Ce.contextType&&Ce.contextId&&(ct.contextType=Ce.contextType,ct.contextId=Ce.contextId),Ce.complete?await It.complete(n.params.eventId,Ce.itemId,ct):await It.uncomplete(n.params.eventId,Ce.itemId,ct)}catch(ct){console.error("Failed to process checklist change:",ct);const zt=ct.response?.data?.message||"Failed to update checklist item";alert(`Error: ${zt}`)}await Mt(),Mi(),be&&(E.value=G,q.value=N.name,I.value=!0)}catch(G){console.error("Failed to save marshal:",G),alert("Failed to save marshal. Please try again.")}},xo=async N=>{p("Delete Marshal","Are you sure you want to delete this marshal?",async()=>{try{await Xn.delete(n.params.eventId,N),await Mt(),Mi()}catch(G){console.error("Failed to delete marshal:",G),alert("Failed to delete marshal. Please try again.")}})},Ao=N=>{xo(N.id)},fl=N=>{fe.value.includes(N)||(fe.value.push(N),Nt())},$a=N=>{le.value.push({locationId:N}),Nt()},Mi=()=>{te.value=!1,we.value=null,Xe.value={id:"",name:"",email:"",phoneNumber:"",notes:""},le.value=[],fe.value=[],D.value=!1},pl=async({file:N})=>{if(!N){he.value="Please select a CSV file";return}me.value=!0,he.value=null,ee.value=null;try{const G=await Xn.importCsv(n.params.eventId,N);ee.value=G.data,await Mt(),Oa();const be=G.data;let Ce=`<p>Created <strong>${be.marshalsCreated}</strong> marshal(s) and <strong>${be.assignmentsCreated}</strong> assignment(s)</p>`;be.errors&&be.errors.length>0&&(Ce+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',be.errors.forEach(ct=>{Ce+=`<li>${ct}</li>`}),Ce+="</ul>"),Ie.value="Import Complete",Te.value=Ce,de.value=!0}catch(G){console.error("Failed to import marshals:",G),he.value=G.response?.data?.message||"Failed to import marshals. Please try again."}finally{me.value=!1}},Oa=()=>{W.value=!1,he.value=null,ee.value=null},Io=N=>{V.value&&(V.value(N),V.value=null),ue.value=!1},ml=async({assignment:N,status:G})=>{try{if(G==="not-checked-in"?N.isCheckedIn&&await Hs.adminCheckIn(n.params.eventId,N.id):N.isCheckedIn||await Hs.adminCheckIn(n.params.eventId,N.id),await Mt(),x.value){const be=A.value.find(Ce=>Ce.id===x.value.id);be&&(x.value=be)}}catch(be){console.error("Failed to change assignment status:",be),alert("Failed to change status. Please try again.")}};return kn(async()=>{await Mt();try{const N=await bs.getMe(n.params.eventId);ao.value=N.data}catch(N){console.warn("Failed to fetch user claims:",N)}}),(N,G)=>(g(),y("div",qP,[d("header",jP,[d("div",WP,[d("button",{onClick:tl,class:"btn-back",title:"Back to Dashboard"}," Dashboard"),$.value?(g(),y("div",GP,[d("h1",null,T($.value.name),1),d("p",KP,T(F(cw)($.value.eventDate)),1)])):B("",!0)]),d("div",YP,[ro.value?(g(),y("button",{key:0,onClick:ya,class:"btn btn-marshal-mode"}," Switch to Marshal ")):B("",!0),d("button",{onClick:Li,class:"btn btn-secondary"},"Profile")])]),d("div",JP,[d("div",XP,[Oe(XL,{tabs:S.value,"model-value":F(s),"onUpdate:modelValue":F(a)},null,8,["tabs","model-value","onUpdate:modelValue"])]),d("div",QP,[F(s)==="course"?(g(),nt(Dw,{key:0,ref_key:"courseAreasTab",ref:M,checkpoints:A.value,areas:Je.value,route:$.value?.route||[],selectedAreaId:xt.value,drawingMode:Ct.value,onMapClick:os,onLocationClick:ll,onAreaClick:jn,onImportCheckpoints:G[0]||(G[0]=be=>Z.value=!0),onUploadRoute:G[1]||(G[1]=be=>ce.value=!0),onSelectLocation:Kt,onAddArea:Js,onSelectArea:jn,onPolygonComplete:si,onCancelDrawing:go,onAddCheckpointFromMap:as,onAddManyCheckpointsFromMap:al,onAddAreaFromMap:xa},null,8,["checkpoints","areas","route","selectedAreaId","drawingMode"])):B("",!0),F(s)==="checkpoints"?(g(),y("div",e$,[Oe(IL,{locations:A.value,areas:Je.value,onAddCheckpointManually:Aa,onImportCheckpoints:G[2]||(G[2]=be=>Z.value=!0),onSelectLocation:Kt},null,8,["locations","areas"])])):B("",!0),F(s)==="areas"?(g(),y("div",t$,[Oe(zL,{areas:Je.value,checkpoints:A.value,onAddArea:Js,onSelectArea:jn},null,8,["areas","checkpoints"])])):B("",!0),F(s)==="marshals"?(g(),nt(Xw,{key:3,marshals:J.value,assignments:lo.value,locations:A.value,onAddMarshal:hl,onImportMarshals:G[3]||(G[3]=be=>W.value=!0),onSelectMarshal:Ma,onDeleteMarshal:Ao,onChangeAssignmentStatus:ml},null,8,["marshals","assignments","locations"])):B("",!0),F(s)==="checklists"?(g(),nt(MC,{key:4,"checklist-items":se.value,areas:Je.value,locations:A.value,marshals:J.value,"completion-report":En.value,onAddChecklistItem:Ai,onSelectChecklistItem:un},null,8,["checklist-items","areas","locations","marshals","completion-report"])):B("",!0),F(s)==="notes"?(g(),nt(s1,{key:5,notes:Sn.value,areas:Je.value,locations:A.value,marshals:J.value,onAddNote:Pt,onSelectNote:is},null,8,["notes","areas","locations","marshals"])):B("",!0),F(s)==="contacts"?(g(),nt(I1,{key:6,contacts:oo.value,areas:Je.value,locations:A.value,marshals:J.value,"available-roles":cn.value,onAddContact:ti,onSelectContact:po},null,8,["contacts","areas","locations","marshals","available-roles"])):B("",!0),F(s)==="details"?(g(),nt(fL,{key:7,"event-data":xe.value,admins:U.value,"form-dirty":_e.value,onSubmit:sl,onAddAdmin:G[4]||(G[4]=be=>Q.value=!0),onRemoveAdmin:wn,"onUpdate:formDirty":nl},null,8,["event-data","admins","form-dirty"])):B("",!0)])]),Oe(ZP,{show:w.value,location:Ke.value,isDirty:D.value,onClose:wo,onSave:oi,onSetOnMap:Ht,"onUpdate:isDirty":Nt,"onUpdate:location":ii},null,8,["show","location","isDirty"]),Oe(TI,{show:ve.value,location:x.value,assignments:x.value?.assignments||[],"event-date":$.value?.eventDate||"",areas:Je.value,"event-id":F(n).params.eventId,"all-locations":A.value,notes:Sn.value,"available-marshals":ba.value,"all-checklist-items":se.value,isDirty:D.value,onClose:Co,onSave:Ea,onDelete:ul,onMoveLocation:cl,onRemoveAssignment:dl,onAssignMarshal:Lo,"onUpdate:isDirty":Nt},null,8,["show","location","assignments","event-date","areas","event-id","all-locations","notes","available-marshals","all-checklist-items","isDirty"]),Oe(n0,{show:k.value,link:Es.value,isDirty:!1,onClose:G[5]||(G[5]=be=>k.value=!1)},null,8,["show","link"]),Oe(v0,{show:I.value,"event-id":F(n).params.eventId,"marshal-id":E.value,"marshal-name":q.value,onClose:G[6]||(G[6]=be=>I.value=!1)},null,8,["show","event-id","marshal-id","marshal-name"]),Oe(y0,{show:Q.value,isDirty:D.value,onClose:mt,onSubmit:tt,"onUpdate:isDirty":Nt},null,8,["show","isDirty"]),Oe(L0,{show:ce.value,uploading:re.value,error:Le.value,isDirty:D.value,onClose:Ei,onSubmit:La,"onUpdate:isDirty":Nt},null,8,["show","uploading","error","isDirty"]),Oe(O0,{show:Z.value,importing:Y.value,error:he.value,result:Ae.value,isDirty:D.value,onClose:Si,onSubmit:yo,"onUpdate:isDirty":Nt},null,8,["show","importing","error","result","isDirty"]),Oe(ME,{show:te.value,marshal:we.value,"event-id":F(n).params.eventId,assignments:Pn(),availableLocations:Xr.value,allLocations:A.value,areas:Je.value,isEditing:!!we.value,eventNotes:Sn.value,allChecklistItems:se.value,isDirty:D.value,onClose:Mi,onSave:Pa,onDelete:xo,onRemoveAssignment:fl,onAssignToLocation:$a,"onUpdate:isDirty":Nt},null,8,["show","marshal","event-id","assignments","availableLocations","allLocations","areas","isEditing","eventNotes","allChecklistItems","isDirty"]),Oe(H0,{show:W.value,importing:me.value,error:he.value,result:ee.value,isDirty:D.value,onClose:Oa,onSubmit:pl,"onUpdate:isDirty":Nt},null,8,["show","importing","error","result","isDirty"]),Oe(DE,{show:ue.value,conflictData:pe.value,onClose:G[7]||(G[7]=be=>ue.value=!1),onChoice:Io},null,8,["show","conflictData"]),Oe(qE,{show:ge.value,locationName:x.value?.name||"",marshals:ba.value,onClose:ai,onAssignExisting:Sa,onCreateAndAssign:Cn},null,8,["show","locationName","marshals"]),Oe(sS,{show:ze.value,"old-event-date":Me.value,"new-event-date":Ue.value,"affected-checkpoints-count":Ge.value,onConfirm:il,onCancel:co},null,8,["show","old-event-date","new-event-date","affected-checkpoints-count"]),Oe(GS,{show:vt.value,area:He.value,checkpoints:A.value,marshals:J.value,areas:Je.value,isDirty:D.value,"event-id":F(n).params.eventId,"all-locations":A.value,assignments:lo.value,notes:Sn.value,contacts:oo.value,onClose:Qe,onSave:Ss,onDelete:ho,onDrawBoundary:vo,"onUpdate:isDirty":Nt,onSelectCheckpoint:Kt,onAddAreaContact:Et,onEditContact:fo},null,8,["show","area","checkpoints","marshals","areas","isDirty","event-id","all-locations","assignments","notes","contacts"]),Oe(UM,{show:rt.value,"checklist-item":Pe.value,"initial-tab":At.value,areas:Je.value,locations:A.value,marshals:J.value,isDirty:D.value,onClose:Mn,onSave:ol,onDelete:Ii,"onUpdate:isDirty":Nt},null,8,["show","checklist-item","initial-tab","areas","locations","marshals","isDirty"]),Oe(nP,{show:Ci.value,note:ts.value,"initial-tab":io.value,areas:Je.value,locations:A.value,marshals:J.value,isDirty:D.value,onClose:ei,onSave:Xs,onDelete:Qs,"onUpdate:isDirty":Nt},null,8,["show","note","initial-tab","areas","locations","marshals","isDirty"]),Oe(LP,{show:ns.value,contact:Ne.value,"initial-tab":Ts.value,areas:Je.value,locations:A.value,marshals:J.value,"available-roles":cn.value,isDirty:D.value,"preselected-area":Ys.value,onClose:ni,onSave:mo,onDelete:Ti,"onUpdate:isDirty":Nt},null,8,["show","contact","initial-tab","areas","locations","marshals","available-roles","isDirty","preselected-area"]),Oe($P,{show:yt.value,mode:et.value,"context-title":St.value.title,"context-description":St.value.description,"can-complete":Qr.value,clickable:et.value!=="draw-area","drawing-mode":et.value==="draw-area"&&Ct.value,locations:el.value,areas:ka.value,route:$.value?.route||[],"selected-area-id":xt.value,center:ne.value,zoom:X.value,onMapClick:bo,onPolygonComplete:si,onPolygonDrawing:Ca,onDone:ko,onCancel:Ta},null,8,["show","mode","context-title","context-description","can-complete","clickable","drawing-mode","locations","areas","route","selected-area-id","center","zoom"]),Oe(Jr,{show:de.value,title:Ie.value,message:Te.value,onClose:G[8]||(G[8]=be=>de.value=!1)},null,8,["show","title","message"]),Oe(Kr,{show:F(l),title:F(u),message:F(h),onConfirm:F(f),onCancel:F(v)},null,8,["show","title","message","onConfirm","onCancel"])]))}},s$=Ze(n$,[["__scopeId","data-v-c6104681"]]),i$={key:0,class:"emergency-contacts-list"},o$={class:"contact-header"},a$={key:0,class:"role-badge"},r$={class:"contact-details"},l$={key:0,class:"info-section"},c$=["href"],u$={key:1,class:"info-section"},d$=["href"],h$={key:2,class:"info-section"},f$=["href"],p$={key:1,class:"no-contacts"},m$={__name:"EmergencyContactModal",props:{show:{type:Boolean,default:!1},contacts:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n}){const i=n,r=()=>{i("close")},s=a=>a?{EmergencyContact:"Emergency Contact",EventDirector:"Event Director",MedicalLead:"Medical Lead",SafetyOfficer:"Safety Officer",Logistics:"Logistics"}[a]||a.replace(/([A-Z])/g," $1").trim():"";return(a,l)=>(g(),nt(Ft,{show:e.show,title:"Emergency Contact Information",size:"medium",onClose:r},{actions:We(()=>[d("button",{onClick:r,class:"btn btn-secondary"},"Close")]),default:We(()=>[e.contacts&&e.contacts.length>0?(g(),y("div",i$,[(g(!0),y(ke,null,$e(e.contacts,u=>(g(),y("div",{key:u.contactId||u.name,class:"emergency-contact-item"},[d("div",o$,[d("h3",null,T(u.name),1),u.role?(g(),y("span",a$,T(s(u.role)),1)):B("",!0)]),d("div",r$,[u.phone?(g(),y("div",l$,[l[0]||(l[0]=d("label",null,"Phone Number",-1)),d("a",{href:`tel:${u.phone}`,class:"phone-link"},T(u.phone),9,c$)])):B("",!0),u.email?(g(),y("div",u$,[l[1]||(l[1]=d("label",null,"Email",-1)),d("a",{href:`mailto:${u.email}`,class:"email-link"},T(u.email),9,d$)])):B("",!0),u.notes||u.details?(g(),y("div",h$,[l[2]||(l[2]=d("label",null,"Details",-1)),d("p",null,T(u.notes||u.details),1)])):B("",!0)]),u.phone?(g(),y("a",{key:0,href:`tel:${u.phone}`,class:"btn btn-danger btn-full"}," Call "+T(u.name),9,f$)):B("",!0)]))),128))])):(g(),y("div",p$,[...l[3]||(l[3]=[d("p",null,"No emergency contacts have been set up for this event.",-1)])]))]),_:1},8,["show"]))}},v$=Ze(m$,[["__scopeId","data-v-8b9139a4"]]),Qa=O(navigator.onLine),Vs=O(!0),gi=O(0),er=O(null),pi=O("idle"),Gi=O(null);let Gd=null,ql=!1,Nn=null;function g$(e=1e3,n=1e4){return Math.floor(Math.random()*(n-e+1))+e}function gc(){Nn&&(clearTimeout(Nn),Nn=null);const e=g$(1e3,1e4);console.log(`Scheduling auto-sync in ${e}ms`),Nn=setTimeout(async()=>{if(Nn=null,!navigator.onLine){console.log("Auto-sync cancelled: offline");return}if(await kr()===0){console.log("Auto-sync cancelled: no pending actions");return}console.log("Starting auto-sync..."),await Lr();const i=await kr();i>0&&navigator.onLine&&(console.log(`${i} actions remaining, scheduling retry...`),gc())},e)}async function Vo(){if(!navigator.onLine)return Vs.value=!1,!1;try{const e=new AbortController,n=setTimeout(()=>e.abort(),5e3),i=await fetch("/api/health",{method:"HEAD",signal:e.signal}).catch(()=>null);if(clearTimeout(n),!i||i.status===404)return Vs.value=!0,!0;const r=i.ok;return Vs.value=r,r}catch(e){return e.name==="AbortError"&&console.warn("Server health check timed out"),Vs.value=!1,!1}}async function _$(e){try{switch(e.type){case"checkin":await Hs.checkIn(e.payload);break;case"checkin_admin":await Hs.adminCheckIn(e.payload.eventId,e.payload.assignmentId);break;case"checklist_complete":await It.complete(e.payload.eventId,e.payload.itemId,e.payload.data);break;case"checklist_uncomplete":await It.uncomplete(e.payload.eventId,e.payload.itemId,e.payload.data);break;default:return console.warn("Unknown action type:",e.type),!1}return!0}catch(n){return console.error("Failed to sync action:",e,n),n.response&&n.response.status>=400&&n.response.status<500?"permanent_failure":!1}}async function Lr(){if(!ql&&navigator.onLine){ql=!0,pi.value="syncing",Gi.value=null;try{const e=await np();if(e.length===0){pi.value="success",gi.value=0;return}let n=0,i=0;for(const r of e){const s=await _$(r);if(s===!0)await Hd(r.id),n++;else if(s==="permanent_failure")await Hd(r.id),i++;else{const a=(r.attempts||0)+1;a>=5?(await Ud(r.id,{status:"failed",attempts:a,lastAttempt:new Date().toISOString()}),i++):await Ud(r.id,{status:"retrying",attempts:a,lastAttempt:new Date().toISOString()})}}gi.value=await kr(),i>0?(pi.value="error",Gi.value=`${i} action(s) failed to sync`):pi.value="success"}catch(e){console.error("Sync error:",e),pi.value="error",Gi.value="Failed to sync pending actions"}finally{ql=!1}}}function y$(){Gd||(Gd=setInterval(async()=>{navigator.onLine&&(await Vo(),Vs.value&&gi.value>0&&await Lr())},3e4))}function jc(){const e=ae(()=>Qa.value&&Vs.value);async function n(){gi.value=await kr()}async function i(){Qa.value=!0,await Vo()&&gi.value>0&&gc()}function r(){Qa.value=!1,Vs.value=!1,Nn&&(clearTimeout(Nn),Nn=null)}kn(async()=>{await Is(),await n(),window.addEventListener("online",i),window.addEventListener("offline",r),navigator.onLine&&await Vo()&&gi.value>0&&gc(),y$()}),As(()=>{window.removeEventListener("online",i),window.removeEventListener("offline",r),Nn&&(clearTimeout(Nn),Nn=null)});async function s(h,p){if(!e.value)return console.warn("Cannot refresh cache while offline"),!1;try{const f=await p();return await la(h,f),er.value=new Date().toISOString(),!0}catch(f){return console.error("Failed to refresh cache:",f),!1}}async function a(h){const p=await qs(h);return p&&(er.value=p.cachedAt),p}async function l(h){er.value=await Lb(h)}async function u(){return navigator.onLine?await Vo()?(await Lr(),pi.value==="success"):(Gi.value="Server is not responding",!1):(Gi.value="Cannot sync while offline",!1)}return{isOnline:Qa,isServerHealthy:Vs,isFullyOnline:e,pendingActionsCount:gi,lastSyncTime:er,syncStatus:pi,syncError:Gi,checkServerHealth:Vo,syncPendingActions:Lr,updatePendingCount:n,refreshCache:s,getCachedData:a,loadLastSyncTime:l,forcSync:u}}const b$={class:"area-lead-content"},k$={key:0,class:"loading-state"},w$={key:1,class:"error-state"},C$={key:2,class:"empty-state"},L$={key:3,class:"checkpoint-accordion"},x$=["onClick"],A$={class:"checkpoint-header-content"},I$={class:"checkpoint-title-row"},T$={class:"checkpoint-name"},E$={key:0,class:"area-badge"},S$={key:0,class:"checkpoint-description-preview"},M$={class:"checkpoint-status-row"},P$={class:"status-badge marshals-status"},$$={key:0,class:"status-badge tasks-status"},O$={class:"accordion-icon"},D$={key:0,class:"checkpoint-accordion-content"},R$={class:"checkpoint-mini-map"},N$={class:"checkpoint-marshals-section"},B$={class:"marshals-label"},F$={key:0,class:"empty-state"},z$={key:1,class:"marshals-list"},U$=["onClick"],H$={class:"marshal-header"},V$={class:"marshal-name-row"},Z$={class:"marshal-name"},q$={key:0,class:"task-count"},j$={key:0,class:"check-in-time"},W$={key:0},G$={key:0,class:"checkpoint-tasks-section"},K$={class:"marshals-label"},Y$={class:"tasks-list"},J$=["disabled","onChange"],X$={class:"task-text"},Q$={key:0,class:"marshal-details-modal"},e2={class:"details-section"},t2={class:"contact-info"},n2={key:0,class:"contact-row"},s2=["href"],i2={key:1,class:"contact-row"},o2=["href"],a2={key:2,class:"no-contact"},r2={class:"details-section"},l2={key:0,class:"checked-in-details"},c2={class:"check-time-detail"},u2={key:0,class:"check-method"},d2={key:1,class:"not-checked-in"},h2={class:"details-section"},f2={key:0,class:"no-tasks"},p2={key:1,class:"tasks-list modal-tasks"},m2=["disabled","onChange"],v2={class:"task-text"},g2={class:"details-section contact-actions-section"},_2={class:"contact-buttons"},y2=["href"],b2=["href"],k2=["href"],w2={__name:"AreaLeadSection",props:{eventId:{type:String,required:!0},areaIds:{type:Array,default:()=>[]},marshalId:{type:String,required:!0},route:{type:Array,default:()=>[]}},emits:["checklist-updated","loaded"],setup(e,{expose:n,emit:i}){const{terms:r,termsLower:s}=ht(),{updatePendingCount:a}=jc(),l=e,u=i,h=O(!1),p=O(null),f=O([]),v=O([]),b=O(null),C=O(!1),S=ae(()=>[...v.value].sort((Z,W)=>fn(Z.name,W.name))),$=(Z,W=60)=>Z?Z.length<=W?Z:Z.substring(0,W).trim()+"...":"";n({areas:f,checkpoints:v,loading:h});const R=O(!1),A=O(null),x=O(null),w=async()=>{if(!(!l.eventId||l.areaIds.length===0)){if(h.value=!0,p.value=null,hn()){try{const Z=await qs(l.eventId);if(Z?.areaLeadDashboard){f.value=Z.areaLeadDashboard.areas||[],v.value=Z.areaLeadDashboard.checkpoints||[],h.value=!1;return}}catch(Z){console.warn("Failed to load cached dashboard:",Z)}p.value="Offline - no cached data available",h.value=!1;return}try{const Z=await Us.getAreaLeadDashboard(l.eventId);f.value=Z.data.areas||[],v.value=Z.data.checkpoints||[];try{const W=JSON.parse(JSON.stringify({areas:f.value,checkpoints:v.value}));await qs(l.eventId)?await zo(l.eventId,"areaLeadDashboard",W):await la(l.eventId,{areaLeadDashboard:W})}catch(W){console.warn("Failed to cache dashboard:",W)}}catch(Z){console.error("Failed to load area lead dashboard:",Z);try{const W=await qs(l.eventId);if(W?.areaLeadDashboard){console.log("Loading area lead dashboard from cache after error"),f.value=W.areaLeadDashboard.areas||[],v.value=W.areaLeadDashboard.checkpoints||[],h.value=!1;return}}catch(W){console.warn("Failed to load cached dashboard:",W)}p.value=Z.response?.data?.message||"Failed to load dashboard"}finally{h.value=!1}}},M=Z=>{b.value=b.value===Z?null:Z},k=Z=>Z.marshals.filter(W=>W.isCheckedIn).length,I=Z=>{const W=Z.marshals.reduce((Y,me)=>Y+me.outstandingTaskCount,0);return Z.outstandingTaskCount+W},E=(Z,W)=>{A.value=Z,x.value=W,R.value=!0},q=()=>{R.value=!1,A.value=null,x.value=null},U=async(Z,W)=>{if(C.value)return;C.value=!0;const me={marshalId:W.marshals.length>0?W.marshals[0].marshalId:l.marshalId,contextType:Z.contextType,contextId:Z.contextId};try{hn()?(await Rn("checklist_complete",{eventId:l.eventId,itemId:Z.itemId,data:me}),W.outstandingTasks=W.outstandingTasks.filter(he=>he.itemId!==Z.itemId),W.outstandingTaskCount=Math.max(0,W.outstandingTaskCount-1),await a(),u("checklist-updated")):(await It.complete(l.eventId,Z.itemId,me),await w(),u("checklist-updated"))}catch(he){console.error("Failed to complete task:",he),(hn()||!he.response)&&(await Rn("checklist_complete",{eventId:l.eventId,itemId:Z.itemId,data:me}),W.outstandingTasks=W.outstandingTasks.filter(Ae=>Ae.itemId!==Z.itemId),W.outstandingTaskCount=Math.max(0,W.outstandingTaskCount-1),await a(),u("checklist-updated"))}finally{C.value=!1}},Q=async Z=>{if(C.value||!A.value)return;C.value=!0;const W={marshalId:A.value.marshalId,contextType:Z.contextType,contextId:Z.contextId};try{if(hn())await Rn("checklist_complete",{eventId:l.eventId,itemId:Z.itemId,data:W}),A.value.outstandingTasks=A.value.outstandingTasks.filter(Y=>Y.itemId!==Z.itemId),A.value.outstandingTaskCount=Math.max(0,A.value.outstandingTaskCount-1),await a(),u("checklist-updated");else{if(await It.complete(l.eventId,Z.itemId,W),await w(),A.value&&x.value){const Y=v.value.find(me=>me.checkpointId===x.value.checkpointId);if(Y){const me=Y.marshals.find(he=>he.marshalId===A.value.marshalId);me&&(A.value=me)}}u("checklist-updated")}}catch(Y){console.error("Failed to complete task:",Y),(hn()||!Y.response)&&(await Rn("checklist_complete",{eventId:l.eventId,itemId:Z.itemId,data:W}),A.value.outstandingTasks=A.value.outstandingTasks.filter(me=>me.itemId!==Z.itemId),A.value.outstandingTaskCount=Math.max(0,A.value.outstandingTaskCount-1),await a(),u("checklist-updated"))}finally{C.value=!1}},ce=Z=>Z?new Date(Z).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",re=Z=>Z?new Date(Z).toLocaleString():"",Le=Z=>({GPS:"GPS",Manual:"Manual",Admin:"Admin",AreaLead:`${r.value.area} Lead`})[Z]||Z;return je(()=>[l.eventId,l.areaIds],()=>{w()},{immediate:!0}),(Z,W)=>(g(),y("div",b$,[h.value?(g(),y("div",k$," Loading dashboard... ")):p.value?(g(),y("div",w$,[d("p",null,T(p.value),1),d("button",{onClick:w,class:"btn btn-secondary"},"Retry")])):S.value.length===0?(g(),y("div",C$,[d("p",null,"No "+T(F(s).checkpoints)+" in your "+T(F(s).areas)+".",1)])):(g(),y("div",L$,[(g(!0),y(ke,null,$e(S.value,Y=>(g(),y("div",{key:Y.checkpointId,class:"checkpoint-accordion-section"},[d("button",{class:Fe(["checkpoint-accordion-header",{active:b.value===Y.checkpointId}]),onClick:me=>M(Y.checkpointId)},[d("div",A$,[d("div",I$,[d("span",T$,T(Y.name),1),Y.areaName?(g(),y("span",E$,T(Y.areaName),1)):B("",!0)]),Y.description?(g(),y("div",S$,T($(Y.description)),1)):B("",!0),d("div",M$,[d("span",P$,T(k(Y))+" / "+T(Y.marshals.length)+" checked in ",1),I(Y)>0?(g(),y("span",$$,T(I(Y))+" tasks ",1)):B("",!0)])]),d("span",O$,T(b.value===Y.checkpointId?"":"+"),1)],10,x$),b.value===Y.checkpointId?(g(),y("div",D$,[d("div",R$,[Oe(ca,{locations:[{id:Y.checkpointId,name:Y.name,description:Y.description,latitude:Y.latitude,longitude:Y.longitude}],route:e.route,center:{lat:Y.latitude,lng:Y.longitude},zoom:16,"highlight-location-id":Y.checkpointId,"marshal-mode":!0},null,8,["locations","route","center","highlight-location-id"])]),d("div",N$,[d("div",B$,T(F(r).people)+" ("+T(Y.marshals.length)+")",1),Y.marshals.length===0?(g(),y("div",F$," No "+T(F(s).people)+" assigned to this "+T(F(s).checkpoint)+". ",1)):(g(),y("div",z$,[(g(!0),y(ke,null,$e(Y.marshals,me=>(g(),y("div",{key:me.marshalId,class:Fe(["marshal-card",{"is-checked-in":me.isCheckedIn}]),onClick:he=>E(me,Y)},[d("div",H$,[d("div",V$,[d("span",Z$,T(me.name),1),me.outstandingTaskCount>0?(g(),y("span",q$,T(me.outstandingTaskCount)+" tasks ",1)):B("",!0)]),d("div",{class:Fe(["check-status",{"checked-in":me.isCheckedIn}])},T(me.isCheckedIn?" Checked In":"Not Checked In"),3)]),me.isCheckedIn&&me.checkInTime?(g(),y("div",j$,[Ve(T(ce(me.checkInTime))+" ",1),me.checkInMethod?(g(),y("span",W$," ("+T(Le(me.checkInMethod))+")",1)):B("",!0)])):B("",!0)],10,U$))),128))]))]),Y.outstandingTaskCount>0?(g(),y("div",G$,[d("div",K$,"Outstanding "+T(F(s).checkpoint)+" tasks ("+T(Y.outstandingTaskCount)+")",1),d("div",Y$,[(g(!0),y(ke,null,$e(Y.outstandingTasks,me=>(g(),y("div",{key:me.itemId,class:"task-item"},[d("input",{type:"checkbox",disabled:C.value,onChange:he=>U(me,Y)},null,40,J$),d("span",X$,T(me.text),1)]))),128))])])):B("",!0)])):B("",!0)]))),128))])),Oe(Ft,{show:R.value,title:A.value?.name||"Marshal Details",size:"large",onClose:q},{actions:We(()=>[d("button",{onClick:q,class:"btn btn-secondary"},"Close")]),default:We(()=>[A.value?(g(),y("div",Q$,[d("div",e2,[W[2]||(W[2]=d("h4",null,"Contact Details",-1)),d("div",t2,[A.value.email?(g(),y("div",n2,[W[0]||(W[0]=d("span",{class:"contact-label"},"Email:",-1)),d("a",{href:`mailto:${A.value.email}`},T(A.value.email),9,s2)])):B("",!0),A.value.phoneNumber?(g(),y("div",i2,[W[1]||(W[1]=d("span",{class:"contact-label"},"Phone:",-1)),d("a",{href:`tel:${A.value.phoneNumber}`},T(A.value.phoneNumber),9,o2)])):B("",!0),!A.value.email&&!A.value.phoneNumber?(g(),y("div",a2," No contact details available. ")):B("",!0)])]),d("div",r2,[W[6]||(W[6]=d("h4",null,"Check-in Status",-1)),A.value.isCheckedIn?(g(),y("div",l2,[W[4]||(W[4]=d("span",{class:"check-icon"},"",-1)),d("div",null,[W[3]||(W[3]=d("strong",null,"Checked In",-1)),d("p",c2,T(re(A.value.checkInTime)),1),A.value.checkInMethod?(g(),y("p",u2," Method: "+T(Le(A.value.checkInMethod)),1)):B("",!0)])])):(g(),y("div",d2,[...W[5]||(W[5]=[d("span",{class:"not-checked-icon"},"",-1),d("span",null,"Not checked in",-1)])]))]),d("div",h2,[d("h4",null,T(F(r).checklists)+" ("+T(A.value.outstandingTasks?.length||0)+" outstanding)",1),!A.value.outstandingTasks||A.value.outstandingTasks.length===0?(g(),y("div",f2," No outstanding tasks. ")):(g(),y("div",p2,[(g(!0),y(ke,null,$e(A.value.outstandingTasks,Y=>(g(),y("div",{key:Y.itemId,class:"task-item"},[d("input",{type:"checkbox",disabled:C.value,onChange:me=>Q(Y)},null,40,m2),d("span",v2,T(Y.text),1)]))),128))]))]),d("div",g2,[d("div",_2,[A.value.phoneNumber?(g(),y("a",{key:0,href:`tel:${A.value.phoneNumber}`,class:"btn btn-primary"}," Call ",8,y2)):B("",!0),A.value.phoneNumber?(g(),y("a",{key:1,href:`sms:${A.value.phoneNumber}`,class:"btn btn-secondary"}," Text ",8,b2)):B("",!0),A.value.email?(g(),y("a",{key:2,href:`mailto:${A.value.email}`,class:"btn btn-secondary"}," Email ",8,k2)):B("",!0)])])])):B("",!0)]),_:1},8,["show","title"])]))}},C2=Ze(w2,[["__scopeId","data-v-c53d550a"]]),L2={class:"offline-indicator-container"},x2={key:0,class:"offline-banner"},A2={class:"offline-text"},I2={key:0,class:"last-sync"},T2={class:"pending-text"},E2={key:0,class:"pending-subtext"},S2={key:1,class:"syncing-text"},M2={__name:"OfflineIndicator",setup(e){const{isOnline:n,isFullyOnline:i,pendingActionsCount:r,lastSyncTime:s,syncStatus:a,syncError:l,forcSync:u}=jc(),h=O(!1),p=O(""),f=O(""),v=ae(()=>{if(!s.value)return"";const C=new Date(s.value),$=new Date-C,R=Math.floor($/6e4),A=Math.floor(R/60);return R<1?"just now":R<60?`${R}m ago`:A<24?`${A}h ago`:C.toLocaleDateString()}),b=async()=>{await u()};return je(a,C=>{C==="success"&&r.value===0?(p.value="All actions synced successfully!",f.value="success",h.value=!0,setTimeout(()=>{h.value=!1},3e3)):C==="error"&&(p.value=l.value||"Sync failed",f.value="error",h.value=!0,setTimeout(()=>{h.value=!1},5e3))}),(C,S)=>(g(),y("div",L2,[Oe(Ml,{name:"slide"},{default:We(()=>[F(i)?B("",!0):(g(),y("div",x2,[S[0]||(S[0]=d("span",{class:"offline-icon"},[d("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"})])],-1)),d("span",A2,T(F(n)?"Server unavailable":"You're offline"),1),F(s)?(g(),y("span",I2," Last synced: "+T(v.value),1)):B("",!0)]))]),_:1}),Oe(Ml,{name:"fade"},{default:We(()=>[F(r)>0?(g(),y("div",{key:0,class:Fe(["pending-banner",{"offline-pending":!F(i)}])},[S[1]||(S[1]=d("span",{class:"pending-icon"},[d("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})])],-1)),d("span",T2,[Ve(T(F(r))+" pending action"+T(F(r)!==1?"s":"")+" ",1),F(i)?B("",!0):(g(),y("span",E2,"(will sync when online)"))]),F(i)&&F(a)!=="syncing"?(g(),y("button",{key:0,onClick:b,class:"sync-button"}," Sync Now ")):F(a)==="syncing"?(g(),y("span",S2,"Syncing...")):B("",!0)],2)):B("",!0)]),_:1}),Oe(Ml,{name:"fade"},{default:We(()=>[h.value?(g(),y("div",{key:0,class:Fe(["sync-toast",f.value])},T(p.value),3)):B("",!0)]),_:1})]))}},P2=Ze(M2,[["__scopeId","data-v-61340ead"]]),$2={class:"marshal-view"},O2={class:"header"},D2={class:"header-title"},R2={key:0},N2={key:1,class:"header-event-date"},B2={class:"header-actions"},F2={class:"container"},z2={key:0,class:"selection-card"},U2={key:1,class:"selection-card"},H2={key:0,class:"loading"},V2={key:2,class:"selection-card error-card"},Z2={class:"error"},q2={key:3,class:"dashboard"},j2={key:0,class:"welcome-bar"},W2={class:"welcome-info"},G2={key:0,class:"welcome-email"},K2={key:0,class:"mode-switch"},Y2={key:1,class:"mode-switch"},J2={class:"accordion"},X2={key:0,class:"accordion-section"},Q2={class:"accordion-title"},eO=["innerHTML"],tO={class:"accordion-icon"},nO={key:0,class:"accordion-content"},sO={class:"event-details"},iO={key:0,class:"event-detail-row"},oO={class:"detail-value"},aO={key:1,class:"event-description"},rO={class:"detail-value"},lO={class:"accordion-section"},cO={class:"accordion-title"},uO=["innerHTML"],dO={key:0,class:"location-status active"},hO={key:1,class:"location-status"},fO={class:"accordion-icon"},pO={key:0,class:"accordion-content map-content"},mO={class:"accordion-section"},vO={class:"accordion-title"},gO=["innerHTML"],_O={class:"accordion-icon"},yO={key:0,class:"accordion-content assignments-accordion-content"},bO={key:0,class:"empty-state"},kO={key:1,class:"checkpoint-accordion"},wO=["onClick"],CO={class:"checkpoint-header-content"},LO={class:"checkpoint-title-row"},xO={key:0,class:"checkpoint-check-icon"},AO={class:"checkpoint-name"},IO={key:1,class:"area-badge"},TO={key:2,class:"checkpoint-time-badge"},EO={key:0,class:"checkpoint-description-preview"},SO={class:"accordion-icon"},MO={key:0,class:"checkpoint-accordion-content"},PO={key:0,class:"checkpoint-mini-map"},$O={class:"checkpoint-marshals"},OO={class:"marshals-label"},DO={class:"marshals-list"},RO={key:0,class:"check-badge"},NO={key:1,class:"checkpoint-area-contacts"},BO={class:"marshals-label"},FO={class:"contact-list"},zO={class:"contact-info"},UO={class:"contact-name"},HO={key:0,class:"contact-role"},VO={key:1,class:"contact-detail"},ZO={key:2,class:"contact-detail"},qO={class:"contact-actions"},jO=["href"],WO=["href"],GO=["href"],KO={key:2,class:"checked-in-status"},YO={class:"check-time"},JO={key:3,class:"check-in-actions"},XO=["onClick","disabled"],QO=["onClick","disabled"],eD={key:4,class:"error"},tD={class:"accordion-section"},nD={class:"accordion-title"},sD=["innerHTML"],iD={class:"accordion-icon"},oD={key:0,class:"accordion-content"},aD={key:0,class:"loading"},rD={key:1,class:"error"},lD={key:2,class:"empty-state"},cD={key:3,class:"checklist-items"},uD={class:"item-checkbox"},dD=["checked","disabled","onChange"],hD={class:"item-content"},fD={key:0,class:"item-context"},pD={key:1,class:"completion-info"},mD={class:"completion-text"},vD={class:"completion-time"},gD={key:1,class:"accordion-section"},_D={class:"accordion-title"},yD=["innerHTML"],bD={class:"accordion-icon"},kD={key:0,class:"accordion-content"},wD={key:0,class:"loading"},CD={key:1,class:"contact-list"},LD={class:"contact-info"},xD={class:"contact-name-row"},AD={key:0,class:"primary-badge"},ID={class:"contact-name"},TD={key:1,class:"contact-role-badge"},ED={key:0,class:"contact-notes-text"},SD={key:1,class:"contact-detail"},MD={key:2,class:"contact-detail"},PD={class:"contact-actions"},$D=["href"],OD=["href"],DD=["href"],RD={class:"accordion-section"},ND={class:"accordion-title"},BD=["innerHTML"],FD={class:"accordion-icon"},zD={key:0,class:"accordion-content"},UD={key:2,class:"accordion-section"},HD={class:"accordion-title"},VD=["innerHTML"],ZD={key:0,class:"area-lead-badges"},qD={class:"accordion-icon"},jD={key:0,class:"accordion-content area-lead-accordion-content"},WD={__name:"MarshalView",setup(e){const{terms:n,termsLower:i}=ht(),{updatePendingCount:r}=jc(),s=Fc(),a=pa(),l=O(!1),u=O(!1),h=O(null),p=O(null),f=O(null),v=O(null),b=ae(()=>v.value?.eventRoles?v.value.eventRoles.filter(X=>X.role==="EventAreaLead").flatMap(X=>X.areaIds||[]):[]),C=ae(()=>b.value.length>0),S=ae(()=>v.value?.eventRoles?v.value.eventRoles.some(ne=>ne.role==="EventAdmin"):!1),$=ae(()=>v.value?.authMethod==="SecureEmailLink"&&S.value),R=ae(()=>v.value?.authMethod==="MarshalMagicCode"&&S.value),A=()=>{a.push(`/admin/events/${s.params.eventId}`)},x=O(null),w=O([]),M=O([]),k=O([]),I=O(!0),E=O("assignments"),q=O(null),U=O(null),Q=O(null),ce=O([]),re=O(!1),Le=O(null),Z=O(!1),W=O([]),Y=O(null),me=O(!1),he=O(!1),Ae=O(""),ee=O(""),ve=O(null),Ee=O(null);let Be=null;const ge=ne=>{E.value=E.value===ne?null:ne},ue=O(null),pe=ne=>{ue.value=ue.value===ne?null:ne},V=ae(()=>M.value.map(ne=>{const X=w.value.find(En=>En.id===ne.locationId),se=X?.areaIds||X?.AreaIds||[];let Pe=null;se.length>0&&k.value.length>0&&(Pe=k.value.find(Sn=>se.includes(Sn.id))?.name);const rt=X?.assignments||[],At=Ie.value.filter(En=>se.includes(En.areaId));return{...ne,location:X,areaName:Pe,areaIds:se,allMarshals:rt,areaContacts:At,locationName:X?.name||"Unknown Location"}})),J=ae(()=>M.value.length>0?M.value[0]:null),te=ae(()=>M.value.map(ne=>ne.locationId)),we=ae(()=>x.value?.route?(typeof x.value.route=="string"?JSON.parse(x.value.route):x.value.route)||[]:[]),Xe=ae(()=>!J.value||!w.value.length?null:w.value.find(ne=>ne.id===J.value.locationId)),D=ae(()=>ce.value.filter(ne=>ne.isCompleted?!["OnePerCheckpoint","OnePerArea","OneLeadPerArea"].includes(ne.matchedScope):!0)),z=ae(()=>D.value.filter(ne=>ne.isCompleted).length),j=O([]),le=O(!1),fe=ae(()=>j.value),de=ae(()=>{const ne=["EmergencyContact","EventDirector","MedicalLead","SafetyOfficer"];return j.value.filter(X=>ne.includes(X.role))}),Ie=O([]);ae(()=>{if(Ie.value.length===0)return[];const ne={};for(const X of Ie.value){const se=X.areaId||"unknown";ne[se]||(ne[se]={areaId:X.areaId,areaName:X.areaName||"Unknown Area",contacts:[]}),ne[se].contacts.push(X)}return Object.values(ne)}),ae(()=>Ie.value.length);const Te=ae(()=>Xe.value?{lat:Xe.value.latitude,lng:Xe.value.longitude}:Ee.value?Ee.value:w.value.length>0?{lat:w.value[0].latitude,lng:w.value[0].longitude}:{lat:51.505,lng:-.09}),xe=async(ne,X)=>{u.value=!0,h.value=null,console.log("Authenticating with magic code:",{eventId:ne,code:X});try{const se=await bs.marshalLogin(ne,X);if(console.log("Auth response:",se.data),se.data.success){localStorage.setItem("sessionToken",se.data.sessionToken),localStorage.setItem(`marshal_${ne}`,se.data.marshalId),p.value=se.data.person,f.value=se.data.marshalId,l.value=!0,console.log("Authenticated as marshal:",f.value,p.value?.name);try{const Pe=await bs.getMe(ne);v.value=Pe.data,console.log("User claims:",v.value)}catch(Pe){console.warn("Failed to fetch claims:",Pe)}a.replace({path:s.path,query:{}}),await ze()}else h.value=se.data.message||"Authentication failed"}catch(se){console.error("Authentication failed:",se),h.value=se.response?.data?.message||"Invalid or expired login link"}finally{u.value=!1}},_e=async ne=>{const X=localStorage.getItem("sessionToken"),se=localStorage.getItem(`marshal_${ne}`);if(!X||!se)return!1;try{const Pe=await bs.getMe(ne);if(Pe.data&&Pe.data.marshalId)return v.value=Pe.data,p.value={personId:Pe.data.personId,name:Pe.data.personName,email:Pe.data.personEmail},f.value=Pe.data.marshalId,l.value=!0,!0}catch{localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${ne}`)}return!1},ze=async()=>{const ne=s.params.eventId;if(console.log("Loading event data for:",{eventId:ne,marshalId:f.value}),hn()){console.log("Offline mode detected, attempting to load from cache...");const X=await qs(ne);if(X){if(console.log("Loaded cached data from:",X.cachedAt),x.value=X.event,k.value=X.areas||[],w.value=X.locations||[],ce.value=X.checklist||[],j.value=X.contacts||[],W.value=X.notes||[],x.value&&mc(x.value),f.value){const se=[];for(const Pe of w.value){const rt=Pe.assignments?.find(At=>At.marshalId===f.value);rt&&se.push(rt)}M.value=se}return}else console.warn("No cached data available while offline")}try{console.log("Fetching event...");const X=await fi.getById(ne);x.value=X.data,console.log("Event loaded:",x.value?.name),x.value&&mc(x.value)}catch(X){console.error("Failed to load event:",X.response?.status,X.response?.data)}try{console.log("Fetching areas...");const X=await Us.getByEvent(ne);k.value=X.data||[],console.log("Areas loaded:",k.value.length)}catch(X){console.error("Failed to load areas:",X.response?.status,X.response?.data)}try{console.log("Fetching event status (locations + assignments)...");const X=await Uo.getEventStatus(ne);if(w.value=X.data?.locations||[],console.log("Locations loaded:",w.value.length),f.value){const se=[];for(const Pe of w.value){const rt=Pe.assignments?.find(At=>At.marshalId===f.value);rt&&(se.push(rt),console.log("Assignment found:",rt.id,"at location:",Pe.name))}M.value=se,console.log("Total assignments found:",M.value.length)}}catch(X){console.error("Failed to load event status:",X.response?.status,X.response?.data)}await Ke(),await Ge(),await Ue();try{const X=JSON.parse(JSON.stringify({event:x.value,areas:k.value,locations:w.value,checklist:ce.value,contacts:j.value,notes:W.value,marshalId:f.value}));await la(ne,X),console.log("Event data cached for offline access")}catch(X){console.warn("Failed to cache event data:",X)}},Me=async()=>{const ne=s.params.eventId;if(hn()){console.log("Skipping background preload: offline");return}console.log("Starting background preload for offline data...");try{const X=await Us.getAreaLeadDashboard(ne);if(X.data){const se=JSON.parse(JSON.stringify({areas:X.data.areas||[],checkpoints:X.data.checkpoints||[]}));await qs(ne)?await zo(ne,"areaLeadDashboard",se):await la(ne,{areaLeadDashboard:se}),console.log("Area lead dashboard cached for offline access")}}catch(X){X.response?.status!==403&&console.warn("Failed to preload area lead dashboard:",X)}console.log("Background preload complete")},Ue=async()=>{const ne=s.params.eventId;try{const X=await vs.getMyNotes(ne);W.value=X.data||[],console.log("Notes loaded:",W.value.length)}catch(X){console.error("Failed to load notes:",X)}},Ge=async()=>{const ne=s.params.eventId;le.value=!0;try{const X=await Hi.getMyContacts(ne);j.value=X.data,console.log("Contacts loaded:",j.value.length)}catch(X){console.warn("Failed to load contacts:",X),j.value=[]}finally{le.value=!1}},Ke=async()=>{if(!f.value){console.warn("No marshal ID, skipping checklist load");return}re.value=!0,Le.value=null;try{console.log("Fetching checklist for marshal:",f.value);const ne=await It.getMarshalChecklist(s.params.eventId,f.value);ce.value=ne.data||[],console.log("Checklist loaded:",ce.value.length,"items")}catch(ne){console.error("Failed to load checklist:",ne.response?.status,ne.response?.data),Le.value=ne.response?.data?.message||"Failed to load checklist"}finally{re.value=!1}},Je=async ne=>{if(Z.value)return;Z.value=!0;const X=s.params.eventId,se={marshalId:f.value,contextType:ne.completionContextType,contextId:ne.completionContextId};try{ne.isCompleted?hn()?(await Rn("checklist_uncomplete",{eventId:X,itemId:ne.itemId,data:se}),ne.isCompleted=!1,ne.completedAt=null,ne.completedByActorName=null,await r()):(await It.uncomplete(X,ne.itemId,se),await Ke()):hn()?(await Rn("checklist_complete",{eventId:X,itemId:ne.itemId,data:se}),ne.isCompleted=!0,ne.completedAt=new Date().toISOString(),ne.completedByActorName=p.value?.name||"You",await r()):(await It.complete(X,ne.itemId,se),await Ke()),await zo(X,"checklist",ce.value)}catch(Pe){if(console.error("Failed to toggle checklist item:",Pe),hn()||!Pe.response){const rt=ne.isCompleted?"checklist_uncomplete":"checklist_complete";await Rn(rt,{eventId:X,itemId:ne.itemId,data:se}),ne.isCompleted=!ne.isCompleted,await r()}else Le.value=Pe.response?.data?.message||"Failed to update checklist",setTimeout(()=>{Le.value=null},3e3)}finally{Z.value=!1}},He=ne=>{if(!ne.completionContextType||!ne.completionContextId)return null;if(ne.completionContextType==="Checkpoint"){const X=w.value.find(Pe=>Pe.id===ne.completionContextId);if(!X)return null;const se=X.description?` - ${X.description}`:"";return`At ${i.value.checkpoint} ${X.name}${se}`}if(ne.completionContextType==="Area"){const X=k.value.find(se=>se.id===ne.completionContextId);return X?`At ${i.value.area} ${X.name}`:null}return ne.completionContextType==="Personal"?"Personal item":null},vt=()=>{if(!("geolocation"in navigator)){console.warn("Geolocation not supported");return}console.log("Starting location tracking..."),Be=navigator.geolocation.watchPosition(ne=>{Ee.value={lat:ne.coords.latitude,lng:ne.coords.longitude},console.log("Location updated:",Ee.value)},ne=>{console.warn("Geolocation error:",{1:"Location permission denied. Please allow location access in your browser settings.",2:"Location unavailable. Make sure GPS is enabled on your device.",3:"Location request timed out. Please try again."}[ne.code]||ne.message)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4})},xt=()=>{Be!==null&&(navigator.geolocation.clearWatch(Be),Be=null)},Ct=async ne=>{q.value=ne.id,U.value=ne.id,Q.value=null;const X=s.params.eventId;try{if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by your browser");const se=await new Promise((rt,At)=>{navigator.geolocation.getCurrentPosition(rt,At,{enableHighAccuracy:!0,timeout:1e4})}),Pe={eventId:X,assignmentId:ne.id,latitude:se.coords.latitude,longitude:se.coords.longitude,manualCheckIn:!1};if(hn()){await Rn("checkin",Pe);const rt=M.value.findIndex(At=>At.id===ne.id);rt!==-1&&(M.value[rt]={...M.value[rt],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"GPS (pending)",checkInLatitude:se.coords.latitude,checkInLongitude:se.coords.longitude}),await r(),await zo(X,"locations",w.value)}else{const rt=await Hs.checkIn(Pe),At=M.value.findIndex(En=>En.id===ne.id);At!==-1&&(M.value[At]=rt.data)}}catch(se){if(hn()||!se.response){const Pe={eventId:X,assignmentId:ne.id,latitude:Ee.value?.lat||null,longitude:Ee.value?.lng||null,manualCheckIn:!0};await Rn("checkin",Pe);const rt=M.value.findIndex(At=>At.id===ne.id);rt!==-1&&(M.value[rt]={...M.value[rt],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"Manual (pending)"}),await r()}else se.response?.data?.message?Q.value=se.response.data.message:se.message?Q.value=se.message:Q.value="Failed to check in. Please try manual check-in."}finally{q.value=null,U.value=null}},gt=ne=>{Ae.value="Manual Check-In",ee.value="Are you sure you want to check in manually? This should only be used if GPS is not available.",ve.value=async()=>{q.value=ne.id,U.value=ne.id,Q.value=null;const X=s.params.eventId,se={eventId:X,assignmentId:ne.id,latitude:null,longitude:null,manualCheckIn:!0};try{if(hn()){await Rn("checkin",se);const Pe=M.value.findIndex(rt=>rt.id===ne.id);Pe!==-1&&(M.value[Pe]={...M.value[Pe],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"Manual (pending)"}),await r(),await zo(X,"locations",w.value)}else{const Pe=await Hs.checkIn(se),rt=M.value.findIndex(At=>At.id===ne.id);rt!==-1&&(M.value[rt]=Pe.data)}}catch(Pe){if(hn()||!Pe.response){await Rn("checkin",se);const rt=M.value.findIndex(At=>At.id===ne.id);rt!==-1&&(M.value[rt]={...M.value[rt],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"Manual (pending)"}),await r()}else Q.value="Failed to check in manually. Please contact the admin."}finally{q.value=null,U.value=null}},he.value=!0},nn=()=>{he.value=!1,ve.value&&(ve.value(),ve.value=null)},jt=()=>{he.value=!1,ve.value=null},yt=async()=>{try{await bs.logout()}catch{}localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${s.params.eventId}`),l.value=!1,p.value=null,f.value=null,M.value=[],ce.value=[],Ie.value=[],a.push("/")},et=ne=>ne?new Date(ne).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",St=ne=>ne?new Date(ne).toLocaleString():"",bt=(ne,X)=>{if(!ne&&!X)return"";const se=ne?et(ne):"?",Pe=X?et(X):"?";return`${se} - ${Pe}`},es=ne=>ne?new Date(ne).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",vn=ne=>ne?new Date(ne).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",qn=ne=>ne?ne.replace(/([A-Z])/g," $1").replace(/^./,X=>X.toUpperCase()).trim():"";return kn(async()=>{const ne=s.params.eventId,X=s.query.code;I.value=!0;try{X?await xe(ne,X):await _e(ne)&&await ze()}finally{I.value=!1}l.value&&(vt(),"requestIdleCallback"in window?requestIdleCallback(()=>{Me()},{timeout:5e3}):setTimeout(()=>{Me()},2e3))}),je(l,ne=>{ne?vt():xt()}),je(()=>s.query.code,async ne=>{if(ne&&l.value){I.value=!0;try{await xe(s.params.eventId,ne)}finally{I.value=!1}}}),As(()=>{xt()}),(ne,X)=>(g(),y("div",$2,[Oe(P2),d("header",O2,[d("div",D2,[x.value?(g(),y("h1",R2,T(x.value.name),1)):B("",!0),x.value?.eventDate?(g(),y("div",N2,T(vn(x.value.eventDate)),1)):B("",!0)]),d("div",B2,[l.value?(g(),y("button",{key:0,onClick:X[0]||(X[0]=se=>me.value=!0),class:"btn-emergency"}," Emergency Info ")):B("",!0),l.value?(g(),y("button",{key:1,onClick:yt,class:"btn-logout"}," Logout "+T(p.value?.name||""),1)):B("",!0)])]),d("div",F2,[I.value?(g(),y("div",z2,[...X[9]||(X[9]=[d("div",{class:"loading"},"Loading...",-1)])])):!l.value&&!h.value?(g(),y("div",U2,[X[10]||(X[10]=d("h2",null,"Welcome",-1)),X[11]||(X[11]=d("p",{class:"instruction"},"Please use the login link sent to you to access your marshal dashboard.",-1)),u.value?(g(),y("p",H2,"Authenticating...")):B("",!0)])):h.value?(g(),y("div",V2,[X[12]||(X[12]=d("h2",null,"Login Failed",-1)),d("p",Z2,T(h.value),1),X[13]||(X[13]=d("p",{class:"instruction"},"Please contact the event organizer for a new login link.",-1))])):(g(),y("div",q2,[$.value||R.value?(g(),y("div",j2,[d("div",W2,[p.value?.email?(g(),y("span",G2,T(p.value.email),1)):B("",!0)]),$.value?(g(),y("div",K2,[d("button",{onClick:A,class:"btn-mode-switch"}," Switch to Admin ")])):R.value?(g(),y("div",Y2,[...X[14]||(X[14]=[d("span",{class:"reauth-hint",title:"Login via admin flow to access admin features"}," Admin access requires re-login ",-1)])])):B("",!0)])):B("",!0),d("div",J2,[x.value?.eventDate||x.value?.description?(g(),y("div",X2,[d("button",{class:Fe(["accordion-header",{active:E.value==="eventDetails"}]),onClick:X[1]||(X[1]=se=>ge("eventDetails"))},[d("span",Q2,[d("span",{class:"section-icon",innerHTML:F(gn)("event")},null,8,eO),X[15]||(X[15]=Ve(" Event details ",-1))]),d("span",tO,T(E.value==="eventDetails"?"":"+"),1)],2),E.value==="eventDetails"?(g(),y("div",nO,[d("div",sO,[x.value.eventDate?(g(),y("div",iO,[X[16]||(X[16]=d("span",{class:"detail-label"},"Date and time",-1)),d("span",oO,T(es(x.value.eventDate)),1)])):B("",!0),x.value.description?(g(),y("div",aO,[X[17]||(X[17]=d("span",{class:"detail-label"},"Description",-1)),d("p",rO,T(x.value.description),1)])):B("",!0)])])):B("",!0)])):B("",!0),d("div",lO,[d("button",{class:Fe(["accordion-header",{active:E.value==="map"}]),onClick:X[2]||(X[2]=se=>ge("map"))},[d("span",cO,[d("span",{class:"section-icon",innerHTML:F(gn)("course")},null,8,uO),Ve(" "+T(F(n).course)+" ",1),Ee.value?(g(),y("span",dO,"GPS Active")):(g(),y("span",hO,"GPS Inactive"))]),d("span",fO,T(E.value==="map"?"":"+"),1)],2),E.value==="map"?(g(),y("div",pO,[Oe(ca,{locations:w.value,route:we.value,center:Te.value,zoom:15,"user-location":Ee.value,"highlight-location-ids":te.value,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-ids"])])):B("",!0)]),d("div",mO,[d("button",{class:Fe(["accordion-header",{active:E.value==="assignments"}]),onClick:X[3]||(X[3]=se=>ge("assignments"))},[d("span",vO,[d("span",{class:"section-icon",innerHTML:F(gn)("checkpoint")},null,8,gO),Ve(" Your "+T(F(i).checkpoints)+" ("+T(M.value.length)+") ",1)]),d("span",_O,T(E.value==="assignments"?"":"+"),1)],2),E.value==="assignments"?(g(),y("div",yO,[M.value.length===0?(g(),y("div",bO,[d("p",null,"You don't have any "+T(F(i).checkpoint)+" assignments yet.",1)])):(g(),y("div",kO,[(g(!0),y(ke,null,$e(V.value,se=>(g(),y("div",{key:se.id,class:"checkpoint-accordion-section"},[d("button",{class:Fe(["checkpoint-accordion-header",{active:ue.value===se.id,"checked-in":se.isCheckedIn}]),onClick:Pe=>pe(se.id)},[d("div",CO,[d("div",LO,[se.isCheckedIn?(g(),y("span",xO,"")):B("",!0),d("span",AO,T(se.location?.name||se.locationName),1),se.areaName?(g(),y("span",IO,T(se.areaName),1)):B("",!0),se.location?.startTime||se.location?.endTime?(g(),y("span",TO,T(bt(se.location.startTime,se.location.endTime)),1)):B("",!0)]),se.location?.description?(g(),y("div",EO,T(se.location.description),1)):B("",!0)]),d("span",SO,T(ue.value===se.id?"":"+"),1)],10,wO),ue.value===se.id?(g(),y("div",MO,[se.location?(g(),y("div",PO,[Oe(ca,{locations:w.value,route:we.value,center:{lat:se.location.latitude,lng:se.location.longitude},zoom:16,"user-location":Ee.value,"highlight-location-id":se.locationId,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-id"])])):B("",!0),d("div",$O,[d("div",OO,T(F(n).people)+":",1),d("div",DO,[(g(!0),y(ke,null,$e(se.allMarshals,Pe=>(g(),y("span",{key:Pe.marshalId,class:Fe(["marshal-tag",{"is-you":Pe.marshalId===f.value,"checked-in":Pe.isCheckedIn}])},[Ve(T(Pe.marshalName)+T(Pe.marshalId===f.value?" (you)":"")+" ",1),Pe.isCheckedIn?(g(),y("span",RO,"")):B("",!0)],2))),128))])]),se.areaContacts.length>0?(g(),y("div",NO,[d("div",BO,T(F(n).area)+" contacts:",1),d("div",FO,[(g(!0),y(ke,null,$e(se.areaContacts,Pe=>(g(),y("div",{key:Pe.marshalId,class:"contact-item"},[d("div",zO,[d("div",UO,T(Pe.marshalName),1),Pe.role?(g(),y("div",HO,T(Pe.role),1)):B("",!0),Pe.phone?(g(),y("div",VO,T(Pe.phone),1)):B("",!0),Pe.email?(g(),y("div",ZO,T(Pe.email),1)):B("",!0)]),d("div",qO,[Pe.phone?(g(),y("a",{key:0,href:`tel:${Pe.phone}`,class:"contact-link"},[...X[18]||(X[18]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Ve(" Call ",-1)])],8,jO)):B("",!0),Pe.phone?(g(),y("a",{key:1,href:`sms:${Pe.phone}`,class:"contact-link"},[...X[19]||(X[19]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Ve(" Text ",-1)])],8,WO)):B("",!0),Pe.email?(g(),y("a",{key:2,href:`mailto:${Pe.email}`,class:"contact-link"},[...X[20]||(X[20]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Ve(" Email ",-1)])],8,GO)):B("",!0)])]))),128))])])):B("",!0),se.isCheckedIn?(g(),y("div",KO,[X[22]||(X[22]=d("span",{class:"check-icon"},"",-1)),d("div",null,[X[21]||(X[21]=d("strong",null,"Checked In",-1)),d("p",YO,T(et(se.checkInTime)),1)])])):(g(),y("div",JO,[d("button",{onClick:Pe=>Ct(se),class:"btn btn-primary",disabled:q.value===se.id},T(q.value===se.id?"Checking in...":"GPS Check-In"),9,XO),d("button",{onClick:Pe=>gt(se),class:"btn btn-secondary",disabled:q.value===se.id}," Manual ",8,QO)])),Q.value&&U.value===se.id?(g(),y("div",eD,T(Q.value),1)):B("",!0)])):B("",!0)]))),128))]))])):B("",!0)]),d("div",tD,[d("button",{class:Fe(["accordion-header",{active:E.value==="checklist"}]),onClick:X[4]||(X[4]=se=>ge("checklist"))},[d("span",nD,[d("span",{class:"section-icon",innerHTML:F(gn)("checklist")},null,8,sD),Ve(" Your "+T(F(i).checklists)+" ("+T(z.value)+" of "+T(D.value.length)+" complete) ",1)]),d("span",iD,T(E.value==="checklist"?"":"+"),1)],2),E.value==="checklist"?(g(),y("div",oD,[re.value?(g(),y("div",aD,"Loading checklist...")):Le.value?(g(),y("div",rD,T(Le.value),1)):D.value.length===0?(g(),y("div",lD,[d("p",null,"No "+T(F(i).checklists)+" for you.",1)])):(g(),y("div",cD,[(g(!0),y(ke,null,$e(D.value,se=>(g(),y("div",{key:se.itemId,class:Fe(["checklist-item",{"item-completed":se.isCompleted}])},[d("div",uD,[d("input",{type:"checkbox",checked:se.isCompleted,disabled:!se.canBeCompletedByMe||Z.value,onChange:Pe=>Je(se)},null,40,dD)]),d("div",hD,[d("div",{class:Fe(["item-text",{"text-completed":se.isCompleted}])},T(se.text),3),He(se)?(g(),y("div",fD,T(He(se)),1)):B("",!0),se.isCompleted?(g(),y("div",pD,[d("span",mD," Completed by "+T(se.completedByActorName||"Unknown"),1),d("span",vD,T(St(se.completedAt)),1)])):B("",!0)])],2))),128))]))])):B("",!0)]),fe.value.length>0||le.value?(g(),y("div",gD,[d("button",{class:Fe(["accordion-header",{active:E.value==="eventContacts"}]),onClick:X[5]||(X[5]=se=>ge("eventContacts"))},[d("span",_D,[d("span",{class:"section-icon",innerHTML:F(gn)("contacts")},null,8,yD),Ve(" Your contacts ("+T(fe.value.length)+") ",1)]),d("span",bD,T(E.value==="eventContacts"?"":"+"),1)],2),E.value==="eventContacts"?(g(),y("div",kD,[le.value?(g(),y("div",wD,"Loading contacts...")):(g(),y("div",CD,[(g(!0),y(ke,null,$e(fe.value,se=>(g(),y("div",{key:se.contactId,class:Fe(["contact-item",{"primary-contact":se.isPrimary}])},[d("div",LD,[d("div",xD,[se.isPrimary?(g(),y("span",AD,"")):B("",!0),d("span",ID,T(se.name),1),se.role?(g(),y("span",TD,T(qn(se.role)),1)):B("",!0)]),se.notes?(g(),y("div",ED,T(se.notes),1)):B("",!0),se.phone?(g(),y("div",SD,T(se.phone),1)):B("",!0),se.email?(g(),y("div",MD,T(se.email),1)):B("",!0)]),d("div",PD,[se.phone?(g(),y("a",{key:0,href:`tel:${se.phone}`,class:"contact-link"},[...X[23]||(X[23]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Ve(" Call ",-1)])],8,$D)):B("",!0),se.phone?(g(),y("a",{key:1,href:`sms:${se.phone}`,class:"contact-link"},[...X[24]||(X[24]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Ve(" Text ",-1)])],8,OD)):B("",!0),se.email?(g(),y("a",{key:2,href:`mailto:${se.email}`,class:"contact-link"},[...X[25]||(X[25]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Ve(" Email ",-1)])],8,DD)):B("",!0)])],2))),128))]))])):B("",!0)])):B("",!0),d("div",RD,[d("button",{class:Fe(["accordion-header",{active:E.value==="notes"}]),onClick:X[6]||(X[6]=se=>ge("notes"))},[d("span",ND,[d("span",{class:"section-icon",innerHTML:F(gn)("notes")},null,8,BD),Ve(" Your notes ("+T(W.value.length)+") ",1)]),d("span",FD,T(E.value==="notes"?"":"+"),1)],2),E.value==="notes"?(g(),y("div",zD,[Oe(Yr,{"event-id":F(s).params.eventId,"all-notes":W.value,locations:w.value,areas:k.value,assignments:M.value,"show-scope":!1,onNotesChanged:Ue},null,8,["event-id","all-notes","locations","areas","assignments"])])):B("",!0)]),C.value?(g(),y("div",UD,[d("button",{class:Fe(["accordion-header",{active:E.value==="areaLead"}]),onClick:X[7]||(X[7]=se=>ge("areaLead"))},[d("span",HD,[d("span",{class:"section-icon",innerHTML:F(gn)("checkpoint")},null,8,VD),Ve(" "+T(F(n).checkpoints)+" in your "+T(F(i).areas)+" ",1),Y.value?.areas?.length>0?(g(),y("span",ZD,[(g(!0),y(ke,null,$e(Y.value.areas,se=>(g(),y("span",{key:se.areaId,class:"area-lead-badge",style:tn({backgroundColor:se.color||"#667eea"})},T(se.name),5))),128))])):B("",!0)]),d("span",qD,T(E.value==="areaLead"?"":"+"),1)],2),E.value==="areaLead"?(g(),y("div",jD,[Oe(C2,{ref_key:"areaLeadRef",ref:Y,"event-id":F(s).params.eventId,"area-ids":b.value,"marshal-id":f.value,route:we.value,onChecklistUpdated:Ke},null,8,["event-id","area-ids","marshal-id","route"])])):B("",!0)])):B("",!0)])]))]),Oe(v$,{show:me.value,contacts:de.value,onClose:X[8]||(X[8]=se=>me.value=!1)},null,8,["show","contacts"]),Oe(Kr,{show:he.value,title:Ae.value,message:ee.value,onConfirm:nn,onCancel:jt},null,8,["show","title","message"])]))}},GD=Ze(WD,[["__scopeId","data-v-06615a74"]]),KD=[{path:"/",name:"Home",component:Z_},{path:"/admin/login",name:"AdminLogin",component:Ob},{path:"/admin/verify",name:"AdminVerify",component:Ub},{path:"/admin/dashboard",name:"AdminDashboard",component:Dk,meta:{requiresAuth:!0}},{path:"/admin/profile",name:"AdminProfile",component:rw,meta:{requiresAuth:!0}},{path:"/admin/event/:eventId",name:"AdminEventManage",component:s$,meta:{requiresAuth:!0}},{path:"/event/:eventId",name:"MarshalView",component:GD},{path:"/:pathMatch(.*)*",redirect:"/"}],dp=B_({history:v_("/VolunteerCheckin/testing/"),routes:KD});dp.beforeEach((e,n,i)=>{const r=localStorage.getItem("adminEmail");e.meta.requiresAuth&&!r?i({name:"AdminLogin"}):i()});Is().then(()=>{console.log("Offline database initialized")}).catch(e=>{console.warn("Failed to initialize offline database:",e)});const Wc=yg(Mg);Wc.use(wg());Wc.use(dp);Wc.mount("#app");
