(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function $l(e){const n=Object.create(null);for(const i of e.split(","))n[i]=1;return i=>i in n}const _t={},Si=[],Dn=()=>{},Xu=()=>!1,tr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Dl=e=>e.startsWith("onUpdate:"),Wt=Object.assign,Ol=(e,n)=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)},Vf=Object.prototype.hasOwnProperty,ht=(e,n)=>Vf.call(e,n),Ze=Array.isArray,Ii=e=>zo(e)==="[object Map]",Fi=e=>zo(e)==="[object Set]",$c=e=>zo(e)==="[object Date]",et=e=>typeof e=="function",At=e=>typeof e=="string",Ln=e=>typeof e=="symbol",gt=e=>e!==null&&typeof e=="object",Qu=e=>(gt(e)||et(e))&&et(e.then)&&et(e.catch),ed=Object.prototype.toString,zo=e=>ed.call(e),Zf=e=>zo(e).slice(8,-1),td=e=>zo(e)==="[object Object]",nr=e=>At(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Co=$l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sr=e=>{const n=Object.create(null);return(i=>n[i]||(n[i]=e(i)))},qf=/-\w/g,gn=sr(e=>e.replace(qf,n=>n.slice(1).toUpperCase())),jf=/\B([A-Z])/g,Xs=sr(e=>e.replace(jf,"-$1").toLowerCase()),ir=sr(e=>e.charAt(0).toUpperCase()+e.slice(1)),jr=sr(e=>e?`on${ir(e)}`:""),xs=(e,n)=>!Object.is(e,n),Pa=(e,...n)=>{for(let i=0;i<e.length;i++)e[i](...n)},nd=(e,n,i,a=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:a,value:i})},or=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Dc;const ar=()=>Dc||(Dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gt(e){if(Ze(e)){const n={};for(let i=0;i<e.length;i++){const a=e[i],s=At(a)?Yf(a):Gt(a);if(s)for(const r in s)n[r]=s[r]}return n}else if(At(e)||gt(e))return e}const Wf=/;(?![^(]*\))/g,Gf=/:([^]+)/,Kf=/\/\*[^]*?\*\//g;function Yf(e){const n={};return e.replace(Kf,"").split(Wf).forEach(i=>{if(i){const a=i.split(Gf);a.length>1&&(n[a[0].trim()]=a[1].trim())}}),n}function Fe(e){let n="";if(At(e))n=e;else if(Ze(e))for(let i=0;i<e.length;i++){const a=Fe(e[i]);a&&(n+=a+" ")}else if(gt(e))for(const i in e)e[i]&&(n+=i+" ");return n.trim()}const Jf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xf=$l(Jf);function sd(e){return!!e||e===""}function Qf(e,n){if(e.length!==n.length)return!1;let i=!0;for(let a=0;i&&a<e.length;a++)i=Ys(e[a],n[a]);return i}function Ys(e,n){if(e===n)return!0;let i=$c(e),a=$c(n);if(i||a)return i&&a?e.getTime()===n.getTime():!1;if(i=Ln(e),a=Ln(n),i||a)return e===n;if(i=Ze(e),a=Ze(n),i||a)return i&&a?Qf(e,n):!1;if(i=gt(e),a=gt(n),i||a){if(!i||!a)return!1;const s=Object.keys(e).length,r=Object.keys(n).length;if(s!==r)return!1;for(const l in e){const u=e.hasOwnProperty(l),h=n.hasOwnProperty(l);if(u&&!h||!u&&h||!Ys(e[l],n[l]))return!1}}return String(e)===String(n)}function Rl(e,n){return e.findIndex(i=>Ys(i,n))}const id=e=>!!(e&&e.__v_isRef===!0),M=e=>At(e)?e:e==null?"":Ze(e)||gt(e)&&(e.toString===ed||!et(e.toString))?id(e)?M(e.value):JSON.stringify(e,od,2):String(e),od=(e,n)=>id(n)?od(e,n.value):Ii(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[a,s],r)=>(i[Wr(a,r)+" =>"]=s,i),{})}:Fi(n)?{[`Set(${n.size})`]:[...n.values()].map(i=>Wr(i))}:Ln(n)?Wr(n):gt(n)&&!Ze(n)&&!td(n)?String(n):n,Wr=(e,n="")=>{var i;return Ln(e)?`Symbol(${(i=e.description)!=null?i:n})`:e};let Vt;class ad{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!n&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].pause();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].resume();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].resume()}}run(n){if(this._active){const i=Vt;try{return Vt=this,n()}finally{Vt=i}}}on(){++this._on===1&&(this.prevScope=Vt,Vt=this)}off(){this._on>0&&--this._on===0&&(Vt=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let i,a;for(i=0,a=this.effects.length;i<a;i++)this.effects[i].stop();for(this.effects.length=0,i=0,a=this.cleanups.length;i<a;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function rd(e){return new ad(e)}function ld(){return Vt}function ep(e,n=!1){Vt&&Vt.cleanups.push(e)}let bt;const Gr=new WeakSet;class cd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gr.has(this)&&(Gr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Oc(this),hd(this);const n=bt,i=wn;bt=this,wn=!0;try{return this.fn()}finally{fd(this),bt=n,wn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Fl(n);this.deps=this.depsTail=void 0,Oc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dl(this)&&this.run()}get dirty(){return dl(this)}}let ud=0,xo,Eo;function dd(e,n=!1){if(e.flags|=8,n){e.next=Eo,Eo=e;return}e.next=xo,xo=e}function Nl(){ud++}function Bl(){if(--ud>0)return;if(Eo){let n=Eo;for(Eo=void 0;n;){const i=n.next;n.next=void 0,n.flags&=-9,n=i}}let e;for(;xo;){let n=xo;for(xo=void 0;n;){const i=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(a){e||(e=a)}n=i}}if(e)throw e}function hd(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function fd(e){let n,i=e.depsTail,a=i;for(;a;){const s=a.prevDep;a.version===-1?(a===i&&(i=s),Fl(a),tp(a)):n=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=s}e.deps=n,e.depsTail=i}function dl(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(pd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function pd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$o)||(e.globalVersion=$o,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!dl(e))))return;e.flags|=2;const n=e.dep,i=bt,a=wn;bt=e,wn=!0;try{hd(e);const s=e.fn(e._value);(n.version===0||xs(s,e._value))&&(e.flags|=128,e._value=s,n.version++)}catch(s){throw n.version++,s}finally{bt=i,wn=a,fd(e),e.flags&=-3}}function Fl(e,n=!1){const{dep:i,prevSub:a,nextSub:s}=e;if(a&&(a.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=a,e.nextSub=void 0),i.subs===e&&(i.subs=a,!a&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Fl(r,!0)}!n&&!--i.sc&&i.map&&i.map.delete(i.key)}function tp(e){const{prevDep:n,nextDep:i}=e;n&&(n.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=n,e.nextDep=void 0)}let wn=!0;const md=[];function ls(){md.push(wn),wn=!1}function cs(){const e=md.pop();wn=e===void 0?!0:e}function Oc(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const i=bt;bt=void 0;try{n()}finally{bt=i}}}let $o=0;class np{constructor(n,i){this.sub=n,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zl{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!bt||!wn||bt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==bt)i=this.activeLink=new np(bt,this),bt.deps?(i.prevDep=bt.depsTail,bt.depsTail.nextDep=i,bt.depsTail=i):bt.deps=bt.depsTail=i,vd(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const a=i.nextDep;a.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=a),i.prevDep=bt.depsTail,i.nextDep=void 0,bt.depsTail.nextDep=i,bt.depsTail=i,bt.deps===i&&(bt.deps=a)}return i}trigger(n){this.version++,$o++,this.notify(n)}notify(n){Nl();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Bl()}}}function vd(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let a=n.deps;a;a=a.nextDep)vd(a)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Ha=new WeakMap,Ws=Symbol(""),hl=Symbol(""),Do=Symbol("");function Zt(e,n,i){if(wn&&bt){let a=Ha.get(e);a||Ha.set(e,a=new Map);let s=a.get(i);s||(a.set(i,s=new zl),s.map=a,s.key=i),s.track()}}function ns(e,n,i,a,s,r){const l=Ha.get(e);if(!l){$o++;return}const u=h=>{h&&h.trigger()};if(Nl(),n==="clear")l.forEach(u);else{const h=Ze(e),p=h&&nr(i);if(h&&i==="length"){const m=Number(a);l.forEach((v,g)=>{(g==="length"||g===Do||!Ln(g)&&g>=m)&&u(v)})}else switch((i!==void 0||l.has(void 0))&&u(l.get(i)),p&&u(l.get(Do)),n){case"add":h?p&&u(l.get("length")):(u(l.get(Ws)),Ii(e)&&u(l.get(hl)));break;case"delete":h||(u(l.get(Ws)),Ii(e)&&u(l.get(hl)));break;case"set":Ii(e)&&u(l.get(Ws));break}}Bl()}function sp(e,n){const i=Ha.get(e);return i&&i.get(n)}function ki(e){const n=ct(e);return n===e?n:(Zt(n,"iterate",Do),un(e)?n:n.map(Cn))}function rr(e){return Zt(e=ct(e),"iterate",Do),e}function ks(e,n){return us(e)?rs(e)?$i(Cn(n)):$i(n):Cn(n)}const ip={__proto__:null,[Symbol.iterator](){return Kr(this,Symbol.iterator,e=>ks(this,e))},concat(...e){return ki(this).concat(...e.map(n=>Ze(n)?ki(n):n))},entries(){return Kr(this,"entries",e=>(e[1]=ks(this,e[1]),e))},every(e,n){return Yn(this,"every",e,n,void 0,arguments)},filter(e,n){return Yn(this,"filter",e,n,i=>i.map(a=>ks(this,a)),arguments)},find(e,n){return Yn(this,"find",e,n,i=>ks(this,i),arguments)},findIndex(e,n){return Yn(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Yn(this,"findLast",e,n,i=>ks(this,i),arguments)},findLastIndex(e,n){return Yn(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Yn(this,"forEach",e,n,void 0,arguments)},includes(...e){return Yr(this,"includes",e)},indexOf(...e){return Yr(this,"indexOf",e)},join(e){return ki(this).join(e)},lastIndexOf(...e){return Yr(this,"lastIndexOf",e)},map(e,n){return Yn(this,"map",e,n,void 0,arguments)},pop(){return vo(this,"pop")},push(...e){return vo(this,"push",e)},reduce(e,...n){return Rc(this,"reduce",e,n)},reduceRight(e,...n){return Rc(this,"reduceRight",e,n)},shift(){return vo(this,"shift")},some(e,n){return Yn(this,"some",e,n,void 0,arguments)},splice(...e){return vo(this,"splice",e)},toReversed(){return ki(this).toReversed()},toSorted(e){return ki(this).toSorted(e)},toSpliced(...e){return ki(this).toSpliced(...e)},unshift(...e){return vo(this,"unshift",e)},values(){return Kr(this,"values",e=>ks(this,e))}};function Kr(e,n,i){const a=rr(e),s=a[n]();return a!==e&&!un(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=i(r.value)),r}),s}const op=Array.prototype;function Yn(e,n,i,a,s,r){const l=rr(e),u=l!==e&&!un(e),h=l[n];if(h!==op[n]){const v=h.apply(e,r);return u?Cn(v):v}let p=i;l!==e&&(u?p=function(v,g){return i.call(this,ks(e,v),g,e)}:i.length>2&&(p=function(v,g){return i.call(this,v,g,e)}));const m=h.call(l,p,a);return u&&s?s(m):m}function Rc(e,n,i,a){const s=rr(e);let r=i;return s!==e&&(un(e)?i.length>3&&(r=function(l,u,h){return i.call(this,l,u,h,e)}):r=function(l,u,h){return i.call(this,l,ks(e,u),h,e)}),s[n](r,...a)}function Yr(e,n,i){const a=ct(e);Zt(a,"iterate",Do);const s=a[n](...i);return(s===-1||s===!1)&&lr(i[0])?(i[0]=ct(i[0]),a[n](...i)):s}function vo(e,n,i=[]){ls(),Nl();const a=ct(e)[n].apply(e,i);return Bl(),cs(),a}const ap=$l("__proto__,__v_isRef,__isVue"),_d=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ln));function rp(e){Ln(e)||(e=String(e));const n=ct(this);return Zt(n,"has",e),n.hasOwnProperty(e)}class gd{constructor(n=!1,i=!1){this._isReadonly=n,this._isShallow=i}get(n,i,a){if(i==="__v_skip")return n.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return a===(s?r?_p:wd:r?kd:bd).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(a)?n:void 0;const l=Ze(n);if(!s){let h;if(l&&(h=ip[i]))return h;if(i==="hasOwnProperty")return rp}const u=Reflect.get(n,i,Mt(n)?n:a);if((Ln(i)?_d.has(i):ap(i))||(s||Zt(n,"get",i),r))return u;if(Mt(u)){const h=l&&nr(i)?u:u.value;return s&&gt(h)?pl(h):h}return gt(u)?s?pl(u):Uo(u):u}}class yd extends gd{constructor(n=!1){super(!1,n)}set(n,i,a,s){let r=n[i];const l=Ze(n)&&nr(i);if(!this._isShallow){const p=us(r);if(!un(a)&&!us(a)&&(r=ct(r),a=ct(a)),!l&&Mt(r)&&!Mt(a))return p||(r.value=a),!0}const u=l?Number(i)<n.length:ht(n,i),h=Reflect.set(n,i,a,Mt(n)?n:s);return n===ct(s)&&(u?xs(a,r)&&ns(n,"set",i,a):ns(n,"add",i,a)),h}deleteProperty(n,i){const a=ht(n,i);n[i];const s=Reflect.deleteProperty(n,i);return s&&a&&ns(n,"delete",i,void 0),s}has(n,i){const a=Reflect.has(n,i);return(!Ln(i)||!_d.has(i))&&Zt(n,"has",i),a}ownKeys(n){return Zt(n,"iterate",Ze(n)?"length":Ws),Reflect.ownKeys(n)}}class lp extends gd{constructor(n=!1){super(!0,n)}set(n,i){return!0}deleteProperty(n,i){return!0}}const cp=new yd,up=new lp,dp=new yd(!0);const fl=e=>e,xa=e=>Reflect.getPrototypeOf(e);function hp(e,n,i){return function(...a){const s=this.__v_raw,r=ct(s),l=Ii(r),u=e==="entries"||e===Symbol.iterator&&l,h=e==="keys"&&l,p=s[e](...a),m=i?fl:n?$i:Cn;return!n&&Zt(r,"iterate",h?hl:Ws),{next(){const{value:v,done:g}=p.next();return g?{value:v,done:g}:{value:u?[m(v[0]),m(v[1])]:m(v),done:g}},[Symbol.iterator](){return this}}}}function Ea(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function fp(e,n){const i={get(s){const r=this.__v_raw,l=ct(r),u=ct(s);e||(xs(s,u)&&Zt(l,"get",s),Zt(l,"get",u));const{has:h}=xa(l),p=n?fl:e?$i:Cn;if(h.call(l,s))return p(r.get(s));if(h.call(l,u))return p(r.get(u));r!==l&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Zt(ct(s),"iterate",Ws),s.size},has(s){const r=this.__v_raw,l=ct(r),u=ct(s);return e||(xs(s,u)&&Zt(l,"has",s),Zt(l,"has",u)),s===u?r.has(s):r.has(s)||r.has(u)},forEach(s,r){const l=this,u=l.__v_raw,h=ct(u),p=n?fl:e?$i:Cn;return!e&&Zt(h,"iterate",Ws),u.forEach((m,v)=>s.call(r,p(m),p(v),l))}};return Wt(i,e?{add:Ea("add"),set:Ea("set"),delete:Ea("delete"),clear:Ea("clear")}:{add(s){!n&&!un(s)&&!us(s)&&(s=ct(s));const r=ct(this);return xa(r).has.call(r,s)||(r.add(s),ns(r,"add",s,s)),this},set(s,r){!n&&!un(r)&&!us(r)&&(r=ct(r));const l=ct(this),{has:u,get:h}=xa(l);let p=u.call(l,s);p||(s=ct(s),p=u.call(l,s));const m=h.call(l,s);return l.set(s,r),p?xs(r,m)&&ns(l,"set",s,r):ns(l,"add",s,r),this},delete(s){const r=ct(this),{has:l,get:u}=xa(r);let h=l.call(r,s);h||(s=ct(s),h=l.call(r,s)),u&&u.call(r,s);const p=r.delete(s);return h&&ns(r,"delete",s,void 0),p},clear(){const s=ct(this),r=s.size!==0,l=s.clear();return r&&ns(s,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=hp(s,e,n)}),i}function Ul(e,n){const i=fp(e,n);return(a,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?a:Reflect.get(ht(i,s)&&s in a?i:a,s,r)}const pp={get:Ul(!1,!1)},mp={get:Ul(!1,!0)},vp={get:Ul(!0,!1)};const bd=new WeakMap,kd=new WeakMap,wd=new WeakMap,_p=new WeakMap;function gp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yp(e){return e.__v_skip||!Object.isExtensible(e)?0:gp(Zf(e))}function Uo(e){return us(e)?e:Hl(e,!1,cp,pp,bd)}function Ld(e){return Hl(e,!1,dp,mp,kd)}function pl(e){return Hl(e,!0,up,vp,wd)}function Hl(e,n,i,a,s){if(!gt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const r=yp(e);if(r===0)return e;const l=s.get(e);if(l)return l;const u=new Proxy(e,r===2?a:i);return s.set(e,u),u}function rs(e){return us(e)?rs(e.__v_raw):!!(e&&e.__v_isReactive)}function us(e){return!!(e&&e.__v_isReadonly)}function un(e){return!!(e&&e.__v_isShallow)}function lr(e){return e?!!e.__v_raw:!1}function ct(e){const n=e&&e.__v_raw;return n?ct(n):e}function Vl(e){return!ht(e,"__v_skip")&&Object.isExtensible(e)&&nd(e,"__v_skip",!0),e}const Cn=e=>gt(e)?Uo(e):e,$i=e=>gt(e)?pl(e):e;function Mt(e){return e?e.__v_isRef===!0:!1}function O(e){return Cd(e,!1)}function bp(e){return Cd(e,!0)}function Cd(e,n){return Mt(e)?e:new kp(e,n)}class kp{constructor(n,i){this.dep=new zl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?n:ct(n),this._value=i?n:Cn(n),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(n){const i=this._rawValue,a=this.__v_isShallow||un(n)||us(n);n=a?n:ct(n),xs(n,i)&&(this._rawValue=n,this._value=a?n:Cn(n),this.dep.trigger())}}function W(e){return Mt(e)?e.value:e}const wp={get:(e,n,i)=>n==="__v_raw"?e:W(Reflect.get(e,n,i)),set:(e,n,i,a)=>{const s=e[n];return Mt(s)&&!Mt(i)?(s.value=i,!0):Reflect.set(e,n,i,a)}};function xd(e){return rs(e)?e:new Proxy(e,wp)}function Lp(e){const n=Ze(e)?new Array(e.length):{};for(const i in e)n[i]=xp(e,i);return n}class Cp{constructor(n,i,a){this._object=n,this._key=i,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0,this._raw=ct(n);let s=!0,r=n;if(!Ze(n)||!nr(String(i)))do s=!lr(r)||un(r);while(s&&(r=r.__v_raw));this._shallow=s}get value(){let n=this._object[this._key];return this._shallow&&(n=W(n)),this._value=n===void 0?this._defaultValue:n}set value(n){if(this._shallow&&Mt(this._raw[this._key])){const i=this._object[this._key];if(Mt(i)){i.value=n;return}}this._object[this._key]=n}get dep(){return sp(this._raw,this._key)}}function xp(e,n,i){return new Cp(e,n,i)}class Ep{constructor(n,i,a){this.fn=n,this.setter=i,this._value=void 0,this.dep=new zl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return dd(this,!0),!0}get value(){const n=this.dep.track();return pd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Tp(e,n,i=!1){let a,s;return et(e)?a=e:(a=e.get,s=e.set),new Ep(a,s,i)}const Ta={},Va=new WeakMap;let Us;function Sp(e,n=!1,i=Us){if(i){let a=Va.get(i);a||Va.set(i,a=[]),a.push(e)}}function Ip(e,n,i=_t){const{immediate:a,deep:s,once:r,scheduler:l,augmentJob:u,call:h}=i,p=S=>s?S:un(S)||s===!1||s===0?ss(S,1):ss(S);let m,v,g,w,E=!1,A=!1;if(Mt(e)?(v=()=>e.value,E=un(e)):rs(e)?(v=()=>p(e),E=!0):Ze(e)?(A=!0,E=e.some(S=>rs(S)||un(S)),v=()=>e.map(S=>{if(Mt(S))return S.value;if(rs(S))return p(S);if(et(S))return h?h(S,2):S()})):et(e)?n?v=h?()=>h(e,2):e:v=()=>{if(g){ls();try{g()}finally{cs()}}const S=Us;Us=m;try{return h?h(e,3,[w]):e(w)}finally{Us=S}}:v=Dn,n&&s){const S=v,T=s===!0?1/0:s;v=()=>ss(S(),T)}const P=ld(),x=()=>{m.stop(),P&&P.active&&Ol(P.effects,m)};if(r&&n){const S=n;n=(...T)=>{S(...T),x()}}let $=A?new Array(e.length).fill(Ta):Ta;const b=S=>{if(!(!(m.flags&1)||!m.dirty&&!S))if(n){const T=m.run();if(s||E||(A?T.some((I,N)=>xs(I,$[N])):xs(T,$))){g&&g();const I=Us;Us=m;try{const N=[T,$===Ta?void 0:A&&$[0]===Ta?[]:$,w];$=T,h?h(n,3,N):n(...N)}finally{Us=I}}}else m.run()};return u&&u(b),m=new cd(v),m.scheduler=l?()=>l(b,!1):b,w=S=>Sp(S,!1,m),g=m.onStop=()=>{const S=Va.get(m);if(S){if(h)h(S,4);else for(const T of S)T();Va.delete(m)}},n?a?b(!0):$=m.run():l?l(b.bind(null,!0),!0):m.run(),x.pause=m.pause.bind(m),x.resume=m.resume.bind(m),x.stop=x,x}function ss(e,n=1/0,i){if(n<=0||!gt(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=n))return e;if(i.set(e,n),n--,Mt(e))ss(e.value,n,i);else if(Ze(e))for(let a=0;a<e.length;a++)ss(e[a],n,i);else if(Fi(e)||Ii(e))e.forEach(a=>{ss(a,n,i)});else if(td(e)){for(const a in e)ss(e[a],n,i);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&ss(e[a],n,i)}return e}function Ho(e,n,i,a){try{return a?e(...a):e()}catch(s){cr(s,n,i)}}function On(e,n,i,a){if(et(e)){const s=Ho(e,n,i,a);return s&&Qu(s)&&s.catch(r=>{cr(r,n,i)}),s}if(Ze(e)){const s=[];for(let r=0;r<e.length;r++)s.push(On(e[r],n,i,a));return s}}function cr(e,n,i,a=!0){const s=n?n.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=n&&n.appContext.config||_t;if(n){let u=n.parent;const h=n.proxy,p=`https://vuejs.org/error-reference/#runtime-${i}`;for(;u;){const m=u.ec;if(m){for(let v=0;v<m.length;v++)if(m[v](e,h,p)===!1)return}u=u.parent}if(r){ls(),Ho(r,null,10,[e,h,p]),cs();return}}Mp(e,i,s,a,l)}function Mp(e,n,i,a=!0,s=!1){if(s)throw e;console.error(e)}const Qt=[];let An=-1;const Mi=[];let ws=null,Li=0;const Ed=Promise.resolve();let Za=null;function ur(e){const n=Za||Ed;return e?n.then(this?e.bind(this):e):n}function Ap(e){let n=An+1,i=Qt.length;for(;n<i;){const a=n+i>>>1,s=Qt[a],r=Oo(s);r<e||r===e&&s.flags&2?n=a+1:i=a}return n}function Zl(e){if(!(e.flags&1)){const n=Oo(e),i=Qt[Qt.length-1];!i||!(e.flags&2)&&n>=Oo(i)?Qt.push(e):Qt.splice(Ap(n),0,e),e.flags|=1,Td()}}function Td(){Za||(Za=Ed.then(Id))}function Pp(e){Ze(e)?Mi.push(...e):ws&&e.id===-1?ws.splice(Li+1,0,e):e.flags&1||(Mi.push(e),e.flags|=1),Td()}function Nc(e,n,i=An+1){for(;i<Qt.length;i++){const a=Qt[i];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;Qt.splice(i,1),i--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function Sd(e){if(Mi.length){const n=[...new Set(Mi)].sort((i,a)=>Oo(i)-Oo(a));if(Mi.length=0,ws){ws.push(...n);return}for(ws=n,Li=0;Li<ws.length;Li++){const i=ws[Li];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}ws=null,Li=0}}const Oo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Id(e){try{for(An=0;An<Qt.length;An++){const n=Qt[An];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Ho(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;An<Qt.length;An++){const n=Qt[An];n&&(n.flags&=-2)}An=-1,Qt.length=0,Sd(),Za=null,(Qt.length||Mi.length)&&Id()}}let Ht=null,Md=null;function qa(e){const n=Ht;return Ht=e,Md=e&&e.type.__scopeId||null,n}function Ke(e,n=Ht,i){if(!n||e._n)return e;const a=(...s)=>{a._d&&Ga(-1);const r=qa(n);let l;try{l=e(...s)}finally{qa(r),a._d&&Ga(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function Me(e,n){if(Ht===null)return e;const i=mr(Ht),a=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[r,l,u,h=_t]=n[s];r&&(et(r)&&(r={mounted:r,updated:r}),r.deep&&ss(l),a.push({dir:r,instance:i,value:l,oldValue:void 0,arg:u,modifiers:h}))}return e}function Fs(e,n,i,a){const s=e.dirs,r=n&&n.dirs;for(let l=0;l<s.length;l++){const u=s[l];r&&(u.oldValue=r[l].value);let h=u.dir[a];h&&(ls(),On(h,i,8,[e.el,u,e,n]),cs())}}function $a(e,n){if(qt){let i=qt.provides;const a=qt.parent&&qt.parent.provides;a===i&&(i=qt.provides=Object.create(a)),i[e]=n}}function vn(e,n,i=!1){const a=oh();if(a||Gs){let s=Gs?Gs._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&et(n)?n.call(a&&a.proxy):n}}function $p(){return!!(oh()||Gs)}const Dp=Symbol.for("v-scx"),Op=()=>vn(Dp);function Ye(e,n,i){return Ad(e,n,i)}function Ad(e,n,i=_t){const{immediate:a,deep:s,flush:r,once:l}=i,u=Wt({},i),h=n&&a||!n&&r!=="post";let p;if(Bo){if(r==="sync"){const w=Op();p=w.__watcherHandles||(w.__watcherHandles=[])}else if(!h){const w=()=>{};return w.stop=Dn,w.resume=Dn,w.pause=Dn,w}}const m=qt;u.call=(w,E,A)=>On(w,m,E,A);let v=!1;r==="post"?u.scheduler=w=>{Jt(w,m&&m.suspense)}:r!=="sync"&&(v=!0,u.scheduler=(w,E)=>{E?w():Zl(w)}),u.augmentJob=w=>{n&&(w.flags|=4),v&&(w.flags|=2,m&&(w.id=m.uid,w.i=m))};const g=Ip(e,n,u);return Bo&&(p?p.push(g):h&&g()),g}function Rp(e,n,i){const a=this.proxy,s=At(e)?e.includes(".")?Pd(a,e):()=>a[e]:e.bind(a,a);let r;et(n)?r=n:(r=n.handler,i=n);const l=Vo(this),u=Ad(s,r.bind(a),i);return l(),u}function Pd(e,n){const i=n.split(".");return()=>{let a=e;for(let s=0;s<i.length&&a;s++)a=a[i[s]];return a}}const $d=Symbol("_vte"),Np=e=>e.__isTeleport,To=e=>e&&(e.disabled||e.disabled===""),Bc=e=>e&&(e.defer||e.defer===""),Fc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,zc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ml=(e,n)=>{const i=e&&e.to;return At(i)?n?n(i):null:i},Dd={name:"Teleport",__isTeleport:!0,process(e,n,i,a,s,r,l,u,h,p){const{mc:m,pc:v,pbc:g,o:{insert:w,querySelector:E,createText:A,createComment:P}}=p,x=To(n.props);let{shapeFlag:$,children:b,dynamicChildren:S}=n;if(e==null){const T=n.el=A(""),I=n.anchor=A("");w(T,i,a),w(I,i,a);const N=(Z,ne)=>{$&16&&m(b,Z,ne,s,r,l,u,h)},te=()=>{const Z=n.target=ml(n.props,E),ne=Od(Z,n,A,w);Z&&(l!=="svg"&&Fc(Z)?l="svg":l!=="mathml"&&zc(Z)&&(l="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(Z),x||(N(Z,ne),Da(n,!1)))};x&&(N(i,I),Da(n,!0)),Bc(n.props)?(n.el.__isMounted=!1,Jt(()=>{te(),delete n.el.__isMounted},r)):te()}else{if(Bc(n.props)&&e.el.__isMounted===!1){Jt(()=>{Dd.process(e,n,i,a,s,r,l,u,h,p)},r);return}n.el=e.el,n.targetStart=e.targetStart;const T=n.anchor=e.anchor,I=n.target=e.target,N=n.targetAnchor=e.targetAnchor,te=To(e.props),Z=te?i:I,ne=te?T:N;if(l==="svg"||Fc(I)?l="svg":(l==="mathml"||zc(I))&&(l="mathml"),S?(g(e.dynamicChildren,S,Z,s,r,l,u),Gl(e,n,!0)):h||v(e,n,Z,ne,s,r,l,u,!1),x)te?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Sa(n,i,T,p,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const ge=n.target=ml(n.props,E);ge&&Sa(n,ge,null,p,0)}else te&&Sa(n,I,N,p,1);Da(n,x)}},remove(e,n,i,{um:a,o:{remove:s}},r){const{shapeFlag:l,children:u,anchor:h,targetStart:p,targetAnchor:m,target:v,props:g}=e;if(v&&(s(p),s(m)),r&&s(h),l&16){const w=r||!To(g);for(let E=0;E<u.length;E++){const A=u[E];a(A,n,i,w,!!A.dynamicChildren)}}},move:Sa,hydrate:Bp};function Sa(e,n,i,{o:{insert:a},m:s},r=2){r===0&&a(e.targetAnchor,n,i);const{el:l,anchor:u,shapeFlag:h,children:p,props:m}=e,v=r===2;if(v&&a(l,n,i),(!v||To(m))&&h&16)for(let g=0;g<p.length;g++)s(p[g],n,i,2);v&&a(u,n,i)}function Bp(e,n,i,a,s,r,{o:{nextSibling:l,parentNode:u,querySelector:h,insert:p,createText:m}},v){function g(A,P,x,$){P.anchor=v(l(A),P,u(A),i,a,s,r),P.targetStart=x,P.targetAnchor=$}const w=n.target=ml(n.props,h),E=To(n.props);if(w){const A=w._lpa||w.firstChild;if(n.shapeFlag&16)if(E)g(e,n,A,A&&l(A));else{n.anchor=l(e);let P=A;for(;P;){if(P&&P.nodeType===8){if(P.data==="teleport start anchor")n.targetStart=P;else if(P.data==="teleport anchor"){n.targetAnchor=P,w._lpa=n.targetAnchor&&l(n.targetAnchor);break}}P=l(P)}n.targetAnchor||Od(w,n,m,p),v(A&&l(A),n,w,i,a,s,r)}Da(n,E)}else E&&n.shapeFlag&16&&g(e,n,e,l(e));return n.anchor&&l(n.anchor)}const Fp=Dd;function Da(e,n){const i=e.ctx;if(i&&i.ut){let a,s;for(n?(a=e.el,s=e.anchor):(a=e.targetStart,s=e.targetAnchor);a&&a!==s;)a.nodeType===1&&a.setAttribute("data-v-owner",i.uid),a=a.nextSibling;i.ut()}}function Od(e,n,i,a){const s=n.targetStart=i(""),r=n.targetAnchor=i("");return s[$d]=r,e&&(a(s,e),a(r,e)),r}const zp=Symbol("_leaveCb");function ql(e,n){e.shapeFlag&6&&e.component?(e.transition=n,ql(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Rd(e,n){return et(e)?Wt({name:e.name},n,{setup:e}):e}function Nd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ja=new WeakMap;function So(e,n,i,a,s=!1){if(Ze(e)){e.forEach((E,A)=>So(E,n&&(Ze(n)?n[A]:n),i,a,s));return}if(Ai(a)&&!s){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&So(e,n,i,a.component.subTree);return}const r=a.shapeFlag&4?mr(a.component):a.el,l=s?null:r,{i:u,r:h}=e,p=n&&n.r,m=u.refs===_t?u.refs={}:u.refs,v=u.setupState,g=ct(v),w=v===_t?Xu:E=>ht(g,E);if(p!=null&&p!==h){if(Uc(n),At(p))m[p]=null,w(p)&&(v[p]=null);else if(Mt(p)){p.value=null;const E=n;E.k&&(m[E.k]=null)}}if(et(h))Ho(h,u,12,[l,m]);else{const E=At(h),A=Mt(h);if(E||A){const P=()=>{if(e.f){const x=E?w(h)?v[h]:m[h]:h.value;if(s)Ze(x)&&Ol(x,r);else if(Ze(x))x.includes(r)||x.push(r);else if(E)m[h]=[r],w(h)&&(v[h]=m[h]);else{const $=[r];h.value=$,e.k&&(m[e.k]=$)}}else E?(m[h]=l,w(h)&&(v[h]=l)):A&&(h.value=l,e.k&&(m[e.k]=l))};if(l){const x=()=>{P(),ja.delete(e)};x.id=-1,ja.set(e,x),Jt(x,i)}else Uc(e),P()}}}function Uc(e){const n=ja.get(e);n&&(n.flags|=8,ja.delete(e))}ar().requestIdleCallback;ar().cancelIdleCallback;const Ai=e=>!!e.type.__asyncLoader,Bd=e=>e.type.__isKeepAlive;function Up(e,n){Fd(e,"a",n)}function Hp(e,n){Fd(e,"da",n)}function Fd(e,n,i=qt){const a=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(dr(n,a,i),i){let s=i.parent;for(;s&&s.parent;)Bd(s.parent.vnode)&&Vp(a,n,i,s),s=s.parent}}function Vp(e,n,i,a){const s=dr(n,e,a,!0);zi(()=>{Ol(a[n],s)},i)}function dr(e,n,i=qt,a=!1){if(i){const s=i[e]||(i[e]=[]),r=n.__weh||(n.__weh=(...l)=>{ls();const u=Vo(i),h=On(n,i,e,l);return u(),cs(),h});return a?s.unshift(r):s.push(r),r}}const hs=e=>(n,i=qt)=>{(!Bo||e==="sp")&&dr(e,(...a)=>n(...a),i)},Zp=hs("bm"),Rn=hs("m"),qp=hs("bu"),jp=hs("u"),Wp=hs("bum"),zi=hs("um"),Gp=hs("sp"),Kp=hs("rtg"),Yp=hs("rtc");function Jp(e,n=qt){dr("ec",e,n)}const Xp="components";function hr(e,n){return em(Xp,e,!0,n)||e}const Qp=Symbol.for("v-ndc");function em(e,n,i=!0,a=!1){const s=Ht||qt;if(s){const r=s.type;{const u=Fm(r,!1);if(u&&(u===n||u===gn(n)||u===ir(gn(n))))return r}const l=Hc(s[e]||r[e],n)||Hc(s.appContext[e],n);return!l&&a?r:l}}function Hc(e,n){return e&&(e[n]||e[gn(n)]||e[ir(gn(n))])}function Pe(e,n,i,a){let s;const r=i,l=Ze(e);if(l||At(e)){const u=l&&rs(e);let h=!1,p=!1;u&&(h=!un(e),p=us(e),e=rr(e)),s=new Array(e.length);for(let m=0,v=e.length;m<v;m++)s[m]=n(h?p?$i(Cn(e[m])):Cn(e[m]):e[m],m,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let u=0;u<e;u++)s[u]=n(u+1,u,void 0,r)}else if(gt(e))if(e[Symbol.iterator])s=Array.from(e,(u,h)=>n(u,h,void 0,r));else{const u=Object.keys(e);s=new Array(u.length);for(let h=0,p=u.length;h<p;h++){const m=u[h];s[h]=n(e[m],m,h,r)}}else s=[];return s}function tm(e,n){for(let i=0;i<n.length;i++){const a=n[i];if(Ze(a))for(let s=0;s<a.length;s++)e[a[s].name]=a[s].fn;else a&&(e[a.name]=a.key?(...s)=>{const r=a.fn(...s);return r&&(r.key=a.key),r}:a.fn)}return e}function _o(e,n,i={},a,s){if(Ht.ce||Ht.parent&&Ai(Ht.parent)&&Ht.parent.ce){const p=Object.keys(i).length>0;return n!=="default"&&(i.name=n),y(),it(me,null,[Ae("slot",i,a&&a())],p?-2:64)}let r=e[n];r&&r._c&&(r._d=!1),y();const l=r&&zd(r(i)),u=i.key||l&&l.key,h=it(me,{key:(u&&!Ln(u)?u:`_${n}`)+(!l&&a?"_fb":"")},l||(a?a():[]),l&&e._===1?64:-2);return r&&r._c&&(r._d=!0),h}function zd(e){return e.some(n=>No(n)?!(n.type===ds||n.type===me&&!zd(n.children)):!0)?e:null}const vl=e=>e?ah(e)?mr(e):vl(e.parent):null,Io=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vl(e.parent),$root:e=>vl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Hd(e),$forceUpdate:e=>e.f||(e.f=()=>{Zl(e.update)}),$nextTick:e=>e.n||(e.n=ur.bind(e.proxy)),$watch:e=>Rp.bind(e)}),Jr=(e,n)=>e!==_t&&!e.__isScriptSetup&&ht(e,n),nm={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:i,setupState:a,data:s,props:r,accessCache:l,type:u,appContext:h}=e;if(n[0]!=="$"){const g=l[n];if(g!==void 0)switch(g){case 1:return a[n];case 2:return s[n];case 4:return i[n];case 3:return r[n]}else{if(Jr(a,n))return l[n]=1,a[n];if(s!==_t&&ht(s,n))return l[n]=2,s[n];if(ht(r,n))return l[n]=3,r[n];if(i!==_t&&ht(i,n))return l[n]=4,i[n];_l&&(l[n]=0)}}const p=Io[n];let m,v;if(p)return n==="$attrs"&&Zt(e.attrs,"get",""),p(e);if((m=u.__cssModules)&&(m=m[n]))return m;if(i!==_t&&ht(i,n))return l[n]=4,i[n];if(v=h.config.globalProperties,ht(v,n))return v[n]},set({_:e},n,i){const{data:a,setupState:s,ctx:r}=e;return Jr(s,n)?(s[n]=i,!0):a!==_t&&ht(a,n)?(a[n]=i,!0):ht(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(r[n]=i,!0)},has({_:{data:e,setupState:n,accessCache:i,ctx:a,appContext:s,props:r,type:l}},u){let h;return!!(i[u]||e!==_t&&u[0]!=="$"&&ht(e,u)||Jr(n,u)||ht(r,u)||ht(a,u)||ht(Io,u)||ht(s.config.globalProperties,u)||(h=l.__cssModules)&&h[u])},defineProperty(e,n,i){return i.get!=null?e._.accessCache[n]=0:ht(i,"value")&&this.set(e,n,i.value,null),Reflect.defineProperty(e,n,i)}};function Vc(e){return Ze(e)?e.reduce((n,i)=>(n[i]=null,n),{}):e}let _l=!0;function sm(e){const n=Hd(e),i=e.proxy,a=e.ctx;_l=!1,n.beforeCreate&&Zc(n.beforeCreate,e,"bc");const{data:s,computed:r,methods:l,watch:u,provide:h,inject:p,created:m,beforeMount:v,mounted:g,beforeUpdate:w,updated:E,activated:A,deactivated:P,beforeDestroy:x,beforeUnmount:$,destroyed:b,unmounted:S,render:T,renderTracked:I,renderTriggered:N,errorCaptured:te,serverPrefetch:Z,expose:ne,inheritAttrs:ge,components:xe,directives:ze,filters:pe}=n;if(p&&im(p,a,null),l)for(const Ee in l){const K=l[Ee];et(K)&&(a[Ee]=K.bind(i))}if(s){const Ee=s.call(i,i);gt(Ee)&&(e.data=Uo(Ee))}if(_l=!0,r)for(const Ee in r){const K=r[Ee],G=et(K)?K.bind(i,i):et(K.get)?K.get.bind(i,i):Dn,U=!et(K)&&et(K.set)?K.set.bind(i):Dn,re=de({get:G,set:U});Object.defineProperty(a,Ee,{enumerable:!0,configurable:!0,get:()=>re.value,set:we=>re.value=we})}if(u)for(const Ee in u)Ud(u[Ee],a,i,Ee);if(h){const Ee=et(h)?h.call(i):h;Reflect.ownKeys(Ee).forEach(K=>{$a(K,Ee[K])})}m&&Zc(m,e,"c");function Ce(Ee,K){Ze(K)?K.forEach(G=>Ee(G.bind(i))):K&&Ee(K.bind(i))}if(Ce(Zp,v),Ce(Rn,g),Ce(qp,w),Ce(jp,E),Ce(Up,A),Ce(Hp,P),Ce(Jp,te),Ce(Yp,I),Ce(Kp,N),Ce(Wp,$),Ce(zi,S),Ce(Gp,Z),Ze(ne))if(ne.length){const Ee=e.exposed||(e.exposed={});ne.forEach(K=>{Object.defineProperty(Ee,K,{get:()=>i[K],set:G=>i[K]=G,enumerable:!0})})}else e.exposed||(e.exposed={});T&&e.render===Dn&&(e.render=T),ge!=null&&(e.inheritAttrs=ge),xe&&(e.components=xe),ze&&(e.directives=ze),Z&&Nd(e)}function im(e,n,i=Dn){Ze(e)&&(e=gl(e));for(const a in e){const s=e[a];let r;gt(s)?"default"in s?r=vn(s.from||a,s.default,!0):r=vn(s.from||a):r=vn(s),Mt(r)?Object.defineProperty(n,a,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):n[a]=r}}function Zc(e,n,i){On(Ze(e)?e.map(a=>a.bind(n.proxy)):e.bind(n.proxy),n,i)}function Ud(e,n,i,a){let s=a.includes(".")?Pd(i,a):()=>i[a];if(At(e)){const r=n[e];et(r)&&Ye(s,r)}else if(et(e))Ye(s,e.bind(i));else if(gt(e))if(Ze(e))e.forEach(r=>Ud(r,n,i,a));else{const r=et(e.handler)?e.handler.bind(i):n[e.handler];et(r)&&Ye(s,r,e)}}function Hd(e){const n=e.type,{mixins:i,extends:a}=n,{mixins:s,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,u=r.get(n);let h;return u?h=u:!s.length&&!i&&!a?h=n:(h={},s.length&&s.forEach(p=>Wa(h,p,l,!0)),Wa(h,n,l)),gt(n)&&r.set(n,h),h}function Wa(e,n,i,a=!1){const{mixins:s,extends:r}=n;r&&Wa(e,r,i,!0),s&&s.forEach(l=>Wa(e,l,i,!0));for(const l in n)if(!(a&&l==="expose")){const u=om[l]||i&&i[l];e[l]=u?u(e[l],n[l]):n[l]}return e}const om={data:qc,props:jc,emits:jc,methods:wo,computed:wo,beforeCreate:Yt,created:Yt,beforeMount:Yt,mounted:Yt,beforeUpdate:Yt,updated:Yt,beforeDestroy:Yt,beforeUnmount:Yt,destroyed:Yt,unmounted:Yt,activated:Yt,deactivated:Yt,errorCaptured:Yt,serverPrefetch:Yt,components:wo,directives:wo,watch:rm,provide:qc,inject:am};function qc(e,n){return n?e?function(){return Wt(et(e)?e.call(this,this):e,et(n)?n.call(this,this):n)}:n:e}function am(e,n){return wo(gl(e),gl(n))}function gl(e){if(Ze(e)){const n={};for(let i=0;i<e.length;i++)n[e[i]]=e[i];return n}return e}function Yt(e,n){return e?[...new Set([].concat(e,n))]:n}function wo(e,n){return e?Wt(Object.create(null),e,n):n}function jc(e,n){return e?Ze(e)&&Ze(n)?[...new Set([...e,...n])]:Wt(Object.create(null),Vc(e),Vc(n??{})):n}function rm(e,n){if(!e)return n;if(!n)return e;const i=Wt(Object.create(null),e);for(const a in n)i[a]=Yt(e[a],n[a]);return i}function Vd(){return{app:null,config:{isNativeTag:Xu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lm=0;function cm(e,n){return function(a,s=null){et(a)||(a=Wt({},a)),s!=null&&!gt(s)&&(s=null);const r=Vd(),l=new WeakSet,u=[];let h=!1;const p=r.app={_uid:lm++,_component:a,_props:s,_container:null,_context:r,_instance:null,version:Um,get config(){return r.config},set config(m){},use(m,...v){return l.has(m)||(m&&et(m.install)?(l.add(m),m.install(p,...v)):et(m)&&(l.add(m),m(p,...v))),p},mixin(m){return r.mixins.includes(m)||r.mixins.push(m),p},component(m,v){return v?(r.components[m]=v,p):r.components[m]},directive(m,v){return v?(r.directives[m]=v,p):r.directives[m]},mount(m,v,g){if(!h){const w=p._ceVNode||Ae(a,s);return w.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),e(w,m,g),h=!0,p._container=m,m.__vue_app__=p,mr(w.component)}},onUnmount(m){u.push(m)},unmount(){h&&(On(u,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(m,v){return r.provides[m]=v,p},runWithContext(m){const v=Gs;Gs=p;try{return m()}finally{Gs=v}}};return p}}let Gs=null;const um=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${gn(n)}Modifiers`]||e[`${Xs(n)}Modifiers`];function dm(e,n,...i){if(e.isUnmounted)return;const a=e.vnode.props||_t;let s=i;const r=n.startsWith("update:"),l=r&&um(a,n.slice(7));l&&(l.trim&&(s=i.map(m=>At(m)?m.trim():m)),l.number&&(s=i.map(or)));let u,h=a[u=jr(n)]||a[u=jr(gn(n))];!h&&r&&(h=a[u=jr(Xs(n))]),h&&On(h,e,6,s);const p=a[u+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,On(p,e,6,s)}}const hm=new WeakMap;function Zd(e,n,i=!1){const a=i?hm:n.emitsCache,s=a.get(e);if(s!==void 0)return s;const r=e.emits;let l={},u=!1;if(!et(e)){const h=p=>{const m=Zd(p,n,!0);m&&(u=!0,Wt(l,m))};!i&&n.mixins.length&&n.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!r&&!u?(gt(e)&&a.set(e,null),null):(Ze(r)?r.forEach(h=>l[h]=null):Wt(l,r),gt(e)&&a.set(e,l),l)}function fr(e,n){return!e||!tr(n)?!1:(n=n.slice(2).replace(/Once$/,""),ht(e,n[0].toLowerCase()+n.slice(1))||ht(e,Xs(n))||ht(e,n))}function Wc(e){const{type:n,vnode:i,proxy:a,withProxy:s,propsOptions:[r],slots:l,attrs:u,emit:h,render:p,renderCache:m,props:v,data:g,setupState:w,ctx:E,inheritAttrs:A}=e,P=qa(e);let x,$;try{if(i.shapeFlag&4){const S=s||a,T=S;x=Pn(p.call(T,S,m,v,w,g,E)),$=u}else{const S=n;x=Pn(S.length>1?S(v,{attrs:u,slots:l,emit:h}):S(v,null)),$=n.props?u:fm(u)}}catch(S){Mo.length=0,cr(S,e,1),x=Ae(ds)}let b=x;if($&&A!==!1){const S=Object.keys($),{shapeFlag:T}=b;S.length&&T&7&&(r&&S.some(Dl)&&($=pm($,r)),b=Di(b,$,!1,!0))}return i.dirs&&(b=Di(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(i.dirs):i.dirs),i.transition&&ql(b,i.transition),x=b,qa(P),x}const fm=e=>{let n;for(const i in e)(i==="class"||i==="style"||tr(i))&&((n||(n={}))[i]=e[i]);return n},pm=(e,n)=>{const i={};for(const a in e)(!Dl(a)||!(a.slice(9)in n))&&(i[a]=e[a]);return i};function mm(e,n,i){const{props:a,children:s,component:r}=e,{props:l,children:u,patchFlag:h}=n,p=r.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return a?Gc(a,l,p):!!l;if(h&8){const m=n.dynamicProps;for(let v=0;v<m.length;v++){const g=m[v];if(l[g]!==a[g]&&!fr(p,g))return!0}}}else return(s||u)&&(!u||!u.$stable)?!0:a===l?!1:a?l?Gc(a,l,p):!0:!!l;return!1}function Gc(e,n,i){const a=Object.keys(n);if(a.length!==Object.keys(e).length)return!0;for(let s=0;s<a.length;s++){const r=a[s];if(n[r]!==e[r]&&!fr(i,r))return!0}return!1}function vm({vnode:e,parent:n},i){for(;n;){const a=n.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=n.vnode).el=i,n=n.parent;else break}}const qd={},jd=()=>Object.create(qd),Wd=e=>Object.getPrototypeOf(e)===qd;function _m(e,n,i,a=!1){const s={},r=jd();e.propsDefaults=Object.create(null),Gd(e,n,s,r);for(const l in e.propsOptions[0])l in s||(s[l]=void 0);i?e.props=a?s:Ld(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function gm(e,n,i,a){const{props:s,attrs:r,vnode:{patchFlag:l}}=e,u=ct(s),[h]=e.propsOptions;let p=!1;if((a||l>0)&&!(l&16)){if(l&8){const m=e.vnode.dynamicProps;for(let v=0;v<m.length;v++){let g=m[v];if(fr(e.emitsOptions,g))continue;const w=n[g];if(h)if(ht(r,g))w!==r[g]&&(r[g]=w,p=!0);else{const E=gn(g);s[E]=yl(h,u,E,w,e,!1)}else w!==r[g]&&(r[g]=w,p=!0)}}}else{Gd(e,n,s,r)&&(p=!0);let m;for(const v in u)(!n||!ht(n,v)&&((m=Xs(v))===v||!ht(n,m)))&&(h?i&&(i[v]!==void 0||i[m]!==void 0)&&(s[v]=yl(h,u,v,void 0,e,!0)):delete s[v]);if(r!==u)for(const v in r)(!n||!ht(n,v))&&(delete r[v],p=!0)}p&&ns(e.attrs,"set","")}function Gd(e,n,i,a){const[s,r]=e.propsOptions;let l=!1,u;if(n)for(let h in n){if(Co(h))continue;const p=n[h];let m;s&&ht(s,m=gn(h))?!r||!r.includes(m)?i[m]=p:(u||(u={}))[m]=p:fr(e.emitsOptions,h)||(!(h in a)||p!==a[h])&&(a[h]=p,l=!0)}if(r){const h=ct(i),p=u||_t;for(let m=0;m<r.length;m++){const v=r[m];i[v]=yl(s,h,v,p[v],e,!ht(p,v))}}return l}function yl(e,n,i,a,s,r){const l=e[i];if(l!=null){const u=ht(l,"default");if(u&&a===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&et(h)){const{propsDefaults:p}=s;if(i in p)a=p[i];else{const m=Vo(s);a=p[i]=h.call(null,n),m()}}else a=h;s.ce&&s.ce._setProp(i,a)}l[0]&&(r&&!u?a=!1:l[1]&&(a===""||a===Xs(i))&&(a=!0))}return a}const ym=new WeakMap;function Kd(e,n,i=!1){const a=i?ym:n.propsCache,s=a.get(e);if(s)return s;const r=e.props,l={},u=[];let h=!1;if(!et(e)){const m=v=>{h=!0;const[g,w]=Kd(v,n,!0);Wt(l,g),w&&u.push(...w)};!i&&n.mixins.length&&n.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!r&&!h)return gt(e)&&a.set(e,Si),Si;if(Ze(r))for(let m=0;m<r.length;m++){const v=gn(r[m]);Kc(v)&&(l[v]=_t)}else if(r)for(const m in r){const v=gn(m);if(Kc(v)){const g=r[m],w=l[v]=Ze(g)||et(g)?{type:g}:Wt({},g),E=w.type;let A=!1,P=!0;if(Ze(E))for(let x=0;x<E.length;++x){const $=E[x],b=et($)&&$.name;if(b==="Boolean"){A=!0;break}else b==="String"&&(P=!1)}else A=et(E)&&E.name==="Boolean";w[0]=A,w[1]=P,(A||ht(w,"default"))&&u.push(v)}}const p=[l,u];return gt(e)&&a.set(e,p),p}function Kc(e){return e[0]!=="$"&&!Co(e)}const jl=e=>e==="_"||e==="_ctx"||e==="$stable",Wl=e=>Ze(e)?e.map(Pn):[Pn(e)],bm=(e,n,i)=>{if(n._n)return n;const a=Ke((...s)=>Wl(n(...s)),i);return a._c=!1,a},Yd=(e,n,i)=>{const a=e._ctx;for(const s in e){if(jl(s))continue;const r=e[s];if(et(r))n[s]=bm(s,r,a);else if(r!=null){const l=Wl(r);n[s]=()=>l}}},Jd=(e,n)=>{const i=Wl(n);e.slots.default=()=>i},Xd=(e,n,i)=>{for(const a in n)(i||!jl(a))&&(e[a]=n[a])},km=(e,n,i)=>{const a=e.slots=jd();if(e.vnode.shapeFlag&32){const s=n._;s?(Xd(a,n,i),i&&nd(a,"_",s,!0)):Yd(n,a)}else n&&Jd(e,n)},wm=(e,n,i)=>{const{vnode:a,slots:s}=e;let r=!0,l=_t;if(a.shapeFlag&32){const u=n._;u?i&&u===1?r=!1:Xd(s,n,i):(r=!n.$stable,Yd(n,s)),l=n}else n&&(Jd(e,n),l={default:1});if(r)for(const u in s)!jl(u)&&l[u]==null&&delete s[u]},Jt=Tm;function Lm(e){return Cm(e)}function Cm(e,n){const i=ar();i.__VUE__=!0;const{insert:a,remove:s,patchProp:r,createElement:l,createText:u,createComment:h,setText:p,setElementText:m,parentNode:v,nextSibling:g,setScopeId:w=Dn,insertStaticContent:E}=e,A=(D,B,j,se=null,le=null,ie=null,ye=void 0,be=null,ve=!!B.dynamicChildren)=>{if(D===B)return;D&&!go(D,B)&&(se=z(D),we(D,le,ie,!0),D=null),B.patchFlag===-2&&(ve=!1,B.dynamicChildren=null);const{type:ce,ref:Ie,shapeFlag:fe}=B;switch(ce){case pr:P(D,B,j,se);break;case ds:x(D,B,j,se);break;case Oa:D==null&&$(B,j,se,ye);break;case me:xe(D,B,j,se,le,ie,ye,be,ve);break;default:fe&1?T(D,B,j,se,le,ie,ye,be,ve):fe&6?ze(D,B,j,se,le,ie,ye,be,ve):(fe&64||fe&128)&&ce.process(D,B,j,se,le,ie,ye,be,ve,_e)}Ie!=null&&le?So(Ie,D&&D.ref,ie,B||D,!B):Ie==null&&D&&D.ref!=null&&So(D.ref,null,ie,D,!0)},P=(D,B,j,se)=>{if(D==null)a(B.el=u(B.children),j,se);else{const le=B.el=D.el;B.children!==D.children&&p(le,B.children)}},x=(D,B,j,se)=>{D==null?a(B.el=h(B.children||""),j,se):B.el=D.el},$=(D,B,j,se)=>{[D.el,D.anchor]=E(D.children,B,j,se,D.el,D.anchor)},b=({el:D,anchor:B},j,se)=>{let le;for(;D&&D!==B;)le=g(D),a(D,j,se),D=le;a(B,j,se)},S=({el:D,anchor:B})=>{let j;for(;D&&D!==B;)j=g(D),s(D),D=j;s(B)},T=(D,B,j,se,le,ie,ye,be,ve)=>{if(B.type==="svg"?ye="svg":B.type==="math"&&(ye="mathml"),D==null)I(B,j,se,le,ie,ye,be,ve);else{const ce=D.el&&D.el._isVueCE?D.el:null;try{ce&&ce._beginPatch(),Z(D,B,le,ie,ye,be,ve)}finally{ce&&ce._endPatch()}}},I=(D,B,j,se,le,ie,ye,be)=>{let ve,ce;const{props:Ie,shapeFlag:fe,transition:ke,dirs:Re}=D;if(ve=D.el=l(D.type,ie,Ie&&Ie.is,Ie),fe&8?m(ve,D.children):fe&16&&te(D.children,ve,null,se,le,Xr(D,ie),ye,be),Re&&Fs(D,null,se,"created"),N(ve,D,D.scopeId,ye,se),Ie){for(const tt in Ie)tt!=="value"&&!Co(tt)&&r(ve,tt,null,Ie[tt],ie,se);"value"in Ie&&r(ve,"value",null,Ie.value,ie),(ce=Ie.onVnodeBeforeMount)&&In(ce,se,D)}Re&&Fs(D,null,se,"beforeMount");const Je=xm(le,ke);Je&&ke.beforeEnter(ve),a(ve,B,j),((ce=Ie&&Ie.onVnodeMounted)||Je||Re)&&Jt(()=>{ce&&In(ce,se,D),Je&&ke.enter(ve),Re&&Fs(D,null,se,"mounted")},le)},N=(D,B,j,se,le)=>{if(j&&w(D,j),se)for(let ie=0;ie<se.length;ie++)w(D,se[ie]);if(le){let ie=le.subTree;if(B===ie||th(ie.type)&&(ie.ssContent===B||ie.ssFallback===B)){const ye=le.vnode;N(D,ye,ye.scopeId,ye.slotScopeIds,le.parent)}}},te=(D,B,j,se,le,ie,ye,be,ve=0)=>{for(let ce=ve;ce<D.length;ce++){const Ie=D[ce]=be?Ls(D[ce]):Pn(D[ce]);A(null,Ie,B,j,se,le,ie,ye,be)}},Z=(D,B,j,se,le,ie,ye)=>{const be=B.el=D.el;let{patchFlag:ve,dynamicChildren:ce,dirs:Ie}=B;ve|=D.patchFlag&16;const fe=D.props||_t,ke=B.props||_t;let Re;if(j&&zs(j,!1),(Re=ke.onVnodeBeforeUpdate)&&In(Re,j,B,D),Ie&&Fs(B,D,j,"beforeUpdate"),j&&zs(j,!0),(fe.innerHTML&&ke.innerHTML==null||fe.textContent&&ke.textContent==null)&&m(be,""),ce?ne(D.dynamicChildren,ce,be,j,se,Xr(B,le),ie):ye||K(D,B,be,null,j,se,Xr(B,le),ie,!1),ve>0){if(ve&16)ge(be,fe,ke,j,le);else if(ve&2&&fe.class!==ke.class&&r(be,"class",null,ke.class,le),ve&4&&r(be,"style",fe.style,ke.style,le),ve&8){const Je=B.dynamicProps;for(let tt=0;tt<Je.length;tt++){const Ge=Je[tt],Lt=fe[Ge],ft=ke[Ge];(ft!==Lt||Ge==="value")&&r(be,Ge,Lt,ft,le,j)}}ve&1&&D.children!==B.children&&m(be,B.children)}else!ye&&ce==null&&ge(be,fe,ke,j,le);((Re=ke.onVnodeUpdated)||Ie)&&Jt(()=>{Re&&In(Re,j,B,D),Ie&&Fs(B,D,j,"updated")},se)},ne=(D,B,j,se,le,ie,ye)=>{for(let be=0;be<B.length;be++){const ve=D[be],ce=B[be],Ie=ve.el&&(ve.type===me||!go(ve,ce)||ve.shapeFlag&198)?v(ve.el):j;A(ve,ce,Ie,null,se,le,ie,ye,!0)}},ge=(D,B,j,se,le)=>{if(B!==j){if(B!==_t)for(const ie in B)!Co(ie)&&!(ie in j)&&r(D,ie,B[ie],null,le,se);for(const ie in j){if(Co(ie))continue;const ye=j[ie],be=B[ie];ye!==be&&ie!=="value"&&r(D,ie,be,ye,le,se)}"value"in j&&r(D,"value",B.value,j.value,le)}},xe=(D,B,j,se,le,ie,ye,be,ve)=>{const ce=B.el=D?D.el:u(""),Ie=B.anchor=D?D.anchor:u("");let{patchFlag:fe,dynamicChildren:ke,slotScopeIds:Re}=B;Re&&(be=be?be.concat(Re):Re),D==null?(a(ce,j,se),a(Ie,j,se),te(B.children||[],j,Ie,le,ie,ye,be,ve)):fe>0&&fe&64&&ke&&D.dynamicChildren&&D.dynamicChildren.length===ke.length?(ne(D.dynamicChildren,ke,j,le,ie,ye,be),(B.key!=null||le&&B===le.subTree)&&Gl(D,B,!0)):K(D,B,j,Ie,le,ie,ye,be,ve)},ze=(D,B,j,se,le,ie,ye,be,ve)=>{B.slotScopeIds=be,D==null?B.shapeFlag&512?le.ctx.activate(B,j,se,ye,ve):pe(B,j,se,le,ie,ye,ve):$e(D,B,ve)},pe=(D,B,j,se,le,ie,ye)=>{const be=D.component=Dm(D,se,le);if(Bd(D)&&(be.ctx.renderer=_e),Om(be,!1,ye),be.asyncDep){if(le&&le.registerDep(be,Ce,ye),!D.el){const ve=be.subTree=Ae(ds);x(null,ve,B,j),D.placeholder=ve.el}}else Ce(be,D,B,j,le,ie,ye)},$e=(D,B,j)=>{const se=B.component=D.component;if(mm(D,B,j))if(se.asyncDep&&!se.asyncResolved){Ee(se,B,j);return}else se.next=B,se.update();else B.el=D.el,se.vnode=B},Ce=(D,B,j,se,le,ie,ye)=>{const be=()=>{if(D.isMounted){let{next:fe,bu:ke,u:Re,parent:Je,vnode:tt}=D;{const nt=Qd(D);if(nt){fe&&(fe.el=tt.el,Ee(D,fe,ye)),nt.asyncDep.then(()=>{D.isUnmounted||be()});return}}let Ge=fe,Lt;zs(D,!1),fe?(fe.el=tt.el,Ee(D,fe,ye)):fe=tt,ke&&Pa(ke),(Lt=fe.props&&fe.props.onVnodeBeforeUpdate)&&In(Lt,Je,fe,tt),zs(D,!0);const ft=Wc(D),yt=D.subTree;D.subTree=ft,A(yt,ft,v(yt.el),z(yt),D,le,ie),fe.el=ft.el,Ge===null&&vm(D,ft.el),Re&&Jt(Re,le),(Lt=fe.props&&fe.props.onVnodeUpdated)&&Jt(()=>In(Lt,Je,fe,tt),le)}else{let fe;const{el:ke,props:Re}=B,{bm:Je,m:tt,parent:Ge,root:Lt,type:ft}=D,yt=Ai(B);zs(D,!1),Je&&Pa(Je),!yt&&(fe=Re&&Re.onVnodeBeforeMount)&&In(fe,Ge,B),zs(D,!0);{Lt.ce&&Lt.ce._def.shadowRoot!==!1&&Lt.ce._injectChildStyle(ft);const nt=D.subTree=Wc(D);A(null,nt,j,se,D,le,ie),B.el=nt.el}if(tt&&Jt(tt,le),!yt&&(fe=Re&&Re.onVnodeMounted)){const nt=B;Jt(()=>In(fe,Ge,nt),le)}(B.shapeFlag&256||Ge&&Ai(Ge.vnode)&&Ge.vnode.shapeFlag&256)&&D.a&&Jt(D.a,le),D.isMounted=!0,B=j=se=null}};D.scope.on();const ve=D.effect=new cd(be);D.scope.off();const ce=D.update=ve.run.bind(ve),Ie=D.job=ve.runIfDirty.bind(ve);Ie.i=D,Ie.id=D.uid,ve.scheduler=()=>Zl(Ie),zs(D,!0),ce()},Ee=(D,B,j)=>{B.component=D;const se=D.vnode.props;D.vnode=B,D.next=null,gm(D,B.props,se,j),wm(D,B.children,j),ls(),Nc(D),cs()},K=(D,B,j,se,le,ie,ye,be,ve=!1)=>{const ce=D&&D.children,Ie=D?D.shapeFlag:0,fe=B.children,{patchFlag:ke,shapeFlag:Re}=B;if(ke>0){if(ke&128){U(ce,fe,j,se,le,ie,ye,be,ve);return}else if(ke&256){G(ce,fe,j,se,le,ie,ye,be,ve);return}}Re&8?(Ie&16&&Se(ce,le,ie),fe!==ce&&m(j,fe)):Ie&16?Re&16?U(ce,fe,j,se,le,ie,ye,be,ve):Se(ce,le,ie,!0):(Ie&8&&m(j,""),Re&16&&te(fe,j,se,le,ie,ye,be,ve))},G=(D,B,j,se,le,ie,ye,be,ve)=>{D=D||Si,B=B||Si;const ce=D.length,Ie=B.length,fe=Math.min(ce,Ie);let ke;for(ke=0;ke<fe;ke++){const Re=B[ke]=ve?Ls(B[ke]):Pn(B[ke]);A(D[ke],Re,j,null,le,ie,ye,be,ve)}ce>Ie?Se(D,le,ie,!0,!1,fe):te(B,j,se,le,ie,ye,be,ve,fe)},U=(D,B,j,se,le,ie,ye,be,ve)=>{let ce=0;const Ie=B.length;let fe=D.length-1,ke=Ie-1;for(;ce<=fe&&ce<=ke;){const Re=D[ce],Je=B[ce]=ve?Ls(B[ce]):Pn(B[ce]);if(go(Re,Je))A(Re,Je,j,null,le,ie,ye,be,ve);else break;ce++}for(;ce<=fe&&ce<=ke;){const Re=D[fe],Je=B[ke]=ve?Ls(B[ke]):Pn(B[ke]);if(go(Re,Je))A(Re,Je,j,null,le,ie,ye,be,ve);else break;fe--,ke--}if(ce>fe){if(ce<=ke){const Re=ke+1,Je=Re<Ie?B[Re].el:se;for(;ce<=ke;)A(null,B[ce]=ve?Ls(B[ce]):Pn(B[ce]),j,Je,le,ie,ye,be,ve),ce++}}else if(ce>ke)for(;ce<=fe;)we(D[ce],le,ie,!0),ce++;else{const Re=ce,Je=ce,tt=new Map;for(ce=Je;ce<=ke;ce++){const mt=B[ce]=ve?Ls(B[ce]):Pn(B[ce]);mt.key!=null&&tt.set(mt.key,ce)}let Ge,Lt=0;const ft=ke-Je+1;let yt=!1,nt=0;const xt=new Array(ft);for(ce=0;ce<ft;ce++)xt[ce]=0;for(ce=Re;ce<=fe;ce++){const mt=D[ce];if(Lt>=ft){we(mt,le,ie,!0);continue}let ae;if(mt.key!=null)ae=tt.get(mt.key);else for(Ge=Je;Ge<=ke;Ge++)if(xt[Ge-Je]===0&&go(mt,B[Ge])){ae=Ge;break}ae===void 0?we(mt,le,ie,!0):(xt[ae-Je]=ce+1,ae>=nt?nt=ae:yt=!0,A(mt,B[ae],j,null,le,ie,ye,be,ve),Lt++)}const ut=yt?Em(xt):Si;for(Ge=ut.length-1,ce=ft-1;ce>=0;ce--){const mt=Je+ce,ae=B[mt],X=B[mt+1],oe=mt+1<Ie?X.el||eh(X):se;xt[ce]===0?A(null,ae,j,oe,le,ie,ye,be,ve):yt&&(Ge<0||ce!==ut[Ge]?re(ae,j,oe,2):Ge--)}}},re=(D,B,j,se,le=null)=>{const{el:ie,type:ye,transition:be,children:ve,shapeFlag:ce}=D;if(ce&6){re(D.component.subTree,B,j,se);return}if(ce&128){D.suspense.move(B,j,se);return}if(ce&64){ye.move(D,B,j,_e);return}if(ye===me){a(ie,B,j);for(let fe=0;fe<ve.length;fe++)re(ve[fe],B,j,se);a(D.anchor,B,j);return}if(ye===Oa){b(D,B,j);return}if(se!==2&&ce&1&&be)if(se===0)be.beforeEnter(ie),a(ie,B,j),Jt(()=>be.enter(ie),le);else{const{leave:fe,delayLeave:ke,afterLeave:Re}=be,Je=()=>{D.ctx.isUnmounted?s(ie):a(ie,B,j)},tt=()=>{ie._isLeaving&&ie[zp](!0),fe(ie,()=>{Je(),Re&&Re()})};ke?ke(ie,Je,tt):tt()}else a(ie,B,j)},we=(D,B,j,se=!1,le=!1)=>{const{type:ie,props:ye,ref:be,children:ve,dynamicChildren:ce,shapeFlag:Ie,patchFlag:fe,dirs:ke,cacheIndex:Re}=D;if(fe===-2&&(le=!1),be!=null&&(ls(),So(be,null,j,D,!0),cs()),Re!=null&&(B.renderCache[Re]=void 0),Ie&256){B.ctx.deactivate(D);return}const Je=Ie&1&&ke,tt=!Ai(D);let Ge;if(tt&&(Ge=ye&&ye.onVnodeBeforeUnmount)&&In(Ge,B,D),Ie&6)qe(D.component,j,se);else{if(Ie&128){D.suspense.unmount(j,se);return}Je&&Fs(D,null,B,"beforeUnmount"),Ie&64?D.type.remove(D,B,j,_e,se):ce&&!ce.hasOnce&&(ie!==me||fe>0&&fe&64)?Se(ce,B,j,!1,!0):(ie===me&&fe&384||!le&&Ie&16)&&Se(ve,B,j),se&&De(D)}(tt&&(Ge=ye&&ye.onVnodeUnmounted)||Je)&&Jt(()=>{Ge&&In(Ge,B,D),Je&&Fs(D,null,B,"unmounted")},j)},De=D=>{const{type:B,el:j,anchor:se,transition:le}=D;if(B===me){Ue(j,se);return}if(B===Oa){S(D);return}const ie=()=>{s(j),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(D.shapeFlag&1&&le&&!le.persisted){const{leave:ye,delayLeave:be}=le,ve=()=>ye(j,ie);be?be(D.el,ie,ve):ve()}else ie()},Ue=(D,B)=>{let j;for(;D!==B;)j=g(D),s(D),D=j;s(B)},qe=(D,B,j)=>{const{bum:se,scope:le,job:ie,subTree:ye,um:be,m:ve,a:ce}=D;Yc(ve),Yc(ce),se&&Pa(se),le.stop(),ie&&(ie.flags|=8,we(ye,D,B,j)),be&&Jt(be,B),Jt(()=>{D.isUnmounted=!0},B)},Se=(D,B,j,se=!1,le=!1,ie=0)=>{for(let ye=ie;ye<D.length;ye++)we(D[ye],B,j,se,le)},z=D=>{if(D.shapeFlag&6)return z(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const B=g(D.anchor||D.el),j=B&&B[$d];return j?g(j):B};let q=!1;const J=(D,B,j)=>{let se;D==null?B._vnode&&(we(B._vnode,null,null,!0),se=B._vnode.component):A(B._vnode||null,D,B,null,null,null,j),B._vnode=D,q||(q=!0,Nc(se),Sd(),q=!1)},_e={p:A,um:we,m:re,r:De,mt:pe,mc:te,pc:K,pbc:ne,n:z,o:e};return{render:J,hydrate:void 0,createApp:cm(J)}}function Xr({type:e,props:n},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:i}function zs({effect:e,job:n},i){i?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function xm(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Gl(e,n,i=!1){const a=e.children,s=n.children;if(Ze(a)&&Ze(s))for(let r=0;r<a.length;r++){const l=a[r];let u=s[r];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=s[r]=Ls(s[r]),u.el=l.el),!i&&u.patchFlag!==-2&&Gl(l,u)),u.type===pr&&(u.patchFlag!==-1?u.el=l.el:u.__elIndex=r+(e.type===me?1:0)),u.type===ds&&!u.el&&(u.el=l.el)}}function Em(e){const n=e.slice(),i=[0];let a,s,r,l,u;const h=e.length;for(a=0;a<h;a++){const p=e[a];if(p!==0){if(s=i[i.length-1],e[s]<p){n[a]=s,i.push(a);continue}for(r=0,l=i.length-1;r<l;)u=r+l>>1,e[i[u]]<p?r=u+1:l=u;p<e[i[r]]&&(r>0&&(n[a]=i[r-1]),i[r]=a)}}for(r=i.length,l=i[r-1];r-- >0;)i[r]=l,l=n[l];return i}function Qd(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:Qd(n)}function Yc(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function eh(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?eh(n.subTree):null}const th=e=>e.__isSuspense;function Tm(e,n){n&&n.pendingBranch?Ze(e)?n.effects.push(...e):n.effects.push(e):Pp(e)}const me=Symbol.for("v-fgt"),pr=Symbol.for("v-txt"),ds=Symbol.for("v-cmt"),Oa=Symbol.for("v-stc"),Mo=[];let ln=null;function y(e=!1){Mo.push(ln=e?null:[])}function Sm(){Mo.pop(),ln=Mo[Mo.length-1]||null}let Ro=1;function Ga(e,n=!1){Ro+=e,e<0&&ln&&n&&(ln.hasOnce=!0)}function nh(e){return e.dynamicChildren=Ro>0?ln||Si:null,Sm(),Ro>0&&ln&&ln.push(e),e}function k(e,n,i,a,s,r){return nh(d(e,n,i,a,s,r,!0))}function it(e,n,i,a,s){return nh(Ae(e,n,i,a,s,!0))}function No(e){return e?e.__v_isVNode===!0:!1}function go(e,n){return e.type===n.type&&e.key===n.key}const sh=({key:e})=>e??null,Ra=({ref:e,ref_key:n,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?At(e)||Mt(e)||et(e)?{i:Ht,r:e,k:n,f:!!i}:e:null);function d(e,n=null,i=null,a=0,s=null,r=e===me?0:1,l=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&sh(n),ref:n&&Ra(n),scopeId:Md,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ht};return u?(Kl(h,i),r&128&&e.normalize(h)):i&&(h.shapeFlag|=At(i)?8:16),Ro>0&&!l&&ln&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&ln.push(h),h}const Ae=Im;function Im(e,n=null,i=null,a=0,s=null,r=!1){if((!e||e===Qp)&&(e=ds),No(e)){const u=Di(e,n,!0);return i&&Kl(u,i),Ro>0&&!r&&ln&&(u.shapeFlag&6?ln[ln.indexOf(e)]=u:ln.push(u)),u.patchFlag=-2,u}if(zm(e)&&(e=e.__vccOpts),n){n=Mm(n);let{class:u,style:h}=n;u&&!At(u)&&(n.class=Fe(u)),gt(h)&&(lr(h)&&!Ze(h)&&(h=Wt({},h)),n.style=Gt(h))}const l=At(e)?1:th(e)?128:Np(e)?64:gt(e)?4:et(e)?2:0;return d(e,n,i,a,s,l,r,!0)}function Mm(e){return e?lr(e)||Wd(e)?Wt({},e):e:null}function Di(e,n,i=!1,a=!1){const{props:s,ref:r,patchFlag:l,children:u,transition:h}=e,p=n?ih(s||{},n):s,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&sh(p),ref:n&&n.ref?i&&r?Ze(r)?r.concat(Ra(n)):[r,Ra(n)]:Ra(n):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==me?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Di(e.ssContent),ssFallback:e.ssFallback&&Di(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&a&&ql(m,h.clone(m)),m}function Oe(e=" ",n=0){return Ae(pr,null,e,n)}function Am(e,n){const i=Ae(Oa,null,e);return i.staticCount=n,i}function V(e="",n=!1){return n?(y(),it(ds,null,e)):Ae(ds,null,e)}function Pn(e){return e==null||typeof e=="boolean"?Ae(ds):Ze(e)?Ae(me,null,e.slice()):No(e)?Ls(e):Ae(pr,null,String(e))}function Ls(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Di(e)}function Kl(e,n){let i=0;const{shapeFlag:a}=e;if(n==null)n=null;else if(Ze(n))i=16;else if(typeof n=="object")if(a&65){const s=n.default;s&&(s._c&&(s._d=!1),Kl(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=n._;!s&&!Wd(n)?n._ctx=Ht:s===3&&Ht&&(Ht.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else et(n)?(n={default:n,_ctx:Ht},i=32):(n=String(n),a&64?(i=16,n=[Oe(n)]):i=8);e.children=n,e.shapeFlag|=i}function ih(...e){const n={};for(let i=0;i<e.length;i++){const a=e[i];for(const s in a)if(s==="class")n.class!==a.class&&(n.class=Fe([n.class,a.class]));else if(s==="style")n.style=Gt([n.style,a.style]);else if(tr(s)){const r=n[s],l=a[s];l&&r!==l&&!(Ze(r)&&r.includes(l))&&(n[s]=r?[].concat(r,l):l)}else s!==""&&(n[s]=a[s])}return n}function In(e,n,i,a=null){On(e,n,7,[i,a])}const Pm=Vd();let $m=0;function Dm(e,n,i){const a=e.type,s=(n?n.appContext:e.appContext)||Pm,r={uid:$m++,vnode:e,type:a,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ad(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kd(a,s),emitsOptions:Zd(a,s),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:a.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=n?n.root:r,r.emit=dm.bind(null,r),e.ce&&e.ce(r),r}let qt=null;const oh=()=>qt||Ht;let Ka,bl;{const e=ar(),n=(i,a)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(a),r=>{s.length>1?s.forEach(l=>l(r)):s[0](r)}};Ka=n("__VUE_INSTANCE_SETTERS__",i=>qt=i),bl=n("__VUE_SSR_SETTERS__",i=>Bo=i)}const Vo=e=>{const n=qt;return Ka(e),e.scope.on(),()=>{e.scope.off(),Ka(n)}},Jc=()=>{qt&&qt.scope.off(),Ka(null)};function ah(e){return e.vnode.shapeFlag&4}let Bo=!1;function Om(e,n=!1,i=!1){n&&bl(n);const{props:a,children:s}=e.vnode,r=ah(e);_m(e,a,r,n),km(e,s,i||n);const l=r?Rm(e,n):void 0;return n&&bl(!1),l}function Rm(e,n){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,nm);const{setup:a}=i;if(a){ls();const s=e.setupContext=a.length>1?Bm(e):null,r=Vo(e),l=Ho(a,e,0,[e.props,s]),u=Qu(l);if(cs(),r(),(u||e.sp)&&!Ai(e)&&Nd(e),u){if(l.then(Jc,Jc),n)return l.then(h=>{Xc(e,h)}).catch(h=>{cr(h,e,0)});e.asyncDep=l}else Xc(e,l)}else rh(e)}function Xc(e,n,i){et(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:gt(n)&&(e.setupState=xd(n)),rh(e)}function rh(e,n,i){const a=e.type;e.render||(e.render=a.render||Dn);{const s=Vo(e);ls();try{sm(e)}finally{cs(),s()}}}const Nm={get(e,n){return Zt(e,"get",""),e[n]}};function Bm(e){const n=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Nm),slots:e.slots,emit:e.emit,expose:n}}function mr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xd(Vl(e.exposed)),{get(n,i){if(i in n)return n[i];if(i in Io)return Io[i](e)},has(n,i){return i in n||i in Io}})):e.proxy}function Fm(e,n=!0){return et(e)?e.displayName||e.name:e.name||n&&e.__name}function zm(e){return et(e)&&"__vccOpts"in e}const de=(e,n)=>Tp(e,n,Bo);function lh(e,n,i){try{Ga(-1);const a=arguments.length;return a===2?gt(n)&&!Ze(n)?No(n)?Ae(e,null,[n]):Ae(e,n):Ae(e,null,n):(a>3?i=Array.prototype.slice.call(arguments,2):a===3&&No(i)&&(i=[i]),Ae(e,n,i))}finally{Ga(1)}}const Um="3.5.26";let kl;const Qc=typeof window<"u"&&window.trustedTypes;if(Qc)try{kl=Qc.createPolicy("vue",{createHTML:e=>e})}catch{}const ch=kl?e=>kl.createHTML(e):e=>e,Hm="http://www.w3.org/2000/svg",Vm="http://www.w3.org/1998/Math/MathML",es=typeof document<"u"?document:null,eu=es&&es.createElement("template"),Zm={insert:(e,n,i)=>{n.insertBefore(e,i||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,i,a)=>{const s=n==="svg"?es.createElementNS(Hm,e):n==="mathml"?es.createElementNS(Vm,e):i?es.createElement(e,{is:i}):es.createElement(e);return e==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:e=>es.createTextNode(e),createComment:e=>es.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>es.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,i,a,s,r){const l=i?i.previousSibling:n.lastChild;if(s&&(s===r||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{eu.innerHTML=ch(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const u=eu.content;if(a==="svg"||a==="mathml"){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}n.insertBefore(u,i)}return[l?l.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}},qm=Symbol("_vtc");function jm(e,n,i){const a=e[qm];a&&(n=(n?[n,...a]:[...a]).join(" ")),n==null?e.removeAttribute("class"):i?e.setAttribute("class",n):e.className=n}const Ya=Symbol("_vod"),uh=Symbol("_vsh"),Es={name:"show",beforeMount(e,{value:n},{transition:i}){e[Ya]=e.style.display==="none"?"":e.style.display,i&&n?i.beforeEnter(e):yo(e,n)},mounted(e,{value:n},{transition:i}){i&&n&&i.enter(e)},updated(e,{value:n,oldValue:i},{transition:a}){!n!=!i&&(a?n?(a.beforeEnter(e),yo(e,!0),a.enter(e)):a.leave(e,()=>{yo(e,!1)}):yo(e,n))},beforeUnmount(e,{value:n}){yo(e,n)}};function yo(e,n){e.style.display=n?e[Ya]:"none",e[uh]=!n}const Wm=Symbol(""),Gm=/(?:^|;)\s*display\s*:/;function Km(e,n,i){const a=e.style,s=At(i);let r=!1;if(i&&!s){if(n)if(At(n))for(const l of n.split(";")){const u=l.slice(0,l.indexOf(":")).trim();i[u]==null&&Na(a,u,"")}else for(const l in n)i[l]==null&&Na(a,l,"");for(const l in i)l==="display"&&(r=!0),Na(a,l,i[l])}else if(s){if(n!==i){const l=a[Wm];l&&(i+=";"+l),a.cssText=i,r=Gm.test(i)}}else n&&e.removeAttribute("style");Ya in e&&(e[Ya]=r?a.display:"",e[uh]&&(a.display="none"))}const tu=/\s*!important$/;function Na(e,n,i){if(Ze(i))i.forEach(a=>Na(e,n,a));else if(i==null&&(i=""),n.startsWith("--"))e.setProperty(n,i);else{const a=Ym(e,n);tu.test(i)?e.setProperty(Xs(a),i.replace(tu,""),"important"):e[a]=i}}const nu=["Webkit","Moz","ms"],Qr={};function Ym(e,n){const i=Qr[n];if(i)return i;let a=gn(n);if(a!=="filter"&&a in e)return Qr[n]=a;a=ir(a);for(let s=0;s<nu.length;s++){const r=nu[s]+a;if(r in e)return Qr[n]=r}return n}const su="http://www.w3.org/1999/xlink";function iu(e,n,i,a,s,r=Xf(n)){a&&n.startsWith("xlink:")?i==null?e.removeAttributeNS(su,n.slice(6,n.length)):e.setAttributeNS(su,n,i):i==null||r&&!sd(i)?e.removeAttribute(n):e.setAttribute(n,r?"":Ln(i)?String(i):i)}function ou(e,n,i,a,s){if(n==="innerHTML"||n==="textContent"){i!=null&&(e[n]=n==="innerHTML"?ch(i):i);return}const r=e.tagName;if(n==="value"&&r!=="PROGRESS"&&!r.includes("-")){const u=r==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(u!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(n),e._value=i;return}let l=!1;if(i===""||i==null){const u=typeof e[n];u==="boolean"?i=sd(i):i==null&&u==="string"?(i="",l=!0):u==="number"&&(i=0,l=!0)}try{e[n]=i}catch{}l&&e.removeAttribute(s||n)}function is(e,n,i,a){e.addEventListener(n,i,a)}function Jm(e,n,i,a){e.removeEventListener(n,i,a)}const au=Symbol("_vei");function Xm(e,n,i,a,s=null){const r=e[au]||(e[au]={}),l=r[n];if(a&&l)l.value=a;else{const[u,h]=Qm(n);if(a){const p=r[n]=nv(a,s);is(e,u,p,h)}else l&&(Jm(e,u,l,h),r[n]=void 0)}}const ru=/(?:Once|Passive|Capture)$/;function Qm(e){let n;if(ru.test(e)){n={};let a;for(;a=e.match(ru);)e=e.slice(0,e.length-a[0].length),n[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xs(e.slice(2)),n]}let el=0;const ev=Promise.resolve(),tv=()=>el||(ev.then(()=>el=0),el=Date.now());function nv(e,n){const i=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=i.attached)return;On(sv(a,i.value),n,5,[a])};return i.value=e,i.attached=tv(),i}function sv(e,n){if(Ze(n)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},n.map(a=>s=>!s._stopped&&a&&a(s))}else return n}const lu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,iv=(e,n,i,a,s,r)=>{const l=s==="svg";n==="class"?jm(e,a,l):n==="style"?Km(e,i,a):tr(n)?Dl(n)||Xm(e,n,i,a,r):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):ov(e,n,a,l))?(ou(e,n,a),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&iu(e,n,a,l,r,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!At(a))?ou(e,gn(n),a,r,n):(n==="true-value"?e._trueValue=a:n==="false-value"&&(e._falseValue=a),iu(e,n,a,l))};function ov(e,n,i,a){if(a)return!!(n==="innerHTML"||n==="textContent"||n in e&&lu(n)&&et(i));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return lu(n)&&At(i)?!1:n in e}const Ts=e=>{const n=e.props["onUpdate:modelValue"]||!1;return Ze(n)?i=>Pa(n,i):n};function av(e){e.target.composing=!0}function cu(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const _n=Symbol("_assign");function uu(e,n,i){return n&&(e=e.trim()),i&&(e=or(e)),e}const rt={created(e,{modifiers:{lazy:n,trim:i,number:a}},s){e[_n]=Ts(s);const r=a||s.props&&s.props.type==="number";is(e,n?"change":"input",l=>{l.target.composing||e[_n](uu(e.value,i,r))}),(i||r)&&is(e,"change",()=>{e.value=uu(e.value,i,r)}),n||(is(e,"compositionstart",av),is(e,"compositionend",cu),is(e,"change",cu))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:i,modifiers:{lazy:a,trim:s,number:r}},l){if(e[_n]=Ts(l),e.composing)return;const u=(r||e.type==="number")&&!/^0\d/.test(e.value)?or(e.value):e.value,h=n??"";u!==h&&(document.activeElement===e&&e.type!=="range"&&(a&&n===i||s&&e.value.trim()===h)||(e.value=h))}},Pi={deep:!0,created(e,n,i){e[_n]=Ts(i),is(e,"change",()=>{const a=e._modelValue,s=Oi(e),r=e.checked,l=e[_n];if(Ze(a)){const u=Rl(a,s),h=u!==-1;if(r&&!h)l(a.concat(s));else if(!r&&h){const p=[...a];p.splice(u,1),l(p)}}else if(Fi(a)){const u=new Set(a);r?u.add(s):u.delete(s),l(u)}else l(dh(e,r))})},mounted:du,beforeUpdate(e,n,i){e[_n]=Ts(i),du(e,n,i)}};function du(e,{value:n,oldValue:i},a){e._modelValue=n;let s;if(Ze(n))s=Rl(n,a.props.value)>-1;else if(Fi(n))s=n.has(a.props.value);else{if(n===i)return;s=Ys(n,dh(e,!0))}e.checked!==s&&(e.checked=s)}const hu={created(e,{value:n},i){e.checked=Ys(n,i.props.value),e[_n]=Ts(i),is(e,"change",()=>{e[_n](Oi(e))})},beforeUpdate(e,{value:n,oldValue:i},a){e[_n]=Ts(a),n!==i&&(e.checked=Ys(n,a.props.value))}},nn={deep:!0,created(e,{value:n,modifiers:{number:i}},a){const s=Fi(n);is(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>i?or(Oi(l)):Oi(l));e[_n](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,ur(()=>{e._assigning=!1})}),e[_n]=Ts(a)},mounted(e,{value:n}){fu(e,n)},beforeUpdate(e,n,i){e[_n]=Ts(i)},updated(e,{value:n}){e._assigning||fu(e,n)}};function fu(e,n){const i=e.multiple,a=Ze(n);if(!(i&&!a&&!Fi(n))){for(let s=0,r=e.options.length;s<r;s++){const l=e.options[s],u=Oi(l);if(i)if(a){const h=typeof u;h==="string"||h==="number"?l.selected=n.some(p=>String(p)===String(u)):l.selected=Rl(n,u)>-1}else l.selected=n.has(u);else if(Ys(Oi(l),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Oi(e){return"_value"in e?e._value:e.value}function dh(e,n){const i=n?"_trueValue":"_falseValue";return i in e?e[i]:n}const rv=["ctrl","shift","alt","meta"],lv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>rv.some(i=>e[`${i}Key`]&&!n.includes(i))},kt=(e,n)=>{const i=e._withMods||(e._withMods={}),a=n.join(".");return i[a]||(i[a]=((s,...r)=>{for(let l=0;l<n.length;l++){const u=lv[n[l]];if(u&&u(s,n))return}return e(s,...r)}))},cv=Wt({patchProp:iv},Zm);let pu;function uv(){return pu||(pu=Lm(cv))}const dv=((...e)=>{const n=uv().createApp(...e),{mount:i}=n;return n.mount=a=>{const s=fv(a);if(!s)return;const r=n._component;!et(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=i(s,!1,hv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},n});function hv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function fv(e){return At(e)?document.querySelector(e):e}let hh;const vr=e=>hh=e,fh=Symbol();function wl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ao;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ao||(Ao={}));function pv(){const e=rd(!0),n=e.run(()=>O({}));let i=[],a=[];const s=Vl({install(r){vr(s),s._a=r,r.provide(fh,s),r.config.globalProperties.$pinia=s,a.forEach(l=>i.push(l)),a=[]},use(r){return this._a?i.push(r):a.push(r),this},_p:i,_a:null,_e:e,_s:new Map,state:n});return s}const ph=()=>{};function mu(e,n,i,a=ph){e.add(n);const s=()=>{e.delete(n)&&a()};return!i&&ld()&&ep(s),s}function wi(e,...n){e.forEach(i=>{i(...n)})}const mv=e=>e(),vu=Symbol(),tl=Symbol();function Ll(e,n){e instanceof Map&&n instanceof Map?n.forEach((i,a)=>e.set(a,i)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const i in n){if(!n.hasOwnProperty(i))continue;const a=n[i],s=e[i];wl(s)&&wl(a)&&e.hasOwnProperty(i)&&!Mt(a)&&!rs(a)?e[i]=Ll(s,a):e[i]=a}return e}const vv=Symbol();function _v(e){return!wl(e)||!Object.prototype.hasOwnProperty.call(e,vv)}const{assign:bs}=Object;function gv(e){return!!(Mt(e)&&e.effect)}function yv(e,n,i,a){const{state:s,actions:r,getters:l}=n,u=i.state.value[e];let h;function p(){u||(i.state.value[e]=s?s():{});const m=Lp(i.state.value[e]);return bs(m,r,Object.keys(l||{}).reduce((v,g)=>(v[g]=Vl(de(()=>{vr(i);const w=i._s.get(e);return l[g].call(w,w)})),v),{}))}return h=mh(e,p,n,i,a,!0),h}function mh(e,n,i={},a,s,r){let l;const u=bs({actions:{}},i),h={deep:!0};let p,m,v=new Set,g=new Set,w;const E=a.state.value[e];!r&&!E&&(a.state.value[e]={}),O({});let A;function P(te){let Z;p=m=!1,typeof te=="function"?(te(a.state.value[e]),Z={type:Ao.patchFunction,storeId:e,events:w}):(Ll(a.state.value[e],te),Z={type:Ao.patchObject,payload:te,storeId:e,events:w});const ne=A=Symbol();ur().then(()=>{A===ne&&(p=!0)}),m=!0,wi(v,Z,a.state.value[e])}const x=r?function(){const{state:Z}=i,ne=Z?Z():{};this.$patch(ge=>{bs(ge,ne)})}:ph;function $(){l.stop(),v.clear(),g.clear(),a._s.delete(e)}const b=(te,Z="")=>{if(vu in te)return te[tl]=Z,te;const ne=function(){vr(a);const ge=Array.from(arguments),xe=new Set,ze=new Set;function pe(Ee){xe.add(Ee)}function $e(Ee){ze.add(Ee)}wi(g,{args:ge,name:ne[tl],store:T,after:pe,onError:$e});let Ce;try{Ce=te.apply(this&&this.$id===e?this:T,ge)}catch(Ee){throw wi(ze,Ee),Ee}return Ce instanceof Promise?Ce.then(Ee=>(wi(xe,Ee),Ee)).catch(Ee=>(wi(ze,Ee),Promise.reject(Ee))):(wi(xe,Ce),Ce)};return ne[vu]=!0,ne[tl]=Z,ne},S={_p:a,$id:e,$onAction:mu.bind(null,g),$patch:P,$reset:x,$subscribe(te,Z={}){const ne=mu(v,te,Z.detached,()=>ge()),ge=l.run(()=>Ye(()=>a.state.value[e],xe=>{(Z.flush==="sync"?m:p)&&te({storeId:e,type:Ao.direct,events:w},xe)},bs({},h,Z)));return ne},$dispose:$},T=Uo(S);a._s.set(e,T);const N=(a._a&&a._a.runWithContext||mv)(()=>a._e.run(()=>(l=rd()).run(()=>n({action:b}))));for(const te in N){const Z=N[te];if(Mt(Z)&&!gv(Z)||rs(Z))r||(E&&_v(Z)&&(Mt(Z)?Z.value=E[te]:Ll(Z,E[te])),a.state.value[e][te]=Z);else if(typeof Z=="function"){const ne=b(Z,te);N[te]=ne,u.actions[te]=Z}}return bs(T,N),bs(ct(T),N),Object.defineProperty(T,"$state",{get:()=>a.state.value[e],set:te=>{P(Z=>{bs(Z,te)})}}),a._p.forEach(te=>{bs(T,l.run(()=>te({store:T,app:a._a,pinia:a,options:u})))}),E&&r&&i.hydrate&&i.hydrate(T.$state,E),p=!0,m=!0,T}function Yl(e,n,i){let a;const s=typeof n=="function";a=s?i:n;function r(l,u){const h=$p();return l=l||(h?vn(fh,null):null),l&&vr(l),l=hh,l._s.has(e)||(s?mh(e,n,a,l):yv(e,a,l)),l._s.get(e)}return r.$id=e,r}const He=(e,n)=>{const i=e.__vccOpts||e;for(const[a,s]of n)i[a]=s;return i},bv={},kv={id:"app"};function wv(e,n){const i=hr("router-view");return y(),k("div",kv,[Ae(i)])}const Lv=He(bv,[["render",wv]]);const Ci=typeof document<"u";function vh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Cv(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&vh(e.default)}const dt=Object.assign;function nl(e,n){const i={};for(const a in n){const s=n[a];i[a]=xn(s)?s.map(e):e(s)}return i}const Po=()=>{},xn=Array.isArray;function _u(e,n){const i={};for(const a in e)i[a]=a in n?n[a]:e[a];return i}const _h=/#/g,xv=/&/g,Ev=/\//g,Tv=/=/g,Sv=/\?/g,gh=/\+/g,Iv=/%5B/g,Mv=/%5D/g,yh=/%5E/g,Av=/%60/g,bh=/%7B/g,Pv=/%7C/g,kh=/%7D/g,$v=/%20/g;function Jl(e){return e==null?"":encodeURI(""+e).replace(Pv,"|").replace(Iv,"[").replace(Mv,"]")}function Dv(e){return Jl(e).replace(bh,"{").replace(kh,"}").replace(yh,"^")}function Cl(e){return Jl(e).replace(gh,"%2B").replace($v,"+").replace(_h,"%23").replace(xv,"%26").replace(Av,"`").replace(bh,"{").replace(kh,"}").replace(yh,"^")}function Ov(e){return Cl(e).replace(Tv,"%3D")}function Rv(e){return Jl(e).replace(_h,"%23").replace(Sv,"%3F")}function Nv(e){return Rv(e).replace(Ev,"%2F")}function Fo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Bv=/\/$/,Fv=e=>e.replace(Bv,"");function sl(e,n,i="/"){let a,s={},r="",l="";const u=n.indexOf("#");let h=n.indexOf("?");return h=u>=0&&h>u?-1:h,h>=0&&(a=n.slice(0,h),r=n.slice(h,u>0?u:n.length),s=e(r.slice(1))),u>=0&&(a=a||n.slice(0,u),l=n.slice(u,n.length)),a=Vv(a??n,i),{fullPath:a+r+l,path:a,query:s,hash:Fo(l)}}function zv(e,n){const i=n.query?e(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function gu(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Uv(e,n,i){const a=n.matched.length-1,s=i.matched.length-1;return a>-1&&a===s&&Ri(n.matched[a],i.matched[s])&&wh(n.params,i.params)&&e(n.query)===e(i.query)&&n.hash===i.hash}function Ri(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function wh(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!Hv(e[i],n[i]))return!1;return!0}function Hv(e,n){return xn(e)?yu(e,n):xn(n)?yu(n,e):e?.valueOf()===n?.valueOf()}function yu(e,n){return xn(n)?e.length===n.length&&e.every((i,a)=>i===n[a]):e.length===1&&e[0]===n}function Vv(e,n){if(e.startsWith("/"))return e;if(!e)return n;const i=n.split("/"),a=e.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let r=i.length-1,l,u;for(l=0;l<a.length;l++)if(u=a[l],u!==".")if(u==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+a.slice(l).join("/")}const ys={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let xl=(function(e){return e.pop="pop",e.push="push",e})({}),il=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Zv(e){if(!e)if(Ci){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Fv(e)}const qv=/^[^#]+#/;function jv(e,n){return e.replace(qv,"#")+n}function Wv(e,n){const i=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:n.behavior,left:a.left-i.left-(n.left||0),top:a.top-i.top-(n.top||0)}}const _r=()=>({left:window.scrollX,top:window.scrollY});function Gv(e){let n;if("el"in e){const i=e.el,a=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?a?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;n=Wv(s,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function bu(e,n){return(history.state?history.state.position-n:-1)+e}const El=new Map;function Kv(e,n){El.set(e,n)}function Yv(e){const n=El.get(e);return El.delete(e),n}function Jv(e){return typeof e=="string"||e&&typeof e=="object"}function Lh(e){return typeof e=="string"||typeof e=="symbol"}let St=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Ch=Symbol("");St.MATCHER_NOT_FOUND+"",St.NAVIGATION_GUARD_REDIRECT+"",St.NAVIGATION_ABORTED+"",St.NAVIGATION_CANCELLED+"",St.NAVIGATION_DUPLICATED+"";function Ni(e,n){return dt(new Error,{type:e,[Ch]:!0},n)}function Jn(e,n){return e instanceof Error&&Ch in e&&(n==null||!!(e.type&n))}const Xv=["params","query","hash"];function Qv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const i of Xv)i in e&&(n[i]=e[i]);return JSON.stringify(n,null,2)}function e_(e){const n={};if(e===""||e==="?")return n;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<i.length;++a){const s=i[a].replace(gh," "),r=s.indexOf("="),l=Fo(r<0?s:s.slice(0,r)),u=r<0?null:Fo(s.slice(r+1));if(l in n){let h=n[l];xn(h)||(h=n[l]=[h]),h.push(u)}else n[l]=u}return n}function ku(e){let n="";for(let i in e){const a=e[i];if(i=Ov(i),a==null){a!==void 0&&(n+=(n.length?"&":"")+i);continue}(xn(a)?a.map(s=>s&&Cl(s)):[a&&Cl(a)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+i,s!=null&&(n+="="+s))})}return n}function t_(e){const n={};for(const i in e){const a=e[i];a!==void 0&&(n[i]=xn(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return n}const n_=Symbol(""),wu=Symbol(""),gr=Symbol(""),Xl=Symbol(""),Tl=Symbol("");function bo(){let e=[];function n(a){return e.push(a),()=>{const s=e.indexOf(a);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:n,list:()=>e.slice(),reset:i}}function Cs(e,n,i,a,s,r=l=>l()){const l=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((u,h)=>{const p=g=>{g===!1?h(Ni(St.NAVIGATION_ABORTED,{from:i,to:n})):g instanceof Error?h(g):Jv(g)?h(Ni(St.NAVIGATION_GUARD_REDIRECT,{from:n,to:g})):(l&&a.enterCallbacks[s]===l&&typeof g=="function"&&l.push(g),u())},m=r(()=>e.call(a&&a.instances[s],n,i,p));let v=Promise.resolve(m);e.length<3&&(v=v.then(p)),v.catch(g=>h(g))})}function ol(e,n,i,a,s=r=>r()){const r=[];for(const l of e)for(const u in l.components){let h=l.components[u];if(!(n!=="beforeRouteEnter"&&!l.instances[u]))if(vh(h)){const p=(h.__vccOpts||h)[n];p&&r.push(Cs(p,i,a,l,u,s))}else{let p=h();r.push(()=>p.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${u}" at "${l.path}"`);const v=Cv(m)?m.default:m;l.mods[u]=m,l.components[u]=v;const g=(v.__vccOpts||v)[n];return g&&Cs(g,i,a,l,u,s)()}))}}return r}function s_(e,n){const i=[],a=[],s=[],r=Math.max(n.matched.length,e.matched.length);for(let l=0;l<r;l++){const u=n.matched[l];u&&(e.matched.find(p=>Ri(p,u))?a.push(u):i.push(u));const h=e.matched[l];h&&(n.matched.find(p=>Ri(p,h))||s.push(h))}return[i,a,s]}let i_=()=>location.protocol+"//"+location.host;function xh(e,n){const{pathname:i,search:a,hash:s}=n,r=e.indexOf("#");if(r>-1){let l=s.includes(e.slice(r))?e.slice(r).length:1,u=s.slice(l);return u[0]!=="/"&&(u="/"+u),gu(u,"")}return gu(i,e)+a+s}function o_(e,n,i,a){let s=[],r=[],l=null;const u=({state:g})=>{const w=xh(e,location),E=i.value,A=n.value;let P=0;if(g){if(i.value=w,n.value=g,l&&l===E){l=null;return}P=A?g.position-A.position:0}else a(w);s.forEach(x=>{x(i.value,E,{delta:P,type:xl.pop,direction:P?P>0?il.forward:il.back:il.unknown})})};function h(){l=i.value}function p(g){s.push(g);const w=()=>{const E=s.indexOf(g);E>-1&&s.splice(E,1)};return r.push(w),w}function m(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(dt({},g.state,{scroll:_r()}),"")}}function v(){for(const g of r)g();r=[],window.removeEventListener("popstate",u),window.removeEventListener("pagehide",m),document.removeEventListener("visibilitychange",m)}return window.addEventListener("popstate",u),window.addEventListener("pagehide",m),document.addEventListener("visibilitychange",m),{pauseListeners:h,listen:p,destroy:v}}function Lu(e,n,i,a=!1,s=!1){return{back:e,current:n,forward:i,replaced:a,position:window.history.length,scroll:s?_r():null}}function a_(e){const{history:n,location:i}=window,a={value:xh(e,i)},s={value:n.state};s.value||r(a.value,{back:null,current:a.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function r(h,p,m){const v=e.indexOf("#"),g=v>-1?(i.host&&document.querySelector("base")?e:e.slice(v))+h:i_()+e+h;try{n[m?"replaceState":"pushState"](p,"",g),s.value=p}catch(w){console.error(w),i[m?"replace":"assign"](g)}}function l(h,p){r(h,dt({},n.state,Lu(s.value.back,h,s.value.forward,!0),p,{position:s.value.position}),!0),a.value=h}function u(h,p){const m=dt({},s.value,n.state,{forward:h,scroll:_r()});r(m.current,m,!0),r(h,dt({},Lu(a.value,h,null),{position:m.position+1},p),!1),a.value=h}return{location:a,state:s,push:u,replace:l}}function r_(e){e=Zv(e);const n=a_(e),i=o_(e,n.state,n.location,n.replace);function a(r,l=!0){l||i.pauseListeners(),history.go(r)}const s=dt({location:"",base:e,go:a,createHref:jv.bind(null,e)},n,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}let Zs=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Bt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Bt||{});const l_={type:Zs.Static,value:""},c_=/[a-zA-Z0-9_]/;function u_(e){if(!e)return[[]];if(e==="/")return[[l_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(w){throw new Error(`ERR (${i})/"${p}": ${w}`)}let i=Bt.Static,a=i;const s=[];let r;function l(){r&&s.push(r),r=[]}let u=0,h,p="",m="";function v(){p&&(i===Bt.Static?r.push({type:Zs.Static,value:p}):i===Bt.Param||i===Bt.ParamRegExp||i===Bt.ParamRegExpEnd?(r.length>1&&(h==="*"||h==="+")&&n(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Zs.Param,value:p,regexp:m,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):n("Invalid state to consume buffer"),p="")}function g(){p+=h}for(;u<e.length;){if(h=e[u++],h==="\\"&&i!==Bt.ParamRegExp){a=i,i=Bt.EscapeNext;continue}switch(i){case Bt.Static:h==="/"?(p&&v(),l()):h===":"?(v(),i=Bt.Param):g();break;case Bt.EscapeNext:g(),i=a;break;case Bt.Param:h==="("?i=Bt.ParamRegExp:c_.test(h)?g():(v(),i=Bt.Static,h!=="*"&&h!=="?"&&h!=="+"&&u--);break;case Bt.ParamRegExp:h===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+h:i=Bt.ParamRegExpEnd:m+=h;break;case Bt.ParamRegExpEnd:v(),i=Bt.Static,h!=="*"&&h!=="?"&&h!=="+"&&u--,m="";break;default:n("Unknown state");break}}return i===Bt.ParamRegExp&&n(`Unfinished custom RegExp for param "${p}"`),v(),l(),s}const Cu="[^/]+?",d_={sensitive:!1,strict:!1,start:!0,end:!0};var Xt=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Xt||{});const h_=/[.+*?^${}()[\]/\\]/g;function f_(e,n){const i=dt({},d_,n),a=[];let s=i.start?"^":"";const r=[];for(const p of e){const m=p.length?[]:[Xt.Root];i.strict&&!p.length&&(s+="/");for(let v=0;v<p.length;v++){const g=p[v];let w=Xt.Segment+(i.sensitive?Xt.BonusCaseSensitive:0);if(g.type===Zs.Static)v||(s+="/"),s+=g.value.replace(h_,"\\$&"),w+=Xt.Static;else if(g.type===Zs.Param){const{value:E,repeatable:A,optional:P,regexp:x}=g;r.push({name:E,repeatable:A,optional:P});const $=x||Cu;if($!==Cu){w+=Xt.BonusCustomRegExp;try{`${$}`}catch(S){throw new Error(`Invalid custom RegExp for param "${E}" (${$}): `+S.message)}}let b=A?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;v||(b=P&&p.length<2?`(?:/${b})`:"/"+b),P&&(b+="?"),s+=b,w+=Xt.Dynamic,P&&(w+=Xt.BonusOptional),A&&(w+=Xt.BonusRepeatable),$===".*"&&(w+=Xt.BonusWildcard)}m.push(w)}a.push(m)}if(i.strict&&i.end){const p=a.length-1;a[p][a[p].length-1]+=Xt.BonusStrict}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const l=new RegExp(s,i.sensitive?"":"i");function u(p){const m=p.match(l),v={};if(!m)return null;for(let g=1;g<m.length;g++){const w=m[g]||"",E=r[g-1];v[E.name]=w&&E.repeatable?w.split("/"):w}return v}function h(p){let m="",v=!1;for(const g of e){(!v||!m.endsWith("/"))&&(m+="/"),v=!1;for(const w of g)if(w.type===Zs.Static)m+=w.value;else if(w.type===Zs.Param){const{value:E,repeatable:A,optional:P}=w,x=E in p?p[E]:"";if(xn(x)&&!A)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const $=xn(x)?x.join("/"):x;if(!$)if(P)g.length<2&&(m.endsWith("/")?m=m.slice(0,-1):v=!0);else throw new Error(`Missing required param "${E}"`);m+=$}}return m||"/"}return{re:l,score:a,keys:r,parse:u,stringify:h}}function p_(e,n){let i=0;for(;i<e.length&&i<n.length;){const a=n[i]-e[i];if(a)return a;i++}return e.length<n.length?e.length===1&&e[0]===Xt.Static+Xt.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===Xt.Static+Xt.Segment?1:-1:0}function Eh(e,n){let i=0;const a=e.score,s=n.score;for(;i<a.length&&i<s.length;){const r=p_(a[i],s[i]);if(r)return r;i++}if(Math.abs(s.length-a.length)===1){if(xu(a))return 1;if(xu(s))return-1}return s.length-a.length}function xu(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const m_={strict:!1,end:!0,sensitive:!1};function v_(e,n,i){const a=f_(u_(e.path),i),s=dt(a,{record:e,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function __(e,n){const i=[],a=new Map;n=_u(m_,n);function s(v){return a.get(v)}function r(v,g,w){const E=!w,A=Tu(v);A.aliasOf=w&&w.record;const P=_u(n,v),x=[A];if("alias"in v){const S=typeof v.alias=="string"?[v.alias]:v.alias;for(const T of S)x.push(Tu(dt({},A,{components:w?w.record.components:A.components,path:T,aliasOf:w?w.record:A})))}let $,b;for(const S of x){const{path:T}=S;if(g&&T[0]!=="/"){const I=g.record.path,N=I[I.length-1]==="/"?"":"/";S.path=g.record.path+(T&&N+T)}if($=v_(S,g,P),w?w.alias.push($):(b=b||$,b!==$&&b.alias.push($),E&&v.name&&!Su($)&&l(v.name)),Th($)&&h($),A.children){const I=A.children;for(let N=0;N<I.length;N++)r(I[N],$,w&&w.children[N])}w=w||$}return b?()=>{l(b)}:Po}function l(v){if(Lh(v)){const g=a.get(v);g&&(a.delete(v),i.splice(i.indexOf(g),1),g.children.forEach(l),g.alias.forEach(l))}else{const g=i.indexOf(v);g>-1&&(i.splice(g,1),v.record.name&&a.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function u(){return i}function h(v){const g=b_(v,i);i.splice(g,0,v),v.record.name&&!Su(v)&&a.set(v.record.name,v)}function p(v,g){let w,E={},A,P;if("name"in v&&v.name){if(w=a.get(v.name),!w)throw Ni(St.MATCHER_NOT_FOUND,{location:v});P=w.record.name,E=dt(Eu(g.params,w.keys.filter(b=>!b.optional).concat(w.parent?w.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),v.params&&Eu(v.params,w.keys.map(b=>b.name))),A=w.stringify(E)}else if(v.path!=null)A=v.path,w=i.find(b=>b.re.test(A)),w&&(E=w.parse(A),P=w.record.name);else{if(w=g.name?a.get(g.name):i.find(b=>b.re.test(g.path)),!w)throw Ni(St.MATCHER_NOT_FOUND,{location:v,currentLocation:g});P=w.record.name,E=dt({},g.params,v.params),A=w.stringify(E)}const x=[];let $=w;for(;$;)x.unshift($.record),$=$.parent;return{name:P,path:A,params:E,matched:x,meta:y_(x)}}e.forEach(v=>r(v));function m(){i.length=0,a.clear()}return{addRoute:r,resolve:p,removeRoute:l,clearRoutes:m,getRoutes:u,getRecordMatcher:s}}function Eu(e,n){const i={};for(const a of n)a in e&&(i[a]=e[a]);return i}function Tu(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:g_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function g_(e){const n={},i=e.props||!1;if("component"in e)n.default=i;else for(const a in e.components)n[a]=typeof i=="object"?i[a]:i;return n}function Su(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function y_(e){return e.reduce((n,i)=>dt(n,i.meta),{})}function b_(e,n){let i=0,a=n.length;for(;i!==a;){const r=i+a>>1;Eh(e,n[r])<0?a=r:i=r+1}const s=k_(e);return s&&(a=n.lastIndexOf(s,a-1)),a}function k_(e){let n=e;for(;n=n.parent;)if(Th(n)&&Eh(e,n)===0)return n}function Th({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Iu(e){const n=vn(gr),i=vn(Xl),a=de(()=>{const h=W(e.to);return n.resolve(h)}),s=de(()=>{const{matched:h}=a.value,{length:p}=h,m=h[p-1],v=i.matched;if(!m||!v.length)return-1;const g=v.findIndex(Ri.bind(null,m));if(g>-1)return g;const w=Mu(h[p-2]);return p>1&&Mu(m)===w&&v[v.length-1].path!==w?v.findIndex(Ri.bind(null,h[p-2])):g}),r=de(()=>s.value>-1&&E_(i.params,a.value.params)),l=de(()=>s.value>-1&&s.value===i.matched.length-1&&wh(i.params,a.value.params));function u(h={}){if(x_(h)){const p=n[W(e.replace)?"replace":"push"](W(e.to)).catch(Po);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>p),p}return Promise.resolve()}return{route:a,href:de(()=>a.value.href),isActive:r,isExactActive:l,navigate:u}}function w_(e){return e.length===1?e[0]:e}const L_=Rd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Iu,setup(e,{slots:n}){const i=Uo(Iu(e)),{options:a}=vn(gr),s=de(()=>({[Au(e.activeClass,a.linkActiveClass,"router-link-active")]:i.isActive,[Au(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const r=n.default&&w_(n.default(i));return e.custom?r:lh("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},r)}}}),C_=L_;function x_(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function E_(e,n){for(const i in n){const a=n[i],s=e[i];if(typeof a=="string"){if(a!==s)return!1}else if(!xn(s)||s.length!==a.length||a.some((r,l)=>r.valueOf()!==s[l].valueOf()))return!1}return!0}function Mu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Au=(e,n,i)=>e??n??i,T_=Rd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:i}){const a=vn(Tl),s=de(()=>e.route||a.value),r=vn(wu,0),l=de(()=>{let p=W(r);const{matched:m}=s.value;let v;for(;(v=m[p])&&!v.components;)p++;return p}),u=de(()=>s.value.matched[l.value]);$a(wu,de(()=>l.value+1)),$a(n_,u),$a(Tl,s);const h=O();return Ye(()=>[h.value,u.value,e.name],([p,m,v],[g,w,E])=>{m&&(m.instances[v]=p,w&&w!==m&&p&&p===g&&(m.leaveGuards.size||(m.leaveGuards=w.leaveGuards),m.updateGuards.size||(m.updateGuards=w.updateGuards))),p&&m&&(!w||!Ri(m,w)||!g)&&(m.enterCallbacks[v]||[]).forEach(A=>A(p))},{flush:"post"}),()=>{const p=s.value,m=e.name,v=u.value,g=v&&v.components[m];if(!g)return Pu(i.default,{Component:g,route:p});const w=v.props[m],E=w?w===!0?p.params:typeof w=="function"?w(p):w:null,P=lh(g,dt({},E,n,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(v.instances[m]=null)},ref:h}));return Pu(i.default,{Component:P,route:p})||P}}});function Pu(e,n){if(!e)return null;const i=e(n);return i.length===1?i[0]:i}const S_=T_;function I_(e){const n=__(e.routes,e),i=e.parseQuery||e_,a=e.stringifyQuery||ku,s=e.history,r=bo(),l=bo(),u=bo(),h=bp(ys);let p=ys;Ci&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=nl.bind(null,z=>""+z),v=nl.bind(null,Nv),g=nl.bind(null,Fo);function w(z,q){let J,_e;return Lh(z)?(J=n.getRecordMatcher(z),_e=q):_e=z,n.addRoute(_e,J)}function E(z){const q=n.getRecordMatcher(z);q&&n.removeRoute(q)}function A(){return n.getRoutes().map(z=>z.record)}function P(z){return!!n.getRecordMatcher(z)}function x(z,q){if(q=dt({},q||h.value),typeof z=="string"){const j=sl(i,z,q.path),se=n.resolve({path:j.path},q),le=s.createHref(j.fullPath);return dt(j,se,{params:g(se.params),hash:Fo(j.hash),redirectedFrom:void 0,href:le})}let J;if(z.path!=null)J=dt({},z,{path:sl(i,z.path,q.path).path});else{const j=dt({},z.params);for(const se in j)j[se]==null&&delete j[se];J=dt({},z,{params:v(j)}),q.params=v(q.params)}const _e=n.resolve(J,q),je=z.hash||"";_e.params=m(g(_e.params));const D=zv(a,dt({},z,{hash:Dv(je),path:_e.path})),B=s.createHref(D);return dt({fullPath:D,hash:je,query:a===ku?t_(z.query):z.query||{}},_e,{redirectedFrom:void 0,href:B})}function $(z){return typeof z=="string"?sl(i,z,h.value.path):dt({},z)}function b(z,q){if(p!==z)return Ni(St.NAVIGATION_CANCELLED,{from:q,to:z})}function S(z){return N(z)}function T(z){return S(dt($(z),{replace:!0}))}function I(z,q){const J=z.matched[z.matched.length-1];if(J&&J.redirect){const{redirect:_e}=J;let je=typeof _e=="function"?_e(z,q):_e;return typeof je=="string"&&(je=je.includes("?")||je.includes("#")?je=$(je):{path:je},je.params={}),dt({query:z.query,hash:z.hash,params:je.path!=null?{}:z.params},je)}}function N(z,q){const J=p=x(z),_e=h.value,je=z.state,D=z.force,B=z.replace===!0,j=I(J,_e);if(j)return N(dt($(j),{state:typeof j=="object"?dt({},je,j.state):je,force:D,replace:B}),q||J);const se=J;se.redirectedFrom=q;let le;return!D&&Uv(a,_e,J)&&(le=Ni(St.NAVIGATION_DUPLICATED,{to:se,from:_e}),re(_e,_e,!0,!1)),(le?Promise.resolve(le):ne(se,_e)).catch(ie=>Jn(ie)?Jn(ie,St.NAVIGATION_GUARD_REDIRECT)?ie:U(ie):K(ie,se,_e)).then(ie=>{if(ie){if(Jn(ie,St.NAVIGATION_GUARD_REDIRECT))return N(dt({replace:B},$(ie.to),{state:typeof ie.to=="object"?dt({},je,ie.to.state):je,force:D}),q||se)}else ie=xe(se,_e,!0,B,je);return ge(se,_e,ie),ie})}function te(z,q){const J=b(z,q);return J?Promise.reject(J):Promise.resolve()}function Z(z){const q=Ue.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(z):z()}function ne(z,q){let J;const[_e,je,D]=s_(z,q);J=ol(_e.reverse(),"beforeRouteLeave",z,q);for(const j of _e)j.leaveGuards.forEach(se=>{J.push(Cs(se,z,q))});const B=te.bind(null,z,q);return J.push(B),Se(J).then(()=>{J=[];for(const j of r.list())J.push(Cs(j,z,q));return J.push(B),Se(J)}).then(()=>{J=ol(je,"beforeRouteUpdate",z,q);for(const j of je)j.updateGuards.forEach(se=>{J.push(Cs(se,z,q))});return J.push(B),Se(J)}).then(()=>{J=[];for(const j of D)if(j.beforeEnter)if(xn(j.beforeEnter))for(const se of j.beforeEnter)J.push(Cs(se,z,q));else J.push(Cs(j.beforeEnter,z,q));return J.push(B),Se(J)}).then(()=>(z.matched.forEach(j=>j.enterCallbacks={}),J=ol(D,"beforeRouteEnter",z,q,Z),J.push(B),Se(J))).then(()=>{J=[];for(const j of l.list())J.push(Cs(j,z,q));return J.push(B),Se(J)}).catch(j=>Jn(j,St.NAVIGATION_CANCELLED)?j:Promise.reject(j))}function ge(z,q,J){u.list().forEach(_e=>Z(()=>_e(z,q,J)))}function xe(z,q,J,_e,je){const D=b(z,q);if(D)return D;const B=q===ys,j=Ci?history.state:{};J&&(_e||B?s.replace(z.fullPath,dt({scroll:B&&j&&j.scroll},je)):s.push(z.fullPath,je)),h.value=z,re(z,q,J,B),U()}let ze;function pe(){ze||(ze=s.listen((z,q,J)=>{if(!qe.listening)return;const _e=x(z),je=I(_e,qe.currentRoute.value);if(je){N(dt(je,{replace:!0,force:!0}),_e).catch(Po);return}p=_e;const D=h.value;Ci&&Kv(bu(D.fullPath,J.delta),_r()),ne(_e,D).catch(B=>Jn(B,St.NAVIGATION_ABORTED|St.NAVIGATION_CANCELLED)?B:Jn(B,St.NAVIGATION_GUARD_REDIRECT)?(N(dt($(B.to),{force:!0}),_e).then(j=>{Jn(j,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===xl.pop&&s.go(-1,!1)}).catch(Po),Promise.reject()):(J.delta&&s.go(-J.delta,!1),K(B,_e,D))).then(B=>{B=B||xe(_e,D,!1),B&&(J.delta&&!Jn(B,St.NAVIGATION_CANCELLED)?s.go(-J.delta,!1):J.type===xl.pop&&Jn(B,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),ge(_e,D,B)}).catch(Po)}))}let $e=bo(),Ce=bo(),Ee;function K(z,q,J){U(z);const _e=Ce.list();return _e.length?_e.forEach(je=>je(z,q,J)):console.error(z),Promise.reject(z)}function G(){return Ee&&h.value!==ys?Promise.resolve():new Promise((z,q)=>{$e.add([z,q])})}function U(z){return Ee||(Ee=!z,pe(),$e.list().forEach(([q,J])=>z?J(z):q()),$e.reset()),z}function re(z,q,J,_e){const{scrollBehavior:je}=e;if(!Ci||!je)return Promise.resolve();const D=!J&&Yv(bu(z.fullPath,0))||(_e||!J)&&history.state&&history.state.scroll||null;return ur().then(()=>je(z,q,D)).then(B=>B&&Gv(B)).catch(B=>K(B,z,q))}const we=z=>s.go(z);let De;const Ue=new Set,qe={currentRoute:h,listening:!0,addRoute:w,removeRoute:E,clearRoutes:n.clearRoutes,hasRoute:P,getRoutes:A,resolve:x,options:e,push:S,replace:T,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:r.add,beforeResolve:l.add,afterEach:u.add,onError:Ce.add,isReady:G,install(z){z.component("RouterLink",C_),z.component("RouterView",S_),z.config.globalProperties.$router=qe,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>W(h)}),Ci&&!De&&h.value===ys&&(De=!0,S(s.location).catch(_e=>{}));const q={};for(const _e in ys)Object.defineProperty(q,_e,{get:()=>h.value[_e],enumerable:!0});z.provide(gr,qe),z.provide(Xl,Ld(q)),z.provide(Tl,h);const J=z.unmount;Ue.add(z),z.unmount=function(){Ue.delete(z),Ue.size<1&&(p=ys,ze&&ze(),ze=null,h.value=ys,De=!1,Ee=!1),J()}}};function Se(z){return z.reduce((q,J)=>q.then(()=>Z(J)),Promise.resolve())}return qe}function Zo(){return vn(gr)}function Ql(e){return vn(Xl)}const M_={},A_={class:"home"},P_={class:"container"},$_={class:"actions"};function D_(e,n){const i=hr("router-link");return y(),k("div",A_,[d("div",P_,[n[1]||(n[1]=d("h1",null,"Volunteer Check-in System ",-1)),n[2]||(n[2]=d("p",{class:"subtitle"},"Manage race marshals and volunteers with ease",-1)),d("div",$_,[Ae(i,{to:"/admin/login",class:"btn btn-primary"},{default:Ke(()=>[...n[0]||(n[0]=[Oe(" Admin Portal ",-1)])]),_:1})]),n[3]||(n[3]=Am('<div class="features" data-v-536ab6a4><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Admins</h3><ul data-v-536ab6a4><li data-v-536ab6a4>Create and manage events</li><li data-v-536ab6a4>Define marshal locations</li><li data-v-536ab6a4>Assign marshals to locations</li><li data-v-536ab6a4>Real-time check-in monitoring</li><li data-v-536ab6a4>Map view of all locations</li></ul></div><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Marshals</h3><ul data-v-536ab6a4><li data-v-536ab6a4>View your assigned location</li><li data-v-536ab6a4>Check in with GPS verification</li><li data-v-536ab6a4>Access emergency contact info</li><li data-v-536ab6a4>View all marshal locations</li></ul></div></div>',1))])])}const O_=He(M_,[["render",D_],["__scopeId","data-v-536ab6a4"]]);function Sh(e,n){return function(){return e.apply(n,arguments)}}const{toString:R_}=Object.prototype,{getPrototypeOf:ec}=Object,{iterator:yr,toStringTag:Ih}=Symbol,br=(e=>n=>{const i=R_.call(n);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),En=e=>(e=e.toLowerCase(),n=>br(n)===e),kr=e=>n=>typeof n===e,{isArray:Ui}=Array,Bi=kr("undefined");function qo(e){return e!==null&&!Bi(e)&&e.constructor!==null&&!Bi(e.constructor)&&sn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Mh=En("ArrayBuffer");function N_(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Mh(e.buffer),n}const B_=kr("string"),sn=kr("function"),Ah=kr("number"),jo=e=>e!==null&&typeof e=="object",F_=e=>e===!0||e===!1,Ba=e=>{if(br(e)!=="object")return!1;const n=ec(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ih in e)&&!(yr in e)},z_=e=>{if(!jo(e)||qo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},U_=En("Date"),H_=En("File"),V_=En("Blob"),Z_=En("FileList"),q_=e=>jo(e)&&sn(e.pipe),j_=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||sn(e.append)&&((n=br(e))==="formdata"||n==="object"&&sn(e.toString)&&e.toString()==="[object FormData]"))},W_=En("URLSearchParams"),[G_,K_,Y_,J_]=["ReadableStream","Request","Response","Headers"].map(En),X_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wo(e,n,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),Ui(e))for(a=0,s=e.length;a<s;a++)n.call(null,e[a],a,e);else{if(qo(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),l=r.length;let u;for(a=0;a<l;a++)u=r[a],n.call(null,e[u],u,e)}}function Ph(e,n){if(qo(e))return null;n=n.toLowerCase();const i=Object.keys(e);let a=i.length,s;for(;a-- >0;)if(s=i[a],n===s.toLowerCase())return s;return null}const qs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$h=e=>!Bi(e)&&e!==qs;function Sl(){const{caseless:e,skipUndefined:n}=$h(this)&&this||{},i={},a=(s,r)=>{const l=e&&Ph(i,r)||r;Ba(i[l])&&Ba(s)?i[l]=Sl(i[l],s):Ba(s)?i[l]=Sl({},s):Ui(s)?i[l]=s.slice():(!n||!Bi(s))&&(i[l]=s)};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Wo(arguments[s],a);return i}const Q_=(e,n,i,{allOwnKeys:a}={})=>(Wo(n,(s,r)=>{i&&sn(s)?e[r]=Sh(s,i):e[r]=s},{allOwnKeys:a}),e),eg=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tg=(e,n,i,a)=>{e.prototype=Object.create(n.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),i&&Object.assign(e.prototype,i)},ng=(e,n,i,a)=>{let s,r,l;const u={};if(n=n||{},e==null)return n;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)l=s[r],(!a||a(l,e,n))&&!u[l]&&(n[l]=e[l],u[l]=!0);e=i!==!1&&ec(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},sg=(e,n,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=n.length;const a=e.indexOf(n,i);return a!==-1&&a===i},ig=e=>{if(!e)return null;if(Ui(e))return e;let n=e.length;if(!Ah(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=e[n];return i},og=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&ec(Uint8Array)),ag=(e,n)=>{const a=(e&&e[yr]).call(e);let s;for(;(s=a.next())&&!s.done;){const r=s.value;n.call(e,r[0],r[1])}},rg=(e,n)=>{let i;const a=[];for(;(i=e.exec(n))!==null;)a.push(i);return a},lg=En("HTMLFormElement"),cg=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,a,s){return a.toUpperCase()+s}),$u=(({hasOwnProperty:e})=>(n,i)=>e.call(n,i))(Object.prototype),ug=En("RegExp"),Dh=(e,n)=>{const i=Object.getOwnPropertyDescriptors(e),a={};Wo(i,(s,r)=>{let l;(l=n(s,r,e))!==!1&&(a[r]=l||s)}),Object.defineProperties(e,a)},dg=e=>{Dh(e,(n,i)=>{if(sn(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=e[i];if(sn(a)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},hg=(e,n)=>{const i={},a=s=>{s.forEach(r=>{i[r]=!0})};return Ui(e)?a(e):a(String(e).split(n)),i},fg=()=>{},pg=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function mg(e){return!!(e&&sn(e.append)&&e[Ih]==="FormData"&&e[yr])}const vg=e=>{const n=new Array(10),i=(a,s)=>{if(jo(a)){if(n.indexOf(a)>=0)return;if(qo(a))return a;if(!("toJSON"in a)){n[s]=a;const r=Ui(a)?[]:{};return Wo(a,(l,u)=>{const h=i(l,s+1);!Bi(h)&&(r[u]=h)}),n[s]=void 0,r}}return a};return i(e,0)},_g=En("AsyncFunction"),gg=e=>e&&(jo(e)||sn(e))&&sn(e.then)&&sn(e.catch),Oh=((e,n)=>e?setImmediate:n?((i,a)=>(qs.addEventListener("message",({source:s,data:r})=>{s===qs&&r===i&&a.length&&a.shift()()},!1),s=>{a.push(s),qs.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",sn(qs.postMessage)),yg=typeof queueMicrotask<"u"?queueMicrotask.bind(qs):typeof process<"u"&&process.nextTick||Oh,bg=e=>e!=null&&sn(e[yr]),ee={isArray:Ui,isArrayBuffer:Mh,isBuffer:qo,isFormData:j_,isArrayBufferView:N_,isString:B_,isNumber:Ah,isBoolean:F_,isObject:jo,isPlainObject:Ba,isEmptyObject:z_,isReadableStream:G_,isRequest:K_,isResponse:Y_,isHeaders:J_,isUndefined:Bi,isDate:U_,isFile:H_,isBlob:V_,isRegExp:ug,isFunction:sn,isStream:q_,isURLSearchParams:W_,isTypedArray:og,isFileList:Z_,forEach:Wo,merge:Sl,extend:Q_,trim:X_,stripBOM:eg,inherits:tg,toFlatObject:ng,kindOf:br,kindOfTest:En,endsWith:sg,toArray:ig,forEachEntry:ag,matchAll:rg,isHTMLForm:lg,hasOwnProperty:$u,hasOwnProp:$u,reduceDescriptors:Dh,freezeMethods:dg,toObjectSet:hg,toCamelCase:cg,noop:fg,toFiniteNumber:pg,findKey:Ph,global:qs,isContextDefined:$h,isSpecCompliantForm:mg,toJSONObject:vg,isAsyncFn:_g,isThenable:gg,setImmediate:Oh,asap:yg,isIterable:bg};function st(e,n,i,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(st,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const Rh=st.prototype,Nh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Nh[e]={value:e}});Object.defineProperties(st,Nh);Object.defineProperty(Rh,"isAxiosError",{value:!0});st.from=(e,n,i,a,s,r)=>{const l=Object.create(Rh);ee.toFlatObject(e,l,function(m){return m!==Error.prototype},p=>p!=="isAxiosError");const u=e&&e.message?e.message:"Error",h=n==null&&e?e.code:n;return st.call(l,u,h,i,a,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",r&&Object.assign(l,r),l};const kg=null;function Il(e){return ee.isPlainObject(e)||ee.isArray(e)}function Bh(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function Du(e,n,i){return e?e.concat(n).map(function(s,r){return s=Bh(s),!i&&r?"["+s+"]":s}).join(i?".":""):n}function wg(e){return ee.isArray(e)&&!e.some(Il)}const Lg=ee.toFlatObject(ee,{},null,function(n){return/^is[A-Z]/.test(n)});function wr(e,n,i){if(!ee.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,i=ee.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,P){return!ee.isUndefined(P[A])});const a=i.metaTokens,s=i.visitor||m,r=i.dots,l=i.indexes,h=(i.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(n);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function p(E){if(E===null)return"";if(ee.isDate(E))return E.toISOString();if(ee.isBoolean(E))return E.toString();if(!h&&ee.isBlob(E))throw new st("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(E)||ee.isTypedArray(E)?h&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function m(E,A,P){let x=E;if(E&&!P&&typeof E=="object"){if(ee.endsWith(A,"{}"))A=a?A:A.slice(0,-2),E=JSON.stringify(E);else if(ee.isArray(E)&&wg(E)||(ee.isFileList(E)||ee.endsWith(A,"[]"))&&(x=ee.toArray(E)))return A=Bh(A),x.forEach(function(b,S){!(ee.isUndefined(b)||b===null)&&n.append(l===!0?Du([A],S,r):l===null?A:A+"[]",p(b))}),!1}return Il(E)?!0:(n.append(Du(P,A,r),p(E)),!1)}const v=[],g=Object.assign(Lg,{defaultVisitor:m,convertValue:p,isVisitable:Il});function w(E,A){if(!ee.isUndefined(E)){if(v.indexOf(E)!==-1)throw Error("Circular reference detected in "+A.join("."));v.push(E),ee.forEach(E,function(x,$){(!(ee.isUndefined(x)||x===null)&&s.call(n,x,ee.isString($)?$.trim():$,A,g))===!0&&w(x,A?A.concat($):[$])}),v.pop()}}if(!ee.isObject(e))throw new TypeError("data must be an object");return w(e),n}function Ou(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return n[a]})}function tc(e,n){this._pairs=[],e&&wr(e,this,n)}const Fh=tc.prototype;Fh.append=function(n,i){this._pairs.push([n,i])};Fh.toString=function(n){const i=n?function(a){return n.call(this,a,Ou)}:Ou;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function Cg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function zh(e,n,i){if(!n)return e;const a=i&&i.encode||Cg;ee.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let r;if(s?r=s(n,i):r=ee.isURLSearchParams(n)?n.toString():new tc(n,i).toString(a),r){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Ru{constructor(){this.handlers=[]}use(n,i,a){return this.handlers.push({fulfilled:n,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ee.forEach(this.handlers,function(a){a!==null&&n(a)})}}const Uh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xg=typeof URLSearchParams<"u"?URLSearchParams:tc,Eg=typeof FormData<"u"?FormData:null,Tg=typeof Blob<"u"?Blob:null,Sg={isBrowser:!0,classes:{URLSearchParams:xg,FormData:Eg,Blob:Tg},protocols:["http","https","file","blob","url","data"]},nc=typeof window<"u"&&typeof document<"u",Ml=typeof navigator=="object"&&navigator||void 0,Ig=nc&&(!Ml||["ReactNative","NativeScript","NS"].indexOf(Ml.product)<0),Mg=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ag=nc&&window.location.href||"http://localhost",Pg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nc,hasStandardBrowserEnv:Ig,hasStandardBrowserWebWorkerEnv:Mg,navigator:Ml,origin:Ag},Symbol.toStringTag,{value:"Module"})),jt={...Pg,...Sg};function $g(e,n){return wr(e,new jt.classes.URLSearchParams,{visitor:function(i,a,s,r){return jt.isNode&&ee.isBuffer(i)?(this.append(a,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...n})}function Dg(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function Og(e){const n={},i=Object.keys(e);let a;const s=i.length;let r;for(a=0;a<s;a++)r=i[a],n[r]=e[r];return n}function Hh(e){function n(i,a,s,r){let l=i[r++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),h=r>=i.length;return l=!l&&ee.isArray(s)?s.length:l,h?(ee.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!u):((!s[l]||!ee.isObject(s[l]))&&(s[l]=[]),n(i,a,s[l],r)&&ee.isArray(s[l])&&(s[l]=Og(s[l])),!u)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const i={};return ee.forEachEntry(e,(a,s)=>{n(Dg(a),s,i,0)}),i}return null}function Rg(e,n,i){if(ee.isString(e))try{return(n||JSON.parse)(e),ee.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}const Go={transitional:Uh,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const a=i.getContentType()||"",s=a.indexOf("application/json")>-1,r=ee.isObject(n);if(r&&ee.isHTMLForm(n)&&(n=new FormData(n)),ee.isFormData(n))return s?JSON.stringify(Hh(n)):n;if(ee.isArrayBuffer(n)||ee.isBuffer(n)||ee.isStream(n)||ee.isFile(n)||ee.isBlob(n)||ee.isReadableStream(n))return n;if(ee.isArrayBufferView(n))return n.buffer;if(ee.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let u;if(r){if(a.indexOf("application/x-www-form-urlencoded")>-1)return $g(n,this.formSerializer).toString();if((u=ee.isFileList(n))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return wr(u?{"files[]":n}:n,h&&new h,this.formSerializer)}}return r||s?(i.setContentType("application/json",!1),Rg(n)):n}],transformResponse:[function(n){const i=this.transitional||Go.transitional,a=i&&i.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(n)||ee.isReadableStream(n))return n;if(n&&ee.isString(n)&&(a&&!this.responseType||s)){const l=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(n,this.parseReviver)}catch(u){if(l)throw u.name==="SyntaxError"?st.from(u,st.ERR_BAD_RESPONSE,this,null,this.response):u}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],e=>{Go.headers[e]={}});const Ng=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Bg=e=>{const n={};let i,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),i=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!i||n[i]&&Ng[i])&&(i==="set-cookie"?n[i]?n[i].push(a):n[i]=[a]:n[i]=n[i]?n[i]+", "+a:a)}),n},Nu=Symbol("internals");function ko(e){return e&&String(e).trim().toLowerCase()}function Fa(e){return e===!1||e==null?e:ee.isArray(e)?e.map(Fa):String(e)}function Fg(e){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(e);)n[a[1]]=a[2];return n}const zg=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function al(e,n,i,a,s){if(ee.isFunction(a))return a.call(this,n,i);if(s&&(n=i),!!ee.isString(n)){if(ee.isString(a))return n.indexOf(a)!==-1;if(ee.isRegExp(a))return a.test(n)}}function Ug(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,a)=>i.toUpperCase()+a)}function Hg(e,n){const i=ee.toCamelCase(" "+n);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+i,{value:function(s,r,l){return this[a].call(this,n,s,r,l)},configurable:!0})})}let on=class{constructor(n){n&&this.set(n)}set(n,i,a){const s=this;function r(u,h,p){const m=ko(h);if(!m)throw new Error("header name must be a non-empty string");const v=ee.findKey(s,m);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||h]=Fa(u))}const l=(u,h)=>ee.forEach(u,(p,m)=>r(p,m,h));if(ee.isPlainObject(n)||n instanceof this.constructor)l(n,i);else if(ee.isString(n)&&(n=n.trim())&&!zg(n))l(Bg(n),i);else if(ee.isObject(n)&&ee.isIterable(n)){let u={},h,p;for(const m of n){if(!ee.isArray(m))throw TypeError("Object iterator must return a key-value pair");u[p=m[0]]=(h=u[p])?ee.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}l(u,i)}else n!=null&&r(i,n,a);return this}get(n,i){if(n=ko(n),n){const a=ee.findKey(this,n);if(a){const s=this[a];if(!i)return s;if(i===!0)return Fg(s);if(ee.isFunction(i))return i.call(this,s,a);if(ee.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=ko(n),n){const a=ee.findKey(this,n);return!!(a&&this[a]!==void 0&&(!i||al(this,this[a],a,i)))}return!1}delete(n,i){const a=this;let s=!1;function r(l){if(l=ko(l),l){const u=ee.findKey(a,l);u&&(!i||al(a,a[u],u,i))&&(delete a[u],s=!0)}}return ee.isArray(n)?n.forEach(r):r(n),s}clear(n){const i=Object.keys(this);let a=i.length,s=!1;for(;a--;){const r=i[a];(!n||al(this,this[r],r,n,!0))&&(delete this[r],s=!0)}return s}normalize(n){const i=this,a={};return ee.forEach(this,(s,r)=>{const l=ee.findKey(a,r);if(l){i[l]=Fa(s),delete i[r];return}const u=n?Ug(r):String(r).trim();u!==r&&delete i[r],i[u]=Fa(s),a[u]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ee.forEach(this,(a,s)=>{a!=null&&a!==!1&&(i[s]=n&&ee.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const a=new this(n);return i.forEach(s=>a.set(s)),a}static accessor(n){const a=(this[Nu]=this[Nu]={accessors:{}}).accessors,s=this.prototype;function r(l){const u=ko(l);a[u]||(Hg(s,l),a[u]=!0)}return ee.isArray(n)?n.forEach(r):r(n),this}};on.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(on.prototype,({value:e},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(a){this[i]=a}}});ee.freezeMethods(on);function rl(e,n){const i=this||Go,a=n||i,s=on.from(a.headers);let r=a.data;return ee.forEach(e,function(u){r=u.call(i,r,s.normalize(),n?n.status:void 0)}),s.normalize(),r}function Vh(e){return!!(e&&e.__CANCEL__)}function Hi(e,n,i){st.call(this,e??"canceled",st.ERR_CANCELED,n,i),this.name="CanceledError"}ee.inherits(Hi,st,{__CANCEL__:!0});function Zh(e,n,i){const a=i.config.validateStatus;!i.status||!a||a(i.status)?e(i):n(new st("Request failed with status code "+i.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Vg(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Zg(e,n){e=e||10;const i=new Array(e),a=new Array(e);let s=0,r=0,l;return n=n!==void 0?n:1e3,function(h){const p=Date.now(),m=a[r];l||(l=p),i[s]=h,a[s]=p;let v=r,g=0;for(;v!==s;)g+=i[v++],v=v%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),p-l<n)return;const w=m&&p-m;return w?Math.round(g*1e3/w):void 0}}function qg(e,n){let i=0,a=1e3/n,s,r;const l=(p,m=Date.now())=>{i=m,s=null,r&&(clearTimeout(r),r=null),e(...p)};return[(...p)=>{const m=Date.now(),v=m-i;v>=a?l(p,m):(s=p,r||(r=setTimeout(()=>{r=null,l(s)},a-v)))},()=>s&&l(s)]}const Ja=(e,n,i=3)=>{let a=0;const s=Zg(50,250);return qg(r=>{const l=r.loaded,u=r.lengthComputable?r.total:void 0,h=l-a,p=s(h),m=l<=u;a=l;const v={loaded:l,total:u,progress:u?l/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&m?(u-l)/p:void 0,event:r,lengthComputable:u!=null,[n?"download":"upload"]:!0};e(v)},i)},Bu=(e,n)=>{const i=e!=null;return[a=>n[0]({lengthComputable:i,total:e,loaded:a}),n[1]]},Fu=e=>(...n)=>ee.asap(()=>e(...n)),jg=jt.hasStandardBrowserEnv?((e,n)=>i=>(i=new URL(i,jt.origin),e.protocol===i.protocol&&e.host===i.host&&(n||e.port===i.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,Wg=jt.hasStandardBrowserEnv?{write(e,n,i,a,s,r,l){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(n)}`];ee.isNumber(i)&&u.push(`expires=${new Date(i).toUTCString()}`),ee.isString(a)&&u.push(`path=${a}`),ee.isString(s)&&u.push(`domain=${s}`),r===!0&&u.push("secure"),ee.isString(l)&&u.push(`SameSite=${l}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Gg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Kg(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function qh(e,n,i){let a=!Gg(n);return e&&(a||i==!1)?Kg(e,n):n}const zu=e=>e instanceof on?{...e}:e;function Js(e,n){n=n||{};const i={};function a(p,m,v,g){return ee.isPlainObject(p)&&ee.isPlainObject(m)?ee.merge.call({caseless:g},p,m):ee.isPlainObject(m)?ee.merge({},m):ee.isArray(m)?m.slice():m}function s(p,m,v,g){if(ee.isUndefined(m)){if(!ee.isUndefined(p))return a(void 0,p,v,g)}else return a(p,m,v,g)}function r(p,m){if(!ee.isUndefined(m))return a(void 0,m)}function l(p,m){if(ee.isUndefined(m)){if(!ee.isUndefined(p))return a(void 0,p)}else return a(void 0,m)}function u(p,m,v){if(v in n)return a(p,m);if(v in e)return a(void 0,p)}const h={url:r,method:r,data:r,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(p,m,v)=>s(zu(p),zu(m),v,!0)};return ee.forEach(Object.keys({...e,...n}),function(m){const v=h[m]||s,g=v(e[m],n[m],m);ee.isUndefined(g)&&v!==u||(i[m]=g)}),i}const jh=e=>{const n=Js({},e);let{data:i,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:r,headers:l,auth:u}=n;if(n.headers=l=on.from(l),n.url=zh(qh(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ee.isFormData(i)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ee.isFunction(i.getHeaders)){const h=i.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([m,v])=>{p.includes(m.toLowerCase())&&l.set(m,v)})}}if(jt.hasStandardBrowserEnv&&(a&&ee.isFunction(a)&&(a=a(n)),a||a!==!1&&jg(n.url))){const h=s&&r&&Wg.read(r);h&&l.set(s,h)}return n},Yg=typeof XMLHttpRequest<"u",Jg=Yg&&function(e){return new Promise(function(i,a){const s=jh(e);let r=s.data;const l=on.from(s.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=s,m,v,g,w,E;function A(){w&&w(),E&&E(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let P=new XMLHttpRequest;P.open(s.method.toUpperCase(),s.url,!0),P.timeout=s.timeout;function x(){if(!P)return;const b=on.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),T={data:!u||u==="text"||u==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:b,config:e,request:P};Zh(function(N){i(N),A()},function(N){a(N),A()},T),P=null}"onloadend"in P?P.onloadend=x:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(x)},P.onabort=function(){P&&(a(new st("Request aborted",st.ECONNABORTED,e,P)),P=null)},P.onerror=function(S){const T=S&&S.message?S.message:"Network Error",I=new st(T,st.ERR_NETWORK,e,P);I.event=S||null,a(I),P=null},P.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||Uh;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),a(new st(S,T.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,e,P)),P=null},r===void 0&&l.setContentType(null),"setRequestHeader"in P&&ee.forEach(l.toJSON(),function(S,T){P.setRequestHeader(T,S)}),ee.isUndefined(s.withCredentials)||(P.withCredentials=!!s.withCredentials),u&&u!=="json"&&(P.responseType=s.responseType),p&&([g,E]=Ja(p,!0),P.addEventListener("progress",g)),h&&P.upload&&([v,w]=Ja(h),P.upload.addEventListener("progress",v),P.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(m=b=>{P&&(a(!b||b.type?new Hi(null,e,P):b),P.abort(),P=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const $=Vg(s.url);if($&&jt.protocols.indexOf($)===-1){a(new st("Unsupported protocol "+$+":",st.ERR_BAD_REQUEST,e));return}P.send(r||null)})},Xg=(e,n)=>{const{length:i}=e=e?e.filter(Boolean):[];if(n||i){let a=new AbortController,s;const r=function(p){if(!s){s=!0,u();const m=p instanceof Error?p:this.reason;a.abort(m instanceof st?m:new Hi(m instanceof Error?m.message:m))}};let l=n&&setTimeout(()=>{l=null,r(new st(`timeout ${n} of ms exceeded`,st.ETIMEDOUT))},n);const u=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(r):p.removeEventListener("abort",r)}),e=null)};e.forEach(p=>p.addEventListener("abort",r));const{signal:h}=a;return h.unsubscribe=()=>ee.asap(u),h}},Qg=function*(e,n){let i=e.byteLength;if(i<n){yield e;return}let a=0,s;for(;a<i;)s=a+n,yield e.slice(a,s),a=s},ey=async function*(e,n){for await(const i of ty(e))yield*Qg(i,n)},ty=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:i,value:a}=await n.read();if(i)break;yield a}}finally{await n.cancel()}},Uu=(e,n,i,a)=>{const s=ey(e,n);let r=0,l,u=h=>{l||(l=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:p,value:m}=await s.next();if(p){u(),h.close();return}let v=m.byteLength;if(i){let g=r+=v;i(g)}h.enqueue(new Uint8Array(m))}catch(p){throw u(p),p}},cancel(h){return u(h),s.return()}},{highWaterMark:2})},Hu=64*1024,{isFunction:Ia}=ee,ny=(({Request:e,Response:n})=>({Request:e,Response:n}))(ee.global),{ReadableStream:Vu,TextEncoder:Zu}=ee.global,qu=(e,...n)=>{try{return!!e(...n)}catch{return!1}},sy=e=>{e=ee.merge.call({skipUndefined:!0},ny,e);const{fetch:n,Request:i,Response:a}=e,s=n?Ia(n):typeof fetch=="function",r=Ia(i),l=Ia(a);if(!s)return!1;const u=s&&Ia(Vu),h=s&&(typeof Zu=="function"?(E=>A=>E.encode(A))(new Zu):async E=>new Uint8Array(await new i(E).arrayBuffer())),p=r&&u&&qu(()=>{let E=!1;const A=new i(jt.origin,{body:new Vu,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!A}),m=l&&u&&qu(()=>ee.isReadableStream(new a("").body)),v={stream:m&&(E=>E.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!v[E]&&(v[E]=(A,P)=>{let x=A&&A[E];if(x)return x.call(A);throw new st(`Response type '${E}' is not supported`,st.ERR_NOT_SUPPORT,P)})});const g=async E=>{if(E==null)return 0;if(ee.isBlob(E))return E.size;if(ee.isSpecCompliantForm(E))return(await new i(jt.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(E)||ee.isArrayBuffer(E))return E.byteLength;if(ee.isURLSearchParams(E)&&(E=E+""),ee.isString(E))return(await h(E)).byteLength},w=async(E,A)=>{const P=ee.toFiniteNumber(E.getContentLength());return P??g(A)};return async E=>{let{url:A,method:P,data:x,signal:$,cancelToken:b,timeout:S,onDownloadProgress:T,onUploadProgress:I,responseType:N,headers:te,withCredentials:Z="same-origin",fetchOptions:ne}=jh(E),ge=n||fetch;N=N?(N+"").toLowerCase():"text";let xe=Xg([$,b&&b.toAbortSignal()],S),ze=null;const pe=xe&&xe.unsubscribe&&(()=>{xe.unsubscribe()});let $e;try{if(I&&p&&P!=="get"&&P!=="head"&&($e=await w(te,x))!==0){let re=new i(A,{method:"POST",body:x,duplex:"half"}),we;if(ee.isFormData(x)&&(we=re.headers.get("content-type"))&&te.setContentType(we),re.body){const[De,Ue]=Bu($e,Ja(Fu(I)));x=Uu(re.body,Hu,De,Ue)}}ee.isString(Z)||(Z=Z?"include":"omit");const Ce=r&&"credentials"in i.prototype,Ee={...ne,signal:xe,method:P.toUpperCase(),headers:te.normalize().toJSON(),body:x,duplex:"half",credentials:Ce?Z:void 0};ze=r&&new i(A,Ee);let K=await(r?ge(ze,ne):ge(A,Ee));const G=m&&(N==="stream"||N==="response");if(m&&(T||G&&pe)){const re={};["status","statusText","headers"].forEach(qe=>{re[qe]=K[qe]});const we=ee.toFiniteNumber(K.headers.get("content-length")),[De,Ue]=T&&Bu(we,Ja(Fu(T),!0))||[];K=new a(Uu(K.body,Hu,De,()=>{Ue&&Ue(),pe&&pe()}),re)}N=N||"text";let U=await v[ee.findKey(v,N)||"text"](K,E);return!G&&pe&&pe(),await new Promise((re,we)=>{Zh(re,we,{data:U,headers:on.from(K.headers),status:K.status,statusText:K.statusText,config:E,request:ze})})}catch(Ce){throw pe&&pe(),Ce&&Ce.name==="TypeError"&&/Load failed|fetch/i.test(Ce.message)?Object.assign(new st("Network Error",st.ERR_NETWORK,E,ze),{cause:Ce.cause||Ce}):st.from(Ce,Ce&&Ce.code,E,ze)}}},iy=new Map,Wh=e=>{let n=e&&e.env||{};const{fetch:i,Request:a,Response:s}=n,r=[a,s,i];let l=r.length,u=l,h,p,m=iy;for(;u--;)h=r[u],p=m.get(h),p===void 0&&m.set(h,p=u?new Map:sy(n)),m=p;return p};Wh();const sc={http:kg,xhr:Jg,fetch:{get:Wh}};ee.forEach(sc,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const ju=e=>`- ${e}`,oy=e=>ee.isFunction(e)||e===null||e===!1;function ay(e,n){e=ee.isArray(e)?e:[e];const{length:i}=e;let a,s;const r={};for(let l=0;l<i;l++){a=e[l];let u;if(s=a,!oy(a)&&(s=sc[(u=String(a)).toLowerCase()],s===void 0))throw new st(`Unknown adapter '${u}'`);if(s&&(ee.isFunction(s)||(s=s.get(n))))break;r[u||"#"+l]=s}if(!s){const l=Object.entries(r).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=i?l.length>1?`since :
`+l.map(ju).join(`
`):" "+ju(l[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return s}const Gh={getAdapter:ay,adapters:sc};function ll(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hi(null,e)}function Wu(e){return ll(e),e.headers=on.from(e.headers),e.data=rl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Gh.getAdapter(e.adapter||Go.adapter,e)(e).then(function(a){return ll(e),a.data=rl.call(e,e.transformResponse,a),a.headers=on.from(a.headers),a},function(a){return Vh(a)||(ll(e),a&&a.response&&(a.response.data=rl.call(e,e.transformResponse,a.response),a.response.headers=on.from(a.response.headers))),Promise.reject(a)})}const Kh="1.13.2",Lr={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Lr[e]=function(a){return typeof a===e||"a"+(n<1?"n ":" ")+e}});const Gu={};Lr.transitional=function(n,i,a){function s(r,l){return"[Axios v"+Kh+"] Transitional option '"+r+"'"+l+(a?". "+a:"")}return(r,l,u)=>{if(n===!1)throw new st(s(l," has been removed"+(i?" in "+i:"")),st.ERR_DEPRECATED);return i&&!Gu[l]&&(Gu[l]=!0,console.warn(s(l," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(r,l,u):!0}};Lr.spelling=function(n){return(i,a)=>(console.warn(`${a} is likely a misspelling of ${n}`),!0)};function ry(e,n,i){if(typeof e!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const r=a[s],l=n[r];if(l){const u=e[r],h=u===void 0||l(u,r,e);if(h!==!0)throw new st("option "+r+" must be "+h,st.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new st("Unknown option "+r,st.ERR_BAD_OPTION)}}const za={assertOptions:ry,validators:Lr},Mn=za.validators;let Ks=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Ru,response:new Ru}}async request(n,i){try{return await this._request(n,i)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?r&&!String(a.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+r):a.stack=r}catch{}}throw a}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Js(this.defaults,i);const{transitional:a,paramsSerializer:s,headers:r}=i;a!==void 0&&za.assertOptions(a,{silentJSONParsing:Mn.transitional(Mn.boolean),forcedJSONParsing:Mn.transitional(Mn.boolean),clarifyTimeoutError:Mn.transitional(Mn.boolean)},!1),s!=null&&(ee.isFunction(s)?i.paramsSerializer={serialize:s}:za.assertOptions(s,{encode:Mn.function,serialize:Mn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),za.assertOptions(i,{baseUrl:Mn.spelling("baseURL"),withXsrfToken:Mn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=r&&ee.merge(r.common,r[i.method]);r&&ee.forEach(["delete","get","head","post","put","patch","common"],E=>{delete r[E]}),i.headers=on.concat(l,r);const u=[];let h=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(i)===!1||(h=h&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const p=[];this.interceptors.response.forEach(function(A){p.push(A.fulfilled,A.rejected)});let m,v=0,g;if(!h){const E=[Wu.bind(this),void 0];for(E.unshift(...u),E.push(...p),g=E.length,m=Promise.resolve(i);v<g;)m=m.then(E[v++],E[v++]);return m}g=u.length;let w=i;for(;v<g;){const E=u[v++],A=u[v++];try{w=E(w)}catch(P){A.call(this,P);break}}try{m=Wu.call(this,w)}catch(E){return Promise.reject(E)}for(v=0,g=p.length;v<g;)m=m.then(p[v++],p[v++]);return m}getUri(n){n=Js(this.defaults,n);const i=qh(n.baseURL,n.url,n.allowAbsoluteUrls);return zh(i,n.params,n.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(n){Ks.prototype[n]=function(i,a){return this.request(Js(a||{},{method:n,url:i,data:(a||{}).data}))}});ee.forEach(["post","put","patch"],function(n){function i(a){return function(r,l,u){return this.request(Js(u||{},{method:n,headers:a?{"Content-Type":"multipart/form-data"}:{},url:r,data:l}))}}Ks.prototype[n]=i(),Ks.prototype[n+"Form"]=i(!0)});let ly=class Yh{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const a=this;this.promise.then(s=>{if(!a._listeners)return;let r=a._listeners.length;for(;r-- >0;)a._listeners[r](s);a._listeners=null}),this.promise.then=s=>{let r;const l=new Promise(u=>{a.subscribe(u),r=u}).then(s);return l.cancel=function(){a.unsubscribe(r)},l},n(function(r,l,u){a.reason||(a.reason=new Hi(r,l,u),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=a=>{n.abort(a)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Yh(function(s){n=s}),cancel:n}}};function cy(e){return function(i){return e.apply(null,i)}}function uy(e){return ee.isObject(e)&&e.isAxiosError===!0}const Al={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Al).forEach(([e,n])=>{Al[n]=e});function Jh(e){const n=new Ks(e),i=Sh(Ks.prototype.request,n);return ee.extend(i,Ks.prototype,n,{allOwnKeys:!0}),ee.extend(i,n,null,{allOwnKeys:!0}),i.create=function(s){return Jh(Js(e,s))},i}const Pt=Jh(Go);Pt.Axios=Ks;Pt.CanceledError=Hi;Pt.CancelToken=ly;Pt.isCancel=Vh;Pt.VERSION=Kh;Pt.toFormData=wr;Pt.AxiosError=st;Pt.Cancel=Pt.CanceledError;Pt.all=function(n){return Promise.all(n)};Pt.spread=cy;Pt.isAxiosError=uy;Pt.mergeConfig=Js;Pt.AxiosHeaders=on;Pt.formToJSON=e=>Hh(ee.isHTMLForm(e)?new FormData(e):e);Pt.getAdapter=Gh.getAdapter;Pt.HttpStatusCode=Al;Pt.default=Pt;const{Axios:BP,AxiosError:FP,CanceledError:zP,isCancel:UP,CancelToken:HP,VERSION:VP,all:ZP,Cancel:qP,isAxiosError:jP,spread:WP,toFormData:GP,AxiosHeaders:KP,HttpStatusCode:YP,formToJSON:JP,getAdapter:XP,mergeConfig:QP}=Pt,dy="https://sterobson-volunteercheckin-testing.azurewebsites.net/api",Le=Pt.create({baseURL:dy,headers:{"Content-Type":"application/json"}});Le.interceptors.request.use(e=>{const n=localStorage.getItem("adminEmail");n&&(e.headers["X-Admin-Email"]=n);const i=localStorage.getItem("sessionToken");return i&&(e.headers.Authorization=`Bearer ${i}`),e});const as={requestLogin:e=>Le.post("/auth/request-login",{email:e}),verifyToken:e=>Le.post("/auth/verify-token",{token:e}),instantLogin:e=>Le.post("/auth/instant-login",{email:e}),createAdmin:e=>Le.post("/auth/create-admin",{email:e}),marshalLogin:(e,n)=>Le.post("/auth/marshal-login",{eventId:e,magicCode:n}),getMe:e=>Le.get("/auth/me",{params:{eventId:e}}),logout:()=>Le.post("/auth/logout")},Ma={getProfile:()=>Le.get("/auth/profile"),updateProfile:e=>Le.put("/auth/profile",e),getPerson:(e,n)=>Le.get(`/people/${e}`,{params:{eventId:n}}),updatePerson:(e,n,i)=>Le.put(`/people/${e}`,i,{params:{eventId:n}})},Hs={create:e=>Le.post("/events",e),getAll:()=>Le.get("/events"),getById:e=>Le.get(`/events/${e}`),update:(e,n)=>Le.put(`/events/${e}`,n),delete:e=>Le.delete(`/events/${e}`),uploadGpx:(e,n)=>{const i=new FormData;return i.append("gpx",n),Le.post(`/events/${e}/upload-gpx`,i,{headers:{"Content-Type":"multipart/form-data"}})}},os={create:e=>Le.post("/locations",e),getById:(e,n)=>Le.get(`/locations/${e}/${n}`),getByEvent:e=>Le.get(`/events/${e}/locations`),update:(e,n,i)=>Le.put(`/locations/${e}/${n}`,i),delete:(e,n)=>Le.delete(`/locations/${e}/${n}`),importCsv:(e,n,i)=>{const a=new FormData;return a.append("csv",n),Le.post(`/locations/import/${e}?deleteExisting=${i}`,a,{headers:{"Content-Type":"multipart/form-data"}})},bulkUpdateTimes:(e,n)=>Le.post(`/locations/bulk-update-times/${e}`,{timeDelta:n})},Ei={create:e=>Le.post("/assignments",e),getById:(e,n)=>Le.get(`/assignments/${e}/${n}`),getByEvent:e=>Le.get(`/assignments/event/${e}`),delete:(e,n)=>Le.delete(`/assignments/${e}/${n}`),getEventStatus:e=>Le.get(`/events/${e}/status`)},Ti={checkIn:e=>Le.post("/checkin",e),adminCheckIn:(e,n)=>Le.post(`/checkin/admin/${e}/${n}`)},cl={getAdmins:e=>Le.get(`/events/${e}/admins`),addAdmin:(e,n)=>Le.post(`/events/${e}/admins`,{userEmail:n}),removeAdmin:(e,n)=>Le.delete(`/events/${e}/admins/${n}`)},ts={create:e=>Le.post("/marshals",e),getByEvent:e=>Le.get(`/events/${e}/marshals`),getById:(e,n)=>Le.get(`/marshals/${e}/${n}`),update:(e,n,i)=>Le.put(`/marshals/${e}/${n}`,i),delete:(e,n)=>Le.delete(`/marshals/${e}/${n}`),getMagicLink:(e,n)=>Le.get(`/marshals/${e}/${n}/magic-link`),sendMagicLink:(e,n)=>Le.post(`/marshals/${e}/${n}/send-magic-link`),importCsv:(e,n)=>{const i=new FormData;return i.append("csv",n),Le.post(`/marshals/import/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})}},Vs={create:e=>Le.post("/areas",e),getByEvent:e=>Le.get(`/events/${e}/areas`),getById:(e,n)=>Le.get(`/areas/${e}/${n}`),update:(e,n,i)=>Le.put(`/areas/${e}/${n}`,i),delete:(e,n)=>Le.delete(`/areas/${e}/${n}`),recalculate:e=>Le.post(`/areas/recalculate/${e}`),getCheckpoints:(e,n)=>Le.get(`/areas/${e}/${n}/locations`),getAreaLeads:(e,n)=>Le.get(`/areas/${e}/${n}/leads`)},It={create:(e,n)=>Le.post(`/events/${e}/checklist-items`,n),getByEvent:e=>Le.get(`/events/${e}/checklist-items`),getById:(e,n)=>Le.get(`/checklist-items/${e}/${n}`),update:(e,n,i)=>Le.put(`/checklist-items/${e}/${n}`,i),delete:(e,n)=>Le.delete(`/checklist-items/${e}/${n}`),getReport:e=>Le.get(`/events/${e}/checklist-report`),getMarshalChecklist:(e,n)=>Le.get(`/events/${e}/marshals/${n}/checklist`),getCheckpointChecklist:(e,n)=>Le.get(`/events/${e}/locations/${n}/checklist`),getAreaChecklist:(e,n)=>Le.get(`/events/${e}/areas/${n}/checklist`),complete:(e,n,i)=>Le.post(`/checklist-items/${e}/${n}/complete`,i),uncomplete:(e,n,i)=>Le.post(`/checklist-items/${e}/${n}/uncomplete`,i)},js={create:(e,n)=>Le.post(`/events/${e}/notes`,n),getByEvent:e=>Le.get(`/events/${e}/notes`),getById:(e,n)=>Le.get(`/events/${e}/notes/${n}`),update:(e,n,i)=>Le.put(`/events/${e}/notes/${n}`,i),delete:(e,n)=>Le.delete(`/events/${e}/notes/${n}`),getMarshalNotes:(e,n)=>Le.get(`/events/${e}/marshals/${n}/notes`),getMyNotes:e=>Le.get(`/events/${e}/my-notes`)},xi={create:(e,n)=>Le.post(`/events/${e}/contacts`,n),getByEvent:e=>Le.get(`/events/${e}/contacts`),getById:(e,n)=>Le.get(`/events/${e}/contacts/${n}`),update:(e,n,i)=>Le.put(`/events/${e}/contacts/${n}`,i),delete:(e,n)=>Le.delete(`/events/${e}/contacts/${n}`),getRoles:e=>Le.get(`/events/${e}/contact-roles`),getMarshalContacts:(e,n)=>Le.get(`/events/${e}/marshals/${n}/contacts`),getMyContacts:e=>Le.get(`/events/${e}/my-contacts`)},Cr=Yl("auth",()=>{const e=O(localStorage.getItem("adminEmail")||null),n=O(!!e.value),i=O(!1);return{adminEmail:e,isAuthenticated:n,loginPending:i,requestLogin:async u=>{const h=await as.requestLogin(u);return h.data.success&&(i.value=!0),h.data},verifyToken:async u=>{const h=await as.verifyToken(u);return h.data.success&&(e.value=h.data.person?.email,n.value=!0,i.value=!1,localStorage.setItem("adminEmail",h.data.person?.email),localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},instantLogin:async u=>{const h=await as.instantLogin(u);return h.data.success&&(e.value=h.data.email,n.value=!0,localStorage.setItem("adminEmail",h.data.email),h.data.sessionToken&&localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},logout:async()=>{try{await as.logout()}catch{}e.value=null,n.value=!1,i.value=!1,localStorage.removeItem("adminEmail"),localStorage.removeItem("sessionToken")}}}),hy={class:"admin-login"},fy={class:"login-card"},py={key:0,class:"email-sent"},my={class:"form-group"},vy=["disabled"],_y={key:0,class:"error"},gy={__name:"AdminLogin",setup(e){const n=Cr(),i=O(""),a=O(!1),s=O(null),r=O(!1),l=async()=>{a.value=!0,s.value=null;try{const h=await n.requestLogin(i.value);h.success?r.value=!0:s.value=h.message||"Failed to send login link. Please try again."}catch{s.value="Failed to send login link. Please try again."}finally{a.value=!1}},u=()=>{i.value="",r.value=!1,s.value=null};return(h,p)=>{const m=hr("router-link");return y(),k("div",hy,[d("div",fy,[p[7]||(p[7]=d("h2",null,"Admin Login",-1)),r.value?(y(),k("div",py,[p[2]||(p[2]=d("div",{class:"check-icon"},"",-1)),p[3]||(p[3]=d("h3",null,"Check your email!",-1)),d("p",null,[p[1]||(p[1]=Oe("We've sent a login link to ",-1)),d("strong",null,M(i.value),1)]),p[4]||(p[4]=d("p",{class:"hint"},"The link will expire in 15 minutes.",-1)),d("button",{onClick:u,class:"btn btn-secondary"}," Use a different email ")])):(y(),k(me,{key:1},[p[5]||(p[5]=d("p",{class:"instruction"},"Enter your email to receive a login link",-1)),d("form",{onSubmit:kt(l,["prevent"])},[d("div",my,[Me(d("input",{"onUpdate:modelValue":p[0]||(p[0]=v=>i.value=v),type:"email",placeholder:"admin@example.com",required:"",class:"form-input"},null,512),[[rt,i.value]])]),d("button",{type:"submit",class:"btn btn-primary",disabled:a.value},M(a.value?"Sending...":"Send login link"),9,vy)],32),s.value?(y(),k("div",_y,M(s.value),1)):V("",!0)],64)),Ae(m,{to:"/",class:"back-link"},{default:Ke(()=>[...p[6]||(p[6]=[Oe(" Back to Home",-1)])]),_:1})])])}}},yy=He(gy,[["__scopeId","data-v-50552d01"]]),by={class:"admin-verify"},ky={class:"verify-card"},wy={key:0,class:"status"},Ly={key:1,class:"status error"},Cy={key:2,class:"status success"},xy={__name:"AdminVerify",setup(e){const n=Zo(),i=Ql(),a=Cr(),s=O(!0),r=O(null);return Rn(async()=>{const l=i.query.token;if(!l){r.value="No login token provided. Please request a new login link.",s.value=!1;return}try{const u=await a.verifyToken(l);u.success?setTimeout(()=>{n.push({name:"AdminDashboard"})},1e3):r.value=u.message||"Invalid or expired login link. Please request a new one."}catch(u){console.error("Verification error:",u),r.value="Failed to verify login. Please try again."}finally{s.value=!1}}),(l,u)=>{const h=hr("router-link");return y(),k("div",by,[d("div",ky,[s.value?(y(),k("div",wy,[...u[0]||(u[0]=[d("div",{class:"spinner"},null,-1),d("h2",null,"Verifying your login...",-1),d("p",null,"Please wait while we confirm your identity.",-1)])])):r.value?(y(),k("div",Ly,[u[2]||(u[2]=d("h2",null,"Login Failed",-1)),d("p",null,M(r.value),1),Ae(h,{to:"/admin/login",class:"btn btn-primary"},{default:Ke(()=>[...u[1]||(u[1]=[Oe(" Try Again ",-1)])]),_:1})])):(y(),k("div",Cy,[...u[3]||(u[3]=[d("h2",null,"Login Successful!",-1),d("p",null,"Redirecting to dashboard...",-1)])]))])])}}},Ey=He(xy,[["__scopeId","data-v-7bb86bfc"]]),Xh=Yl("events",()=>{const e=O([]),n=O(null),i=O([]),a=O([]),s=O(null),r=O(!1),l=O(null),u=async()=>{r.value=!0,l.value=null;try{const I=await Hs.getAll();e.value=I.data}catch(I){throw l.value=I.message,I}finally{r.value=!1}},h=async I=>{r.value=!0,l.value=null;try{const N=await Hs.getById(I);n.value=N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}},p=async I=>{r.value=!0,l.value=null;try{const N=await Hs.create(I);return e.value.push(N.data),N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}},m=async(I,N)=>{r.value=!0,l.value=null;try{const te=await Hs.update(I,N),Z=e.value.findIndex(ne=>ne.id===I);return Z!==-1&&(e.value[Z]=te.data),n.value?.id===I&&(n.value=te.data),te.data}catch(te){throw l.value=te.message,te}finally{r.value=!1}},v=async I=>{r.value=!0,l.value=null;try{await Hs.delete(I),e.value=e.value.filter(N=>N.id!==I)}catch(N){throw l.value=N.message,N}finally{r.value=!1}},g=async I=>{r.value=!0,l.value=null;try{const N=await os.getByEvent(I);i.value=N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}};return{events:e,currentEvent:n,locations:i,assignments:a,eventStatus:s,loading:r,error:l,fetchEvents:u,fetchEvent:h,createEvent:p,updateEvent:m,deleteEvent:v,fetchLocations:g,createLocation:async I=>{r.value=!0,l.value=null;try{const N=await os.create(I);return i.value.push(N.data),N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}},updateLocation:async(I,N,te)=>{r.value=!0,l.value=null;try{const Z=await os.update(I,N,te),ne=i.value.findIndex(ge=>ge.id===N);return ne!==-1&&(i.value[ne]=Z.data),Z.data}catch(Z){throw l.value=Z.message,Z}finally{r.value=!1}},deleteLocation:async(I,N)=>{r.value=!0,l.value=null;try{await os.delete(I,N),i.value=i.value.filter(te=>te.id!==N)}catch(te){throw l.value=te.message,te}finally{r.value=!1}},bulkUpdateLocationTimes:async(I,N)=>{r.value=!0,l.value=null;try{const te=await os.bulkUpdateTimes(I,N);return await g(I),te.data}catch(te){throw l.value=te.message,te}finally{r.value=!1}},fetchAssignments:async I=>{r.value=!0,l.value=null;try{const N=await Ei.getByEvent(I);a.value=N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}},createAssignment:async I=>{r.value=!0,l.value=null;try{const N=await Ei.create(I);return a.value.push(N.data),N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}},deleteAssignment:async(I,N)=>{r.value=!0,l.value=null;try{await Ei.delete(I,N),a.value=a.value.filter(te=>te.id!==N)}catch(te){throw l.value=te.message,te}finally{r.value=!1}},fetchEventStatus:async I=>{r.value=!0,l.value=null;try{const N=await Ei.getEventStatus(I);return s.value=N.data,N.data}catch(N){throw l.value=N.message,N}finally{r.value=!1}},updateAssignmentCheckIn:I=>{const N=a.value.findIndex(te=>te.id===I.id);N!==-1&&(a.value[N]=I),s.value&&s.value.locations.forEach(te=>{const Z=te.assignments.findIndex(ne=>ne.id===I.id);Z!==-1&&(te.assignments[Z]=I,te.checkedInCount=te.assignments.filter(ne=>ne.isCheckedIn).length)})}}}),Ty={class:"confirm-modal"},Sy={class:"confirm-actions"},Iy={__name:"ConfirmModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm"},message:{type:String,required:!0},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const i=n,a=()=>{i("confirm")},s=()=>{i("cancel")};return(r,l)=>e.show?(y(),k("div",{key:0,class:"modal-overlay",onClick:kt(s,["self"])},[d("div",Ty,[d("h3",null,M(e.title),1),d("p",null,M(e.message),1),d("div",Sy,[d("button",{onClick:s,class:"btn btn-secondary"},M(e.cancelText),1),d("button",{onClick:a,class:"btn btn-primary"},M(e.confirmText),1)])])])):V("",!0)}},xr=He(Iy,[["__scopeId","data-v-4bd2c256"]]),My={class:"base-modal-header"},Ay={key:0,class:"base-modal-title"},Py={key:0,class:"base-modal-tab-header"},$y={class:"base-modal-body"},Dy={key:1,class:"base-modal-footer"},Oy={key:0,class:"base-modal-actions"},Ry={__name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:""},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},variant:{type:String,default:"center",validator:e=>["center","sidebar"].includes(e)},zIndex:{type:Number,default:1e3},closeOnOverlay:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},confirmOnClose:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=e,a=n,s=O(!1),r=O(!1),l=()=>{i.closeOnOverlay&&u()},u=()=>{i.confirmOnClose&&i.isDirty?s.value=!0:a("close")},h=()=>{s.value=!1,a("close")},p=()=>{s.value=!1};return(m,v)=>e.show?(y(),k("div",{key:0,class:"base-modal-overlay",style:Gt({zIndex:e.zIndex}),onClick:kt(l,["self"])},[d("div",{class:Fe(["base-modal",[`base-modal--${e.size}`,`base-modal--${e.variant}`]])},[d("div",My,[_o(m.$slots,"header",{},()=>[e.title?(y(),k("h2",Ay,M(e.title),1)):V("",!0)]),e.showCloseButton?(y(),k("button",{key:0,onClick:u,class:"base-modal-close",type:"button","aria-label":"Close"},"  ")):V("",!0)]),m.$slots["tab-header"]?(y(),k("div",Py,[_o(m.$slots,"tab-header",{},void 0)])):V("",!0),d("div",$y,[_o(m.$slots,"default",{},void 0)]),m.$slots.footer||m.$slots.actions?(y(),k("div",Dy,[_o(m.$slots,"footer",{},()=>[m.$slots.actions?(y(),k("div",Oy,[_o(m.$slots,"actions",{},void 0,!0)])):V("",!0)])])):V("",!0)],2),e.confirmOnClose&&!r.value?(y(),it(xr,{key:0,show:s.value,title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to close?",onConfirm:h,onCancel:p},null,8,["show"])):V("",!0)],4)):V("",!0)}},Ot=He(Ry,[["__scopeId","data-v-45873bc7"]]);function Qh(e="details",n=[]){const i=O(e),a=v=>{i.value=v},s=()=>{i.value=e},r=v=>i.value===v,l=de(()=>n.length===0?-1:n.indexOf(i.value)),u=(v=!1)=>{if(n.length===0)return;const g=l.value;if(g===-1)return;const w=g+1;w<n.length?i.value=n[w]:v&&(i.value=n[0])},h=(v=!1)=>{if(n.length===0)return;const g=l.value;if(g===-1)return;const w=g-1;w>=0?i.value=n[w]:v&&(i.value=n[n.length-1])},p=de(()=>{if(n.length===0)return!1;const v=l.value;return v!==-1&&v<n.length-1}),m=de(()=>n.length===0?!1:l.value>0);return{activeTab:i,activeTabIndex:l,hasNextTab:p,hasPreviousTab:m,switchTab:a,resetTab:s,isActiveTab:r,nextTab:u,previousTab:h}}const ef=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEDT/AEST)"}],Ny={class:"tabs"},By={class:"tab-content"},Fy={class:"form-group"},zy={class:"form-group"},Uy={class:"form-group"},Hy={class:"form-group"},Vy=["value"],Zy={class:"tab-content"},qy={class:"emergency-contacts-section"},jy={key:0,class:"empty-state"},Wy={class:"card-header"},Gy=["onClick"],Ky={class:"form-group"},Yy=["onUpdate:modelValue"],Jy={class:"form-group"},Xy=["onUpdate:modelValue"],Qy={class:"form-group"},eb=["onUpdate:modelValue"],tb={__name:"EventFormModal",props:{show:{type:Boolean,default:!1},eventData:{type:Object,default:()=>({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]})},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:n}){const i=e,a=n,{activeTab:s,switchTab:r,resetTab:l}=Qh("basic",["basic","emergency"]),u=O({...i.eventData});Ye(()=>i.eventData,g=>{u.value={...g},u.value.emergencyContacts||(u.value.emergencyContacts=[])},{deep:!0}),Ye(()=>i.show,g=>{g&&l()});const h=()=>{u.value.emergencyContacts.push({name:"",phone:"",details:""})},p=g=>{u.value.emergencyContacts.splice(g,1)},m=()=>{a("submit",{...u.value})},v=()=>{a("close")};return(g,w)=>(y(),it(Ot,{show:e.show,title:e.isEditing?"Edit Event":"Create New Event",size:"large",onClose:v},{"tab-header":Ke(()=>[d("div",Ny,[d("button",{type:"button",onClick:w[0]||(w[0]=E=>W(r)("basic")),class:Fe(["tab-button",{active:W(s)==="basic"}])}," Basic Details ",2),d("button",{type:"button",onClick:w[1]||(w[1]=E=>W(r)("emergency")),class:Fe(["tab-button",{active:W(s)==="emergency"}])}," Emergency Contacts ",2)])]),actions:Ke(()=>[d("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:m,class:"btn btn-primary"},M(e.isEditing?"Update":"Create"),1)]),default:Ke(()=>[d("form",{onSubmit:kt(m,["prevent"])},[Me(d("div",By,[d("div",Fy,[w[6]||(w[6]=d("label",null,"Event Name *",-1)),Me(d("input",{"onUpdate:modelValue":w[2]||(w[2]=E=>u.value.name=E),type:"text",required:"",class:"form-input"},null,512),[[rt,u.value.name]])]),d("div",zy,[w[7]||(w[7]=d("label",null,"Description",-1)),Me(d("textarea",{"onUpdate:modelValue":w[3]||(w[3]=E=>u.value.description=E),rows:"3",class:"form-input"},null,512),[[rt,u.value.description]])]),d("div",Uy,[w[8]||(w[8]=d("label",null,"Event Date *",-1)),Me(d("input",{"onUpdate:modelValue":w[4]||(w[4]=E=>u.value.eventDate=E),type:"datetime-local",required:"",class:"form-input"},null,512),[[rt,u.value.eventDate]])]),d("div",Hy,[w[9]||(w[9]=d("label",null,"Time Zone *",-1)),Me(d("select",{"onUpdate:modelValue":w[5]||(w[5]=E=>u.value.timeZoneId=E),required:"",class:"form-input"},[(y(!0),k(me,null,Pe(W(ef),E=>(y(),k("option",{key:E.value,value:E.value},M(E.label),9,Vy))),128))],512),[[nn,u.value.timeZoneId]])])],512),[[Es,W(s)==="basic"]]),Me(d("div",Zy,[d("div",qy,[d("div",{class:"section-header-small"},[w[10]||(w[10]=d("h3",null,"Emergency Contacts",-1)),d("button",{type:"button",onClick:h,class:"btn btn-small btn-primary"}," + Add Contact ")]),u.value.emergencyContacts.length===0?(y(),k("div",jy,[...w[11]||(w[11]=[d("p",null,'No emergency contacts added yet. Click "Add Contact" to add one.',-1)])])):V("",!0),(y(!0),k(me,null,Pe(u.value.emergencyContacts,(E,A)=>(y(),k("div",{key:A,class:"emergency-contact-card"},[d("div",Wy,[d("h4",null,"Contact "+M(A+1),1),d("button",{type:"button",onClick:P=>p(A),class:"btn-remove"},"  ",8,Gy)]),d("div",Ky,[w[12]||(w[12]=d("label",null,"Name *",-1)),Me(d("input",{"onUpdate:modelValue":P=>E.name=P,type:"text",required:"",class:"form-input",placeholder:"Contact person name"},null,8,Yy),[[rt,E.name]])]),d("div",Jy,[w[13]||(w[13]=d("label",null,"Phone *",-1)),Me(d("input",{"onUpdate:modelValue":P=>E.phone=P,type:"tel",required:"",class:"form-input",placeholder:"+1 (555) 123-4567"},null,8,Xy),[[rt,E.phone]])]),d("div",Qy,[w[14]||(w[14]=d("label",null,"Additional Details",-1)),Me(d("textarea",{"onUpdate:modelValue":P=>E.details=P,rows:"2",class:"form-input",placeholder:"Role, availability, or other important information..."},null,8,eb),[[rt,E.details]])])]))),128))])],512),[[Es,W(s)==="emergency"]])],32)]),_:1},8,["show","title"]))}},nb=He(tb,[["__scopeId","data-v-35885c7a"]]),sb={class:"admin-dashboard"},ib={class:"header"},ob={class:"header-actions"},ab={class:"user-email"},rb={class:"container"},lb={class:"section"},cb={class:"section-header"},ub={key:0,class:"loading"},db={key:1,class:"empty"},hb={key:2,class:"events-grid"},fb=["onClick"],pb={class:"event-date"},mb={class:"event-desc"},vb={class:"event-actions"},_b=["onClick"],gb=["onClick"],yb={__name:"AdminDashboard",setup(e){const n=Zo(),i=Cr(),a=Xh(),s=O(!0),r=O(!1),l=O(null),u=O({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}),h=O([]),p=O(!1),m=O(""),v=O(""),g=O(null),w=async()=>{s.value=!0;try{await a.fetchEvents(),h.value=a.events}catch(Z){console.error("Failed to load events:",Z)}finally{s.value=!1}},E=async Z=>{try{const ne={...Z,adminEmail:i.adminEmail};l.value?await a.updateEvent(l.value.id,ne):await a.createEvent(ne),h.value=a.events,b()}catch(ne){console.error("Failed to save event:",ne),alert("Failed to save event. Please try again.")}},A=Z=>{l.value=Z,u.value={name:Z.name,description:Z.description,eventDate:te(Z.eventDate),timeZoneId:Z.timeZoneId||"UTC",emergencyContacts:Z.emergencyContacts?JSON.parse(JSON.stringify(Z.emergencyContacts)):[]}},P=async Z=>{m.value="Delete Event",v.value=`Are you sure you want to delete "${Z.name}"?`,g.value=async()=>{try{await a.deleteEvent(Z.id),h.value=a.events}catch(ne){console.error("Failed to delete event:",ne),alert("Failed to delete event. Please try again.")}},p.value=!0},x=()=>{p.value=!1,g.value&&(g.value(),g.value=null)},$=()=>{p.value=!1,g.value=null},b=()=>{r.value=!1,l.value=null,u.value={name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}},S=Z=>{if(!Z){console.error("Cannot navigate to event: eventId is undefined");return}n.push({name:"AdminEventManage",params:{eventId:Z}})},T=()=>{n.push({name:"AdminProfile"})},I=()=>{i.logout(),n.push({name:"Home"})},N=Z=>new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),te=Z=>{const ne=new Date(Z),ge=ne.getFullYear(),xe=String(ne.getMonth()+1).padStart(2,"0"),ze=String(ne.getDate()).padStart(2,"0"),pe=String(ne.getHours()).padStart(2,"0"),$e=String(ne.getMinutes()).padStart(2,"0");return`${ge}-${xe}-${ze}T${pe}:${$e}`};return Rn(()=>{w()}),(Z,ne)=>(y(),k("div",sb,[d("header",ib,[ne[1]||(ne[1]=d("h1",null,"Admin Dashboard",-1)),d("div",ob,[d("span",ab,M(W(i).adminEmail),1),d("button",{onClick:T,class:"btn btn-secondary"},"Profile"),d("button",{onClick:I,class:"btn btn-secondary"},"Logout")])]),d("div",rb,[d("div",lb,[d("div",cb,[ne[2]||(ne[2]=d("h2",null,"Your Events",-1)),d("button",{onClick:ne[0]||(ne[0]=ge=>r.value=!0),class:"btn btn-primary"}," Create New Event ")]),s.value?(y(),k("div",ub,"Loading events...")):h.value.length===0?(y(),k("div",db,[...ne[3]||(ne[3]=[d("p",null,"No events yet. Create your first event to get started!",-1)])])):(y(),k("div",hb,[(y(!0),k(me,null,Pe(h.value,ge=>(y(),k("div",{key:ge.id,class:"event-card",onClick:xe=>S(ge.id)},[d("h3",null,M(ge.name),1),d("p",pb,M(N(ge.eventDate)),1),d("p",mb,M(ge.description),1),d("div",vb,[d("button",{onClick:kt(xe=>A(ge),["stop"]),class:"btn btn-small btn-secondary"}," Edit ",8,_b),d("button",{onClick:kt(xe=>P(ge),["stop"]),class:"btn btn-small btn-danger"}," Delete ",8,gb)])],8,fb))),128))]))])]),Ae(nb,{show:r.value||!!l.value,eventData:u.value,isEditing:!!l.value,onClose:b,onSubmit:E},null,8,["show","eventData","isEditing"]),Ae(xr,{show:p.value,title:m.value,message:v.value,onConfirm:x,onCancel:$},null,8,["show","title","message"])]))}},bb=He(yb,[["__scopeId","data-v-c2726116"]]),kb=Yl("profile",()=>{const e=O(null),n=O(!1),i=O(null);return{profile:e,loading:n,error:i,fetchProfile:async()=>{n.value=!0,i.value=null;try{const h=await Ma.getProfile();return e.value=h.data,h.data}catch(h){throw i.value=h.response?.data?.message||"Failed to load profile",h}finally{n.value=!1}},updateProfile:async h=>{n.value=!0,i.value=null;try{const p=await Ma.updateProfile(h);return e.value=p.data,p.data}catch(p){throw i.value=p.response?.data?.message||"Failed to update profile",p}finally{n.value=!1}},fetchPerson:async(h,p)=>{n.value=!0,i.value=null;try{return(await Ma.getPerson(h,p)).data}catch(m){throw i.value=m.response?.data?.message||"Failed to load person",m}finally{n.value=!1}},updatePerson:async(h,p,m)=>{n.value=!0,i.value=null;try{return(await Ma.updatePerson(h,p,m)).data}catch(v){throw i.value=v.response?.data?.message||"Failed to update person",v}finally{n.value=!1}},clearProfile:()=>{e.value=null,i.value=null}}}),wb={class:"form-group"},Lb={class:"form-group"},Cb={class:"form-group"},xb={__name:"EditProfileModal",props:{show:{type:Boolean,default:!1},profile:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O({name:"",email:"",phone:""});Ye(()=>i.profile,h=>{h&&(s.value={name:h.name||"",email:h.email||"",phone:h.phone||""})},{immediate:!0,deep:!0}),Ye(()=>i.show,h=>{h&&i.profile&&(s.value={name:i.profile.name||"",email:i.profile.email||"",phone:i.profile.phone||""})});const r=()=>{a("update:isDirty",!0)},l=()=>{if(!s.value.name.trim()){alert("Name is required");return}if(!s.value.email.trim()){alert("Email is required");return}a("submit",{name:s.value.name.trim(),email:s.value.email.trim(),phone:s.value.phone?.trim()||""})},u=()=>{a("close")};return(h,p)=>(y(),it(Ot,{show:e.show,title:"Edit Profile",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:u},{actions:Ke(()=>[d("button",{type:"button",onClick:u,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:l,class:"btn btn-primary"}," Save changes ")]),default:Ke(()=>[d("form",{onSubmit:kt(l,["prevent"])},[d("div",wb,[p[3]||(p[3]=d("label",null,"Name *",-1)),Me(d("input",{"onUpdate:modelValue":p[0]||(p[0]=m=>s.value.name=m),type:"text",required:"",class:"form-input",placeholder:"Your name",onInput:r},null,544),[[rt,s.value.name]])]),d("div",Lb,[p[4]||(p[4]=d("label",null,"Email *",-1)),Me(d("input",{"onUpdate:modelValue":p[1]||(p[1]=m=>s.value.email=m),type:"email",required:"",class:"form-input",placeholder:"Your email address",onInput:r},null,544),[[rt,s.value.email]])]),d("div",Cb,[p[5]||(p[5]=d("label",null,"Phone",-1)),Me(d("input",{"onUpdate:modelValue":p[2]||(p[2]=m=>s.value.phone=m),type:"tel",class:"form-input",placeholder:"Your phone number",onInput:r},null,544),[[rt,s.value.phone]])])],32)]),_:1},8,["show","is-dirty"]))}},Eb=He(xb,[["__scopeId","data-v-2ce1a930"]]),Tb={class:"admin-profile"},Sb={class:"header"},Ib={class:"header-actions"},Mb={class:"user-email"},Ab={class:"container"},Pb={class:"section"},$b={class:"section-header"},Db={key:0,class:"loading"},Ob={key:1,class:"error"},Rb={key:2,class:"profile-details"},Nb={class:"profile-field"},Bb={class:"field-value"},Fb={class:"profile-field"},zb={class:"field-value"},Ub={class:"profile-field"},Hb={class:"field-value"},Vb={class:"profile-field"},Zb={class:"field-value"},qb={__name:"AdminProfile",setup(e){const n=Zo(),i=Cr(),a=kb(),s=O(!1),r=async()=>{try{await a.fetchProfile()}catch(p){console.error("Failed to load profile:",p)}},l=async p=>{try{await a.updateProfile(p),s.value=!1}catch(m){console.error("Failed to save profile:",m),alert("Failed to save profile. Please try again.")}},u=()=>{i.logout(),n.push({name:"Home"})},h=()=>{n.push({name:"AdminDashboard"})};return Rn(()=>{r()}),(p,m)=>(y(),k("div",Tb,[d("header",Sb,[m[2]||(m[2]=d("h1",null,"My Profile",-1)),d("div",Ib,[d("span",Mb,M(W(i).adminEmail),1),d("button",{onClick:u,class:"btn btn-secondary"},"Logout")])]),d("div",Ab,[d("div",Pb,[d("div",$b,[m[3]||(m[3]=d("h2",null,"Profile Information",-1)),d("button",{onClick:m[0]||(m[0]=v=>s.value=!0),class:"btn btn-primary"}," Edit Profile ")]),W(a).loading?(y(),k("div",Db,"Loading profile...")):W(a).error?(y(),k("div",Ob,[d("p",null,M(W(a).error),1),d("button",{onClick:r,class:"btn btn-secondary"},"Retry")])):W(a).profile?(y(),k("div",Rb,[d("div",Nb,[m[4]||(m[4]=d("label",null,"Name",-1)),d("div",Bb,M(W(a).profile.name||""),1)]),d("div",Fb,[m[5]||(m[5]=d("label",null,"Email",-1)),d("div",zb,M(W(a).profile.email||""),1)]),d("div",Ub,[m[6]||(m[6]=d("label",null,"Phone",-1)),d("div",Hb,M(W(a).profile.phone||""),1)]),d("div",Vb,[m[7]||(m[7]=d("label",null,"System Admin",-1)),d("div",Zb,[d("span",{class:Fe(["badge",W(a).profile.isSystemAdmin?"badge-success":"badge-secondary"])},M(W(a).profile.isSystemAdmin?"Yes":"No"),3)])])])):V("",!0)]),d("div",{class:"section"},[d("button",{onClick:h,class:"btn btn-secondary"}," Back to Dashboard ")])]),Ae(Eb,{show:s.value,profile:W(a).profile,onClose:m[1]||(m[1]=v=>s.value=!1),onSubmit:l},null,8,["show","profile"])]))}},jb=He(qb,[["__scopeId","data-v-e8d20355"]]);function Wb(){const e=O(!1),n=O(""),i=O(""),a=O(null);return{showConfirmModal:e,confirmModalTitle:n,confirmModalMessage:i,showConfirm:(h,p,m)=>{n.value=h,i.value=p,a.value=m,e.value=!0},handleConfirmModalConfirm:()=>{e.value=!1,a.value&&(a.value(),a.value=null)},handleConfirmModalCancel:()=>{e.value=!1,a.value=null},closeConfirmModal:()=>{e.value=!1,a.value=null}}}const Ua=O({people:"Marshals",checkpoint:"Checkpoints",area:"Areas",checklist:"Checklists"}),Ku={people:{People:{singular:"Person",plural:"People"},Marshals:{singular:"Marshal",plural:"Marshals"},Volunteers:{singular:"Volunteer",plural:"Volunteers"},Helpers:{singular:"Helper",plural:"Helpers"},Staff:{singular:"Staff member",plural:"Staff"},Stewards:{singular:"Steward",plural:"Stewards"}},checkpoint:{Checkpoints:{singular:"Checkpoint",plural:"Checkpoints"},Stations:{singular:"Station",plural:"Stations"},Locations:{singular:"Location",plural:"Locations"}},area:{Areas:{singular:"Area",plural:"Areas"},Regions:{singular:"Region",plural:"Regions"},Zones:{singular:"Zone",plural:"Zones"}},checklist:{Checklists:{singular:"Checklist",plural:"Checklists"},Tasks:{singular:"Task",plural:"Tasks"}}},Aa={people:["Helpers","Marshals","People","Staff","Stewards","Volunteers"],checkpoint:["Checkpoints","Locations","Stations"],area:["Areas","Regions","Zones"],checklist:["Checklists","Tasks"]};function tf(e){e&&(Ua.value={people:e.peopleTerm||"Marshals",checkpoint:e.checkpointTerm||"Checkpoints",area:e.areaTerm||"Areas",checklist:e.checklistTerm||"Checklists"})}const Xn=e=>e.toLowerCase(),Qn=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function Rt(){const e=m=>{const v=Ua.value[m];return Ku[m]?.[v]?.singular||v},n=m=>{const v=Ua.value[m];return Ku[m]?.[v]?.plural||v},i=de(()=>({person:e("people"),checkpoint:e("checkpoint"),area:e("area"),checklist:e("checklist"),people:n("people"),checkpoints:n("checkpoint"),areas:n("area"),checklists:n("checklist")})),a=de(()=>({person:Xn(e("people")),checkpoint:Xn(e("checkpoint")),area:Xn(e("area")),checklist:Xn(e("checklist")),people:Xn(n("people")),checkpoints:Xn(n("checkpoint")),areas:Xn(n("area")),checklists:Xn(n("checklist"))})),s=de(()=>({person:Qn(e("people")),checkpoint:Qn(e("checkpoint")),area:Qn(e("area")),checklist:Qn(e("checklist")),people:Qn(n("people")),checkpoints:Qn(n("checkpoint")),areas:Qn(n("area")),checklists:Qn(n("checklist"))})),r=de(()=>({course:"Course",checkpoints:i.value.checkpoints,areas:i.value.areas,marshals:i.value.people,checklists:i.value.checklists,notes:"Notes",details:"Event details"}));return{terms:i,termsLower:a,termsSentence:s,tabLabels:r,singular:e,plural:n,formatCount:(m,v)=>v===1?`1 ${e(m)}`:`${v} ${n(m)}`,lower:(m,v=!0)=>Xn(v?n(m):e(m)),title:(m,v=!0)=>v?n(m):e(m),sentence:(m,v=!0)=>Qn(v?n(m):e(m)),terminology:Ua}}const Gb=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Xa=e=>{if(!e)return"";const n=new Date(e),i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return`${i}-${a}-${s}T${r}:${l}`},Qa=e=>{if(!e||e.trim()==="")return!0;if(!/^[a-z]{1,20}[./][a-z]{1,20}[./][a-z]{1,20}$/.test(e))return!1;const i=e.includes("."),a=e.includes("/");return i!==a};function Kb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lo={exports:{}};var Yb=Lo.exports,Yu;function Jb(){return Yu||(Yu=1,(function(e,n){(function(i,a){a(n)})(Yb,(function(i){var a="1.9.4";function s(t){var o,c,f,_;for(c=1,f=arguments.length;c<f;c++){_=arguments[c];for(o in _)t[o]=_[o]}return t}var r=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function l(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var f=c.call(arguments,2);return function(){return t.apply(o,f.length?f.concat(c.call(arguments)):arguments)}}var u=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++u),t._leaflet_id}function p(t,o,c){var f,_,C,F;return F=function(){f=!1,_&&(C.apply(c,_),_=!1)},C=function(){f?_=arguments:(t.apply(c,arguments),setTimeout(F,o),f=!0)},C}function m(t,o,c){var f=o[1],_=o[0],C=f-_;return t===f&&c?t:((t-_)%C+C)%C+_}function v(){return!1}function g(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function E(t){return w(t).split(/\s+/)}function A(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function P(t,o,c){var f=[];for(var _ in t)f.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(t[_]));return(!o||o.indexOf("?")===-1?"?":"&")+f.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function $(t,o){return t.replace(x,function(c,f){var _=o[f];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(o)),_})}var b=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function S(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var N=0;function te(t){var o=+new Date,c=Math.max(0,16-(o-N));return N=o+c,window.setTimeout(t,c)}var Z=window.requestAnimationFrame||I("RequestAnimationFrame")||te,ne=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ge(t,o,c){if(c&&Z===te)t.call(o);else return Z.call(window,l(t,o))}function xe(t){t&&ne.call(window,t)}var ze={__proto__:null,extend:s,create:r,bind:l,get lastId(){return u},stamp:h,throttle:p,wrapNum:m,falseFn:v,formatNum:g,trim:w,splitWords:E,setOptions:A,getParamString:P,template:$,isArray:b,indexOf:S,emptyImageUrl:T,requestFn:Z,cancelFn:ne,requestAnimFrame:ge,cancelAnimFrame:xe};function pe(){}pe.extend=function(t){var o=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,f=r(c);f.constructor=o,o.prototype=f;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(o[_]=this[_]);return t.statics&&s(o,t.statics),t.includes&&($e(t.includes),s.apply(null,[f].concat(t.includes))),s(f,t),delete f.statics,delete f.includes,f.options&&(f.options=c.options?r(c.options):{},s(f.options,t.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,F=f._initHooks.length;C<F;C++)f._initHooks[C].call(this)}},o},pe.include=function(t){var o=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},pe.mergeOptions=function(t){return s(this.prototype.options,t),this},pe.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function $e(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=b(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ce={on:function(t,o,c){if(typeof t=="object")for(var f in t)this._on(f,t[f],o);else{t=E(t);for(var _=0,C=t.length;_<C;_++)this._on(t[_],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var f in t)this._off(f,t[f],o);else{t=E(t);for(var _=arguments.length===1,C=0,F=t.length;C<F;C++)_?this._off(t[C]):this._off(t[C],o,c)}return this},_on:function(t,o,c,f){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var _={fn:o,ctx:c};f&&(_.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(_)}},_off:function(t,o,c){var f,_,C;if(this._events&&(f=this._events[t],!!f)){if(arguments.length===1){if(this._firingCount)for(_=0,C=f.length;_<C;_++)f[_].fn=v;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var F=this._listens(t,o,c);if(F!==!1){var Y=f[F];this._firingCount&&(Y.fn=v,this._events[t]=f=f.slice()),f.splice(F,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var f=s({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var _=this._events[t];if(_){this._firingCount=this._firingCount+1||1;for(var C=0,F=_.length;C<F;C++){var Y=_[C],Q=Y.fn;Y.once&&this.off(t,Q,Y.ctx),Q.call(Y.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(t,o,c,f){typeof t!="string"&&console.warn('"string" type argument expected');var _=o;typeof o!="function"&&(f=!!o,_=void 0,c=void 0);var C=this._events&&this._events[t];if(C&&C.length&&this._listens(t,_,c)!==!1)return!0;if(f){for(var F in this._eventParents)if(this._eventParents[F].listens(t,o,c,f))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var f=this._events[t]||[];if(!o)return!!f.length;c===this&&(c=void 0);for(var _=0,C=f.length;_<C;_++)if(f[_].fn===o&&f[_].ctx===c)return _;return!1},once:function(t,o,c){if(typeof t=="object")for(var f in t)this._on(f,t[f],o,!0);else{t=E(t);for(var _=0,C=t.length;_<C;_++)this._on(t[_],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};Ce.addEventListener=Ce.on,Ce.removeEventListener=Ce.clearAllEventListeners=Ce.off,Ce.addOneTimeEventListener=Ce.once,Ce.fireEvent=Ce.fire,Ce.hasEventListeners=Ce.listens;var Ee=pe.extend(Ce);function K(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var G=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(t){return this.clone()._add(U(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(U(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new K(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new K(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(t){t=U(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=U(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=U(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function U(t,o,c){return t instanceof K?t:b(t)?new K(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new K(t.x,t.y):new K(t,o,c)}function re(t,o){if(t)for(var c=o?[t,o]:t,f=0,_=c.length;f<_;f++)this.extend(c[f])}re.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof K||typeof t[0]=="number"||"x"in t)o=c=U(t);else if(t=we(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof K?t=U(t):t=we(t),t instanceof re?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=we(t);var o=this.min,c=this.max,f=t.min,_=t.max,C=_.x>=o.x&&f.x<=c.x,F=_.y>=o.y&&f.y<=c.y;return C&&F},overlaps:function(t){t=we(t);var o=this.min,c=this.max,f=t.min,_=t.max,C=_.x>o.x&&f.x<c.x,F=_.y>o.y&&f.y<c.y;return C&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,f=Math.abs(o.x-c.x)*t,_=Math.abs(o.y-c.y)*t;return we(U(o.x-f,o.y-_),U(c.x+f,c.y+_))},equals:function(t){return t?(t=we(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function we(t,o){return!t||t instanceof re?t:new re(t,o)}function De(t,o){if(t)for(var c=o?[t,o]:t,f=0,_=c.length;f<_;f++)this.extend(c[f])}De.prototype={extend:function(t){var o=this._southWest,c=this._northEast,f,_;if(t instanceof qe)f=t,_=t;else if(t instanceof De){if(f=t._southWest,_=t._northEast,!f||!_)return this}else return t?this.extend(Se(t)||Ue(t)):this;return!o&&!c?(this._southWest=new qe(f.lat,f.lng),this._northEast=new qe(_.lat,_.lng)):(o.lat=Math.min(f.lat,o.lat),o.lng=Math.min(f.lng,o.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,f=Math.abs(o.lat-c.lat)*t,_=Math.abs(o.lng-c.lng)*t;return new De(new qe(o.lat-f,o.lng-_),new qe(c.lat+f,c.lng+_))},getCenter:function(){return new qe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new qe(this.getNorth(),this.getWest())},getSouthEast:function(){return new qe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof qe||"lat"in t?t=Se(t):t=Ue(t);var o=this._southWest,c=this._northEast,f,_;return t instanceof De?(f=t.getSouthWest(),_=t.getNorthEast()):f=_=t,f.lat>=o.lat&&_.lat<=c.lat&&f.lng>=o.lng&&_.lng<=c.lng},intersects:function(t){t=Ue(t);var o=this._southWest,c=this._northEast,f=t.getSouthWest(),_=t.getNorthEast(),C=_.lat>=o.lat&&f.lat<=c.lat,F=_.lng>=o.lng&&f.lng<=c.lng;return C&&F},overlaps:function(t){t=Ue(t);var o=this._southWest,c=this._northEast,f=t.getSouthWest(),_=t.getNorthEast(),C=_.lat>o.lat&&f.lat<c.lat,F=_.lng>o.lng&&f.lng<c.lng;return C&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=Ue(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ue(t,o){return t instanceof De?t:new De(t,o)}function qe(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}qe.prototype={equals:function(t,o){if(!t)return!1;t=Se(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+g(this.lat,t)+", "+g(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,Se(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return Ue([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new qe(this.lat,this.lng,this.alt)}};function Se(t,o,c){return t instanceof qe?t:b(t)&&typeof t[0]!="object"?t.length===3?new qe(t[0],t[1],t[2]):t.length===2?new qe(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new qe(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new qe(t,o,c)}var z={latLngToPoint:function(t,o){var c=this.projection.project(t),f=this.scale(o);return this.transformation._transform(c,f)},pointToLatLng:function(t,o){var c=this.scale(o),f=this.transformation.untransform(t,c);return this.projection.unproject(f)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),f=this.transformation.transform(o.min,c),_=this.transformation.transform(o.max,c);return new re(f,_)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?m(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?m(t.lat,this.wrapLat,!0):t.lat,f=t.alt;return new qe(c,o,f)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),f=o.lat-c.lat,_=o.lng-c.lng;if(f===0&&_===0)return t;var C=t.getSouthWest(),F=t.getNorthEast(),Y=new qe(C.lat-f,C.lng-_),Q=new qe(F.lat-f,F.lng-_);return new De(Y,Q)}},q=s({},z,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,f=t.lat*c,_=o.lat*c,C=Math.sin((o.lat-t.lat)*c/2),F=Math.sin((o.lng-t.lng)*c/2),Y=C*C+Math.cos(f)*Math.cos(_)*F*F,Q=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*Q}}),J=6378137,_e={R:J,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,t.lat),-c),_=Math.sin(f*o);return new K(this.R*t.lng*o,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(t){var o=180/Math.PI;return new qe((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=J*Math.PI;return new re([-t,-t],[t,t])})()};function je(t,o,c,f){if(b(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=f}je.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new K((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function D(t,o,c,f){return new je(t,o,c,f)}var B=s({},q,{code:"EPSG:3857",projection:_e,transformation:(function(){var t=.5/(Math.PI*_e.R);return D(t,.5,-t,.5)})()}),j=s({},B,{code:"EPSG:900913"});function se(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function le(t,o){var c="",f,_,C,F,Y,Q;for(f=0,C=t.length;f<C;f++){for(Y=t[f],_=0,F=Y.length;_<F;_++)Q=Y[_],c+=(_?"L":"M")+Q.x+" "+Q.y;c+=o?Be.svg?"z":"x":""}return c||"M0 0"}var ie=document.documentElement.style,ye="ActiveXObject"in window,be=ye&&!document.addEventListener,ve="msLaunchUri"in navigator&&!("documentMode"in document),ce=dn("webkit"),Ie=dn("android"),fe=dn("android 2")||dn("android 3"),ke=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Re=Ie&&dn("Google")&&ke<537&&!("AudioNode"in window),Je=!!window.opera,tt=!ve&&dn("chrome"),Ge=dn("gecko")&&!ce&&!Je&&!ye,Lt=!tt&&dn("safari"),ft=dn("phantom"),yt="OTransition"in ie,nt=navigator.platform.indexOf("Win")===0,xt=ye&&"transition"in ie,ut="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!fe,mt="MozPerspective"in ie,ae=!window.L_DISABLE_3D&&(xt||ut||mt)&&!yt&&!ft,X=typeof orientation<"u"||dn("mobile"),oe=X&&ce,Ne=X&&ut,$t=!window.PointerEvent&&window.MSPointerEvent,an=!!(window.PointerEvent||$t),yn="ontouchstart"in window||!!window.TouchEvent,Qs=!window.L_NO_TOUCH&&(yn||an),Ss=X&&Je,Nn=X&&Ge,ei=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Vi=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return t})(),Ko=(function(){return!!document.createElement("canvas").getContext})(),Is=!!(document.createElementNS&&se("svg").createSVGRect),Bn=!!Is&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ti=!Is&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),Zi=navigator.platform.indexOf("Mac")===0,Yo=navigator.platform.indexOf("Linux")===0;function dn(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Be={ie:ye,ielt9:be,edge:ve,webkit:ce,android:Ie,android23:fe,androidStock:Re,opera:Je,chrome:tt,gecko:Ge,safari:Lt,phantom:ft,opera12:yt,win:nt,ie3d:xt,webkit3d:ut,gecko3d:mt,any3d:ae,mobile:X,mobileWebkit:oe,mobileWebkit3d:Ne,msPointer:$t,pointer:an,touch:Qs,touchNative:yn,mobileOpera:Ss,mobileGecko:Nn,retina:ei,passiveEvents:Vi,canvas:Ko,svg:Is,vml:ti,inlineSvg:Bn,mac:Zi,linux:Yo},Jo=Be.msPointer?"MSPointerDown":"pointerdown",qi=Be.msPointer?"MSPointerMove":"pointermove",Xo=Be.msPointer?"MSPointerUp":"pointerup",Qo=Be.msPointer?"MSPointerCancel":"pointercancel",ji={touchstart:Jo,touchmove:qi,touchend:Xo,touchcancel:Qo},ea={touchstart:Ar,touchmove:ni,touchend:ni,touchcancel:ni},fs={},ta=!1;function Sr(t,o,c){return o==="touchstart"&&sa(),ea[o]?(c=ea[o].bind(this,c),t.addEventListener(ji[o],c,!1),c):(console.warn("wrong event specified:",o),v)}function Ir(t,o,c){if(!ji[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(ji[o],c,!1)}function Et(t){fs[t.pointerId]=t}function Mr(t){fs[t.pointerId]&&(fs[t.pointerId]=t)}function na(t){delete fs[t.pointerId]}function sa(){ta||(document.addEventListener(Jo,Et,!0),document.addEventListener(qi,Mr,!0),document.addEventListener(Xo,na,!0),document.addEventListener(Qo,na,!0),ta=!0)}function ni(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in fs)o.touches.push(fs[c]);o.changedTouches=[o],t(o)}}function Ar(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Nt(o),ni(t,o)}function Ft(t){var o={},c,f;for(f in t)c=t[f],o[f]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var ia=200;function Wi(t,o){t.addEventListener("dblclick",o);var c=0,f;function _(C){if(C.detail!==1){f=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var F=ra(C);if(!(F.some(function(Q){return Q instanceof HTMLLabelElement&&Q.attributes.for})&&!F.some(function(Q){return Q instanceof HTMLInputElement||Q instanceof HTMLSelectElement}))){var Y=Date.now();Y-c<=ia?(f++,f===2&&o(Ft(C))):f=1,c=Y}}}return t.addEventListener("click",_),{dblclick:o,simDblclick:_}}function Gi(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Ms=ai(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fn=ai(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ki=Fn==="webkitTransition"||Fn==="OTransition"?Fn+"End":"transitionend";function si(t){return typeof t=="string"?document.getElementById(t):t}function As(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(t,null);c=f?f[o]:null}return c==="auto"?null:c}function lt(t,o,c){var f=document.createElement(t);return f.className=o||"",c&&c.appendChild(f),f}function vt(t){var o=t.parentNode;o&&o.removeChild(t)}function ii(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ps(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function ms(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Yi(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=oi(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function Xe(t,o){if(t.classList!==void 0)for(var c=E(o),f=0,_=c.length;f<_;f++)t.classList.add(c[f]);else if(!Yi(t,o)){var C=oi(t);Ji(t,(C?C+" ":"")+o)}}function Ct(t,o){t.classList!==void 0?t.classList.remove(o):Ji(t,w((" "+oi(t)+" ").replace(" "+o+" "," ")))}function Ji(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function oi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function en(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Xi(t,o)}function Xi(t,o){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(f)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+f+"(opacity="+o+")"}function ai(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function zn(t,o,c){var f=o||new K(0,0);t.style[Ms]=(Be.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Tt(t,o){t._leaflet_pos=o,Be.any3d?zn(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Un(t){return t._leaflet_pos||new K(0,0)}var Hn,Ps,ri;if("onselectstart"in document)Hn=function(){Qe(window,"selectstart",Nt)},Ps=function(){pt(window,"selectstart",Nt)};else{var $s=ai(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Hn=function(){if($s){var t=document.documentElement.style;ri=t[$s],t[$s]="none"}},Ps=function(){$s&&(document.documentElement.style[$s]=ri,ri=void 0)}}function Qi(){Qe(window,"dragstart",Nt)}function Ds(){pt(window,"dragstart",Nt)}var li,eo;function ci(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ui(),li=t,eo=t.style.outlineStyle,t.style.outlineStyle="none",Qe(window,"keydown",ui))}function ui(){li&&(li.style.outlineStyle=eo,li=void 0,eo=void 0,pt(window,"keydown",ui))}function to(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function no(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var oa={__proto__:null,TRANSFORM:Ms,TRANSITION:Fn,TRANSITION_END:Ki,get:si,getStyle:As,create:lt,remove:vt,empty:ii,toFront:ps,toBack:ms,hasClass:Yi,addClass:Xe,removeClass:Ct,setClass:Ji,getClass:oi,setOpacity:en,testProp:ai,setTransform:zn,setPosition:Tt,getPosition:Un,get disableTextSelection(){return Hn},get enableTextSelection(){return Ps},disableImageDrag:Qi,enableImageDrag:Ds,preventOutline:ci,restoreOutline:ui,getSizedParentNode:to,getScale:no};function Qe(t,o,c,f){if(o&&typeof o=="object")for(var _ in o)io(t,_,o[_],c);else{o=E(o);for(var C=0,F=o.length;C<F;C++)io(t,o[C],c,f)}return this}var hn="_leaflet_events";function pt(t,o,c,f){if(arguments.length===1)aa(t),delete t[hn];else if(o&&typeof o=="object")for(var _ in o)oo(t,_,o[_],c);else if(o=E(o),arguments.length===2)aa(t,function(Y){return S(o,Y)!==-1});else for(var C=0,F=o.length;C<F;C++)oo(t,o[C],c,f);return this}function aa(t,o){for(var c in t[hn]){var f=c.split(/\d/)[0];(!o||o(f))&&oo(t,f,null,null,c)}}var so={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function io(t,o,c,f){var _=o+h(c)+(f?"_"+h(f):"");if(t[hn]&&t[hn][_])return this;var C=function(Y){return c.call(f||t,Y||window.event)},F=C;!Be.touchNative&&Be.pointer&&o.indexOf("touch")===0?C=Sr(t,o,C):Be.touch&&o==="dblclick"?C=Wi(t,C):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(so[o]||o,C,Be.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(C=function(Y){Y=Y||window.event,ao(t,Y)&&F(Y)},t.addEventListener(so[o],C,!1)):t.addEventListener(o,F,!1):t.attachEvent("on"+o,C),t[hn]=t[hn]||{},t[hn][_]=C}function oo(t,o,c,f,_){_=_||o+h(c)+(f?"_"+h(f):"");var C=t[hn]&&t[hn][_];if(!C)return this;!Be.touchNative&&Be.pointer&&o.indexOf("touch")===0?Ir(t,o,C):Be.touch&&o==="dblclick"?Gi(t,C):"removeEventListener"in t?t.removeEventListener(so[o]||o,C,!1):t.detachEvent("on"+o,C),t[hn][_]=null}function Vn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function di(t){return io(t,"wheel",Vn),this}function Os(t){return Qe(t,"mousedown touchstart dblclick contextmenu",Vn),t._leaflet_disable_click=!0,this}function Nt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Zn(t){return Nt(t),Vn(t),this}function ra(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function vs(t,o){if(!o)return new K(t.clientX,t.clientY);var c=no(o),f=c.boundingClientRect;return new K((t.clientX-f.left)/c.x-o.clientLeft,(t.clientY-f.top)/c.y-o.clientTop)}var Pr=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Rs(t){return Be.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Pr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function ao(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var la={__proto__:null,on:Qe,off:pt,stopPropagation:Vn,disableScrollPropagation:di,disableClickPropagation:Os,preventDefault:Nt,stop:Zn,getPropagationPath:ra,getMousePosition:vs,getWheelDelta:Rs,isExternalTarget:ao,addListener:Qe,removeListener:pt},hi=Ee.extend({run:function(t,o,c,f){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Un(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ge(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),Tt(this._el,c),this.fire("step")},_complete:function(){xe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ot=Ee.extend({options:{crs:B,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=A(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Se(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fn&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Qe(this._proxy,Ki,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(Se(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var f=this.getZoomScale(o),_=this.getSize().divideBy(2),C=t instanceof K?t:this.latLngToContainerPoint(t),F=C.subtract(_).multiplyBy(1-1/f),Y=this.containerPointToLatLng(_.add(F));return this.setView(Y,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():Ue(t);var c=U(o.paddingTopLeft||o.padding||[0,0]),f=U(o.paddingBottomRight||o.padding||[0,0]),_=this.getBoundsZoom(t,!1,c.add(f));if(_=typeof o.maxZoom=="number"?Math.min(o.maxZoom,_):_,_===1/0)return{center:t.getCenter(),zoom:_};var C=f.subtract(c).divideBy(2),F=this.project(t.getSouthWest(),_),Y=this.project(t.getNorthEast(),_),Q=this.unproject(F.add(Y).divideBy(2).add(C),_);return{center:Q,zoom:_}},fitBounds:function(t,o){if(t=Ue(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=U(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new hi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Xe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!Be.any3d)return this.setView(t,o,c);this._stop();var f=this.project(this.getCenter()),_=this.project(t),C=this.getSize(),F=this._zoom;t=Se(t),o=o===void 0?F:o;var Y=Math.max(C.x,C.y),Q=Y*this.getZoomScale(F,o),ue=_.distanceTo(f)||1,Te=1.42,We=Te*Te;function at(Dt){var Ca=Dt?-1:1,Ff=Dt?Q:Y,zf=Q*Q-Y*Y+Ca*We*We*ue*ue,Uf=2*Ff*We*ue,qr=zf/Uf,Pc=Math.sqrt(qr*qr+1)-qr,Hf=Pc<1e-9?-18:Math.log(Pc);return Hf}function Kt(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function zt(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}function mn(Dt){return Kt(Dt)/zt(Dt)}var tn=at(0);function bi(Dt){return Y*(zt(tn)/zt(tn+Te*Dt))}function Of(Dt){return Y*(zt(tn)*mn(tn+Te*Dt)-Kt(tn))/We}function Rf(Dt){return 1-Math.pow(1-Dt,1.5)}var Nf=Date.now(),Mc=(at(1)-tn)/Te,Bf=c.duration?1e3*c.duration:1e3*Mc*.8;function Ac(){var Dt=(Date.now()-Nf)/Bf,Ca=Rf(Dt)*Mc;Dt<=1?(this._flyToFrame=ge(Ac,this),this._move(this.unproject(f.add(_.subtract(f).multiplyBy(Of(Ca)/ue)),F),this.getScaleZoom(Y/bi(Ca),F),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Ac.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=Ue(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Ue(t));return c.equals(f)||this.panTo(f,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=U(o.paddingTopLeft||o.padding||[0,0]),f=U(o.paddingBottomRight||o.padding||[0,0]),_=this.project(this.getCenter()),C=this.project(t),F=this.getPixelBounds(),Y=we([F.min.add(c),F.max.subtract(f)]),Q=Y.getSize();if(!Y.contains(C)){this._enforcingBounds=!0;var ue=C.subtract(Y.getCenter()),Te=Y.extend(C).getSize().subtract(Q);_.x+=ue.x<0?-Te.x:Te.x,_.y+=ue.y<0?-Te.y:Te.y,this.panTo(this.unproject(_),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=o.divideBy(2).round(),_=c.divideBy(2).round(),C=f.subtract(_);return!C.x&&!C.y?this:(t.animate&&t.pan?this.panBy(C):(t.pan&&this._rawPanBy(C),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,f=new qe(o,c),_=f.toBounds(t.coords.accuracy*2),C=this._locateOptions;if(C.setView){var F=this.getBoundsZoom(_);this.setView(f,C.maxZoom?Math.min(F,C.maxZoom):F)}var Y={latlng:f,bounds:_,timestamp:t.timestamp};for(var Q in t.coords)typeof t.coords[Q]=="number"&&(Y[Q]=t.coords[Q]);this.fire("locationfound",Y)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(xe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)vt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),f=lt("div",c,o||this._mapPane);return t&&(this._panes[t]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new De(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=Ue(t),c=U(c||[0,0]);var f=this.getZoom()||0,_=this.getMinZoom(),C=this.getMaxZoom(),F=t.getNorthWest(),Y=t.getSouthEast(),Q=this.getSize().subtract(c),ue=we(this.project(Y,f),this.project(F,f)).getSize(),Te=Be.any3d?this.options.zoomSnap:1,We=Q.x/ue.x,at=Q.y/ue.y,Kt=o?Math.max(We,at):Math.min(We,at);return f=this.getScaleZoom(Kt,f),Te&&(f=Math.round(f/(Te/100))*(Te/100),f=o?Math.ceil(f/Te)*Te:Math.floor(f/Te)*Te),Math.max(_,Math.min(C,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new re(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var f=c.zoom(t*c.scale(o));return isNaN(f)?1/0:f},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Se(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(U(t),o)},layerPointToLatLng:function(t){var o=U(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(Se(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Se(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Ue(t))},distance:function(t,o){return this.options.crs.distance(Se(t),Se(o))},containerPointToLayerPoint:function(t){return U(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return U(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(U(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Se(t)))},mouseEventToContainerPoint:function(t){return vs(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=si(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Qe(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,Xe(t,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=As(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Xe(t.markerPane,"leaflet-zoom-hide"),Xe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){Tt(this._mapPane,new K(0,0));var f=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var _=this._zoom!==o;this._moveStart(_,c)._move(t,o)._moveEnd(_),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,f){o===void 0&&(o=this._zoom);var _=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),f?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return xe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Tt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var o=t?pt:Qe;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){xe(this._resizeRequest),this._resizeRequest=ge(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],f,_=o==="mouseout"||o==="mouseover",C=t.target||t.srcElement,F=!1;C;){if(f=this._targets[h(C)],f&&(o==="click"||o==="preclick")&&this._draggableMoved(f)){F=!0;break}if(f&&f.listens(o,!0)&&(_&&!ao(C,t)||(c.push(f),_))||C===this._container)break;C=C.parentNode}return!c.length&&!F&&!_&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&ci(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var f=s({},t);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var _=this._findEventTargets(t,o);if(c){for(var C=[],F=0;F<c.length;F++)c[F].listens(o,!0)&&C.push(c[F]);_=C.concat(_)}if(_.length){o==="contextmenu"&&Nt(t);var Y=_[0],Q={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ue=Y.getLatLng&&(!Y._radius||Y._radius<=10);Q.containerPoint=ue?this.latLngToContainerPoint(Y.getLatLng()):this.mouseEventToContainerPoint(t),Q.layerPoint=this.containerPointToLayerPoint(Q.containerPoint),Q.latlng=ue?Y.getLatLng():this.layerPointToLatLng(Q.layerPoint)}for(F=0;F<_.length;F++)if(_[F].fire(o,Q,!0),Q.originalEvent._stopped||_[F].options.bubblingMouseEvents===!1&&S(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Un(this._mapPane)||new K(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var f=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(f)},_latLngBoundsToNewLayerBounds:function(t,o,c){var f=this._getNewPixelOrigin(c,o);return we([this.project(t.getSouthWest(),o)._subtract(f),this.project(t.getNorthWest(),o)._subtract(f),this.project(t.getSouthEast(),o)._subtract(f),this.project(t.getNorthEast(),o)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var f=this.project(t,o),_=this.getSize().divideBy(2),C=new re(f.subtract(_),f.add(_)),F=this._getBoundsOffset(C,c,o);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?t:this.unproject(f.add(F),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),f=new re(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(f,o))},_getBoundsOffset:function(t,o,c){var f=we(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),_=f.min.subtract(t.min),C=f.max.subtract(t.max),F=this._rebound(_.x,-C.x),Y=this._rebound(_.y,-C.y);return new K(F,Y)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),f=Be.any3d?this.options.zoomSnap:1;return f&&(t=Math.round(t/f)*f),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ct(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=Ms,f=this._proxy.style[c];zn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();zn(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(o),_=this._getCenterOffset(t)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(_)?!1:(ge(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,Xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ct(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $r(t,o){return new ot(t,o)}var rn=pe.extend({options:{position:"topright"},initialize:function(t){A(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),f=t._controlCorners[c];return Xe(o,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ns=function(t){return new rn(t)};ot.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=lt("div",o+"control-container",this._container);function f(_,C){var F=o+_+" "+o+C;t[_+C]=lt("div",F,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)vt(this._controlCorners[t]);vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ca=rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,f){return c<f?-1:f<c?1:0}},initialize:function(t,o,c){A(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in t)this._addLayer(t[f],f);for(f in o)this._addLayer(o[f],f,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return rn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ct(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ct(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=lt("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Os(o),di(o);var f=this._section=lt("section",t+"-list");c&&(this._map.on("click",this.collapse,this),Qe(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=lt("a",t+"-toggle",o);_.href="#",_.title="Layers",_.setAttribute("role","button"),Qe(_,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){Nt(C),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=lt("div",t+"-base",f),this._separator=lt("div",t+"-separator",f),this._overlaysList=lt("div",t+"-overlays",f),o.appendChild(f)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,_){return this.options.sortFunction(f.layer,_.layer,f.name,_.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ii(this._baseLayersList),ii(this._overlaysList),this._layerControlInputs=[];var t,o,c,f,_=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),o=o||f.overlay,t=t||!f.overlay,_+=f.overlay?0:1;return this.options.hideSingleBase&&(t=t&&_>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(h(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),f;t.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+h(this),c),this._layerControlInputs.push(f),f.layerId=h(t.layer),Qe(f,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+t.name;var C=document.createElement("span");o.appendChild(C),C.appendChild(f),C.appendChild(_);var F=t.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,f=[],_=[];this._handlingClick=!0;for(var C=t.length-1;C>=0;C--)o=t[C],c=this._getLayer(o.layerId).layer,o.checked?f.push(c):o.checked||_.push(c);for(C=0;C<_.length;C++)this._map.hasLayer(_[C])&&this._map.removeLayer(_[C]);for(C=0;C<f.length;C++)this._map.hasLayer(f[C])||this._map.addLayer(f[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,f=this._map.getZoom(),_=t.length-1;_>=0;_--)o=t[_],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Qe(t,"click",Nt),this.expand();var o=this;setTimeout(function(){pt(t,"click",Nt),o._preventClick=!1})}}),Dr=function(t,o,c){return new ca(t,o,c)},ro=rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=lt("div",o+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,f,_){var C=lt("a",c,f);return C.innerHTML=t,C.href="#",C.title=o,C.setAttribute("role","button"),C.setAttribute("aria-label",o),Os(C),Qe(C,"click",Zn),Qe(C,"click",_,this),Qe(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Ct(this._zoomInButton,o),Ct(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Xe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Xe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});ot.mergeOptions({zoomControl:!0}),ot.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ro,this.addControl(this.zoomControl))});var Or=function(t){return new ro(t)},ua=rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=lt("div",o),f=this.options;return this._addScales(f,o+"-line",c),t.on(f.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=lt("div",o,c)),t.imperial&&(this._iScale=lt("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,f,_;o>5280?(c=o/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(_=this._getRoundNum(o),this._updateScale(this._iScale,_+" ft",_/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),da=function(t){return new ua(t)},Rr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fi=rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?Rr+" ":"")+"Leaflet</a>"},initialize:function(t){A(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),Os(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});ot.mergeOptions({attributionControl:!0}),ot.addInitHook(function(){this.options.attributionControl&&new fi().addTo(this)});var Nr=function(t){return new fi(t)};rn.Layers=ca,rn.Zoom=ro,rn.Scale=ua,rn.Attribution=fi,Ns.layers=Dr,Ns.zoom=Or,Ns.scale=da,Ns.attribution=Nr;var fn=pe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(t,o){return t.addHandler(o,this),this};var Br={Events:Ce},pi=Be.touch?"touchstart mousedown":"mousedown",Tn=Ee.extend({options:{clickTolerance:3},initialize:function(t,o,c,f){A(this,f),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(Qe(this._dragStartTarget,pi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Tn._dragging===this&&this.finishDrag(!0),pt(this._dragStartTarget,pi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Yi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Tn._dragging===this&&this.finishDrag();return}if(!(Tn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Tn._dragging=this,this._preventOutline&&ci(this._element),Qi(),Hn(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=to(this._element);this._startPoint=new K(o.clientX,o.clientY),this._startPos=Un(this._element),this._parentScale=no(c);var f=t.type==="mousedown";Qe(document,f?"mousemove":"touchmove",this._onMove,this),Qe(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new K(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Nt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Xe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Tt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ct(document.body,"leaflet-dragging"),this._lastTarget&&(Ct(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),pt(document,"mousemove touchmove",this._onMove,this),pt(document,"mouseup touchend touchcancel",this._onUp,this),Ds(),Ps();var o=this._moved&&this._moving;this._moving=!1,Tn._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function lo(t,o,c){var f,_=[1,4,2,8],C,F,Y,Q,ue,Te,We,at;for(C=0,Te=t.length;C<Te;C++)t[C]._code=Bs(t[C],o);for(Y=0;Y<4;Y++){for(We=_[Y],f=[],C=0,Te=t.length,F=Te-1;C<Te;F=C++)Q=t[C],ue=t[F],Q._code&We?ue._code&We||(at=fa(ue,Q,We,o,c),at._code=Bs(at,o),f.push(at)):(ue._code&We&&(at=fa(ue,Q,We,o,c),at._code=Bs(at,o),f.push(at)),f.push(Q));t=f}return t}function ha(t,o){var c,f,_,C,F,Y,Q,ue,Te;if(!t||t.length===0)throw new Error("latlngs not passed");pn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var We=Se([0,0]),at=Ue(t),Kt=at.getNorthWest().distanceTo(at.getSouthWest())*at.getNorthEast().distanceTo(at.getNorthWest());Kt<1700&&(We=co(t));var zt=t.length,mn=[];for(c=0;c<zt;c++){var tn=Se(t[c]);mn.push(o.project(Se([tn.lat-We.lat,tn.lng-We.lng])))}for(Y=Q=ue=0,c=0,f=zt-1;c<zt;f=c++)_=mn[c],C=mn[f],F=_.y*C.x-C.y*_.x,Q+=(_.x+C.x)*F,ue+=(_.y+C.y)*F,Y+=F*3;Y===0?Te=mn[0]:Te=[Q/Y,ue/Y];var bi=o.unproject(U(Te));return Se([bi.lat+We.lat,bi.lng+We.lng])}function co(t){for(var o=0,c=0,f=0,_=0;_<t.length;_++){var C=Se(t[_]);o+=C.lat,c+=C.lng,f++}return Se([o/f,c/f])}var R={__proto__:null,clipPolygon:lo,polygonCenter:ha,centroid:co};function H(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=qn(t,c),t=wt(t,c),t}function he(t,o,c){return Math.sqrt(uo(t,o,c,!0))}function Ve(t,o,c){return uo(t,o,c)}function wt(t,o){var c=t.length,f=typeof Uint8Array<"u"?Uint8Array:Array,_=new f(c);_[0]=_[c-1]=1,bn(t,_,o,0,c-1);var C,F=[];for(C=0;C<c;C++)_[C]&&F.push(t[C]);return F}function bn(t,o,c,f,_){var C=0,F,Y,Q;for(Y=f+1;Y<=_-1;Y++)Q=uo(t[Y],t[f],t[_],!0),Q>C&&(F=Y,C=Q);C>c&&(o[F]=1,bn(t,o,c,f,F),bn(t,o,c,F,_))}function qn(t,o){for(var c=[t[0]],f=1,_=0,C=t.length;f<C;f++)cf(t[f],t[_])>o&&(c.push(t[f]),_=f);return _<C-1&&c.push(t[C-1]),c}var _s;function rc(t,o,c,f,_){var C=f?_s:Bs(t,c),F=Bs(o,c),Y,Q,ue;for(_s=F;;){if(!(C|F))return[t,o];if(C&F)return!1;Y=C||F,Q=fa(t,o,Y,c,_),ue=Bs(Q,c),Y===C?(t=Q,C=ue):(o=Q,F=ue)}}function fa(t,o,c,f,_){var C=o.x-t.x,F=o.y-t.y,Y=f.min,Q=f.max,ue,Te;return c&8?(ue=t.x+C*(Q.y-t.y)/F,Te=Q.y):c&4?(ue=t.x+C*(Y.y-t.y)/F,Te=Y.y):c&2?(ue=Q.x,Te=t.y+F*(Q.x-t.x)/C):c&1&&(ue=Y.x,Te=t.y+F*(Y.x-t.x)/C),new K(ue,Te,_)}function Bs(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function cf(t,o){var c=o.x-t.x,f=o.y-t.y;return c*c+f*f}function uo(t,o,c,f){var _=o.x,C=o.y,F=c.x-_,Y=c.y-C,Q=F*F+Y*Y,ue;return Q>0&&(ue=((t.x-_)*F+(t.y-C)*Y)/Q,ue>1?(_=c.x,C=c.y):ue>0&&(_+=F*ue,C+=Y*ue)),F=t.x-_,Y=t.y-C,f?F*F+Y*Y:new K(_,C)}function pn(t){return!b(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function lc(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pn(t)}function cc(t,o){var c,f,_,C,F,Y,Q,ue;if(!t||t.length===0)throw new Error("latlngs not passed");pn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Te=Se([0,0]),We=Ue(t),at=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());at<1700&&(Te=co(t));var Kt=t.length,zt=[];for(c=0;c<Kt;c++){var mn=Se(t[c]);zt.push(o.project(Se([mn.lat-Te.lat,mn.lng-Te.lng])))}for(c=0,f=0;c<Kt-1;c++)f+=zt[c].distanceTo(zt[c+1])/2;if(f===0)ue=zt[0];else for(c=0,C=0;c<Kt-1;c++)if(F=zt[c],Y=zt[c+1],_=F.distanceTo(Y),C+=_,C>f){Q=(C-f)/_,ue=[Y.x-Q*(Y.x-F.x),Y.y-Q*(Y.y-F.y)];break}var tn=o.unproject(U(ue));return Se([tn.lat+Te.lat,tn.lng+Te.lng])}var uf={__proto__:null,simplify:H,pointToSegmentDistance:he,closestPointOnSegment:Ve,clipSegment:rc,_getEdgeIntersection:fa,_getBitCode:Bs,_sqClosestPointOnSegment:uo,isFlat:pn,_flat:lc,polylineCenter:cc},Fr={project:function(t){return new K(t.lng,t.lat)},unproject:function(t){return new qe(t.y,t.x)},bounds:new re([-180,-90],[180,90])},zr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,f=t.lat*o,_=this.R_MINOR/c,C=Math.sqrt(1-_*_),F=C*Math.sin(f),Y=Math.tan(Math.PI/4-f/2)/Math.pow((1-F)/(1+F),C/2);return f=-c*Math.log(Math.max(Y,1e-10)),new K(t.lng*o*c,f)},unproject:function(t){for(var o=180/Math.PI,c=this.R,f=this.R_MINOR/c,_=Math.sqrt(1-f*f),C=Math.exp(-t.y/c),F=Math.PI/2-2*Math.atan(C),Y=0,Q=.1,ue;Y<15&&Math.abs(Q)>1e-7;Y++)ue=_*Math.sin(F),ue=Math.pow((1-ue)/(1+ue),_/2),Q=Math.PI/2-2*Math.atan(C*ue)-F,F+=Q;return new qe(F*o,t.x*o/c)}},df={__proto__:null,LonLat:Fr,Mercator:zr,SphericalMercator:_e},hf=s({},q,{code:"EPSG:3395",projection:zr,transformation:(function(){var t=.5/(Math.PI*zr.R);return D(t,.5,-t,.5)})()}),uc=s({},q,{code:"EPSG:4326",projection:Fr,transformation:D(1/180,1,-1/180,.5)}),ff=s({},z,{projection:Fr,transformation:D(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,f=o.lat-t.lat;return Math.sqrt(c*c+f*f)},infinite:!0});z.Earth=q,z.EPSG3395=hf,z.EPSG3857=B,z.EPSG900913=j,z.EPSG4326=uc,z.Simple=ff;var kn=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});ot.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=h(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?b(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=h(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var _=this._zoomBoundLayers[f].options;t=_.minZoom===void 0?t:Math.min(t,_.minZoom),o=_.maxZoom===void 0?o:Math.max(o,_.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var mi=kn.extend({initialize:function(t,o){A(this,o),this._layers={};var c,f;if(t)for(c=0,f=t.length;c<f;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[t]&&f[t].apply(f,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),pf=function(t,o){return new mi(t,o)},jn=mi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),mi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),mi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new De;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),mf=function(t,o){return new jn(t,o)},vi=pe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){A(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(f,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(t,o){var c=this.options,f=c[o+"Size"];typeof f=="number"&&(f=[f,f]);var _=U(f),C=U(o==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),C&&(t.style.marginLeft=-C.x+"px",t.style.marginTop=-C.y+"px"),_&&(t.style.width=_.x+"px",t.style.height=_.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return Be.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function vf(t){return new vi(t)}var ho=vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ho.imagePath!="string"&&(ho.imagePath=this._detectIconPath()),(this.options.imagePath||ho.imagePath)+vi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,f,_){var C=f.exec(c);return C&&C[_]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=lt("div","leaflet-default-icon-path",document.body),o=As(t,"background-image")||As(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),dc=fn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Tn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Xe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ct(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,f=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,C=Un(o._icon),F=c.getPixelBounds(),Y=c.getPixelOrigin(),Q=we(F.min._subtract(Y).add(_),F.max._subtract(Y).subtract(_));if(!Q.contains(C)){var ue=U((Math.max(Q.max.x,C.x)-Q.max.x)/(F.max.x-Q.max.x)-(Math.min(Q.min.x,C.x)-Q.min.x)/(F.min.x-Q.min.x),(Math.max(Q.max.y,C.y)-Q.max.y)/(F.max.y-Q.max.y)-(Math.min(Q.min.y,C.y)-Q.min.y)/(F.min.y-Q.min.y)).multiplyBy(f);c.panBy(ue,{animate:!1}),this._draggable._newPos._add(ue),this._draggable._startPos._add(ue),Tt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ge(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(xe(this._panRequest),this._panRequest=ge(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,f=Un(o._icon),_=o._map.layerPointToLatLng(f);c&&Tt(c,f),o._latlng=_,t.latlng=_,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){xe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),pa=kn.extend({options:{icon:new ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){A(this,o),this._latlng=Se(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=Se(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),Xe(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(c,"focus",this._panOnFocus,this);var _=t.icon.createShadow(this._shadow),C=!1;_!==this._shadow&&(this._removeShadow(),C=!0),_&&(Xe(_,o),_.alt=""),this._shadow=_,t.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&C&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(this._icon,"focus",this._panOnFocus,this),vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&vt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Tt(this._icon,t),this._shadow&&Tt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dc)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dc(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&en(this._icon,t),this._shadow&&en(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?U(o.iconSize):U(0,0),f=o.iconAnchor?U(o.iconAnchor):U(0,0);t.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _f(t,o){return new pa(t,o)}var gs=kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return A(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ma=gs.extend({options:{fill:!0,radius:10},initialize:function(t,o){A(this,o),this._latlng=Se(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=Se(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return gs.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),f=[t+c,o+c];this._pxBounds=new re(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gf(t,o){return new ma(t,o)}var Ur=ma.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),A(this,o),this._latlng=Se(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new De(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:gs.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===q.distance){var _=Math.PI/180,C=this._mRadius/q.R/_,F=c.project([o+C,t]),Y=c.project([o-C,t]),Q=F.add(Y).divideBy(2),ue=c.unproject(Q).lat,Te=Math.acos((Math.cos(C*_)-Math.sin(o*_)*Math.sin(ue*_))/(Math.cos(o*_)*Math.cos(ue*_)))/_;(isNaN(Te)||Te===0)&&(Te=C/Math.cos(Math.PI/180*o)),this._point=Q.subtract(c.getPixelOrigin()),this._radius=isNaN(Te)?0:Q.x-c.project([ue,t-Te]).x,this._radiusY=Q.y-F.y}else{var We=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(We).x}this._updateBounds()}});function yf(t,o,c){return new Ur(t,o,c)}var Wn=gs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){A(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,f=uo,_,C,F=0,Y=this._parts.length;F<Y;F++)for(var Q=this._parts[F],ue=1,Te=Q.length;ue<Te;ue++){_=Q[ue-1],C=Q[ue];var We=f(t,_,C,!0);We<o&&(o=We,c=f(t,_,C))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=Se(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new De,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return pn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=pn(t),f=0,_=t.length;f<_;f++)c?(o[f]=Se(t[f]),this._bounds.extend(o[f])):o[f]=this._convertLatLngs(t[f]);return o},_project:function(){var t=new re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new K(t,t);this._rawPxBounds&&(this._pxBounds=new re([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var f=t[0]instanceof qe,_=t.length,C,F;if(f){for(F=[],C=0;C<_;C++)F[C]=this._map.latLngToLayerPoint(t[C]),c.extend(F[C]);o.push(F)}else for(C=0;C<_;C++)this._projectLatlngs(t[C],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,f,_,C,F,Y,Q;for(c=0,_=0,C=this._rings.length;c<C;c++)for(Q=this._rings[c],f=0,F=Q.length;f<F-1;f++)Y=rc(Q[f],Q[f+1],t,f,!0),Y&&(o[_]=o[_]||[],o[_].push(Y[0]),(Y[1]!==Q[f+1]||f===F-2)&&(o[_].push(Y[1]),_++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,f=t.length;c<f;c++)t[c]=H(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,f,_,C,F,Y,Q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,C=this._parts.length;c<C;c++)for(Y=this._parts[c],f=0,F=Y.length,_=F-1;f<F;_=f++)if(!(!o&&f===0)&&he(t,Y[_],Y[f])<=Q)return!0;return!1}});function bf(t,o){return new Wn(t,o)}Wn._flat=lc;var _i=Wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ha(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Wn.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof qe&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){Wn.prototype._setLatLngs.call(this,t),pn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new K(o,o);if(t=new re(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,_=this._rings.length,C;f<_;f++)C=lo(this._rings[f],t,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,f,_,C,F,Y,Q,ue;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(C=0,Q=this._parts.length;C<Q;C++)for(c=this._parts[C],F=0,ue=c.length,Y=ue-1;F<ue;Y=F++)f=c[F],_=c[Y],f.y>t.y!=_.y>t.y&&t.x<(_.x-f.x)*(t.y-f.y)/(_.y-f.y)+f.x&&(o=!o);return o||Wn.prototype._containsPoint.call(this,t,!0)}});function kf(t,o){return new _i(t,o)}var Gn=jn.extend({initialize:function(t,o){A(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=b(t)?t:t.features,c,f,_;if(o){for(c=0,f=o.length;c<f;c++)_=o[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var C=this.options;if(C.filter&&!C.filter(t))return this;var F=va(t,C);return F?(F.feature=ya(t),F.defaultOptions=F.options,this.resetStyle(F),C.onEachFeature&&C.onEachFeature(t,F),this.addLayer(F)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function va(t,o){var c=t.type==="Feature"?t.geometry:t,f=c?c.coordinates:null,_=[],C=o&&o.pointToLayer,F=o&&o.coordsToLatLng||Hr,Y,Q,ue,Te;if(!f&&!c)return null;switch(c.type){case"Point":return Y=F(f),hc(C,t,Y,o);case"MultiPoint":for(ue=0,Te=f.length;ue<Te;ue++)Y=F(f[ue]),_.push(hc(C,t,Y,o));return new jn(_);case"LineString":case"MultiLineString":return Q=_a(f,c.type==="LineString"?0:1,F),new Wn(Q,o);case"Polygon":case"MultiPolygon":return Q=_a(f,c.type==="Polygon"?1:2,F),new _i(Q,o);case"GeometryCollection":for(ue=0,Te=c.geometries.length;ue<Te;ue++){var We=va({geometry:c.geometries[ue],type:"Feature",properties:t.properties},o);We&&_.push(We)}return new jn(_);case"FeatureCollection":for(ue=0,Te=c.features.length;ue<Te;ue++){var at=va(c.features[ue],o);at&&_.push(at)}return new jn(_);default:throw new Error("Invalid GeoJSON object.")}}function hc(t,o,c,f){return t?t(o,c):new pa(c,f&&f.markersInheritOptions&&f)}function Hr(t){return new qe(t[1],t[0],t[2])}function _a(t,o,c){for(var f=[],_=0,C=t.length,F;_<C;_++)F=o?_a(t[_],o-1,c):(c||Hr)(t[_]),f.push(F);return f}function Vr(t,o){return t=Se(t),t.alt!==void 0?[g(t.lng,o),g(t.lat,o),g(t.alt,o)]:[g(t.lng,o),g(t.lat,o)]}function ga(t,o,c,f){for(var _=[],C=0,F=t.length;C<F;C++)_.push(o?ga(t[C],pn(t[C])?0:o-1,c,f):Vr(t[C],f));return!o&&c&&_.length>0&&_.push(_[0].slice()),_}function gi(t,o){return t.feature?s({},t.feature,{geometry:o}):ya(o)}function ya(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Zr={toGeoJSON:function(t){return gi(this,{type:"Point",coordinates:Vr(this.getLatLng(),t)})}};pa.include(Zr),Ur.include(Zr),ma.include(Zr),Wn.include({toGeoJSON:function(t){var o=!pn(this._latlngs),c=ga(this._latlngs,o?1:0,!1,t);return gi(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),_i.include({toGeoJSON:function(t){var o=!pn(this._latlngs),c=o&&!pn(this._latlngs[0]),f=ga(this._latlngs,c?2:o?1:0,!0,t);return o||(f=[f]),gi(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),mi.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),gi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",f=[];return this.eachLayer(function(_){if(_.toGeoJSON){var C=_.toGeoJSON(t);if(c)f.push(C.geometry);else{var F=ya(C);F.type==="FeatureCollection"?f.push.apply(f,F.features):f.push(F)}}}),c?gi(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function fc(t,o){return new Gn(t,o)}var wf=fc,ba=kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=Ue(o),A(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ps(this._image),this},bringToBack:function(){return this._map&&ms(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Ue(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:lt("img");if(Xe(o,"leaflet-image-layer"),this._zoomAnimated&&Xe(o,"leaflet-zoom-animated"),this.options.className&&Xe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;zn(this._image,c,o)},_reset:function(){var t=this._image,o=new re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Tt(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Lf=function(t,o,c){return new ba(t,o,c)},pc=ba.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:lt("video");if(Xe(o,"leaflet-image-layer"),this._zoomAnimated&&Xe(o,"leaflet-zoom-animated"),this.options.className&&Xe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),f=[],_=0;_<c.length;_++)f.push(c[_].src);this._url=c.length>0?f:[o.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var F=lt("source");F.src=this._url[C],o.appendChild(F)}}});function Cf(t,o,c){return new pc(t,o,c)}var mc=ba.extend({_initImage:function(){var t=this._image=this._url;Xe(t,"leaflet-image-layer"),this._zoomAnimated&&Xe(t,"leaflet-zoom-animated"),this.options.className&&Xe(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function xf(t,o,c){return new mc(t,o,c)}var Sn=kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof qe||b(t))?(this._latlng=Se(t),A(this,o)):(A(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(l(vt,void 0,this._container),200)):vt(this._container),this.options.interactive&&(Ct(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Se(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ps(this._container),this},bringToBack:function(){return this._map&&ms(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof jn){o=null;var c=this._source._layers;for(var f in c)if(c[f]._map){o=c[f];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=U(this.options.offset),c=this._getAnchor();this._zoomAnimated?Tt(this._container,t.add(c)):o=o.add(t).add(c);var f=this._containerBottom=-o.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=f+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});ot.include({_initOverlay:function(t,o,c,f){var _=o;return _ instanceof t||(_=new t(f).setContent(o)),c&&_.setLatLng(c),_}}),kn.include({_initOverlay:function(t,o,c,f){var _=c;return _ instanceof t?(A(_,f),_._source=this):(_=o&&!f?o:new t(f,this),_.setContent(c)),_}});var ka=Sn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Sn.prototype.openOn.call(this,t)},onAdd:function(t){Sn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gs||this._source.on("preclick",Vn))},onRemove:function(t){Sn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gs||this._source.off("preclick",Vn))},getEvents:function(){var t=Sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=lt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=lt("div",t+"-content-wrapper",o);if(this._contentNode=lt("div",t+"-content",c),Os(o),di(this._contentNode),Qe(o,"contextmenu",Vn),this._tipContainer=lt("div",t+"-tip-container",o),this._tip=lt("div",t+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=lt("a",t+"-close-button",o);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',Qe(f,"click",function(_){Nt(_),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var f=t.offsetHeight,_=this.options.maxHeight,C="leaflet-popup-scrolled";_&&f>_?(o.height=_+"px",Xe(t,C)):Ct(t,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();Tt(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(As(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,f=this._containerWidth,_=new K(this._containerLeft,-c-this._containerBottom);_._add(Un(this._container));var C=t.layerPointToContainerPoint(_),F=U(this.options.autoPanPadding),Y=U(this.options.autoPanPaddingTopLeft||F),Q=U(this.options.autoPanPaddingBottomRight||F),ue=t.getSize(),Te=0,We=0;C.x+f+Q.x>ue.x&&(Te=C.x+f-ue.x+Q.x),C.x-Te-Y.x<0&&(Te=C.x-Y.x),C.y+c+Q.y>ue.y&&(We=C.y+c-ue.y+Q.y),C.y-We-Y.y<0&&(We=C.y-Y.y),(Te||We)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Te,We]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ef=function(t,o){return new ka(t,o)};ot.mergeOptions({closePopupOnClick:!0}),ot.include({openPopup:function(t,o,c){return this._initOverlay(ka,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),kn.include({bindPopup:function(t,o){return this._popup=this._initOverlay(ka,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof jn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Zn(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof gs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var wa=Sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Sn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Sn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Sn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,f=this._map,_=this._container,C=f.latLngToContainerPoint(f.getCenter()),F=f.layerPointToContainerPoint(t),Y=this.options.direction,Q=_.offsetWidth,ue=_.offsetHeight,Te=U(this.options.offset),We=this._getAnchor();Y==="top"?(o=Q/2,c=ue):Y==="bottom"?(o=Q/2,c=0):Y==="center"?(o=Q/2,c=ue/2):Y==="right"?(o=0,c=ue/2):Y==="left"?(o=Q,c=ue/2):F.x<C.x?(Y="right",o=0,c=ue/2):(Y="left",o=Q+(Te.x+We.x)*2,c=ue/2),t=t.subtract(U(o,c,!0)).add(Te).add(We),Ct(_,"leaflet-tooltip-right"),Ct(_,"leaflet-tooltip-left"),Ct(_,"leaflet-tooltip-top"),Ct(_,"leaflet-tooltip-bottom"),Xe(_,"leaflet-tooltip-"+Y),Tt(_,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&en(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tf=function(t,o){return new wa(t,o)};ot.include({openTooltip:function(t,o,c){return this._initOverlay(wa,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),kn.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wa,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof jn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(Qe(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Qe(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,f;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),f=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(o)}});var vc=vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(ii(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=U(c.bgPos);o.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Sf(t){return new vc(t)}vi.Default=ho;var fo=kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){A(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),vt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ps(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ms(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof K?t:new K(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),f=0,_=o.length,C;f<_;f++)C=o[f].style.zIndex,o[f]!==this._container&&C&&(c=t(c,+C));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){en(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var f in this._tiles){var _=this._tiles[f];if(!(!_.current||!_.loaded)){var C=Math.min(1,(t-_.loaded)/200);en(_.el,C),C<1?o=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(xe(this._fadeFrame),this._fadeFrame=ge(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(vt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[t],_=this._map;return f||(f=this._levels[t]={},f.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=o,f.origin=_.project(_.unproject(_.getPixelOrigin()),t).round(),f.zoom=t,this._setZoomTransform(f,_.getCenter(),_.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var f=o.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)vt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,f){var _=Math.floor(t/2),C=Math.floor(o/2),F=c-1,Y=new K(+_,+C);Y.z=+F;var Q=this._tileCoordsToKey(Y),ue=this._tiles[Q];return ue&&ue.active?(ue.retain=!0,!0):(ue&&ue.loaded&&(ue.retain=!0),F>f?this._retainParent(_,C,F,f):!1)},_retainChildren:function(t,o,c,f){for(var _=2*t;_<2*t+2;_++)for(var C=2*o;C<2*o+2;C++){var F=new K(_,C);F.z=c+1;var Y=this._tileCoordsToKey(F),Q=this._tiles[Y];if(Q&&Q.active){Q.retain=!0;continue}else Q&&Q.loaded&&(Q.retain=!0);c+1<f&&this._retainChildren(_,C,c+1,f)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,f){var _=Math.round(o);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var C=this.options.updateWhenZooming&&_!==this._tileZoom;(!f||C)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var f=this._map.getZoomScale(c,t.zoom),_=t.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(o,c)).round();Be.any3d?zn(t.el,_,f):Tt(t.el,_)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],f).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],f).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],f).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),f=o.getZoomScale(c,this._tileZoom),_=o.project(t,this._tileZoom).floor(),C=o.getSize().divideBy(f*2);return new re(_.subtract(C),_.add(C))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(t),_=this._pxBoundsToTileRange(f),C=_.getCenter(),F=[],Y=this.options.keepBuffer,Q=new re(_.getBottomLeft().subtract([Y,-Y]),_.getTopRight().add([Y,-Y]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ue in this._tiles){var Te=this._tiles[ue].coords;(Te.z!==this._tileZoom||!Q.contains(new K(Te.x,Te.y)))&&(this._tiles[ue].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var We=_.min.y;We<=_.max.y;We++)for(var at=_.min.x;at<=_.max.x;at++){var Kt=new K(at,We);if(Kt.z=this._tileZoom,!!this._isValidTile(Kt)){var zt=this._tiles[this._tileCoordsToKey(Kt)];zt?zt.current=!0:F.push(Kt)}}if(F.sort(function(tn,bi){return tn.distanceTo(C)-bi.distanceTo(C)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mn=document.createDocumentFragment();for(at=0;at<F.length;at++)this._addTile(F[at],mn);this._level.el.appendChild(mn)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(t);return Ue(this.options.bounds).overlaps(f)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),f=t.scaleBy(c),_=f.add(c),C=o.unproject(f,t.z),F=o.unproject(_,t.z);return[C,F]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new De(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new K(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(vt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Xe(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=v,t.onmousemove=v,Be.ielt9&&this.options.opacity<1&&en(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),f=this._tileCoordsToKey(t),_=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(_),this.createTile.length<2&&ge(l(this._tileReady,this,t,null,_)),Tt(_,c),this._tiles[f]={el:_,coords:t,current:!0},o.appendChild(_),this.fire("tileloadstart",{tile:_,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var f=this._tileCoordsToKey(t);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(en(c.el,0),xe(this._fadeFrame),this._fadeFrame=ge(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(Xe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?ge(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new K(this._wrapX?m(t.x,this._wrapX):t.x,this._wrapY?m(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new re(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function If(t){return new fo(t)}var yi=fo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=A(this,o),o.detectRetina&&Be.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return Qe(c,"load",l(this._tileOnLoad,this,o,c)),Qe(c,"error",l(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:Be.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return $(this._url,s(o,this.options))},_tileOnLoad:function(t,o){Be.ielt9?setTimeout(l(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var f=this.options.errorTileUrl;f&&o.getAttribute("src")!==f&&(o.src=f),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(t=o-t),t+f},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=v,o.onerror=v,!o.complete)){o.src=T;var c=this._tiles[t].coords;vt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",T),fo.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===T))return fo.prototype._tileReady.call(this,t,o,c)}});function _c(t,o){return new yi(t,o)}var gc=yi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=s({},this.defaultWmsParams);for(var f in o)f in this.options||(c[f]=o[f]);o=A(this,o);var _=o.detectRetina&&Be.retina?2:1,C=this.getTileSize();c.width=C.x*_,c.height=C.y*_,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,yi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,f=we(c.project(o[0]),c.project(o[1])),_=f.min,C=f.max,F=(this._wmsVersion>=1.3&&this._crs===uc?[_.y,_.x,C.y,C.x]:[_.x,_.y,C.x,C.y]).join(","),Y=yi.prototype.getTileUrl.call(this,t);return Y+P(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(t,o){return s(this.wmsParams,t),o||this.redraw(),this}});function Mf(t,o){return new gc(t,o)}yi.WMS=gc,_c.wms=Mf;var Kn=kn.extend({options:{padding:.1},initialize:function(t){A(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,o),C=f.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(t,o));Be.any3d?zn(this._container,C,c):Tt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new re(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yc=Kn.extend({options:{tolerance:0},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Qe(t,"mousemove",this._onMouseMove,this),Qe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Qe(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){xe(this._redrawRequest),delete this._ctx,vt(this._container),pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),f=Be.retina?2:1;Tt(o,t.min),o.width=f*c.x,o.height=f*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Kn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,f=o.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],f,_;for(_=0;_<o.length;_++){if(f=Number(o[_]),isNaN(f))return;c.push(f)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ge(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new re,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)t=f.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,f,_,C,F=t._parts,Y=F.length,Q=this._ctx;if(Y){for(Q.beginPath(),c=0;c<Y;c++){for(f=0,_=F[c].length;f<_;f++)C=F[c][f],Q[f?"lineTo":"moveTo"](C.x,C.y);o&&Q.closePath()}this._fillStroke(Q,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,f=Math.max(Math.round(t._radius),1),_=(Math.max(Math.round(t._radiusY),1)||f)/f;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(o.x,o.y/_,f,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,f,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Ct(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,f,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(o)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(t),f&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([f],t,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,f=o.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,f=o.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function bc(t){return Be.canvas?new yc(t):null}var po=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Af={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=po("shape");Xe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=po("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;vt(o),t.removeInteractiveTarget(o),delete this._layers[h(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,f=t.options,_=t._container;_.stroked=!!f.stroke,_.filled=!!f.fill,f.stroke?(o||(o=t._stroke=po("stroke")),_.appendChild(o),o.weight=f.weight+"px",o.color=f.color,o.opacity=f.opacity,f.dashArray?o.dashStyle=b(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=f.lineCap.replace("butt","flat"),o.joinstyle=f.lineJoin):o&&(_.removeChild(o),t._stroke=null),f.fill?(c||(c=t._fill=po("fill")),_.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(_.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),f=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){ps(t._container)},_bringToBack:function(t){ms(t._container)}},La=Be.vml?po:se,mo=Kn.extend({_initContainer:function(){this._container=La("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=La("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){vt(this._container),pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Tt(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=La("path");t.options.className&&Xe(o,t.options.className),t.options.interactive&&Xe(o,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){vt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,le(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),f=Math.max(Math.round(t._radiusY),1)||c,_="a"+c+","+f+" 0 1,0 ",C=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(t,C)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){ps(t._path)},_bringToBack:function(t){ms(t._path)}});Be.vml&&mo.include(Af);function kc(t){return Be.svg||Be.vml?new mo(t):null}ot.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&bc(t)||kc(t)}});var wc=_i.extend({initialize:function(t,o){_i.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Ue(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Pf(t,o){return new wc(t,o)}mo.create=La,mo.pointsToPath=le,Gn.geometryToLayer=va,Gn.coordsToLatLng=Hr,Gn.coordsToLatLngs=_a,Gn.latLngToCoords=Vr,Gn.latLngsToCoords=ga,Gn.getFeature=gi,Gn.asFeature=ya,ot.mergeOptions({boxZoom:!0});var Lc=fn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Hn(),Qi(),this._startPoint=this._map.mouseEventToContainerPoint(t),Qe(document,{contextmenu:Zn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),Xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new re(this._point,this._startPoint),c=o.getSize();Tt(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(vt(this._box),Ct(this._container,"leaflet-crosshair")),Ps(),Ds(),pt(document,{contextmenu:Zn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new De(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ot.addInitHook("addHandler","boxZoom",Lc),ot.mergeOptions({doubleClickZoom:!0});var Cc=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),f=o.options.zoomDelta,_=t.originalEvent.shiftKey?c-f:c+f;o.options.doubleClickZoom==="center"?o.setZoom(_):o.setZoomAround(t.containerPoint,_)}});ot.addInitHook("addHandler","doubleClickZoom",Cc),ot.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xc=fn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Tn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ct(this._map._container,"leaflet-grab"),Ct(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Ue(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,_=(f-o+c)%t+o-c,C=(f+o+c)%t-o-c,F=Math.abs(_+c)<Math.abs(C+c)?_:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(t){var o=this._map,c=o.options,f=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),f)o.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,F=c.easeLinearity,Y=_.multiplyBy(F/C),Q=Y.distanceTo([0,0]),ue=Math.min(c.inertiaMaxSpeed,Q),Te=Y.multiplyBy(ue/Q),We=ue/(c.inertiaDeceleration*F),at=Te.multiplyBy(-We/2).round();!at.x&&!at.y?o.fire("moveend"):(at=o._limitOffset(at,o.options.maxBounds),ge(function(){o.panBy(at,{duration:We,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});ot.addInitHook("addHandler","dragging",xc),ot.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ec=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Qe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,f=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,f,_;for(f=0,_=c.left.length;f<_;f++)o[c.left[f]]=[-1*t,0];for(f=0,_=c.right.length;f<_;f++)o[c.right[f]]=[t,0];for(f=0,_=c.down.length;f<_;f++)o[c.down[f]]=[0,t];for(f=0,_=c.up.length;f<_;f++)o[c.up[f]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,f,_;for(f=0,_=c.zoomIn.length;f<_;f++)o[c.zoomIn[f]]=t;for(f=0,_=c.zoomOut.length;f<_;f++)o[c.zoomOut[f]]=-t},_addHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,f;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[o],t.shiftKey&&(f=U(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(U(f),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(_)}else c.panBy(f)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Zn(t)}}});ot.addInitHook("addHandler","keyboard",Ec),ot.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tc=fn.extend({addHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Rs(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Zn(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,C=c?Math.ceil(_/c)*c:_,F=t._limitZoom(o+(this._delta>0?C:-C))-o;this._delta=0,this._startTime=null,F&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+F):t.setZoomAround(this._lastMousePos,o+F))}});ot.addInitHook("addHandler","scrollWheelZoom",Tc);var $f=600;ot.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var Sc=fn.extend({addHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new K(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Qe(document,"touchend",Nt),Qe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),$f),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){pt(document,"touchend",Nt),pt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new K(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});ot.addInitHook("addHandler","tapHold",Sc),ot.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var Ic=fn.extend({addHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ct(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),f=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),Nt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),f=o.mouseEventToContainerPoint(t.touches[1]),_=c.distanceTo(f)/this._startDist;if(this._zoom=o.getScaleZoom(_,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&_<1||this._zoom>o.getMaxZoom()&&_>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var C=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(_===1&&C.x===0&&C.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),xe(this._animRequest);var F=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ge(F,this,!0),Nt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,xe(this._animRequest),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ot.addInitHook("addHandler","touchZoom",Ic),ot.BoxZoom=Lc,ot.DoubleClickZoom=Cc,ot.Drag=xc,ot.Keyboard=Ec,ot.ScrollWheelZoom=Tc,ot.TapHold=Sc,ot.TouchZoom=Ic,i.Bounds=re,i.Browser=Be,i.CRS=z,i.Canvas=yc,i.Circle=Ur,i.CircleMarker=ma,i.Class=pe,i.Control=rn,i.DivIcon=vc,i.DivOverlay=Sn,i.DomEvent=la,i.DomUtil=oa,i.Draggable=Tn,i.Evented=Ee,i.FeatureGroup=jn,i.GeoJSON=Gn,i.GridLayer=fo,i.Handler=fn,i.Icon=vi,i.ImageOverlay=ba,i.LatLng=qe,i.LatLngBounds=De,i.Layer=kn,i.LayerGroup=mi,i.LineUtil=uf,i.Map=ot,i.Marker=pa,i.Mixin=Br,i.Path=gs,i.Point=K,i.PolyUtil=R,i.Polygon=_i,i.Polyline=Wn,i.Popup=ka,i.PosAnimation=hi,i.Projection=df,i.Rectangle=wc,i.Renderer=Kn,i.SVG=mo,i.SVGOverlay=mc,i.TileLayer=yi,i.Tooltip=wa,i.Transformation=je,i.Util=ze,i.VideoOverlay=pc,i.bind=l,i.bounds=we,i.canvas=bc,i.circle=yf,i.circleMarker=gf,i.control=Ns,i.divIcon=Sf,i.extend=s,i.featureGroup=mf,i.geoJSON=fc,i.geoJson=wf,i.gridLayer=If,i.icon=vf,i.imageOverlay=Lf,i.latLng=Se,i.latLngBounds=Ue,i.layerGroup=pf,i.map=$r,i.marker=_f,i.point=U,i.polygon=kf,i.polyline=bf,i.popup=Ef,i.rectangle=Pf,i.setOptions=A,i.stamp=h,i.svg=kc,i.svgOverlay=xf,i.tileLayer=_c,i.tooltip=Tf,i.transformation=D,i.version=a,i.videoOverlay=Cf;var Df=window.L;i.noConflict=function(){return window.L=Df,this},window.L=i}))})(Lo,Lo.exports)),Lo.exports}var Xb=Jb();const Ut=Kb(Xb);(function(e,n,i){function a(s,r){for(;(s=s.parentElement)&&!s.classList.contains(r););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,r){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),r=this._poly,l=r.getLatLngs(),u=l.splice(-1,1)[0];this._poly.setLatLngs(l),this._markerGroup.removeLayer(s),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(u,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent),l=this._map.layerPointToLatLng(r);this._currentLatLng=l,this._updateTooltip(l),this._updateGuide(r),this._mouseMarker.setLatLng(l),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var r=s.originalEvent,l=r.clientX,u=r.clientY;this._startPoint.call(this,l,u)}},_startPoint:function(s,r){this._mouseDownOrigin=L.point(s,r)},_onMouseUp:function(s){var r=s.originalEvent,l=r.clientX,u=r.clientY;this._endPoint.call(this,l,u,s),this._clickHandled=null},_endPoint:function(s,r,l){if(this._mouseDownOrigin){var u=L.point(s,r).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(l.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(l.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(u)<9*(e.devicePixelRatio||1)&&this.addVertex(l.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var r,l,u=s.originalEvent;!u.touches||!u.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=u.touches[0].clientX,l=u.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,l),this._endPoint.call(this,r,l,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var r;if(this._markers.length>0){var l;if(this.type===L.Draw.Polyline.TYPE)l=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;l=this._markers[0]}var u=this._map.latLngToContainerPoint(l.getLatLng()),h=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),p=this._map.latLngToContainerPoint(h.getLatLng());r=u.distanceTo(p)}else r=1/0;return r},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var r=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(s){var r=this._markers?this._markers.length:0;r>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),s))},_updateTooltip:function(s){var r=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(s,r){var l,u,h,p=Math.floor(Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))),m=this.options.guidelineDistance,v=this.options.maxGuideLineLength,g=p>v?p-v:m;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));g<p;g+=this.options.guidelineDistance)l=g/p,u={x:Math.floor(s.x*(1-l)+l*r.x),y:Math.floor(s.y*(1-l)+l*r.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,u)},_updateGuideColor:function(s){if(this._guidesContainer)for(var r=0,l=this._guidesContainer.childNodes.length;r<l;r++)this._guidesContainer.childNodes[r].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,r,l=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=l?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),s},_updateRunningMeasure:function(s,r){var l,u,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(l=h-(r?2:1),u=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[l].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[l].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=u*(r?1:-1))},_getMeasurementString:function(){var s,r=this._currentLatLng,l=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?l&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(l)*(this.options.factor||1):this._measurementRunningTotal||0:l&&r?this._measurementRunningTotal+this._map.distance(r,l)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,r){L.Draw.Polyline.prototype.initialize.call(this,s,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,r;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:s,subtext:r}},_getMeasurementString:function(){var s=this._area,r="";return s||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(r+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,r){var l;!this.options.allowIntersection&&this.options.showArea&&(l=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(l)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,r)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var r=s.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!a(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,r,l,u=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,p=this.options.showArea;return h&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(s),l=p?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:u.text,subtext:l}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var r=s.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,r)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,r)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(s);else var r=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var r,l=s.latlng,u=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(l),this._isDrawing){this._drawShape(l),r=this._shape.getRadius().toFixed(1);var p="";u&&(p=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:p})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,r){this._marker=s,L.setOptions(this,r)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var r=s.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,r){var l=parseInt(s.style.marginTop,10)-r,u=parseInt(s.style.marginLeft,10)-r;s.style.marginTop=l+"px",s.style.marginLeft=u+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var r=0;r<this._verticesHandlers.length;r++)s(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,r,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this._latlngs=r,L.setOptions(this,l)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,r=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),r&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.removeClass(r,l)}),s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.addClass(r,l)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,r=s._path;r&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.removeClass(r,l)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.addClass(r,l)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,r,l,u,h=this._defaultShape();for(s=0,l=h.length;s<l;s++)u=this._createMarker(h[s],s),u.on("click",this._onMarkerClick,this),u.on("contextmenu",this._onContextMenu,this),this._markers.push(u);var p,m;for(s=0,r=l-1;s<l;r=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(p=this._markers[r],m=this._markers[s],this._createMiddleMarker(p,m),this._updatePrevNext(p,m))},_createMarker:function(s,r){var l=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return l._origLatLng=s,l._index=r,l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(l),l},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),r=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),r},_removeMarker:function(s){var r=s._index;this._markerGroup.removeLayer(s),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var r=s.target,l=this._poly,u=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),l.options.poly){var h=l._map._editTooltip;if(!l.options.poly.allowIntersection&&l.intersects()){L.extend(r._origLatLng,u),r.setLatLng(u);var p=l.options.color;l.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){l.setStyle({color:p}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var m=this._poly.getLatLngs();this._poly._convertLatLngs(m,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,l=s.target;this._defaultShape().length<r||(this._removeMarker(l),this._updatePrevNext(l._prev,l._next),l._middleLeft&&this._markerGroup.removeLayer(l._middleLeft),l._middleRight&&this._markerGroup.removeLayer(l._middleRight),l._prev&&l._next?this._createMiddleMarker(l._prev,l._next):l._prev?l._next||(l._prev._middleRight=null):l._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var r=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(r),u=s.target;L.extend(u._origLatLng,l),u._middleLeft&&u._middleLeft.setLatLng(this._getMiddleLatLng(u._prev,u)),u._middleRight&&u._middleRight.setLatLng(this._getMiddleLatLng(u,u._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,r){this._markerGroup.eachLayer(function(l){l._index>s&&(l._index+=r)})},_createMiddleMarker:function(s,r){var l,u,h,p=this._getMiddleLatLng(s,r),m=this._createMarker(p);m.setOpacity(.6),s._middleRight=r._middleLeft=m,u=function(){m.off("touchmove",u,this);var v=r._index;m._index=v,m.off("click",l,this).on("click",this._onMarkerClick,this),p.lat=m.getLatLng().lat,p.lng=m.getLatLng().lng,this._spliceLatLngs(v,0,p),this._markers.splice(v,0,m),m.setOpacity(1),this._updateIndexes(v,1),r._index++,this._updatePrevNext(s,m),this._updatePrevNext(m,r),this._poly.fire("editstart")},h=function(){m.off("dragstart",u,this),m.off("dragend",h,this),m.off("touchmove",u,this),this._createMiddleMarker(s,m),this._createMiddleMarker(m,r)},l=function(){u.call(this),h.call(this),this._fireEdit()},m.on("click",l,this).on("dragstart",u,this).on("dragend",h,this).on("touchmove",u,this),this._markerGroup.addLayer(m)},_updatePrevNext:function(s,r){s&&(s._next=r),r&&(r._prev=s)},_getMiddleLatLng:function(s,r){var l=this._poly._map,u=l.project(s.getLatLng()),h=l.project(r.getLatLng());return l.unproject(u._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,r)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var r=0,l=this._resizeMarkers.length;r<l;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,r){var l=new L.Marker.Touch(s,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(l),this._markerGroup.addLayer(l),l},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var r=s.target,l=r.getLatLng();r===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var r=this._getCorners(),l=s.target,u=l._cornerIndex;l.setOpacity(0),this._oppositeCorner=r[(u+2)%4],this._toggleCornerMarkers(0,u)}this._shape.fire("editstart")},_onTouchMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(r);return s.target===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),r=s.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var r=0,l=s.length;r<l;r++)this._resizeMarkers.push(this._createMarker(s[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var r=this._getCorners(),l=s.target,u=l._cornerIndex;this._oppositeCorner=r[(u+2)%4],this._toggleCornerMarkers(0,u)},_onMarkerDragEnd:function(s){var r,l,u=s.target;u===this._moveMarker&&(r=this._shape.getBounds(),l=r.getCenter(),u.setLatLng(l)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var r,l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),u=this._shape.getBounds(),h=u.getCenter(),p=[],m=0,v=l.length;m<v;m++)r=[l[m].lat-h.lat,l[m].lng-h.lng],p.push([s.lat+r[0],s.lng+r[1]]);this._shape.setLatLngs(p),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var r;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var r=0,l=this._resizeMarkers.length;r<l;r++)this._resizeMarkers[r].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),r=0,l=this._resizeMarkers.length;r<l;r++)this._resizeMarkers[r].setLatLng(s[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),r=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var r=this._shape._radius*Math.cos(Math.PI/4),l=this._map.project(s);return this._map.unproject([l.x+r,l.y-r])},_resize:function(s){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(s):radius=this._map.distance(r,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,r){var l={};if(s.touches!==void 0){if(!s.touches.length)return;l=s.touches[0]}else if(s.pointerType!=="touch"||(l=s,!this._filterClick(s)))return;var u=this._map.mouseEventToContainerPoint(l),h=this._map.mouseEventToLayerPoint(l),p=this._map.layerPointToLatLng(h);this._map.fire(r,{latlng:p,layerPoint:h,containerPoint:u,pageX:l.pageX,pageY:l.pageY,originalEvent:s})},_filterClick:function(s){var r=s.timeStamp||s.originalEvent.timeStamp,l=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return l&&l>100&&l<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(s,r)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,r=s.indexOf("MSIE ");if(r>0)return parseInt(s.substring(r+5,s.indexOf(".",r)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var u=s.indexOf("Edge/");return u>0&&parseInt(s.substring(u+5,s.indexOf(".",u)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var l=0;l<r.length;l++)L.DomEvent.on(s,r[l],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,r=s.indexOf("MSIE ");if(r>0)return parseInt(s.substring(r+5,s.indexOf(".",r)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var u=s.indexOf("Edge/");return u>0&&parseInt(s.substring(u+5,s.indexOf(".",u)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var r=[],l=0,u=s.length;l<u;l++)Array.isArray(s[l])?r.push(L.LatLngUtil.cloneLatLngs(s[l])):r.push(this.cloneLatLng(s[l]));return r},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},(function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var l,u,h=r.length,p=0,m=Math.PI/180;if(h>2){for(var v=0;v<h;v++)l=r[v],u=r[(v+1)%h],p+=(u.lng-l.lng)*m*(2+Math.sin(l.lat*m)+Math.sin(u.lat*m));p=6378137*p*6378137/2}return Math.abs(p)},formattedNumber:function(r,l){var u=parseFloat(r).toFixed(l),h=L.drawLocal.format&&L.drawLocal.format.numeric,p=h&&h.delimiters,m=p&&p.thousands,v=p&&p.decimal;if(m||v){var g=u.split(".");u=m?g[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m):g[0],v=v||".",g.length>1&&(u=u+v+g[1])}return u},readableArea:function(r,l,m){var h,p,m=L.Util.extend({},s,m);return l?(p=["ha","m"],type=typeof l,type==="string"?p=[l]:type!=="boolean"&&(p=l),h=r>=1e6&&p.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,m.km)+" km":r>=1e4&&p.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,m.ha)+" ha":L.GeometryUtil.formattedNumber(r,m.m)+" m"):(r/=.836127,h=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,m.mi)+" mi":r>=4840?L.GeometryUtil.formattedNumber(r/4840,m.ac)+" acres":L.GeometryUtil.formattedNumber(r,m.yd)+" yd"),h},readableDistance:function(r,l,u,h,v){var m,v=L.Util.extend({},s,v);switch(l?typeof l=="string"?l:"metric":u?"feet":h?"nauticalMile":"yards"){case"metric":m=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(r,v.m)+" m";break;case"feet":r*=3.28083,m=L.GeometryUtil.formattedNumber(r,v.ft)+" ft";break;case"nauticalMile":r*=.53996,m=L.GeometryUtil.formattedNumber(r/1e3,v.nm)+" nm";break;default:r*=1.09361,m=r>1760?L.GeometryUtil.formattedNumber(r/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(r,v.yd)+" yd"}return m},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,r,l,u){return this._checkCounterclockwise(s,l,u)!==this._checkCounterclockwise(r,l,u)&&this._checkCounterclockwise(s,r,l)!==this._checkCounterclockwise(s,r,u)},_checkCounterclockwise:function(s,r,l){return(l.y-s.y)*(r.x-s.x)>(r.y-s.y)*(l.x-s.x)}}),L.Polyline.include({intersects:function(){var s,r,l,u=this._getProjectedPoints(),h=u?u.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=h-1;s>=3;s--)if(r=u[s-1],l=u[s],this._lineSegmentsIntersectsRange(r,l,s-2))return!0;return!1},newLatLngIntersects:function(s,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),r)},newPointIntersects:function(s,r){var l=this._getProjectedPoints(),u=l?l.length:0,h=l?l[u-1]:null,p=u-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,s,p,r?1:0)},_tooFewPointsForIntersection:function(s){var r=this._getProjectedPoints(),l=r?r.length:0;return l+=s||0,!r||l<=3},_lineSegmentsIntersectsRange:function(s,r,l,u){var h,p,m=this._getProjectedPoints();u=u||0;for(var v=l;v>u;v--)if(h=m[v-1],p=m[v],L.LineUtil.segmentsIntersect(s,r,h,p))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],r=this._defaultShape(),l=0;l<r.length;l++)s.push(this._map.latLngToLayerPoint(r[l]));return s}}),L.Polygon.include({intersects:function(){var s,r,l,u,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=h.length,r=h[0],l=h[s-1],u=s-2,this._lineSegmentsIntersectsRange(l,r,u,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var r,l=L.DomUtil.create("div","leaflet-draw"),u=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(r=this._toolbars[h].addToolbar(s))&&(u||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),u=!0),l.appendChild(r));return l},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(s)},_toolbarEnabled:function(s){var r=s.target;for(var l in this._toolbars)this._toolbars[l]!==r&&this._toolbars[l].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var r,l=L.DomUtil.create("div","leaflet-draw-section"),u=0,h=this._toolbarClass||"",p=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,r=0;r<p.length;r++)p[r].enabled&&this._initModeHandler(p[r].handler,this._toolbarContainer,u++,h,p[r].title);if(u)return this._lastButtonIndex=--u,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),l.appendChild(this._toolbarContainer),l.appendChild(this._actionsContainer),l},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,l=this._actionButtons.length;r<l;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,r,l,u,h){var p=s.type;this._modes[p]={},this._modes[p].handler=s,this._modes[p].button=this._createButton({type:p,title:h,className:u+"-"+p,container:r,callback:this._modes[p].handler.enable,context:this._modes[p].handler}),this._modes[p].buttonIndex=l,this._modes[p].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var r=L.DomUtil.create("a",s.className||"",s.container),l=L.DomUtil.create("span","sr-only",s.container);r.href="#",r.appendChild(l),s.title&&(r.title=s.title,l.innerHTML=s.title),s.text&&(r.innerHTML=s.text,l.innerHTML=s.text);var u=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,u,s.callback,s.context),r},_disposeButton:function(s,r){var l=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,l,r)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var r,l,u,h,p=this._actionsContainer,m=this.getActions(s),v=m.length;for(l=0,u=this._actionButtons.length;l<u;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback);for(this._actionButtons=[];p.firstChild;)p.removeChild(p.firstChild);for(var g=0;g<v;g++)"enabled"in m[g]&&!m[g].enabled||(r=L.DomUtil.create("li","",p),h=this._createButton({title:m[g].title,text:m[g].text,container:r,callback:m[g].callback,context:m[g].context}),this._actionButtons.push({button:h,callback:m[g].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,r=this._lastButtonIndex,l=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=l+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var r=this._map.latLngToLayerPoint(s),l=this._container;return this._container&&(this._visible&&(l.style.visibility="inherit"),L.DomUtil.setPosition(l,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var r in this.options)this.options.hasOwnProperty(r)&&s[r]&&(s[r]=L.extend({},this.options[r],s[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var r in this._modes)this._modes.hasOwnProperty(r)&&s.hasOwnProperty(r)&&this._modes[r].handler.setOptions(s[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(s){var r=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,r=this.options.featureGroup,l=r.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,r){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(s.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var r=L.Util.stamp(s);this._uneditedLayerProps[r]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var r=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[r].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[r].latlng),s.setRadius(this._uneditedLayerProps[r].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[r].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var r,l,u=s.layer||s.target||s;this._backupLayer(u),this.options.poly&&(l=L.Util.extend({},this.options.poly),u.options.poly=l),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=u.options.color,r.fillColor=u.options.fillColor),u.options.original=L.extend({},u.options),u.options.editing=r),u instanceof L.Marker?(u.editing&&u.editing.enable(),u.dragging.enable(),u.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):u.editing.enable()},_disableLayerEdit:function(s){var r=s.layer||s.target||s;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var r=s.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(s){var r=s.originalEvent.changedTouches[0],l=this._map.mouseEventToLayerPoint(r),u=this._map.layerPointToLatLng(l);s.target.setLatLng(u)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,r){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var r=s.layer||s.target||s;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(s){var r=s.layer||s.target||s;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);const nf=(e,n)=>e?e.length<=n?e:e.substring(0,n)+"...":"",Ju=e=>e.length*6+12,ul=(e,n)=>!(e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom),Qb=(e,n)=>{if(!e||n.length===0)return new Set;const i=[],a=e.getBounds();n.forEach(l=>{if(a.contains(l.getLatLng())){const u=e.latLngToContainerPoint(l.getLatLng()),h=l.locationData;h&&i.push({marker:l,pixelPos:u,location:h})}});const s=i.map(({marker:l,pixelPos:u,location:h})=>{const v=Ju(h.name),g=h.description?Ju(`${h.name}: ${nf(h.description,50)}`):v;return{marker:l,location:h,markerBox:{left:u.x-15,right:u.x+15,top:u.y-15,bottom:u.y+15},baseLabelBox:{left:u.x-v/2,right:u.x+v/2,top:u.y+15+2,bottom:u.y+15+2+20},descLabelBox:h.description?{left:u.x-g/2,right:u.x+g/2,top:u.y+15+2,bottom:u.y+15+2+20}:null}}),r=new Set;return s.forEach(({marker:l,location:u,markerBox:h,baseLabelBox:p,descLabelBox:m},v)=>{if(!u.description)return;let g=!1;for(let w=0;w<s.length;w++){if(v===w)continue;const E=s[w];if(ul(m,E.markerBox)||ul(m,E.baseLabelBox)){g=!0;break}if(E.descLabelBox&&r.has(E.location.id)&&ul(m,E.descLabelBox)){g=!0;break}}g||r.add(u.id)}),r},ek={__name:"MapView",props:{locations:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},center:{type:Object,default:null},zoom:{type:Number,default:13},clickable:{type:Boolean,default:!1},areas:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1},userLocation:{type:Object,default:null},highlightLocationId:{type:String,default:null},highlightLocationIds:{type:Array,default:()=>[]},marshalMode:{type:Boolean,default:!1}},emits:["location-click","map-click","area-click","polygon-complete","polygon-drawing"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=O(null);let l=null;n({getMapCenter:()=>{if(l){const Z=l.getCenter();return{lat:Z.lat,lng:Z.lng}}return null},getMapZoom:()=>l?l.getZoom():null});const p=O([]);let m=null,v=!0,g=!1;const w=O(new Set),E=O([]);let A=null,P=null,x=null;const $=()=>{if(!l)return;const Z=Qb(l,p.value),ne=Array.from(w.value).sort().join(","),ge=Array.from(Z).sort().join(",");ne!==ge&&(w.value=Z,te())},b=()=>{if(x&&(x.remove(),x=null),!l||!a.userLocation)return;const Z=Ut.divIcon({className:"user-location-marker",html:`
      <div style="
        position: relative;
        width: 20px;
        height: 20px;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          background-color: #4285f4;
          border: 3px solid white;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        "></div>
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 40px;
          height: 40px;
          background-color: rgba(66, 133, 244, 0.2);
          border-radius: 50%;
          animation: pulse 2s ease-out infinite;
        "></div>
      </div>
    `,iconSize:[40,40],iconAnchor:[20,20]});x=Ut.marker([a.userLocation.lat,a.userLocation.lng],{icon:Z}).addTo(l).bindPopup("Your location")},S=()=>{if(!r.value)return;let Z=51.505,ne=-.09,ge=13;if(!a.center&&a.locations.length>0){const xe=a.locations.map(pe=>pe.latitude),ze=a.locations.map(pe=>pe.longitude);Z=xe.reduce((pe,$e)=>pe+$e,0)/xe.length,ne=ze.reduce((pe,$e)=>pe+$e,0)/ze.length,ge=10,g=!0}else a.center&&(Z=a.center.lat,ne=a.center.lng,ge=a.zoom??13);l=Ut.map(r.value).setView([Z,ne],ge),Ut.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(l),a.clickable&&l.on("click",xe=>{a.drawingMode||s("map-click",{lat:xe.latlng.lat,lng:xe.latlng.lng})}),l.on("zoomend moveend",()=>{$()}),te(),T(),I(),b(),N()},T=()=>{if(m&&(m.remove(),m=null),!l||a.route.length===0)return;const Z=a.route.map(ne=>[ne.lat,ne.lng]);m=Ut.polyline(Z,{color:"blue",weight:4,opacity:.7}).addTo(l)},I=()=>{E.value.forEach(Z=>Z.remove()),E.value=[],!(!l||a.areas.length===0)&&a.areas.forEach(Z=>{const ne=typeof Z.polygon=="string"?JSON.parse(Z.polygon):Z.polygon;if(!ne||ne.length===0)return;const ge=ne.map($e=>[$e.lat,$e.lng]),xe=Z.id===a.selectedAreaId,ze=Z.color||"#667eea",pe=Ut.polygon(ge,{color:ze,fillColor:ze,fillOpacity:xe?.4:.2,weight:xe?3:2,opacity:.8}).addTo(l);pe.setStyle({pane:"overlayPane"}),a.drawingMode||(pe.on("click",()=>s("area-click",Z)),pe.on("mouseover",()=>{pe.setStyle({fillOpacity:.4})}),pe.on("mouseout",()=>{pe.setStyle({fillOpacity:xe?.4:.2})})),E.value.push(pe)})},N=()=>{if(l)if(P||(P=new Ut.FeatureGroup,l.addLayer(P)),A&&(l.removeControl(A),A=null),a.drawingMode){A=new Ut.Control.Draw({draw:{polygon:{allowIntersection:!1,showArea:!1,shapeOptions:{color:"#667eea",weight:3,opacity:.8,fillOpacity:.3},repeatMode:!1,touchExtend:!0,metric:!0,feet:!1,nautic:!1},polyline:!1,rectangle:!1,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:P,remove:!1}}),l.addControl(A);let Z=null;const ne=$e=>{Z={x:$e.originalEvent.clientX,y:$e.originalEvent.clientY}},ge=$e=>{Z&&($e.originalEvent.clientX-Z.x,$e.originalEvent.clientY-Z.y)},xe=()=>{Z=null};l.on("mousedown",ne),l.on("mousemove",ge),l.on("mouseup",xe),new Ut.Draw.Polygon(l,A.options.draw.polygon).enable(),l._drawingHandlers={handleMouseDown:ne,handleMouseMove:ge,handleMouseUp:xe};const pe=$e=>{if($e.layers&&$e.layers.getLayers().length>0){const Ce=$e.layers.getLayers()[0];if(Ce&&Ce.getLatLngs){const Ee=Ce.getLatLngs()[0]||[];s("polygon-drawing",Ee)}}};l.on(Ut.Draw.Event.DRAWVERTEX,pe),l._drawVertexHandler=pe,l.on(Ut.Draw.Event.CREATED,$e=>{const Ee=$e.layer.getLatLngs()[0].map(K=>({lat:K.lat,lng:K.lng}));s("polygon-complete",Ee),P.clearLayers(),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(Ut.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)})}else P&&P.clearLayers(),l.off(Ut.Draw.Event.CREATED),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(Ut.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)},te=()=>{if(!(l&&l._animatingZoom)&&(p.value.forEach(Z=>Z.remove()),p.value=[],!!l)){if(a.locations.forEach(Z=>{const ne=Z.checkedInCount||0,ge=Z.requiredMarshals||1,xe=ne>=ge,ze=ne===0,pe=a.highlightLocationId===Z.id||a.highlightLocationIds.includes(Z.id),$e=a.marshalMode&&!pe;let Ce;a.marshalMode?Ce=pe?"#667eea":"#999":Ce=xe?"green":ze?"red":"orange";const Ee=Z.areaColor||"#999",K=Z.areaId&&!a.marshalMode,U=w.value.has(Z.id)&&Z.description?`${Z.name}: ${nf(Z.description,50)}`:Z.name,re=pe?`
      <div style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        border: 3px solid #667eea;
        border-radius: 50%;
        animation: highlight-pulse 1.5s ease-out infinite;
      "></div>
    `:"",we=$e?"0.6":"1",De=pe?"36px":a.marshalMode?"20px":"30px",Ue=pe?"#667eea":$e?"#e0e0e0":"white",qe=pe?"white":$e?"#888":"#333",Se=pe?"#667eea":"white",z=a.marshalMode&&!pe||a.marshalMode?"":`${ne}/${ge}`,q=Ut.divIcon({className:"custom-marker",html:`
        <div style="display: flex; flex-direction: column; align-items: center; position: relative; opacity: ${we};">
          ${re}
          <div style="position: relative; display: flex; align-items: center; gap: 4px;">
            ${K?`<div style="
              width: 8px;
              height: 8px;
              border-radius: 50%;
              background-color: ${Ee};
              border: 2px solid white;
              box-shadow: 0 1px 2px rgba(0,0,0,0.3);
            "></div>`:""}
            <div style="
              background-color: ${Ce};
              width: ${De};
              height: ${De};
              border-radius: 50%;
              border: 3px solid ${Se};
              box-shadow: 0 2px 5px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
              color: white;
              font-weight: bold;
              font-size: ${pe?"14px":"12px"};
            ">
              ${z}
            </div>
          </div>
          <div style="
            background-color: ${Ue};
            padding: 2px 6px;
            border-radius: 3px;
            font-size: ${pe?"12px":"11px"};
            font-weight: bold;
            color: ${qe};
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            margin-top: 2px;
          ">
            ${U}
          </div>
        </div>
      `,iconSize:[30,50],iconAnchor:[15,25]}),J=a.marshalMode?`<b>${Z.name}</b>${Z.description?`<br>${Z.description}`:""}`:`<b>${Z.name}</b><br>${Z.description||""}<br>Checked in: ${ne}/${ge}`,_e=Ut.marker([Z.latitude,Z.longitude],{icon:q}).addTo(l).bindPopup(J);_e.on("click",()=>{s("location-click",Z)}),_e.locationData=Z,p.value.push(_e)}),l&&v&&!a.center&&!g){const Z=[];if(a.locations.length>0&&Z.push(...a.locations.map(ne=>[ne.latitude,ne.longitude])),a.route.length>0&&Z.push(...a.route.map(ne=>[ne.lat,ne.lng])),Z.length>0){const ne=Ut.latLngBounds(Z);l.fitBounds(ne,{padding:[50,50]}),v=!1,g=!0}}else a.center&&(v=!1);setTimeout(()=>{l&&!l._animatingZoom&&$()},100)}};return Rn(()=>{S();let Z,ne=0,ge=0;const xe=new ResizeObserver(ze=>{if(l&&ze.length>0){const{width:pe,height:$e}=ze[0].contentRect;(Math.abs(pe-ne)>10||Math.abs($e-ge)>10)&&(ne=pe,ge=$e,clearTimeout(Z),Z=setTimeout(()=>{l.invalidateSize()},150))}});r.value&&xe.observe(r.value),zi(()=>{clearTimeout(Z),xe.disconnect()})}),Ye(()=>a.locations,Z=>{if(te(),l&&!g&&Z.length>0&&!a.center){const ne=Z.map(pe=>pe.latitude),ge=Z.map(pe=>pe.longitude),xe=ne.reduce((pe,$e)=>pe+$e,0)/ne.length,ze=ge.reduce((pe,$e)=>pe+$e,0)/ge.length;l.setView([xe,ze],10),g=!0,v=!1}},{deep:!0}),Ye(()=>a.center,Z=>{l&&l.setView([Z.lat,Z.lng],a.zoom)}),Ye(()=>a.route,()=>{T(),te()},{deep:!0}),Ye(()=>a.areas,()=>{I()},{deep:!0}),Ye(()=>a.selectedAreaId,()=>{I()}),Ye(()=>a.drawingMode,()=>{N()}),Ye(()=>a.userLocation,()=>{b()},{deep:!0}),Ye(()=>a.highlightLocationId,()=>{te()}),Ye(()=>a.highlightLocationIds,()=>{te()},{deep:!0}),Ye(()=>a.marshalMode,()=>{te()}),(Z,ne)=>(y(),k("div",{ref_key:"mapContainer",ref:r,class:"map-container"},null,512))}},er=He(ek,[["__scopeId","data-v-9017735b"]]);function cn(e,n){return e.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}const tk={class:"areas-selection"},nk={key:0,class:"areas-selection-header"},sk={class:"areas-list"},ik=["checked","onChange"],ok={__name:"AreasSelection",props:{areas:{type:Array,default:()=>[]},selectedAreaIds:{type:Array,default:()=>[]}},emits:["update:selectedAreaIds"],setup(e,{emit:n}){const i=e,a=n,s=de(()=>[...i.areas].sort((h,p)=>h.displayOrder!==p.displayOrder?h.displayOrder-p.displayOrder:cn(h.name,p.name))),r=de(()=>i.areas.length>0&&i.selectedAreaIds.length===i.areas.length),l=h=>{const p=[...i.selectedAreaIds],m=p.indexOf(h);m>=0?p.splice(m,1):p.push(h),a("update:selectedAreaIds",p)},u=()=>{r.value?a("update:selectedAreaIds",[]):a("update:selectedAreaIds",i.areas.map(h=>h.id))};return(h,p)=>(y(),k("div",tk,[e.areas.length>1?(y(),k("div",nk,[d("button",{onClick:u,class:"toggle-all-btn"},M(r.value?"Deselect all":"Select all"),1)])):V("",!0),d("div",sk,[(y(!0),k(me,null,Pe(s.value,m=>(y(),k("label",{class:"area-checkbox",key:m.id},[d("input",{type:"checkbox",checked:e.selectedAreaIds.includes(m.id),onChange:v=>l(m.id)},null,40,ik),d("span",{class:"area-color-dot",style:Gt({backgroundColor:m.color||"#667eea"})},null,4),Oe(" "+M(m.name),1)]))),128))])]))}},sf=He(ok,[["__scopeId","data-v-46364246"]]),ak={class:"course-areas-tab"},rk={class:"map-wrapper"},lk={key:0},ck={key:1},uk={key:0,class:"filters-content"},dk={class:"filter-section"},hk={class:"filter-checkbox"},fk={class:"filter-checkbox"},pk={class:"filter-checkbox"},mk={key:0,class:"filter-section"},vk={key:0},_k={key:1},gk={key:0,class:"add-menu-content"},yk={__name:"CourseAreasTab",props:{checkpoints:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1}},emits:["map-click","location-click","area-click","add-checkpoint","add-multiple-checkpoints","import-checkpoints","select-location","add-area","select-area","polygon-complete","cancel-drawing","add-checkpoint-from-map","add-many-checkpoints-from-map","add-area-from-map"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=O(null),l=O(null),u=O(!0),h=O(!1),p=O(null),m=O({showRoute:!0,showCheckpoints:!0,showAreas:!0,selectedAreas:[]}),v=()=>{u.value=!u.value,u.value||(h.value=!1)},g=()=>{h.value=!h.value,h.value&&(u.value=!0)},w=T=>{h.value=!1,listAddButtonPosition.value=null,T==="checkpoint"?(s("add-checkpoint-from-map"),A()):T==="many-checkpoints"?(s("add-many-checkpoints-from-map"),A()):T==="area"&&(s("add-area-from-map"),A())},E=()=>{h.value=!1,s("import-checkpoints")},A=()=>{r.value&&r.value.scrollIntoView({behavior:"smooth",block:"start"})};n({scrollMapIntoView:A,getMapCenter:()=>l.value?.getMapCenter()||null,getMapZoom:()=>l.value?.getMapZoom()||null}),Ye(()=>a.areas,T=>{if(T.length>0){const I=new Set(m.value.selectedAreas);T.forEach(N=>{I.has(N.id)||m.value.selectedAreas.push(N.id)}),m.value.selectedAreas=m.value.selectedAreas.filter(N=>T.some(te=>te.id===N))}},{immediate:!0}),de(()=>[...a.areas].sort((T,I)=>T.displayOrder!==I.displayOrder?T.displayOrder-I.displayOrder:cn(T.name,I.name)));const $=de(()=>m.value.showRoute?a.route:[]),b=de(()=>m.value.showCheckpoints?a.checkpoints.filter(T=>{const I=T.areaIds||T.AreaIds;return I&&Array.isArray(I)?I.some(N=>m.value.selectedAreas.includes(N)):T.areaId?m.value.selectedAreas.includes(T.areaId):!1}):[]),S=de(()=>m.value.showAreas?a.areas.filter(T=>m.value.selectedAreas.includes(T.id)):[]);return(T,I)=>(y(),k("div",ak,[d("div",{class:"map-section",ref_key:"mapSection",ref:r},[d("div",rk,[Ae(er,{ref_key:"mapView",ref:l,locations:b.value,route:$.value,areas:S.value,selectedAreaId:e.selectedAreaId,clickable:!0,drawingMode:e.drawingMode,onMapClick:I[0]||(I[0]=N=>T.$emit("map-click",N)),onLocationClick:I[1]||(I[1]=N=>T.$emit("location-click",N)),onAreaClick:I[2]||(I[2]=N=>T.$emit("area-click",N)),onPolygonComplete:I[3]||(I[3]=N=>T.$emit("polygon-complete",N))},null,8,["locations","route","areas","selectedAreaId","drawingMode"])]),h.value?V("",!0):(y(),k("div",{key:0,class:Fe(["visibility-filters",{collapsed:u.value}])},[d("button",{onClick:v,class:"filters-toggle"},[u.value?(y(),k("span",lk,"Show...")):(y(),k("span",ck,""))]),u.value?V("",!0):(y(),k("div",uk,[d("div",dk,[I[14]||(I[14]=d("h4",null,"Show on map:",-1)),d("label",hk,[Me(d("input",{type:"checkbox","onUpdate:modelValue":I[4]||(I[4]=N=>m.value.showRoute=N)},null,512),[[Pi,m.value.showRoute]]),I[11]||(I[11]=Oe(" Route ",-1))]),d("label",fk,[Me(d("input",{type:"checkbox","onUpdate:modelValue":I[5]||(I[5]=N=>m.value.showCheckpoints=N)},null,512),[[Pi,m.value.showCheckpoints]]),I[12]||(I[12]=Oe(" Checkpoints ",-1))]),d("label",pk,[Me(d("input",{type:"checkbox","onUpdate:modelValue":I[6]||(I[6]=N=>m.value.showAreas=N)},null,512),[[Pi,m.value.showAreas]]),I[13]||(I[13]=Oe(" Areas ",-1))])]),e.areas.length>0&&m.value.showAreas?(y(),k("div",mk,[I[15]||(I[15]=d("h4",null,"Filter areas:",-1)),Ae(sf,{areas:e.areas,"selected-area-ids":m.value.selectedAreas,"onUpdate:selectedAreaIds":I[7]||(I[7]=N=>m.value.selectedAreas=N)},null,8,["areas","selected-area-ids"])])):V("",!0)]))],2)),u.value?(y(),k("div",{key:1,class:Fe(["add-menu",{expanded:h.value}])},[d("button",{onClick:g,class:"add-toggle",ref_key:"addButtonRef",ref:p},[h.value?(y(),k("span",vk,"")):(y(),k("span",_k,"Add..."))],512),h.value?(y(),k("div",gk,[d("button",{onClick:I[8]||(I[8]=N=>w("checkpoint")),class:"add-menu-item"}," Checkpoint "),d("button",{onClick:I[9]||(I[9]=N=>w("many-checkpoints")),class:"add-menu-item"}," Many checkpoints "),d("button",{onClick:I[10]||(I[10]=N=>w("area")),class:"add-menu-item"}," Area "),d("button",{onClick:E,class:"add-menu-item"}," Import checkpoints... ")])):V("",!0)],2)):V("",!0)],512)]))}},bk=He(yk,[["__scopeId","data-v-68354b57"]]),kk=(e,n)=>{const i=String(e).trim(),a=String(n).trim(),s=parseFloat(i),r=parseFloat(a),l=!isNaN(s)&&String(s)===i,u=!isNaN(r)&&String(r)===a;return l&&u?s-r:i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"})},wk=e=>e&&e.isCheckedIn?"":"",Lk={class:"marshals-tab"},Ck={class:"marshals-tab-header"},xk={class:"button-group"},Ek={class:"marshals-grid"},Tk={class:"marshals-table"},Sk={key:0,class:"sort-indicator"},Ik={key:0,class:"sort-indicator"},Mk={key:0,class:"sort-indicator"},Ak=["onClick"],Pk=["rowspan"],$k=["value","onChange"],Dk=["rowspan"],Ok=["onClick"],Rk=["onClick"],Nk=["onClick"],Bk={style:{color:"#999","font-style":"italic"}},Fk={class:"hide-on-mobile"},zk=["onClick"],Uk=["onClick"],Hk={__name:"MarshalsTab",props:{marshals:{type:Array,required:!0},assignments:{type:Array,required:!0},locations:{type:Array,required:!0}},emits:["add-marshal","import-marshals","select-marshal","delete-marshal","change-assignment-status"],setup(e,{emit:n}){const{terms:i}=Rt(),a=e,s=O("name"),r=O("asc"),l=g=>{s.value===g?r.value=r.value==="asc"?"desc":"asc":(s.value=g,r.value="asc")},u=g=>a.assignments.filter(w=>w.marshalId===g),h=g=>{const w=a.locations.find(E=>E.id===g);return w?w.name:"Unknown"},p=de(()=>{const g=[...a.marshals];return g.sort((w,E)=>{let A=0;if(s.value==="name")A=w.name.localeCompare(E.name);else if(s.value==="checkpoint"){const P=u(w.id),x=u(E.id),$=P.length>0?h(P[0].locationId):"",b=x.length>0?h(x[0].locationId):"";A=kk($,b)}else if(s.value==="status"){const P=u(w.id),x=u(E.id),$=P.length>0&&P[0].isCheckedIn?1:0;A=(x.length>0&&x[0].isCheckedIn?1:0)-$}return r.value==="asc"?A:-A}),g}),m=g=>g.isAdminCheckedIn?"admin-checked-in":g.isWrongLocation?"wrong-location":g.isCheckedIn?"checked-in":"not-checked-in",v=g=>g.isCheckedIn?"status-checked-in":"status-not-checked-in";return(g,w)=>(y(),k("div",Lk,[d("div",Ck,[d("h2",null,M(W(i).people)+" management",1),d("div",xk,[d("button",{onClick:w[0]||(w[0]=E=>g.$emit("add-marshal")),class:"btn btn-primary"}," Add "+M(W(i).person.toLowerCase()),1),d("button",{onClick:w[1]||(w[1]=E=>g.$emit("import-marshals")),class:"btn btn-secondary"}," Import CSV ")])]),d("div",Ek,[d("table",Tk,[d("thead",null,[d("tr",null,[d("th",{onClick:w[2]||(w[2]=E=>l("name")),class:"sortable"},[w[8]||(w[8]=Oe(" Name ",-1)),s.value==="name"?(y(),k("span",Sk,M(r.value==="asc"?"":""),1)):V("",!0)]),d("th",{onClick:w[3]||(w[3]=E=>l("checkpoint")),class:"sortable"},[Oe(M(W(i).checkpoint)+" ",1),s.value==="checkpoint"?(y(),k("span",Ik,M(r.value==="asc"?"":""),1)):V("",!0)]),d("th",{onClick:w[4]||(w[4]=E=>l("status")),class:"sortable"},[w[9]||(w[9]=Oe(" Status ",-1)),s.value==="status"?(y(),k("span",Mk,M(r.value==="asc"?"":""),1)):V("",!0)]),w[10]||(w[10]=d("th",{class:"hide-on-mobile"},"Actions",-1))])]),d("tbody",null,[(y(!0),k(me,null,Pe(p.value,E=>(y(),k(me,{key:E.id},[u(E.id).length>0?(y(!0),k(me,{key:0},Pe(u(E.id),(A,P)=>(y(),k("tr",{key:`${E.id}-${A.id}`,class:"marshal-row",onClick:x=>g.$emit("select-marshal",E)},[P===0?(y(),k("td",{key:0,rowspan:u(E.id).length},M(E.name),9,Pk)):V("",!0),d("td",null,M(h(A.locationId)),1),d("td",{onClick:w[5]||(w[5]=kt(()=>{},["stop"]))},[d("select",{value:m(A),onChange:x=>g.$emit("change-assignment-status",{assignment:A,status:x.target.value}),class:Fe(["status-select hide-on-mobile",v(A)])},[...w[11]||(w[11]=[d("option",{value:"not-checked-in"},"Not checked-in",-1),d("option",{value:"checked-in"},"Checked-in",-1),d("option",{value:"admin-checked-in"},"Admin checked-in",-1),d("option",{value:"wrong-location"},"Checked-in but not at correct location",-1)])],42,$k),d("span",{class:Fe(["status-icon show-on-mobile",v(A)])},M(W(wk)(A)),3)]),P===0?(y(),k("td",{key:1,rowspan:u(E.id).length,class:"hide-on-mobile"},[d("div",{class:"action-buttons",onClick:w[6]||(w[6]=kt(()=>{},["stop"]))},[d("button",{onClick:x=>g.$emit("select-marshal",E),class:"btn btn-small btn-secondary"}," Edit ",8,Ok),d("button",{onClick:x=>g.$emit("delete-marshal",E),class:"btn btn-small btn-danger"}," Delete ",8,Rk)])],8,Dk)):V("",!0)],8,Ak))),128)):(y(),k("tr",{key:1,class:"marshal-row",onClick:A=>g.$emit("select-marshal",E)},[d("td",null,M(E.name),1),d("td",Bk,"No "+M(W(i).checkpoint.toLowerCase())+" assigned",1),w[12]||(w[12]=d("td",null,[d("span",{class:"hide-on-mobile"},"-"),d("span",{class:"status-icon show-on-mobile",style:{color:"#999"}},"-")],-1)),d("td",Fk,[d("div",{class:"action-buttons",onClick:w[7]||(w[7]=kt(()=>{},["stop"]))},[d("button",{onClick:A=>g.$emit("select-marshal",E),class:"btn btn-small btn-secondary"}," Edit ",8,zk),d("button",{onClick:A=>g.$emit("delete-marshal",E),class:"btn btn-small btn-danger"}," Delete ",8,Uk)])])],8,Nk))],64))),128))])])])]))}},Vk=He(Hk,[["__scopeId","data-v-47bbd924"]]),Zk={class:"checklists-tab"},qk={class:"checklists-tab-header"},jk={class:"button-group"},Wk={class:"filters-section"},Gk={class:"filter-group"},Kk={class:"filter-checkbox"},Yk=["checked"],Jk={key:0,class:"checkbox-dropdown"},Xk={class:"checkbox-dropdown-header"},Qk={class:"checkbox-list"},ew=["checked","onChange"],tw={class:"filter-group"},nw={class:"filter-checkbox"},sw=["checked"],iw={key:0,class:"checkbox-dropdown"},ow={class:"checkbox-dropdown-header"},aw={class:"checkbox-list"},rw=["checked","onChange"],lw={class:"filter-group"},cw={class:"filter-checkbox"},uw=["checked"],dw={key:0,class:"checkbox-dropdown"},hw={class:"checkbox-dropdown-header"},fw={class:"checkbox-list"},pw=["checked","onChange"],mw={class:"checklist-items-list"},vw={key:0,class:"empty-state"},_w={class:"checklist-item-content"},gw=["onClick"],yw={class:"checklist-item-scopes"},bw=["onClick"],kw={__name:"ChecklistsTab",props:{checklistItems:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},completionReport:{type:Object,default:null}},emits:["add-checklist-item","select-checklist-item"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=O(!0),l=O(!0),u=O(!0),h=O([]),p=O([]),m=O([]),v=de(()=>[...s.areas].sort((G,U)=>G.displayOrder!==U.displayOrder?G.displayOrder-U.displayOrder:cn(G.name,U.name))),g=de(()=>[...s.locations].sort((G,U)=>cn(G.name,U.name))),w=de(()=>[...s.marshals].sort((G,U)=>cn(G.name,U.name))),E=de(()=>s.areas.length>0&&h.value.length===s.areas.length),A=de(()=>s.locations.length>0&&p.value.length===s.locations.length),P=de(()=>s.marshals.length>0&&m.value.length===s.marshals.length),x=de(()=>!r.value||!l.value||!u.value),$=()=>{r.value=!r.value,!r.value&&h.value.length===0&&(h.value=s.areas.map(G=>G.id))},b=()=>{l.value=!l.value,!l.value&&p.value.length===0&&(p.value=s.locations.map(G=>G.id))},S=()=>{u.value=!u.value,!u.value&&m.value.length===0&&(m.value=s.marshals.map(G=>G.id))},T=G=>{const U=h.value.indexOf(G);U>=0?h.value.splice(U,1):h.value.push(G)},I=G=>{const U=p.value.indexOf(G);U>=0?p.value.splice(U,1):p.value.push(G)},N=G=>{const U=m.value.indexOf(G);U>=0?m.value.splice(U,1):m.value.push(G)},te=()=>{E.value?h.value=[]:h.value=s.areas.map(G=>G.id)},Z=()=>{A.value?p.value=[]:p.value=s.locations.map(G=>G.id)},ne=()=>{P.value?m.value=[]:m.value=s.marshals.map(G=>G.id)},ge=()=>{r.value=!0,l.value=!0,u.value=!0,h.value=[],p.value=[],m.value=[]},xe=G=>{const U=s.marshals.find(re=>re.id===G);return!U||!U.assignments?[]:U.assignments.map(re=>re.locationId)},ze=G=>{const U=new Set;return G.forEach(re=>{const we=s.locations.find(De=>De.id===re);we&&we.areaIds&&we.areaIds.forEach(De=>U.add(De))}),Array.from(U)},pe=(G,U)=>{if(!U)return!1;const re=xe(G),we=ze(re);return U.scope==="SpecificPeople"&&U.itemType==="Marshal"?U.ids.includes(G)||U.ids.includes("ALL_MARSHALS"):U.scope==="EveryoneAtCheckpoints"&&U.itemType==="Checkpoint"?U.ids.includes("ALL_CHECKPOINTS")||re.some(De=>U.ids.includes(De)):U.scope==="OnePerCheckpoint"&&U.itemType==="Checkpoint"?U.ids.includes("ALL_CHECKPOINTS")||re.some(De=>U.ids.includes(De)):U.scope==="OnePerCheckpoint"&&U.itemType==="Area"?U.ids.includes("ALL_AREAS")||we.some(De=>U.ids.includes(De)):U.scope==="EveryoneInAreas"&&U.itemType==="Area"?U.ids.includes("ALL_AREAS")||we.some(De=>U.ids.includes(De)):U.scope==="OnePerArea"&&U.itemType==="Area"?U.ids.includes("ALL_AREAS")||we.some(De=>U.ids.includes(De)):(U.scope==="EveryAreaLead"||U.scope==="OneLeadPerArea")&&U.itemType==="Area"?U.ids.includes("ALL_AREAS")||we.some(De=>U.ids.includes(De)):!1},$e=de(()=>{let G=s.checklistItems;return!r.value&&h.value.length>0&&(G=G.filter(U=>U.scopeConfigurations?U.scopeConfigurations.some(re=>re.itemType==="Area"&&h.value.some(we=>re.ids.includes(we))):!1)),!l.value&&p.value.length>0&&(G=G.filter(U=>U.scopeConfigurations?U.scopeConfigurations.some(re=>re.itemType==="Checkpoint"&&p.value.some(we=>re.ids.includes(we))):!1)),!u.value&&m.value.length>0&&(G=G.filter(U=>U.scopeConfigurations?m.value.some(re=>U.scopeConfigurations.some(we=>pe(re,we))):!1)),G}),Ce=de(()=>[...$e.value].sort((G,U)=>G.displayOrder!==U.displayOrder?G.displayOrder-U.displayOrder:cn(G.text,U.text))),Ee=G=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${a.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${a.value.checkpoints}`,SpecificPeople:`Specific ${a.value.people}`,OnePerArea:`One per ${a.value.area}`,OnePerCheckpoint:`One per ${a.value.checkpoint}`,EveryAreaLead:`Every ${a.value.area} lead`,OneLeadPerArea:`One lead per ${a.value.area}`,AreaLead:`${i.value.area} lead`})[G]||G,K=G=>{if(!G)return"";const U=Ee(G.scope);if(G.itemType===null)return U;const re=G.ids||[];if(re.includes("ALL_MARSHALS"))return`${U} (Everyone)`;if(re.includes("ALL_AREAS"))return`${U} (All ${a.value.areas})`;if(re.includes("ALL_CHECKPOINTS"))return`${U} (All ${a.value.checkpoints})`;const we=re.length;return we===0?U:`${U} (${we})`};return(G,U)=>(y(),k("div",Zk,[d("div",qk,[d("h2",null,M(W(i).checklists),1),d("div",jk,[d("button",{onClick:U[0]||(U[0]=re=>G.$emit("add-checklist-item")),class:"btn btn-primary"}," Add "+M(W(a).checklist),1)])]),d("div",Wk,[d("div",Gk,[d("h4",null,"Filter by "+M(W(a).area)+":",1),d("label",Kk,[d("input",{type:"checkbox",checked:r.value,onChange:$},null,40,Yk),Oe(" All "+M(W(a).areas),1)]),r.value?V("",!0):(y(),k("div",Jk,[d("div",Xk,[d("button",{onClick:te,class:"toggle-all-btn"},M(E.value?"Deselect all":"Select all"),1)]),d("div",Qk,[(y(!0),k(me,null,Pe(v.value,re=>(y(),k("label",{key:re.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:h.value.includes(re.id),onChange:we=>T(re.id)},null,40,ew),d("span",{class:"area-color-dot",style:Gt({backgroundColor:re.color||"#667eea"})},null,4),Oe(" "+M(re.name),1)]))),128))])]))]),d("div",tw,[d("h4",null,"Filter by "+M(W(a).checkpoint)+":",1),d("label",nw,[d("input",{type:"checkbox",checked:l.value,onChange:b},null,40,sw),Oe(" All "+M(W(a).checkpoints),1)]),l.value?V("",!0):(y(),k("div",iw,[d("div",ow,[d("button",{onClick:Z,class:"toggle-all-btn"},M(A.value?"Deselect all":"Select all"),1)]),d("div",aw,[(y(!0),k(me,null,Pe(g.value,re=>(y(),k("label",{key:re.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:p.value.includes(re.id),onChange:we=>I(re.id)},null,40,rw),Oe(" "+M(re.name),1)]))),128))])]))]),d("div",lw,[d("h4",null,"Filter by "+M(W(a).person)+":",1),d("label",cw,[d("input",{type:"checkbox",checked:u.value,onChange:S},null,40,uw),Oe(" All "+M(W(a).people),1)]),u.value?V("",!0):(y(),k("div",dw,[d("div",hw,[d("button",{onClick:ne,class:"toggle-all-btn"},M(P.value?"Deselect all":"Select all"),1)]),d("div",fw,[(y(!0),k(me,null,Pe(w.value,re=>(y(),k("label",{key:re.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:m.value.includes(re.id),onChange:we=>N(re.id)},null,40,pw),Oe(" "+M(re.name),1)]))),128))])]))]),x.value?(y(),k("button",{key:0,onClick:ge,class:"btn btn-secondary btn-small"}," Clear filters ")):V("",!0)]),d("div",mw,[$e.value.length===0?(y(),k("div",vw,[d("p",null,M(x.value?"No checklist items match the selected filters.":"No checklist items yet. Create one to get started!"),1)])):V("",!0),(y(!0),k(me,null,Pe(Ce.value,re=>(y(),k("div",{key:re.itemId,class:"checklist-item-card"},[d("div",_w,[d("div",{class:"checklist-item-title",onClick:we=>G.$emit("select-checklist-item",re,"details")},[d("strong",null,M(re.text),1)],8,gw),d("div",yw,[(y(!0),k(me,null,Pe(re.scopeConfigurations,(we,De)=>(y(),k("span",{key:De,class:"scope-badge",onClick:Ue=>G.$emit("select-checklist-item",re,"visibility")},M(K(we)),9,bw))),128))])])]))),128))])]))}},ww=He(kw,[["__scopeId","data-v-5b51ce47"]]),Lw={class:"notes-tab"},Cw={class:"notes-tab-header"},xw={class:"button-group"},Ew={class:"filters-section"},Tw={class:"filter-group"},Sw={class:"priority-filters"},Iw=["checked","onChange"],Mw={class:"filter-group"},Aw={class:"filter-checkbox"},Pw=["checked"],$w={key:0,class:"checkbox-dropdown"},Dw={class:"checkbox-list"},Ow=["checked","onChange"],Rw={class:"notes-list"},Nw={key:0,class:"empty-state"},Bw=["onClick"],Fw={class:"note-header"},zw={class:"note-title-row"},Uw={key:0,class:"pin-icon",title:"Pinned"},Hw={class:"note-meta"},Vw={key:0,class:"category-badge"},Zw={class:"created-info"},qw={key:0,class:"note-preview"},jw={class:"note-scopes"},Ww={__name:"NotesTab",props:{notes:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]}},emits:["add-note","select-note"],setup(e,{emit:n}){const i=e,a=[{value:"Urgent",label:"Urgent"},{value:"High",label:"High"},{value:"Normal",label:"Normal"},{value:"Low",label:"Low"}],s=O(!0),r=O([]),l=O(["Urgent","High","Normal","Low"]),u=de(()=>[...i.areas].sort((b,S)=>b.displayOrder!==S.displayOrder?b.displayOrder-S.displayOrder:cn(b.name,S.name))),h=de(()=>!s.value||l.value.length<4),p=()=>{s.value=!s.value,!s.value&&r.value.length===0&&(r.value=i.areas.map(b=>b.id))},m=b=>{const S=r.value.indexOf(b);S>=0?r.value.splice(S,1):r.value.push(b)},v=b=>{const S=l.value.indexOf(b);S>=0?l.value.splice(S,1):l.value.push(b)},g=()=>{s.value=!0,r.value=[],l.value=["Urgent","High","Normal","Low"]},w=de(()=>{let b=i.notes;return l.value.length<4&&(b=b.filter(S=>l.value.includes(S.priority||"Normal"))),!s.value&&r.value.length>0&&(b=b.filter(S=>S.scopeConfigurations?S.scopeConfigurations.some(T=>T.itemType==="Area"&&r.value.some(I=>T.ids.includes(I))):!1)),b}),E=de(()=>{const b={Urgent:0,High:1,Normal:2,Low:3};return[...w.value].sort((S,T)=>{if(S.isPinned!==T.isPinned)return S.isPinned?-1:1;const I=b[S.priority]??2,N=b[T.priority]??2;return I!==N?I-N:S.displayOrder!==T.displayOrder?S.displayOrder-T.displayOrder:cn(S.title,T.title)})}),A=b=>({Everyone:"Everyone",EveryoneInAreas:"Everyone in areas",EveryoneAtCheckpoints:"Everyone at checkpoints",SpecificPeople:"Specific people",EveryAreaLead:"Every area lead"})[b]||b,P=b=>{if(!b)return"";const S=A(b.scope);if(b.itemType===null)return S;const T=b.ids||[];if(T.includes("ALL_MARSHALS"))return`${S} (Everyone)`;if(T.includes("ALL_AREAS"))return`${S} (All areas)`;if(T.includes("ALL_CHECKPOINTS"))return`${S} (All checkpoints)`;const I=T.length;return I===0?S:`${S} (${I})`},x=b=>{if(!b)return"";const S=150;return b.length<=S?b:b.substring(0,S)+"..."},$=b=>{if(!b)return"";const S=new Date(b),I=new Date-S,N=Math.floor(I/6e4),te=Math.floor(I/36e5),Z=Math.floor(I/864e5);return N<1?"Just now":N<60?`${N}m ago`:te<24?`${te}h ago`:Z<7?`${Z}d ago`:S.toLocaleDateString()};return(b,S)=>(y(),k("div",Lw,[d("div",Cw,[S[1]||(S[1]=d("h2",null,"Notes",-1)),d("div",xw,[d("button",{onClick:S[0]||(S[0]=T=>b.$emit("add-note")),class:"btn btn-primary"}," Add note ")])]),d("div",Ew,[d("div",Tw,[S[2]||(S[2]=d("h4",null,"Filter by priority:",-1)),d("div",Sw,[(y(),k(me,null,Pe(a,T=>d("label",{key:T.value,class:"filter-checkbox"},[d("input",{type:"checkbox",checked:l.value.includes(T.value),onChange:I=>v(T.value)},null,40,Iw),d("span",{class:Fe(["priority-dot",T.value.toLowerCase()])},null,2),Oe(" "+M(T.label),1)])),64))])]),d("div",Mw,[S[4]||(S[4]=d("h4",null,"Filter by area:",-1)),d("label",Aw,[d("input",{type:"checkbox",checked:s.value,onChange:p},null,40,Pw),S[3]||(S[3]=Oe(" All areas ",-1))]),s.value?V("",!0):(y(),k("div",$w,[d("div",Dw,[(y(!0),k(me,null,Pe(u.value,T=>(y(),k("label",{key:T.id,class:"checkbox-item"},[d("input",{type:"checkbox",checked:r.value.includes(T.id),onChange:I=>m(T.id)},null,40,Ow),d("span",{class:"area-color-dot",style:Gt({backgroundColor:T.color||"#667eea"})},null,4),Oe(" "+M(T.name),1)]))),128))])]))]),h.value?(y(),k("button",{key:0,onClick:g,class:"btn btn-secondary btn-small"}," Clear filters ")):V("",!0)]),d("div",Rw,[w.value.length===0?(y(),k("div",Nw,[d("p",null,M(h.value?"No notes match the selected filters.":"No notes yet. Create one to get started!"),1)])):V("",!0),(y(!0),k(me,null,Pe(E.value,T=>(y(),k("div",{key:T.noteId,class:Fe(["note-card",{pinned:T.isPinned}]),onClick:I=>b.$emit("select-note",T)},[d("div",Fw,[d("div",zw,[T.isPinned?(y(),k("span",Uw,"")):V("",!0),d("span",{class:Fe(["priority-indicator",T.priority?.toLowerCase()||"normal"])},null,2),d("strong",null,M(T.title),1)]),d("div",Hw,[T.category?(y(),k("span",Vw,M(T.category),1)):V("",!0),d("span",Zw,M($(T.createdAt)),1)])]),T.content?(y(),k("div",qw,M(x(T.content)),1)):V("",!0),d("div",jw,[(y(!0),k(me,null,Pe(T.scopeConfigurations,(I,N)=>(y(),k("span",{key:N,class:"scope-badge"},M(P(I)),1))),128))])],10,Bw))),128))])]))}},Gw=He(Ww,[["__scopeId","data-v-0c9d4e7e"]]),Kw={class:"contacts-tab"},Yw={class:"contacts-tab-header"},Jw={class:"button-group"},Xw={class:"filters-section"},Qw={class:"filter-group"},eL={class:"filter-checkbox"},tL=["checked"],nL={key:0,class:"checkbox-dropdown"},sL={class:"checkbox-list"},iL=["checked","onChange"],oL={class:"contacts-list"},aL={key:0,class:"empty-state"},rL=["onClick"],lL={class:"contact-header"},cL={class:"contact-title-row"},uL={key:0,class:"primary-badge",title:"Primary contact"},dL={class:"role-badge"},hL={class:"contact-details"},fL={key:0,class:"contact-phone"},pL={key:1,class:"contact-email"},mL={key:0,class:"contact-notes"},vL={class:"contact-scopes"},_L={__name:"ContactsTab",props:{contacts:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})}},emits:["add-contact","select-contact"],setup(e,{emit:n}){const{termsLower:i}=Rt(),a=e,s=O(!0),r=O([]),l=de(()=>{const x=new Set([...a.availableRoles.builtInRoles||[],...a.availableRoles.customRoles||[],...a.contacts.map($=>$.role)]);return Array.from(x).sort()}),u=de(()=>!s.value),h=()=>{s.value=!s.value,!s.value&&r.value.length===0&&(r.value=[...l.value])},p=x=>{const $=r.value.indexOf(x);$>=0?r.value.splice($,1):r.value.push(x)},m=()=>{s.value=!0,r.value=[]},v=de(()=>{let x=a.contacts;return!s.value&&r.value.length>0&&(x=x.filter($=>r.value.includes($.role))),x}),g=de(()=>[...v.value].sort((x,$)=>{if(x.isPrimary!==$.isPrimary)return x.isPrimary?-1:1;const b=x.role.localeCompare($.role);return b!==0?b:x.displayOrder!==$.displayOrder?x.displayOrder-$.displayOrder:cn(x.name,$.name)})),w=x=>x?x.replace(/([A-Z])/g," $1").replace(/^./,$=>$.toUpperCase()).trim():"",E=x=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`})[x]||x,A=x=>{if(!x)return"";const $=E(x.scope);if(x.itemType===null)return $;const b=x.ids||[];if(b.includes("ALL_MARSHALS"))return`${$} (Everyone)`;if(b.includes("ALL_AREAS"))return`${$} (All ${i.value.areas})`;if(b.includes("ALL_CHECKPOINTS"))return`${$} (All ${i.value.checkpoints})`;const S=b.length;return S===0?$:`${$} (${S})`},P=x=>{if(!x)return"";const $=100;return x.length<=$?x:x.substring(0,$)+"..."};return(x,$)=>(y(),k("div",Kw,[d("div",Yw,[$[1]||($[1]=d("h2",null,"Contacts",-1)),d("div",Jw,[d("button",{onClick:$[0]||($[0]=b=>x.$emit("add-contact")),class:"btn btn-primary"}," Add contact ")])]),d("div",Xw,[d("div",Qw,[$[3]||($[3]=d("h4",null,"Filter by role:",-1)),d("label",eL,[d("input",{type:"checkbox",checked:s.value,onChange:h},null,40,tL),$[2]||($[2]=Oe(" All roles ",-1))]),s.value?V("",!0):(y(),k("div",nL,[d("div",sL,[(y(!0),k(me,null,Pe(l.value,b=>(y(),k("label",{key:b,class:"checkbox-item"},[d("input",{type:"checkbox",checked:r.value.includes(b),onChange:S=>p(b)},null,40,iL),Oe(" "+M(w(b)),1)]))),128))])]))]),u.value?(y(),k("button",{key:0,onClick:m,class:"btn btn-secondary btn-small"}," Clear filters ")):V("",!0)]),d("div",oL,[v.value.length===0?(y(),k("div",aL,[d("p",null,M(u.value?"No contacts match the selected filters.":"No contacts yet. Create one to get started!"),1)])):V("",!0),(y(!0),k(me,null,Pe(g.value,b=>(y(),k("div",{key:b.contactId,class:Fe(["contact-card",{primary:b.isPrimary}]),onClick:S=>x.$emit("select-contact",b)},[d("div",lL,[d("div",cL,[b.isPrimary?(y(),k("span",uL,"")):V("",!0),d("strong",null,M(b.name),1),d("span",dL,M(w(b.role)),1)]),d("div",hL,[b.phone?(y(),k("span",fL,M(b.phone),1)):V("",!0),b.email?(y(),k("span",pL,M(b.email),1)):V("",!0)])]),b.notes?(y(),k("div",mL,M(P(b.notes)),1)):V("",!0),d("div",vL,[(y(!0),k(me,null,Pe(b.scopeConfigurations,(S,T)=>(y(),k("span",{key:T,class:"scope-badge"},M(A(S)),1))),128))])],10,rL))),128))])]))}},gL=He(_L,[["__scopeId","data-v-8c624795"]]),yL={class:"admins-list"},bL={class:"admin-info"},kL={class:"admin-role"},wL=["onClick"],LL={__name:"AdminsList",props:{admins:{type:Array,required:!0}},emits:["add-admin","remove-admin"],setup(e){return(n,i)=>(y(),k("div",null,[i[1]||(i[1]=d("h3",null,"Event administrators",-1)),d("button",{onClick:i[0]||(i[0]=a=>n.$emit("add-admin")),class:"btn btn-small btn-primary"}," Add administrator "),d("div",yL,[(y(!0),k(me,null,Pe(e.admins,a=>(y(),k("div",{key:a.userEmail,class:"admin-item"},[d("div",bL,[d("strong",null,M(a.userEmail),1),d("span",kL,M(a.role),1)]),e.admins.length>1?(y(),k("button",{key:0,onClick:s=>n.$emit("remove-admin",a.userEmail),class:"btn btn-small btn-danger"}," Remove ",8,wL)):V("",!0)]))),128))])]))}},CL=He(LL,[["__scopeId","data-v-c76441fb"]]),xL={class:"event-details-tab"},EL={class:"accordion"},TL={class:"accordion-section"},SL={class:"accordion-icon"},IL={key:0,class:"accordion-content"},ML={class:"form-group"},AL={class:"form-group"},PL={class:"form-group"},$L={class:"form-group"},DL=["value"],OL={class:"form-actions"},RL=["disabled"],NL={class:"accordion-section"},BL={class:"accordion-title"},FL={class:"accordion-icon"},zL={key:0,class:"accordion-content"},UL={class:"accordion-section"},HL={class:"accordion-icon"},VL={key:0,class:"accordion-content"},ZL={class:"terminology-grid"},qL={class:"term-group"},jL=["value"],WL={class:"term-group"},GL=["value"],KL={class:"term-group"},YL=["value"],JL={class:"term-group"},XL=["value"],QL={class:"form-actions"},eC=["disabled"],tC={__name:"EventDetailsTab",props:{eventData:{type:Object,required:!0},admins:{type:Array,default:()=>[]},formDirty:{type:Boolean,default:!1}},emits:["submit","add-admin","remove-admin","update:formDirty"],setup(e,{emit:n}){const{terms:i}=Rt(),a=e,s=n,r=O({...a.eventData}),l=O(null),u=m=>{l.value=l.value===m?null:m};Ye(()=>a.eventData,m=>{r.value={...m}},{deep:!0});const h=()=>{s("update:formDirty",!0)},p=()=>{s("submit",{...r.value})};return(m,v)=>(y(),k("div",xL,[d("div",EL,[d("div",TL,[d("button",{class:Fe(["accordion-header",{active:l.value==="info"}]),onClick:v[0]||(v[0]=g=>u("info"))},[v[13]||(v[13]=d("span",{class:"accordion-title"},"Event Information",-1)),d("span",SL,M(l.value==="info"?"":"+"),1)],2),l.value==="info"?(y(),k("div",IL,[d("form",{onSubmit:kt(p,["prevent"]),class:"event-details-form"},[d("div",ML,[v[14]||(v[14]=d("label",null,"Event Name",-1)),Me(d("input",{"onUpdate:modelValue":v[1]||(v[1]=g=>r.value.name=g),type:"text",required:"",class:"form-input",onInput:h},null,544),[[rt,r.value.name]])]),d("div",AL,[v[15]||(v[15]=d("label",null,"Description",-1)),Me(d("textarea",{"onUpdate:modelValue":v[2]||(v[2]=g=>r.value.description=g),rows:"3",class:"form-input",onInput:h},null,544),[[rt,r.value.description]])]),d("div",PL,[v[16]||(v[16]=d("label",null,"Event Date & Time",-1)),Me(d("input",{"onUpdate:modelValue":v[3]||(v[3]=g=>r.value.eventDate=g),type:"datetime-local",required:"",class:"form-input",onInput:h},null,544),[[rt,r.value.eventDate]])]),d("div",$L,[v[17]||(v[17]=d("label",null,"Time Zone",-1)),Me(d("select",{"onUpdate:modelValue":v[4]||(v[4]=g=>r.value.timeZoneId=g),required:"",class:"form-input",onChange:h},[(y(!0),k(me,null,Pe(W(ef),g=>(y(),k("option",{key:g.value,value:g.value},M(g.label),9,DL))),128))],544),[[nn,r.value.timeZoneId]])]),d("div",OL,[d("button",{type:"submit",class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,RL)])],32)])):V("",!0)]),d("div",NL,[d("button",{class:Fe(["accordion-header",{active:l.value==="admins"}]),onClick:v[5]||(v[5]=g=>u("admins"))},[d("span",BL,"Administrators ("+M(e.admins.length)+")",1),d("span",FL,M(l.value==="admins"?"":"+"),1)],2),l.value==="admins"?(y(),k("div",zL,[Ae(CL,{admins:e.admins,onAddAdmin:v[6]||(v[6]=g=>m.$emit("add-admin")),onRemoveAdmin:v[7]||(v[7]=g=>m.$emit("remove-admin",g))},null,8,["admins"])])):V("",!0)]),d("div",UL,[d("button",{class:Fe(["accordion-header",{active:l.value==="terminology"}]),onClick:v[8]||(v[8]=g=>u("terminology"))},[v[18]||(v[18]=d("span",{class:"accordion-title"},"Terminology Settings",-1)),d("span",HL,M(l.value==="terminology"?"":"+"),1)],2),l.value==="terminology"?(y(),k("div",VL,[v[19]||(v[19]=d("p",{class:"section-description"}," Customise how things are named throughout the application. ",-1)),d("div",ZL,[d("div",qL,[d("label",null,M(W(i).people)+" are called",1),Me(d("select",{"onUpdate:modelValue":v[9]||(v[9]=g=>r.value.peopleTerm=g),class:"form-input",onChange:h},[(y(!0),k(me,null,Pe(W(Aa).people,g=>(y(),k("option",{key:g,value:g},M(g),9,jL))),128))],544),[[nn,r.value.peopleTerm]])]),d("div",WL,[d("label",null,M(W(i).checkpoints)+" are called",1),Me(d("select",{"onUpdate:modelValue":v[10]||(v[10]=g=>r.value.checkpointTerm=g),class:"form-input",onChange:h},[(y(!0),k(me,null,Pe(W(Aa).checkpoint,g=>(y(),k("option",{key:g,value:g},M(g),9,GL))),128))],544),[[nn,r.value.checkpointTerm]])]),d("div",KL,[d("label",null,M(W(i).areas)+" are called",1),Me(d("select",{"onUpdate:modelValue":v[11]||(v[11]=g=>r.value.areaTerm=g),class:"form-input",onChange:h},[(y(!0),k(me,null,Pe(W(Aa).area,g=>(y(),k("option",{key:g,value:g},M(g),9,YL))),128))],544),[[nn,r.value.areaTerm]])]),d("div",JL,[d("label",null,M(W(i).checklists)+" are called",1),Me(d("select",{"onUpdate:modelValue":v[12]||(v[12]=g=>r.value.checklistTerm=g),class:"form-input",onChange:h},[(y(!0),k(me,null,Pe(W(Aa).checklist,g=>(y(),k("option",{key:g,value:g},M(g),9,XL))),128))],544),[[nn,r.value.checklistTerm]])])]),d("div",QL,[d("button",{onClick:p,class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,eC)])])):V("",!0)])])]))}},nC=He(tC,[["__scopeId","data-v-c2524e0c"]]),sC={class:"button-group"},iC={key:0,class:"filter-group"},oC={class:"filter-checkbox"},aC=["checked"],rC={class:"locations-list"},lC=["onClick"],cC={class:"location-info"},uC={class:"location-header"},dC={class:"location-description"},hC={class:"location-status"},fC={class:"location-assignments"},pC={__name:"CheckpointsList",props:{locations:{type:Array,required:!0},areas:{type:Array,default:()=>[]}},emits:["open-add-menu","select-location"],setup(e,{emit:n}){const{terms:i}=Rt(),a=e,s=n,r=O(!0),l=O([]),u=O(null),h=()=>{s("open-add-menu",{buttonElement:u.value})},p=()=>{r.value=!r.value,!r.value&&l.value.length===0&&(l.value=a.areas.map(w=>w.id))},m=de(()=>{let w=a.locations;return!r.value&&l.value.length>0&&(w=w.filter(E=>(E.areaIds||E.AreaIds||[]).some(P=>l.value.includes(P)))),[...w].sort((E,A)=>cn(E.name,A.name))}),v=w=>{const E=a.areas.find(A=>A.id===w);return E?E.name:null},g=w=>{const E=a.areas.find(A=>A.id===w);return E?E.color:"#999"};return(w,E)=>(y(),k("div",null,[d("h3",null,M(W(i).checkpoints)+" ("+M(e.locations.length)+")",1),d("div",sC,[d("button",{ref_key:"addButtonRef",ref:u,onClick:h,class:"btn btn-small btn-primary"}," Add... ",512)]),e.areas.length>0?(y(),k("div",iC,[d("h4",null,"Filter by "+M(W(i).area.toLowerCase())+":",1),d("label",oC,[d("input",{type:"checkbox",checked:r.value,onChange:p},null,40,aC),Oe(" All "+M(W(i).areas.toLowerCase())+" ("+M(e.locations.length)+") ",1)]),r.value?V("",!0):(y(),it(sf,{key:0,areas:e.areas,"selected-area-ids":l.value,"onUpdate:selectedAreaIds":E[0]||(E[0]=A=>l.value=A)},null,8,["areas","selected-area-ids"]))])):V("",!0),d("div",rC,[(y(!0),k(me,null,Pe(m.value,A=>(y(),k("div",{key:A.id,class:Fe(["location-item",{"location-full":A.checkedInCount>=A.requiredMarshals,"location-missing":A.checkedInCount===0}]),onClick:P=>w.$emit("select-location",A)},[d("div",cC,[d("div",uC,[d("strong",null,M(A.name),1),(y(!0),k(me,null,Pe(A.areaIds||A.AreaIds||[],P=>(y(),k("span",{key:P,class:"area-badge",style:Gt({backgroundColor:g(P)})},M(v(P)),5))),128))]),d("span",dC,M(A.description),1),d("span",hC,M(A.checkedInCount)+"/"+M(A.requiredMarshals),1)]),d("div",fC,[(y(!0),k(me,null,Pe(A.assignments,P=>(y(),k("span",{key:P.id,class:Fe(["assignment-badge",{"checked-in":P.isCheckedIn}])},M(P.marshalName),3))),128))])],10,lC))),128))])]))}},mC=He(pC,[["__scopeId","data-v-00545865"]]),vC={class:"button-group"},_C={class:"areas-list"},gC=["onClick"],yC={class:"area-info"},bC={class:"area-header"},kC={key:0,class:"default-badge"},wC={key:0,class:"area-description"},LC={class:"area-stats"},CC={class:"stat-badge"},xC={class:"stat-badge"},EC={key:0,class:"empty-state"},TC={__name:"AreasList",props:{areas:{type:Array,required:!0},checkpoints:{type:Array,default:()=>[]}},emits:["add-area","select-area"],setup(e){const{terms:n,formatCount:i}=Rt(),a=e,s=de(()=>[...a.areas].sort((u,h)=>u.displayOrder!==h.displayOrder?u.displayOrder-h.displayOrder:cn(u.name,h.name))),r=u=>u.checkpointCount!==void 0?u.checkpointCount:a.checkpoints.filter(h=>h.areaId===u.id).length,l=u=>{if(!u.contacts)return 0;const h=typeof u.contacts=="string"?JSON.parse(u.contacts):u.contacts;return Array.isArray(h)?h.length:0};return(u,h)=>(y(),k("div",null,[d("h3",null,M(W(n).areas)+" ("+M(e.areas.length)+")",1),d("div",vC,[d("button",{onClick:h[0]||(h[0]=p=>u.$emit("add-area")),class:"btn btn-small btn-primary"}," Add "+M(W(n).area.toLowerCase()),1)]),d("div",_C,[(y(!0),k(me,null,Pe(s.value,p=>(y(),k("div",{key:p.id,class:"area-item",style:Gt({borderLeftColor:p.color||"#667eea"}),onClick:m=>u.$emit("select-area",p)},[d("div",yC,[d("div",bC,[d("strong",null,M(p.name),1),p.isDefault?(y(),k("span",kC,"Default")):V("",!0)]),p.description?(y(),k("p",wC,M(p.description),1)):V("",!0),d("div",LC,[d("span",CC,M(W(i)("checkpoint",r(p))),1),d("span",xC,M(l(p))+" contact"+M(l(p)===1?"":"s"),1)])])],12,gC))),128)),e.areas.length===0?(y(),k("div",EC,[d("p",null,"No "+M(W(n).areas.toLowerCase())+' yet. Click "Add '+M(W(n).area.toLowerCase())+'" to create one.',1)])):V("",!0)])]))}},SC=He(TC,[["__scopeId","data-v-1ef45bfd"]]),IC={course:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>',checkpoint:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',area:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',marshal:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',checklist:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>',details:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16h6"/></svg>',location:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>',map:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',contacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',eventContacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 8V6a2 2 0 0 0-2-2h-2"/><path d="M22 12v2a2 2 0 0 1-2 2h-2"/></svg>',event:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>'},$n=e=>IC[e]||"",MC={class:"responsive-tabs"},AC={class:"visible-tabs"},PC=["onClick"],$C=["innerHTML"],DC={class:"hamburger-only"},OC=["innerHTML"],RC={class:"hamburger-label"},NC=["onClick"],BC=["innerHTML"],FC={__name:"ResponsiveTabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,a=n,s=O(null),r=O(null),l=O(!1),u=O({}),h=de(()=>i.tabs.find(w=>w.value===i.modelValue)),p=de(()=>h.value?h.value.label:"Menu"),m=()=>{if(l.value=!l.value,l.value&&r.value){const w=r.value.getBoundingClientRect();u.value={top:`${w.bottom+4}px`}}},v=w=>{a("update:modelValue",w),l.value=!1},g=w=>{if(!s.value)return;const E=s.value.contains(w.target);l.value&&!E&&(l.value=!1)};return Rn(()=>{document.addEventListener("click",g)}),zi(()=>{document.removeEventListener("click",g)}),(w,E)=>(y(),k("div",MC,[d("div",AC,[(y(!0),k(me,null,Pe(e.tabs,A=>(y(),k("button",{key:A.value,class:Fe(["tab-button",{active:e.modelValue===A.value}]),onClick:P=>w.$emit("update:modelValue",A.value),type:"button"},[A.icon?(y(),k("span",{key:0,class:"tab-icon",innerHTML:W($n)(A.icon)},null,8,$C)):V("",!0),Oe(" "+M(A.label),1)],10,PC))),128))]),d("div",DC,[d("div",{class:"hamburger-menu",ref_key:"hamburgerMenu",ref:s},[d("button",{ref_key:"hamburgerButton",ref:r,class:Fe(["hamburger-button",{active:l.value}]),onClick:kt(m,["stop"]),type:"button"},[E[1]||(E[1]=d("span",{class:"hamburger-icon"},"",-1)),h.value?.icon?(y(),k("span",{key:0,class:"tab-icon",innerHTML:W($n)(h.value.icon)},null,8,OC)):V("",!0),d("span",RC,M(p.value),1)],2),l.value?(y(),k("div",{key:0,class:"hamburger-dropdown",style:Gt(u.value),onClick:E[0]||(E[0]=kt(()=>{},["stop"]))},[(y(!0),k(me,null,Pe(e.tabs,A=>(y(),k("button",{key:A.value,class:Fe(["dropdown-item",{active:e.modelValue===A.value}]),onClick:kt(P=>v(A.value),["stop"]),type:"button"},[A.icon?(y(),k("span",{key:0,class:"tab-icon",innerHTML:W($n)(A.icon)},null,8,BC)):V("",!0),Oe(" "+M(A.label),1)],10,NC))),128))],4)):V("",!0)],512)])]))}},zC=He(FC,[["__scopeId","data-v-1710ea17"]]),UC={class:"share-link-container"},HC=["value"],VC={__name:"ShareLinkModal",props:{show:{type:Boolean,default:!1},link:{type:String,required:!0},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=n,a=O(!1),s=O(null),r=()=>{s.value&&(s.value.select(),document.execCommand("copy"),a.value=!0,setTimeout(()=>{a.value=!1},2e3))},l=()=>{i("close")};return(u,h)=>(y(),it(Ot,{show:e.show,title:"Marshal check-in link",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:l},{actions:Ke(()=>[d("button",{onClick:l,class:"btn btn-secondary"},"Close")]),default:Ke(()=>[h[0]||(h[0]=d("p",{class:"instruction"},"Share this link with marshals so they can check in:",-1)),d("div",UC,[d("input",{value:e.link,readonly:"",class:"form-input",ref_key:"linkInput",ref:s},null,8,HC),d("button",{onClick:r,class:"btn btn-primary"},M(a.value?"Copied!":"Copy"),1)])]),_:1},8,["show","is-dirty"]))}},ZC=He(VC,[["__scopeId","data-v-e3c38c66"]]),qC={class:"form-group"},jC={__name:"AddAdminModal",props:{show:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O("");Ye(()=>i.show,h=>{h||(s.value="")});const r=()=>{a("update:isDirty",!0)},l=()=>{a("submit",s.value)},u=()=>{a("close")};return(h,p)=>(y(),it(Ot,{show:e.show,title:"Add event administrator",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:u},{actions:Ke(()=>[d("button",{type:"button",onClick:u,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:l,class:"btn btn-primary"}," Add administrator ")]),default:Ke(()=>[p[2]||(p[2]=d("p",{class:"instruction"},"Enter the email address of the administrator to add",-1)),d("form",{onSubmit:kt(l,["prevent"])},[d("div",qC,[p[1]||(p[1]=d("label",null,"Email address",-1)),Me(d("input",{"onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),type:"email",required:"",class:"form-input",placeholder:"admin@example.com",onInput:r},null,544),[[rt,s.value]])])],32)]),_:1},8,["show","is-dirty"]))}},WC=He(jC,[["__scopeId","data-v-43ad537f"]]),GC={class:"form-group"},KC={key:0,class:"error"},YC=["disabled"],JC={__name:"UploadRouteModal",props:{show:{type:Boolean,default:!1},uploading:{type:Boolean,default:!1},error:{type:String,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O(null);Ye(()=>i.show,h=>{h||(s.value=null)});const r=h=>{s.value=h.target.files[0],a("update:isDirty",!0)},l=()=>{s.value&&a("submit",s.value)},u=()=>{a("close")};return(h,p)=>(y(),it(Ot,{show:e.show,title:"Upload GPX route",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:u},{actions:Ke(()=>[d("button",{type:"button",onClick:u,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:l,class:"btn btn-primary",disabled:e.uploading},M(e.uploading?"Uploading...":"Upload route"),9,YC)]),default:Ke(()=>[p[1]||(p[1]=d("p",{class:"instruction"},"Upload a GPX file to display the event route on the map",-1)),d("form",{onSubmit:kt(l,["prevent"])},[d("div",GC,[p[0]||(p[0]=d("label",null,"GPX file",-1)),d("input",{type:"file",accept:".gpx",onChange:r,required:"",class:"form-input"},null,32)]),e.error?(y(),k("div",KC,M(e.error),1)):V("",!0)],32)]),_:1},8,["show","is-dirty"]))}},XC=He(JC,[["__scopeId","data-v-1c1d3033"]]),QC={class:"instruction"},e1={class:"form-group"},t1={class:"form-group"},n1={class:"checkbox-label"},s1={key:0,class:"error"},i1={key:1,class:"import-result"},o1={key:0,class:"import-errors"},a1=["disabled"],r1={__name:"ImportLocationsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O(null),u=O(!1);Ye(()=>s.show,g=>{g||(l.value=null,u.value=!1)});const h=g=>{l.value=g.target.files[0],r("update:isDirty",!0)},p=()=>{r("update:isDirty",!0)},m=()=>{l.value&&r("submit",{file:l.value,deleteExisting:u.value})},v=()=>{r("close")};return(g,w)=>(y(),it(Ot,{show:e.show,title:`Import ${W(a).checkpoints} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:v},{actions:Ke(()=>[d("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:m,class:"btn btn-primary",disabled:e.importing},M(e.importing?"Importing...":`Import ${W(a).checkpoints}`),9,a1)]),default:Ke(()=>[d("p",QC,"Upload a CSV file with columns: Label, Lat/Latitude, Long/Longitude, What3Words (optional), "+M(W(i).people)+" (optional)",1),w[3]||(w[3]=d("div",{class:"csv-example"},[d("strong",null,"Example CSV format:"),d("pre",null,`Label,Latitude,Longitude,What3Words,Marshals
Checkpoint 1,51.505,-0.09,filled.count.soap,"John Doe, Jane Smith"
Checkpoint 2,51.510,-0.10,index.home.raft,Bob Wilson`)],-1)),d("form",{onSubmit:kt(m,["prevent"])},[d("div",e1,[w[1]||(w[1]=d("label",null,"CSV file",-1)),d("input",{type:"file",accept:".csv",onChange:h,required:"",class:"form-input"},null,32)]),d("div",t1,[d("label",n1,[Me(d("input",{type:"checkbox","onUpdate:modelValue":w[0]||(w[0]=E=>u.value=E),onChange:p},null,544),[[Pi,u.value]]),Oe(" Delete existing "+M(W(a).checkpoints)+" before import ",1)])]),e.error?(y(),k("div",s1,M(e.error),1)):V("",!0),e.result?(y(),k("div",i1,[d("p",null,"Created "+M(e.result.locationsCreated)+" "+M(W(a).checkpoints)+" and "+M(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(y(),k("div",o1,[w[2]||(w[2]=d("strong",null,"Errors:",-1)),d("ul",null,[(y(!0),k(me,null,Pe(e.result.errors,(E,A)=>(y(),k("li",{key:A},M(E),1))),128))])])):V("",!0)])):V("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},l1=He(r1,[["__scopeId","data-v-e0a01848"]]),c1={class:"instruction"},u1={class:"form-group"},d1={key:0,class:"error"},h1={key:1,class:"import-result"},f1={key:0,class:"import-errors"},p1=["disabled"],m1={__name:"ImportMarshalsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O(null);Ye(()=>s.show,m=>{m||(l.value=null)});const u=m=>{l.value=m.target.files[0],r("update:isDirty",!0)},h=()=>{l.value&&r("submit",l.value)},p=()=>{r("close")};return(m,v)=>(y(),it(Ot,{show:e.show,title:`Import ${W(a).people} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:p},{actions:Ke(()=>[d("button",{type:"button",onClick:p,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:h,class:"btn btn-primary",disabled:e.importing},M(e.importing?"Importing...":`Import ${W(a).people}`),9,p1)]),default:Ke(()=>[d("p",c1,"Upload a CSV file with columns: Name, Email (optional), Phone (optional), "+M(W(i).checkpoint)+" (optional)",1),v[2]||(v[2]=d("div",{class:"csv-example"},[d("strong",null,"Example CSV format:"),d("pre",null,`Name,Email,Phone,Checkpoint
John Doe,john@example.com,555-1234,Checkpoint 1
Jane Smith,jane@example.com,555-5678,Checkpoint 2`)],-1)),d("form",{onSubmit:kt(h,["prevent"])},[d("div",u1,[v[0]||(v[0]=d("label",null,"CSV file",-1)),d("input",{type:"file",accept:".csv",onChange:u,required:"",class:"form-input"},null,32)]),e.error?(y(),k("div",d1,M(e.error),1)):V("",!0),e.result?(y(),k("div",h1,[d("p",null,"Imported "+M(e.result.marshalsCreated)+" "+M(W(a).people)+" and "+M(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(y(),k("div",f1,[v[1]||(v[1]=d("strong",null,"Errors:",-1)),d("ul",null,[(y(!0),k(me,null,Pe(e.result.errors,(g,w)=>(y(),k("li",{key:w},M(g),1))),128))])])):V("",!0)])):V("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},v1=He(m1,[["__scopeId","data-v-dcaed17c"]]),_1={class:"tabs"},g1=["onClick"],y1=["innerHTML"],b1={__name:"TabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e){return(n,i)=>(y(),k("div",_1,[(y(!0),k(me,null,Pe(e.tabs,a=>(y(),k("button",{key:a.value,class:Fe(["tab-button",{active:e.modelValue===a.value}]),onClick:s=>n.$emit("update:modelValue",a.value),type:"button"},[a.icon?(y(),k("span",{key:0,class:"tab-icon",innerHTML:W($n)(a.icon)},null,8,y1)):V("",!0),Oe(" "+M(a.label),1)],10,g1))),128))]))}},ic=He(b1,[["__scopeId","data-v-6e74ffd0"]]),k1={class:"tab-content"},w1={class:"form-group"},L1=["value"],C1={class:"form-group"},x1=["value"],E1={class:"form-group"},T1={class:"area-display"},S1={key:0,class:"no-area"},I1={class:"form-group"},M1={class:"checkbox-label"},A1=["checked"],P1={key:0,class:"custom-times-section"},$1={class:"form-group"},D1=["value"],O1={class:"form-group"},R1=["value"],N1={__name:"LocationDetailsTab",props:{form:{type:Object,required:!0},areas:{type:Array,default:()=>[]},eventDate:{type:String,default:""}},emits:["update:form","input","save"],setup(e,{emit:n}){const i=e,a=n,s=de(()=>(i.form.areaIds||i.form.AreaIds||[]).map(h=>i.areas.find(p=>p.id===h)).filter(h=>h!==void 0)),r=(u,h)=>{a("update:form",{...i.form,[u]:h}),a("input")},l=u=>{const h={...i.form,useCustomTimes:u};if(!u)h.startTime="",h.endTime="";else if(!h.startTime&&!h.endTime&&i.eventDate){const p=Xa(i.eventDate);h.startTime=p,h.endTime=p}a("update:form",h),a("input")};return(u,h)=>(y(),k("div",k1,[d("form",{onSubmit:h[5]||(h[5]=kt(p=>u.$emit("save"),["prevent"]))},[d("div",w1,[h[6]||(h[6]=d("label",null,"Name",-1)),d("input",{value:e.form.name,onInput:h[0]||(h[0]=p=>r("name",p.target.value)),type:"text",required:"",class:"form-input"},null,40,L1)]),d("div",C1,[h[7]||(h[7]=d("label",null,"Description (optional)",-1)),d("input",{value:e.form.description,onInput:h[1]||(h[1]=p=>r("description",p.target.value)),type:"text",class:"form-input"},null,40,x1)]),d("div",E1,[h[8]||(h[8]=d("label",null,"Area (auto-assigned by location)",-1)),d("div",T1,[s.value.length===0?(y(),k("span",S1," Not in any area polygon ")):V("",!0),(y(!0),k(me,null,Pe(s.value,p=>(y(),k("span",{key:p.id,class:"area-badge",style:Gt({backgroundColor:p.color||"#667eea"})},M(p.name),5))),128))]),h[9]||(h[9]=d("small",{class:"form-help"}," Areas are automatically assigned based on checkpoint location within area boundaries ",-1))]),d("div",I1,[d("label",M1,[d("input",{checked:e.form.useCustomTimes,onChange:h[2]||(h[2]=p=>l(p.target.checked)),type:"checkbox"},null,40,A1),h[10]||(h[10]=Oe(" Use custom date/time for this checkpoint ",-1))]),h[11]||(h[11]=d("small",{class:"form-help"}," By default, marshals are expected during the event date/time. Enable this to set a specific time range. ",-1))]),e.form.useCustomTimes?(y(),k("div",P1,[d("div",$1,[h[12]||(h[12]=d("label",null,"Start Date & Time (optional)",-1)),d("input",{value:e.form.startTime,onInput:h[3]||(h[3]=p=>r("startTime",p.target.value)),type:"datetime-local",class:"form-input"},null,40,D1),h[13]||(h[13]=d("small",{class:"form-help"}," When marshal should arrive at this checkpoint ",-1))]),d("div",O1,[h[14]||(h[14]=d("label",null,"End Date & Time (optional)",-1)),d("input",{value:e.form.endTime,onInput:h[4]||(h[4]=p=>r("endTime",p.target.value)),type:"datetime-local",class:"form-input"},null,40,R1),h[15]||(h[15]=d("small",{class:"form-help"}," When marshal can leave this checkpoint ",-1))])])):V("",!0)],32)]))}},B1=He(N1,[["__scopeId","data-v-60977929"]]),F1={class:"tab-content"},z1={class:"form-group"},U1=["value"],H1={key:0,class:"form-error"},V1={class:"form-row"},Z1={class:"form-group"},q1=["value","disabled"],j1={class:"form-group"},W1=["value","disabled"],G1={class:"form-group"},K1={__name:"LocationCoordinatesTab",props:{form:{type:Object,required:!0},isMoving:{type:Boolean,default:!1}},emits:["update:form","input","save","move-location"],setup(e,{emit:n}){const i=e,a=n,s=h=>h==null||h===""?"":Number(h).toFixed(6),r=(h,p)=>{a("update:form",{...i.form,[h]:p}),a("input")},l=(h,p)=>{a("update:form",{...i.form,[h]:Number(p)}),a("input")},u=h=>{if(!h)return!0;const p=h.includes(".")?h.split("."):h.split("/");if(p.length!==3)return!1;const m=/^[a-z]{1,20}$/;return p.every(v=>m.test(v))};return(h,p)=>(y(),k("div",F1,[d("form",{onSubmit:p[4]||(p[4]=kt(m=>h.$emit("save"),["prevent"]))},[d("div",z1,[p[5]||(p[5]=d("label",null,"What3Words (optional)",-1)),d("input",{value:e.form.what3Words,onInput:p[0]||(p[0]=m=>r("what3Words",m.target.value)),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap"},null,40,U1),e.form.what3Words&&!u(e.form.what3Words)?(y(),k("small",H1," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):V("",!0)]),d("div",V1,[d("div",Z1,[p[6]||(p[6]=d("label",null,"Longitude",-1)),d("input",{value:s(e.form.longitude),onInput:p[1]||(p[1]=m=>l("longitude",m.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., -0.091234"},null,40,q1)]),d("div",j1,[p[7]||(p[7]=d("label",null,"Latitude",-1)),d("input",{value:s(e.form.latitude),onInput:p[2]||(p[2]=m=>l("latitude",m.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., 51.505123"},null,40,W1)])]),d("div",G1,[d("button",{type:"button",onClick:p[3]||(p[3]=m=>h.$emit("move-location")),class:Fe(["btn btn-secondary btn-with-icon",{"btn-primary":e.isMoving}])},[p[8]||(p[8]=d("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),Oe(" "+M(e.isMoving?"Click on map to set new location...":"Move checkpoint..."),1)],2)])],32)]))}},Y1=He(K1,[["__scopeId","data-v-e365b4ff"]]);function of(e){const n=O(new Map),i=m=>n.value.has(m.id)?n.value.get(m.id):m.isCheckedIn;return{pendingCheckInChanges:n,getEffectiveCheckInStatus:i,handleToggleCheckIn:m=>{const g=!i(m);g===m.isCheckedIn?n.value.delete(m.id):n.value.set(m.id,g),e&&e()},getStatusIcon:m=>i(m)?"":"",getStatusColor:m=>i(m)?"#28a745":"#dc3545",getStatusText:m=>i(m)?"Checked in":"Not checked in",formatTime:m=>m?new Date(m).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",clearPendingChanges:()=>{n.value.clear()},getPendingChanges:()=>Array.from(n.value.entries()).map(([m,v])=>({assignmentId:m,shouldBeCheckedIn:v}))}}const J1={class:"tab-content"},X1={class:"form-group"},Q1=["value"],e0={class:"section-title"},t0={class:"assignments-list"},n0={class:"assignment-info"},s0={class:"assignment-header"},i0=["title"],o0={key:1,class:"pending-badge"},a0={key:2,class:"pending-badge"},r0={key:0,class:"check-in-info"},l0={class:"check-in-method"},c0={class:"assignment-actions"},u0=["onClick"],d0=["onClick"],h0={__name:"LocationAssignmentsTab",props:{form:{type:Object,required:!0},assignments:{type:Array,default:()=>[]}},emits:["update:form","input","remove-assignment","assign-marshal"],setup(e,{expose:n,emit:i}){const a=e,s=i,{pendingCheckInChanges:r,getEffectiveCheckInStatus:l,handleToggleCheckIn:u,getStatusIcon:h,getStatusColor:p,getStatusText:m,formatTime:v}=of(()=>s("input")),g=de(()=>a.assignments?.length||0),w=de(()=>a.assignments?[...a.assignments].sort((P,x)=>{const $=P.marshalName?.toLowerCase()||"",b=x.marshalName?.toLowerCase()||"";return $.localeCompare(b)}):[]),E=de(()=>{const P=g.value,x=a.form.requiredMarshals||1;return Math.max(x-P,1)}),A=(P,x)=>{s("update:form",{...a.form,[P]:Number(x)}),s("input")};return n({pendingCheckInChanges:r,clearPendingChanges:()=>r.value.clear(),getPendingChanges:()=>Array.from(r.value.entries()).map(([P,x])=>({assignmentId:P,shouldBeCheckedIn:x}))}),(P,x)=>(y(),k("div",J1,[d("div",X1,[x[2]||(x[2]=d("label",null,"Required marshals",-1)),d("input",{value:e.form.requiredMarshals,onInput:x[0]||(x[0]=$=>A("requiredMarshals",$.target.value)),type:"number",min:"1",required:"",class:"form-input"},null,40,Q1)]),d("h3",e0,"Assigned marshals ("+M(g.value)+")",1),d("div",t0,[(y(!0),k(me,null,Pe(w.value,$=>(y(),k("div",{key:$.id,class:Fe(["assignment-item",{"checked-in":!$.isPending&&W(l)($)}])},[d("div",n0,[d("div",s0,[$.isPending?V("",!0):(y(),k("span",{key:0,class:"status-indicator",style:Gt({color:W(p)($)}),title:W(m)($)},M(W(h)($)),13,i0)),d("strong",null,M($.marshalName),1),$.isPending?(y(),k("span",o0," (pending) ")):W(r).has($.id)?(y(),k("span",a0," (unsaved) ")):V("",!0)]),!$.isPending&&W(l)($)?(y(),k("span",r0,[$.isCheckedIn&&!W(r).has($.id)?(y(),k(me,{key:0},[Oe(M(W(v)($.checkInTime))+" ",1),d("span",l0,"("+M($.checkInMethod)+")",1)],64)):(y(),k(me,{key:1},[Oe(" Will be checked in on save ")],64))])):V("",!0)]),d("div",c0,[$.isPending?V("",!0):(y(),k("button",{key:0,onClick:b=>W(u)($),class:Fe(["btn btn-small",W(l)($)?"btn-danger":"btn-secondary"])},M(W(l)($)?"Undo":"Check in"),11,u0)),d("button",{onClick:b=>P.$emit("remove-assignment",$),class:"btn btn-small btn-danger"}," Remove ",8,d0)])],2))),128)),(y(!0),k(me,null,Pe(E.value,$=>(y(),k("div",{key:`empty-${$}`,class:"assignment-item empty-assignment",onClick:x[1]||(x[1]=b=>P.$emit("assign-marshal"))},[...x[3]||(x[3]=[d("div",{class:"empty-assignment-content"}," + ",-1)])]))),128))])]))}},f0=He(h0,[["__scopeId","data-v-b531be64"]]),p0={class:"checkpoint-checklist-view"},m0={key:0,class:"loading-state"},v0={key:1,class:"error-state"},_0={key:2,class:"empty-state"},g0={key:3,class:"empty-state"},y0={key:4,class:"checklist-items"},b0={class:"item-checkbox"},k0=["checked","disabled","onChange"],w0={class:"item-content"},L0={class:"item-header"},C0={class:"item-text-wrapper"},x0={class:"item-text"},E0={key:0,class:"item-context"},T0={class:"item-scope"},S0=["title"],I0={key:0,class:"completion-info"},M0={key:0,class:"pending-text"},A0={class:"completion-text"},P0={class:"completion-time"},$0={key:1,class:"uncomplete-info"},D0={key:2,class:"disabled-reason"},O0={__name:"CheckpointChecklistView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=O([]),l=O(!1),u=O(null),h=O(new Map),p=de(()=>a.assignments.length===0),m=de(()=>r.value.map(b=>{const S=h.value.get(`${b.itemId}|||${b.completionContextId}`),T=S!==void 0?S.complete:b.isCompleted,I=S!==void 0&&S.complete!==b.isCompleted;return{...b,localIsCompleted:T,isModified:I}})),v=async()=>{if(!(!a.eventId||!a.locationId&&!a.areaId)){l.value=!0,u.value=null;try{const b=a.locationId?await It.getCheckpointChecklist(a.eventId,a.locationId):await It.getAreaChecklist(a.eventId,a.areaId);if(r.value=b.data||[],a.modelValue&&a.modelValue.length>0){const S=new Map;a.modelValue.forEach(T=>{S.set(`${T.itemId}|||${T.contextId}`,{complete:T.complete,contextType:T.contextType,contextId:T.contextId})}),h.value=S}}catch(b){console.error("Failed to load checklist:",b),u.value=b.response?.data?.message||"Failed to load checklist"}finally{l.value=!1}}},g=b=>{const S=b.contextOwnerMarshalId||(a.assignments.length>0?a.assignments[0].marshalId:null);if(!S)return;const T=`${b.itemId}|||${b.completionContextId}`,I=h.value.get(T),N=I!==void 0?I.complete:b.isCompleted;h.value.set(T,{complete:!N,contextType:b.completionContextType,contextId:b.completionContextId,marshalId:S}),w()},w=()=>{const b=[];for(const[S,T]of h.value.entries()){const[I,N]=S.split("|||"),te=r.value.find(Z=>Z.itemId===I&&Z.completionContextId===N);te&&T.complete!==te.isCompleted&&b.push({itemId:I,complete:T.complete,contextType:T.contextType,contextId:T.contextId,marshalId:T.marshalId})}s("update:modelValue",b),s("change",b)};n({resetLocalState:()=>{if(h.value=new Map,a.modelValue&&a.modelValue.length>0){const b=new Map;a.modelValue.forEach(S=>{b.set(`${S.itemId}|||${S.contextId}`,{complete:S.complete,contextType:S.contextType,contextId:S.contextId,marshalId:S.marshalId})}),h.value=b}},loadChecklist:v});const A=b=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:"Your areas",EveryoneAtCheckpoints:"Your checkpoints",OnePerCheckpoint:"One per checkpoint",OnePerArea:"One per area",EveryAreaLead:"Area lead",OneLeadPerArea:"One lead per area"})[b.matchedScope]||b.matchedScope,P=b=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to certain people",EveryoneInAreas:"This item is for everyone in certain areas",EveryoneAtCheckpoints:"This item is for everyone at certain checkpoints",OnePerCheckpoint:"One person at the checkpoint needs to complete this",OnePerArea:"One person in the area needs to complete this",EveryAreaLead:"This item is for area leads only",OneLeadPerArea:"One area lead needs to complete this"})[b.matchedScope]||"",x=b=>{if(!b.completionContextType||!b.completionContextId)return null;if(b.completionContextType==="Checkpoint"){const S=a.locations.find(I=>I.id===b.completionContextId);return S?`at checkpoint ${S.description?`${S.name} - ${S.description}`:S.name}`:null}if(b.completionContextType==="Area"){const S=a.areas.find(T=>T.id===b.completionContextId);return S?`in area ${S.name}`:null}return b.completionContextType==="Personal"?b.contextOwnerName?`for ${b.contextOwnerName}`:"assigned individually":null},$=b=>b?new Date(b).toLocaleString():"";return Ye(()=>[a.eventId,a.locationId,a.areaId],()=>{v()},{immediate:!0}),(b,S)=>(y(),k("div",p0,[l.value?(y(),k("div",m0," Loading checklist... ")):u.value?(y(),k("div",v0,[d("p",null,M(u.value),1),d("button",{onClick:v,class:"btn btn-secondary btn-small"}," Retry ")])):p.value?(y(),k("div",_0,[...S[0]||(S[0]=[d("p",null,"No marshals assigned to this checkpoint yet.",-1),d("p",{class:"help-text"},"Assign marshals to enable checklist completion.",-1)])])):r.value.length===0?(y(),k("div",g0,[...S[1]||(S[1]=[d("p",null,"No checklist items for this checkpoint.",-1)])])):(y(),k("div",y0,[(y(!0),k(me,null,Pe(m.value,T=>(y(),k("div",{key:`${T.itemId}-${T.completionContextId}`,class:Fe(["checklist-item",{"item-completed":T.localIsCompleted,"item-modified":T.isModified}])},[d("div",b0,[d("input",{type:"checkbox",checked:T.localIsCompleted,disabled:!T.canBeCompletedByMe&&!T.localIsCompleted,onChange:I=>g(T)},null,40,k0)]),d("div",w0,[d("div",L0,[d("div",C0,[d("div",x0,M(T.text),1),x(T)?(y(),k("div",E0,M(x(T)),1)):V("",!0)]),d("div",T0,[d("span",{class:"scope-pill",title:P(T)},M(A(T)),9,S0)])]),T.localIsCompleted?(y(),k("div",I0,[T.isModified&&!T.isCompleted?(y(),k("span",M0," Will be marked as completed (pending save) ")):(y(),k(me,{key:1},[d("span",A0," Completed by "+M(T.completedByActorName||"Unknown"),1),d("span",P0,M($(T.completedAt)),1)],64))])):V("",!0),T.isModified&&T.isCompleted&&!T.localIsCompleted?(y(),k("div",$0,[...S[2]||(S[2]=[d("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):V("",!0),!T.canBeCompletedByMe&&!T.localIsCompleted?(y(),k("div",D0," Already completed by someone else ")):V("",!0)])],2))),128))]))]))}},af=He(O0,[["__scopeId","data-v-cde14adb"]]),R0={class:"notes-view"},N0={key:0,class:"loading-state"},B0={key:1,class:"error-state"},F0={key:2,class:"empty-state"},z0={key:3,class:"notes-list"},U0={class:"note-header"},H0={class:"note-title-row"},V0={key:0,class:"pin-icon",title:"Pinned"},Z0={class:"note-title"},q0={class:"note-meta"},j0={key:0,class:"category-badge"},W0={key:0,class:"note-content"},G0={class:"note-footer"},K0={class:"created-info"},Y0={key:0,class:"scope-info"},J0={__name:"NotesView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},marshalId:{type:String,default:null},allNotes:{type:Array,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},showScope:{type:Boolean,default:!0}},setup(e,{expose:n}){const i=e,a=O([]),s=O(!1),r=O(null),l=de(()=>i.marshalId?"No notes for this marshal.":i.areaId?"No notes for this area.":i.locationId?"No notes for this checkpoint.":"No notes available."),u=de(()=>i.areaId?i.locations.filter(x=>x.areaIds&&x.areaIds.includes(i.areaId)):[]),h=de(()=>u.value.map(x=>x.id)),p=de(()=>{if(!i.areaId)return[];const x=new Set;return i.assignments.filter($=>h.value.includes($.locationId)).forEach($=>x.add($.marshalId)),Array.from(x)}),m=x=>i.assignments.filter($=>$.marshalId===x).map($=>$.locationId),v=x=>{const $=m(x),b=new Set;for(const S of $){const T=i.locations.find(I=>I.id===S);T?.areaIds&&T.areaIds.forEach(I=>b.add(I))}return Array.from(b)},g=(x,$)=>{if(!x.scopeConfigurations)return null;for(const b of x.scopeConfigurations){if(b.itemType==="Area"){if($.type==="area"&&(b.ids.includes($.areaId)||b.ids.includes("ALL_AREAS")))return{matched:!0,scope:b.scope==="EveryAreaLead"?"Area leads":"Area"};if($.type==="checkpoint"){const T=i.locations.find(I=>I.id===$.locationId)?.areaIds||[];if(b.ids.includes("ALL_AREAS")||T.some(I=>b.ids.includes(I)))return{matched:!0,scope:b.scope==="EveryAreaLead"?"Area leads":"Area"}}}if(b.itemType==="Checkpoint"){if($.type==="checkpoint"&&(b.ids.includes($.locationId)||b.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint"};if($.type==="area"&&$.checkpointIds.some(T=>b.ids.includes(T)||b.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint in area"}}if(b.itemType==="Marshal"){if($.type==="marshal"&&(b.ids.includes($.marshalId)||b.ids.includes("ALL_MARSHALS")))return{matched:!0,scope:"Marshal"};if($.type==="checkpoint"){const S=i.assignments.filter(I=>I.locationId===$.locationId).map(I=>I.marshalId);if(b.ids.includes("ALL_MARSHALS")||S.some(I=>b.ids.includes(I)))return{matched:!0,scope:"Marshal at checkpoint"}}if($.type==="area"&&(b.ids.includes("ALL_MARSHALS")||$.marshalIds.some(T=>b.ids.includes(T))))return{matched:!0,scope:"Marshal in area"}}if($.type==="marshal"&&$.checkpointIds&&$.areaIds){if(b.itemType==="Checkpoint"&&(b.ids.includes("ALL_CHECKPOINTS")||$.checkpointIds.some(T=>b.ids.includes(T))))return{matched:!0,scope:"Assigned checkpoint"};if(b.itemType==="Area"&&(b.ids.includes("ALL_AREAS")||$.areaIds.some(T=>b.ids.includes(T))))return{matched:!0,scope:b.scope==="EveryAreaLead"?"Area lead":"Area"}}}return null},w=de(()=>{let x=i.allNotes||a.value;if(!x||x.length===0)return[];if(i.areaId&&i.allNotes){const $={type:"area",areaId:i.areaId,checkpointIds:h.value,marshalIds:p.value},b=[],S=new Set;for(const T of x){if(S.has(T.noteId))continue;const I=g(T,$);I&&(S.add(T.noteId),b.push({...T,matchedScope:I.scope}))}return b}if(i.locationId&&i.allNotes){const $={type:"checkpoint",locationId:i.locationId},b=[],S=new Set;for(const T of x){if(S.has(T.noteId))continue;const I=g(T,$);I&&(S.add(T.noteId),b.push({...T,matchedScope:I.scope}))}return b}if(i.marshalId&&i.allNotes){const $=m(i.marshalId),b=v(i.marshalId),S={type:"marshal",marshalId:i.marshalId,checkpointIds:$,areaIds:b},T=[],I=new Set;for(const N of x){if(I.has(N.noteId))continue;const te=g(N,S);te&&(I.add(N.noteId),T.push({...N,matchedScope:te.scope}))}return T}return x}),E=de(()=>{const x={Urgent:0,High:1,Normal:2,Low:3};return[...w.value].sort(($,b)=>{if($.isPinned!==b.isPinned)return $.isPinned?-1:1;const S=x[$.priority]??2,T=x[b.priority]??2;return S!==T?S-T:$.displayOrder!==b.displayOrder?$.displayOrder-b.displayOrder:new Date(b.createdAt)-new Date($.createdAt)})}),A=async()=>{if(i.allNotes===null&&i.eventId){s.value=!0,r.value=null;try{let x;i.marshalId?x=await js.getMarshalNotes(i.eventId,i.marshalId):x=await js.getByEvent(i.eventId),a.value=x.data||[]}catch(x){console.error("Failed to load notes:",x),r.value=x.response?.data?.message||"Failed to load notes"}finally{s.value=!1}}};Ye(()=>[i.eventId,i.locationId,i.areaId,i.marshalId],()=>{i.allNotes===null&&A()},{immediate:!0});const P=x=>{if(!x)return"";const $=new Date(x),S=new Date-$,T=Math.floor(S/6e4),I=Math.floor(S/36e5),N=Math.floor(S/864e5);return T<1?"just now":T<60?`${T}m ago`:I<24?`${I}h ago`:N<7?`${N}d ago`:$.toLocaleDateString()};return n({loadNotes:A}),(x,$)=>(y(),k("div",R0,[s.value?(y(),k("div",N0," Loading notes... ")):r.value?(y(),k("div",B0,[d("p",null,M(r.value),1),d("button",{onClick:A,class:"btn btn-secondary btn-small"}," Retry ")])):w.value.length===0?(y(),k("div",F0,[d("p",null,M(l.value),1)])):(y(),k("div",z0,[(y(!0),k(me,null,Pe(E.value,b=>(y(),k("div",{key:b.noteId,class:Fe(["note-item",{pinned:b.isPinned}])},[d("div",U0,[d("div",H0,[b.isPinned?(y(),k("span",V0,"")):V("",!0),d("span",{class:Fe(["priority-indicator",(b.priority||"Normal").toLowerCase()])},null,2),d("strong",Z0,M(b.title),1)]),d("div",q0,[b.category?(y(),k("span",j0,M(b.category),1)):V("",!0),d("span",{class:Fe(["priority-badge",(b.priority||"Normal").toLowerCase()])},M(b.priority||"Normal"),3)])]),b.content?(y(),k("div",W0,M(b.content),1)):V("",!0),d("div",G0,[d("span",K0," Created by "+M(b.createdByName||"Unknown")+"  "+M(P(b.createdAt)),1),b.matchedScope&&e.showScope?(y(),k("span",Y0,M(b.matchedScope),1)):V("",!0)])],2))),128))]))]))}},Er=He(J0,[["__scopeId","data-v-bd15ca42"]]),X0={class:"custom-footer"},Q0={__name:"EditLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:null},assignments:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventDate:{type:String,default:""},areas:{type:Array,default:()=>[]},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]}},emits:["close","save","delete","move-location","toggle-check-in","remove-assignment","assign-marshal","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O("details"),u=O(!1),h=O(null),p=O(null),m=O([]),v=O({name:"",description:"",what3Words:"",latitude:0,longitude:0,requiredMarshals:1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:[]});Ye(()=>s.location,S=>{if(S){let T="",I="";S.startTime&&(T=Xa(S.startTime)),S.endTime&&(I=Xa(S.endTime)),v.value={name:S.name||"",description:S.description||"",what3Words:S.what3Words||"",latitude:S.latitude||0,longitude:S.longitude||0,requiredMarshals:S.requiredMarshals||1,useCustomTimes:!!(S.startTime||S.endTime),startTime:T,endTime:I,areaIds:S.areaIds||S.AreaIds||[]}}},{immediate:!0,deep:!0}),Ye(()=>s.show,S=>{S&&(l.value="details",u.value=!1,m.value=[],h.value?.clearPendingChanges&&h.value.clearPendingChanges(),p.value?.resetLocalState&&p.value.resetLocalState())});const g=()=>{r("update:isDirty",!0)},w=()=>{u.value=!u.value,r("move-location",u.value)},E=S=>{m.value=S,g()},A=()=>{const S={...v.value,startTime:v.value.useCustomTimes&&v.value.startTime?new Date(v.value.startTime).toISOString():null,endTime:v.value.useCustomTimes&&v.value.endTime?new Date(v.value.endTime).toISOString():null,checkInChanges:h.value?.getPendingChanges?.()||[],checklistChanges:m.value||[]};r("save",S)},P=()=>{s.location&&s.location.id&&r("delete",s.location.id)},x=S=>{r("remove-assignment",S)},$=()=>{r("assign-marshal")},b=()=>{r("close")};return(S,T)=>(y(),it(Ot,{show:e.show,title:`Edit ${W(a).checkpoint}: ${e.location?.name||""}`,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:b},{"tab-header":Ke(()=>[Ae(ic,{modelValue:l.value,"onUpdate:modelValue":T[0]||(T[0]=I=>l.value=I),tabs:[{value:"details",label:"Details",icon:"details"},{value:"location",label:"Location",icon:"location"},{value:"marshals",label:W(i).people,icon:"marshal"},{value:"checklist",label:W(i).checklist,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]},null,8,["modelValue","tabs"])]),footer:Ke(()=>[d("div",X0,[d("button",{type:"button",onClick:P,class:"btn btn-danger"}," Delete "+M(W(a).checkpoint),1),d("button",{type:"button",onClick:A,class:"btn btn-primary"}," Save changes ")])]),default:Ke(()=>[l.value==="details"?(y(),it(B1,{key:0,form:v.value,areas:e.areas,"event-date":e.eventDate,"onUpdate:form":T[1]||(T[1]=I=>v.value=I),onInput:g,onSave:A},null,8,["form","areas","event-date"])):V("",!0),l.value==="location"?(y(),it(Y1,{key:1,form:v.value,"is-moving":u.value,"onUpdate:form":T[2]||(T[2]=I=>v.value=I),onInput:g,onSave:A,onMoveLocation:w},null,8,["form","is-moving"])):V("",!0),l.value==="marshals"?(y(),it(f0,{key:2,ref_key:"assignmentsTabRef",ref:h,form:v.value,assignments:e.assignments,"onUpdate:form":T[3]||(T[3]=I=>v.value=I),onInput:g,onRemoveAssignment:x,onAssignMarshal:$},null,8,["form","assignments"])):V("",!0),l.value==="checklist"?(y(),it(af,{key:3,ref_key:"checklistTabRef",ref:p,modelValue:m.value,"onUpdate:modelValue":T[4]||(T[4]=I=>m.value=I),"event-id":e.eventId,"location-id":e.location.id,locations:e.allLocations,areas:e.areas,assignments:e.assignments,onChange:E},null,8,["modelValue","event-id","location-id","locations","areas","assignments"])):V("",!0),l.value==="notes"?(y(),it(Er,{key:4,"event-id":e.eventId,"location-id":e.location?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","location-id","all-notes","locations","areas","assignments"])):V("",!0)]),_:1},8,["show","title","is-dirty"]))}},ex=He(Q0,[["__scopeId","data-v-73133616"]]),tx={class:"tab-content"},nx={class:"form-group"},sx=["value"],ix={class:"form-group"},ox=["value"],ax={class:"form-group"},rx=["value"],lx={class:"form-group"},cx=["value"],ux={key:0,class:"magic-link-section"},dx={key:0,class:"loading-text"},hx={key:1,class:"magic-link-container"},fx=["value"],px={class:"magic-link-actions"},mx=["disabled"],vx={key:0,class:"success-text"},_x={key:1,class:"error-text"},gx={key:2,class:"error-text"},yx={__name:"MarshalDetailsTab",props:{form:{type:Object,required:!0},eventId:{type:String,default:null},marshalId:{type:String,default:null}},emits:["update:form","input"],setup(e,{emit:n}){const i=e,a=n,s=O(""),r=O(!1),l=O(!1),u=O(""),h=O(!1),p=O(!1),m=O(!1),v=O(""),g=(P,x)=>{a("update:form",{...i.form,[P]:x}),a("input")},w=async()=>{if(!(!i.eventId||!i.marshalId)){l.value=!0,u.value="";try{const P=await ts.getMagicLink(i.eventId,i.marshalId);s.value=P.data.magicLink,r.value=P.data.hasEmail}catch(P){console.error("Failed to fetch magic link:",P),u.value="Failed to load login link"}finally{l.value=!1}}},E=async()=>{try{await navigator.clipboard.writeText(s.value),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(P){console.error("Failed to copy:",P)}},A=async()=>{if(!(!i.eventId||!i.marshalId)){p.value=!0,m.value=!1,v.value="";try{await ts.sendMagicLink(i.eventId,i.marshalId),m.value=!0,setTimeout(()=>{m.value=!1},3e3)}catch(P){console.error("Failed to send email:",P),v.value=P.response?.data?.message||"Failed to send email"}finally{p.value=!1}}};return Ye(()=>i.marshalId,P=>{P?w():(s.value="",r.value=!1)},{immediate:!0}),(P,x)=>(y(),k("div",tx,[d("div",nx,[x[5]||(x[5]=d("label",null,"Name *",-1)),d("input",{value:e.form.name,onInput:x[0]||(x[0]=$=>g("name",$.target.value)),type:"text",required:"",class:"form-input"},null,40,sx)]),d("div",ix,[x[6]||(x[6]=d("label",null,"Email",-1)),d("input",{value:e.form.email,onInput:x[1]||(x[1]=$=>g("email",$.target.value)),type:"email",class:"form-input"},null,40,ox)]),d("div",ax,[x[7]||(x[7]=d("label",null,"Phone number",-1)),d("input",{value:e.form.phoneNumber,onInput:x[2]||(x[2]=$=>g("phoneNumber",$.target.value)),type:"tel",class:"form-input"},null,40,rx)]),d("div",lx,[x[8]||(x[8]=d("label",null,"Notes",-1)),d("textarea",{value:e.form.notes,onInput:x[3]||(x[3]=$=>g("notes",$.target.value)),class:"form-input",rows:"3",placeholder:"e.g., Needs to leave by 11am"},null,40,cx)]),e.marshalId?(y(),k("div",ux,[x[9]||(x[9]=d("label",null,"Login Link",-1)),x[10]||(x[10]=d("p",{class:"help-text"},"Share this unique link with the marshal so they can access their dashboard.",-1)),l.value?(y(),k("div",dx,"Loading link...")):s.value?(y(),k("div",hx,[d("input",{type:"text",value:s.value,readonly:"",class:"form-input magic-link-input",onFocus:x[4]||(x[4]=$=>$.target.select())},null,40,fx),d("div",px,[d("button",{type:"button",class:"btn btn-secondary",onClick:E},M(h.value?"Copied!":"Copy link"),1),r.value?(y(),k("button",{key:0,type:"button",class:"btn btn-primary",disabled:p.value,onClick:A},M(p.value?"Sending...":"Send via email"),9,mx)):V("",!0)]),m.value?(y(),k("p",vx,"Email sent successfully!")):V("",!0),v.value?(y(),k("p",_x,M(v.value),1)):V("",!0)])):u.value?(y(),k("div",gx,M(u.value),1)):V("",!0)])):V("",!0)]))}},bx=He(yx,[["__scopeId","data-v-59f2e8cd"]]),kx={class:"tab-content"},wx={class:"section-title"},Lx={class:"assignments-list"},Cx={class:"assignment-info"},xx={class:"assignment-header"},Ex=["title"],Tx={key:0,class:"pending-badge"},Sx={key:0,class:"check-in-info"},Ix={class:"check-in-method"},Mx={class:"assignment-actions"},Ax=["onClick"],Px=["onClick"],$x={class:"form-group",style:{"margin-top":"1.5rem"}},Dx=["value"],Ox=["disabled"],Rx={__name:"MarshalCheckpointsTab",props:{assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]}},emits:["input","remove-assignment","assign-to-location"],setup(e,{expose:n,emit:i}){const a=e,s=i,{pendingCheckInChanges:r,getEffectiveCheckInStatus:l,handleToggleCheckIn:u,getStatusIcon:h,getStatusColor:p,getStatusText:m,formatTime:v}=of(()=>s("input")),g=O(""),w=de(()=>a.assignments?.length||0),E=()=>{g.value&&(s("assign-to-location",g.value),g.value="")};return n({pendingCheckInChanges:r,clearPendingChanges:()=>{r.value.clear(),g.value=""},getPendingChanges:()=>Array.from(r.value.entries()).map(([A,P])=>({assignmentId:A,shouldBeCheckedIn:P}))}),(A,P)=>(y(),k("div",kx,[d("h3",wx,"Assigned checkpoints ("+M(w.value)+")",1),d("div",Lx,[(y(!0),k(me,null,Pe(e.assignments,x=>(y(),k("div",{key:x.id,class:Fe(["assignment-item",{"checked-in":W(l)(x)}])},[d("div",Cx,[d("div",xx,[d("span",{class:"status-indicator",style:Gt({color:W(p)(x)}),title:W(m)(x)},M(W(h)(x)),13,Ex),d("strong",null,M(x.locationName),1),W(r).has(x.id)?(y(),k("span",Tx," (unsaved) ")):V("",!0)]),W(l)(x)?(y(),k("span",Sx,[x.isCheckedIn&&!W(r).has(x.id)?(y(),k(me,{key:0},[Oe(M(W(v)(x.checkInTime))+" ",1),d("span",Ix,"("+M(x.checkInMethod)+")",1)],64)):(y(),k(me,{key:1},[Oe(" Will be checked in on save ")],64))])):V("",!0)]),d("div",Mx,[d("button",{onClick:$=>W(u)(x),class:Fe(["btn btn-small",W(l)(x)?"btn-danger":"btn-secondary"])},M(W(l)(x)?"Undo":"Check in"),11,Ax),d("button",{onClick:$=>A.$emit("remove-assignment",x),class:"btn btn-small btn-danger"}," Remove ",8,Px)])],2))),128)),d("div",$x,[P[2]||(P[2]=d("label",null,"Assign to checkpoint",-1)),Me(d("select",{"onUpdate:modelValue":P[0]||(P[0]=x=>g.value=x),class:"form-input"},[P[1]||(P[1]=d("option",{value:""},"Select a checkpoint...",-1)),(y(!0),k(me,null,Pe(e.availableLocations,x=>(y(),k("option",{key:x.id,value:x.id},M(x.name),9,Dx))),128))],512),[[nn,g.value]]),d("button",{onClick:E,class:"btn btn-secondary btn-full",style:{"margin-top":"0.5rem"},disabled:!g.value}," Assign to checkpoint ",8,Ox)])])]))}},Nx=He(Rx,[["__scopeId","data-v-2238681f"]]),Bx={class:"marshal-checklist-view"},Fx={key:0,class:"loading-state"},zx={key:1,class:"error-state"},Ux={key:2,class:"empty-state"},Hx={key:3,class:"checklist-items"},Vx={class:"item-checkbox"},Zx=["checked","disabled","onChange"],qx={class:"item-content"},jx={class:"item-header"},Wx={class:"item-text-wrapper"},Gx={class:"item-text"},Kx={key:0,class:"item-context"},Yx={class:"item-scope"},Jx=["title"],Xx={key:0,class:"completion-info"},Qx={key:0,class:"pending-text"},eE={class:"completion-text"},tE={class:"completion-time"},nE={key:1,class:"uncomplete-info"},sE={key:2,class:"disabled-reason"},iE={__name:"MarshalChecklistView",props:{eventId:{type:String,required:!0},marshalId:{type:String,required:!0},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=O([]),l=O(!1),u=O(null),h=O(new Map),p=de(()=>r.value.map(b=>{const S=h.value.get(b.itemId),T=S!==void 0?S.complete:b.isCompleted,I=S!==void 0&&S.complete!==b.isCompleted;return{...b,localIsCompleted:T,isModified:I}})),m=async()=>{if(!(!a.eventId||!a.marshalId)){l.value=!0,u.value=null;try{const b=await It.getMarshalChecklist(a.eventId,a.marshalId);if(r.value=b.data||[],a.modelValue&&a.modelValue.length>0){const S=new Map;a.modelValue.forEach(T=>{S.set(T.itemId,{complete:T.complete,contextType:T.contextType,contextId:T.contextId})}),h.value=S}}catch(b){console.error("Failed to load checklist:",b),u.value=b.response?.data?.message||"Failed to load checklist"}finally{l.value=!1}}},v=b=>{const S=h.value.get(b.itemId),T=S!==void 0?S.complete:b.isCompleted;h.value.set(b.itemId,{complete:!T,contextType:b.completionContextType,contextId:b.completionContextId}),g()},g=()=>{const b=[];for(const[S,T]of h.value.entries()){const I=r.value.find(N=>N.itemId===S);I&&T.complete!==I.isCompleted&&b.push({itemId:S,complete:T.complete,contextType:T.contextType,contextId:T.contextId})}s("update:modelValue",b),s("change",b)};n({resetLocalState:()=>{if(h.value=new Map,a.modelValue&&a.modelValue.length>0){const b=new Map;a.modelValue.forEach(S=>{b.set(S.itemId,{complete:S.complete,contextType:S.contextType,contextId:S.contextId})}),h.value=b}},loadChecklist:m});const E=b=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:"Your areas",EveryoneAtCheckpoints:"Your checkpoints",OnePerCheckpoint:"One per checkpoint",OnePerArea:"One per area",EveryAreaLead:"Area lead",OneLeadPerArea:"One lead per area"})[b.matchedScope]||b.matchedScope,A=b=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to this person",EveryoneInAreas:"This item is for everyone in certain areas",EveryoneAtCheckpoints:"This item is for everyone at certain checkpoints",OnePerCheckpoint:"One person at the checkpoint needs to complete this",OnePerArea:"One person in the area needs to complete this",EveryAreaLead:"This item is for area leads only",OneLeadPerArea:"One area lead needs to complete this"})[b.matchedScope]||"",P=b=>b.completionContextType==="Checkpoint"||b.completionContextType==="Area"?"Already completed by someone else":"Cannot be completed",x=b=>{if(!b.completionContextType||!b.completionContextId)return null;if(b.completionContextType==="Checkpoint"){const S=a.locations.find(I=>I.id===b.completionContextId);return S?`at checkpoint ${S.description?`${S.name} - ${S.description}`:S.name}`:null}if(b.completionContextType==="Area"){const S=a.areas.find(T=>T.id===b.completionContextId);return S?`in area ${S.name}`:null}return b.completionContextType==="Personal"?b.contextOwnerName?`for ${b.contextOwnerName}`:"assigned individually":null},$=b=>b?new Date(b).toLocaleString():"";return Ye(()=>[a.eventId,a.marshalId],()=>{m()},{immediate:!0}),(b,S)=>(y(),k("div",Bx,[l.value?(y(),k("div",Fx," Loading checklist... ")):u.value?(y(),k("div",zx,[d("p",null,M(u.value),1),d("button",{onClick:m,class:"btn btn-secondary btn-small"}," Retry ")])):r.value.length===0?(y(),k("div",Ux,[...S[0]||(S[0]=[d("p",null,"No checklist items for this person.",-1)])])):(y(),k("div",Hx,[(y(!0),k(me,null,Pe(p.value,T=>(y(),k("div",{key:T.itemId,class:Fe(["checklist-item",{"item-completed":T.localIsCompleted,"item-modified":T.isModified}])},[d("div",Vx,[d("input",{type:"checkbox",checked:T.localIsCompleted,disabled:!T.canBeCompletedByMe,onChange:I=>v(T)},null,40,Zx)]),d("div",qx,[d("div",jx,[d("div",Wx,[d("div",Gx,M(T.text),1),x(T)?(y(),k("div",Kx,M(x(T)),1)):V("",!0)]),d("div",Yx,[d("span",{class:"scope-pill",title:A(T)},M(E(T)),9,Jx)])]),T.localIsCompleted?(y(),k("div",Xx,[T.isModified&&!T.isCompleted?(y(),k("span",Qx," Will be marked as completed (pending save) ")):(y(),k(me,{key:1},[d("span",eE," Completed by "+M(T.completedByActorName||"Unknown"),1),d("span",tE,M($(T.completedAt)),1)],64))])):V("",!0),T.isModified&&T.isCompleted&&!T.localIsCompleted?(y(),k("div",nE,[...S[1]||(S[1]=[d("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):V("",!0),!T.canBeCompletedByMe&&!T.localIsCompleted?(y(),k("div",sE,M(P(T)),1)):V("",!0)])],2))),128))]))]))}},oE=He(iE,[["__scopeId","data-v-d020f56e"]]),aE={class:"custom-footer"},rE={key:1},lE={__name:"EditMarshalModal",props:{show:{type:Boolean,default:!1},marshal:{type:Object,default:null},eventId:{type:String,required:!0},assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},eventNotes:{type:Array,default:()=>[]}},emits:["close","save","delete","toggle-check-in","remove-assignment","assign-to-location","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O("details"),u=O(null),h=O(null),p=O([]),m=O({name:"",email:"",phoneNumber:"",notes:""}),v=de(()=>{const b=s.isEditing?`Edit ${a.value.person}`:`Create ${a.value.person}`,S=m.value.name?.trim();return S?`${b} - ${S}`:b});Ye(()=>s.marshal,b=>{b?m.value={name:b.name||"",email:b.email||"",phoneNumber:b.phoneNumber||"",notes:b.notes||""}:m.value={name:"",email:"",phoneNumber:"",notes:""}},{immediate:!0,deep:!0}),Ye(()=>s.show,b=>{b&&(l.value="details",p.value=[],u.value?.clearPendingChanges&&u.value.clearPendingChanges(),h.value?.resetLocalState&&h.value.resetLocalState())});const g=()=>{r("update:isDirty",!0)},w=()=>{r("update:isDirty",!0)},E=()=>{const b={...m.value,checkInChanges:u.value?.getPendingChanges?.()||[],checklistChanges:p.value||[]};r("save",b)},A=()=>{r("delete")},P=b=>{r("remove-assignment",b)},x=b=>{r("assign-to-location",b)},$=()=>{r("close")};return(b,S)=>(y(),it(Ot,{show:e.show,title:v.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:$},tm({footer:Ke(()=>[d("div",aE,[e.isEditing?(y(),k("button",{key:0,type:"button",onClick:A,class:"btn btn-danger"}," Delete "+M(W(a).person),1)):(y(),k("div",rE)),d("button",{type:"button",onClick:E,class:"btn btn-primary"},M(e.isEditing?"Save changes":`Add ${W(a).person}`),1)])]),default:Ke(()=>[l.value==="details"||!e.isEditing?(y(),it(bx,{key:0,form:m.value,"event-id":e.eventId,"marshal-id":e.isEditing?e.marshal?.id:null,"onUpdate:form":S[1]||(S[1]=T=>m.value=T),onInput:g},null,8,["form","event-id","marshal-id"])):V("",!0),l.value==="checkpoints"&&e.isEditing?(y(),it(Nx,{key:1,ref_key:"checkpointsTabRef",ref:u,assignments:e.assignments,"available-locations":e.availableLocations,onInput:g,onRemoveAssignment:P,onAssignToLocation:x},null,8,["assignments","available-locations"])):V("",!0),l.value==="checklist"&&e.isEditing?(y(),it(oE,{key:2,ref_key:"checklistTabRef",ref:h,modelValue:p.value,"onUpdate:modelValue":S[2]||(S[2]=T=>p.value=T),"event-id":e.eventId,"marshal-id":e.marshal.id,locations:e.allLocations,areas:e.areas,onChange:w},null,8,["modelValue","event-id","marshal-id","locations","areas"])):V("",!0),l.value==="notes"&&e.isEditing?(y(),it(Er,{key:3,"event-id":e.eventId,"marshal-id":e.marshal?.id,"all-notes":e.eventNotes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","marshal-id","all-notes","locations","areas","assignments"])):V("",!0)]),_:2},[e.isEditing?{name:"tab-header",fn:Ke(()=>[Ae(ic,{modelValue:l.value,"onUpdate:modelValue":S[0]||(S[0]=T=>l.value=T),tabs:[{value:"details",label:"Details",icon:"details"},{value:"checkpoints",label:W(i).checkpoints,icon:"checkpoint"},{value:"checklist",label:W(i).checklist,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]},null,8,["modelValue","tabs"])]),key:"0"}:void 0]),1032,["show","title","is-dirty"]))}},cE=He(lE,[["__scopeId","data-v-fcf94bca"]]),uE={class:"locations-list"},dE={class:"conflict-actions"},hE={__name:"AssignmentConflictModal",props:{show:{type:Boolean,default:!1},conflictData:{type:Object,default:()=>({marshalName:"",locations:[]})}},emits:["close","choice"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=n,r=u=>{s("choice",u)},l=()=>{s("close")};return(u,h)=>(y(),it(Ot,{show:e.show,title:`${W(i).person} already assigned`,size:"medium",onClose:l},{actions:Ke(()=>[d("div",dE,[d("button",{onClick:h[0]||(h[0]=p=>r("move")),class:"btn btn-primary btn-full"}," Move to this "+M(W(a).checkpoint)+" (remove from others) ",1),d("button",{onClick:h[1]||(h[1]=p=>r("both")),class:"btn btn-secondary btn-full"}," Assign to both (keep existing assignments) "),d("button",{onClick:h[2]||(h[2]=p=>r("choose-other")),class:"btn btn-secondary btn-full"}," Choose someone else "),d("button",{onClick:h[3]||(h[3]=p=>r("cancel")),class:"btn btn-secondary btn-full"}," Cancel ")])]),default:Ke(()=>[d("p",null,[d("strong",null,M(e.conflictData.marshalName),1),h[4]||(h[4]=Oe(" is currently assigned to: ",-1))]),d("ul",uE,[(y(!0),k(me,null,Pe(e.conflictData.locations,p=>(y(),k("li",{key:p},M(p),1))),128))]),h[5]||(h[5]=d("p",null,"What would you like to do?",-1))]),_:1},8,["show","title"]))}},fE=He(hE,[["__scopeId","data-v-2ee8d994"]]),pE={key:0,class:"assign-marshal-section"},mE={value:""},vE=["value"],_E=["disabled"],gE={key:1,class:"assign-marshal-section create-mode"},yE={class:"form-group"},bE={class:"form-group"},kE={class:"form-group"},wE={__name:"AssignMarshalModal",props:{show:{type:Boolean,default:!1},locationName:{type:String,default:""},marshals:{type:Array,default:()=>[]}},emits:["close","assign-existing","create-and-assign"],setup(e,{emit:n}){const{termsLower:i}=Rt(),a=e,s=n,r=O(!1),l=O(""),u=O({name:"",email:"",phoneNumber:""});Ye(()=>a.show,w=>{w||(r.value=!1,l.value="",u.value={name:"",email:"",phoneNumber:""})});const h=()=>{r.value=!0},p=()=>{l.value&&s("assign-existing",l.value)},m=()=>{u.value.name&&s("create-and-assign",{...u.value})},v=()=>{r.value=!1,u.value={name:"",email:"",phoneNumber:""}},g=()=>{s("close")};return(w,E)=>(y(),it(Ot,{show:e.show,title:r.value?`Create new ${W(i).person}`:`Assign ${W(i).person} to ${e.locationName}`,size:"medium",onClose:g},{actions:Ke(()=>[r.value?(y(),k(me,{key:0},[d("button",{onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{onClick:m,class:"btn btn-primary"}," Create & assign ")],64)):V("",!0)]),default:Ke(()=>[r.value?(y(),k("div",gE,[d("h3",null,"Create new "+M(W(i).person),1),d("div",yE,[E[5]||(E[5]=d("label",null,"Name *",-1)),Me(d("input",{"onUpdate:modelValue":E[1]||(E[1]=A=>u.value.name=A),type:"text",required:"",class:"form-input"},null,512),[[rt,u.value.name]])]),d("div",bE,[E[6]||(E[6]=d("label",null,"Email",-1)),Me(d("input",{"onUpdate:modelValue":E[2]||(E[2]=A=>u.value.email=A),type:"email",class:"form-input"},null,512),[[rt,u.value.email]])]),d("div",kE,[E[7]||(E[7]=d("label",null,"Phone",-1)),Me(d("input",{"onUpdate:modelValue":E[3]||(E[3]=A=>u.value.phoneNumber=A),type:"tel",class:"form-input"},null,512),[[rt,u.value.phoneNumber]])])])):(y(),k("div",pE,[d("h3",null,"Select existing "+M(W(i).person),1),Me(d("select",{"onUpdate:modelValue":E[0]||(E[0]=A=>l.value=A),class:"form-input"},[d("option",mE,"Choose a "+M(W(i).person)+"...",1),(y(!0),k(me,null,Pe(e.marshals,A=>(y(),k("option",{key:A.id,value:A.id},[Oe(M(A.name)+" ",1),A.assignedLocationIds&&A.assignedLocationIds.length>0?(y(),k(me,{key:0},[Oe(" (assigned to "+M(A.assignedLocationIds.length)+" "+M(A.assignedLocationIds.length>1?W(i).checkpoints:W(i).checkpoint)+") ",1)],64)):V("",!0)],8,vE))),128))],512),[[nn,l.value]]),d("button",{onClick:p,class:"btn btn-primary btn-full",style:{"margin-top":"1rem"},disabled:!l.value}," Assign selected "+M(W(i).person),9,_E),E[4]||(E[4]=d("div",{class:"divider"},"OR",-1)),d("button",{onClick:h,class:"btn btn-secondary btn-full"}," Create new "+M(W(i).person),1)]))]),_:1},8,["show","title"]))}},LE=He(wE,[["__scopeId","data-v-f95e76a2"]]),CE={class:"shift-times-content"},xE={class:"info-text"},EE={class:"time-delta-info"},TE={class:"delta-detail"},SE={class:"delta-detail"},IE={class:"delta-summary"},ME={class:"affected-checkpoints"},AE={class:"option-selection"},PE={class:"radio-option"},$E={class:"radio-option"},DE={__name:"ShiftCheckpointTimesModal",props:{show:{type:Boolean,default:!1},oldEventDate:{type:String,required:!0},newEventDate:{type:String,required:!0},affectedCheckpointsCount:{type:Number,default:0}},emits:["confirm","cancel"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O("shift"),u=de(()=>{const g=new Date(s.oldEventDate);return new Date(s.newEventDate)-g}),h=g=>new Date(g).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=g=>{const w=Math.abs(g),E=g>=0?"+":"-",A=Math.floor(w/(1e3*60*60*24)),P=Math.floor(w%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(w%(1e3*60*60)/(1e3*60)),$=[];return A>0&&$.push(`${A}d`),P>0&&$.push(`${P}h`),x>0&&$.push(`${x}m`),`${E}${$.join(" ")}`},m=()=>{r("confirm",{shouldShift:l.value==="shift",timeDelta:u.value})},v=()=>{r("cancel")};return(g,w)=>(y(),it(Ot,{show:e.show,title:`Shift ${W(i).checkpoint} Times?`,size:"medium",onClose:v},{actions:Ke(()=>[d("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:m,class:"btn btn-primary"},M(l.value==="shift"?"Shift Times":"Keep Times"),1)]),default:Ke(()=>[d("div",CE,[d("p",xE," You've changed the event date/time. Some "+M(W(a).checkpoints)+" have custom times set. ",1),d("div",EE,[w[2]||(w[2]=d("strong",null,"Event time change:",-1)),d("div",TE," Old: "+M(h(e.oldEventDate)),1),d("div",SE," New: "+M(h(e.newEventDate)),1),d("div",IE," Delta: "+M(p(u.value)),1)]),d("p",ME,[d("strong",null,M(e.affectedCheckpointsCount)+" "+M(e.affectedCheckpointsCount===1?W(a).checkpoint:W(a).checkpoints),1),w[3]||(w[3]=Oe(" with custom times will be shifted by the same amount. ",-1))]),d("div",AE,[d("label",PE,[Me(d("input",{"onUpdate:modelValue":w[0]||(w[0]=E=>l.value=E),type:"radio",value:"shift",name:"shift-option"},null,512),[[hu,l.value]]),d("div",null,[d("strong",null,"Shift all "+M(W(a).checkpoint)+" times",1),w[4]||(w[4]=d("small",null,"Recommended: Maintains relative timing",-1))])]),d("label",$E,[Me(d("input",{"onUpdate:modelValue":w[1]||(w[1]=E=>l.value=E),type:"radio",value:"keep",name:"shift-option"},null,512),[[hu,l.value]]),d("div",null,[d("strong",null,"Keep "+M(W(a).checkpoint)+" times unchanged",1),d("small",null,M(W(i).checkpoint)+" times will stay at their current values",1)])])])])]),_:1},8,["show","title"]))}},OE=He(DE,[["__scopeId","data-v-0e706cff"]]),RE={class:"marshal-selector-section"},NE={class:"form-group"},BE={value:""},FE=["value"],zE={class:"form-group"},UE=["disabled"],HE={__name:"MarshalSelectorModal",props:{show:{type:Boolean,default:!1},areaName:{type:String,default:""},marshals:{type:Array,default:()=>[]},existingContacts:{type:Array,default:()=>[]}},emits:["close","assign"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O(""),u=O("");Ye(()=>s.show,m=>{m||(l.value="",u.value="")});const h=()=>{if(l.value&&u.value){const m=s.marshals.find(v=>v.id===l.value);m&&r("assign",{marshalId:m.id,marshalName:m.name,role:u.value})}},p=()=>{r("close")};return(m,v)=>(y(),it(Ot,{show:e.show,title:`Add contact to ${e.areaName}`,size:"medium",onClose:p},{actions:Ke(()=>[d("button",{onClick:p,class:"btn btn-secondary"}," Cancel "),d("button",{onClick:h,class:"btn btn-primary",disabled:!l.value||!u.value}," Add contact ",8,UE)]),default:Ke(()=>[d("div",RE,[d("h3",null,"Select "+M(W(a).person),1),d("div",NE,[d("label",null,M(W(i).person)+" *",1),Me(d("select",{"onUpdate:modelValue":v[0]||(v[0]=g=>l.value=g),class:"form-input"},[d("option",BE,"Choose a "+M(W(a).person)+"...",1),(y(!0),k(me,null,Pe(e.marshals,g=>(y(),k("option",{key:g.id,value:g.id},M(g.name),9,FE))),128))],512),[[nn,l.value]])]),d("div",zE,[v[3]||(v[3]=d("label",null,"Role *",-1)),Me(d("select",{"onUpdate:modelValue":v[1]||(v[1]=g=>u.value=g),class:"form-input"},[...v[2]||(v[2]=[d("option",{value:""},"Choose a role...",-1),d("option",{value:"Lead"},"Lead",-1),d("option",{value:"Deputy"},"Deputy",-1),d("option",{value:"Support"},"Support",-1)])],512),[[nn,u.value]]),v[4]||(v[4]=d("small",{class:"form-help"},[Oe(" Lead: Primary contact for this area"),d("br"),Oe(" Deputy: Secondary contact"),d("br"),Oe(" Support: Additional support contact ")],-1))])])]),_:1},8,["show","title"]))}},VE=He(HE,[["__scopeId","data-v-ca183d93"]]),rf=[{name:"Charcoal",hex:"#2d3748"},{name:"Dark Gray",hex:"#4a5568"},{name:"Gray",hex:"#718096"},{name:"Red",hex:"#f56565"},{name:"Coral",hex:"#ff6b6b"},{name:"Rose",hex:"#fb7185"},{name:"Pink",hex:"#ed64a6"},{name:"Magenta",hex:"#d946ef"},{name:"Fuchsia",hex:"#e879f9"},{name:"Purple",hex:"#9f7aea"},{name:"Violet",hex:"#a78bfa"},{name:"Lavender",hex:"#b197fc"},{name:"Indigo",hex:"#5a67d8"},{name:"Navy",hex:"#4263eb"},{name:"Blue",hex:"#667eea"},{name:"Sky",hex:"#0ea5e9"},{name:"Cyan",hex:"#0bc5ea"},{name:"Aqua",hex:"#22d3ee"},{name:"Teal",hex:"#38b2ac"},{name:"Emerald",hex:"#10b981"},{name:"Green",hex:"#48bb78"},{name:"Mint",hex:"#51cf66"},{name:"Lime",hex:"#84cc16"},{name:"Olive",hex:"#a3b18a"},{name:"Yellow",hex:"#ecc94b"},{name:"Amber",hex:"#f59e0b"},{name:"Orange",hex:"#ed8936"},{name:"Peach",hex:"#ff922b"},{name:"Light Gray",hex:"#cbd5e0"},{name:"Silver",hex:"#e2e8f0"},{name:"Cream",hex:"#f7fafc"}],Pl="#667eea";function ZE(e){const n=e.map(a=>a.color);return rf.find(a=>!n.includes(a.hex))?.hex||Pl}const qE={key:0,class:"tab-content"},jE={class:"form-group"},WE=["disabled"],GE={class:"form-group"},KE={class:"form-group"},YE={class:"color-picker"},JE=["title","onClick"],XE={key:1,class:"tab-content"},QE={class:"boundary-section"},eT={class:"boundary-actions"},tT={key:2,class:"tab-content"},nT={class:"section-title"},sT={class:"contacts-list"},iT={class:"contact-info"},oT={class:"contact-role"},aT=["onUpdate:modelValue"],rT=["onClick"],lT={key:0,class:"empty-state"},cT={key:3,class:"tab-content"},uT={class:"section-title"},dT={key:0,class:"empty-state"},hT={key:1,class:"checkpoints-list"},fT=["onClick"],pT={class:"checkpoint-header"},mT={class:"checkpoint-name-section"},vT={key:0,class:"checkpoint-description"},_T={class:"checkpoint-stats"},gT={class:"checkpoint-details"},yT={class:"detail-row"},bT={class:"detail-label"},kT={class:"detail-value"},wT={key:0,class:"warning-text"},LT={class:"detail-row"},CT={class:"detail-value"},xT={key:0,class:"detail-row"},ET={key:1,class:"detail-row"},TT={class:"custom-footer"},ST={key:1},IT={__name:"EditAreaModal",props:{show:{type:Boolean,default:!1},area:{type:Object,default:null},checkpoints:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]}},emits:["close","save","delete","draw-boundary","update:isDirty","select-checkpoint"],setup(e,{emit:n}){const{terms:i,termsLower:a}=Rt(),s=e,r=n,l=O("details"),u=O(!1),h=O(null),p=O([]),m=O({}),v=O({}),g=O({name:"",description:"",color:Pl,displayOrder:0,isDefault:!1,polygon:[],contacts:[]}),w=de(()=>{const K=[{value:"details",label:"Details",icon:"details"},{value:"boundary",label:"Boundary",icon:"area"},{value:"contacts",label:"Contacts",icon:"marshal"}];return s.area&&s.area.id?[...K,{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklist",label:i.value.checklist,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]:K}),E=de(()=>{if(!s.area||!s.area.id)return[];const K=s.checkpoints.filter(G=>G.areaIds&&G.areaIds.includes(s.area.id)).map(G=>G.id);return s.assignments.filter(G=>K.includes(G.locationId))}),A=de(()=>!s.area||!s.area.id?[]:s.checkpoints.filter(K=>K.areaIds&&K.areaIds.includes(s.area.id))),P=de(()=>{const K=[...A.value];return K.sort((G,U)=>{const re=G.name.match(/^(\d+)/),we=U.name.match(/^(\d+)/);if(re&&we){const De=parseInt(re[1]),Ue=parseInt(we[1]);if(De!==Ue)return De-Ue}return G.name.localeCompare(U.name,void 0,{numeric:!0,sensitivity:"base"})}),K}),x=K=>s.assignments.filter(G=>G.locationId===K),$=K=>x(K.id).filter(U=>U.isCheckedIn).length,b=K=>{const G=x(K.id);if(G.length===0)return"status-none";const U=G.filter(re=>re.isCheckedIn).length;return U===0?"status-none":U===G.length?"status-complete":"status-partial"},S=K=>{const G=x(K.id);if(G.length===0)return`No ${a.value.people}`;const U=G.filter(re=>re.isCheckedIn).length;return U===0?"Not checked in":U===G.length?"Fully checked in":`Partially checked in (${U}/${G.length})`},T=K=>{const G=m.value[K];return!G||G.total===0?"":G.completed===G.total?"status-complete":G.completed===0?"status-none":"status-partial"},I=K=>{const G=m.value[K];return G?G.total===0?"No tasks":G.completed===G.total?"All tasks completed":`${G.completed}/${G.total} completed`:""},N=async K=>{if(!(m.value[K]||v.value[K])){v.value[K]=!0;try{const U=(await It.getCheckpointChecklist(s.eventId,K)).data||[];m.value[K]={total:U.length,completed:U.filter(re=>re.isCompleted).length}}catch(G){console.error("Failed to load checklist status for checkpoint:",K,G),m.value[K]={total:0,completed:0}}finally{v.value[K]=!1}}};Ye(()=>s.area,K=>{if(K){const G=K.contacts?typeof K.contacts=="string"?JSON.parse(K.contacts):K.contacts:[],U=K.polygon?typeof K.polygon=="string"?JSON.parse(K.polygon):K.polygon:[];g.value={name:K.name||"",description:K.description||"",color:K.color||Pl,displayOrder:K.displayOrder||0,isDefault:K.isDefault||!1,polygon:U,contacts:G}}else g.value={name:"",description:"",color:ZE(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[],contacts:[]}},{immediate:!0,deep:!0}),Ye(()=>s.show,K=>{K&&(l.value="details",u.value=!1,p.value=[],m.value={},v.value={},h.value?.resetLocalState&&h.value.resetLocalState())}),Ye(l,K=>{K==="checkpoints"&&s.area&&s.area.id&&A.value.forEach(G=>{setTimeout(()=>N(G.id),0)})});const te=()=>{r("update:isDirty",!0)},Z=K=>{g.value.color=K,te()},ne=()=>{r("draw-boundary",g.value)},ge=()=>{g.value.polygon=[],te()},xe=K=>{g.value.contacts.push(K),u.value=!1,te()},ze=K=>{g.value.contacts.splice(K,1),te()},pe=K=>{p.value=K,te()},$e=()=>{const K=s.area?{name:g.value.name,description:g.value.description,color:g.value.color,contacts:g.value.contacts,polygon:g.value.polygon.length>0?g.value.polygon:null,displayOrder:g.value.displayOrder,checklistChanges:p.value||[]}:{name:g.value.name,description:g.value.description,color:g.value.color,contacts:g.value.contacts,polygon:g.value.polygon.length>0?g.value.polygon:null};r("save",K)},Ce=()=>{r("delete",s.area.id)},Ee=()=>{r("close")};return(K,G)=>(y(),k(me,null,[Ae(Ot,{show:e.show,title:e.area&&e.area.id?`Edit ${W(a).area}: ${e.area.name}`:`Create new ${W(a).area}`,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Ee},{"tab-header":Ke(()=>[Ae(ic,{modelValue:l.value,"onUpdate:modelValue":G[0]||(G[0]=U=>l.value=U),tabs:w.value},null,8,["modelValue","tabs"])]),footer:Ke(()=>[d("div",TT,[e.area&&e.area.id&&!g.value.isDefault?(y(),k("button",{key:0,type:"button",onClick:Ce,class:"btn btn-danger"}," Delete "+M(W(a).area),1)):(y(),k("div",ST)),d("button",{type:"button",onClick:$e,class:"btn btn-primary"},M(e.area&&e.area.id?"Save changes":`Create ${W(a).area}`),1)])]),default:Ke(()=>[l.value==="details"?(y(),k("div",qE,[d("form",{onSubmit:kt($e,["prevent"])},[d("div",jE,[G[6]||(G[6]=d("label",null,"Name *",-1)),Me(d("input",{"onUpdate:modelValue":G[1]||(G[1]=U=>g.value.name=U),type:"text",required:"",class:"form-input",disabled:g.value.isDefault,onInput:te},null,40,WE),[[rt,g.value.name]])]),d("div",GE,[G[7]||(G[7]=d("label",null,"Description",-1)),Me(d("textarea",{"onUpdate:modelValue":G[2]||(G[2]=U=>g.value.description=U),class:"form-input",rows:"3",onInput:te},null,544),[[rt,g.value.description]])]),d("div",KE,[G[8]||(G[8]=d("label",null,"Color *",-1)),d("div",YE,[(y(!0),k(me,null,Pe(W(rf),U=>(y(),k("div",{key:U.hex,class:Fe(["color-swatch",{selected:g.value.color===U.hex}]),style:Gt({backgroundColor:U.hex}),title:U.name,onClick:re=>Z(U.hex)},null,14,JE))),128))])])],32)])):V("",!0),l.value==="boundary"?(y(),k("div",XE,[d("div",QE,[G[9]||(G[9]=d("div",{class:"instructions-card"},[d("p",null,[d("strong",null,"Draw a polygon on the map to define this area's boundary")]),d("p",null,' Click "Draw on Map" to activate drawing mode. Click on the map to add vertices, and double-click to complete the polygon. ')],-1)),d("div",eT,[d("button",{onClick:ne,class:"btn btn-primary btn-full"}," Draw on Map "),g.value.polygon&&g.value.polygon.length>0?(y(),k("button",{key:0,onClick:ge,class:"btn btn-danger btn-full"}," Clear Boundary ")):V("",!0)])])])):V("",!0),l.value==="contacts"?(y(),k("div",tT,[d("h3",nT,M(W(i).area)+" contacts ("+M(g.value.contacts.length)+")",1),d("button",{onClick:G[3]||(G[3]=U=>u.value=!0),class:"btn btn-secondary btn-full"}," Add contact "),d("div",sT,[(y(!0),k(me,null,Pe(g.value.contacts,(U,re)=>(y(),k("div",{key:re,class:"contact-item"},[d("div",iT,[d("strong",null,M(U.marshalName),1),d("div",oT,[G[11]||(G[11]=d("label",null,"Role:",-1)),Me(d("select",{"onUpdate:modelValue":we=>U.role=we,class:"role-select",onChange:te},[...G[10]||(G[10]=[d("option",{value:"Lead"},"Lead",-1),d("option",{value:"Deputy"},"Deputy",-1),d("option",{value:"Support"},"Support",-1)])],40,aT),[[nn,U.role]])])]),d("button",{onClick:we=>ze(re),class:"btn btn-small btn-danger"}," Remove ",8,rT)]))),128)),g.value.contacts.length===0?(y(),k("div",lT,[d("p",null,'No contacts assigned. Click "Add contact" to assign a '+M(W(a).person)+".",1)])):V("",!0)])])):V("",!0),l.value==="checkpoints"?(y(),k("div",cT,[d("h3",uT,M(W(i).checkpoints)+" in "+M(e.area?.name)+" ("+M(A.value.length)+")",1),A.value.length===0?(y(),k("div",dT,[d("p",null,"No "+M(W(a).checkpoints)+" in this "+M(W(a).area)+" yet.",1)])):(y(),k("div",hT,[(y(!0),k(me,null,Pe(P.value,U=>(y(),k("div",{key:U.id,class:"checkpoint-card",onClick:re=>K.$emit("select-checkpoint",U)},[d("div",pT,[d("div",mT,[d("h4",null,M(U.name),1),U.description?(y(),k("p",vT,M(U.description),1)):V("",!0)]),d("div",_T,[d("div",{class:Fe(["stat-badge",b(U)])},M(S(U)),3)])]),d("div",gT,[d("div",yT,[d("span",bT,M(W(i).people)+":",1),d("span",kT,[Oe(M(x(U.id).length)+" / "+M(U.requiredMarshals)+" ",1),x(U.id).length<U.requiredMarshals?(y(),k("span",wT," ("+M(U.requiredMarshals-x(U.id).length)+" needed) ",1)):V("",!0)])]),d("div",LT,[G[12]||(G[12]=d("span",{class:"detail-label"},"Checked in:",-1)),d("span",CT,M($(U))+" / "+M(x(U.id).length),1)]),m.value[U.id]?(y(),k("div",xT,[G[13]||(G[13]=d("span",{class:"detail-label"},"Tasks:",-1)),d("span",{class:Fe(["detail-value",T(U.id)])},M(I(U.id)),3)])):v.value[U.id]?(y(),k("div",ET,[...G[14]||(G[14]=[d("span",{class:"detail-label"},"Tasks:",-1),d("span",{class:"detail-value loading-text"},"Loading...",-1)])])):V("",!0)])],8,fT))),128))]))])):V("",!0),l.value==="checklist"?(y(),it(af,{key:4,ref_key:"checklistTabRef",ref:h,modelValue:p.value,"onUpdate:modelValue":G[4]||(G[4]=U=>p.value=U),"event-id":e.eventId,"area-id":e.area.id,locations:e.allLocations,areas:e.areas,assignments:E.value,onChange:pe},null,8,["modelValue","event-id","area-id","locations","areas","assignments"])):V("",!0),l.value==="notes"?(y(),it(Er,{key:5,"event-id":e.eventId,"area-id":e.area?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","area-id","all-notes","locations","areas","assignments"])):V("",!0)]),_:1},8,["show","title","is-dirty"]),Ae(VE,{show:u.value,areaName:g.value.name,marshals:e.marshals,existingContacts:g.value.contacts,onClose:G[5]||(G[5]=U=>u.value=!1),onAssign:xe},null,8,["show","areaName","marshals","existingContacts"])],64))}},MT=He(IT,[["__scopeId","data-v-50b5aad2"]]),AT={class:"scope-configuration-editor"},PT={class:"editor-header"},$T={class:"scope-types-list"},DT=["onClick"],OT={class:"scope-type-label"},RT={class:"scope-type-pill"},NT={class:"expand-label"},BT={class:"expand-icon"},FT={class:"modal-content"},zT={class:"modal-header"},UT={class:"modal-body"},HT={class:"scope-help"},VT={key:0,class:"form-group"},ZT={class:"checkbox-label special-option"},qT=["checked"],jT={key:0,class:"specific-selection"},WT=["placeholder"],GT={class:"checkbox-group scrollable"},KT=["checked","onChange"],YT={key:1,class:"form-group"},JT={class:"checkbox-label special-option"},XT=["checked"],QT={key:0,class:"specific-selection"},eS={class:"checkbox-group scrollable"},tS=["checked","onChange"],nS={key:2,class:"form-group"},sS={class:"checkbox-label special-option"},iS=["checked"],oS={key:0,class:"specific-selection"},aS=["placeholder"],rS={class:"checkbox-group scrollable"},lS=["checked","onChange"],cS={class:"checkpoint-info"},uS={class:"checkpoint-name"},dS={key:0,class:"checkpoint-description"},hS={__name:"ScopeConfigurationEditor",props:{modelValue:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},excludeScopes:{type:Array,default:()=>[]},headerText:{type:String,default:"Who can see and complete this item?"}},emits:["update:modelValue","user-changed"],setup(e,{emit:n}){const{termsLower:i}=Rt(),a=e,s=n,r=de(()=>[{scope:"SpecificPeople",label:`Specific ${i.value.people}`},{scope:"EveryoneAtCheckpoints",label:`Every ${i.value.person} at specified ${i.value.checkpoints}`},{scope:"OnePerCheckpoint",label:`One ${i.value.person} at each specified ${i.value.checkpoint}`},{scope:"OnePerArea",label:`One ${i.value.person} in specified ${i.value.areas}`},{scope:"EveryoneInAreas",label:`Everyone in specified ${i.value.areas}`},{scope:"EveryAreaLead",label:`Every ${i.value.area} lead at specified ${i.value.areas}`},{scope:"OneLeadPerArea",label:`One lead per specified ${i.value.area}`}]),l=O({SpecificPeople:{enabled:!0,ids:["ALL_MARSHALS"]},EveryoneInAreas:{enabled:!1,ids:[]},EveryoneAtCheckpoints:{enabled:!1,ids:[]},OnePerCheckpoint:{enabled:!1,ids:[]},OnePerArea:{enabled:!1,ids:[]},EveryAreaLead:{enabled:!1,ids:[]},OneLeadPerArea:{enabled:!1,ids:[]}}),u=O(null),h=O(""),p=O(""),m=O(!a.isEditing);let v=!0,g=!1;const w=de(()=>r.value.filter(z=>!a.excludeScopes.includes(z.scope))),E=de(()=>m.value?w.value:w.value.filter(z=>te(z.scope))),A=de(()=>w.value.filter(q=>te(q.scope)).length<w.value.length),P=de(()=>{const z=w.value.filter(q=>te(q.scope)).length;return w.value.length-z});Ye(()=>a.modelValue,z=>{if(z){if(g){g=!1;return}v=!0,Object.keys(l.value).forEach(q=>{l.value[q]={enabled:!1,ids:[]}}),z.forEach(q=>{q.scope==="Everyone"?l.value.SpecificPeople={enabled:!0,ids:["ALL_MARSHALS"]}:q.scope==="AreaLead"?l.value.EveryAreaLead={enabled:!0,ids:[...q.ids]}:l.value[q.scope]&&(l.value[q.scope]={enabled:!0,ids:[...q.ids]})}),v=!1}},{immediate:!0});const x=()=>{const z=[];return Object.keys(l.value).forEach(q=>{const J=l.value[q];if(J.enabled){const _e={scope:q,itemType:$(q),ids:[...J.ids]};z.push(_e)}}),z};Ye(l,()=>{if(v)return;if(Object.keys(l.value).some(J=>J!=="SpecificPeople"&&l.value[J].enabled)&&l.value.SpecificPeople?.ids.includes("ALL_MARSHALS")){const J=l.value.SpecificPeople.ids.indexOf("ALL_MARSHALS");l.value.SpecificPeople.ids.splice(J,1),l.value.SpecificPeople.ids.length===0&&(l.value.SpecificPeople.enabled=!1)}g=!0;const q=x();s("update:modelValue",q),s("user-changed")},{deep:!0});const $=z=>b(z)?"Area":S(z)?"Checkpoint":T(z)?"Marshal":null,b=z=>z==="EveryoneInAreas"||z==="OnePerArea"||z==="EveryAreaLead"||z==="OneLeadPerArea",S=z=>z==="EveryoneAtCheckpoints"||z==="OnePerCheckpoint",T=z=>z==="SpecificPeople",I=z=>{const q=r.value.find(J=>J.scope===z);return q?q.label:z},N=z=>({SpecificPeople:`Select "Everyone at the event" or choose specific ${i.value.people} who must complete this (personal completion)`,EveryoneAtCheckpoints:`Every ${i.value.person} at the selected ${i.value.checkpoints} must complete this (personal completion)`,OnePerCheckpoint:`One completion needed at each selected ${i.value.checkpoint} (shared completion)`,OnePerArea:`One completion needed in each selected ${i.value.area} (shared completion)`,EveryoneInAreas:`Every ${i.value.person} in the selected ${i.value.areas} must complete this (personal completion)`,EveryAreaLead:`Every ${i.value.area} lead at the selected ${i.value.areas} must complete this individually (personal completion)`,OneLeadPerArea:`One completion per ${i.value.area}, only ${i.value.area} leads can complete (shared among leads)`})[z]||"",te=z=>l.value[z]?.enabled||!1,Z=z=>{const q=l.value[z];if(!q||!q.enabled)return"No";const J=q.ids||[];if(b(z)){if(J.includes("ALL_AREAS"))return`All ${i.value.areas}`;const _e=J.length;return _e>0?`${_e} ${_e!==1?i.value.areas:i.value.area}`:`Select ${i.value.areas}...`}if(S(z)){if(J.includes("ALL_CHECKPOINTS"))return`All ${i.value.checkpoints}`;const _e=J.length;return _e>0?`${_e} ${_e!==1?i.value.checkpoints:i.value.checkpoint}`:`Select ${i.value.checkpoints}...`}if(T(z)){if(J.includes("ALL_MARSHALS"))return"Everyone";const _e=J.length;return _e>0?`${_e} ${_e!==1?i.value.people:i.value.person}`:`Select ${i.value.people}...`}return"Configured"},ne=z=>{u.value=z,h.value="",p.value=""},ge=()=>{u.value=null},xe=()=>{u.value&&(l.value[u.value]={enabled:!1,ids:[]}),ge()},ze=()=>u.value&&l.value[u.value]?.ids.includes("ALL_MARSHALS"),pe=()=>{if(!u.value)return;const z=l.value[u.value];ze()?(z.ids=[],z.enabled=!1):(z.ids=["ALL_MARSHALS"],z.enabled=!0)},$e=z=>u.value&&l.value[u.value]?.ids.includes(z),Ce=z=>{if(!u.value)return;const q=l.value[u.value],J=q.ids.indexOf(z);J>=0?(q.ids.splice(J,1),q.ids.length===0&&(q.enabled=!1)):(q.ids.push(z),q.enabled=!0)},Ee=de(()=>{if(!p.value)return a.marshals;const z=p.value.toLowerCase();return a.marshals.filter(q=>q.name.toLowerCase().includes(z)||q.email&&q.email.toLowerCase().includes(z))}),K=()=>u.value&&l.value[u.value]?.ids.includes("ALL_AREAS"),G=()=>{if(!u.value)return;const z=l.value[u.value];K()?(z.ids=[],z.enabled=!1):(z.ids=["ALL_AREAS"],z.enabled=!0)},U=z=>u.value&&l.value[u.value]?.ids.includes(z),re=z=>{if(!u.value)return;const q=l.value[u.value],J=q.ids.indexOf(z);J>=0?(q.ids.splice(J,1),q.ids.length===0&&(q.enabled=!1)):(q.ids.push(z),q.enabled=!0)},we=()=>u.value&&l.value[u.value]?.ids.includes("ALL_CHECKPOINTS"),De=()=>{if(!u.value)return;const z=l.value[u.value];we()?(z.ids=[],z.enabled=!1):(z.ids=["ALL_CHECKPOINTS"],z.enabled=!0)},Ue=z=>u.value&&l.value[u.value]?.ids.includes(z),qe=z=>{if(!u.value)return;const q=l.value[u.value],J=q.ids.indexOf(z);J>=0?(q.ids.splice(J,1),q.ids.length===0&&(q.enabled=!1)):(q.ids.push(z),q.enabled=!0)},Se=de(()=>{let z=a.locations;if(h.value){const q=h.value.toLowerCase();z=z.filter(J=>J.name.toLowerCase().includes(q)||J.description&&J.description.toLowerCase().includes(q))}return[...z].sort((q,J)=>cn(q.name,J.name))});return(z,q)=>(y(),k("div",AT,[d("div",PT,[d("h4",null,M(e.headerText),1)]),d("div",$T,[(y(!0),k(me,null,Pe(E.value,J=>(y(),k("div",{key:J.scope,class:Fe(["scope-type-row",{active:te(J.scope)}]),onClick:_e=>ne(J.scope)},[d("div",OT,M(J.label),1),d("div",RT,M(Z(J.scope)),1)],10,DT))),128)),A.value?(y(),k("div",{key:0,class:"expand-row",onClick:q[0]||(q[0]=J=>m.value=!m.value)},[d("div",NT,M(m.value?"Show less":`Show ${P.value} more option${P.value!==1?"s":""}...`),1),d("div",BT,M(m.value?"":""),1)])):V("",!0)]),u.value?(y(),k("div",{key:0,class:"scope-config-modal",onClick:kt(ge,["self"])},[d("div",FT,[d("div",zT,[d("h5",null,M(I(u.value)),1),d("button",{onClick:ge,class:"btn-close",type:"button"},"")]),d("div",UT,[d("p",HT,M(N(u.value)),1),T(u.value)?(y(),k("div",VT,[d("label",ZT,[d("input",{type:"checkbox",checked:ze(),onChange:pe},null,40,qT),d("span",null,[q[3]||(q[3]=d("strong",null,"Everyone at the event",-1)),Oe(" (all current and future "+M(W(i).people)+")",1)])]),ze()?V("",!0):(y(),k("div",jT,[Me(d("input",{"onUpdate:modelValue":q[1]||(q[1]=J=>p.value=J),type:"text",placeholder:`Search ${W(i).people}...`,class:"search-input"},null,8,WT),[[rt,p.value]]),d("div",GT,[(y(!0),k(me,null,Pe(Ee.value,J=>(y(),k("label",{key:J.id,class:"checkbox-label"},[d("input",{type:"checkbox",checked:$e(J.id),onChange:_e=>Ce(J.id)},null,40,KT),d("span",null,M(J.name),1)]))),128))])]))])):V("",!0),b(u.value)?(y(),k("div",YT,[d("label",JT,[d("input",{type:"checkbox",checked:K(),onChange:G},null,40,XT),d("span",null,[d("strong",null,"All "+M(W(i).areas),1),Oe(" (includes future "+M(W(i).areas)+")",1)])]),K()?V("",!0):(y(),k("div",QT,[d("div",eS,[(y(!0),k(me,null,Pe(e.areas,J=>(y(),k("label",{key:J.id,class:"checkbox-label"},[d("input",{type:"checkbox",checked:U(J.id),onChange:_e=>re(J.id)},null,40,tS),d("span",{class:"area-color-dot",style:Gt({backgroundColor:J.color||"#667eea"})},null,4),d("span",null,M(J.name),1)]))),128))])]))])):V("",!0),S(u.value)?(y(),k("div",nS,[d("label",sS,[d("input",{type:"checkbox",checked:we(),onChange:De},null,40,iS),d("span",null,[d("strong",null,"All "+M(W(i).checkpoints),1),Oe(" (includes future "+M(W(i).checkpoints)+")",1)])]),we()?V("",!0):(y(),k("div",oS,[Me(d("input",{"onUpdate:modelValue":q[2]||(q[2]=J=>h.value=J),type:"text",placeholder:`Search ${W(i).checkpoints}...`,class:"search-input"},null,8,aS),[[rt,h.value]]),d("div",rS,[(y(!0),k(me,null,Pe(Se.value,J=>(y(),k("label",{key:J.id,class:"checkbox-label"},[d("input",{type:"checkbox",checked:Ue(J.id),onChange:_e=>qe(J.id)},null,40,lS),d("div",cS,[d("span",uS,M(J.name),1),J.description?(y(),k("span",dS," - "+M(J.description),1)):V("",!0)])]))),128))])]))])):V("",!0)]),d("div",{class:"modal-footer"},[d("button",{onClick:xe,class:"btn btn-secondary",type:"button"},"Deselect all"),d("button",{onClick:ge,class:"btn btn-primary",type:"button"},"Done")])])])):V("",!0)]))}},oc=He(hS,[["__scopeId","data-v-e1e2471d"]]),fS=["innerHTML"],pS={__name:"InfoModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Information"},message:{type:String,required:!0},okText:{type:String,default:"OK"}},emits:["close"],setup(e,{emit:n}){const i=n,a=()=>{i("close")};return(s,r)=>(y(),it(Ot,{show:e.show,title:e.title,size:"small","z-index":2e3,onClose:a},{actions:Ke(()=>[d("button",{onClick:a,class:"btn btn-primary"},M(e.okText),1)]),default:Ke(()=>[d("div",{class:"info-content",innerHTML:e.message},null,8,fS)]),_:1},8,["show","title"]))}},Tr=He(pS,[["__scopeId","data-v-897177d3"]]),mS={class:"tab-headers"},vS={class:"tab-content"},_S={class:"form-group"},gS=["placeholder"],yS={key:0,class:"checkbox-label-inline create-separate-items"},bS={class:"tab-content"},kS={class:"custom-footer"},wS={__name:"EditChecklistItemModal",props:{show:{type:Boolean,default:!1},checklistItem:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O(!1),r=O(""),l=O("details"),u=O({text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0}),h=de(()=>!!i.checklistItem);Ye(()=>i.show,x=>{x&&(l.value=i.initialTab,i.checklistItem?u.value={text:i.checklistItem.text||"",scopeConfigurations:i.checklistItem.scopeConfigurations?JSON.parse(JSON.stringify(i.checklistItem.scopeConfigurations)):[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:i.checklistItem.displayOrder||0,isRequired:i.checklistItem.isRequired!==!1,visibleFrom:i.checklistItem.visibleFrom?p(i.checklistItem.visibleFrom):null,visibleUntil:i.checklistItem.visibleUntil?p(i.checklistItem.visibleUntil):null,mustCompleteBy:i.checklistItem.mustCompleteBy?p(i.checklistItem.mustCompleteBy):null,createSeparateItems:!1}:u.value={text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0},a("update:isDirty",!1))});const p=x=>{if(!x)return null;const $=new Date(x),b=$.getTimezoneOffset();return new Date($.getTime()-b*60*1e3).toISOString().slice(0,16)},m=x=>x?new Date(x).toISOString():null,v=()=>{a("update:isDirty",!0)},g=()=>{a("close")},w=()=>{l.value="visibility"},E=x=>{r.value=x,s.value=!0},A=()=>{if(!u.value.text||!u.value.text.trim()){E("Please enter checklist item text");return}if(!u.value.scopeConfigurations||u.value.scopeConfigurations.length===0){E("Please select at least one scope");return}if(!u.value.scopeConfigurations.some(b=>!(b.itemType!==null&&(!b.ids||b.ids.length===0)))){E("Please configure at least one scope with valid selections");return}const $={text:u.value.text,scopeConfigurations:u.value.scopeConfigurations,displayOrder:u.value.displayOrder||0,isRequired:u.value.isRequired,visibleFrom:m(u.value.visibleFrom),visibleUntil:m(u.value.visibleUntil),mustCompleteBy:m(u.value.mustCompleteBy)};h.value||($.createSeparateItems=u.value.createSeparateItems),a("save",$)},P=()=>{a("delete",i.checklistItem.itemId)};return(x,$)=>(y(),k(me,null,[Ae(Ot,{show:e.show,title:h.value?"Edit checklist item":"Create checklist item",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:g},{footer:Ke(()=>[d("div",kS,[h.value?(y(),k("button",{key:0,type:"button",onClick:P,class:"btn btn-danger"}," Delete ")):V("",!0),!h.value&&l.value==="details"?(y(),k("button",{key:1,type:"button",onClick:w,class:"btn btn-primary"}," Next ")):V("",!0),h.value||l.value==="visibility"?(y(),k("button",{key:2,type:"button",onClick:A,class:"btn btn-primary"},M(h.value?"Save changes":"Create"),1)):V("",!0)])]),default:Ke(()=>[d("div",mS,[d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="details"}]),onClick:$[0]||($[0]=b=>l.value="details")}," Details ",2),d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="visibility"}]),onClick:$[1]||($[1]=b=>l.value="visibility")}," Visibility ",2)]),d("form",{onSubmit:kt(A,["prevent"]),class:"checklist-form"},[Me(d("div",vS,[d("div",_S,[$[7]||($[7]=d("label",{for:"text"},"Checklist text: *",-1)),Me(d("textarea",{id:"text","onUpdate:modelValue":$[2]||($[2]=b=>u.value.text=b),onInput:v,required:"",rows:"3",placeholder:u.value.createSeparateItems?"Enter checklist items, one per line...":"Enter the checklist item text..."},null,40,gS),[[rt,u.value.text]]),h.value?V("",!0):(y(),k("label",yS,[Me(d("input",{type:"checkbox","onUpdate:modelValue":$[3]||($[3]=b=>u.value.createSeparateItems=b),onChange:v},null,544),[[Pi,u.value.createSeparateItems]]),$[6]||($[6]=d("span",null,"Each line creates a new item",-1))]))])],512),[[Es,l.value==="details"]]),Me(d("div",bS,[Ae(oc,{modelValue:u.value.scopeConfigurations,"onUpdate:modelValue":$[4]||($[4]=b=>u.value.scopeConfigurations=b),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,onUserChanged:v},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Es,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Ae(Tr,{show:s.value,title:"Validation Error",message:r.value,onClose:$[5]||($[5]=b=>s.value=!1)},null,8,["show","message"])],64))}},LS=He(wS,[["__scopeId","data-v-2c532f20"]]),CS={class:"tab-headers"},xS={class:"tab-content"},ES={class:"form-group"},TS={class:"form-group"},SS={class:"form-row"},IS={class:"form-group"},MS={class:"form-group"},AS={class:"form-row"},PS={class:"form-group"},$S={class:"form-group checkbox-group-inline"},DS={class:"checkbox-label-inline"},OS={class:"tab-content"},RS={class:"custom-footer"},NS={__name:"EditNoteModal",props:{show:{type:Boolean,default:!1},note:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O(!1),r=O(""),l=O("details"),u=O({title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1}),h=de(()=>!!i.note);Ye(()=>i.show,A=>{A&&(l.value=i.initialTab,i.note?u.value={title:i.note.title||"",content:i.note.content||"",scopeConfigurations:i.note.scopeConfigurations?JSON.parse(JSON.stringify(i.note.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:i.note.displayOrder||0,priority:i.note.priority||"Normal",category:i.note.category||"",isPinned:i.note.isPinned||!1}:u.value={title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1},a("update:isDirty",!1))});const p=()=>{a("update:isDirty",!0)},m=()=>{a("close")},v=()=>{l.value="visibility"},g=A=>{r.value=A,s.value=!0},w=()=>{if(!u.value.title||!u.value.title.trim()){g("Please enter a note title");return}if(!u.value.scopeConfigurations||u.value.scopeConfigurations.length===0){g("Please select at least one visibility scope");return}if(!u.value.scopeConfigurations.some(x=>!(x.itemType!==null&&(!x.ids||x.ids.length===0)))){g("Please configure at least one scope with valid selections");return}const P={title:u.value.title.trim(),content:u.value.content||"",scopeConfigurations:u.value.scopeConfigurations,displayOrder:u.value.displayOrder||0,priority:u.value.priority||"Normal",category:u.value.category?.trim()||null,isPinned:u.value.isPinned||!1};a("save",P)},E=()=>{a("delete",i.note.noteId)};return(A,P)=>(y(),k(me,null,[Ae(Ot,{show:e.show,title:h.value?"Edit note":"Create note",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:m},{footer:Ke(()=>[d("div",RS,[h.value?(y(),k("button",{key:0,type:"button",onClick:E,class:"btn btn-danger"}," Delete ")):V("",!0),!h.value&&l.value==="details"?(y(),k("button",{key:1,type:"button",onClick:v,class:"btn btn-primary"}," Next ")):V("",!0),h.value||l.value==="visibility"?(y(),k("button",{key:2,type:"button",onClick:w,class:"btn btn-primary"},M(h.value?"Save changes":"Create"),1)):V("",!0)])]),default:Ke(()=>[d("div",CS,[d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="details"}]),onClick:P[0]||(P[0]=x=>l.value="details")}," Details ",2),d("button",{type:"button",class:Fe(["tab-header",{active:l.value==="visibility"}]),onClick:P[1]||(P[1]=x=>l.value="visibility")}," Visibility ",2)]),d("form",{onSubmit:kt(w,["prevent"]),class:"note-form"},[Me(d("div",xS,[d("div",ES,[P[10]||(P[10]=d("label",{for:"title"},"Title: *",-1)),Me(d("input",{id:"title","onUpdate:modelValue":P[2]||(P[2]=x=>u.value.title=x),type:"text",onInput:p,required:"",placeholder:"Enter note title..."},null,544),[[rt,u.value.title]])]),d("div",TS,[P[11]||(P[11]=d("label",{for:"content"},"Content:",-1)),Me(d("textarea",{id:"content","onUpdate:modelValue":P[3]||(P[3]=x=>u.value.content=x),onInput:p,rows:"6",placeholder:"Enter note content (supports markdown)..."},null,544),[[rt,u.value.content]])]),d("div",SS,[d("div",IS,[P[13]||(P[13]=d("label",{for:"priority"},"Priority:",-1)),Me(d("select",{id:"priority","onUpdate:modelValue":P[4]||(P[4]=x=>u.value.priority=x),onChange:p},[...P[12]||(P[12]=[d("option",{value:"Urgent"},"Urgent",-1),d("option",{value:"High"},"High",-1),d("option",{value:"Normal"},"Normal",-1),d("option",{value:"Low"},"Low",-1)])],544),[[nn,u.value.priority]])]),d("div",MS,[P[14]||(P[14]=d("label",{for:"category"},"Category:",-1)),Me(d("input",{id:"category","onUpdate:modelValue":P[5]||(P[5]=x=>u.value.category=x),type:"text",onInput:p,placeholder:"e.g., Safety, Logistics..."},null,544),[[rt,u.value.category]])])]),d("div",AS,[d("div",PS,[P[15]||(P[15]=d("label",{for:"displayOrder"},"Display order:",-1)),Me(d("input",{id:"displayOrder","onUpdate:modelValue":P[6]||(P[6]=x=>u.value.displayOrder=x),type:"number",onInput:p,min:"0"},null,544),[[rt,u.value.displayOrder,void 0,{number:!0}]]),P[16]||(P[16]=d("span",{class:"help-text"},"Lower numbers appear first",-1))]),d("div",$S,[d("label",DS,[Me(d("input",{type:"checkbox","onUpdate:modelValue":P[7]||(P[7]=x=>u.value.isPinned=x),onChange:p},null,544),[[Pi,u.value.isPinned]]),P[17]||(P[17]=d("span",null,"Pin to top",-1))]),P[18]||(P[18]=d("span",{class:"help-text"},"Pinned notes always appear at the top",-1))])])],512),[[Es,l.value==="details"]]),Me(d("div",OS,[Ae(oc,{modelValue:u.value.scopeConfigurations,"onUpdate:modelValue":P[8]||(P[8]=x=>u.value.scopeConfigurations=x),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this note?",onUserChanged:p},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Es,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Ae(Tr,{show:s.value,title:"Validation Error",message:r.value,onClose:P[9]||(P[9]=x=>s.value=!1)},null,8,["show","message"])],64))}},BS=He(NS,[["__scopeId","data-v-0ffed598"]]),FS={class:"tab-headers"},zS={class:"tab-content"},US={class:"form-group"},HS={for:"marshalId"},VS=["value"],ZS={class:"help-text"},qS={class:"form-group"},jS=["disabled"],WS={class:"form-group"},GS={class:"role-input-group"},KS={key:0,label:"Built-in Roles"},YS=["value"],JS={key:1,label:"Custom Roles"},XS=["value"],QS={class:"form-row"},eI={class:"form-group"},tI={class:"form-group"},nI={class:"form-group"},sI={class:"tab-content"},iI={class:"custom-footer"},oI={__name:"EditContactModal",props:{show:{type:Boolean,default:!1},contact:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const{terms:i}=Rt(),a=e,s=n,r=O(!1),l=O(""),u=O("details"),h=O(!1),p=O({role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}),m=de(()=>!!a.contact),v=de(()=>!!p.value.marshalId),g=de(()=>[...a.marshals].sort((T,I)=>cn(T.name,I.name)));Ye(()=>a.show,T=>{if(T){if(u.value=a.initialTab,a.contact){const I=[...a.availableRoles.builtInRoles||[],...a.availableRoles.customRoles||[]];h.value=a.contact.role&&!I.includes(a.contact.role),p.value={role:a.contact.role||"",name:a.contact.name||"",phone:a.contact.phone||"",email:a.contact.email||"",notes:a.contact.notes||"",marshalId:a.contact.marshalId||null,scopeConfigurations:a.contact.scopeConfigurations?JSON.parse(JSON.stringify(a.contact.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}}else h.value=!1,p.value={role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]};s("update:isDirty",!1)}});const w=T=>T?T.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase()).trim():"",E=()=>{s("update:isDirty",!0)},A=()=>{if(p.value.marshalId){const T=a.marshals.find(I=>I.id===p.value.marshalId);T&&(p.value.name=T.name,!p.value.phone&&T.phoneNumber&&(p.value.phone=T.phoneNumber),!p.value.email&&T.email&&(p.value.email=T.email))}E()},P=()=>{s("close")},x=()=>{if(!p.value.role||!p.value.role.trim()){$("Please select or enter a role");return}if(!p.value.name||!p.value.name.trim()){$("Please enter a contact name");return}u.value="visibility"},$=T=>{l.value=T,r.value=!0},b=()=>{if(!p.value.role||!p.value.role.trim()){$("Please select or enter a role");return}if(!p.value.name||!p.value.name.trim()){$("Please enter a contact name");return}if(!p.value.scopeConfigurations||p.value.scopeConfigurations.length===0){$("Please select at least one visibility scope");return}if(!p.value.scopeConfigurations.some(N=>!(N.itemType!==null&&(!N.ids||N.ids.length===0)))){$("Please configure at least one scope with valid selections");return}const I={role:p.value.role.trim(),name:p.value.name.trim(),phone:p.value.phone?.trim()||null,email:p.value.email?.trim()||null,notes:p.value.notes?.trim()||null,marshalId:p.value.marshalId||null,scopeConfigurations:p.value.scopeConfigurations};s("save",I)},S=()=>{s("delete",a.contact.contactId)};return(T,I)=>(y(),k(me,null,[Ae(Ot,{show:e.show,title:m.value?"Edit contact":"Create contact",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:P},{footer:Ke(()=>[d("div",iI,[m.value?(y(),k("button",{key:0,type:"button",onClick:S,class:"btn btn-danger"}," Delete ")):V("",!0),!m.value&&u.value==="details"?(y(),k("button",{key:1,type:"button",onClick:x,class:"btn btn-primary"}," Next ")):V("",!0),m.value||u.value==="visibility"?(y(),k("button",{key:2,type:"button",onClick:b,class:"btn btn-primary"},M(m.value?"Save changes":"Create"),1)):V("",!0)])]),default:Ke(()=>[d("div",FS,[d("button",{type:"button",class:Fe(["tab-header",{active:u.value==="details"}]),onClick:I[0]||(I[0]=N=>u.value="details")}," Details ",2),d("button",{type:"button",class:Fe(["tab-header",{active:u.value==="visibility"}]),onClick:I[1]||(I[1]=N=>u.value="visibility")}," Visibility ",2)]),d("form",{onSubmit:kt(b,["prevent"]),class:"contact-form"},[Me(d("div",zS,[d("div",US,[d("label",HS,"Link to "+M(W(i).person.toLowerCase())+":",1),Me(d("select",{id:"marshalId","onUpdate:modelValue":I[2]||(I[2]=N=>p.value.marshalId=N),onChange:A},[I[12]||(I[12]=d("option",{value:null},"-- Not linked --",-1)),(y(!0),k(me,null,Pe(g.value,N=>(y(),k("option",{key:N.id,value:N.id},M(N.name),9,VS))),128))],544),[[nn,p.value.marshalId]]),d("span",ZS,"Optionally link to an existing "+M(W(i).person.toLowerCase())+" in the system",1)]),d("div",qS,[I[13]||(I[13]=d("label",{for:"name"},"Name: *",-1)),Me(d("input",{id:"name","onUpdate:modelValue":I[3]||(I[3]=N=>p.value.name=N),type:"text",onInput:E,disabled:v.value,class:Fe({"input-disabled":v.value}),placeholder:"Contact name..."},null,42,jS),[[rt,p.value.name]])]),d("div",WS,[I[15]||(I[15]=d("label",{for:"role"},"Role: *",-1)),d("div",GS,[h.value?Me((y(),k("input",{key:1,id:"customRole","onUpdate:modelValue":I[5]||(I[5]=N=>p.value.role=N),type:"text",onInput:E,placeholder:"Enter custom role name..."},null,544)),[[rt,p.value.role]]):Me((y(),k("select",{key:0,id:"role","onUpdate:modelValue":I[4]||(I[4]=N=>p.value.role=N),onChange:E},[I[14]||(I[14]=d("option",{value:"",disabled:""},"Select a role...",-1)),e.availableRoles.builtInRoles?.length>0?(y(),k("optgroup",KS,[(y(!0),k(me,null,Pe(e.availableRoles.builtInRoles,N=>(y(),k("option",{key:N,value:N},M(w(N)),9,YS))),128))])):V("",!0),e.availableRoles.customRoles?.length>0?(y(),k("optgroup",JS,[(y(!0),k(me,null,Pe(e.availableRoles.customRoles,N=>(y(),k("option",{key:N,value:N},M(w(N)),9,XS))),128))])):V("",!0)],544)),[[nn,p.value.role]]),d("button",{type:"button",class:"toggle-custom-btn",onClick:I[6]||(I[6]=N=>h.value=!h.value)},M(h.value?"Use existing":"Custom"),1)])]),d("div",QS,[d("div",eI,[I[16]||(I[16]=d("label",{for:"phone"},"Phone:",-1)),Me(d("input",{id:"phone","onUpdate:modelValue":I[7]||(I[7]=N=>p.value.phone=N),type:"tel",onInput:E,placeholder:"Phone number..."},null,544),[[rt,p.value.phone]])]),d("div",tI,[I[17]||(I[17]=d("label",{for:"email"},"Email:",-1)),Me(d("input",{id:"email","onUpdate:modelValue":I[8]||(I[8]=N=>p.value.email=N),type:"email",onInput:E,placeholder:"Email address..."},null,544),[[rt,p.value.email]])])]),d("div",nI,[I[18]||(I[18]=d("label",{for:"notes"},"Notes / Instructions:",-1)),Me(d("textarea",{id:"notes","onUpdate:modelValue":I[9]||(I[9]=N=>p.value.notes=N),onInput:E,rows:"3",placeholder:"Additional notes or instructions for when to contact..."},null,544),[[rt,p.value.notes]])])],512),[[Es,u.value==="details"]]),Me(d("div",sI,[Ae(oc,{modelValue:p.value.scopeConfigurations,"onUpdate:modelValue":I[10]||(I[10]=N=>p.value.scopeConfigurations=N),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":m.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this contact?",onUserChanged:E},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Es,u.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Ae(Tr,{show:r.value,title:"Validation Error",message:l.value,onClose:I[11]||(I[11]=N=>r.value=!1)},null,8,["show","message"])],64))}},aI=He(oI,[["__scopeId","data-v-b686d5b9"]]),rI={key:0,class:"fullscreen-map-overlay"},lI={class:"fullscreen-map-header"},cI={class:"context-info"},uI={key:0},dI={class:"action-buttons"},hI=["disabled"],fI={class:"fullscreen-map-container"},pI=Object.assign({inheritAttrs:!1},{__name:"FullscreenMapOverlay",props:{show:{type:Boolean,required:!0},mode:{type:String,validator:e=>["place-checkpoint","move-checkpoint","draw-area","add-multiple"].includes(e)},contextTitle:{type:String,default:""},contextDescription:{type:String,default:""},canComplete:{type:Boolean,default:!1}},emits:["done","cancel","map-click","polygon-complete","polygon-drawing","location-click","area-click"],setup(e,{emit:n}){const i=e,a=n,s=()=>{a("done")},r=()=>{a("cancel")},l=u=>{u.key==="Escape"&&i.show&&r()};return Rn(()=>{document.addEventListener("keydown",l)}),zi(()=>{document.removeEventListener("keydown",l)}),(u,h)=>(y(),it(Fp,{to:"body"},[e.show?(y(),k("div",rI,[d("div",lI,[d("div",cI,[d("h3",null,M(e.contextTitle),1),e.contextDescription?(y(),k("p",uI,M(e.contextDescription),1)):V("",!0)]),d("div",dI,[d("button",{onClick:r,class:"btn btn-cancel"}," Cancel "),d("button",{onClick:s,class:"btn btn-done",disabled:!e.canComplete}," Done ",8,hI)])]),d("div",fI,[Ae(er,ih(u.$attrs,{onMapClick:h[0]||(h[0]=p=>u.$emit("map-click",p)),onPolygonComplete:h[1]||(h[1]=p=>u.$emit("polygon-complete",p)),onPolygonDrawing:h[2]||(h[2]=p=>u.$emit("polygon-drawing",p)),onLocationClick:h[3]||(h[3]=p=>u.$emit("location-click",p)),onAreaClick:h[4]||(h[4]=p=>u.$emit("area-click",p))}),null,16)])])):V("",!0)]))}}),mI=He(pI,[["__scopeId","data-v-b1a57a82"]]),vI={class:"form-group"},_I={class:"form-group"},gI={class:"form-group"},yI={key:0,class:"form-error"},bI={class:"form-row"},kI={class:"form-group",style:{flex:"1"}},wI={class:"form-group",style:{flex:"1"}},LI={class:"form-group",style:{flex:"0 0 auto"}},CI={class:"form-group"},xI={__name:"AddLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:()=>({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""})},isDirty:{type:Boolean,default:!1}},emits:["close","save","set-on-map","update:isDirty","update:location"],setup(e,{emit:n}){const{termsLower:i}=Rt(),a=e,s=n,r=O({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""});Ye(()=>a.location,p=>{p&&(r.value={...p})},{immediate:!0,deep:!0});const l=()=>{s("update:isDirty",!0),s("update:location",{...r.value})},u=()=>{if(!Qa(r.value.what3Words)&&r.value.what3Words){alert("Invalid What3Words format.");return}s("save",r.value)},h=()=>{s("close")};return(p,m)=>(y(),it(Ot,{show:e.show,title:`Add ${W(i).checkpoint}`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:h},{actions:Ke(()=>[d("button",{type:"button",onClick:h,class:"btn btn-secondary"}," Cancel "),d("button",{type:"button",onClick:u,class:"btn btn-primary"}," Add "+M(W(i).checkpoint),1)]),default:Ke(()=>[d("form",{onSubmit:kt(u,["prevent"])},[d("div",vI,[m[7]||(m[7]=d("label",null,"Name",-1)),Me(d("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>r.value.name=v),type:"text",required:"",class:"form-input",onInput:l},null,544),[[rt,r.value.name]])]),d("div",_I,[m[8]||(m[8]=d("label",null,"Description",-1)),Me(d("input",{"onUpdate:modelValue":m[1]||(m[1]=v=>r.value.description=v),type:"text",class:"form-input",onInput:l},null,544),[[rt,r.value.description]])]),d("div",gI,[m[9]||(m[9]=d("label",null,"What3Words (optional)",-1)),Me(d("input",{"onUpdate:modelValue":m[2]||(m[2]=v=>r.value.what3Words=v),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap",onInput:l},null,544),[[rt,r.value.what3Words]]),r.value.what3Words&&!W(Qa)(r.value.what3Words)?(y(),k("small",yI," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):V("",!0)]),d("div",bI,[d("div",kI,[m[10]||(m[10]=d("label",null,"Longitude",-1)),Me(d("input",{"onUpdate:modelValue":m[3]||(m[3]=v=>r.value.longitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[rt,r.value.longitude,void 0,{number:!0}]])]),d("div",wI,[m[11]||(m[11]=d("label",null,"Latitude",-1)),Me(d("input",{"onUpdate:modelValue":m[4]||(m[4]=v=>r.value.latitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[rt,r.value.latitude,void 0,{number:!0}]])]),d("div",LI,[m[12]||(m[12]=d("label",null,"",-1)),d("button",{type:"button",class:"icon-btn",title:"Set location on map",onClick:m[5]||(m[5]=v=>p.$emit("set-on-map"))},"  ")])]),d("div",CI,[d("label",null,"Required "+M(W(i).people),1),Me(d("input",{"onUpdate:modelValue":m[6]||(m[6]=v=>r.value.requiredMarshals=v),type:"number",min:"1",required:"",class:"form-input",onInput:l},null,544),[[rt,r.value.requiredMarshals,void 0,{number:!0}]])])],32)]),_:1},8,["show","title","is-dirty"]))}},EI=He(xI,[["__scopeId","data-v-dcbdc216"]]),TI={class:"admin-event-manage"},SI={class:"header"},II={class:"header-left"},MI={key:0},AI={class:"event-date"},PI={class:"header-actions"},$I={class:"container"},DI={class:"tabs-nav"},OI={class:"tab-content-wrapper"},RI={key:1,class:"tab-panel"},NI={key:2,class:"tab-panel"},BI={__name:"AdminEventManage",setup(e){const n=Ql(),i=Zo(),a=Xh(),{activeTab:s,switchTab:r}=Qh("details",["details","course","areas","checkpoints","marshals","notes","checklists","contacts"]),{showConfirmModal:l,confirmModalTitle:u,confirmModalMessage:h,showConfirm:p,handleConfirmModalConfirm:m,handleConfirmModalCancel:v}=Wb(),{tabLabels:g}=Rt(),w=de(()=>[{value:"details",label:"Event details",icon:"details"},{value:"course",label:"Course",icon:"course"},{value:"areas",label:g.value.areas,icon:"area"},{value:"checkpoints",label:g.value.checkpoints,icon:"checkpoint"},{value:"marshals",label:g.value.marshals,icon:"marshal"},{value:"notes",label:"Notes",icon:"notes"},{value:"checklists",label:g.value.checklists,icon:"checklist"},{value:"contacts",label:"Contacts",icon:"contacts"}]),E=O(null),A=O([]),P=O([]),x=O(null),$=O(!1),b=O(null),S=O(!1),T=O([]),I=O(!1),N=O(!1),te=O(!1),Z=O(null),ne=O(!1),ge=O(!1),xe=O(!1),ze=O(!1),pe=O(null),$e=O(null),Ce=O(null),Ee=O(!1),K=O(!1),G=O({id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),U=O(!1),re=O(!1),we=O({marshalName:"",locations:[],marshal:null}),De=O(null),Ue=O([]),qe=O(!1),Se=O(null),z=O({id:"",name:"",email:"",phoneNumber:"",notes:""}),q=O(!1),J=O([]),_e=O([]),je=O([]),D=O([]),B=O(!1),j=O(""),se=O(""),le=O({name:"",description:"",eventDate:"",timeZoneId:"UTC"}),ie=O(!1),ye=O(!1),be=O(""),ve=O(""),ce=O(0),Ie=O({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),fe=O([]),ke=O(null),Re=O(!1),Je=O(null),tt=O(!1),Ge=O(null),Lt=O(!1),ft=O(1),yt=O(!1),nt=O(null),xt=O({}),ut=O(null),mt=O(null),ae=O([]),X=O(null),oe=O(null),Ne=O([]),$t=O(null),an=O(!1),yn=O("details"),Qs=O(null),Ss=O([]),Nn=O(null),ei=O(!1),Vi=O("details"),Ko=O([]),Is=O({builtInRoles:[],customRoles:[]}),Bn=O(null),ti=O(!1),Zi=O("details"),Yo=O(null),dn=de(()=>Yo.value?.marshalId!=null),Be=()=>{i.push(`/event/${n.params.eventId}`)},Jo=de(()=>`${window.location.origin}/event/${n.params.eventId}`),qi=de(()=>{const R=[];return P.value.forEach(H=>{H.assignments&&R.push(...H.assignments)}),R}),Xo=de(()=>{if(!Se.value)return P.value;const R=Se.value.assignedLocationIds||[],H=je.value.map(Ve=>Ve.locationId),he=D.value;return P.value.filter(Ve=>!R.includes(Ve.id)&&!H.includes(Ve.id)||he.includes(Ve.id))}),Qo=de(()=>{let R=Ue.value;if(x.value){const H=x.value.assignments.map(Ve=>Ve.marshalName),he=J.value.map(Ve=>Ve.marshalName);R=Ue.value.filter(Ve=>!H.includes(Ve.name)&&!he.includes(Ve.name))}return R.slice().sort((H,he)=>H.name.localeCompare(he.name))}),ji=de(()=>nt.value==="place-checkpoint"||nt.value==="move-checkpoint"?ut.value!==null:nt.value==="draw-area"?ke.value?.polygon?.length>0||mt.value&&mt.value.length>=3:nt.value==="add-multiple"),ea=de(()=>{const R=[...P.value];return nt.value==="place-checkpoint"&&ut.value&&R.push({id:"temp-single",name:Ie.value.name||"New Checkpoint",latitude:ut.value.lat,longitude:ut.value.lng,requiredMarshals:Ie.value.requiredMarshals||1,assignments:[],isTemporary:!0}),nt.value==="move-checkpoint"&&ut.value&&x.value&&R.push({id:"temp-move",name:x.value.name+" (new position)",latitude:ut.value.lat,longitude:ut.value.lng,requiredMarshals:x.value.requiredMarshals,assignments:[],isTemporary:!0}),nt.value==="add-multiple"&&R.push(...ae.value),R}),fs=de(()=>{const R=[...fe.value];if(nt.value==="draw-area"&&ke.value?.polygon?.length>0){const H=R.findIndex(he=>he.id===ke.value.id);H>=0?R[H]={...ke.value}:R.push({...ke.value,id:ke.value.id||"temp-area"})}return R}),ta=()=>{i.push("/admin/dashboard")},Sr=()=>{i.push({name:"AdminProfile"})},Ir=()=>{S.value=!0},Et=(R=!0)=>{q.value=R},Mr=()=>{ie.value=!0},na=async R=>{try{R&&(le.value={...R});const H=E.value.eventDate,he=le.value.eventDate;if(H!==he){const Ve=A.value.filter(wt=>wt.startTime||wt.endTime);if(Ve.length>0){be.value=H,ve.value=he,ce.value=Ve.length,ye.value=!0;return}}await sa(!1,null)}catch(H){console.error("Failed to update event:",H),alert("Failed to update event. Please try again.")}},sa=async(R,H)=>{try{if(await a.updateEvent(n.params.eventId,{...le.value}),R&&H!==null){const he=Math.floor(Math.abs(H)/1e3),Ve=H<0,wt=Math.floor(he/3600),bn=Math.floor(he%3600/60),qn=he%60,_s=`${Ve?"-":""}${wt.toString().padStart(2,"0")}:${bn.toString().padStart(2,"0")}:${qn.toString().padStart(2,"0")}`;await a.bulkUpdateLocationTimes(n.params.eventId,_s)}await Ft(),ie.value=!1}catch(he){console.error("Failed to update event:",he),alert("Failed to update event. Please try again.")}},ni=async({shouldShift:R,timeDelta:H})=>{ye.value=!1,await sa(R,H)},Ar=()=>{ye.value=!1,Ft()},Ft=async()=>{try{await a.fetchEvent(n.params.eventId),E.value=a.currentEvent,E.value&&(le.value={name:E.value.name||"",description:E.value.description||"",eventDate:Xa(E.value.eventDate),timeZoneId:E.value.timeZoneId||"UTC",peopleTerm:E.value.peopleTerm||"Marshals",checkpointTerm:E.value.checkpointTerm||"Checkpoints",areaTerm:E.value.areaTerm||"Areas",checklistTerm:E.value.checklistTerm||"Checklists"},ie.value=!1,tf(E.value)),await a.fetchLocations(n.params.eventId),A.value=a.locations,await a.fetchEventStatus(n.params.eventId),P.value=a.eventStatus.locations,await Ds(),await ia(),await Wi(),await Gi(),await Ms(),await Fn()}catch(R){console.error("Failed to load event data:",R)}},ia=async()=>{try{const R=await ts.getByEvent(n.params.eventId);Ue.value=R.data}catch(R){console.error("Failed to load marshals:",R)}},Wi=async()=>{try{const R=await Vs.getByEvent(n.params.eventId);fe.value=R.data}catch(R){console.error("Failed to load areas:",R)}},Gi=async()=>{try{const[R,H]=await Promise.all([It.getByEvent(n.params.eventId),It.getReport(n.params.eventId)]);Ne.value=R.data,Qs.value=H.data}catch(R){console.error("Failed to load checklists:",R)}},Ms=async()=>{try{const R=await js.getByEvent(n.params.eventId);Ss.value=R.data}catch(R){console.error("Failed to load notes:",R)}},Fn=async()=>{try{const[R,H]=await Promise.all([xi.getByEvent(n.params.eventId),xi.getRoles(n.params.eventId)]);Ko.value=R.data,Is.value=H.data}catch(R){console.error("Failed to load contacts:",R)}},Ki=()=>{ke.value=null,q.value=!1,Re.value=!0},si=R=>{ke.value=R,Je.value=R.id,q.value=!1,Re.value=!0},As=async R=>{try{if(ke.value&&ke.value.id){if(await Vs.update(n.params.eventId,ke.value.id,R),R.checklistChanges&&R.checklistChanges.length>0)for(const H of R.checklistChanges)try{H.complete?await It.complete(n.params.eventId,H.itemId,{marshalId:H.marshalId,contextType:H.contextType,contextId:H.contextId}):await It.uncomplete(n.params.eventId,H.itemId,{marshalId:H.marshalId,contextType:H.contextType,contextId:H.contextId})}catch(he){console.error("Failed to update checklist item:",H,he)}}else await Vs.create({eventId:n.params.eventId,...R});await Wi(),await Ft(),vt()}catch(H){console.error("Failed to save area:",H),alert(H.response?.data?.message||"Failed to save area. Please try again.")}},lt=async R=>{p("Delete Area","Are you sure you want to delete this area? Checkpoints will be automatically reassigned.",async()=>{try{await Vs.delete(n.params.eventId,R),await Vs.recalculate(n.params.eventId),await Wi(),await Ft(),vt()}catch(H){console.error("Failed to delete area:",H),alert(H.response?.data?.message||"Failed to delete area. Please try again.")}})},vt=()=>{Re.value=!1,ke.value=null,Je.value=null,q.value=!1,tt.value=!1,Ge.value=null},ii=()=>{$t.value=null,yn.value="details",q.value=!1,an.value=!0},ps=(R,H="details")=>{$t.value=R,yn.value=H,q.value=!1,an.value=!0},ms=async R=>{try{if($t.value&&$t.value.itemId)await It.update(n.params.eventId,$t.value.itemId,R);else{const H=await It.create(n.params.eventId,R);H.data.count&&H.data.count>1&&(j.value="Checklist Items Created",se.value=`Successfully created ${H.data.count} checklist items.`,B.value=!0)}await Gi(),Xe()}catch(H){console.error("Failed to save checklist item:",H);const he=H.response?.data?.message||"Failed to save checklist item. Please try again.";alert(he)}},Yi=async R=>{p("Delete Checklist Item","Are you sure you want to delete this checklist item?",async()=>{try{await It.delete(n.params.eventId,R),await Gi(),Xe()}catch(H){console.error("Failed to delete checklist item:",H),alert(H.response?.data?.message||"Failed to delete checklist item. Please try again.")}})},Xe=()=>{an.value=!1,$t.value=null,q.value=!1},Ct=()=>{Nn.value=null,Vi.value="details",q.value=!1,ei.value=!0},Ji=R=>{Nn.value=R,Vi.value="details",q.value=!1,ei.value=!0},oi=async R=>{try{Nn.value&&Nn.value.noteId?await js.update(n.params.eventId,Nn.value.noteId,R):await js.create(n.params.eventId,R),await Ms(),Xi()}catch(H){console.error("Failed to save note:",H);const he=H.response?.data?.message||"Failed to save note. Please try again.";alert(he)}},en=async R=>{p("Delete Note","Are you sure you want to delete this note?",async()=>{try{await js.delete(n.params.eventId,R),await Ms(),Xi()}catch(H){console.error("Failed to delete note:",H),alert(H.response?.data?.message||"Failed to delete note. Please try again.")}})},Xi=()=>{ei.value=!1,Nn.value=null,q.value=!1},ai=()=>{Bn.value=null,Zi.value="details",q.value=!1,ti.value=!0},zn=R=>{Bn.value=R,Zi.value="details",q.value=!1,ti.value=!0},Tt=async R=>{try{Bn.value&&Bn.value.contactId?await xi.update(n.params.eventId,Bn.value.contactId,R):await xi.create(n.params.eventId,R),await Fn(),Hn()}catch(H){console.error("Failed to save contact:",H);const he=H.response?.data?.message||"Failed to save contact. Please try again.";alert(he)}},Un=async R=>{p("Delete Contact","Are you sure you want to delete this contact?",async()=>{try{await xi.delete(n.params.eventId,R),await Fn(),Hn()}catch(H){console.error("Failed to delete contact:",H),alert(H.response?.data?.message||"Failed to delete contact. Please try again.")}})},Hn=()=>{ti.value=!1,Bn.value=null,q.value=!1},Ps=R=>{if(Ge.value=R,Re.value=!1,b.value){const H=b.value.getMapCenter(),he=b.value.getMapZoom();H&&he!==null&&(X.value=H,oe.value=he)}yt.value=!0,nt.value="draw-area",tt.value=!0,xt.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},ri=R=>{Ge.value?ke.value={...ke.value||{},...Ge.value,polygon:R}:ke.value={...ke.value,polygon:R}},$s=R=>{mt.value=R},Qi=()=>{tt.value=!1,Ge.value&&(ke.value=Ge.value,Re.value=!0,Ge.value=null)},Ds=async()=>{try{const R=await cl.getAdmins(n.params.eventId);T.value=R.data}catch(R){console.error("Failed to load event admins:",R)}},li=async R=>{try{await cl.addAdmin(n.params.eventId,R),await Ds(),ci()}catch(H){console.error("Failed to add admin:",H),alert(H.response?.data?.message||"Failed to add administrator. Please try again.")}},eo=async R=>{p("Remove Administrator",`Remove ${R} as an administrator?`,async()=>{try{await cl.removeAdmin(n.params.eventId,R),await Ds()}catch(H){console.error("Failed to remove admin:",H),alert(H.response?.data?.message||"Failed to remove administrator. Please try again.")}})},ci=()=>{I.value=!1,q.value=!1},ui=async R=>{if(!R){Z.value="Please select a GPX file";return}te.value=!0,Z.value=null;try{await Hs.uploadGpx(n.params.eventId,R),await Ft(),to()}catch(H){console.error("Failed to upload route:",H),Z.value=H.response?.data?.message||"Failed to upload route. Please try again."}finally{te.value=!1}},to=()=>{N.value=!1,Z.value=null},no=async({file:R,deleteExisting:H})=>{if(!R){pe.value="Please select a CSV file";return}xe.value=!0,pe.value=null,$e.value=null;try{const he=await os.importCsv(n.params.eventId,R,H);$e.value=he.data,await Ft(),oa();const Ve=he.data;let wt=`<p>Created <strong>${Ve.locationsCreated}</strong> location(s) and <strong>${Ve.assignmentsCreated}</strong> assignment(s)</p>`;Ve.errors&&Ve.errors.length>0&&(wt+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',Ve.errors.forEach(bn=>{wt+=`<li>${bn}</li>`}),wt+="</ul>"),j.value="Import Complete",se.value=wt,B.value=!0}catch(he){console.error("Failed to import locations:",he),pe.value=he.response?.data?.message||"Failed to import locations. Please try again."}finally{xe.value=!1}},oa=()=>{ne.value=!1,pe.value=null,$e.value=null},Qe=async R=>{if($.value)Ie.value.latitude=R.lat,Ie.value.longitude=R.lng;else if(K.value)G.value.latitude=R.lat,G.value.longitude=R.lng,x.value&&(x.value={...x.value,latitude:R.lat,longitude:R.lng}),K.value=!1,Ee.value=!0,Et();else if(Lt.value)try{await a.createLocation({eventId:n.params.eventId,name:`Checkpoint ${ft.value}`,description:"",latitude:R.lat,longitude:R.lng,requiredMarshals:1,what3Words:""}),ft.value++,await Ft()}catch(H){console.error("Failed to create checkpoint:",H),alert("Failed to create checkpoint. Please try again.")}},hn=R=>{nt.value==="place-checkpoint"||nt.value==="move-checkpoint"?ut.value=R:nt.value==="add-multiple"&&Os(R)},pt=()=>{if(b.value){const R=b.value.getMapCenter(),H=b.value.getMapZoom();R&&H!==null&&(X.value=R,oe.value=H)}Ie.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},$.value=!0},aa=R=>{Ie.value={...R}},so=()=>{$.value=!1,ut.value=null,yt.value=!0,nt.value="place-checkpoint",xt.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},io=()=>{if(b.value){const R=b.value.getMapCenter(),H=b.value.getMapZoom();R&&H!==null&&(X.value=R,oe.value=H)}Ie.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},ut.value=null,yt.value=!0,nt.value="place-checkpoint",xt.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},oo=()=>{if(b.value){const R=b.value.getMapCenter(),H=b.value.getMapZoom();R&&H!==null&&(X.value=R,oe.value=H)}ke.value={id:null,name:"",description:"",color:"#667eea",polygon:[],checkpointIds:[],marshalIds:[],displayOrder:fe.value.length},yt.value=!0,nt.value="draw-area",tt.value=!0,xt.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},Vn=()=>{ne.value=!0},di=()=>{const R=P.value.map(H=>{const he=H.name.match(/^Checkpoint (\d+)$/);return he?parseInt(he[1]):0}).filter(H=>H>0);if(ft.value=R.length>0?Math.max(...R)+1:1,b.value){const H=b.value.getMapCenter(),he=b.value.getMapZoom();H&&he!==null&&(X.value=H,oe.value=he)}yt.value=!0,nt.value="add-multiple",Lt.value=!0,xt.value={title:"Add multiple checkpoints",description:`Click on map to add checkpoints. Next: Checkpoint ${ft.value}`}},Os=R=>{ae.value.push({id:`temp-${ft.value}`,name:`Checkpoint ${ft.value}`,description:"",latitude:R.lat,longitude:R.lng,requiredMarshals:1,what3Words:"",assignments:[],isTemporary:!0}),ft.value++,xt.value={...xt.value,description:`Click on map to add checkpoints. Next: Checkpoint ${ft.value}`}},Nt=()=>{if(nt.value==="place-checkpoint")ut.value&&(Ie.value.latitude=ut.value.lat,Ie.value.longitude=ut.value.lng,Et()),vs(),$.value=!0;else if(nt.value==="move-checkpoint")ut.value&&(G.value.latitude=ut.value.lat,G.value.longitude=ut.value.lng,x.value&&(x.value={...x.value,latitude:ut.value.lat,longitude:ut.value.lng}),Et()),vs(),Ee.value=!0;else if(nt.value==="draw-area"){if(mt.value&&mt.value.length>=3){const R=mt.value.map(H=>({lat:H.lat,lng:H.lng}));Ge.value?ke.value={...ke.value||{},...Ge.value,polygon:R}:ke.value={...ke.value||{},polygon:R}}tt.value=!1,vs(),Re.value=!0,Ge.value=null,mt.value=null}else nt.value==="add-multiple"&&Zn()},Zn=async()=>{const R=[...ae.value];try{for(const H of R)await a.createLocation({eventId:n.params.eventId,name:H.name,description:H.description,latitude:H.latitude,longitude:H.longitude,requiredMarshals:H.requiredMarshals,what3Words:H.what3Words});ae.value=[],Lt.value=!1,vs(),await Ft()}catch(H){console.error("Failed to create checkpoints:",H),alert("Failed to create checkpoints. Please try again.")}},ra=()=>{nt.value==="draw-area"?(Ge.value&&(ke.value=Ge.value,Re.value=!0,Ge.value=null),tt.value=!1,mt.value=null):nt.value==="add-multiple"&&(ae.value=[],Lt.value=!1),vs()},vs=()=>{yt.value=!1,nt.value=null,xt.value={},ut.value=null,X.value=null,oe.value=null,tt.value&&(tt.value=!1)},Pr=R=>{Rs(R)},Rs=R=>{x.value=R,G.value={id:R.id,name:R.name,description:R.description||"",latitude:R.latitude,longitude:R.longitude,requiredMarshals:R.requiredMarshals,what3Words:R.what3Words||""},J.value=[],_e.value=[],q.value=!1,Ee.value=!0,setTimeout(()=>{b.value?.scrollMapIntoView()},100)},ao=async R=>{if(!Qa(R.what3Words)){alert("Invalid What3Words format. Please use word.word.word or word/word/word (lowercase letters only, 1-20 characters each)");return}try{await a.createLocation({eventId:n.params.eventId,...R}),await Ft(),la()}catch(H){console.error("Failed to save location:",H),alert("Failed to save location. Please try again.")}},la=()=>{$.value=!1,Ie.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},q.value=!1,q.value=!1},hi=()=>{Ee.value=!1,x.value=null,K.value=!1,U.value=!1,G.value={id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},J.value=[],_e.value=[],q.value=!1},ot=()=>{U.value=!1},$r=()=>{if(Ee.value=!1,ut.value=null,b.value){const R=b.value.getMapCenter(),H=b.value.getMapZoom();R&&H!==null&&(X.value=R,oe.value=H)}yt.value=!0,nt.value="move-checkpoint",xt.value={title:`Move checkpoint: ${x.value?.name}`,description:"Click on the map to set the new location"}},rn=async R=>{if(!Qa(R.what3Words)){alert("Invalid What3Words format.");return}try{await os.update(n.params.eventId,x.value.id,{eventId:n.params.eventId,name:R.name,description:R.description,latitude:R.latitude,longitude:R.longitude,requiredMarshals:R.requiredMarshals,what3Words:R.what3Words||null,startTime:R.startTime,endTime:R.endTime});for(const H of _e.value)await a.deleteAssignment(n.params.eventId,H);for(const H of J.value)await a.createAssignment({eventId:n.params.eventId,locationId:x.value.id,marshalId:H.marshalId});if(R.checkInChanges&&R.checkInChanges.length>0)for(const H of R.checkInChanges){const he=x.value.assignments.find(Ve=>Ve.id===H.assignmentId);he&&he.isCheckedIn!==H.shouldBeCheckedIn&&await Ti.adminCheckIn(n.params.eventId,H.assignmentId)}if(R.checklistChanges&&R.checklistChanges.length>0)for(const H of R.checklistChanges)try{H.complete?await It.complete(n.params.eventId,H.itemId,{marshalId:H.marshalId,contextType:H.contextType,contextId:H.contextId}):await It.uncomplete(n.params.eventId,H.itemId,{marshalId:H.marshalId,contextType:H.contextType,contextId:H.contextId})}catch(he){console.error("Failed to update checklist item:",H,he)}await Ft(),hi()}catch(H){console.error("Failed to update location:",H),alert("Failed to update location. Please try again.")}},Ns=async R=>{p("Delete Location","Are you sure you want to delete this location?",async()=>{try{await os.delete(n.params.eventId,R),await Ft(),hi()}catch(H){console.error("Failed to delete location:",H),alert("Failed to delete location. Please try again.")}})},ca=R=>{if(R.toString().startsWith("temp-")){const H=x.value.assignments.find(he=>he.id===R);H&&(J.value=J.value.filter(he=>he.marshalId!==H.marshalId)),x.value.assignments=x.value.assignments.filter(he=>he.id!==R),Et()}else _e.value.includes(R)||(_e.value.push(R),x.value.assignments=x.value.assignments.filter(H=>H.id!==R),Et())},Dr=async R=>{const H=Ue.value.find(Ve=>Ve.id===R);if(!H)return;const he=P.value.filter(Ve=>Ve.assignments?.some(wt=>wt.marshalId===R&&Ve.id!==x.value.id));if(he.length>0){we.value={marshalName:H.name,locations:he.map(wt=>wt.name),marshal:H};const Ve=await new Promise(wt=>{De.value=wt,re.value=!0});if(Ve==="cancel"||Ve==="choose-other")return;if(Ve==="move")for(const wt of he){const bn=wt.assignments.find(qn=>qn.marshalId===R);if(bn){_e.value.push(bn.id);const qn=P.value.findIndex(_s=>_s.id===wt.id);qn!==-1&&(P.value[qn].assignments=P.value[qn].assignments.filter(_s=>_s.id!==bn.id))}}}J.value.push({marshalId:H.id,marshalName:H.name}),x.value.assignments||(x.value.assignments=[]),x.value.assignments.push({id:`temp-${Date.now()}`,marshalId:H.id,marshalName:H.name,locationId:x.value.id,isCheckedIn:!1,isPending:!0}),Et(),ot()},ro=async R=>{try{const he=(await ts.create({eventId:n.params.eventId,name:R.name,email:R.email,phoneNumber:R.phoneNumber})).data;await ia(),J.value.push({marshalId:he.id,marshalName:he.name}),Et(),ot()}catch(H){console.error("Failed to create marshal:",H),alert("Failed to create marshal. Please try again.")}},Or=()=>{Se.value=null,z.value={id:"",name:"",email:"",phoneNumber:"",notes:""},je.value=[],D.value=[],q.value=!1,qe.value=!0},ua=R=>{Se.value=R,z.value={id:R.id,name:R.name,email:R.email||"",phoneNumber:R.phoneNumber||"",notes:R.notes||""},je.value=[],D.value=[],q.value=!1,qe.value=!0},da=()=>{if(!Se.value)return[];const R=[];return P.value.forEach(H=>{H.assignments.filter(Ve=>Ve.marshalName===Se.value.name).forEach(Ve=>{R.push({...Ve,locationName:H.name})})}),R},Rr=async R=>{try{Se.value?await ts.update(n.params.eventId,Se.value.id,{name:R.name,email:R.email,phoneNumber:R.phoneNumber,notes:R.notes}):await ts.create({eventId:n.params.eventId,name:R.name,email:R.email,phoneNumber:R.phoneNumber,notes:R.notes});for(const H of D.value)await a.deleteAssignment(n.params.eventId,H);for(const H of je.value)await a.createAssignment({eventId:n.params.eventId,locationId:H.locationId,marshalId:Se.value.id});if(R.checkInChanges&&R.checkInChanges.length>0){const H=da();for(const he of R.checkInChanges){const Ve=H.find(wt=>wt.id===he.assignmentId);Ve&&Ve.isCheckedIn!==he.shouldBeCheckedIn&&await Ti.adminCheckIn(n.params.eventId,he.assignmentId)}}if(R.checklistChanges&&R.checklistChanges.length>0)for(const H of R.checklistChanges)try{const he={marshalId:Se.value.id};H.contextType&&H.contextId&&(he.contextType=H.contextType,he.contextId=H.contextId),H.complete?await It.complete(n.params.eventId,H.itemId,he):await It.uncomplete(n.params.eventId,H.itemId,he)}catch(he){console.error("Failed to process checklist change:",he);const Ve=he.response?.data?.message||"Failed to update checklist item";alert(`Error: ${Ve}`)}await Ft(),pi()}catch(H){console.error("Failed to save marshal:",H),alert("Failed to save marshal. Please try again.")}},fi=async R=>{p("Delete Marshal","Are you sure you want to delete this marshal?",async()=>{try{await ts.delete(n.params.eventId,R),await Ft(),pi()}catch(H){console.error("Failed to delete marshal:",H),alert("Failed to delete marshal. Please try again.")}})},Nr=R=>{fi(R.id)},fn=R=>{D.value.includes(R)||(D.value.push(R),Et())},Br=R=>{je.value.push({locationId:R}),Et()},pi=()=>{qe.value=!1,Se.value=null,z.value={id:"",name:"",email:"",phoneNumber:"",notes:""},je.value=[],D.value=[],q.value=!1},Tn=async({file:R})=>{if(!R){pe.value="Please select a CSV file";return}ze.value=!0,pe.value=null,Ce.value=null;try{const H=await ts.importCsv(n.params.eventId,R);Ce.value=H.data,await Ft(),lo();const he=H.data;let Ve=`<p>Created <strong>${he.marshalsCreated}</strong> marshal(s) and <strong>${he.assignmentsCreated}</strong> assignment(s)</p>`;he.errors&&he.errors.length>0&&(Ve+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',he.errors.forEach(wt=>{Ve+=`<li>${wt}</li>`}),Ve+="</ul>"),j.value="Import Complete",se.value=Ve,B.value=!0}catch(H){console.error("Failed to import marshals:",H),pe.value=H.response?.data?.message||"Failed to import marshals. Please try again."}finally{ze.value=!1}},lo=()=>{ge.value=!1,pe.value=null,Ce.value=null},ha=R=>{De.value&&(De.value(R),De.value=null),re.value=!1},co=async({assignment:R,status:H})=>{try{if(H==="not-checked-in"?R.isCheckedIn&&await Ti.adminCheckIn(n.params.eventId,R.id):R.isCheckedIn||await Ti.adminCheckIn(n.params.eventId,R.id),await Ft(),x.value){const he=P.value.find(Ve=>Ve.id===x.value.id);he&&(x.value=he)}}catch(he){console.error("Failed to change assignment status:",he),alert("Failed to change status. Please try again.")}};return Rn(async()=>{await Ft();try{const R=await as.getMe(n.params.eventId);Yo.value=R.data}catch(R){console.warn("Failed to fetch user claims:",R)}}),(R,H)=>(y(),k("div",TI,[d("header",SI,[d("div",II,[d("button",{onClick:ta,class:"btn-back"}," Back"),E.value?(y(),k("div",MI,[d("h1",null,M(E.value.name),1),d("p",AI,M(W(Gb)(E.value.eventDate)),1)])):V("",!0)]),d("div",PI,[dn.value?(y(),k("button",{key:0,onClick:Be,class:"btn btn-marshal-mode"}," Switch to Marshal ")):V("",!0),d("button",{onClick:Sr,class:"btn btn-secondary"},"Profile"),d("button",{onClick:H[0]||(H[0]=he=>N.value=!0),class:"btn btn-secondary"},"Upload route"),d("button",{onClick:Ir,class:"btn btn-primary"},"Share marshal link")])]),d("div",$I,[d("div",DI,[Ae(zC,{tabs:w.value,"model-value":W(s),"onUpdate:modelValue":W(r)},null,8,["tabs","model-value","onUpdate:modelValue"])]),d("div",OI,[W(s)==="course"?(y(),it(bk,{key:0,ref_key:"courseAreasTab",ref:b,checkpoints:P.value,areas:fe.value,route:E.value?.route||[],selectedAreaId:Je.value,drawingMode:tt.value,onMapClick:Qe,onLocationClick:Pr,onAreaClick:si,onAddCheckpoint:pt,onAddMultipleCheckpoints:di,onImportCheckpoints:H[1]||(H[1]=he=>ne.value=!0),onSelectLocation:Rs,onAddArea:Ki,onSelectArea:si,onPolygonComplete:ri,onCancelDrawing:Qi,onAddCheckpointFromMap:io,onAddManyCheckpointsFromMap:di,onAddAreaFromMap:oo},null,8,["checkpoints","areas","route","selectedAreaId","drawingMode"])):V("",!0),W(s)==="checkpoints"?(y(),k("div",RI,[Ae(mC,{locations:P.value,areas:fe.value,onOpenAddMenu:Vn,onSelectLocation:Rs},null,8,["locations","areas"])])):V("",!0),W(s)==="areas"?(y(),k("div",NI,[Ae(SC,{areas:fe.value,checkpoints:P.value,onAddArea:Ki,onSelectArea:si},null,8,["areas","checkpoints"])])):V("",!0),W(s)==="marshals"?(y(),it(Vk,{key:3,marshals:Ue.value,assignments:qi.value,locations:P.value,onAddMarshal:Or,onImportMarshals:H[2]||(H[2]=he=>ge.value=!0),onSelectMarshal:ua,onDeleteMarshal:Nr,onChangeAssignmentStatus:co},null,8,["marshals","assignments","locations"])):V("",!0),W(s)==="checklists"?(y(),it(ww,{key:4,"checklist-items":Ne.value,areas:fe.value,locations:P.value,marshals:Ue.value,"completion-report":Qs.value,onAddChecklistItem:ii,onSelectChecklistItem:ps},null,8,["checklist-items","areas","locations","marshals","completion-report"])):V("",!0),W(s)==="notes"?(y(),it(Gw,{key:5,notes:Ss.value,areas:fe.value,locations:P.value,marshals:Ue.value,onAddNote:Ct,onSelectNote:Ji},null,8,["notes","areas","locations","marshals"])):V("",!0),W(s)==="contacts"?(y(),it(gL,{key:6,contacts:Ko.value,areas:fe.value,locations:P.value,marshals:Ue.value,"available-roles":Is.value,onAddContact:ai,onSelectContact:zn},null,8,["contacts","areas","locations","marshals","available-roles"])):V("",!0),W(s)==="details"?(y(),it(nC,{key:7,"event-data":le.value,admins:T.value,"form-dirty":ie.value,onSubmit:na,onAddAdmin:H[3]||(H[3]=he=>I.value=!0),onRemoveAdmin:eo,"onUpdate:formDirty":Mr},null,8,["event-data","admins","form-dirty"])):V("",!0)])]),Ae(EI,{show:$.value,location:Ie.value,isDirty:q.value,onClose:la,onSave:ao,onSetOnMap:so,"onUpdate:isDirty":Et,"onUpdate:location":aa},null,8,["show","location","isDirty"]),Ae(ex,{show:Ee.value,location:x.value,assignments:x.value?.assignments||[],"event-date":E.value?.eventDate||"",areas:fe.value,"event-id":W(n).params.eventId,"all-locations":P.value,notes:Ss.value,isDirty:q.value,onClose:hi,onSave:rn,onDelete:Ns,onMoveLocation:$r,onRemoveAssignment:ca,onAssignMarshal:H[4]||(H[4]=he=>U.value=!0),"onUpdate:isDirty":Et},null,8,["show","location","assignments","event-date","areas","event-id","all-locations","notes","isDirty"]),Ae(ZC,{show:S.value,link:Jo.value,isDirty:!1,onClose:H[5]||(H[5]=he=>S.value=!1)},null,8,["show","link"]),Ae(WC,{show:I.value,isDirty:q.value,onClose:ci,onSubmit:li,"onUpdate:isDirty":Et},null,8,["show","isDirty"]),Ae(XC,{show:N.value,uploading:te.value,error:Z.value,isDirty:q.value,onClose:to,onSubmit:ui,"onUpdate:isDirty":Et},null,8,["show","uploading","error","isDirty"]),Ae(l1,{show:ne.value,importing:xe.value,error:pe.value,result:$e.value,isDirty:q.value,onClose:oa,onSubmit:no,"onUpdate:isDirty":Et},null,8,["show","importing","error","result","isDirty"]),Ae(cE,{show:qe.value,marshal:Se.value,"event-id":W(n).params.eventId,assignments:da(),availableLocations:Xo.value,allLocations:P.value,areas:fe.value,isEditing:!!Se.value,eventNotes:Ss.value,isDirty:q.value,onClose:pi,onSave:Rr,onDelete:fi,onRemoveAssignment:fn,onAssignToLocation:Br,"onUpdate:isDirty":Et},null,8,["show","marshal","event-id","assignments","availableLocations","allLocations","areas","isEditing","eventNotes","isDirty"]),Ae(v1,{show:ge.value,importing:ze.value,error:pe.value,result:Ce.value,isDirty:q.value,onClose:lo,onSubmit:Tn,"onUpdate:isDirty":Et},null,8,["show","importing","error","result","isDirty"]),Ae(fE,{show:re.value,conflictData:we.value,onClose:H[6]||(H[6]=he=>re.value=!1),onChoice:ha},null,8,["show","conflictData"]),Ae(LE,{show:U.value,locationName:x.value?.name||"",marshals:Qo.value,onClose:ot,onAssignExisting:Dr,onCreateAndAssign:ro},null,8,["show","locationName","marshals"]),Ae(OE,{show:ye.value,"old-event-date":be.value,"new-event-date":ve.value,"affected-checkpoints-count":ce.value,onConfirm:ni,onCancel:Ar},null,8,["show","old-event-date","new-event-date","affected-checkpoints-count"]),Ae(MT,{show:Re.value,area:ke.value,checkpoints:P.value,marshals:Ue.value,areas:fe.value,isDirty:q.value,"event-id":W(n).params.eventId,"all-locations":P.value,assignments:qi.value,notes:Ss.value,onClose:vt,onSave:As,onDelete:lt,onDrawBoundary:Ps,"onUpdate:isDirty":Et,onSelectCheckpoint:Rs},null,8,["show","area","checkpoints","marshals","areas","isDirty","event-id","all-locations","assignments","notes"]),Ae(LS,{show:an.value,"checklist-item":$t.value,"initial-tab":yn.value,areas:fe.value,locations:P.value,marshals:Ue.value,isDirty:q.value,onClose:Xe,onSave:ms,onDelete:Yi,"onUpdate:isDirty":Et},null,8,["show","checklist-item","initial-tab","areas","locations","marshals","isDirty"]),Ae(BS,{show:ei.value,note:Nn.value,"initial-tab":Vi.value,areas:fe.value,locations:P.value,marshals:Ue.value,isDirty:q.value,onClose:Xi,onSave:oi,onDelete:en,"onUpdate:isDirty":Et},null,8,["show","note","initial-tab","areas","locations","marshals","isDirty"]),Ae(aI,{show:ti.value,contact:Bn.value,"initial-tab":Zi.value,areas:fe.value,locations:P.value,marshals:Ue.value,"available-roles":Is.value,isDirty:q.value,onClose:Hn,onSave:Tt,onDelete:Un,"onUpdate:isDirty":Et},null,8,["show","contact","initial-tab","areas","locations","marshals","available-roles","isDirty"]),Ae(mI,{show:yt.value,mode:nt.value,"context-title":xt.value.title,"context-description":xt.value.description,"can-complete":ji.value,clickable:nt.value!=="draw-area","drawing-mode":nt.value==="draw-area"&&tt.value,locations:ea.value,areas:fs.value,route:E.value?.route||[],"selected-area-id":Je.value,center:X.value,zoom:oe.value,onMapClick:hn,onPolygonComplete:ri,onPolygonDrawing:$s,onDone:Nt,onCancel:ra},null,8,["show","mode","context-title","context-description","can-complete","clickable","drawing-mode","locations","areas","route","selected-area-id","center","zoom"]),Ae(Tr,{show:B.value,title:j.value,message:se.value,onClose:H[7]||(H[7]=he=>B.value=!1)},null,8,["show","title","message"]),Ae(xr,{show:W(l),title:W(u),message:W(h),onConfirm:W(m),onCancel:W(v)},null,8,["show","title","message","onConfirm","onCancel"])]))}},FI=He(BI,[["__scopeId","data-v-6bab6aba"]]),zI={key:0,class:"emergency-contacts-list"},UI={class:"contact-details"},HI={class:"info-section"},VI=["href"],ZI={key:0,class:"info-section"},qI=["href"],jI={key:1,class:"no-contacts"},WI={__name:"EmergencyContactModal",props:{show:{type:Boolean,default:!1},contacts:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n}){const i=n,a=()=>{i("close")};return(s,r)=>(y(),it(Ot,{show:e.show,title:"Emergency Contact Information",size:"medium",onClose:a},{actions:Ke(()=>[d("button",{onClick:a,class:"btn btn-secondary"},"Close")]),default:Ke(()=>[e.contacts&&e.contacts.length>0?(y(),k("div",zI,[(y(!0),k(me,null,Pe(e.contacts,(l,u)=>(y(),k("div",{key:u,class:"emergency-contact-item"},[d("h3",null,M(l.name),1),d("div",UI,[d("div",HI,[r[0]||(r[0]=d("label",null,"Phone Number",-1)),d("a",{href:`tel:${l.phone}`,class:"phone-link"},M(l.phone),9,VI)]),l.details?(y(),k("div",ZI,[r[1]||(r[1]=d("label",null,"Details",-1)),d("p",null,M(l.details),1)])):V("",!0)]),d("a",{href:`tel:${l.phone}`,class:"btn btn-danger btn-full"}," Call "+M(l.name),9,qI)]))),128))])):(y(),k("div",jI,[...r[2]||(r[2]=[d("p",null,"No emergency contacts have been set up for this event.",-1)])]))]),_:1},8,["show"]))}},GI=He(WI,[["__scopeId","data-v-b8cbbb40"]]),KI={key:0,class:"area-lead-section"},YI={class:"marshals-section"},JI={key:0,class:"loading"},XI={key:1,class:"empty-state"},QI={key:2,class:"marshals-list"},eM={class:"marshal-header"},tM={class:"marshal-name"},nM={class:"marshal-checkpoint"},sM={key:0,class:"checkpoint-desc"},iM={class:"marshal-contact"},oM={key:0,class:"contact-item"},aM=["href"],rM={key:1,class:"contact-item"},lM=["href"],cM={key:0,class:"check-in-info"},uM={key:0},dM={class:"checklist-section"},hM={key:0,class:"loading"},fM={key:1,class:"empty-state"},pM={key:2,class:"checklist-items"},mM={class:"item-checkbox"},vM=["checked","disabled","onChange"],_M={class:"item-content"},gM={class:"item-text"},yM={key:0,class:"item-owner"},bM={key:1,class:"completion-info"},kM={class:"completion-text"},wM={class:"completion-time"},LM={__name:"AreaLeadSection",props:{eventId:{type:String,required:!0},areaIds:{type:Array,default:()=>[]},marshalId:{type:String,required:!0}},emits:["checklist-updated"],setup(e,{emit:n}){const i=e,a=n,s=O([]),r=O([]),l=O([]),u=O([]),h=O({}),p=O(!1),m=O({}),v=O(!1),g=de(()=>s.value.filter(b=>i.areaIds.includes(b.id))),w=b=>{const S=u.value.filter(N=>N.areaIds&&N.areaIds.includes(b)),T=S.map(N=>N.id);return l.value.filter(N=>T.includes(N.locationId)).map(N=>{const te=r.value.find(ne=>ne.id===N.marshalId),Z=S.find(ne=>ne.id===N.locationId);return{marshalId:N.marshalId,name:te?.name||N.marshalName||"Unknown",email:te?.email||null,phone:te?.phoneNumber||null,isCheckedIn:N.isCheckedIn,checkInTime:N.checkInTime,checkInMethod:N.checkInMethod,checkpointName:Z?.name||"Unknown",checkpointDescription:Z?.description||null}})},E=async()=>{if(!(!i.eventId||i.areaIds.length===0)){p.value=!0;try{const b=await Vs.getByEvent(i.eventId);s.value=b.data||[];const S=await os.getByEvent(i.eventId);u.value=S.data||[];const T=await Ei.getByEvent(i.eventId);l.value=T.data||[];const I=await ts.getByEvent(i.eventId);r.value=I.data||[],await A()}catch(b){console.error("Failed to load area data:",b)}finally{p.value=!1}}},A=async()=>{for(const b of i.areaIds){m.value[b]=!0;try{const S=await It.getAreaChecklist(i.eventId,b);h.value[b]=S.data||[]}catch(S){console.error(`Failed to load checklist for area ${b}:`,S),h.value[b]=[]}finally{m.value[b]=!1}}},P=async(b,S)=>{if(!v.value){v.value=!0;try{S.isCompleted?await It.uncomplete(i.eventId,S.itemId,{marshalId:i.marshalId,contextType:S.completionContextType,contextId:S.completionContextId}):await It.complete(i.eventId,S.itemId,{marshalId:i.marshalId,contextType:S.completionContextType,contextId:S.completionContextId}),m.value[b]=!0;const T=await It.getAreaChecklist(i.eventId,b);h.value[b]=T.data||[],m.value[b]=!1,a("checklist-updated")}catch(T){console.error("Failed to toggle checklist item:",T)}finally{v.value=!1}}},x=b=>b?new Date(b).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",$=b=>b?new Date(b).toLocaleString():"";return Ye(()=>[i.eventId,i.areaIds],()=>{E()},{immediate:!0}),Rn(()=>{E()}),(b,S)=>g.value.length>0?(y(),k("div",KI,[(y(!0),k(me,null,Pe(g.value,T=>(y(),k("div",{key:T.id,class:"area-card"},[d("div",{class:"area-header",style:Gt({borderLeftColor:T.color||"#667eea"})},[d("h3",null,M(T.name),1),S[0]||(S[0]=d("span",{class:"area-lead-badge"},"Area Lead",-1))],4),d("div",YI,[d("h4",null,"Marshals in Your Area ("+M(w(T.id).length)+")",1),p.value?(y(),k("div",JI,"Loading marshals...")):w(T.id).length===0?(y(),k("div",XI," No marshals assigned to checkpoints in this area. ")):(y(),k("div",QI,[(y(!0),k(me,null,Pe(w(T.id),I=>(y(),k("div",{key:I.marshalId,class:Fe(["marshal-card",{"is-checked-in":I.isCheckedIn}])},[d("div",eM,[d("div",tM,M(I.name),1),d("div",{class:Fe(["check-status",{"checked-in":I.isCheckedIn}])},M(I.isCheckedIn?" Checked In":"Not Checked In"),3)]),d("div",nM,[Oe(M(I.checkpointName)+" ",1),I.checkpointDescription?(y(),k("span",sM," - "+M(I.checkpointDescription),1)):V("",!0)]),d("div",iM,[I.email?(y(),k("div",oM,[S[1]||(S[1]=d("span",{class:"contact-label"},"Email:",-1)),d("a",{href:`mailto:${I.email}`},M(I.email),9,aM)])):V("",!0),I.phone?(y(),k("div",rM,[S[2]||(S[2]=d("span",{class:"contact-label"},"Phone:",-1)),d("a",{href:`tel:${I.phone}`},M(I.phone),9,lM)])):V("",!0)]),I.isCheckedIn&&I.checkInTime?(y(),k("div",cM,[Oe(" Checked in at "+M(x(I.checkInTime))+" ",1),I.checkInMethod?(y(),k("span",uM," ("+M(I.checkInMethod)+")",1)):V("",!0)])):V("",!0)],2))),128))]))]),d("div",dM,[S[3]||(S[3]=d("h4",null,"Area Checklist",-1)),m.value[T.id]?(y(),k("div",hM,"Loading checklist...")):!h.value[T.id]||h.value[T.id].length===0?(y(),k("div",fM," No checklist items for this area. ")):(y(),k("div",pM,[(y(!0),k(me,null,Pe(h.value[T.id],I=>(y(),k("div",{key:`${T.id}-${I.itemId}-${I.completionContextId}`,class:Fe(["checklist-item",{"item-completed":I.isCompleted}])},[d("div",mM,[d("input",{type:"checkbox",checked:I.isCompleted,disabled:!I.canBeCompletedByMe||v.value,onChange:N=>P(T.id,I)},null,40,vM)]),d("div",_M,[d("div",gM,M(I.text),1),I.contextOwnerName?(y(),k("div",yM," For: "+M(I.contextOwnerName),1)):V("",!0),I.isCompleted?(y(),k("div",bM,[d("span",kM," Completed by "+M(I.completedByActorName||"Unknown"),1),d("span",wM,M($(I.completedAt)),1)])):V("",!0)])],2))),128))]))])]))),128))])):V("",!0)}},CM=He(LM,[["__scopeId","data-v-a7714a9d"]]),xM={class:"marshal-view"},EM={class:"header"},TM={key:0},SM={class:"header-actions"},IM={class:"container"},MM={key:0,class:"selection-card"},AM={key:1,class:"selection-card"},PM={key:0,class:"loading"},$M={key:2,class:"selection-card error-card"},DM={class:"error"},OM={key:3,class:"dashboard"},RM={class:"welcome-bar"},NM={class:"welcome-info"},BM={class:"welcome-name"},FM={key:0,class:"welcome-email"},zM={key:0,class:"mode-switch"},UM={key:1,class:"mode-switch"},HM={class:"accordion"},VM={key:0,class:"accordion-section"},ZM={class:"accordion-title"},qM=["innerHTML"],jM={class:"accordion-icon"},WM={key:0,class:"accordion-content"},GM={class:"event-details"},KM={key:0,class:"event-detail-row"},YM={class:"detail-value"},JM={key:1,class:"event-description"},XM={class:"detail-value"},QM={class:"accordion-section"},eA={class:"accordion-title"},tA=["innerHTML"],nA={class:"accordion-icon"},sA={key:0,class:"accordion-content assignments-accordion-content"},iA={key:0,class:"empty-state"},oA={key:1,class:"checkpoint-accordion"},aA=["onClick"],rA={class:"checkpoint-header-content"},lA={class:"checkpoint-title-row"},cA={key:0,class:"checkpoint-check-icon"},uA={class:"checkpoint-name"},dA={key:1,class:"area-badge"},hA={key:2,class:"checkpoint-time-badge"},fA={key:0,class:"checkpoint-description-preview"},pA={class:"accordion-icon"},mA={key:0,class:"checkpoint-accordion-content"},vA={key:0,class:"checkpoint-mini-map"},_A={class:"checkpoint-marshals"},gA={class:"marshals-label"},yA={class:"marshals-list"},bA={key:0,class:"check-badge"},kA={key:1,class:"checkpoint-area-contacts"},wA={class:"marshals-label"},LA={class:"contact-list"},CA={class:"contact-info"},xA={class:"contact-name"},EA={key:0,class:"contact-role"},TA={key:1,class:"contact-detail"},SA={key:2,class:"contact-detail"},IA={class:"contact-actions"},MA=["href"],AA=["href"],PA=["href"],$A={key:2,class:"checked-in-status"},DA={class:"check-time"},OA={key:3,class:"check-in-actions"},RA=["onClick","disabled"],NA=["onClick","disabled"],BA={key:4,class:"error"},FA={class:"accordion-section"},zA={class:"accordion-title"},UA=["innerHTML"],HA={class:"accordion-icon"},VA={key:0,class:"accordion-content"},ZA={key:0,class:"loading"},qA={key:1,class:"error"},jA={key:2,class:"empty-state"},WA={key:3,class:"checklist-items"},GA={class:"item-checkbox"},KA=["checked","disabled","onChange"],YA={class:"item-content"},JA={class:"item-text"},XA={key:0,class:"item-context"},QA={key:1,class:"completion-info"},eP={class:"completion-text"},tP={class:"completion-time"},nP={key:1,class:"accordion-section"},sP={class:"accordion-title"},iP=["innerHTML"],oP={class:"accordion-icon"},aP={key:0,class:"accordion-content"},rP={key:0,class:"loading"},lP={key:1,class:"contact-list"},cP={class:"contact-info"},uP={class:"contact-name-row"},dP={key:0,class:"primary-badge"},hP={class:"contact-name"},fP={key:1,class:"contact-role-badge"},pP={key:0,class:"contact-notes-text"},mP={key:1,class:"contact-detail"},vP={key:2,class:"contact-detail"},_P={class:"contact-actions"},gP=["href"],yP=["href"],bP=["href"],kP={class:"accordion-section"},wP={class:"accordion-title"},LP=["innerHTML"],CP={class:"accordion-icon"},xP={key:0,class:"accordion-content"},EP={class:"accordion-section"},TP={class:"accordion-title"},SP=["innerHTML"],IP={key:0,class:"location-status active"},MP={key:1,class:"location-status"},AP={class:"accordion-icon"},PP={key:0,class:"accordion-content map-content"},$P={__name:"MarshalView",setup(e){const{terms:n,termsLower:i}=Rt(),a=Ql(),s=Zo(),r=O(!1),l=O(!1),u=O(null),h=O(null),p=O(null),m=O(null),v=de(()=>m.value?.eventRoles?m.value.eventRoles.filter(X=>X.role==="EventAreaLead").flatMap(X=>X.areaIds||[]):[]),g=de(()=>v.value.length>0),w=de(()=>m.value?.eventRoles?m.value.eventRoles.some(ae=>ae.role==="EventAdmin"):!1),E=de(()=>m.value?.authMethod==="SecureEmailLink"&&w.value),A=de(()=>m.value?.authMethod==="MarshalMagicCode"&&w.value),P=()=>{s.push(`/admin/events/${a.params.eventId}`)},x=O(null),$=O([]),b=O([]),S=O([]),T=O(!0),I=O("assignments"),N=O(null),te=O(null),Z=O(null),ne=O([]),ge=O(!1),xe=O(null),ze=O(!1),pe=O([]),$e=O(!1),Ce=O(!1),Ee=O(""),K=O(""),G=O(null),U=O(null);let re=null;const we=ae=>{I.value=I.value===ae?null:ae},De=O(null),Ue=ae=>{De.value=De.value===ae?null:ae},qe=de(()=>b.value.map(ae=>{const X=$.value.find(yn=>yn.id===ae.locationId),oe=X?.areaIds||X?.AreaIds||[];let Ne=null;oe.length>0&&S.value.length>0&&(Ne=S.value.find(Qs=>oe.includes(Qs.id))?.name);const $t=X?.assignments||[],an=j.value.filter(yn=>oe.includes(yn.areaId));return{...ae,location:X,areaName:Ne,areaIds:oe,allMarshals:$t,areaContacts:an,locationName:X?.name||"Unknown Location"}})),Se=de(()=>b.value.length>0?b.value[0]:null),z=de(()=>b.value.map(ae=>ae.locationId)),q=de(()=>x.value?.route?(typeof x.value.route=="string"?JSON.parse(x.value.route):x.value.route)||[]:[]),J=de(()=>!Se.value||!$.value.length?null:$.value.find(ae=>ae.id===Se.value.locationId)),_e=de(()=>ne.value.filter(ae=>ae.isCompleted).length),je=O([]),D=O(!1),B=de(()=>je.value),j=O([]);de(()=>{if(j.value.length===0)return[];const ae={};for(const X of j.value){const oe=X.areaId||"unknown";ae[oe]||(ae[oe]={areaId:X.areaId,areaName:X.areaName||"Unknown Area",contacts:[]}),ae[oe].contacts.push(X)}return Object.values(ae)}),de(()=>j.value.length);const se=de(()=>J.value?{lat:J.value.latitude,lng:J.value.longitude}:U.value?U.value:$.value.length>0?{lat:$.value[0].latitude,lng:$.value[0].longitude}:{lat:51.505,lng:-.09}),le=async(ae,X)=>{l.value=!0,u.value=null,console.log("Authenticating with magic code:",{eventId:ae,code:X});try{const oe=await as.marshalLogin(ae,X);if(console.log("Auth response:",oe.data),oe.data.success){localStorage.setItem("sessionToken",oe.data.sessionToken),localStorage.setItem(`marshal_${ae}`,oe.data.marshalId),h.value=oe.data.person,p.value=oe.data.marshalId,r.value=!0,console.log("Authenticated as marshal:",p.value,h.value?.name);try{const Ne=await as.getMe(ae);m.value=Ne.data,console.log("User claims:",m.value)}catch(Ne){console.warn("Failed to fetch claims:",Ne)}s.replace({path:a.path,query:{}}),await ye()}else u.value=oe.data.message||"Authentication failed"}catch(oe){console.error("Authentication failed:",oe),u.value=oe.response?.data?.message||"Invalid or expired login link"}finally{l.value=!1}},ie=async ae=>{const X=localStorage.getItem("sessionToken"),oe=localStorage.getItem(`marshal_${ae}`);if(!X||!oe)return!1;try{const Ne=await as.getMe(ae);if(Ne.data&&Ne.data.marshalId)return m.value=Ne.data,h.value={personId:Ne.data.personId,name:Ne.data.personName,email:Ne.data.personEmail},p.value=Ne.data.marshalId,r.value=!0,!0}catch{localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${ae}`)}return!1},ye=async()=>{const ae=a.params.eventId;console.log("Loading event data for:",{eventId:ae,marshalId:p.value});try{console.log("Fetching event...");const X=await Hs.getById(ae);x.value=X.data,console.log("Event loaded:",x.value?.name),x.value&&tf(x.value)}catch(X){console.error("Failed to load event:",X.response?.status,X.response?.data)}try{console.log("Fetching areas...");const X=await Vs.getByEvent(ae);S.value=X.data||[],console.log("Areas loaded:",S.value.length)}catch(X){console.error("Failed to load areas:",X.response?.status,X.response?.data)}try{console.log("Fetching event status (locations + assignments)...");const X=await Ei.getEventStatus(ae);if($.value=X.data?.locations||[],console.log("Locations loaded:",$.value.length),p.value){const oe=[];for(const Ne of $.value){const $t=Ne.assignments?.find(an=>an.marshalId===p.value);$t&&(oe.push($t),console.log("Assignment found:",$t.id,"at location:",Ne.name))}b.value=oe,console.log("Total assignments found:",b.value.length)}}catch(X){console.error("Failed to load event status:",X.response?.status,X.response?.data)}await ce(),await ve(),await be()},be=async()=>{const ae=a.params.eventId;try{const X=await js.getMyNotes(ae);pe.value=X.data||[],console.log("Notes loaded:",pe.value.length)}catch(X){console.error("Failed to load notes:",X)}},ve=async()=>{const ae=a.params.eventId;D.value=!0;try{const X=await xi.getMyContacts(ae);je.value=X.data,console.log("Contacts loaded:",je.value.length)}catch(X){console.warn("Failed to load contacts:",X),je.value=[]}finally{D.value=!1}},ce=async()=>{if(!p.value){console.warn("No marshal ID, skipping checklist load");return}ge.value=!0,xe.value=null;try{console.log("Fetching checklist for marshal:",p.value);const ae=await It.getMarshalChecklist(a.params.eventId,p.value);ne.value=ae.data||[],console.log("Checklist loaded:",ne.value.length,"items")}catch(ae){console.error("Failed to load checklist:",ae.response?.status,ae.response?.data),xe.value=ae.response?.data?.message||"Failed to load checklist"}finally{ge.value=!1}},Ie=async ae=>{if(!ze.value){ze.value=!0;try{ae.isCompleted?await It.uncomplete(a.params.eventId,ae.itemId,{marshalId:p.value,contextType:ae.completionContextType,contextId:ae.completionContextId}):await It.complete(a.params.eventId,ae.itemId,{marshalId:p.value,contextType:ae.completionContextType,contextId:ae.completionContextId}),await ce()}catch(X){console.error("Failed to toggle checklist item:",X),xe.value=X.response?.data?.message||"Failed to update checklist",setTimeout(()=>{xe.value=null},3e3)}finally{ze.value=!1}}},fe=ae=>{if(!ae.completionContextType||!ae.completionContextId)return null;if(ae.completionContextType==="Checkpoint"){const X=$.value.find(Ne=>Ne.id===ae.completionContextId);if(!X)return null;const oe=X.description?` - ${X.description}`:"";return`At ${i.value.checkpoint} ${X.name}${oe}`}if(ae.completionContextType==="Area"){const X=S.value.find(oe=>oe.id===ae.completionContextId);return X?`At ${i.value.area} ${X.name}`:null}return ae.completionContextType==="Personal"?"Personal item":null},ke=()=>{if(!("geolocation"in navigator)){console.warn("Geolocation not supported");return}console.log("Starting location tracking..."),re=navigator.geolocation.watchPosition(ae=>{U.value={lat:ae.coords.latitude,lng:ae.coords.longitude},console.log("Location updated:",U.value)},ae=>{console.warn("Geolocation error:",{1:"Location permission denied. Please allow location access in your browser settings.",2:"Location unavailable. Make sure GPS is enabled on your device.",3:"Location request timed out. Please try again."}[ae.code]||ae.message)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4})},Re=()=>{re!==null&&(navigator.geolocation.clearWatch(re),re=null)},Je=async ae=>{N.value=ae.id,te.value=ae.id,Z.value=null;try{if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by your browser");const X=await new Promise(($t,an)=>{navigator.geolocation.getCurrentPosition($t,an,{enableHighAccuracy:!0,timeout:1e4})}),oe=await Ti.checkIn({eventId:a.params.eventId,assignmentId:ae.id,latitude:X.coords.latitude,longitude:X.coords.longitude,manualCheckIn:!1}),Ne=b.value.findIndex($t=>$t.id===ae.id);Ne!==-1&&(b.value[Ne]=oe.data)}catch(X){X.response?.data?.message?Z.value=X.response.data.message:X.message?Z.value=X.message:Z.value="Failed to check in. Please try manual check-in."}finally{N.value=null,te.value=null}},tt=ae=>{Ee.value="Manual Check-In",K.value="Are you sure you want to check in manually? This should only be used if GPS is not available.",G.value=async()=>{N.value=ae.id,te.value=ae.id,Z.value=null;try{const X=await Ti.checkIn({eventId:a.params.eventId,assignmentId:ae.id,latitude:null,longitude:null,manualCheckIn:!0}),oe=b.value.findIndex(Ne=>Ne.id===ae.id);oe!==-1&&(b.value[oe]=X.data)}catch{Z.value="Failed to check in manually. Please contact the admin."}finally{N.value=null,te.value=null}},Ce.value=!0},Ge=()=>{Ce.value=!1,G.value&&(G.value(),G.value=null)},Lt=()=>{Ce.value=!1,G.value=null},ft=async()=>{try{await as.logout()}catch{}localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${a.params.eventId}`),r.value=!1,h.value=null,p.value=null,b.value=[],ne.value=[],j.value=[],s.push("/")},yt=ae=>ae?new Date(ae).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",nt=ae=>ae?new Date(ae).toLocaleString():"",xt=(ae,X)=>{if(!ae&&!X)return"";const oe=ae?yt(ae):"?",Ne=X?yt(X):"?";return`${oe} - ${Ne}`},ut=ae=>ae?new Date(ae).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",mt=ae=>ae?ae.replace(/([A-Z])/g," $1").replace(/^./,X=>X.toUpperCase()).trim():"";return Rn(async()=>{const ae=a.params.eventId,X=a.query.code;T.value=!0;try{X?await le(ae,X):await ie(ae)&&await ye()}finally{T.value=!1}r.value&&ke()}),Ye(r,ae=>{ae?ke():Re()}),zi(()=>{Re()}),(ae,X)=>(y(),k("div",xM,[d("header",EM,[x.value?(y(),k("h1",TM,M(x.value.name),1)):V("",!0),d("div",SM,[r.value?(y(),k("button",{key:0,onClick:X[0]||(X[0]=oe=>$e.value=!0),class:"btn-emergency"}," Emergency Info ")):V("",!0),r.value?(y(),k("button",{key:1,onClick:ft,class:"btn-logout"}," Logout ")):V("",!0)])]),d("div",IM,[T.value?(y(),k("div",MM,[...X[8]||(X[8]=[d("div",{class:"loading"},"Loading...",-1)])])):!r.value&&!u.value?(y(),k("div",AM,[X[9]||(X[9]=d("h2",null,"Welcome",-1)),X[10]||(X[10]=d("p",{class:"instruction"},"Please use the login link sent to you to access your marshal dashboard.",-1)),l.value?(y(),k("p",PM,"Authenticating...")):V("",!0)])):u.value?(y(),k("div",$M,[X[11]||(X[11]=d("h2",null,"Login Failed",-1)),d("p",DM,M(u.value),1),X[12]||(X[12]=d("p",{class:"instruction"},"Please contact the event organizer for a new login link.",-1))])):(y(),k("div",OM,[d("div",RM,[d("div",NM,[d("span",BM,M(h.value?.name||"Marshal"),1),h.value?.email?(y(),k("span",FM,M(h.value.email),1)):V("",!0)]),E.value?(y(),k("div",zM,[d("button",{onClick:P,class:"btn-mode-switch"}," Switch to Admin ")])):A.value?(y(),k("div",UM,[...X[13]||(X[13]=[d("span",{class:"reauth-hint",title:"Login via admin flow to access admin features"}," Admin access requires re-login ",-1)])])):V("",!0)]),d("div",HM,[x.value?.startDate||x.value?.description?(y(),k("div",VM,[d("button",{class:Fe(["accordion-header",{active:I.value==="eventDetails"}]),onClick:X[1]||(X[1]=oe=>we("eventDetails"))},[d("span",ZM,[d("span",{class:"section-icon",innerHTML:W($n)("event")},null,8,qM),X[14]||(X[14]=Oe(" Event details ",-1))]),d("span",jM,M(I.value==="eventDetails"?"":"+"),1)],2),I.value==="eventDetails"?(y(),k("div",WM,[d("div",GM,[x.value.startDate?(y(),k("div",KM,[X[15]||(X[15]=d("span",{class:"detail-label"},"Start time",-1)),d("span",YM,M(ut(x.value.startDate)),1)])):V("",!0),x.value.description?(y(),k("div",JM,[X[16]||(X[16]=d("span",{class:"detail-label"},"Description",-1)),d("p",XM,M(x.value.description),1)])):V("",!0)])])):V("",!0)])):V("",!0),d("div",QM,[d("button",{class:Fe(["accordion-header",{active:I.value==="assignments"}]),onClick:X[2]||(X[2]=oe=>we("assignments"))},[d("span",eA,[d("span",{class:"section-icon",innerHTML:W($n)("checkpoint")},null,8,tA),Oe(" Your "+M(W(i).checkpoints)+" ("+M(b.value.length)+") ",1)]),d("span",nA,M(I.value==="assignments"?"":"+"),1)],2),I.value==="assignments"?(y(),k("div",sA,[b.value.length===0?(y(),k("div",iA,[d("p",null,"You don't have any "+M(W(i).checkpoint)+" assignments yet.",1)])):(y(),k("div",oA,[(y(!0),k(me,null,Pe(qe.value,oe=>(y(),k("div",{key:oe.id,class:"checkpoint-accordion-section"},[d("button",{class:Fe(["checkpoint-accordion-header",{active:De.value===oe.id,"checked-in":oe.isCheckedIn}]),onClick:Ne=>Ue(oe.id)},[d("div",rA,[d("div",lA,[oe.isCheckedIn?(y(),k("span",cA,"")):V("",!0),d("span",uA,M(oe.location?.name||oe.locationName),1),oe.areaName?(y(),k("span",dA,M(oe.areaName),1)):V("",!0),oe.location?.startTime||oe.location?.endTime?(y(),k("span",hA,M(xt(oe.location.startTime,oe.location.endTime)),1)):V("",!0)]),oe.location?.description?(y(),k("div",fA,M(oe.location.description),1)):V("",!0)]),d("span",pA,M(De.value===oe.id?"":"+"),1)],10,aA),De.value===oe.id?(y(),k("div",mA,[oe.location?(y(),k("div",vA,[Ae(er,{locations:$.value,route:q.value,center:{lat:oe.location.latitude,lng:oe.location.longitude},zoom:16,"user-location":U.value,"highlight-location-id":oe.locationId,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-id"])])):V("",!0),d("div",_A,[d("div",gA,M(W(n).people)+":",1),d("div",yA,[(y(!0),k(me,null,Pe(oe.allMarshals,Ne=>(y(),k("span",{key:Ne.marshalId,class:Fe(["marshal-tag",{"is-you":Ne.marshalId===p.value,"checked-in":Ne.isCheckedIn}])},[Oe(M(Ne.marshalName)+M(Ne.marshalId===p.value?" (you)":"")+" ",1),Ne.isCheckedIn?(y(),k("span",bA,"")):V("",!0)],2))),128))])]),oe.areaContacts.length>0?(y(),k("div",kA,[d("div",wA,M(W(n).area)+" contacts:",1),d("div",LA,[(y(!0),k(me,null,Pe(oe.areaContacts,Ne=>(y(),k("div",{key:Ne.marshalId,class:"contact-item"},[d("div",CA,[d("div",xA,M(Ne.marshalName),1),Ne.role?(y(),k("div",EA,M(Ne.role),1)):V("",!0),Ne.phone?(y(),k("div",TA,M(Ne.phone),1)):V("",!0),Ne.email?(y(),k("div",SA,M(Ne.email),1)):V("",!0)]),d("div",IA,[Ne.phone?(y(),k("a",{key:0,href:`tel:${Ne.phone}`,class:"contact-link"},[...X[17]||(X[17]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Oe(" Call ",-1)])],8,MA)):V("",!0),Ne.phone?(y(),k("a",{key:1,href:`sms:${Ne.phone}`,class:"contact-link"},[...X[18]||(X[18]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Oe(" Text ",-1)])],8,AA)):V("",!0),Ne.email?(y(),k("a",{key:2,href:`mailto:${Ne.email}`,class:"contact-link"},[...X[19]||(X[19]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Oe(" Email ",-1)])],8,PA)):V("",!0)])]))),128))])])):V("",!0),oe.isCheckedIn?(y(),k("div",$A,[X[21]||(X[21]=d("span",{class:"check-icon"},"",-1)),d("div",null,[X[20]||(X[20]=d("strong",null,"Checked In",-1)),d("p",DA,M(yt(oe.checkInTime)),1)])])):(y(),k("div",OA,[d("button",{onClick:Ne=>Je(oe),class:"btn btn-primary",disabled:N.value===oe.id},M(N.value===oe.id?"Checking in...":"GPS Check-In"),9,RA),d("button",{onClick:Ne=>tt(oe),class:"btn btn-secondary",disabled:N.value===oe.id}," Manual ",8,NA)])),Z.value&&te.value===oe.id?(y(),k("div",BA,M(Z.value),1)):V("",!0)])):V("",!0)]))),128))]))])):V("",!0)]),d("div",FA,[d("button",{class:Fe(["accordion-header",{active:I.value==="checklist"}]),onClick:X[3]||(X[3]=oe=>we("checklist"))},[d("span",zA,[d("span",{class:"section-icon",innerHTML:W($n)("checklist")},null,8,UA),Oe(" Your "+M(W(i).checklists)+" ("+M(_e.value)+" of "+M(ne.value.length)+" complete) ",1)]),d("span",HA,M(I.value==="checklist"?"":"+"),1)],2),I.value==="checklist"?(y(),k("div",VA,[ge.value?(y(),k("div",ZA,"Loading checklist...")):xe.value?(y(),k("div",qA,M(xe.value),1)):ne.value.length===0?(y(),k("div",jA,[d("p",null,"No "+M(W(i).checklists)+" for you.",1)])):(y(),k("div",WA,[(y(!0),k(me,null,Pe(ne.value,oe=>(y(),k("div",{key:oe.itemId,class:Fe(["checklist-item",{"item-completed":oe.isCompleted}])},[d("div",GA,[d("input",{type:"checkbox",checked:oe.isCompleted,disabled:!oe.canBeCompletedByMe||ze.value,onChange:Ne=>Ie(oe)},null,40,KA)]),d("div",YA,[d("div",JA,M(oe.text),1),fe(oe)?(y(),k("div",XA,M(fe(oe)),1)):V("",!0),oe.isCompleted?(y(),k("div",QA,[d("span",eP," Completed by "+M(oe.completedByActorName||"Unknown"),1),d("span",tP,M(nt(oe.completedAt)),1)])):V("",!0)])],2))),128))]))])):V("",!0)]),B.value.length>0||D.value?(y(),k("div",nP,[d("button",{class:Fe(["accordion-header",{active:I.value==="eventContacts"}]),onClick:X[4]||(X[4]=oe=>we("eventContacts"))},[d("span",sP,[d("span",{class:"section-icon",innerHTML:W($n)("contacts")},null,8,iP),Oe(" Contacts ("+M(B.value.length)+") ",1)]),d("span",oP,M(I.value==="eventContacts"?"":"+"),1)],2),I.value==="eventContacts"?(y(),k("div",aP,[D.value?(y(),k("div",rP,"Loading contacts...")):(y(),k("div",lP,[(y(!0),k(me,null,Pe(B.value,oe=>(y(),k("div",{key:oe.contactId,class:Fe(["contact-item",{"primary-contact":oe.isPrimary}])},[d("div",cP,[d("div",uP,[oe.isPrimary?(y(),k("span",dP,"")):V("",!0),d("span",hP,M(oe.name),1),oe.role?(y(),k("span",fP,M(mt(oe.role)),1)):V("",!0)]),oe.notes?(y(),k("div",pP,M(oe.notes),1)):V("",!0),oe.phone?(y(),k("div",mP,M(oe.phone),1)):V("",!0),oe.email?(y(),k("div",vP,M(oe.email),1)):V("",!0)]),d("div",_P,[oe.phone?(y(),k("a",{key:0,href:`tel:${oe.phone}`,class:"contact-link"},[...X[22]||(X[22]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Oe(" Call ",-1)])],8,gP)):V("",!0),oe.phone?(y(),k("a",{key:1,href:`sms:${oe.phone}`,class:"contact-link"},[...X[23]||(X[23]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Oe(" Text ",-1)])],8,yP)):V("",!0),oe.email?(y(),k("a",{key:2,href:`mailto:${oe.email}`,class:"contact-link"},[...X[24]||(X[24]=[d("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[d("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Oe(" Email ",-1)])],8,bP)):V("",!0)])],2))),128))]))])):V("",!0)])):V("",!0),d("div",kP,[d("button",{class:Fe(["accordion-header",{active:I.value==="notes"}]),onClick:X[5]||(X[5]=oe=>we("notes"))},[d("span",wP,[d("span",{class:"section-icon",innerHTML:W($n)("notes")},null,8,LP),Oe(" Notes ("+M(pe.value.length)+") ",1)]),d("span",CP,M(I.value==="notes"?"":"+"),1)],2),I.value==="notes"?(y(),k("div",xP,[Ae(Er,{"event-id":W(a).params.eventId,"all-notes":pe.value,locations:$.value,areas:S.value,assignments:b.value,"show-scope":!1,onNotesChanged:be},null,8,["event-id","all-notes","locations","areas","assignments"])])):V("",!0)]),d("div",EP,[d("button",{class:Fe(["accordion-header",{active:I.value==="map"}]),onClick:X[6]||(X[6]=oe=>we("map"))},[d("span",TP,[d("span",{class:"section-icon",innerHTML:W($n)("map")},null,8,SP),X[25]||(X[25]=Oe(" Map ",-1)),U.value?(y(),k("span",IP,"GPS Active")):(y(),k("span",MP,"GPS Inactive"))]),d("span",AP,M(I.value==="map"?"":"+"),1)],2),I.value==="map"?(y(),k("div",PP,[Ae(er,{locations:$.value,route:q.value,center:se.value,zoom:15,"user-location":U.value,"highlight-location-ids":z.value,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-ids"])])):V("",!0)])]),g.value?(y(),it(CM,{key:0,"event-id":W(a).params.eventId,"area-ids":v.value,"marshal-id":p.value,onChecklistUpdated:ce},null,8,["event-id","area-ids","marshal-id"])):V("",!0)]))]),Ae(GI,{show:$e.value,contacts:x.value?.emergencyContacts||[],onClose:X[7]||(X[7]=oe=>$e.value=!1)},null,8,["show","contacts"]),Ae(xr,{show:Ce.value,title:Ee.value,message:K.value,onConfirm:Ge,onCancel:Lt},null,8,["show","title","message"])]))}},DP=He($P,[["__scopeId","data-v-b01e3011"]]),OP=[{path:"/",name:"Home",component:O_},{path:"/admin/login",name:"AdminLogin",component:yy},{path:"/admin/verify",name:"AdminVerify",component:Ey},{path:"/admin/dashboard",name:"AdminDashboard",component:bb,meta:{requiresAuth:!0}},{path:"/admin/profile",name:"AdminProfile",component:jb,meta:{requiresAuth:!0}},{path:"/admin/event/:eventId",name:"AdminEventManage",component:FI,meta:{requiresAuth:!0}},{path:"/event/:eventId",name:"MarshalView",component:DP},{path:"/:pathMatch(.*)*",redirect:"/"}],lf=I_({history:r_("/VolunteerCheckin/testing/"),routes:OP});lf.beforeEach((e,n,i)=>{const a=localStorage.getItem("adminEmail");e.meta.requiresAuth&&!a?i({name:"AdminLogin"}):i()});const ac=dv(Lv);ac.use(pv());ac.use(lf);ac.mount("#app");
