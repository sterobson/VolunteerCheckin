(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function Lc(e){const n=Object.create(null);for(const i of e.split(","))n[i]=1;return i=>i in n}const Ct={},Yi=[],ns=()=>{},nh=()=>!1,Or=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),xc=e=>e.startsWith("onUpdate:"),Zt=Object.assign,Sc=(e,n)=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)},tm=Object.prototype.hasOwnProperty,pt=(e,n)=>tm.call(e,n),We=Array.isArray,Xi=e=>ya(e)==="[object Map]",co=e=>ya(e)==="[object Set]",Su=e=>ya(e)==="[object Date]",st=e=>typeof e=="function",Dt=e=>typeof e=="string",Hn=e=>typeof e=="symbol",yt=e=>e!==null&&typeof e=="object",sh=e=>(yt(e)||st(e))&&st(e.then)&&st(e.catch),ih=Object.prototype.toString,ya=e=>ih.call(e),nm=e=>ya(e).slice(8,-1),oh=e=>ya(e)==="[object Object]",Rr=e=>Dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Qo=Lc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nr=e=>{const n=Object.create(null);return(i=>n[i]||(n[i]=e(i)))},sm=/-\w/g,Dn=Nr(e=>e.replace(sm,n=>n.slice(1).toUpperCase())),im=/\B([A-Z])/g,ii=Nr(e=>e.replace(im,"-$1").toLowerCase()),Br=Nr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Al=Nr(e=>e?`on${Br(e)}`:""),Qs=(e,n)=>!Object.is(e,n),dr=(e,...n)=>{for(let i=0;i<e.length;i++)e[i](...n)},ah=(e,n,i,a=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:a,value:i})},Fr=e=>{const n=parseFloat(e);return isNaN(n)?e:n},om=e=>{const n=Dt(e)?Number(e):NaN;return isNaN(n)?e:n};let Tu;const zr=()=>Tu||(Tu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nn(e){if(We(e)){const n={};for(let i=0;i<e.length;i++){const a=e[i],s=Dt(a)?cm(a):nn(a);if(s)for(const r in s)n[r]=s[r]}return n}else if(Dt(e)||yt(e))return e}const am=/;(?![^(]*\))/g,rm=/:([^]+)/,lm=/\/\*[^]*?\*\//g;function cm(e){const n={};return e.replace(lm,"").split(am).forEach(i=>{if(i){const a=i.split(rm);a.length>1&&(n[a[0].trim()]=a[1].trim())}}),n}function Fe(e){let n="";if(Dt(e))n=e;else if(We(e))for(let i=0;i<e.length;i++){const a=Fe(e[i]);a&&(n+=a+" ")}else if(yt(e))for(const i in e)e[i]&&(n+=i+" ");return n.trim()}const um="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dm=Lc(um);function rh(e){return!!e||e===""}function hm(e,n){if(e.length!==n.length)return!1;let i=!0;for(let a=0;i&&a<e.length;a++)i=Ti(e[a],n[a]);return i}function Ti(e,n){if(e===n)return!0;let i=Su(e),a=Su(n);if(i||a)return i&&a?e.getTime()===n.getTime():!1;if(i=Hn(e),a=Hn(n),i||a)return e===n;if(i=We(e),a=We(n),i||a)return i&&a?hm(e,n):!1;if(i=yt(e),a=yt(n),i||a){if(!i||!a)return!1;const s=Object.keys(e).length,r=Object.keys(n).length;if(s!==r)return!1;for(const l in e){const c=e.hasOwnProperty(l),h=n.hasOwnProperty(l);if(c&&!h||!c&&h||!Ti(e[l],n[l]))return!1}}return String(e)===String(n)}function Tc(e,n){return e.findIndex(i=>Ti(i,n))}const lh=e=>!!(e&&e.__v_isRef===!0),S=e=>Dt(e)?e:e==null?"":We(e)||yt(e)&&(e.toString===ih||!st(e.toString))?lh(e)?S(e.value):JSON.stringify(e,ch,2):String(e),ch=(e,n)=>lh(n)?ch(e,n.value):Xi(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[a,s],r)=>(i[El(a,r)+" =>"]=s,i),{})}:co(n)?{[`Set(${n.size})`]:[...n.values()].map(i=>El(i))}:Hn(n)?El(n):yt(n)&&!We(n)&&!oh(n)?String(n):n,El=(e,n="")=>{var i;return Hn(e)?`Symbol(${(i=e.description)!=null?i:n})`:e};let Jt;class uh{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jt,!n&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].pause();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].resume();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].resume()}}run(n){if(this._active){const i=Jt;try{return Jt=this,n()}finally{Jt=i}}}on(){++this._on===1&&(this.prevScope=Jt,Jt=this)}off(){this._on>0&&--this._on===0&&(Jt=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let i,a;for(i=0,a=this.effects.length;i<a;i++)this.effects[i].stop();for(this.effects.length=0,i=0,a=this.cleanups.length;i<a;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function dh(e){return new uh(e)}function hh(){return Jt}function fm(e,n=!1){Jt&&Jt.cleanups.push(e)}let xt;const Ml=new WeakSet;class fh{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jt&&Jt.active&&Jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ml.has(this)&&(Ml.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Iu(this),vh(this);const n=xt,i=Un;xt=this,Un=!0;try{return this.fn()}finally{gh(this),xt=n,Un=i,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Ec(n);this.deps=this.depsTail=void 0,Iu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ml.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xl(this)&&this.run()}get dirty(){return Xl(this)}}let ph=0,ea,ta;function mh(e,n=!1){if(e.flags|=8,n){e.next=ta,ta=e;return}e.next=ea,ea=e}function Ic(){ph++}function Ac(){if(--ph>0)return;if(ta){let n=ta;for(ta=void 0;n;){const i=n.next;n.next=void 0,n.flags&=-9,n=i}}let e;for(;ea;){let n=ea;for(ea=void 0;n;){const i=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(a){e||(e=a)}n=i}}if(e)throw e}function vh(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function gh(e){let n,i=e.depsTail,a=i;for(;a;){const s=a.prevDep;a.version===-1?(a===i&&(i=s),Ec(a),pm(a)):n=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=s}e.deps=n,e.depsTail=i}function Xl(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(_h(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function _h(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===la)||(e.globalVersion=la,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Xl(e))))return;e.flags|=2;const n=e.dep,i=xt,a=Un;xt=e,Un=!0;try{vh(e);const s=e.fn(e._value);(n.version===0||Qs(s,e._value))&&(e.flags|=128,e._value=s,n.version++)}catch(s){throw n.version++,s}finally{xt=i,Un=a,gh(e),e.flags&=-3}}function Ec(e,n=!1){const{dep:i,prevSub:a,nextSub:s}=e;if(a&&(a.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=a,e.nextSub=void 0),i.subs===e&&(i.subs=a,!a&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Ec(r,!0)}!n&&!--i.sc&&i.map&&i.map.delete(i.key)}function pm(e){const{prevDep:n,nextDep:i}=e;n&&(n.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=n,e.nextDep=void 0)}let Un=!0;const yh=[];function Es(){yh.push(Un),Un=!1}function Ms(){const e=yh.pop();Un=e===void 0?!0:e}function Iu(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const i=xt;xt=void 0;try{n()}finally{xt=i}}}let la=0;class mm{constructor(n,i){this.sub=n,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mc{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!xt||!Un||xt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==xt)i=this.activeLink=new mm(xt,this),xt.deps?(i.prevDep=xt.depsTail,xt.depsTail.nextDep=i,xt.depsTail=i):xt.deps=xt.depsTail=i,bh(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const a=i.nextDep;a.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=a),i.prevDep=xt.depsTail,i.nextDep=void 0,xt.depsTail.nextDep=i,xt.depsTail=i,xt.deps===i&&(xt.deps=a)}return i}trigger(n){this.version++,la++,this.notify(n)}notify(n){Ic();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Ac()}}}function bh(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let a=n.deps;a;a=a.nextDep)bh(a)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const kr=new WeakMap,Li=Symbol(""),Ql=Symbol(""),ca=Symbol("");function Xt(e,n,i){if(Un&&xt){let a=kr.get(e);a||kr.set(e,a=new Map);let s=a.get(i);s||(a.set(i,s=new Mc),s.map=a,s.key=i),s.track()}}function xs(e,n,i,a,s,r){const l=kr.get(e);if(!l){la++;return}const c=h=>{h&&h.trigger()};if(Ic(),n==="clear")l.forEach(c);else{const h=We(e),p=h&&Rr(i);if(h&&i==="length"){const f=Number(a);l.forEach((v,T)=>{(T==="length"||T===ca||!Hn(T)&&T>=f)&&c(v)})}else switch((i!==void 0||l.has(void 0))&&c(l.get(i)),p&&c(l.get(ca)),n){case"add":h?p&&c(l.get("length")):(c(l.get(Li)),Xi(e)&&c(l.get(Ql)));break;case"delete":h||(c(l.get(Li)),Xi(e)&&c(l.get(Ql)));break;case"set":Xi(e)&&c(l.get(Li));break}}Ac()}function vm(e,n){const i=kr.get(e);return i&&i.get(n)}function ji(e){const n=dt(e);return n===e?n:(Xt(n,"iterate",ca),Cn(e)?n:n.map(Vn))}function Ur(e){return Xt(e=dt(e),"iterate",ca),e}function qs(e,n){return $s(e)?As(e)?so(Vn(n)):so(n):Vn(n)}const gm={__proto__:null,[Symbol.iterator](){return $l(this,Symbol.iterator,e=>qs(this,e))},concat(...e){return ji(this).concat(...e.map(n=>We(n)?ji(n):n))},entries(){return $l(this,"entries",e=>(e[1]=qs(this,e[1]),e))},every(e,n){return ys(this,"every",e,n,void 0,arguments)},filter(e,n){return ys(this,"filter",e,n,i=>i.map(a=>qs(this,a)),arguments)},find(e,n){return ys(this,"find",e,n,i=>qs(this,i),arguments)},findIndex(e,n){return ys(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return ys(this,"findLast",e,n,i=>qs(this,i),arguments)},findLastIndex(e,n){return ys(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return ys(this,"forEach",e,n,void 0,arguments)},includes(...e){return Pl(this,"includes",e)},indexOf(...e){return Pl(this,"indexOf",e)},join(e){return ji(this).join(e)},lastIndexOf(...e){return Pl(this,"lastIndexOf",e)},map(e,n){return ys(this,"map",e,n,void 0,arguments)},pop(){return zo(this,"pop")},push(...e){return zo(this,"push",e)},reduce(e,...n){return Au(this,"reduce",e,n)},reduceRight(e,...n){return Au(this,"reduceRight",e,n)},shift(){return zo(this,"shift")},some(e,n){return ys(this,"some",e,n,void 0,arguments)},splice(...e){return zo(this,"splice",e)},toReversed(){return ji(this).toReversed()},toSorted(e){return ji(this).toSorted(e)},toSpliced(...e){return ji(this).toSpliced(...e)},unshift(...e){return zo(this,"unshift",e)},values(){return $l(this,"values",e=>qs(this,e))}};function $l(e,n,i){const a=Ur(e),s=a[n]();return a!==e&&!Cn(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=i(r.value)),r}),s}const _m=Array.prototype;function ys(e,n,i,a,s,r){const l=Ur(e),c=l!==e&&!Cn(e),h=l[n];if(h!==_m[n]){const v=h.apply(e,r);return c?Vn(v):v}let p=i;l!==e&&(c?p=function(v,T){return i.call(this,qs(e,v),T,e)}:i.length>2&&(p=function(v,T){return i.call(this,v,T,e)}));const f=h.call(l,p,a);return c&&s?s(f):f}function Au(e,n,i,a){const s=Ur(e);let r=i;return s!==e&&(Cn(e)?i.length>3&&(r=function(l,c,h){return i.call(this,l,c,h,e)}):r=function(l,c,h){return i.call(this,l,qs(e,c),h,e)}),s[n](r,...a)}function Pl(e,n,i){const a=dt(e);Xt(a,"iterate",ca);const s=a[n](...i);return(s===-1||s===!1)&&Hr(i[0])?(i[0]=dt(i[0]),a[n](...i)):s}function zo(e,n,i=[]){Es(),Ic();const a=dt(e)[n].apply(e,i);return Ac(),Ms(),a}const ym=Lc("__proto__,__v_isRef,__isVue"),kh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Hn));function bm(e){Hn(e)||(e=String(e));const n=dt(this);return Xt(n,"has",e),n.hasOwnProperty(e)}class wh{constructor(n=!1,i=!1){this._isReadonly=n,this._isShallow=i}get(n,i,a){if(i==="__v_skip")return n.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return a===(s?r?Em:Sh:r?xh:Lh).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(a)?n:void 0;const l=We(n);if(!s){let h;if(l&&(h=gm[i]))return h;if(i==="hasOwnProperty")return bm}const c=Reflect.get(n,i,Pt(n)?n:a);if((Hn(i)?kh.has(i):ym(i))||(s||Xt(n,"get",i),r))return c;if(Pt(c)){const h=l&&Rr(i)?c:c.value;return s&&yt(h)?tc(h):h}return yt(c)?s?tc(c):ba(c):c}}class Ch extends wh{constructor(n=!1){super(!1,n)}set(n,i,a,s){let r=n[i];const l=We(n)&&Rr(i);if(!this._isShallow){const p=$s(r);if(!Cn(a)&&!$s(a)&&(r=dt(r),a=dt(a)),!l&&Pt(r)&&!Pt(a))return p||(r.value=a),!0}const c=l?Number(i)<n.length:pt(n,i),h=Reflect.set(n,i,a,Pt(n)?n:s);return n===dt(s)&&(c?Qs(a,r)&&xs(n,"set",i,a):xs(n,"add",i,a)),h}deleteProperty(n,i){const a=pt(n,i);n[i];const s=Reflect.deleteProperty(n,i);return s&&a&&xs(n,"delete",i,void 0),s}has(n,i){const a=Reflect.has(n,i);return(!Hn(i)||!kh.has(i))&&Xt(n,"has",i),a}ownKeys(n){return Xt(n,"iterate",We(n)?"length":Li),Reflect.ownKeys(n)}}class km extends wh{constructor(n=!1){super(!0,n)}set(n,i){return!0}deleteProperty(n,i){return!0}}const wm=new Ch,Cm=new km,Lm=new Ch(!0);const ec=e=>e,nr=e=>Reflect.getPrototypeOf(e);function xm(e,n,i){return function(...a){const s=this.__v_raw,r=dt(s),l=Xi(r),c=e==="entries"||e===Symbol.iterator&&l,h=e==="keys"&&l,p=s[e](...a),f=i?ec:n?so:Vn;return!n&&Xt(r,"iterate",h?Ql:Li),{next(){const{value:v,done:T}=p.next();return T?{value:v,done:T}:{value:c?[f(v[0]),f(v[1])]:f(v),done:T}},[Symbol.iterator](){return this}}}}function sr(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Sm(e,n){const i={get(s){const r=this.__v_raw,l=dt(r),c=dt(s);e||(Qs(s,c)&&Xt(l,"get",s),Xt(l,"get",c));const{has:h}=nr(l),p=n?ec:e?so:Vn;if(h.call(l,s))return p(r.get(s));if(h.call(l,c))return p(r.get(c));r!==l&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Xt(dt(s),"iterate",Li),s.size},has(s){const r=this.__v_raw,l=dt(r),c=dt(s);return e||(Qs(s,c)&&Xt(l,"has",s),Xt(l,"has",c)),s===c?r.has(s):r.has(s)||r.has(c)},forEach(s,r){const l=this,c=l.__v_raw,h=dt(c),p=n?ec:e?so:Vn;return!e&&Xt(h,"iterate",Li),c.forEach((f,v)=>s.call(r,p(f),p(v),l))}};return Zt(i,e?{add:sr("add"),set:sr("set"),delete:sr("delete"),clear:sr("clear")}:{add(s){!n&&!Cn(s)&&!$s(s)&&(s=dt(s));const r=dt(this);return nr(r).has.call(r,s)||(r.add(s),xs(r,"add",s,s)),this},set(s,r){!n&&!Cn(r)&&!$s(r)&&(r=dt(r));const l=dt(this),{has:c,get:h}=nr(l);let p=c.call(l,s);p||(s=dt(s),p=c.call(l,s));const f=h.call(l,s);return l.set(s,r),p?Qs(r,f)&&xs(l,"set",s,r):xs(l,"add",s,r),this},delete(s){const r=dt(this),{has:l,get:c}=nr(r);let h=l.call(r,s);h||(s=dt(s),h=l.call(r,s)),c&&c.call(r,s);const p=r.delete(s);return h&&xs(r,"delete",s,void 0),p},clear(){const s=dt(this),r=s.size!==0,l=s.clear();return r&&xs(s,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=xm(s,e,n)}),i}function $c(e,n){const i=Sm(e,n);return(a,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?a:Reflect.get(pt(i,s)&&s in a?i:a,s,r)}const Tm={get:$c(!1,!1)},Im={get:$c(!1,!0)},Am={get:$c(!0,!1)};const Lh=new WeakMap,xh=new WeakMap,Sh=new WeakMap,Em=new WeakMap;function Mm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $m(e){return e.__v_skip||!Object.isExtensible(e)?0:Mm(nm(e))}function ba(e){return $s(e)?e:Pc(e,!1,wm,Tm,Lh)}function Th(e){return Pc(e,!1,Lm,Im,xh)}function tc(e){return Pc(e,!0,Cm,Am,Sh)}function Pc(e,n,i,a,s){if(!yt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const r=$m(e);if(r===0)return e;const l=s.get(e);if(l)return l;const c=new Proxy(e,r===2?a:i);return s.set(e,c),c}function As(e){return $s(e)?As(e.__v_raw):!!(e&&e.__v_isReactive)}function $s(e){return!!(e&&e.__v_isReadonly)}function Cn(e){return!!(e&&e.__v_isShallow)}function Hr(e){return e?!!e.__v_raw:!1}function dt(e){const n=e&&e.__v_raw;return n?dt(n):e}function Dc(e){return!pt(e,"__v_skip")&&Object.isExtensible(e)&&ah(e,"__v_skip",!0),e}const Vn=e=>yt(e)?ba(e):e,so=e=>yt(e)?tc(e):e;function Pt(e){return e?e.__v_isRef===!0:!1}function O(e){return Ih(e,!1)}function Pm(e){return Ih(e,!0)}function Ih(e,n){return Pt(e)?e:new Dm(e,n)}class Dm{constructor(n,i){this.dep=new Mc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?n:dt(n),this._value=i?n:Vn(n),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(n){const i=this._rawValue,a=this.__v_isShallow||Cn(n)||$s(n);n=a?n:dt(n),Qs(n,i)&&(this._rawValue=n,this._value=a?n:Vn(n),this.dep.trigger())}}function U(e){return Pt(e)?e.value:e}const Om={get:(e,n,i)=>n==="__v_raw"?e:U(Reflect.get(e,n,i)),set:(e,n,i,a)=>{const s=e[n];return Pt(s)&&!Pt(i)?(s.value=i,!0):Reflect.set(e,n,i,a)}};function Ah(e){return As(e)?e:new Proxy(e,Om)}function Rm(e){const n=We(e)?new Array(e.length):{};for(const i in e)n[i]=Bm(e,i);return n}class Nm{constructor(n,i,a){this._object=n,this._key=i,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0,this._raw=dt(n);let s=!0,r=n;if(!We(n)||!Rr(String(i)))do s=!Hr(r)||Cn(r);while(s&&(r=r.__v_raw));this._shallow=s}get value(){let n=this._object[this._key];return this._shallow&&(n=U(n)),this._value=n===void 0?this._defaultValue:n}set value(n){if(this._shallow&&Pt(this._raw[this._key])){const i=this._object[this._key];if(Pt(i)){i.value=n;return}}this._object[this._key]=n}get dep(){return vm(this._raw,this._key)}}function Bm(e,n,i){return new Nm(e,n,i)}class Fm{constructor(n,i,a){this.fn=n,this.setter=i,this._value=void 0,this.dep=new Mc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=la-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return mh(this,!0),!0}get value(){const n=this.dep.track();return _h(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function zm(e,n,i=!1){let a,s;return st(e)?a=e:(a=e.get,s=e.set),new Fm(a,s,i)}const ir={},wr=new WeakMap;let gi;function Um(e,n=!1,i=gi){if(i){let a=wr.get(i);a||wr.set(i,a=[]),a.push(e)}}function Hm(e,n,i=Ct){const{immediate:a,deep:s,once:r,scheduler:l,augmentJob:c,call:h}=i,p=M=>s?M:Cn(M)||s===!1||s===0?Ss(M,1):Ss(M);let f,v,T,k,w=!1,I=!1;if(Pt(e)?(v=()=>e.value,w=Cn(e)):As(e)?(v=()=>p(e),w=!0):We(e)?(I=!0,w=e.some(M=>As(M)||Cn(M)),v=()=>e.map(M=>{if(Pt(M))return M.value;if(As(M))return p(M);if(st(M))return h?h(M,2):M()})):st(e)?n?v=h?()=>h(e,2):e:v=()=>{if(T){Es();try{T()}finally{Ms()}}const M=gi;gi=f;try{return h?h(e,3,[k]):e(k)}finally{gi=M}}:v=ns,n&&s){const M=v,x=s===!0?1/0:s;v=()=>Ss(M(),x)}const D=hh(),A=()=>{f.stop(),D&&D.active&&Sc(D.effects,f)};if(r&&n){const M=n;n=(...x)=>{M(...x),A()}}let b=I?new Array(e.length).fill(ir):ir;const C=M=>{if(!(!(f.flags&1)||!f.dirty&&!M))if(n){const x=f.run();if(s||w||(I?x.some((E,P)=>Qs(E,b[P])):Qs(x,b))){T&&T();const E=gi;gi=f;try{const P=[x,b===ir?void 0:I&&b[0]===ir?[]:b,k];b=x,h?h(n,3,P):n(...P)}finally{gi=E}}}else f.run()};return c&&c(C),f=new fh(v),f.scheduler=l?()=>l(C,!1):C,k=M=>Um(M,!1,f),T=f.onStop=()=>{const M=wr.get(f);if(M){if(h)h(M,4);else for(const x of M)x();wr.delete(f)}},n?a?C(!0):b=f.run():l?l(C.bind(null,!0),!0):f.run(),A.pause=f.pause.bind(f),A.resume=f.resume.bind(f),A.stop=A,A}function Ss(e,n=1/0,i){if(n<=0||!yt(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=n))return e;if(i.set(e,n),n--,Pt(e))Ss(e.value,n,i);else if(We(e))for(let a=0;a<e.length;a++)Ss(e[a],n,i);else if(co(e)||Xi(e))e.forEach(a=>{Ss(a,n,i)});else if(oh(e)){for(const a in e)Ss(e[a],n,i);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&Ss(e[a],n,i)}return e}function ka(e,n,i,a){try{return a?e(...a):e()}catch(s){Vr(s,n,i)}}function Zn(e,n,i,a){if(st(e)){const s=ka(e,n,i,a);return s&&sh(s)&&s.catch(r=>{Vr(r,n,i)}),s}if(We(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Zn(e[r],n,i,a));return s}}function Vr(e,n,i,a=!0){const s=n?n.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=n&&n.appContext.config||Ct;if(n){let c=n.parent;const h=n.proxy,p=`https://vuejs.org/error-reference/#runtime-${i}`;for(;c;){const f=c.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](e,h,p)===!1)return}c=c.parent}if(r){Es(),ka(r,null,10,[e,h,p]),Ms();return}}Vm(e,i,s,a,l)}function Vm(e,n,i,a=!0,s=!1){if(s)throw e;console.error(e)}const un=[];let Yn=-1;const Qi=[];let Ws=null,Wi=0;const Eh=Promise.resolve();let Cr=null;function io(e){const n=Cr||Eh;return e?n.then(this?e.bind(this):e):n}function Zm(e){let n=Yn+1,i=un.length;for(;n<i;){const a=n+i>>>1,s=un[a],r=ua(s);r<e||r===e&&s.flags&2?n=a+1:i=a}return n}function Oc(e){if(!(e.flags&1)){const n=ua(e),i=un[un.length-1];!i||!(e.flags&2)&&n>=ua(i)?un.push(e):un.splice(Zm(n),0,e),e.flags|=1,Mh()}}function Mh(){Cr||(Cr=Eh.then(Ph))}function jm(e){We(e)?Qi.push(...e):Ws&&e.id===-1?Ws.splice(Wi+1,0,e):e.flags&1||(Qi.push(e),e.flags|=1),Mh()}function Eu(e,n,i=Yn+1){for(;i<un.length;i++){const a=un[i];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;un.splice(i,1),i--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function $h(e){if(Qi.length){const n=[...new Set(Qi)].sort((i,a)=>ua(i)-ua(a));if(Qi.length=0,Ws){Ws.push(...n);return}for(Ws=n,Wi=0;Wi<Ws.length;Wi++){const i=Ws[Wi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Ws=null,Wi=0}}const ua=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ph(e){try{for(Yn=0;Yn<un.length;Yn++){const n=un[Yn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ka(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Yn<un.length;Yn++){const n=un[Yn];n&&(n.flags&=-2)}Yn=-1,un.length=0,$h(),Cr=null,(un.length||Qi.length)&&Ph()}}let qt=null,Dh=null;function Lr(e){const n=qt;return qt=e,Dh=e&&e.type.__scopeId||null,n}function Ge(e,n=qt,i){if(!n||e._n)return e;const a=(...s)=>{a._d&&Tr(-1);const r=Lr(n);let l;try{l=e(...s)}finally{Lr(r),a._d&&Tr(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function Ne(e,n){if(qt===null)return e;const i=Kr(qt),a=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[r,l,c,h=Ct]=n[s];r&&(st(r)&&(r={mounted:r,updated:r}),r.deep&&Ss(l),a.push({dir:r,instance:i,value:l,oldValue:void 0,arg:c,modifiers:h}))}return e}function fi(e,n,i,a){const s=e.dirs,r=n&&n.dirs;for(let l=0;l<s.length;l++){const c=s[l];r&&(c.oldValue=r[l].value);let h=c.dir[a];h&&(Es(),Zn(h,i,8,[e.el,c,e,n]),Ms())}}function hr(e,n){if(en){let i=en.provides;const a=en.parent&&en.parent.provides;a===i&&(i=en.provides=Object.create(a)),i[e]=n}}function $n(e,n,i=!1){const a=zc();if(a||xi){let s=xi?xi._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&st(n)?n.call(a&&a.proxy):n}}function qm(){return!!(zc()||xi)}const Wm=Symbol.for("v-scx"),Gm=()=>$n(Wm);function qe(e,n,i){return Oh(e,n,i)}function Oh(e,n,i=Ct){const{immediate:a,deep:s,flush:r,once:l}=i,c=Zt({},i),h=n&&a||!n&&r!=="post";let p;if(pa){if(r==="sync"){const k=Gm();p=k.__watcherHandles||(k.__watcherHandles=[])}else if(!h){const k=()=>{};return k.stop=ns,k.resume=ns,k.pause=ns,k}}const f=en;c.call=(k,w,I)=>Zn(k,f,w,I);let v=!1;r==="post"?c.scheduler=k=>{ln(k,f&&f.suspense)}:r!=="sync"&&(v=!0,c.scheduler=(k,w)=>{w?k():Oc(k)}),c.augmentJob=k=>{n&&(k.flags|=4),v&&(k.flags|=2,f&&(k.id=f.uid,k.i=f))};const T=Hm(e,n,c);return pa&&(p?p.push(T):h&&T()),T}function Km(e,n,i){const a=this.proxy,s=Dt(e)?e.includes(".")?Rh(a,e):()=>a[e]:e.bind(a,a);let r;st(n)?r=n:(r=n.handler,i=n);const l=wa(this),c=Oh(s,r.bind(a),i);return l(),c}function Rh(e,n){const i=n.split(".");return()=>{let a=e;for(let s=0;s<i.length&&a;s++)a=a[i[s]];return a}}const Nh=Symbol("_vte"),Bh=e=>e.__isTeleport,na=e=>e&&(e.disabled||e.disabled===""),Mu=e=>e&&(e.defer||e.defer===""),$u=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Pu=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,nc=(e,n)=>{const i=e&&e.to;return Dt(i)?n?n(i):null:i},Fh={name:"Teleport",__isTeleport:!0,process(e,n,i,a,s,r,l,c,h,p){const{mc:f,pc:v,pbc:T,o:{insert:k,querySelector:w,createText:I,createComment:D}}=p,A=na(n.props);let{shapeFlag:b,children:C,dynamicChildren:M}=n;if(e==null){const x=n.el=I(""),E=n.anchor=I("");k(x,i,a),k(E,i,a);const P=(Q,le)=>{b&16&&f(C,Q,le,s,r,l,c,h)},X=()=>{const Q=n.target=nc(n.props,w),le=zh(Q,n,I,k);Q&&(l!=="svg"&&$u(Q)?l="svg":l!=="mathml"&&Pu(Q)&&(l="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(Q),A||(P(Q,le),fr(n,!1)))};A&&(P(i,E),fr(n,!0)),Mu(n.props)?(n.el.__isMounted=!1,ln(()=>{X(),delete n.el.__isMounted},r)):X()}else{if(Mu(n.props)&&e.el.__isMounted===!1){ln(()=>{Fh.process(e,n,i,a,s,r,l,c,h,p)},r);return}n.el=e.el,n.targetStart=e.targetStart;const x=n.anchor=e.anchor,E=n.target=e.target,P=n.targetAnchor=e.targetAnchor,X=na(e.props),Q=X?i:E,le=X?x:P;if(l==="svg"||$u(E)?l="svg":(l==="mathml"||Pu(E))&&(l="mathml"),M?(T(e.dynamicChildren,M,Q,s,r,l,c),Bc(e,n,!0)):h||v(e,n,Q,le,s,r,l,c,!1),A)X?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):or(n,i,x,p,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const ke=n.target=nc(n.props,w);ke&&or(n,ke,null,p,0)}else X&&or(n,E,P,p,1);fr(n,A)}},remove(e,n,i,{um:a,o:{remove:s}},r){const{shapeFlag:l,children:c,anchor:h,targetStart:p,targetAnchor:f,target:v,props:T}=e;if(v&&(s(p),s(f)),r&&s(h),l&16){const k=r||!na(T);for(let w=0;w<c.length;w++){const I=c[w];a(I,n,i,k,!!I.dynamicChildren)}}},move:or,hydrate:Jm};function or(e,n,i,{o:{insert:a},m:s},r=2){r===0&&a(e.targetAnchor,n,i);const{el:l,anchor:c,shapeFlag:h,children:p,props:f}=e,v=r===2;if(v&&a(l,n,i),(!v||na(f))&&h&16)for(let T=0;T<p.length;T++)s(p[T],n,i,2);v&&a(c,n,i)}function Jm(e,n,i,a,s,r,{o:{nextSibling:l,parentNode:c,querySelector:h,insert:p,createText:f}},v){function T(I,D,A,b){D.anchor=v(l(I),D,c(I),i,a,s,r),D.targetStart=A,D.targetAnchor=b}const k=n.target=nc(n.props,h),w=na(n.props);if(k){const I=k._lpa||k.firstChild;if(n.shapeFlag&16)if(w)T(e,n,I,I&&l(I));else{n.anchor=l(e);let D=I;for(;D;){if(D&&D.nodeType===8){if(D.data==="teleport start anchor")n.targetStart=D;else if(D.data==="teleport anchor"){n.targetAnchor=D,k._lpa=n.targetAnchor&&l(n.targetAnchor);break}}D=l(D)}n.targetAnchor||zh(k,n,f,p),v(I&&l(I),n,k,i,a,s,r)}fr(n,w)}else w&&n.shapeFlag&16&&T(e,n,e,l(e));return n.anchor&&l(n.anchor)}const Ym=Fh;function fr(e,n){const i=e.ctx;if(i&&i.ut){let a,s;for(n?(a=e.el,s=e.anchor):(a=e.targetStart,s=e.targetAnchor);a&&a!==s;)a.nodeType===1&&a.setAttribute("data-v-owner",i.uid),a=a.nextSibling;i.ut()}}function zh(e,n,i,a){const s=n.targetStart=i(""),r=n.targetAnchor=i("");return s[Nh]=r,e&&(a(s,e),a(r,e)),r}const Cs=Symbol("_leaveCb"),ar=Symbol("_enterCb");function Xm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ln(()=>{e.isMounted=!0}),Kh(()=>{e.isUnmounting=!0}),e}const En=[Function,Array],Uh={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:En,onEnter:En,onAfterEnter:En,onEnterCancelled:En,onBeforeLeave:En,onLeave:En,onAfterLeave:En,onLeaveCancelled:En,onBeforeAppear:En,onAppear:En,onAfterAppear:En,onAppearCancelled:En},Hh=e=>{const n=e.subTree;return n.component?Hh(n.component):n},Qm={name:"BaseTransition",props:Uh,setup(e,{slots:n}){const i=zc(),a=Xm();return()=>{const s=n.default&&jh(n.default(),!0);if(!s||!s.length)return;const r=Vh(s),l=dt(e),{mode:c}=l;if(a.isLeaving)return Dl(r);const h=Du(r);if(!h)return Dl(r);let p=sc(h,l,a,i,v=>p=v);h.type!==Qt&&da(h,p);let f=i.subTree&&Du(i.subTree);if(f&&f.type!==Qt&&!_i(f,h)&&Hh(i).type!==Qt){let v=sc(f,l,a,i);if(da(f,v),c==="out-in"&&h.type!==Qt)return a.isLeaving=!0,v.afterLeave=()=>{a.isLeaving=!1,i.job.flags&8||i.update(),delete v.afterLeave,f=void 0},Dl(r);c==="in-out"&&h.type!==Qt?v.delayLeave=(T,k,w)=>{const I=Zh(a,f);I[String(f.key)]=f,T[Cs]=()=>{k(),T[Cs]=void 0,delete p.delayedLeave,f=void 0},p.delayedLeave=()=>{w(),delete p.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return r}}};function Vh(e){let n=e[0];if(e.length>1){for(const i of e)if(i.type!==Qt){n=i;break}}return n}const ev=Qm;function Zh(e,n){const{leavingVNodes:i}=e;let a=i.get(n.type);return a||(a=Object.create(null),i.set(n.type,a)),a}function sc(e,n,i,a,s){const{appear:r,mode:l,persisted:c=!1,onBeforeEnter:h,onEnter:p,onAfterEnter:f,onEnterCancelled:v,onBeforeLeave:T,onLeave:k,onAfterLeave:w,onLeaveCancelled:I,onBeforeAppear:D,onAppear:A,onAfterAppear:b,onAppearCancelled:C}=n,M=String(e.key),x=Zh(i,e),E=(Q,le)=>{Q&&Zn(Q,a,9,le)},P=(Q,le)=>{const ke=le[1];E(Q,le),We(Q)?Q.every(me=>me.length<=1)&&ke():Q.length<=1&&ke()},X={mode:l,persisted:c,beforeEnter(Q){let le=h;if(!i.isMounted)if(r)le=D||h;else return;Q[Cs]&&Q[Cs](!0);const ke=x[M];ke&&_i(e,ke)&&ke.el[Cs]&&ke.el[Cs](),E(le,[Q])},enter(Q){let le=p,ke=f,me=v;if(!i.isMounted)if(r)le=A||p,ke=b||f,me=C||v;else return;let Le=!1;const ye=Q[ar]=be=>{Le||(Le=!0,be?E(me,[Q]):E(ke,[Q]),X.delayedLeave&&X.delayedLeave(),Q[ar]=void 0)};le?P(le,[Q,ye]):ye()},leave(Q,le){const ke=String(e.key);if(Q[ar]&&Q[ar](!0),i.isUnmounting)return le();E(T,[Q]);let me=!1;const Le=Q[Cs]=ye=>{me||(me=!0,le(),ye?E(I,[Q]):E(w,[Q]),Q[Cs]=void 0,x[ke]===e&&delete x[ke])};x[ke]=e,k?P(k,[Q,Le]):Le()},clone(Q){const le=sc(Q,n,i,a,s);return s&&s(le),le}};return X}function Dl(e){if(Zr(e))return e=ti(e),e.children=null,e}function Du(e){if(!Zr(e))return Bh(e.type)&&e.children?Vh(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:n,children:i}=e;if(i){if(n&16)return i[0];if(n&32&&st(i.default))return i.default()}}function da(e,n){e.shapeFlag&6&&e.component?(e.transition=n,da(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function jh(e,n=!1,i){let a=[],s=0;for(let r=0;r<e.length;r++){let l=e[r];const c=i==null?l.key:String(i)+String(l.key!=null?l.key:r);l.type===Ce?(l.patchFlag&128&&s++,a=a.concat(jh(l.children,n,c))):(n||l.type!==Qt)&&a.push(c!=null?ti(l,{key:c}):l)}if(s>1)for(let r=0;r<a.length;r++)a[r].patchFlag=-2;return a}function qh(e,n){return st(e)?Zt({name:e.name},n,{setup:e}):e}function Wh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xr=new WeakMap;function sa(e,n,i,a,s=!1){if(We(e)){e.forEach((w,I)=>sa(w,n&&(We(n)?n[I]:n),i,a,s));return}if(eo(a)&&!s){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&sa(e,n,i,a.component.subTree);return}const r=a.shapeFlag&4?Kr(a.component):a.el,l=s?null:r,{i:c,r:h}=e,p=n&&n.r,f=c.refs===Ct?c.refs={}:c.refs,v=c.setupState,T=dt(v),k=v===Ct?nh:w=>pt(T,w);if(p!=null&&p!==h){if(Ou(n),Dt(p))f[p]=null,k(p)&&(v[p]=null);else if(Pt(p)){p.value=null;const w=n;w.k&&(f[w.k]=null)}}if(st(h))ka(h,c,12,[l,f]);else{const w=Dt(h),I=Pt(h);if(w||I){const D=()=>{if(e.f){const A=w?k(h)?v[h]:f[h]:h.value;if(s)We(A)&&Sc(A,r);else if(We(A))A.includes(r)||A.push(r);else if(w)f[h]=[r],k(h)&&(v[h]=f[h]);else{const b=[r];h.value=b,e.k&&(f[e.k]=b)}}else w?(f[h]=l,k(h)&&(v[h]=l)):I&&(h.value=l,e.k&&(f[e.k]=l))};if(l){const A=()=>{D(),xr.delete(e)};A.id=-1,xr.set(e,A),ln(A,i)}else Ou(e),D()}}}function Ou(e){const n=xr.get(e);n&&(n.flags|=8,xr.delete(e))}zr().requestIdleCallback;zr().cancelIdleCallback;const eo=e=>!!e.type.__asyncLoader,Zr=e=>e.type.__isKeepAlive;function tv(e,n){Gh(e,"a",n)}function nv(e,n){Gh(e,"da",n)}function Gh(e,n,i=en){const a=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(jr(n,a,i),i){let s=i.parent;for(;s&&s.parent;)Zr(s.parent.vnode)&&sv(a,n,i,s),s=s.parent}}function sv(e,n,i,a){const s=jr(n,e,a,!0);Ds(()=>{Sc(a[n],s)},i)}function jr(e,n,i=en,a=!1){if(i){const s=i[e]||(i[e]=[]),r=n.__weh||(n.__weh=(...l)=>{Es();const c=wa(i),h=Zn(n,i,e,l);return c(),Ms(),h});return a?s.unshift(r):s.push(r),r}}const Ps=e=>(n,i=en)=>{(!pa||e==="sp")&&jr(e,(...a)=>n(...a),i)},iv=Ps("bm"),Ln=Ps("m"),ov=Ps("bu"),av=Ps("u"),Kh=Ps("bum"),Ds=Ps("um"),rv=Ps("sp"),lv=Ps("rtg"),cv=Ps("rtc");function uv(e,n=en){jr("ec",e,n)}const dv="components";function qr(e,n){return fv(dv,e,!0,n)||e}const hv=Symbol.for("v-ndc");function fv(e,n,i=!0,a=!1){const s=qt||en;if(s){const r=s.type;{const c=Yv(r,!1);if(c&&(c===n||c===Dn(n)||c===Br(Dn(n))))return r}const l=Ru(s[e]||r[e],n)||Ru(s.appContext[e],n);return!l&&a?r:l}}function Ru(e,n){return e&&(e[n]||e[Dn(n)]||e[Br(Dn(n))])}function De(e,n,i,a){let s;const r=i,l=We(e);if(l||Dt(e)){const c=l&&As(e);let h=!1,p=!1;c&&(h=!Cn(e),p=$s(e),e=Ur(e)),s=new Array(e.length);for(let f=0,v=e.length;f<v;f++)s[f]=n(h?p?so(Vn(e[f])):Vn(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let c=0;c<e;c++)s[c]=n(c+1,c,void 0,r)}else if(yt(e))if(e[Symbol.iterator])s=Array.from(e,(c,h)=>n(c,h,void 0,r));else{const c=Object.keys(e);s=new Array(c.length);for(let h=0,p=c.length;h<p;h++){const f=c[h];s[h]=n(e[f],f,h,r)}}else s=[];return s}function Uo(e,n,i={},a,s){if(qt.ce||qt.parent&&eo(qt.parent)&&qt.parent.ce){const p=Object.keys(i).length>0;return n!=="default"&&(i.name=n),g(),tt(Ce,null,[Oe("slot",i,a&&a())],p?-2:64)}let r=e[n];r&&r._c&&(r._d=!1),g();const l=r&&Jh(r(i)),c=i.key||l&&l.key,h=tt(Ce,{key:(c&&!Hn(c)?c:`_${n}`)+(!l&&a?"_fb":"")},l||(a?a():[]),l&&e._===1?64:-2);return r&&r._c&&(r._d=!0),h}function Jh(e){return e.some(n=>fa(n)?!(n.type===Qt||n.type===Ce&&!Jh(n.children)):!0)?e:null}const ic=e=>e?vf(e)?Kr(e):ic(e.parent):null,ia=Zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ic(e.parent),$root:e=>ic(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Xh(e),$forceUpdate:e=>e.f||(e.f=()=>{Oc(e.update)}),$nextTick:e=>e.n||(e.n=io.bind(e.proxy)),$watch:e=>Km.bind(e)}),Ol=(e,n)=>e!==Ct&&!e.__isScriptSetup&&pt(e,n),pv={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:i,setupState:a,data:s,props:r,accessCache:l,type:c,appContext:h}=e;if(n[0]!=="$"){const T=l[n];if(T!==void 0)switch(T){case 1:return a[n];case 2:return s[n];case 4:return i[n];case 3:return r[n]}else{if(Ol(a,n))return l[n]=1,a[n];if(s!==Ct&&pt(s,n))return l[n]=2,s[n];if(pt(r,n))return l[n]=3,r[n];if(i!==Ct&&pt(i,n))return l[n]=4,i[n];oc&&(l[n]=0)}}const p=ia[n];let f,v;if(p)return n==="$attrs"&&Xt(e.attrs,"get",""),p(e);if((f=c.__cssModules)&&(f=f[n]))return f;if(i!==Ct&&pt(i,n))return l[n]=4,i[n];if(v=h.config.globalProperties,pt(v,n))return v[n]},set({_:e},n,i){const{data:a,setupState:s,ctx:r}=e;return Ol(s,n)?(s[n]=i,!0):a!==Ct&&pt(a,n)?(a[n]=i,!0):pt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(r[n]=i,!0)},has({_:{data:e,setupState:n,accessCache:i,ctx:a,appContext:s,props:r,type:l}},c){let h;return!!(i[c]||e!==Ct&&c[0]!=="$"&&pt(e,c)||Ol(n,c)||pt(r,c)||pt(a,c)||pt(ia,c)||pt(s.config.globalProperties,c)||(h=l.__cssModules)&&h[c])},defineProperty(e,n,i){return i.get!=null?e._.accessCache[n]=0:pt(i,"value")&&this.set(e,n,i.value,null),Reflect.defineProperty(e,n,i)}};function Nu(e){return We(e)?e.reduce((n,i)=>(n[i]=null,n),{}):e}let oc=!0;function mv(e){const n=Xh(e),i=e.proxy,a=e.ctx;oc=!1,n.beforeCreate&&Bu(n.beforeCreate,e,"bc");const{data:s,computed:r,methods:l,watch:c,provide:h,inject:p,created:f,beforeMount:v,mounted:T,beforeUpdate:k,updated:w,activated:I,deactivated:D,beforeDestroy:A,beforeUnmount:b,destroyed:C,unmounted:M,render:x,renderTracked:E,renderTriggered:P,errorCaptured:X,serverPrefetch:Q,expose:le,inheritAttrs:ke,components:me,directives:Le,filters:ye}=n;if(p&&vv(p,a,null),l)for(const K in l){const Z=l[K];st(Z)&&(a[K]=Z.bind(i))}if(s){const K=s.call(i,i);yt(K)&&(e.data=ba(K))}if(oc=!0,r)for(const K in r){const Z=r[K],te=st(Z)?Z.bind(i,i):st(Z.get)?Z.get.bind(i,i):ns,j=!st(Z)&&st(Z.set)?Z.set.bind(i):ns,ce=se({get:te,set:j});Object.defineProperty(a,K,{enumerable:!0,configurable:!0,get:()=>ce.value,set:Y=>ce.value=Y})}if(c)for(const K in c)Yh(c[K],a,i,K);if(h){const K=st(h)?h.call(i):h;Reflect.ownKeys(K).forEach(Z=>{hr(Z,K[Z])})}f&&Bu(f,e,"c");function de(K,Z){We(Z)?Z.forEach(te=>K(te.bind(i))):Z&&K(Z.bind(i))}if(de(iv,v),de(Ln,T),de(ov,k),de(av,w),de(tv,I),de(nv,D),de(uv,X),de(cv,E),de(lv,P),de(Kh,b),de(Ds,M),de(rv,Q),We(le))if(le.length){const K=e.exposed||(e.exposed={});le.forEach(Z=>{Object.defineProperty(K,Z,{get:()=>i[Z],set:te=>i[Z]=te,enumerable:!0})})}else e.exposed||(e.exposed={});x&&e.render===ns&&(e.render=x),ke!=null&&(e.inheritAttrs=ke),me&&(e.components=me),Le&&(e.directives=Le),Q&&Wh(e)}function vv(e,n,i=ns){We(e)&&(e=ac(e));for(const a in e){const s=e[a];let r;yt(s)?"default"in s?r=$n(s.from||a,s.default,!0):r=$n(s.from||a):r=$n(s),Pt(r)?Object.defineProperty(n,a,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):n[a]=r}}function Bu(e,n,i){Zn(We(e)?e.map(a=>a.bind(n.proxy)):e.bind(n.proxy),n,i)}function Yh(e,n,i,a){let s=a.includes(".")?Rh(i,a):()=>i[a];if(Dt(e)){const r=n[e];st(r)&&qe(s,r)}else if(st(e))qe(s,e.bind(i));else if(yt(e))if(We(e))e.forEach(r=>Yh(r,n,i,a));else{const r=st(e.handler)?e.handler.bind(i):n[e.handler];st(r)&&qe(s,r,e)}}function Xh(e){const n=e.type,{mixins:i,extends:a}=n,{mixins:s,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,c=r.get(n);let h;return c?h=c:!s.length&&!i&&!a?h=n:(h={},s.length&&s.forEach(p=>Sr(h,p,l,!0)),Sr(h,n,l)),yt(n)&&r.set(n,h),h}function Sr(e,n,i,a=!1){const{mixins:s,extends:r}=n;r&&Sr(e,r,i,!0),s&&s.forEach(l=>Sr(e,l,i,!0));for(const l in n)if(!(a&&l==="expose")){const c=gv[l]||i&&i[l];e[l]=c?c(e[l],n[l]):n[l]}return e}const gv={data:Fu,props:zu,emits:zu,methods:Wo,computed:Wo,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:Wo,directives:Wo,watch:yv,provide:Fu,inject:_v};function Fu(e,n){return n?e?function(){return Zt(st(e)?e.call(this,this):e,st(n)?n.call(this,this):n)}:n:e}function _v(e,n){return Wo(ac(e),ac(n))}function ac(e){if(We(e)){const n={};for(let i=0;i<e.length;i++)n[e[i]]=e[i];return n}return e}function rn(e,n){return e?[...new Set([].concat(e,n))]:n}function Wo(e,n){return e?Zt(Object.create(null),e,n):n}function zu(e,n){return e?We(e)&&We(n)?[...new Set([...e,...n])]:Zt(Object.create(null),Nu(e),Nu(n??{})):n}function yv(e,n){if(!e)return n;if(!n)return e;const i=Zt(Object.create(null),e);for(const a in n)i[a]=rn(e[a],n[a]);return i}function Qh(){return{app:null,config:{isNativeTag:nh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bv=0;function kv(e,n){return function(a,s=null){st(a)||(a=Zt({},a)),s!=null&&!yt(s)&&(s=null);const r=Qh(),l=new WeakSet,c=[];let h=!1;const p=r.app={_uid:bv++,_component:a,_props:s,_container:null,_context:r,_instance:null,version:Qv,get config(){return r.config},set config(f){},use(f,...v){return l.has(f)||(f&&st(f.install)?(l.add(f),f.install(p,...v)):st(f)&&(l.add(f),f(p,...v))),p},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),p},component(f,v){return v?(r.components[f]=v,p):r.components[f]},directive(f,v){return v?(r.directives[f]=v,p):r.directives[f]},mount(f,v,T){if(!h){const k=p._ceVNode||Oe(a,s);return k.appContext=r,T===!0?T="svg":T===!1&&(T=void 0),e(k,f,T),h=!0,p._container=f,f.__vue_app__=p,Kr(k.component)}},onUnmount(f){c.push(f)},unmount(){h&&(Zn(c,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(f,v){return r.provides[f]=v,p},runWithContext(f){const v=xi;xi=p;try{return f()}finally{xi=v}}};return p}}let xi=null;const wv=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${Dn(n)}Modifiers`]||e[`${ii(n)}Modifiers`];function Cv(e,n,...i){if(e.isUnmounted)return;const a=e.vnode.props||Ct;let s=i;const r=n.startsWith("update:"),l=r&&wv(a,n.slice(7));l&&(l.trim&&(s=i.map(f=>Dt(f)?f.trim():f)),l.number&&(s=i.map(Fr)));let c,h=a[c=Al(n)]||a[c=Al(Dn(n))];!h&&r&&(h=a[c=Al(ii(n))]),h&&Zn(h,e,6,s);const p=a[c+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Zn(p,e,6,s)}}const Lv=new WeakMap;function ef(e,n,i=!1){const a=i?Lv:n.emitsCache,s=a.get(e);if(s!==void 0)return s;const r=e.emits;let l={},c=!1;if(!st(e)){const h=p=>{const f=ef(p,n,!0);f&&(c=!0,Zt(l,f))};!i&&n.mixins.length&&n.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!r&&!c?(yt(e)&&a.set(e,null),null):(We(r)?r.forEach(h=>l[h]=null):Zt(l,r),yt(e)&&a.set(e,l),l)}function Wr(e,n){return!e||!Or(n)?!1:(n=n.slice(2).replace(/Once$/,""),pt(e,n[0].toLowerCase()+n.slice(1))||pt(e,ii(n))||pt(e,n))}function Uu(e){const{type:n,vnode:i,proxy:a,withProxy:s,propsOptions:[r],slots:l,attrs:c,emit:h,render:p,renderCache:f,props:v,data:T,setupState:k,ctx:w,inheritAttrs:I}=e,D=Lr(e);let A,b;try{if(i.shapeFlag&4){const M=s||a,x=M;A=Xn(p.call(x,M,f,v,k,T,w)),b=c}else{const M=n;A=Xn(M.length>1?M(v,{attrs:c,slots:l,emit:h}):M(v,null)),b=n.props?c:xv(c)}}catch(M){oa.length=0,Vr(M,e,1),A=Oe(Qt)}let C=A;if(b&&I!==!1){const M=Object.keys(b),{shapeFlag:x}=C;M.length&&x&7&&(r&&M.some(xc)&&(b=Sv(b,r)),C=ti(C,b,!1,!0))}return i.dirs&&(C=ti(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(i.dirs):i.dirs),i.transition&&da(C,i.transition),A=C,Lr(D),A}const xv=e=>{let n;for(const i in e)(i==="class"||i==="style"||Or(i))&&((n||(n={}))[i]=e[i]);return n},Sv=(e,n)=>{const i={};for(const a in e)(!xc(a)||!(a.slice(9)in n))&&(i[a]=e[a]);return i};function Tv(e,n,i){const{props:a,children:s,component:r}=e,{props:l,children:c,patchFlag:h}=n,p=r.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return a?Hu(a,l,p):!!l;if(h&8){const f=n.dynamicProps;for(let v=0;v<f.length;v++){const T=f[v];if(l[T]!==a[T]&&!Wr(p,T))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:a===l?!1:a?l?Hu(a,l,p):!0:!!l;return!1}function Hu(e,n,i){const a=Object.keys(n);if(a.length!==Object.keys(e).length)return!0;for(let s=0;s<a.length;s++){const r=a[s];if(n[r]!==e[r]&&!Wr(i,r))return!0}return!1}function Iv({vnode:e,parent:n},i){for(;n;){const a=n.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=n.vnode).el=i,n=n.parent;else break}}const tf={},nf=()=>Object.create(tf),sf=e=>Object.getPrototypeOf(e)===tf;function Av(e,n,i,a=!1){const s={},r=nf();e.propsDefaults=Object.create(null),of(e,n,s,r);for(const l in e.propsOptions[0])l in s||(s[l]=void 0);i?e.props=a?s:Th(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Ev(e,n,i,a){const{props:s,attrs:r,vnode:{patchFlag:l}}=e,c=dt(s),[h]=e.propsOptions;let p=!1;if((a||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let v=0;v<f.length;v++){let T=f[v];if(Wr(e.emitsOptions,T))continue;const k=n[T];if(h)if(pt(r,T))k!==r[T]&&(r[T]=k,p=!0);else{const w=Dn(T);s[w]=rc(h,c,w,k,e,!1)}else k!==r[T]&&(r[T]=k,p=!0)}}}else{of(e,n,s,r)&&(p=!0);let f;for(const v in c)(!n||!pt(n,v)&&((f=ii(v))===v||!pt(n,f)))&&(h?i&&(i[v]!==void 0||i[f]!==void 0)&&(s[v]=rc(h,c,v,void 0,e,!0)):delete s[v]);if(r!==c)for(const v in r)(!n||!pt(n,v))&&(delete r[v],p=!0)}p&&xs(e.attrs,"set","")}function of(e,n,i,a){const[s,r]=e.propsOptions;let l=!1,c;if(n)for(let h in n){if(Qo(h))continue;const p=n[h];let f;s&&pt(s,f=Dn(h))?!r||!r.includes(f)?i[f]=p:(c||(c={}))[f]=p:Wr(e.emitsOptions,h)||(!(h in a)||p!==a[h])&&(a[h]=p,l=!0)}if(r){const h=dt(i),p=c||Ct;for(let f=0;f<r.length;f++){const v=r[f];i[v]=rc(s,h,v,p[v],e,!pt(p,v))}}return l}function rc(e,n,i,a,s,r){const l=e[i];if(l!=null){const c=pt(l,"default");if(c&&a===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&st(h)){const{propsDefaults:p}=s;if(i in p)a=p[i];else{const f=wa(s);a=p[i]=h.call(null,n),f()}}else a=h;s.ce&&s.ce._setProp(i,a)}l[0]&&(r&&!c?a=!1:l[1]&&(a===""||a===ii(i))&&(a=!0))}return a}const Mv=new WeakMap;function af(e,n,i=!1){const a=i?Mv:n.propsCache,s=a.get(e);if(s)return s;const r=e.props,l={},c=[];let h=!1;if(!st(e)){const f=v=>{h=!0;const[T,k]=af(v,n,!0);Zt(l,T),k&&c.push(...k)};!i&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!h)return yt(e)&&a.set(e,Yi),Yi;if(We(r))for(let f=0;f<r.length;f++){const v=Dn(r[f]);Vu(v)&&(l[v]=Ct)}else if(r)for(const f in r){const v=Dn(f);if(Vu(v)){const T=r[f],k=l[v]=We(T)||st(T)?{type:T}:Zt({},T),w=k.type;let I=!1,D=!0;if(We(w))for(let A=0;A<w.length;++A){const b=w[A],C=st(b)&&b.name;if(C==="Boolean"){I=!0;break}else C==="String"&&(D=!1)}else I=st(w)&&w.name==="Boolean";k[0]=I,k[1]=D,(I||pt(k,"default"))&&c.push(v)}}const p=[l,c];return yt(e)&&a.set(e,p),p}function Vu(e){return e[0]!=="$"&&!Qo(e)}const Rc=e=>e==="_"||e==="_ctx"||e==="$stable",Nc=e=>We(e)?e.map(Xn):[Xn(e)],$v=(e,n,i)=>{if(n._n)return n;const a=Ge((...s)=>Nc(n(...s)),i);return a._c=!1,a},rf=(e,n,i)=>{const a=e._ctx;for(const s in e){if(Rc(s))continue;const r=e[s];if(st(r))n[s]=$v(s,r,a);else if(r!=null){const l=Nc(r);n[s]=()=>l}}},lf=(e,n)=>{const i=Nc(n);e.slots.default=()=>i},cf=(e,n,i)=>{for(const a in n)(i||!Rc(a))&&(e[a]=n[a])},Pv=(e,n,i)=>{const a=e.slots=nf();if(e.vnode.shapeFlag&32){const s=n._;s?(cf(a,n,i),i&&ah(a,"_",s,!0)):rf(n,a)}else n&&lf(e,n)},Dv=(e,n,i)=>{const{vnode:a,slots:s}=e;let r=!0,l=Ct;if(a.shapeFlag&32){const c=n._;c?i&&c===1?r=!1:cf(s,n,i):(r=!n.$stable,rf(n,s)),l=n}else n&&(lf(e,n),l={default:1});if(r)for(const c in s)!Rc(c)&&l[c]==null&&delete s[c]},ln=Fv;function Ov(e){return Rv(e)}function Rv(e,n){const i=zr();i.__VUE__=!0;const{insert:a,remove:s,patchProp:r,createElement:l,createText:c,createComment:h,setText:p,setElementText:f,parentNode:v,nextSibling:T,setScopeId:k=ns,insertStaticContent:w}=e,I=(R,z,q,ae=null,he=null,fe=null,Ie=void 0,Ae=null,xe=!!z.dynamicChildren)=>{if(R===z)return;R&&!_i(R,z)&&(ae=F(R),Y(R,he,fe,!0),R=null),z.patchFlag===-2&&(xe=!1,z.dynamicChildren=null);const{type:ge,ref:Ue,shapeFlag:Pe}=z;switch(ge){case Gr:D(R,z,q,ae);break;case Qt:A(R,z,q,ae);break;case pr:R==null&&b(z,q,ae,Ie);break;case Ce:me(R,z,q,ae,he,fe,Ie,Ae,xe);break;default:Pe&1?x(R,z,q,ae,he,fe,Ie,Ae,xe):Pe&6?Le(R,z,q,ae,he,fe,Ie,Ae,xe):(Pe&64||Pe&128)&&ge.process(R,z,q,ae,he,fe,Ie,Ae,xe,W)}Ue!=null&&he?sa(Ue,R&&R.ref,fe,z||R,!z):Ue==null&&R&&R.ref!=null&&sa(R.ref,null,fe,R,!0)},D=(R,z,q,ae)=>{if(R==null)a(z.el=c(z.children),q,ae);else{const he=z.el=R.el;z.children!==R.children&&p(he,z.children)}},A=(R,z,q,ae)=>{R==null?a(z.el=h(z.children||""),q,ae):z.el=R.el},b=(R,z,q,ae)=>{[R.el,R.anchor]=w(R.children,z,q,ae,R.el,R.anchor)},C=({el:R,anchor:z},q,ae)=>{let he;for(;R&&R!==z;)he=T(R),a(R,q,ae),R=he;a(z,q,ae)},M=({el:R,anchor:z})=>{let q;for(;R&&R!==z;)q=T(R),s(R),R=q;s(z)},x=(R,z,q,ae,he,fe,Ie,Ae,xe)=>{if(z.type==="svg"?Ie="svg":z.type==="math"&&(Ie="mathml"),R==null)E(z,q,ae,he,fe,Ie,Ae,xe);else{const ge=R.el&&R.el._isVueCE?R.el:null;try{ge&&ge._beginPatch(),Q(R,z,he,fe,Ie,Ae,xe)}finally{ge&&ge._endPatch()}}},E=(R,z,q,ae,he,fe,Ie,Ae)=>{let xe,ge;const{props:Ue,shapeFlag:Pe,transition:He,dirs:Ke}=R;if(xe=R.el=l(R.type,fe,Ue&&Ue.is,Ue),Pe&8?f(xe,R.children):Pe&16&&X(R.children,xe,null,ae,he,Rl(R,fe),Ie,Ae),Ke&&fi(R,null,ae,"created"),P(xe,R,R.scopeId,Ie,ae),Ue){for(const Qe in Ue)Qe!=="value"&&!Qo(Qe)&&r(xe,Qe,null,Ue[Qe],fe,ae);"value"in Ue&&r(xe,"value",null,Ue.value,fe),(ge=Ue.onVnodeBeforeMount)&&Kn(ge,ae,R)}Ke&&fi(R,null,ae,"beforeMount");const Je=Nv(he,He);Je&&He.beforeEnter(xe),a(xe,z,q),((ge=Ue&&Ue.onVnodeMounted)||Je||Ke)&&ln(()=>{ge&&Kn(ge,ae,R),Je&&He.enter(xe),Ke&&fi(R,null,ae,"mounted")},he)},P=(R,z,q,ae,he)=>{if(q&&k(R,q),ae)for(let fe=0;fe<ae.length;fe++)k(R,ae[fe]);if(he){let fe=he.subTree;if(z===fe||hf(fe.type)&&(fe.ssContent===z||fe.ssFallback===z)){const Ie=he.vnode;P(R,Ie,Ie.scopeId,Ie.slotScopeIds,he.parent)}}},X=(R,z,q,ae,he,fe,Ie,Ae,xe=0)=>{for(let ge=xe;ge<R.length;ge++){const Ue=R[ge]=Ae?Gs(R[ge]):Xn(R[ge]);I(null,Ue,z,q,ae,he,fe,Ie,Ae)}},Q=(R,z,q,ae,he,fe,Ie)=>{const Ae=z.el=R.el;let{patchFlag:xe,dynamicChildren:ge,dirs:Ue}=z;xe|=R.patchFlag&16;const Pe=R.props||Ct,He=z.props||Ct;let Ke;if(q&&pi(q,!1),(Ke=He.onVnodeBeforeUpdate)&&Kn(Ke,q,z,R),Ue&&fi(z,R,q,"beforeUpdate"),q&&pi(q,!0),(Pe.innerHTML&&He.innerHTML==null||Pe.textContent&&He.textContent==null)&&f(Ae,""),ge?le(R.dynamicChildren,ge,Ae,q,ae,Rl(z,he),fe):Ie||Z(R,z,Ae,null,q,ae,Rl(z,he),fe,!1),xe>0){if(xe&16)ke(Ae,Pe,He,q,he);else if(xe&2&&Pe.class!==He.class&&r(Ae,"class",null,He.class,he),xe&4&&r(Ae,"style",Pe.style,He.style,he),xe&8){const Je=z.dynamicProps;for(let Qe=0;Qe<Je.length;Qe++){const je=Je[Qe],mt=Pe[je],St=He[je];(St!==mt||je==="value")&&r(Ae,je,mt,St,he,q)}}xe&1&&R.children!==z.children&&f(Ae,z.children)}else!Ie&&ge==null&&ke(Ae,Pe,He,q,he);((Ke=He.onVnodeUpdated)||Ue)&&ln(()=>{Ke&&Kn(Ke,q,z,R),Ue&&fi(z,R,q,"updated")},ae)},le=(R,z,q,ae,he,fe,Ie)=>{for(let Ae=0;Ae<z.length;Ae++){const xe=R[Ae],ge=z[Ae],Ue=xe.el&&(xe.type===Ce||!_i(xe,ge)||xe.shapeFlag&198)?v(xe.el):q;I(xe,ge,Ue,null,ae,he,fe,Ie,!0)}},ke=(R,z,q,ae,he)=>{if(z!==q){if(z!==Ct)for(const fe in z)!Qo(fe)&&!(fe in q)&&r(R,fe,z[fe],null,he,ae);for(const fe in q){if(Qo(fe))continue;const Ie=q[fe],Ae=z[fe];Ie!==Ae&&fe!=="value"&&r(R,fe,Ae,Ie,he,ae)}"value"in q&&r(R,"value",z.value,q.value,he)}},me=(R,z,q,ae,he,fe,Ie,Ae,xe)=>{const ge=z.el=R?R.el:c(""),Ue=z.anchor=R?R.anchor:c("");let{patchFlag:Pe,dynamicChildren:He,slotScopeIds:Ke}=z;Ke&&(Ae=Ae?Ae.concat(Ke):Ke),R==null?(a(ge,q,ae),a(Ue,q,ae),X(z.children||[],q,Ue,he,fe,Ie,Ae,xe)):Pe>0&&Pe&64&&He&&R.dynamicChildren&&R.dynamicChildren.length===He.length?(le(R.dynamicChildren,He,q,he,fe,Ie,Ae),(z.key!=null||he&&z===he.subTree)&&Bc(R,z,!0)):Z(R,z,q,Ue,he,fe,Ie,Ae,xe)},Le=(R,z,q,ae,he,fe,Ie,Ae,xe)=>{z.slotScopeIds=Ae,R==null?z.shapeFlag&512?he.ctx.activate(z,q,ae,Ie,xe):ye(z,q,ae,he,fe,Ie,xe):be(R,z,xe)},ye=(R,z,q,ae,he,fe,Ie)=>{const Ae=R.component=qv(R,ae,he);if(Zr(R)&&(Ae.ctx.renderer=W),Wv(Ae,!1,Ie),Ae.asyncDep){if(he&&he.registerDep(Ae,de,Ie),!R.el){const xe=Ae.subTree=Oe(Qt);A(null,xe,z,q),R.placeholder=xe.el}}else de(Ae,R,z,q,he,fe,Ie)},be=(R,z,q)=>{const ae=z.component=R.component;if(Tv(R,z,q))if(ae.asyncDep&&!ae.asyncResolved){K(ae,z,q);return}else ae.next=z,ae.update();else z.el=R.el,ae.vnode=z},de=(R,z,q,ae,he,fe,Ie)=>{const Ae=()=>{if(R.isMounted){let{next:Pe,bu:He,u:Ke,parent:Je,vnode:Qe}=R;{const gt=uf(R);if(gt){Pe&&(Pe.el=Qe.el,K(R,Pe,Ie)),gt.asyncDep.then(()=>{R.isUnmounted||Ae()});return}}let je=Pe,mt;pi(R,!1),Pe?(Pe.el=Qe.el,K(R,Pe,Ie)):Pe=Qe,He&&dr(He),(mt=Pe.props&&Pe.props.onVnodeBeforeUpdate)&&Kn(mt,Je,Pe,Qe),pi(R,!0);const St=Uu(R),Lt=R.subTree;R.subTree=St,I(Lt,St,v(Lt.el),F(Lt),R,he,fe),Pe.el=St.el,je===null&&Iv(R,St.el),Ke&&ln(Ke,he),(mt=Pe.props&&Pe.props.onVnodeUpdated)&&ln(()=>Kn(mt,Je,Pe,Qe),he)}else{let Pe;const{el:He,props:Ke}=z,{bm:Je,m:Qe,parent:je,root:mt,type:St}=R,Lt=eo(z);pi(R,!1),Je&&dr(Je),!Lt&&(Pe=Ke&&Ke.onVnodeBeforeMount)&&Kn(Pe,je,z),pi(R,!0);{mt.ce&&mt.ce._def.shadowRoot!==!1&&mt.ce._injectChildStyle(St);const gt=R.subTree=Uu(R);I(null,gt,q,ae,R,he,fe),z.el=gt.el}if(Qe&&ln(Qe,he),!Lt&&(Pe=Ke&&Ke.onVnodeMounted)){const gt=z;ln(()=>Kn(Pe,je,gt),he)}(z.shapeFlag&256||je&&eo(je.vnode)&&je.vnode.shapeFlag&256)&&R.a&&ln(R.a,he),R.isMounted=!0,z=q=ae=null}};R.scope.on();const xe=R.effect=new fh(Ae);R.scope.off();const ge=R.update=xe.run.bind(xe),Ue=R.job=xe.runIfDirty.bind(xe);Ue.i=R,Ue.id=R.uid,xe.scheduler=()=>Oc(Ue),pi(R,!0),ge()},K=(R,z,q)=>{z.component=R;const ae=R.vnode.props;R.vnode=z,R.next=null,Ev(R,z.props,ae,q),Dv(R,z.children,q),Es(),Eu(R),Ms()},Z=(R,z,q,ae,he,fe,Ie,Ae,xe=!1)=>{const ge=R&&R.children,Ue=R?R.shapeFlag:0,Pe=z.children,{patchFlag:He,shapeFlag:Ke}=z;if(He>0){if(He&128){j(ge,Pe,q,ae,he,fe,Ie,Ae,xe);return}else if(He&256){te(ge,Pe,q,ae,he,fe,Ie,Ae,xe);return}}Ke&8?(Ue&16&&Me(ge,he,fe),Pe!==ge&&f(q,Pe)):Ue&16?Ke&16?j(ge,Pe,q,ae,he,fe,Ie,Ae,xe):Me(ge,he,fe,!0):(Ue&8&&f(q,""),Ke&16&&X(Pe,q,ae,he,fe,Ie,Ae,xe))},te=(R,z,q,ae,he,fe,Ie,Ae,xe)=>{R=R||Yi,z=z||Yi;const ge=R.length,Ue=z.length,Pe=Math.min(ge,Ue);let He;for(He=0;He<Pe;He++){const Ke=z[He]=xe?Gs(z[He]):Xn(z[He]);I(R[He],Ke,q,null,he,fe,Ie,Ae,xe)}ge>Ue?Me(R,he,fe,!0,!1,Pe):X(z,q,ae,he,fe,Ie,Ae,xe,Pe)},j=(R,z,q,ae,he,fe,Ie,Ae,xe)=>{let ge=0;const Ue=z.length;let Pe=R.length-1,He=Ue-1;for(;ge<=Pe&&ge<=He;){const Ke=R[ge],Je=z[ge]=xe?Gs(z[ge]):Xn(z[ge]);if(_i(Ke,Je))I(Ke,Je,q,null,he,fe,Ie,Ae,xe);else break;ge++}for(;ge<=Pe&&ge<=He;){const Ke=R[Pe],Je=z[He]=xe?Gs(z[He]):Xn(z[He]);if(_i(Ke,Je))I(Ke,Je,q,null,he,fe,Ie,Ae,xe);else break;Pe--,He--}if(ge>Pe){if(ge<=He){const Ke=He+1,Je=Ke<Ue?z[Ke].el:ae;for(;ge<=He;)I(null,z[ge]=xe?Gs(z[ge]):Xn(z[ge]),q,Je,he,fe,Ie,Ae,xe),ge++}}else if(ge>He)for(;ge<=Pe;)Y(R[ge],he,fe,!0),ge++;else{const Ke=ge,Je=ge,Qe=new Map;for(ge=Je;ge<=He;ge++){const bt=z[ge]=xe?Gs(z[ge]):Xn(z[ge]);bt.key!=null&&Qe.set(bt.key,ge)}let je,mt=0;const St=He-Je+1;let Lt=!1,gt=0;const sn=new Array(St);for(ge=0;ge<St;ge++)sn[ge]=0;for(ge=Ke;ge<=Pe;ge++){const bt=R[ge];if(mt>=St){Y(bt,he,fe,!0);continue}let nt;if(bt.key!=null)nt=Qe.get(bt.key);else for(je=Je;je<=He;je++)if(sn[je-Je]===0&&_i(bt,z[je])){nt=je;break}nt===void 0?Y(bt,he,fe,!0):(sn[nt-Je]=ge+1,nt>=gt?gt=nt:Lt=!0,I(bt,z[nt],q,null,he,fe,Ie,Ae,xe),mt++)}const jt=Lt?Bv(sn):Yi;for(je=jt.length-1,ge=St-1;ge>=0;ge--){const bt=Je+ge,nt=z[bt],Et=z[bt+1],kt=bt+1<Ue?Et.el||df(Et):ae;sn[ge]===0?I(null,nt,q,kt,he,fe,Ie,Ae,xe):Lt&&(je<0||ge!==jt[je]?ce(nt,q,kt,2):je--)}}},ce=(R,z,q,ae,he=null)=>{const{el:fe,type:Ie,transition:Ae,children:xe,shapeFlag:ge}=R;if(ge&6){ce(R.component.subTree,z,q,ae);return}if(ge&128){R.suspense.move(z,q,ae);return}if(ge&64){Ie.move(R,z,q,W);return}if(Ie===Ce){a(fe,z,q);for(let Pe=0;Pe<xe.length;Pe++)ce(xe[Pe],z,q,ae);a(R.anchor,z,q);return}if(Ie===pr){C(R,z,q);return}if(ae!==2&&ge&1&&Ae)if(ae===0)Ae.beforeEnter(fe),a(fe,z,q),ln(()=>Ae.enter(fe),he);else{const{leave:Pe,delayLeave:He,afterLeave:Ke}=Ae,Je=()=>{R.ctx.isUnmounted?s(fe):a(fe,z,q)},Qe=()=>{fe._isLeaving&&fe[Cs](!0),Pe(fe,()=>{Je(),Ke&&Ke()})};He?He(fe,Je,Qe):Qe()}else a(fe,z,q)},Y=(R,z,q,ae=!1,he=!1)=>{const{type:fe,props:Ie,ref:Ae,children:xe,dynamicChildren:ge,shapeFlag:Ue,patchFlag:Pe,dirs:He,cacheIndex:Ke}=R;if(Pe===-2&&(he=!1),Ae!=null&&(Es(),sa(Ae,null,q,R,!0),Ms()),Ke!=null&&(z.renderCache[Ke]=void 0),Ue&256){z.ctx.deactivate(R);return}const Je=Ue&1&&He,Qe=!eo(R);let je;if(Qe&&(je=Ie&&Ie.onVnodeBeforeUnmount)&&Kn(je,z,R),Ue&6)Ee(R.component,q,ae);else{if(Ue&128){R.suspense.unmount(q,ae);return}Je&&fi(R,null,z,"beforeUnmount"),Ue&64?R.type.remove(R,z,q,W,ae):ge&&!ge.hasOnce&&(fe!==Ce||Pe>0&&Pe&64)?Me(ge,z,q,!1,!0):(fe===Ce&&Pe&384||!he&&Ue&16)&&Me(xe,z,q),ae&&ve(R)}(Qe&&(je=Ie&&Ie.onVnodeUnmounted)||Je)&&ln(()=>{je&&Kn(je,z,R),Je&&fi(R,null,z,"unmounted")},q)},ve=R=>{const{type:z,el:q,anchor:ae,transition:he}=R;if(z===Ce){Se(q,ae);return}if(z===pr){M(R);return}const fe=()=>{s(q),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(R.shapeFlag&1&&he&&!he.persisted){const{leave:Ie,delayLeave:Ae}=he,xe=()=>Ie(q,fe);Ae?Ae(R.el,fe,xe):xe()}else fe()},Se=(R,z)=>{let q;for(;R!==z;)q=T(R),s(R),R=q;s(z)},Ee=(R,z,q)=>{const{bum:ae,scope:he,job:fe,subTree:Ie,um:Ae,m:xe,a:ge}=R;Zu(xe),Zu(ge),ae&&dr(ae),he.stop(),fe&&(fe.flags|=8,Y(Ie,R,z,q)),Ae&&ln(Ae,z),ln(()=>{R.isUnmounted=!0},z)},Me=(R,z,q,ae=!1,he=!1,fe=0)=>{for(let Ie=fe;Ie<R.length;Ie++)Y(R[Ie],z,q,ae,he)},F=R=>{if(R.shapeFlag&6)return F(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const z=T(R.anchor||R.el),q=z&&z[Nh];return q?T(q):z};let J=!1;const V=(R,z,q)=>{let ae;R==null?z._vnode&&(Y(z._vnode,null,null,!0),ae=z._vnode.component):I(z._vnode||null,R,z,null,null,null,q),z._vnode=R,J||(J=!0,Eu(ae),$h(),J=!1)},W={p:I,um:Y,m:ce,r:ve,mt:ye,mc:X,pc:Z,pbc:le,n:F,o:e};return{render:V,hydrate:void 0,createApp:kv(V)}}function Rl({type:e,props:n},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:i}function pi({effect:e,job:n},i){i?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function Nv(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Bc(e,n,i=!1){const a=e.children,s=n.children;if(We(a)&&We(s))for(let r=0;r<a.length;r++){const l=a[r];let c=s[r];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[r]=Gs(s[r]),c.el=l.el),!i&&c.patchFlag!==-2&&Bc(l,c)),c.type===Gr&&(c.patchFlag!==-1?c.el=l.el:c.__elIndex=r+(e.type===Ce?1:0)),c.type===Qt&&!c.el&&(c.el=l.el)}}function Bv(e){const n=e.slice(),i=[0];let a,s,r,l,c;const h=e.length;for(a=0;a<h;a++){const p=e[a];if(p!==0){if(s=i[i.length-1],e[s]<p){n[a]=s,i.push(a);continue}for(r=0,l=i.length-1;r<l;)c=r+l>>1,e[i[c]]<p?r=c+1:l=c;p<e[i[r]]&&(r>0&&(n[a]=i[r-1]),i[r]=a)}}for(r=i.length,l=i[r-1];r-- >0;)i[r]=l,l=n[l];return i}function uf(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:uf(n)}function Zu(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function df(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?df(n.subTree):null}const hf=e=>e.__isSuspense;function Fv(e,n){n&&n.pendingBranch?We(e)?n.effects.push(...e):n.effects.push(e):jm(e)}const Ce=Symbol.for("v-fgt"),Gr=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),pr=Symbol.for("v-stc"),oa=[];let wn=null;function g(e=!1){oa.push(wn=e?null:[])}function zv(){oa.pop(),wn=oa[oa.length-1]||null}let ha=1;function Tr(e,n=!1){ha+=e,e<0&&wn&&n&&(wn.hasOnce=!0)}function ff(e){return e.dynamicChildren=ha>0?wn||Yi:null,zv(),ha>0&&wn&&wn.push(e),e}function _(e,n,i,a,s,r){return ff(u(e,n,i,a,s,r,!0))}function tt(e,n,i,a,s){return ff(Oe(e,n,i,a,s,!0))}function fa(e){return e?e.__v_isVNode===!0:!1}function _i(e,n){return e.type===n.type&&e.key===n.key}const pf=({key:e})=>e??null,mr=({ref:e,ref_key:n,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Dt(e)||Pt(e)||st(e)?{i:qt,r:e,k:n,f:!!i}:e:null);function u(e,n=null,i=null,a=0,s=null,r=e===Ce?0:1,l=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&pf(n),ref:n&&mr(n),scopeId:Dh,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:qt};return c?(Fc(h,i),r&128&&e.normalize(h)):i&&(h.shapeFlag|=Dt(i)?8:16),ha>0&&!l&&wn&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&wn.push(h),h}const Oe=Uv;function Uv(e,n=null,i=null,a=0,s=null,r=!1){if((!e||e===hv)&&(e=Qt),fa(e)){const c=ti(e,n,!0);return i&&Fc(c,i),ha>0&&!r&&wn&&(c.shapeFlag&6?wn[wn.indexOf(e)]=c:wn.push(c)),c.patchFlag=-2,c}if(Xv(e)&&(e=e.__vccOpts),n){n=Hv(n);let{class:c,style:h}=n;c&&!Dt(c)&&(n.class=Fe(c)),yt(h)&&(Hr(h)&&!We(h)&&(h=Zt({},h)),n.style=nn(h))}const l=Dt(e)?1:hf(e)?128:Bh(e)?64:yt(e)?4:st(e)?2:0;return u(e,n,i,a,s,l,r,!0)}function Hv(e){return e?Hr(e)||sf(e)?Zt({},e):e:null}function ti(e,n,i=!1,a=!1){const{props:s,ref:r,patchFlag:l,children:c,transition:h}=e,p=n?mf(s||{},n):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&pf(p),ref:n&&n.ref?i&&r?We(r)?r.concat(mr(n)):[r,mr(n)]:mr(n):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Ce?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ti(e.ssContent),ssFallback:e.ssFallback&&ti(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&a&&da(f,h.clone(f)),f}function Ve(e=" ",n=0){return Oe(Gr,null,e,n)}function Vv(e,n){const i=Oe(pr,null,e);return i.staticCount=n,i}function B(e="",n=!1){return n?(g(),tt(Qt,null,e)):Oe(Qt,null,e)}function Xn(e){return e==null||typeof e=="boolean"?Oe(Qt):We(e)?Oe(Ce,null,e.slice()):fa(e)?Gs(e):Oe(Gr,null,String(e))}function Gs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ti(e)}function Fc(e,n){let i=0;const{shapeFlag:a}=e;if(n==null)n=null;else if(We(n))i=16;else if(typeof n=="object")if(a&65){const s=n.default;s&&(s._c&&(s._d=!1),Fc(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=n._;!s&&!sf(n)?n._ctx=qt:s===3&&qt&&(qt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else st(n)?(n={default:n,_ctx:qt},i=32):(n=String(n),a&64?(i=16,n=[Ve(n)]):i=8);e.children=n,e.shapeFlag|=i}function mf(...e){const n={};for(let i=0;i<e.length;i++){const a=e[i];for(const s in a)if(s==="class")n.class!==a.class&&(n.class=Fe([n.class,a.class]));else if(s==="style")n.style=nn([n.style,a.style]);else if(Or(s)){const r=n[s],l=a[s];l&&r!==l&&!(We(r)&&r.includes(l))&&(n[s]=r?[].concat(r,l):l)}else s!==""&&(n[s]=a[s])}return n}function Kn(e,n,i,a=null){Zn(e,n,7,[i,a])}const Zv=Qh();let jv=0;function qv(e,n,i){const a=e.type,s=(n?n.appContext:e.appContext)||Zv,r={uid:jv++,vnode:e,type:a,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new uh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:af(a,s),emitsOptions:ef(a,s),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:a.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=n?n.root:r,r.emit=Cv.bind(null,r),e.ce&&e.ce(r),r}let en=null;const zc=()=>en||qt;let Ir,lc;{const e=zr(),n=(i,a)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(a),r=>{s.length>1?s.forEach(l=>l(r)):s[0](r)}};Ir=n("__VUE_INSTANCE_SETTERS__",i=>en=i),lc=n("__VUE_SSR_SETTERS__",i=>pa=i)}const wa=e=>{const n=en;return Ir(e),e.scope.on(),()=>{e.scope.off(),Ir(n)}},ju=()=>{en&&en.scope.off(),Ir(null)};function vf(e){return e.vnode.shapeFlag&4}let pa=!1;function Wv(e,n=!1,i=!1){n&&lc(n);const{props:a,children:s}=e.vnode,r=vf(e);Av(e,a,r,n),Pv(e,s,i||n);const l=r?Gv(e,n):void 0;return n&&lc(!1),l}function Gv(e,n){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pv);const{setup:a}=i;if(a){Es();const s=e.setupContext=a.length>1?Jv(e):null,r=wa(e),l=ka(a,e,0,[e.props,s]),c=sh(l);if(Ms(),r(),(c||e.sp)&&!eo(e)&&Wh(e),c){if(l.then(ju,ju),n)return l.then(h=>{qu(e,h)}).catch(h=>{Vr(h,e,0)});e.asyncDep=l}else qu(e,l)}else gf(e)}function qu(e,n,i){st(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:yt(n)&&(e.setupState=Ah(n)),gf(e)}function gf(e,n,i){const a=e.type;e.render||(e.render=a.render||ns);{const s=wa(e);Es();try{mv(e)}finally{Ms(),s()}}}const Kv={get(e,n){return Xt(e,"get",""),e[n]}};function Jv(e){const n=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Kv),slots:e.slots,emit:e.emit,expose:n}}function Kr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ah(Dc(e.exposed)),{get(n,i){if(i in n)return n[i];if(i in ia)return ia[i](e)},has(n,i){return i in n||i in ia}})):e.proxy}function Yv(e,n=!0){return st(e)?e.displayName||e.name:e.name||n&&e.__name}function Xv(e){return st(e)&&"__vccOpts"in e}const se=(e,n)=>zm(e,n,pa);function Uc(e,n,i){try{Tr(-1);const a=arguments.length;return a===2?yt(n)&&!We(n)?fa(n)?Oe(e,null,[n]):Oe(e,n):Oe(e,null,n):(a>3?i=Array.prototype.slice.call(arguments,2):a===3&&fa(i)&&(i=[i]),Oe(e,n,i))}finally{Tr(1)}}const Qv="3.5.26";let cc;const Wu=typeof window<"u"&&window.trustedTypes;if(Wu)try{cc=Wu.createPolicy("vue",{createHTML:e=>e})}catch{}const _f=cc?e=>cc.createHTML(e):e=>e,eg="http://www.w3.org/2000/svg",tg="http://www.w3.org/1998/Math/MathML",ws=typeof document<"u"?document:null,Gu=ws&&ws.createElement("template"),ng={insert:(e,n,i)=>{n.insertBefore(e,i||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,i,a)=>{const s=n==="svg"?ws.createElementNS(eg,e):n==="mathml"?ws.createElementNS(tg,e):i?ws.createElement(e,{is:i}):ws.createElement(e);return e==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:e=>ws.createTextNode(e),createComment:e=>ws.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ws.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,i,a,s,r){const l=i?i.previousSibling:n.lastChild;if(s&&(s===r||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Gu.innerHTML=_f(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const c=Gu.content;if(a==="svg"||a==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}n.insertBefore(c,i)}return[l?l.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}},Vs="transition",Ho="animation",ma=Symbol("_vtc"),yf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sg=Zt({},Uh,yf),ig=e=>(e.displayName="Transition",e.props=sg,e),Nl=ig((e,{slots:n})=>Uc(ev,og(e),n)),mi=(e,n=[])=>{We(e)?e.forEach(i=>i(...n)):e&&e(...n)},Ku=e=>e?We(e)?e.some(n=>n.length>1):e.length>1:!1;function og(e){const n={};for(const me in e)me in yf||(n[me]=e[me]);if(e.css===!1)return n;const{name:i="v",type:a,duration:s,enterFromClass:r=`${i}-enter-from`,enterActiveClass:l=`${i}-enter-active`,enterToClass:c=`${i}-enter-to`,appearFromClass:h=r,appearActiveClass:p=l,appearToClass:f=c,leaveFromClass:v=`${i}-leave-from`,leaveActiveClass:T=`${i}-leave-active`,leaveToClass:k=`${i}-leave-to`}=e,w=ag(s),I=w&&w[0],D=w&&w[1],{onBeforeEnter:A,onEnter:b,onEnterCancelled:C,onLeave:M,onLeaveCancelled:x,onBeforeAppear:E=A,onAppear:P=b,onAppearCancelled:X=C}=n,Q=(me,Le,ye,be)=>{me._enterCancelled=be,vi(me,Le?f:c),vi(me,Le?p:l),ye&&ye()},le=(me,Le)=>{me._isLeaving=!1,vi(me,v),vi(me,k),vi(me,T),Le&&Le()},ke=me=>(Le,ye)=>{const be=me?P:b,de=()=>Q(Le,me,ye);mi(be,[Le,de]),Ju(()=>{vi(Le,me?h:r),bs(Le,me?f:c),Ku(be)||Yu(Le,a,I,de)})};return Zt(n,{onBeforeEnter(me){mi(A,[me]),bs(me,r),bs(me,l)},onBeforeAppear(me){mi(E,[me]),bs(me,h),bs(me,p)},onEnter:ke(!1),onAppear:ke(!0),onLeave(me,Le){me._isLeaving=!0;const ye=()=>le(me,Le);bs(me,v),me._enterCancelled?(bs(me,T),ed(me)):(ed(me),bs(me,T)),Ju(()=>{me._isLeaving&&(vi(me,v),bs(me,k),Ku(M)||Yu(me,a,D,ye))}),mi(M,[me,ye])},onEnterCancelled(me){Q(me,!1,void 0,!0),mi(C,[me])},onAppearCancelled(me){Q(me,!0,void 0,!0),mi(X,[me])},onLeaveCancelled(me){le(me),mi(x,[me])}})}function ag(e){if(e==null)return null;if(yt(e))return[Bl(e.enter),Bl(e.leave)];{const n=Bl(e);return[n,n]}}function Bl(e){return om(e)}function bs(e,n){n.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[ma]||(e[ma]=new Set)).add(n)}function vi(e,n){n.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const i=e[ma];i&&(i.delete(n),i.size||(e[ma]=void 0))}function Ju(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let rg=0;function Yu(e,n,i,a){const s=e._endId=++rg,r=()=>{s===e._endId&&a()};if(i!=null)return setTimeout(r,i);const{type:l,timeout:c,propCount:h}=lg(e,n);if(!l)return a();const p=l+"end";let f=0;const v=()=>{e.removeEventListener(p,T),r()},T=k=>{k.target===e&&++f>=h&&v()};setTimeout(()=>{f<h&&v()},c+1),e.addEventListener(p,T)}function lg(e,n){const i=window.getComputedStyle(e),a=w=>(i[w]||"").split(", "),s=a(`${Vs}Delay`),r=a(`${Vs}Duration`),l=Xu(s,r),c=a(`${Ho}Delay`),h=a(`${Ho}Duration`),p=Xu(c,h);let f=null,v=0,T=0;n===Vs?l>0&&(f=Vs,v=l,T=r.length):n===Ho?p>0&&(f=Ho,v=p,T=h.length):(v=Math.max(l,p),f=v>0?l>p?Vs:Ho:null,T=f?f===Vs?r.length:h.length:0);const k=f===Vs&&/\b(?:transform|all)(?:,|$)/.test(a(`${Vs}Property`).toString());return{type:f,timeout:v,propCount:T,hasTransform:k}}function Xu(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((i,a)=>Qu(i)+Qu(e[a])))}function Qu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ed(e){return(e?e.ownerDocument:document).body.offsetHeight}function cg(e,n,i){const a=e[ma];a&&(n=(n?[n,...a]:[...a]).join(" ")),n==null?e.removeAttribute("class"):i?e.setAttribute("class",n):e.className=n}const Ar=Symbol("_vod"),bf=Symbol("_vsh"),ni={name:"show",beforeMount(e,{value:n},{transition:i}){e[Ar]=e.style.display==="none"?"":e.style.display,i&&n?i.beforeEnter(e):Vo(e,n)},mounted(e,{value:n},{transition:i}){i&&n&&i.enter(e)},updated(e,{value:n,oldValue:i},{transition:a}){!n!=!i&&(a?n?(a.beforeEnter(e),Vo(e,!0),a.enter(e)):a.leave(e,()=>{Vo(e,!1)}):Vo(e,n))},beforeUnmount(e,{value:n}){Vo(e,n)}};function Vo(e,n){e.style.display=n?e[Ar]:"none",e[bf]=!n}const ug=Symbol(""),dg=/(?:^|;)\s*display\s*:/;function hg(e,n,i){const a=e.style,s=Dt(i);let r=!1;if(i&&!s){if(n)if(Dt(n))for(const l of n.split(";")){const c=l.slice(0,l.indexOf(":")).trim();i[c]==null&&vr(a,c,"")}else for(const l in n)i[l]==null&&vr(a,l,"");for(const l in i)l==="display"&&(r=!0),vr(a,l,i[l])}else if(s){if(n!==i){const l=a[ug];l&&(i+=";"+l),a.cssText=i,r=dg.test(i)}}else n&&e.removeAttribute("style");Ar in e&&(e[Ar]=r?a.display:"",e[bf]&&(a.display="none"))}const td=/\s*!important$/;function vr(e,n,i){if(We(i))i.forEach(a=>vr(e,n,a));else if(i==null&&(i=""),n.startsWith("--"))e.setProperty(n,i);else{const a=fg(e,n);td.test(i)?e.setProperty(ii(a),i.replace(td,""),"important"):e[a]=i}}const nd=["Webkit","Moz","ms"],Fl={};function fg(e,n){const i=Fl[n];if(i)return i;let a=Dn(n);if(a!=="filter"&&a in e)return Fl[n]=a;a=Br(a);for(let s=0;s<nd.length;s++){const r=nd[s]+a;if(r in e)return Fl[n]=r}return n}const sd="http://www.w3.org/1999/xlink";function id(e,n,i,a,s,r=dm(n)){a&&n.startsWith("xlink:")?i==null?e.removeAttributeNS(sd,n.slice(6,n.length)):e.setAttributeNS(sd,n,i):i==null||r&&!rh(i)?e.removeAttribute(n):e.setAttribute(n,r?"":Hn(i)?String(i):i)}function od(e,n,i,a,s){if(n==="innerHTML"||n==="textContent"){i!=null&&(e[n]=n==="innerHTML"?_f(i):i);return}const r=e.tagName;if(n==="value"&&r!=="PROGRESS"&&!r.includes("-")){const c=r==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(c!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(n),e._value=i;return}let l=!1;if(i===""||i==null){const c=typeof e[n];c==="boolean"?i=rh(i):i==null&&c==="string"?(i="",l=!0):c==="number"&&(i=0,l=!0)}try{e[n]=i}catch{}l&&e.removeAttribute(s||n)}function Ts(e,n,i,a){e.addEventListener(n,i,a)}function pg(e,n,i,a){e.removeEventListener(n,i,a)}const ad=Symbol("_vei");function mg(e,n,i,a,s=null){const r=e[ad]||(e[ad]={}),l=r[n];if(a&&l)l.value=a;else{const[c,h]=vg(n);if(a){const p=r[n]=yg(a,s);Ts(e,c,p,h)}else l&&(pg(e,c,l,h),r[n]=void 0)}}const rd=/(?:Once|Passive|Capture)$/;function vg(e){let n;if(rd.test(e)){n={};let a;for(;a=e.match(rd);)e=e.slice(0,e.length-a[0].length),n[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ii(e.slice(2)),n]}let zl=0;const gg=Promise.resolve(),_g=()=>zl||(gg.then(()=>zl=0),zl=Date.now());function yg(e,n){const i=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=i.attached)return;Zn(bg(a,i.value),n,5,[a])};return i.value=e,i.attached=_g(),i}function bg(e,n){if(We(n)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},n.map(a=>s=>!s._stopped&&a&&a(s))}else return n}const ld=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,kg=(e,n,i,a,s,r)=>{const l=s==="svg";n==="class"?cg(e,a,l):n==="style"?hg(e,i,a):Or(n)?xc(n)||mg(e,n,i,a,r):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):wg(e,n,a,l))?(od(e,n,a),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&id(e,n,a,l,r,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Dt(a))?od(e,Dn(n),a,r,n):(n==="true-value"?e._trueValue=a:n==="false-value"&&(e._falseValue=a),id(e,n,a,l))};function wg(e,n,i,a){if(a)return!!(n==="innerHTML"||n==="textContent"||n in e&&ld(n)&&st(i));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ld(n)&&Dt(i)?!1:n in e}const si=e=>{const n=e.props["onUpdate:modelValue"]||!1;return We(n)?i=>dr(n,i):n};function Cg(e){e.target.composing=!0}function cd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Pn=Symbol("_assign");function ud(e,n,i){return n&&(e=e.trim()),i&&(e=Fr(e)),e}const ot={created(e,{modifiers:{lazy:n,trim:i,number:a}},s){e[Pn]=si(s);const r=a||s.props&&s.props.type==="number";Ts(e,n?"change":"input",l=>{l.target.composing||e[Pn](ud(e.value,i,r))}),(i||r)&&Ts(e,"change",()=>{e.value=ud(e.value,i,r)}),n||(Ts(e,"compositionstart",Cg),Ts(e,"compositionend",cd),Ts(e,"change",cd))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:i,modifiers:{lazy:a,trim:s,number:r}},l){if(e[Pn]=si(l),e.composing)return;const c=(r||e.type==="number")&&!/^0\d/.test(e.value)?Fr(e.value):e.value,h=n??"";c!==h&&(document.activeElement===e&&e.type!=="range"&&(a&&n===i||s&&e.value.trim()===h)||(e.value=h))}},to={deep:!0,created(e,n,i){e[Pn]=si(i),Ts(e,"change",()=>{const a=e._modelValue,s=oo(e),r=e.checked,l=e[Pn];if(We(a)){const c=Tc(a,s),h=c!==-1;if(r&&!h)l(a.concat(s));else if(!r&&h){const p=[...a];p.splice(c,1),l(p)}}else if(co(a)){const c=new Set(a);r?c.add(s):c.delete(s),l(c)}else l(kf(e,r))})},mounted:dd,beforeUpdate(e,n,i){e[Pn]=si(i),dd(e,n,i)}};function dd(e,{value:n,oldValue:i},a){e._modelValue=n;let s;if(We(n))s=Tc(n,a.props.value)>-1;else if(co(n))s=n.has(a.props.value);else{if(n===i)return;s=Ti(n,kf(e,!0))}e.checked!==s&&(e.checked=s)}const hd={created(e,{value:n},i){e.checked=Ti(n,i.props.value),e[Pn]=si(i),Ts(e,"change",()=>{e[Pn](oo(e))})},beforeUpdate(e,{value:n,oldValue:i},a){e[Pn]=si(a),n!==i&&(e.checked=Ti(n,a.props.value))}},kn={deep:!0,created(e,{value:n,modifiers:{number:i}},a){const s=co(n);Ts(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>i?Fr(oo(l)):oo(l));e[Pn](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,io(()=>{e._assigning=!1})}),e[Pn]=si(a)},mounted(e,{value:n}){fd(e,n)},beforeUpdate(e,n,i){e[Pn]=si(i)},updated(e,{value:n}){e._assigning||fd(e,n)}};function fd(e,n){const i=e.multiple,a=We(n);if(!(i&&!a&&!co(n))){for(let s=0,r=e.options.length;s<r;s++){const l=e.options[s],c=oo(l);if(i)if(a){const h=typeof c;h==="string"||h==="number"?l.selected=n.some(p=>String(p)===String(c)):l.selected=Tc(n,c)>-1}else l.selected=n.has(c);else if(Ti(oo(l),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function oo(e){return"_value"in e?e._value:e.value}function kf(e,n){const i=n?"_trueValue":"_falseValue";return i in e?e[i]:n}const Lg=["ctrl","shift","alt","meta"],xg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>Lg.some(i=>e[`${i}Key`]&&!n.includes(i))},It=(e,n)=>{const i=e._withMods||(e._withMods={}),a=n.join(".");return i[a]||(i[a]=((s,...r)=>{for(let l=0;l<n.length;l++){const c=xg[n[l]];if(c&&c(s,n))return}return e(s,...r)}))},Sg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wf=(e,n)=>{const i=e._withKeys||(e._withKeys={}),a=n.join(".");return i[a]||(i[a]=(s=>{if(!("key"in s))return;const r=ii(s.key);if(n.some(l=>l===r||Sg[l]===r))return e(s)}))},Tg=Zt({patchProp:kg},ng);let pd;function Ig(){return pd||(pd=Ov(Tg))}const Ag=((...e)=>{const n=Ig().createApp(...e),{mount:i}=n;return n.mount=a=>{const s=Mg(a);if(!s)return;const r=n._component;!st(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=i(s,!1,Eg(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},n});function Eg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Mg(e){return Dt(e)?document.querySelector(e):e}let Cf;const Jr=e=>Cf=e,Lf=Symbol();function uc(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var aa;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(aa||(aa={}));function $g(){const e=dh(!0),n=e.run(()=>O({}));let i=[],a=[];const s=Dc({install(r){Jr(s),s._a=r,r.provide(Lf,s),r.config.globalProperties.$pinia=s,a.forEach(l=>i.push(l)),a=[]},use(r){return this._a?i.push(r):a.push(r),this},_p:i,_a:null,_e:e,_s:new Map,state:n});return s}const xf=()=>{};function md(e,n,i,a=xf){e.add(n);const s=()=>{e.delete(n)&&a()};return!i&&hh()&&fm(s),s}function qi(e,...n){e.forEach(i=>{i(...n)})}const Pg=e=>e(),vd=Symbol(),Ul=Symbol();function dc(e,n){e instanceof Map&&n instanceof Map?n.forEach((i,a)=>e.set(a,i)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const i in n){if(!n.hasOwnProperty(i))continue;const a=n[i],s=e[i];uc(s)&&uc(a)&&e.hasOwnProperty(i)&&!Pt(a)&&!As(a)?e[i]=dc(s,a):e[i]=a}return e}const Dg=Symbol();function Og(e){return!uc(e)||!Object.prototype.hasOwnProperty.call(e,Dg)}const{assign:js}=Object;function Rg(e){return!!(Pt(e)&&e.effect)}function Ng(e,n,i,a){const{state:s,actions:r,getters:l}=n,c=i.state.value[e];let h;function p(){c||(i.state.value[e]=s?s():{});const f=Rm(i.state.value[e]);return js(f,r,Object.keys(l||{}).reduce((v,T)=>(v[T]=Dc(se(()=>{Jr(i);const k=i._s.get(e);return l[T].call(k,k)})),v),{}))}return h=Sf(e,p,n,i,a,!0),h}function Sf(e,n,i={},a,s,r){let l;const c=js({actions:{}},i),h={deep:!0};let p,f,v=new Set,T=new Set,k;const w=a.state.value[e];!r&&!w&&(a.state.value[e]={}),O({});let I;function D(X){let Q;p=f=!1,typeof X=="function"?(X(a.state.value[e]),Q={type:aa.patchFunction,storeId:e,events:k}):(dc(a.state.value[e],X),Q={type:aa.patchObject,payload:X,storeId:e,events:k});const le=I=Symbol();io().then(()=>{I===le&&(p=!0)}),f=!0,qi(v,Q,a.state.value[e])}const A=r?function(){const{state:Q}=i,le=Q?Q():{};this.$patch(ke=>{js(ke,le)})}:xf;function b(){l.stop(),v.clear(),T.clear(),a._s.delete(e)}const C=(X,Q="")=>{if(vd in X)return X[Ul]=Q,X;const le=function(){Jr(a);const ke=Array.from(arguments),me=new Set,Le=new Set;function ye(K){me.add(K)}function be(K){Le.add(K)}qi(T,{args:ke,name:le[Ul],store:x,after:ye,onError:be});let de;try{de=X.apply(this&&this.$id===e?this:x,ke)}catch(K){throw qi(Le,K),K}return de instanceof Promise?de.then(K=>(qi(me,K),K)).catch(K=>(qi(Le,K),Promise.reject(K))):(qi(me,de),de)};return le[vd]=!0,le[Ul]=Q,le},M={_p:a,$id:e,$onAction:md.bind(null,T),$patch:D,$reset:A,$subscribe(X,Q={}){const le=md(v,X,Q.detached,()=>ke()),ke=l.run(()=>qe(()=>a.state.value[e],me=>{(Q.flush==="sync"?f:p)&&X({storeId:e,type:aa.direct,events:k},me)},js({},h,Q)));return le},$dispose:b},x=ba(M);a._s.set(e,x);const P=(a._a&&a._a.runWithContext||Pg)(()=>a._e.run(()=>(l=dh()).run(()=>n({action:C}))));for(const X in P){const Q=P[X];if(Pt(Q)&&!Rg(Q)||As(Q))r||(w&&Og(Q)&&(Pt(Q)?Q.value=w[X]:dc(Q,w[X])),a.state.value[e][X]=Q);else if(typeof Q=="function"){const le=C(Q,X);P[X]=le,c.actions[X]=Q}}return js(x,P),js(dt(x),P),Object.defineProperty(x,"$state",{get:()=>a.state.value[e],set:X=>{D(Q=>{js(Q,X)})}}),a._p.forEach(X=>{js(x,l.run(()=>X({store:x,app:a._a,pinia:a,options:c})))}),w&&r&&i.hydrate&&i.hydrate(x.$state,w),p=!0,f=!0,x}function Hc(e,n,i){let a;const s=typeof n=="function";a=s?i:n;function r(l,c){const h=qm();return l=l||(h?$n(Lf,null):null),l&&Jr(l),l=Cf,l._s.has(e)||(s?Sf(e,n,a,l):Ng(e,a,l)),l._s.get(e)}return r.$id=e,r}const Ze=(e,n)=>{const i=e.__vccOpts||e;for(const[a,s]of n)i[a]=s;return i},Bg={},Fg={id:"app"};function zg(e,n){const i=qr("router-view");return g(),_("div",Fg,[Oe(i)])}const Ug=Ze(Bg,[["render",zg]]);const Gi=typeof document<"u";function Tf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Hg(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Tf(e.default)}const ft=Object.assign;function Hl(e,n){const i={};for(const a in n){const s=n[a];i[a]=jn(s)?s.map(e):e(s)}return i}const ra=()=>{},jn=Array.isArray;function gd(e,n){const i={};for(const a in e)i[a]=a in n?n[a]:e[a];return i}const If=/#/g,Vg=/&/g,Zg=/\//g,jg=/=/g,qg=/\?/g,Af=/\+/g,Wg=/%5B/g,Gg=/%5D/g,Ef=/%5E/g,Kg=/%60/g,Mf=/%7B/g,Jg=/%7C/g,$f=/%7D/g,Yg=/%20/g;function Vc(e){return e==null?"":encodeURI(""+e).replace(Jg,"|").replace(Wg,"[").replace(Gg,"]")}function Xg(e){return Vc(e).replace(Mf,"{").replace($f,"}").replace(Ef,"^")}function hc(e){return Vc(e).replace(Af,"%2B").replace(Yg,"+").replace(If,"%23").replace(Vg,"%26").replace(Kg,"`").replace(Mf,"{").replace($f,"}").replace(Ef,"^")}function Qg(e){return hc(e).replace(jg,"%3D")}function e_(e){return Vc(e).replace(If,"%23").replace(qg,"%3F")}function t_(e){return e_(e).replace(Zg,"%2F")}function va(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const n_=/\/$/,s_=e=>e.replace(n_,"");function Vl(e,n,i="/"){let a,s={},r="",l="";const c=n.indexOf("#");let h=n.indexOf("?");return h=c>=0&&h>c?-1:h,h>=0&&(a=n.slice(0,h),r=n.slice(h,c>0?c:n.length),s=e(r.slice(1))),c>=0&&(a=a||n.slice(0,c),l=n.slice(c,n.length)),a=r_(a??n,i),{fullPath:a+r+l,path:a,query:s,hash:va(l)}}function i_(e,n){const i=n.query?e(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function _d(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function o_(e,n,i){const a=n.matched.length-1,s=i.matched.length-1;return a>-1&&a===s&&ao(n.matched[a],i.matched[s])&&Pf(n.params,i.params)&&e(n.query)===e(i.query)&&n.hash===i.hash}function ao(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Pf(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!a_(e[i],n[i]))return!1;return!0}function a_(e,n){return jn(e)?yd(e,n):jn(n)?yd(n,e):e?.valueOf()===n?.valueOf()}function yd(e,n){return jn(n)?e.length===n.length&&e.every((i,a)=>i===n[a]):e.length===1&&e[0]===n}function r_(e,n){if(e.startsWith("/"))return e;if(!e)return n;const i=n.split("/"),a=e.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let r=i.length-1,l,c;for(l=0;l<a.length;l++)if(c=a[l],c!==".")if(c==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+a.slice(l).join("/")}const Zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let fc=(function(e){return e.pop="pop",e.push="push",e})({}),Zl=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function l_(e){if(!e)if(Gi){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),s_(e)}const c_=/^[^#]+#/;function u_(e,n){return e.replace(c_,"#")+n}function d_(e,n){const i=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:n.behavior,left:a.left-i.left-(n.left||0),top:a.top-i.top-(n.top||0)}}const Yr=()=>({left:window.scrollX,top:window.scrollY});function h_(e){let n;if("el"in e){const i=e.el,a=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?a?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;n=d_(s,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function bd(e,n){return(history.state?history.state.position-n:-1)+e}const pc=new Map;function f_(e,n){pc.set(e,n)}function p_(e){const n=pc.get(e);return pc.delete(e),n}function m_(e){return typeof e=="string"||e&&typeof e=="object"}function Df(e){return typeof e=="string"||typeof e=="symbol"}let $t=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Of=Symbol("");$t.MATCHER_NOT_FOUND+"",$t.NAVIGATION_GUARD_REDIRECT+"",$t.NAVIGATION_ABORTED+"",$t.NAVIGATION_CANCELLED+"",$t.NAVIGATION_DUPLICATED+"";function ro(e,n){return ft(new Error,{type:e,[Of]:!0},n)}function ks(e,n){return e instanceof Error&&Of in e&&(n==null||!!(e.type&n))}const v_=["params","query","hash"];function g_(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const i of v_)i in e&&(n[i]=e[i]);return JSON.stringify(n,null,2)}function __(e){const n={};if(e===""||e==="?")return n;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<i.length;++a){const s=i[a].replace(Af," "),r=s.indexOf("="),l=va(r<0?s:s.slice(0,r)),c=r<0?null:va(s.slice(r+1));if(l in n){let h=n[l];jn(h)||(h=n[l]=[h]),h.push(c)}else n[l]=c}return n}function kd(e){let n="";for(let i in e){const a=e[i];if(i=Qg(i),a==null){a!==void 0&&(n+=(n.length?"&":"")+i);continue}(jn(a)?a.map(s=>s&&hc(s)):[a&&hc(a)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+i,s!=null&&(n+="="+s))})}return n}function y_(e){const n={};for(const i in e){const a=e[i];a!==void 0&&(n[i]=jn(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return n}const b_=Symbol(""),wd=Symbol(""),Xr=Symbol(""),Zc=Symbol(""),mc=Symbol("");function Zo(){let e=[];function n(a){return e.push(a),()=>{const s=e.indexOf(a);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:n,list:()=>e.slice(),reset:i}}function Ks(e,n,i,a,s,r=l=>l()){const l=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((c,h)=>{const p=T=>{T===!1?h(ro($t.NAVIGATION_ABORTED,{from:i,to:n})):T instanceof Error?h(T):m_(T)?h(ro($t.NAVIGATION_GUARD_REDIRECT,{from:n,to:T})):(l&&a.enterCallbacks[s]===l&&typeof T=="function"&&l.push(T),c())},f=r(()=>e.call(a&&a.instances[s],n,i,p));let v=Promise.resolve(f);e.length<3&&(v=v.then(p)),v.catch(T=>h(T))})}function jl(e,n,i,a,s=r=>r()){const r=[];for(const l of e)for(const c in l.components){let h=l.components[c];if(!(n!=="beforeRouteEnter"&&!l.instances[c]))if(Tf(h)){const p=(h.__vccOpts||h)[n];p&&r.push(Ks(p,i,a,l,c,s))}else{let p=h();r.push(()=>p.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${l.path}"`);const v=Hg(f)?f.default:f;l.mods[c]=f,l.components[c]=v;const T=(v.__vccOpts||v)[n];return T&&Ks(T,i,a,l,c,s)()}))}}return r}function k_(e,n){const i=[],a=[],s=[],r=Math.max(n.matched.length,e.matched.length);for(let l=0;l<r;l++){const c=n.matched[l];c&&(e.matched.find(p=>ao(p,c))?a.push(c):i.push(c));const h=e.matched[l];h&&(n.matched.find(p=>ao(p,h))||s.push(h))}return[i,a,s]}let w_=()=>location.protocol+"//"+location.host;function Rf(e,n){const{pathname:i,search:a,hash:s}=n,r=e.indexOf("#");if(r>-1){let l=s.includes(e.slice(r))?e.slice(r).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),_d(c,"")}return _d(i,e)+a+s}function C_(e,n,i,a){let s=[],r=[],l=null;const c=({state:T})=>{const k=Rf(e,location),w=i.value,I=n.value;let D=0;if(T){if(i.value=k,n.value=T,l&&l===w){l=null;return}D=I?T.position-I.position:0}else a(k);s.forEach(A=>{A(i.value,w,{delta:D,type:fc.pop,direction:D?D>0?Zl.forward:Zl.back:Zl.unknown})})};function h(){l=i.value}function p(T){s.push(T);const k=()=>{const w=s.indexOf(T);w>-1&&s.splice(w,1)};return r.push(k),k}function f(){if(document.visibilityState==="hidden"){const{history:T}=window;if(!T.state)return;T.replaceState(ft({},T.state,{scroll:Yr()}),"")}}function v(){for(const T of r)T();r=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:h,listen:p,destroy:v}}function Cd(e,n,i,a=!1,s=!1){return{back:e,current:n,forward:i,replaced:a,position:window.history.length,scroll:s?Yr():null}}function L_(e){const{history:n,location:i}=window,a={value:Rf(e,i)},s={value:n.state};s.value||r(a.value,{back:null,current:a.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function r(h,p,f){const v=e.indexOf("#"),T=v>-1?(i.host&&document.querySelector("base")?e:e.slice(v))+h:w_()+e+h;try{n[f?"replaceState":"pushState"](p,"",T),s.value=p}catch(k){console.error(k),i[f?"replace":"assign"](T)}}function l(h,p){r(h,ft({},n.state,Cd(s.value.back,h,s.value.forward,!0),p,{position:s.value.position}),!0),a.value=h}function c(h,p){const f=ft({},s.value,n.state,{forward:h,scroll:Yr()});r(f.current,f,!0),r(h,ft({},Cd(a.value,h,null),{position:f.position+1},p),!1),a.value=h}return{location:a,state:s,push:c,replace:l}}function x_(e){e=l_(e);const n=L_(e),i=C_(e,n.state,n.location,n.replace);function a(r,l=!0){l||i.pauseListeners(),history.go(r)}const s=ft({location:"",base:e,go:a,createHref:u_.bind(null,e)},n,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function S_(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),x_(e)}let ki=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var zt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(zt||{});const T_={type:ki.Static,value:""},I_=/[a-zA-Z0-9_]/;function A_(e){if(!e)return[[]];if(e==="/")return[[T_]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(k){throw new Error(`ERR (${i})/"${p}": ${k}`)}let i=zt.Static,a=i;const s=[];let r;function l(){r&&s.push(r),r=[]}let c=0,h,p="",f="";function v(){p&&(i===zt.Static?r.push({type:ki.Static,value:p}):i===zt.Param||i===zt.ParamRegExp||i===zt.ParamRegExpEnd?(r.length>1&&(h==="*"||h==="+")&&n(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ki.Param,value:p,regexp:f,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):n("Invalid state to consume buffer"),p="")}function T(){p+=h}for(;c<e.length;){if(h=e[c++],h==="\\"&&i!==zt.ParamRegExp){a=i,i=zt.EscapeNext;continue}switch(i){case zt.Static:h==="/"?(p&&v(),l()):h===":"?(v(),i=zt.Param):T();break;case zt.EscapeNext:T(),i=a;break;case zt.Param:h==="("?i=zt.ParamRegExp:I_.test(h)?T():(v(),i=zt.Static,h!=="*"&&h!=="?"&&h!=="+"&&c--);break;case zt.ParamRegExp:h===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+h:i=zt.ParamRegExpEnd:f+=h;break;case zt.ParamRegExpEnd:v(),i=zt.Static,h!=="*"&&h!=="?"&&h!=="+"&&c--,f="";break;default:n("Unknown state");break}}return i===zt.ParamRegExp&&n(`Unfinished custom RegExp for param "${p}"`),v(),l(),s}const Ld="[^/]+?",E_={sensitive:!1,strict:!1,start:!0,end:!0};var cn=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(cn||{});const M_=/[.+*?^${}()[\]/\\]/g;function $_(e,n){const i=ft({},E_,n),a=[];let s=i.start?"^":"";const r=[];for(const p of e){const f=p.length?[]:[cn.Root];i.strict&&!p.length&&(s+="/");for(let v=0;v<p.length;v++){const T=p[v];let k=cn.Segment+(i.sensitive?cn.BonusCaseSensitive:0);if(T.type===ki.Static)v||(s+="/"),s+=T.value.replace(M_,"\\$&"),k+=cn.Static;else if(T.type===ki.Param){const{value:w,repeatable:I,optional:D,regexp:A}=T;r.push({name:w,repeatable:I,optional:D});const b=A||Ld;if(b!==Ld){k+=cn.BonusCustomRegExp;try{`${b}`}catch(M){throw new Error(`Invalid custom RegExp for param "${w}" (${b}): `+M.message)}}let C=I?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;v||(C=D&&p.length<2?`(?:/${C})`:"/"+C),D&&(C+="?"),s+=C,k+=cn.Dynamic,D&&(k+=cn.BonusOptional),I&&(k+=cn.BonusRepeatable),b===".*"&&(k+=cn.BonusWildcard)}f.push(k)}a.push(f)}if(i.strict&&i.end){const p=a.length-1;a[p][a[p].length-1]+=cn.BonusStrict}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const l=new RegExp(s,i.sensitive?"":"i");function c(p){const f=p.match(l),v={};if(!f)return null;for(let T=1;T<f.length;T++){const k=f[T]||"",w=r[T-1];v[w.name]=k&&w.repeatable?k.split("/"):k}return v}function h(p){let f="",v=!1;for(const T of e){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const k of T)if(k.type===ki.Static)f+=k.value;else if(k.type===ki.Param){const{value:w,repeatable:I,optional:D}=k,A=w in p?p[w]:"";if(jn(A)&&!I)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const b=jn(A)?A.join("/"):A;if(!b)if(D)T.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${w}"`);f+=b}}return f||"/"}return{re:l,score:a,keys:r,parse:c,stringify:h}}function P_(e,n){let i=0;for(;i<e.length&&i<n.length;){const a=n[i]-e[i];if(a)return a;i++}return e.length<n.length?e.length===1&&e[0]===cn.Static+cn.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===cn.Static+cn.Segment?1:-1:0}function Nf(e,n){let i=0;const a=e.score,s=n.score;for(;i<a.length&&i<s.length;){const r=P_(a[i],s[i]);if(r)return r;i++}if(Math.abs(s.length-a.length)===1){if(xd(a))return 1;if(xd(s))return-1}return s.length-a.length}function xd(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const D_={strict:!1,end:!0,sensitive:!1};function O_(e,n,i){const a=$_(A_(e.path),i),s=ft(a,{record:e,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function R_(e,n){const i=[],a=new Map;n=gd(D_,n);function s(v){return a.get(v)}function r(v,T,k){const w=!k,I=Td(v);I.aliasOf=k&&k.record;const D=gd(n,v),A=[I];if("alias"in v){const M=typeof v.alias=="string"?[v.alias]:v.alias;for(const x of M)A.push(Td(ft({},I,{components:k?k.record.components:I.components,path:x,aliasOf:k?k.record:I})))}let b,C;for(const M of A){const{path:x}=M;if(T&&x[0]!=="/"){const E=T.record.path,P=E[E.length-1]==="/"?"":"/";M.path=T.record.path+(x&&P+x)}if(b=O_(M,T,D),k?k.alias.push(b):(C=C||b,C!==b&&C.alias.push(b),w&&v.name&&!Id(b)&&l(v.name)),Bf(b)&&h(b),I.children){const E=I.children;for(let P=0;P<E.length;P++)r(E[P],b,k&&k.children[P])}k=k||b}return C?()=>{l(C)}:ra}function l(v){if(Df(v)){const T=a.get(v);T&&(a.delete(v),i.splice(i.indexOf(T),1),T.children.forEach(l),T.alias.forEach(l))}else{const T=i.indexOf(v);T>-1&&(i.splice(T,1),v.record.name&&a.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function c(){return i}function h(v){const T=F_(v,i);i.splice(T,0,v),v.record.name&&!Id(v)&&a.set(v.record.name,v)}function p(v,T){let k,w={},I,D;if("name"in v&&v.name){if(k=a.get(v.name),!k)throw ro($t.MATCHER_NOT_FOUND,{location:v});D=k.record.name,w=ft(Sd(T.params,k.keys.filter(C=>!C.optional).concat(k.parent?k.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),v.params&&Sd(v.params,k.keys.map(C=>C.name))),I=k.stringify(w)}else if(v.path!=null)I=v.path,k=i.find(C=>C.re.test(I)),k&&(w=k.parse(I),D=k.record.name);else{if(k=T.name?a.get(T.name):i.find(C=>C.re.test(T.path)),!k)throw ro($t.MATCHER_NOT_FOUND,{location:v,currentLocation:T});D=k.record.name,w=ft({},T.params,v.params),I=k.stringify(w)}const A=[];let b=k;for(;b;)A.unshift(b.record),b=b.parent;return{name:D,path:I,params:w,matched:A,meta:B_(A)}}e.forEach(v=>r(v));function f(){i.length=0,a.clear()}return{addRoute:r,resolve:p,removeRoute:l,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function Sd(e,n){const i={};for(const a of n)a in e&&(i[a]=e[a]);return i}function Td(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:N_(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function N_(e){const n={},i=e.props||!1;if("component"in e)n.default=i;else for(const a in e.components)n[a]=typeof i=="object"?i[a]:i;return n}function Id(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function B_(e){return e.reduce((n,i)=>ft(n,i.meta),{})}function F_(e,n){let i=0,a=n.length;for(;i!==a;){const r=i+a>>1;Nf(e,n[r])<0?a=r:i=r+1}const s=z_(e);return s&&(a=n.lastIndexOf(s,a-1)),a}function z_(e){let n=e;for(;n=n.parent;)if(Bf(n)&&Nf(e,n)===0)return n}function Bf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Ad(e){const n=$n(Xr),i=$n(Zc),a=se(()=>{const h=U(e.to);return n.resolve(h)}),s=se(()=>{const{matched:h}=a.value,{length:p}=h,f=h[p-1],v=i.matched;if(!f||!v.length)return-1;const T=v.findIndex(ao.bind(null,f));if(T>-1)return T;const k=Ed(h[p-2]);return p>1&&Ed(f)===k&&v[v.length-1].path!==k?v.findIndex(ao.bind(null,h[p-2])):T}),r=se(()=>s.value>-1&&j_(i.params,a.value.params)),l=se(()=>s.value>-1&&s.value===i.matched.length-1&&Pf(i.params,a.value.params));function c(h={}){if(Z_(h)){const p=n[U(e.replace)?"replace":"push"](U(e.to)).catch(ra);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>p),p}return Promise.resolve()}return{route:a,href:se(()=>a.value.href),isActive:r,isExactActive:l,navigate:c}}function U_(e){return e.length===1?e[0]:e}const H_=qh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ad,setup(e,{slots:n}){const i=ba(Ad(e)),{options:a}=$n(Xr),s=se(()=>({[Md(e.activeClass,a.linkActiveClass,"router-link-active")]:i.isActive,[Md(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const r=n.default&&U_(n.default(i));return e.custom?r:Uc("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},r)}}}),V_=H_;function Z_(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function j_(e,n){for(const i in n){const a=n[i],s=e[i];if(typeof a=="string"){if(a!==s)return!1}else if(!jn(s)||s.length!==a.length||a.some((r,l)=>r.valueOf()!==s[l].valueOf()))return!1}return!0}function Ed(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Md=(e,n,i)=>e??n??i,q_=qh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:i}){const a=$n(mc),s=se(()=>e.route||a.value),r=$n(wd,0),l=se(()=>{let p=U(r);const{matched:f}=s.value;let v;for(;(v=f[p])&&!v.components;)p++;return p}),c=se(()=>s.value.matched[l.value]);hr(wd,se(()=>l.value+1)),hr(b_,c),hr(mc,s);const h=O();return qe(()=>[h.value,c.value,e.name],([p,f,v],[T,k,w])=>{f&&(f.instances[v]=p,k&&k!==f&&p&&p===T&&(f.leaveGuards.size||(f.leaveGuards=k.leaveGuards),f.updateGuards.size||(f.updateGuards=k.updateGuards))),p&&f&&(!k||!ao(f,k)||!T)&&(f.enterCallbacks[v]||[]).forEach(I=>I(p))},{flush:"post"}),()=>{const p=s.value,f=e.name,v=c.value,T=v&&v.components[f];if(!T)return $d(i.default,{Component:T,route:p});const k=v.props[f],w=k?k===!0?p.params:typeof k=="function"?k(p):k:null,D=Uc(T,ft({},w,n,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(v.instances[f]=null)},ref:h}));return $d(i.default,{Component:D,route:p})||D}}});function $d(e,n){if(!e)return null;const i=e(n);return i.length===1?i[0]:i}const W_=q_;function G_(e){const n=R_(e.routes,e),i=e.parseQuery||__,a=e.stringifyQuery||kd,s=e.history,r=Zo(),l=Zo(),c=Zo(),h=Pm(Zs);let p=Zs;Gi&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Hl.bind(null,F=>""+F),v=Hl.bind(null,t_),T=Hl.bind(null,va);function k(F,J){let V,W;return Df(F)?(V=n.getRecordMatcher(F),W=J):W=F,n.addRoute(W,V)}function w(F){const J=n.getRecordMatcher(F);J&&n.removeRoute(J)}function I(){return n.getRoutes().map(F=>F.record)}function D(F){return!!n.getRecordMatcher(F)}function A(F,J){if(J=ft({},J||h.value),typeof F=="string"){const q=Vl(i,F,J.path),ae=n.resolve({path:q.path},J),he=s.createHref(q.fullPath);return ft(q,ae,{params:T(ae.params),hash:va(q.hash),redirectedFrom:void 0,href:he})}let V;if(F.path!=null)V=ft({},F,{path:Vl(i,F.path,J.path).path});else{const q=ft({},F.params);for(const ae in q)q[ae]==null&&delete q[ae];V=ft({},F,{params:v(q)}),J.params=v(J.params)}const W=n.resolve(V,J),pe=F.hash||"";W.params=f(T(W.params));const R=i_(a,ft({},F,{hash:Xg(pe),path:W.path})),z=s.createHref(R);return ft({fullPath:R,hash:pe,query:a===kd?y_(F.query):F.query||{}},W,{redirectedFrom:void 0,href:z})}function b(F){return typeof F=="string"?Vl(i,F,h.value.path):ft({},F)}function C(F,J){if(p!==F)return ro($t.NAVIGATION_CANCELLED,{from:J,to:F})}function M(F){return P(F)}function x(F){return M(ft(b(F),{replace:!0}))}function E(F,J){const V=F.matched[F.matched.length-1];if(V&&V.redirect){const{redirect:W}=V;let pe=typeof W=="function"?W(F,J):W;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=b(pe):{path:pe},pe.params={}),ft({query:F.query,hash:F.hash,params:pe.path!=null?{}:F.params},pe)}}function P(F,J){const V=p=A(F),W=h.value,pe=F.state,R=F.force,z=F.replace===!0,q=E(V,W);if(q)return P(ft(b(q),{state:typeof q=="object"?ft({},pe,q.state):pe,force:R,replace:z}),J||V);const ae=V;ae.redirectedFrom=J;let he;return!R&&o_(a,W,V)&&(he=ro($t.NAVIGATION_DUPLICATED,{to:ae,from:W}),ce(W,W,!0,!1)),(he?Promise.resolve(he):le(ae,W)).catch(fe=>ks(fe)?ks(fe,$t.NAVIGATION_GUARD_REDIRECT)?fe:j(fe):Z(fe,ae,W)).then(fe=>{if(fe){if(ks(fe,$t.NAVIGATION_GUARD_REDIRECT))return P(ft({replace:z},b(fe.to),{state:typeof fe.to=="object"?ft({},pe,fe.to.state):pe,force:R}),J||ae)}else fe=me(ae,W,!0,z,pe);return ke(ae,W,fe),fe})}function X(F,J){const V=C(F,J);return V?Promise.reject(V):Promise.resolve()}function Q(F){const J=Se.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(F):F()}function le(F,J){let V;const[W,pe,R]=k_(F,J);V=jl(W.reverse(),"beforeRouteLeave",F,J);for(const q of W)q.leaveGuards.forEach(ae=>{V.push(Ks(ae,F,J))});const z=X.bind(null,F,J);return V.push(z),Me(V).then(()=>{V=[];for(const q of r.list())V.push(Ks(q,F,J));return V.push(z),Me(V)}).then(()=>{V=jl(pe,"beforeRouteUpdate",F,J);for(const q of pe)q.updateGuards.forEach(ae=>{V.push(Ks(ae,F,J))});return V.push(z),Me(V)}).then(()=>{V=[];for(const q of R)if(q.beforeEnter)if(jn(q.beforeEnter))for(const ae of q.beforeEnter)V.push(Ks(ae,F,J));else V.push(Ks(q.beforeEnter,F,J));return V.push(z),Me(V)}).then(()=>(F.matched.forEach(q=>q.enterCallbacks={}),V=jl(R,"beforeRouteEnter",F,J,Q),V.push(z),Me(V))).then(()=>{V=[];for(const q of l.list())V.push(Ks(q,F,J));return V.push(z),Me(V)}).catch(q=>ks(q,$t.NAVIGATION_CANCELLED)?q:Promise.reject(q))}function ke(F,J,V){c.list().forEach(W=>Q(()=>W(F,J,V)))}function me(F,J,V,W,pe){const R=C(F,J);if(R)return R;const z=J===Zs,q=Gi?history.state:{};V&&(W||z?s.replace(F.fullPath,ft({scroll:z&&q&&q.scroll},pe)):s.push(F.fullPath,pe)),h.value=F,ce(F,J,V,z),j()}let Le;function ye(){Le||(Le=s.listen((F,J,V)=>{if(!Ee.listening)return;const W=A(F),pe=E(W,Ee.currentRoute.value);if(pe){P(ft(pe,{replace:!0,force:!0}),W).catch(ra);return}p=W;const R=h.value;Gi&&f_(bd(R.fullPath,V.delta),Yr()),le(W,R).catch(z=>ks(z,$t.NAVIGATION_ABORTED|$t.NAVIGATION_CANCELLED)?z:ks(z,$t.NAVIGATION_GUARD_REDIRECT)?(P(ft(b(z.to),{force:!0}),W).then(q=>{ks(q,$t.NAVIGATION_ABORTED|$t.NAVIGATION_DUPLICATED)&&!V.delta&&V.type===fc.pop&&s.go(-1,!1)}).catch(ra),Promise.reject()):(V.delta&&s.go(-V.delta,!1),Z(z,W,R))).then(z=>{z=z||me(W,R,!1),z&&(V.delta&&!ks(z,$t.NAVIGATION_CANCELLED)?s.go(-V.delta,!1):V.type===fc.pop&&ks(z,$t.NAVIGATION_ABORTED|$t.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),ke(W,R,z)}).catch(ra)}))}let be=Zo(),de=Zo(),K;function Z(F,J,V){j(F);const W=de.list();return W.length?W.forEach(pe=>pe(F,J,V)):console.error(F),Promise.reject(F)}function te(){return K&&h.value!==Zs?Promise.resolve():new Promise((F,J)=>{be.add([F,J])})}function j(F){return K||(K=!F,ye(),be.list().forEach(([J,V])=>F?V(F):J()),be.reset()),F}function ce(F,J,V,W){const{scrollBehavior:pe}=e;if(!Gi||!pe)return Promise.resolve();const R=!V&&p_(bd(F.fullPath,0))||(W||!V)&&history.state&&history.state.scroll||null;return io().then(()=>pe(F,J,R)).then(z=>z&&h_(z)).catch(z=>Z(z,F,J))}const Y=F=>s.go(F);let ve;const Se=new Set,Ee={currentRoute:h,listening:!0,addRoute:k,removeRoute:w,clearRoutes:n.clearRoutes,hasRoute:D,getRoutes:I,resolve:A,options:e,push:M,replace:x,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:r.add,beforeResolve:l.add,afterEach:c.add,onError:de.add,isReady:te,install(F){F.component("RouterLink",V_),F.component("RouterView",W_),F.config.globalProperties.$router=Ee,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>U(h)}),Gi&&!ve&&h.value===Zs&&(ve=!0,M(s.location).catch(W=>{}));const J={};for(const W in Zs)Object.defineProperty(J,W,{get:()=>h.value[W],enumerable:!0});F.provide(Xr,Ee),F.provide(Zc,Th(J)),F.provide(mc,h);const V=F.unmount;Se.add(F),F.unmount=function(){Se.delete(F),Se.size<1&&(p=Zs,Le&&Le(),Le=null,h.value=Zs,ve=!1,K=!1),V()}}};function Me(F){return F.reduce((J,V)=>J.then(()=>Q(V)),Promise.resolve())}return Ee}function Ca(){return $n(Xr)}function jc(e){return $n(Zc)}const K_={},J_={class:"home"},Y_={class:"container"},X_={class:"actions"};function Q_(e,n){const i=qr("router-link");return g(),_("div",J_,[u("div",Y_,[n[1]||(n[1]=u("h1",null,"Volunteer Check-in System ",-1)),n[2]||(n[2]=u("p",{class:"subtitle"},"Manage race marshals and volunteers with ease",-1)),u("div",X_,[Oe(i,{to:"/admin/login",class:"btn btn-primary"},{default:Ge(()=>[...n[0]||(n[0]=[Ve(" Admin Portal ",-1)])]),_:1})]),n[3]||(n[3]=Vv('<div class="features" data-v-536ab6a4><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Admins</h3><ul data-v-536ab6a4><li data-v-536ab6a4>Create and manage events</li><li data-v-536ab6a4>Define marshal locations</li><li data-v-536ab6a4>Assign marshals to locations</li><li data-v-536ab6a4>Real-time check-in monitoring</li><li data-v-536ab6a4>Map view of all locations</li></ul></div><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Marshals</h3><ul data-v-536ab6a4><li data-v-536ab6a4>View your assigned location</li><li data-v-536ab6a4>Check in with GPS verification</li><li data-v-536ab6a4>Access emergency contact info</li><li data-v-536ab6a4>View all marshal locations</li></ul></div></div>',1))])])}const ey=Ze(K_,[["render",Q_],["__scopeId","data-v-536ab6a4"]]);function Ff(e,n){return function(){return e.apply(n,arguments)}}const{toString:ty}=Object.prototype,{getPrototypeOf:qc}=Object,{iterator:Qr,toStringTag:zf}=Symbol,el=(e=>n=>{const i=ty.call(n);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),qn=e=>(e=e.toLowerCase(),n=>el(n)===e),tl=e=>n=>typeof n===e,{isArray:uo}=Array,lo=tl("undefined");function La(e){return e!==null&&!lo(e)&&e.constructor!==null&&!lo(e.constructor)&&pn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Uf=qn("ArrayBuffer");function ny(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Uf(e.buffer),n}const sy=tl("string"),pn=tl("function"),Hf=tl("number"),xa=e=>e!==null&&typeof e=="object",iy=e=>e===!0||e===!1,gr=e=>{if(el(e)!=="object")return!1;const n=qc(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(zf in e)&&!(Qr in e)},oy=e=>{if(!xa(e)||La(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ay=qn("Date"),ry=qn("File"),ly=qn("Blob"),cy=qn("FileList"),uy=e=>xa(e)&&pn(e.pipe),dy=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||pn(e.append)&&((n=el(e))==="formdata"||n==="object"&&pn(e.toString)&&e.toString()==="[object FormData]"))},hy=qn("URLSearchParams"),[fy,py,my,vy]=["ReadableStream","Request","Response","Headers"].map(qn),gy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sa(e,n,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),uo(e))for(a=0,s=e.length;a<s;a++)n.call(null,e[a],a,e);else{if(La(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),l=r.length;let c;for(a=0;a<l;a++)c=r[a],n.call(null,e[c],c,e)}}function Vf(e,n){if(La(e))return null;n=n.toLowerCase();const i=Object.keys(e);let a=i.length,s;for(;a-- >0;)if(s=i[a],n===s.toLowerCase())return s;return null}const wi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zf=e=>!lo(e)&&e!==wi;function vc(){const{caseless:e,skipUndefined:n}=Zf(this)&&this||{},i={},a=(s,r)=>{const l=e&&Vf(i,r)||r;gr(i[l])&&gr(s)?i[l]=vc(i[l],s):gr(s)?i[l]=vc({},s):uo(s)?i[l]=s.slice():(!n||!lo(s))&&(i[l]=s)};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Sa(arguments[s],a);return i}const _y=(e,n,i,{allOwnKeys:a}={})=>(Sa(n,(s,r)=>{i&&pn(s)?e[r]=Ff(s,i):e[r]=s},{allOwnKeys:a}),e),yy=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),by=(e,n,i,a)=>{e.prototype=Object.create(n.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),i&&Object.assign(e.prototype,i)},ky=(e,n,i,a)=>{let s,r,l;const c={};if(n=n||{},e==null)return n;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)l=s[r],(!a||a(l,e,n))&&!c[l]&&(n[l]=e[l],c[l]=!0);e=i!==!1&&qc(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},wy=(e,n,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=n.length;const a=e.indexOf(n,i);return a!==-1&&a===i},Cy=e=>{if(!e)return null;if(uo(e))return e;let n=e.length;if(!Hf(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=e[n];return i},Ly=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&qc(Uint8Array)),xy=(e,n)=>{const a=(e&&e[Qr]).call(e);let s;for(;(s=a.next())&&!s.done;){const r=s.value;n.call(e,r[0],r[1])}},Sy=(e,n)=>{let i;const a=[];for(;(i=e.exec(n))!==null;)a.push(i);return a},Ty=qn("HTMLFormElement"),Iy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,a,s){return a.toUpperCase()+s}),Pd=(({hasOwnProperty:e})=>(n,i)=>e.call(n,i))(Object.prototype),Ay=qn("RegExp"),jf=(e,n)=>{const i=Object.getOwnPropertyDescriptors(e),a={};Sa(i,(s,r)=>{let l;(l=n(s,r,e))!==!1&&(a[r]=l||s)}),Object.defineProperties(e,a)},Ey=e=>{jf(e,(n,i)=>{if(pn(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=e[i];if(pn(a)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},My=(e,n)=>{const i={},a=s=>{s.forEach(r=>{i[r]=!0})};return uo(e)?a(e):a(String(e).split(n)),i},$y=()=>{},Py=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function Dy(e){return!!(e&&pn(e.append)&&e[zf]==="FormData"&&e[Qr])}const Oy=e=>{const n=new Array(10),i=(a,s)=>{if(xa(a)){if(n.indexOf(a)>=0)return;if(La(a))return a;if(!("toJSON"in a)){n[s]=a;const r=uo(a)?[]:{};return Sa(a,(l,c)=>{const h=i(l,s+1);!lo(h)&&(r[c]=h)}),n[s]=void 0,r}}return a};return i(e,0)},Ry=qn("AsyncFunction"),Ny=e=>e&&(xa(e)||pn(e))&&pn(e.then)&&pn(e.catch),qf=((e,n)=>e?setImmediate:n?((i,a)=>(wi.addEventListener("message",({source:s,data:r})=>{s===wi&&r===i&&a.length&&a.shift()()},!1),s=>{a.push(s),wi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",pn(wi.postMessage)),By=typeof queueMicrotask<"u"?queueMicrotask.bind(wi):typeof process<"u"&&process.nextTick||qf,Fy=e=>e!=null&&pn(e[Qr]),oe={isArray:uo,isArrayBuffer:Uf,isBuffer:La,isFormData:dy,isArrayBufferView:ny,isString:sy,isNumber:Hf,isBoolean:iy,isObject:xa,isPlainObject:gr,isEmptyObject:oy,isReadableStream:fy,isRequest:py,isResponse:my,isHeaders:vy,isUndefined:lo,isDate:ay,isFile:ry,isBlob:ly,isRegExp:Ay,isFunction:pn,isStream:uy,isURLSearchParams:hy,isTypedArray:Ly,isFileList:cy,forEach:Sa,merge:vc,extend:_y,trim:gy,stripBOM:yy,inherits:by,toFlatObject:ky,kindOf:el,kindOfTest:qn,endsWith:wy,toArray:Cy,forEachEntry:xy,matchAll:Sy,isHTMLForm:Ty,hasOwnProperty:Pd,hasOwnProp:Pd,reduceDescriptors:jf,freezeMethods:Ey,toObjectSet:My,toCamelCase:Iy,noop:$y,toFiniteNumber:Py,findKey:Vf,global:wi,isContextDefined:Zf,isSpecCompliantForm:Dy,toJSONObject:Oy,isAsyncFn:Ry,isThenable:Ny,setImmediate:qf,asap:By,isIterable:Fy};function at(e,n,i,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}oe.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const Wf=at.prototype,Gf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Gf[e]={value:e}});Object.defineProperties(at,Gf);Object.defineProperty(Wf,"isAxiosError",{value:!0});at.from=(e,n,i,a,s,r)=>{const l=Object.create(Wf);oe.toFlatObject(e,l,function(f){return f!==Error.prototype},p=>p!=="isAxiosError");const c=e&&e.message?e.message:"Error",h=n==null&&e?e.code:n;return at.call(l,c,h,i,a,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",r&&Object.assign(l,r),l};const zy=null;function gc(e){return oe.isPlainObject(e)||oe.isArray(e)}function Kf(e){return oe.endsWith(e,"[]")?e.slice(0,-2):e}function Dd(e,n,i){return e?e.concat(n).map(function(s,r){return s=Kf(s),!i&&r?"["+s+"]":s}).join(i?".":""):n}function Uy(e){return oe.isArray(e)&&!e.some(gc)}const Hy=oe.toFlatObject(oe,{},null,function(n){return/^is[A-Z]/.test(n)});function nl(e,n,i){if(!oe.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,i=oe.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,D){return!oe.isUndefined(D[I])});const a=i.metaTokens,s=i.visitor||f,r=i.dots,l=i.indexes,h=(i.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(n);if(!oe.isFunction(s))throw new TypeError("visitor must be a function");function p(w){if(w===null)return"";if(oe.isDate(w))return w.toISOString();if(oe.isBoolean(w))return w.toString();if(!h&&oe.isBlob(w))throw new at("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(w)||oe.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,I,D){let A=w;if(w&&!D&&typeof w=="object"){if(oe.endsWith(I,"{}"))I=a?I:I.slice(0,-2),w=JSON.stringify(w);else if(oe.isArray(w)&&Uy(w)||(oe.isFileList(w)||oe.endsWith(I,"[]"))&&(A=oe.toArray(w)))return I=Kf(I),A.forEach(function(C,M){!(oe.isUndefined(C)||C===null)&&n.append(l===!0?Dd([I],M,r):l===null?I:I+"[]",p(C))}),!1}return gc(w)?!0:(n.append(Dd(D,I,r),p(w)),!1)}const v=[],T=Object.assign(Hy,{defaultVisitor:f,convertValue:p,isVisitable:gc});function k(w,I){if(!oe.isUndefined(w)){if(v.indexOf(w)!==-1)throw Error("Circular reference detected in "+I.join("."));v.push(w),oe.forEach(w,function(A,b){(!(oe.isUndefined(A)||A===null)&&s.call(n,A,oe.isString(b)?b.trim():b,I,T))===!0&&k(A,I?I.concat(b):[b])}),v.pop()}}if(!oe.isObject(e))throw new TypeError("data must be an object");return k(e),n}function Od(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return n[a]})}function Wc(e,n){this._pairs=[],e&&nl(e,this,n)}const Jf=Wc.prototype;Jf.append=function(n,i){this._pairs.push([n,i])};Jf.toString=function(n){const i=n?function(a){return n.call(this,a,Od)}:Od;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function Vy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yf(e,n,i){if(!n)return e;const a=i&&i.encode||Vy;oe.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let r;if(s?r=s(n,i):r=oe.isURLSearchParams(n)?n.toString():new Wc(n,i).toString(a),r){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Rd{constructor(){this.handlers=[]}use(n,i,a){return this.handlers.push({fulfilled:n,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){oe.forEach(this.handlers,function(a){a!==null&&n(a)})}}const Xf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zy=typeof URLSearchParams<"u"?URLSearchParams:Wc,jy=typeof FormData<"u"?FormData:null,qy=typeof Blob<"u"?Blob:null,Wy={isBrowser:!0,classes:{URLSearchParams:Zy,FormData:jy,Blob:qy},protocols:["http","https","file","blob","url","data"]},Gc=typeof window<"u"&&typeof document<"u",_c=typeof navigator=="object"&&navigator||void 0,Gy=Gc&&(!_c||["ReactNative","NativeScript","NS"].indexOf(_c.product)<0),Ky=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Jy=Gc&&window.location.href||"http://localhost",Yy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gc,hasStandardBrowserEnv:Gy,hasStandardBrowserWebWorkerEnv:Ky,navigator:_c,origin:Jy},Symbol.toStringTag,{value:"Module"})),tn={...Yy,...Wy};function Xy(e,n){return nl(e,new tn.classes.URLSearchParams,{visitor:function(i,a,s,r){return tn.isNode&&oe.isBuffer(i)?(this.append(a,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...n})}function Qy(e){return oe.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function eb(e){const n={},i=Object.keys(e);let a;const s=i.length;let r;for(a=0;a<s;a++)r=i[a],n[r]=e[r];return n}function Qf(e){function n(i,a,s,r){let l=i[r++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),h=r>=i.length;return l=!l&&oe.isArray(s)?s.length:l,h?(oe.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!c):((!s[l]||!oe.isObject(s[l]))&&(s[l]=[]),n(i,a,s[l],r)&&oe.isArray(s[l])&&(s[l]=eb(s[l])),!c)}if(oe.isFormData(e)&&oe.isFunction(e.entries)){const i={};return oe.forEachEntry(e,(a,s)=>{n(Qy(a),s,i,0)}),i}return null}function tb(e,n,i){if(oe.isString(e))try{return(n||JSON.parse)(e),oe.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}const Ta={transitional:Xf,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const a=i.getContentType()||"",s=a.indexOf("application/json")>-1,r=oe.isObject(n);if(r&&oe.isHTMLForm(n)&&(n=new FormData(n)),oe.isFormData(n))return s?JSON.stringify(Qf(n)):n;if(oe.isArrayBuffer(n)||oe.isBuffer(n)||oe.isStream(n)||oe.isFile(n)||oe.isBlob(n)||oe.isReadableStream(n))return n;if(oe.isArrayBufferView(n))return n.buffer;if(oe.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let c;if(r){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Xy(n,this.formSerializer).toString();if((c=oe.isFileList(n))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return nl(c?{"files[]":n}:n,h&&new h,this.formSerializer)}}return r||s?(i.setContentType("application/json",!1),tb(n)):n}],transformResponse:[function(n){const i=this.transitional||Ta.transitional,a=i&&i.forcedJSONParsing,s=this.responseType==="json";if(oe.isResponse(n)||oe.isReadableStream(n))return n;if(n&&oe.isString(n)&&(a&&!this.responseType||s)){const l=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(n,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?at.from(c,at.ERR_BAD_RESPONSE,this,null,this.response):c}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tn.classes.FormData,Blob:tn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],e=>{Ta.headers[e]={}});const nb=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sb=e=>{const n={};let i,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),i=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!i||n[i]&&nb[i])&&(i==="set-cookie"?n[i]?n[i].push(a):n[i]=[a]:n[i]=n[i]?n[i]+", "+a:a)}),n},Nd=Symbol("internals");function jo(e){return e&&String(e).trim().toLowerCase()}function _r(e){return e===!1||e==null?e:oe.isArray(e)?e.map(_r):String(e)}function ib(e){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(e);)n[a[1]]=a[2];return n}const ob=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ql(e,n,i,a,s){if(oe.isFunction(a))return a.call(this,n,i);if(s&&(n=i),!!oe.isString(n)){if(oe.isString(a))return n.indexOf(a)!==-1;if(oe.isRegExp(a))return a.test(n)}}function ab(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,a)=>i.toUpperCase()+a)}function rb(e,n){const i=oe.toCamelCase(" "+n);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+i,{value:function(s,r,l){return this[a].call(this,n,s,r,l)},configurable:!0})})}let mn=class{constructor(n){n&&this.set(n)}set(n,i,a){const s=this;function r(c,h,p){const f=jo(h);if(!f)throw new Error("header name must be a non-empty string");const v=oe.findKey(s,f);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||h]=_r(c))}const l=(c,h)=>oe.forEach(c,(p,f)=>r(p,f,h));if(oe.isPlainObject(n)||n instanceof this.constructor)l(n,i);else if(oe.isString(n)&&(n=n.trim())&&!ob(n))l(sb(n),i);else if(oe.isObject(n)&&oe.isIterable(n)){let c={},h,p;for(const f of n){if(!oe.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[p=f[0]]=(h=c[p])?oe.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}l(c,i)}else n!=null&&r(i,n,a);return this}get(n,i){if(n=jo(n),n){const a=oe.findKey(this,n);if(a){const s=this[a];if(!i)return s;if(i===!0)return ib(s);if(oe.isFunction(i))return i.call(this,s,a);if(oe.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=jo(n),n){const a=oe.findKey(this,n);return!!(a&&this[a]!==void 0&&(!i||ql(this,this[a],a,i)))}return!1}delete(n,i){const a=this;let s=!1;function r(l){if(l=jo(l),l){const c=oe.findKey(a,l);c&&(!i||ql(a,a[c],c,i))&&(delete a[c],s=!0)}}return oe.isArray(n)?n.forEach(r):r(n),s}clear(n){const i=Object.keys(this);let a=i.length,s=!1;for(;a--;){const r=i[a];(!n||ql(this,this[r],r,n,!0))&&(delete this[r],s=!0)}return s}normalize(n){const i=this,a={};return oe.forEach(this,(s,r)=>{const l=oe.findKey(a,r);if(l){i[l]=_r(s),delete i[r];return}const c=n?ab(r):String(r).trim();c!==r&&delete i[r],i[c]=_r(s),a[c]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return oe.forEach(this,(a,s)=>{a!=null&&a!==!1&&(i[s]=n&&oe.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const a=new this(n);return i.forEach(s=>a.set(s)),a}static accessor(n){const a=(this[Nd]=this[Nd]={accessors:{}}).accessors,s=this.prototype;function r(l){const c=jo(l);a[c]||(rb(s,l),a[c]=!0)}return oe.isArray(n)?n.forEach(r):r(n),this}};mn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(mn.prototype,({value:e},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(a){this[i]=a}}});oe.freezeMethods(mn);function Wl(e,n){const i=this||Ta,a=n||i,s=mn.from(a.headers);let r=a.data;return oe.forEach(e,function(c){r=c.call(i,r,s.normalize(),n?n.status:void 0)}),s.normalize(),r}function ep(e){return!!(e&&e.__CANCEL__)}function ho(e,n,i){at.call(this,e??"canceled",at.ERR_CANCELED,n,i),this.name="CanceledError"}oe.inherits(ho,at,{__CANCEL__:!0});function tp(e,n,i){const a=i.config.validateStatus;!i.status||!a||a(i.status)?e(i):n(new at("Request failed with status code "+i.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function lb(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function cb(e,n){e=e||10;const i=new Array(e),a=new Array(e);let s=0,r=0,l;return n=n!==void 0?n:1e3,function(h){const p=Date.now(),f=a[r];l||(l=p),i[s]=h,a[s]=p;let v=r,T=0;for(;v!==s;)T+=i[v++],v=v%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),p-l<n)return;const k=f&&p-f;return k?Math.round(T*1e3/k):void 0}}function ub(e,n){let i=0,a=1e3/n,s,r;const l=(p,f=Date.now())=>{i=f,s=null,r&&(clearTimeout(r),r=null),e(...p)};return[(...p)=>{const f=Date.now(),v=f-i;v>=a?l(p,f):(s=p,r||(r=setTimeout(()=>{r=null,l(s)},a-v)))},()=>s&&l(s)]}const Er=(e,n,i=3)=>{let a=0;const s=cb(50,250);return ub(r=>{const l=r.loaded,c=r.lengthComputable?r.total:void 0,h=l-a,p=s(h),f=l<=c;a=l;const v={loaded:l,total:c,progress:c?l/c:void 0,bytes:h,rate:p||void 0,estimated:p&&c&&f?(c-l)/p:void 0,event:r,lengthComputable:c!=null,[n?"download":"upload"]:!0};e(v)},i)},Bd=(e,n)=>{const i=e!=null;return[a=>n[0]({lengthComputable:i,total:e,loaded:a}),n[1]]},Fd=e=>(...n)=>oe.asap(()=>e(...n)),db=tn.hasStandardBrowserEnv?((e,n)=>i=>(i=new URL(i,tn.origin),e.protocol===i.protocol&&e.host===i.host&&(n||e.port===i.port)))(new URL(tn.origin),tn.navigator&&/(msie|trident)/i.test(tn.navigator.userAgent)):()=>!0,hb=tn.hasStandardBrowserEnv?{write(e,n,i,a,s,r,l){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(n)}`];oe.isNumber(i)&&c.push(`expires=${new Date(i).toUTCString()}`),oe.isString(a)&&c.push(`path=${a}`),oe.isString(s)&&c.push(`domain=${s}`),r===!0&&c.push("secure"),oe.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function fb(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function pb(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function np(e,n,i){let a=!fb(n);return e&&(a||i==!1)?pb(e,n):n}const zd=e=>e instanceof mn?{...e}:e;function Ii(e,n){n=n||{};const i={};function a(p,f,v,T){return oe.isPlainObject(p)&&oe.isPlainObject(f)?oe.merge.call({caseless:T},p,f):oe.isPlainObject(f)?oe.merge({},f):oe.isArray(f)?f.slice():f}function s(p,f,v,T){if(oe.isUndefined(f)){if(!oe.isUndefined(p))return a(void 0,p,v,T)}else return a(p,f,v,T)}function r(p,f){if(!oe.isUndefined(f))return a(void 0,f)}function l(p,f){if(oe.isUndefined(f)){if(!oe.isUndefined(p))return a(void 0,p)}else return a(void 0,f)}function c(p,f,v){if(v in n)return a(p,f);if(v in e)return a(void 0,p)}const h={url:r,method:r,data:r,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(p,f,v)=>s(zd(p),zd(f),v,!0)};return oe.forEach(Object.keys({...e,...n}),function(f){const v=h[f]||s,T=v(e[f],n[f],f);oe.isUndefined(T)&&v!==c||(i[f]=T)}),i}const sp=e=>{const n=Ii({},e);let{data:i,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:r,headers:l,auth:c}=n;if(n.headers=l=mn.from(l),n.url=Yf(np(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),oe.isFormData(i)){if(tn.hasStandardBrowserEnv||tn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(oe.isFunction(i.getHeaders)){const h=i.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([f,v])=>{p.includes(f.toLowerCase())&&l.set(f,v)})}}if(tn.hasStandardBrowserEnv&&(a&&oe.isFunction(a)&&(a=a(n)),a||a!==!1&&db(n.url))){const h=s&&r&&hb.read(r);h&&l.set(s,h)}return n},mb=typeof XMLHttpRequest<"u",vb=mb&&function(e){return new Promise(function(i,a){const s=sp(e);let r=s.data;const l=mn.from(s.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:p}=s,f,v,T,k,w;function I(){k&&k(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let D=new XMLHttpRequest;D.open(s.method.toUpperCase(),s.url,!0),D.timeout=s.timeout;function A(){if(!D)return;const C=mn.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),x={data:!c||c==="text"||c==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:C,config:e,request:D};tp(function(P){i(P),I()},function(P){a(P),I()},x),D=null}"onloadend"in D?D.onloadend=A:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(A)},D.onabort=function(){D&&(a(new at("Request aborted",at.ECONNABORTED,e,D)),D=null)},D.onerror=function(M){const x=M&&M.message?M.message:"Network Error",E=new at(x,at.ERR_NETWORK,e,D);E.event=M||null,a(E),D=null},D.ontimeout=function(){let M=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const x=s.transitional||Xf;s.timeoutErrorMessage&&(M=s.timeoutErrorMessage),a(new at(M,x.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,e,D)),D=null},r===void 0&&l.setContentType(null),"setRequestHeader"in D&&oe.forEach(l.toJSON(),function(M,x){D.setRequestHeader(x,M)}),oe.isUndefined(s.withCredentials)||(D.withCredentials=!!s.withCredentials),c&&c!=="json"&&(D.responseType=s.responseType),p&&([T,w]=Er(p,!0),D.addEventListener("progress",T)),h&&D.upload&&([v,k]=Er(h),D.upload.addEventListener("progress",v),D.upload.addEventListener("loadend",k)),(s.cancelToken||s.signal)&&(f=C=>{D&&(a(!C||C.type?new ho(null,e,D):C),D.abort(),D=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const b=lb(s.url);if(b&&tn.protocols.indexOf(b)===-1){a(new at("Unsupported protocol "+b+":",at.ERR_BAD_REQUEST,e));return}D.send(r||null)})},gb=(e,n)=>{const{length:i}=e=e?e.filter(Boolean):[];if(n||i){let a=new AbortController,s;const r=function(p){if(!s){s=!0,c();const f=p instanceof Error?p:this.reason;a.abort(f instanceof at?f:new ho(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,r(new at(`timeout ${n} of ms exceeded`,at.ETIMEDOUT))},n);const c=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(r):p.removeEventListener("abort",r)}),e=null)};e.forEach(p=>p.addEventListener("abort",r));const{signal:h}=a;return h.unsubscribe=()=>oe.asap(c),h}},_b=function*(e,n){let i=e.byteLength;if(i<n){yield e;return}let a=0,s;for(;a<i;)s=a+n,yield e.slice(a,s),a=s},yb=async function*(e,n){for await(const i of bb(e))yield*_b(i,n)},bb=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:i,value:a}=await n.read();if(i)break;yield a}}finally{await n.cancel()}},Ud=(e,n,i,a)=>{const s=yb(e,n);let r=0,l,c=h=>{l||(l=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:p,value:f}=await s.next();if(p){c(),h.close();return}let v=f.byteLength;if(i){let T=r+=v;i(T)}h.enqueue(new Uint8Array(f))}catch(p){throw c(p),p}},cancel(h){return c(h),s.return()}},{highWaterMark:2})},Hd=64*1024,{isFunction:rr}=oe,kb=(({Request:e,Response:n})=>({Request:e,Response:n}))(oe.global),{ReadableStream:Vd,TextEncoder:Zd}=oe.global,jd=(e,...n)=>{try{return!!e(...n)}catch{return!1}},wb=e=>{e=oe.merge.call({skipUndefined:!0},kb,e);const{fetch:n,Request:i,Response:a}=e,s=n?rr(n):typeof fetch=="function",r=rr(i),l=rr(a);if(!s)return!1;const c=s&&rr(Vd),h=s&&(typeof Zd=="function"?(w=>I=>w.encode(I))(new Zd):async w=>new Uint8Array(await new i(w).arrayBuffer())),p=r&&c&&jd(()=>{let w=!1;const I=new i(tn.origin,{body:new Vd,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!I}),f=l&&c&&jd(()=>oe.isReadableStream(new a("").body)),v={stream:f&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!v[w]&&(v[w]=(I,D)=>{let A=I&&I[w];if(A)return A.call(I);throw new at(`Response type '${w}' is not supported`,at.ERR_NOT_SUPPORT,D)})});const T=async w=>{if(w==null)return 0;if(oe.isBlob(w))return w.size;if(oe.isSpecCompliantForm(w))return(await new i(tn.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(w)||oe.isArrayBuffer(w))return w.byteLength;if(oe.isURLSearchParams(w)&&(w=w+""),oe.isString(w))return(await h(w)).byteLength},k=async(w,I)=>{const D=oe.toFiniteNumber(w.getContentLength());return D??T(I)};return async w=>{let{url:I,method:D,data:A,signal:b,cancelToken:C,timeout:M,onDownloadProgress:x,onUploadProgress:E,responseType:P,headers:X,withCredentials:Q="same-origin",fetchOptions:le}=sp(w),ke=n||fetch;P=P?(P+"").toLowerCase():"text";let me=gb([b,C&&C.toAbortSignal()],M),Le=null;const ye=me&&me.unsubscribe&&(()=>{me.unsubscribe()});let be;try{if(E&&p&&D!=="get"&&D!=="head"&&(be=await k(X,A))!==0){let ce=new i(I,{method:"POST",body:A,duplex:"half"}),Y;if(oe.isFormData(A)&&(Y=ce.headers.get("content-type"))&&X.setContentType(Y),ce.body){const[ve,Se]=Bd(be,Er(Fd(E)));A=Ud(ce.body,Hd,ve,Se)}}oe.isString(Q)||(Q=Q?"include":"omit");const de=r&&"credentials"in i.prototype,K={...le,signal:me,method:D.toUpperCase(),headers:X.normalize().toJSON(),body:A,duplex:"half",credentials:de?Q:void 0};Le=r&&new i(I,K);let Z=await(r?ke(Le,le):ke(I,K));const te=f&&(P==="stream"||P==="response");if(f&&(x||te&&ye)){const ce={};["status","statusText","headers"].forEach(Ee=>{ce[Ee]=Z[Ee]});const Y=oe.toFiniteNumber(Z.headers.get("content-length")),[ve,Se]=x&&Bd(Y,Er(Fd(x),!0))||[];Z=new a(Ud(Z.body,Hd,ve,()=>{Se&&Se(),ye&&ye()}),ce)}P=P||"text";let j=await v[oe.findKey(v,P)||"text"](Z,w);return!te&&ye&&ye(),await new Promise((ce,Y)=>{tp(ce,Y,{data:j,headers:mn.from(Z.headers),status:Z.status,statusText:Z.statusText,config:w,request:Le})})}catch(de){throw ye&&ye(),de&&de.name==="TypeError"&&/Load failed|fetch/i.test(de.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,w,Le),{cause:de.cause||de}):at.from(de,de&&de.code,w,Le)}}},Cb=new Map,ip=e=>{let n=e&&e.env||{};const{fetch:i,Request:a,Response:s}=n,r=[a,s,i];let l=r.length,c=l,h,p,f=Cb;for(;c--;)h=r[c],p=f.get(h),p===void 0&&f.set(h,p=c?new Map:wb(n)),f=p;return p};ip();const Kc={http:zy,xhr:vb,fetch:{get:ip}};oe.forEach(Kc,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const qd=e=>`- ${e}`,Lb=e=>oe.isFunction(e)||e===null||e===!1;function xb(e,n){e=oe.isArray(e)?e:[e];const{length:i}=e;let a,s;const r={};for(let l=0;l<i;l++){a=e[l];let c;if(s=a,!Lb(a)&&(s=Kc[(c=String(a)).toLowerCase()],s===void 0))throw new at(`Unknown adapter '${c}'`);if(s&&(oe.isFunction(s)||(s=s.get(n))))break;r[c||"#"+l]=s}if(!s){const l=Object.entries(r).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=i?l.length>1?`since :
`+l.map(qd).join(`
`):" "+qd(l[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const op={getAdapter:xb,adapters:Kc};function Gl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ho(null,e)}function Wd(e){return Gl(e),e.headers=mn.from(e.headers),e.data=Wl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),op.getAdapter(e.adapter||Ta.adapter,e)(e).then(function(a){return Gl(e),a.data=Wl.call(e,e.transformResponse,a),a.headers=mn.from(a.headers),a},function(a){return ep(a)||(Gl(e),a&&a.response&&(a.response.data=Wl.call(e,e.transformResponse,a.response),a.response.headers=mn.from(a.response.headers))),Promise.reject(a)})}const ap="1.13.2",sl={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{sl[e]=function(a){return typeof a===e||"a"+(n<1?"n ":" ")+e}});const Gd={};sl.transitional=function(n,i,a){function s(r,l){return"[Axios v"+ap+"] Transitional option '"+r+"'"+l+(a?". "+a:"")}return(r,l,c)=>{if(n===!1)throw new at(s(l," has been removed"+(i?" in "+i:"")),at.ERR_DEPRECATED);return i&&!Gd[l]&&(Gd[l]=!0,console.warn(s(l," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(r,l,c):!0}};sl.spelling=function(n){return(i,a)=>(console.warn(`${a} is likely a misspelling of ${n}`),!0)};function Sb(e,n,i){if(typeof e!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const r=a[s],l=n[r];if(l){const c=e[r],h=c===void 0||l(c,r,e);if(h!==!0)throw new at("option "+r+" must be "+h,at.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new at("Unknown option "+r,at.ERR_BAD_OPTION)}}const yr={assertOptions:Sb,validators:sl},Jn=yr.validators;let Si=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Rd,response:new Rd}}async request(n,i){try{return await this._request(n,i)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?r&&!String(a.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+r):a.stack=r}catch{}}throw a}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ii(this.defaults,i);const{transitional:a,paramsSerializer:s,headers:r}=i;a!==void 0&&yr.assertOptions(a,{silentJSONParsing:Jn.transitional(Jn.boolean),forcedJSONParsing:Jn.transitional(Jn.boolean),clarifyTimeoutError:Jn.transitional(Jn.boolean)},!1),s!=null&&(oe.isFunction(s)?i.paramsSerializer={serialize:s}:yr.assertOptions(s,{encode:Jn.function,serialize:Jn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),yr.assertOptions(i,{baseUrl:Jn.spelling("baseURL"),withXsrfToken:Jn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=r&&oe.merge(r.common,r[i.method]);r&&oe.forEach(["delete","get","head","post","put","patch","common"],w=>{delete r[w]}),i.headers=mn.concat(l,r);const c=[];let h=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(i)===!1||(h=h&&I.synchronous,c.unshift(I.fulfilled,I.rejected))});const p=[];this.interceptors.response.forEach(function(I){p.push(I.fulfilled,I.rejected)});let f,v=0,T;if(!h){const w=[Wd.bind(this),void 0];for(w.unshift(...c),w.push(...p),T=w.length,f=Promise.resolve(i);v<T;)f=f.then(w[v++],w[v++]);return f}T=c.length;let k=i;for(;v<T;){const w=c[v++],I=c[v++];try{k=w(k)}catch(D){I.call(this,D);break}}try{f=Wd.call(this,k)}catch(w){return Promise.reject(w)}for(v=0,T=p.length;v<T;)f=f.then(p[v++],p[v++]);return f}getUri(n){n=Ii(this.defaults,n);const i=np(n.baseURL,n.url,n.allowAbsoluteUrls);return Yf(i,n.params,n.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(n){Si.prototype[n]=function(i,a){return this.request(Ii(a||{},{method:n,url:i,data:(a||{}).data}))}});oe.forEach(["post","put","patch"],function(n){function i(a){return function(r,l,c){return this.request(Ii(c||{},{method:n,headers:a?{"Content-Type":"multipart/form-data"}:{},url:r,data:l}))}}Si.prototype[n]=i(),Si.prototype[n+"Form"]=i(!0)});let Tb=class rp{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const a=this;this.promise.then(s=>{if(!a._listeners)return;let r=a._listeners.length;for(;r-- >0;)a._listeners[r](s);a._listeners=null}),this.promise.then=s=>{let r;const l=new Promise(c=>{a.subscribe(c),r=c}).then(s);return l.cancel=function(){a.unsubscribe(r)},l},n(function(r,l,c){a.reason||(a.reason=new ho(r,l,c),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=a=>{n.abort(a)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new rp(function(s){n=s}),cancel:n}}};function Ib(e){return function(i){return e.apply(null,i)}}function Ab(e){return oe.isObject(e)&&e.isAxiosError===!0}const yc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(yc).forEach(([e,n])=>{yc[n]=e});function lp(e){const n=new Si(e),i=Ff(Si.prototype.request,n);return oe.extend(i,Si.prototype,n,{allOwnKeys:!0}),oe.extend(i,n,null,{allOwnKeys:!0}),i.create=function(s){return lp(Ii(e,s))},i}const Rt=lp(Ta);Rt.Axios=Si;Rt.CanceledError=ho;Rt.CancelToken=Tb;Rt.isCancel=ep;Rt.VERSION=ap;Rt.toFormData=nl;Rt.AxiosError=at;Rt.Cancel=Rt.CanceledError;Rt.all=function(n){return Promise.all(n)};Rt.spread=Ib;Rt.isAxiosError=Ab;Rt.mergeConfig=Ii;Rt.AxiosHeaders=mn;Rt.formToJSON=e=>Qf(oe.isHTMLForm(e)?new FormData(e):e);Rt.getAdapter=op.getAdapter;Rt.HttpStatusCode=yc;Rt.default=Rt;const{Axios:wN,AxiosError:CN,CanceledError:LN,isCancel:xN,CancelToken:SN,VERSION:TN,all:IN,Cancel:AN,isAxiosError:EN,spread:MN,toFormData:$N,AxiosHeaders:PN,HttpStatusCode:DN,formToJSON:ON,getAdapter:RN,mergeConfig:NN}=Rt,Eb="https://sterobson-volunteercheckin-testing.azurewebsites.net/api",Mb="VolunteerCheckinOffline",$b=1;let zn=null;async function Os(){return zn||new Promise((e,n)=>{const i=indexedDB.open(Mb,$b);i.onerror=()=>{console.error("Failed to open IndexedDB:",i.error),n(i.error)},i.onsuccess=()=>{zn=i.result,e(zn)},i.onupgradeneeded=a=>{const s=a.target.result;s.objectStoreNames.contains("eventData")||s.createObjectStore("eventData",{keyPath:"eventId"}),s.objectStoreNames.contains("pendingActions")||s.createObjectStore("pendingActions",{keyPath:"id",autoIncrement:!0}).createIndex("createdAt","createdAt",{unique:!1}),s.objectStoreNames.contains("syncMeta")||s.createObjectStore("syncMeta",{keyPath:"key"})}})}async function ga(e,n){return await Os(),new Promise((i,a)=>{const s=zn.transaction(["eventData","syncMeta"],"readwrite"),r=s.objectStore("eventData"),l=s.objectStore("syncMeta"),c={eventId:e,...n,cachedAt:new Date().toISOString()};r.put(c),l.put({key:`lastSync_${e}`,value:new Date().toISOString()}),s.oncomplete=()=>i(),s.onerror=()=>a(s.error)})}async function ei(e){return await Os(),new Promise((n,i)=>{const r=zn.transaction(["eventData"],"readonly").objectStore("eventData").get(e);r.onsuccess=()=>n(r.result||null),r.onerror=()=>i(r.error)})}async function Go(e,n,i){const a=await ei(e);a&&(a[n]=i,a.cachedAt=new Date().toISOString(),await ga(e,a))}async function Pb(e){return await Os(),new Promise((n,i)=>{const s=zn.transaction(["pendingActions"],"readwrite").objectStore("pendingActions"),r={...e,createdAt:new Date().toISOString(),attempts:0,lastAttempt:null,status:"pending"},l=s.add(r);l.onsuccess=()=>n(l.result),l.onerror=()=>i(l.error)})}async function cp(){return await Os(),new Promise((e,n)=>{const r=zn.transaction(["pendingActions"],"readonly").objectStore("pendingActions").index("createdAt").getAll();r.onsuccess=()=>{const l=r.result.filter(c=>c.status==="pending"||c.status==="retrying");e(l)},r.onerror=()=>n(r.error)})}async function Mr(){return(await cp()).length}async function Kd(e,n){return await Os(),new Promise((i,a)=>{const s=zn.transaction(["pendingActions"],"readwrite"),r=s.objectStore("pendingActions"),l=r.get(e);l.onsuccess=()=>{const c=l.result;c&&(Object.assign(c,n),r.put(c))},s.oncomplete=()=>i(),s.onerror=()=>a(s.error)})}async function Jd(e){return await Os(),new Promise((n,i)=>{const r=zn.transaction(["pendingActions"],"readwrite").objectStore("pendingActions").delete(e);r.onsuccess=()=>n(),r.onerror=()=>i(r.error)})}async function Db(e){return await Os(),new Promise((n,i)=>{const r=zn.transaction(["syncMeta"],"readonly").objectStore("syncMeta").get(`lastSync_${e}`);r.onsuccess=()=>n(r.result?.value||null),r.onerror=()=>i(r.error)})}const $e=Rt.create({baseURL:Eb,headers:{"Content-Type":"application/json"},timeout:15e3});let bc=!1;async function Ob(){}function Yd(e){const n=[/\/events\/([^\/]+)/,/\/assignments\/([^\/]+)/,/\/locations\/([^\/]+)/,/\/checklist-items\/([^\/]+)/,/\/areas\/([^\/]+)/,/\/marshals\/([^\/]+)/];for(const i of n){const a=e.match(i);if(a)return a[1]}return null}function Rb(e){return!!(!e.response&&e.request||e.response&&e.response.status>=500||e.code==="ECONNABORTED")}$e.interceptors.request.use(e=>{const n=localStorage.getItem("adminEmail");n&&(e.headers["X-Admin-Email"]=n);const i=localStorage.getItem("sessionToken");return i&&(e.headers.Authorization=`Bearer ${i}`),e});$e.interceptors.response.use(e=>{bc=!1;const n=e.config.url,i=Yd(n);return e.config.method,e},async e=>{const n=e.config;if(Rb(e)&&(bc=!0,n.method==="get")){const i=Yd(n.url);if(i){const a=await ei(i);if(a)return console.log("Returning cached data for:",n.url),Promise.resolve({data:a,status:200,statusText:"OK (cached)",headers:{},config:n,cached:!0})}}return Promise.reject(e)});async function yn(e,n,i){return await Pb({type:e,payload:n,eventId:n.eventId}),await Ob(),{data:i,status:200,statusText:"OK (queued)",queued:!0}}function Yt(){return bc||!navigator.onLine}const es={requestLogin:e=>$e.post("/auth/request-login",{email:e}),verifyToken:e=>$e.post("/auth/verify-token",{token:e}),instantLogin:e=>$e.post("/auth/instant-login",{email:e}),createAdmin:e=>$e.post("/auth/create-admin",{email:e}),marshalLogin:(e,n)=>$e.post("/auth/marshal-login",{eventId:e,magicCode:n}),getMe:e=>$e.get("/auth/me",{params:{eventId:e}}),logout:()=>$e.post("/auth/logout")},lr={getProfile:()=>$e.get("/auth/profile"),updateProfile:e=>$e.put("/auth/profile",e),getPerson:(e,n)=>$e.get(`/people/${e}`,{params:{eventId:n}}),updatePerson:(e,n,i)=>$e.put(`/people/${e}`,i,{params:{eventId:n}})},yi={create:e=>$e.post("/events",e),getAll:()=>$e.get("/events"),getById:e=>$e.get(`/events/${e}`),update:(e,n)=>$e.put(`/events/${e}`,n),delete:e=>$e.delete(`/events/${e}`),uploadGpx:(e,n)=>{const i=new FormData;return i.append("gpx",n),$e.post(`/events/${e}/upload-gpx`,i,{headers:{"Content-Type":"multipart/form-data"}})}},Js={create:e=>$e.post("/locations",e),getById:(e,n)=>$e.get(`/locations/${e}/${n}`),getByEvent:e=>$e.get(`/events/${e}/locations`),update:(e,n,i)=>$e.put(`/locations/${e}/${n}`,i),delete:(e,n)=>$e.delete(`/locations/${e}/${n}`),importCsv:(e,n,i)=>{const a=new FormData;return a.append("csv",n),$e.post(`/locations/import/${e}?deleteExisting=${i}`,a,{headers:{"Content-Type":"multipart/form-data"}})},bulkUpdateTimes:(e,n)=>$e.post(`/locations/bulk-update-times/${e}`,{timeDelta:n})},Ko={create:e=>$e.post("/assignments",e),getById:(e,n)=>$e.get(`/assignments/${e}/${n}`),getByEvent:e=>$e.get(`/assignments/event/${e}`),delete:(e,n)=>$e.delete(`/assignments/${e}/${n}`),getEventStatus:e=>$e.get(`/events/${e}/status`)},Is={checkIn:e=>$e.post("/checkin",e),adminCheckIn:(e,n)=>$e.post(`/checkin/admin/${e}/${n}`)},Kl={getAdmins:e=>$e.get(`/events/${e}/admins`),addAdmin:(e,n)=>$e.post(`/events/${e}/admins`,{userEmail:n}),removeAdmin:(e,n)=>$e.delete(`/events/${e}/admins/${n}`)},Qn={create:e=>$e.post("/marshals",e),getByEvent:e=>$e.get(`/events/${e}/marshals`),getById:(e,n)=>$e.get(`/marshals/${e}/${n}`),update:(e,n,i)=>$e.put(`/marshals/${e}/${n}`,i),delete:(e,n)=>$e.delete(`/marshals/${e}/${n}`),getMagicLink:(e,n)=>$e.get(`/marshals/${e}/${n}/magic-link`),sendMagicLink:(e,n)=>$e.post(`/marshals/${e}/${n}/send-magic-link`),importCsv:(e,n)=>{const i=new FormData;return i.append("csv",n),$e.post(`/marshals/import/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})}},Ys={create:e=>$e.post("/areas",e),getByEvent:e=>$e.get(`/events/${e}/areas`),getById:(e,n)=>$e.get(`/areas/${e}/${n}`),update:(e,n,i)=>$e.put(`/areas/${e}/${n}`,i),delete:(e,n)=>$e.delete(`/areas/${e}/${n}`),recalculate:e=>$e.post(`/areas/recalculate/${e}`),getCheckpoints:(e,n)=>$e.get(`/areas/${e}/${n}/locations`),getAreaLeads:(e,n)=>$e.get(`/areas/${e}/${n}/leads`),getAreaLeadDashboard:e=>$e.get(`/events/${e}/area-lead-dashboard`)},At={create:(e,n)=>$e.post(`/events/${e}/checklist-items`,n),getByEvent:e=>$e.get(`/events/${e}/checklist-items`),getById:(e,n)=>$e.get(`/checklist-items/${e}/${n}`),update:(e,n,i)=>$e.put(`/checklist-items/${e}/${n}`,i),delete:(e,n)=>$e.delete(`/checklist-items/${e}/${n}`),getReport:e=>$e.get(`/events/${e}/checklist-report`),getMarshalChecklist:(e,n)=>$e.get(`/events/${e}/marshals/${n}/checklist`),getCheckpointChecklist:(e,n)=>$e.get(`/events/${e}/locations/${n}/checklist`),getAreaChecklist:(e,n)=>$e.get(`/events/${e}/areas/${n}/checklist`),complete:(e,n,i)=>$e.post(`/checklist-items/${e}/${n}/complete`,i),uncomplete:(e,n,i)=>$e.post(`/checklist-items/${e}/${n}/uncomplete`,i)},Ls={create:(e,n)=>$e.post(`/events/${e}/notes`,n),getByEvent:e=>$e.get(`/events/${e}/notes`),getById:(e,n)=>$e.get(`/events/${e}/notes/${n}`),update:(e,n,i)=>$e.put(`/events/${e}/notes/${n}`,i),delete:(e,n)=>$e.delete(`/events/${e}/notes/${n}`),getMarshalNotes:(e,n)=>$e.get(`/events/${e}/marshals/${n}/notes`),getMyNotes:e=>$e.get(`/events/${e}/my-notes`)},Ki={create:(e,n)=>$e.post(`/events/${e}/contacts`,n),getByEvent:e=>$e.get(`/events/${e}/contacts`),getById:(e,n)=>$e.get(`/events/${e}/contacts/${n}`),update:(e,n,i)=>$e.put(`/events/${e}/contacts/${n}`,i),delete:(e,n)=>$e.delete(`/events/${e}/contacts/${n}`),getRoles:e=>$e.get(`/events/${e}/contact-roles`),getMarshalContacts:(e,n)=>$e.get(`/events/${e}/marshals/${n}/contacts`),getMyContacts:e=>$e.get(`/events/${e}/my-contacts`)},il=Hc("auth",()=>{const e=O(localStorage.getItem("adminEmail")||null),n=O(!!e.value),i=O(!1);return{adminEmail:e,isAuthenticated:n,loginPending:i,requestLogin:async c=>{const h=await es.requestLogin(c);return h.data.success&&(i.value=!0),h.data},verifyToken:async c=>{const h=await es.verifyToken(c);return h.data.success&&(e.value=h.data.person?.email,n.value=!0,i.value=!1,localStorage.setItem("adminEmail",h.data.person?.email),localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},instantLogin:async c=>{const h=await es.instantLogin(c);return h.data.success&&(e.value=h.data.email,n.value=!0,localStorage.setItem("adminEmail",h.data.email),h.data.sessionToken&&localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},logout:async()=>{try{await es.logout()}catch{}e.value=null,n.value=!1,i.value=!1,localStorage.removeItem("adminEmail"),localStorage.removeItem("sessionToken")}}}),Nb={class:"admin-login"},Bb={class:"login-card"},Fb={key:0,class:"email-sent"},zb={class:"form-group"},Ub=["disabled"],Hb={key:0,class:"error"},Vb={__name:"AdminLogin",setup(e){const n=il(),i=O(""),a=O(!1),s=O(null),r=O(!1),l=async()=>{a.value=!0,s.value=null;try{const h=await n.requestLogin(i.value);h.success?r.value=!0:s.value=h.message||"Failed to send login link. Please try again."}catch{s.value="Failed to send login link. Please try again."}finally{a.value=!1}},c=()=>{i.value="",r.value=!1,s.value=null};return(h,p)=>{const f=qr("router-link");return g(),_("div",Nb,[u("div",Bb,[p[7]||(p[7]=u("h2",null,"Admin Login",-1)),r.value?(g(),_("div",Fb,[p[2]||(p[2]=u("div",{class:"check-icon"},"",-1)),p[3]||(p[3]=u("h3",null,"Check your email!",-1)),u("p",null,[p[1]||(p[1]=Ve("We've sent a login link to ",-1)),u("strong",null,S(i.value),1)]),p[4]||(p[4]=u("p",{class:"hint"},"The link will expire in 15 minutes.",-1)),u("button",{onClick:c,class:"btn btn-secondary"}," Use a different email ")])):(g(),_(Ce,{key:1},[p[5]||(p[5]=u("p",{class:"instruction"},"Enter your email to receive a login link",-1)),u("form",{onSubmit:It(l,["prevent"])},[u("div",zb,[Ne(u("input",{"onUpdate:modelValue":p[0]||(p[0]=v=>i.value=v),type:"email",placeholder:"admin@example.com",required:"",class:"form-input"},null,512),[[ot,i.value]])]),u("button",{type:"submit",class:"btn btn-primary",disabled:a.value},S(a.value?"Sending...":"Send login link"),9,Ub)],32),s.value?(g(),_("div",Hb,S(s.value),1)):B("",!0)],64)),Oe(f,{to:"/",class:"back-link"},{default:Ge(()=>[...p[6]||(p[6]=[Ve(" Back to Home",-1)])]),_:1})])])}}},Zb=Ze(Vb,[["__scopeId","data-v-50552d01"]]),jb={class:"admin-verify"},qb={class:"verify-card"},Wb={key:0,class:"status"},Gb={key:1,class:"status error"},Kb={key:2,class:"status success"},Jb={__name:"AdminVerify",setup(e){const n=Ca(),i=jc(),a=il(),s=O(!0),r=O(null);return Ln(async()=>{const l=i.query.token;if(!l){r.value="No login token provided. Please request a new login link.",s.value=!1;return}try{const c=await a.verifyToken(l);c.success?setTimeout(()=>{n.push({name:"AdminDashboard"})},1e3):r.value=c.message||"Invalid or expired login link. Please request a new one."}catch(c){console.error("Verification error:",c),r.value="Failed to verify login. Please try again."}finally{s.value=!1}}),(l,c)=>{const h=qr("router-link");return g(),_("div",jb,[u("div",qb,[s.value?(g(),_("div",Wb,[...c[0]||(c[0]=[u("div",{class:"spinner"},null,-1),u("h2",null,"Verifying your login...",-1),u("p",null,"Please wait while we confirm your identity.",-1)])])):r.value?(g(),_("div",Gb,[c[2]||(c[2]=u("h2",null,"Login Failed",-1)),u("p",null,S(r.value),1),Oe(h,{to:"/admin/login",class:"btn btn-primary"},{default:Ge(()=>[...c[1]||(c[1]=[Ve(" Try Again ",-1)])]),_:1})])):(g(),_("div",Kb,[...c[3]||(c[3]=[u("h2",null,"Login Successful!",-1),u("p",null,"Redirecting to dashboard...",-1)])]))])])}}},Yb=Ze(Jb,[["__scopeId","data-v-7bb86bfc"]]),up=Hc("events",()=>{const e=O([]),n=O(null),i=O([]),a=O([]),s=O(null),r=O(!1),l=O(null),c=async()=>{r.value=!0,l.value=null;try{const E=await yi.getAll();e.value=E.data}catch(E){throw l.value=E.message,E}finally{r.value=!1}},h=async E=>{r.value=!0,l.value=null;try{const P=await yi.getById(E);n.value=P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}},p=async E=>{r.value=!0,l.value=null;try{const P=await yi.create(E);return e.value.push(P.data),P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}},f=async(E,P)=>{r.value=!0,l.value=null;try{const X=await yi.update(E,P),Q=e.value.findIndex(le=>le.id===E);return Q!==-1&&(e.value[Q]=X.data),n.value?.id===E&&(n.value=X.data),X.data}catch(X){throw l.value=X.message,X}finally{r.value=!1}},v=async E=>{r.value=!0,l.value=null;try{await yi.delete(E),e.value=e.value.filter(P=>P.id!==E)}catch(P){throw l.value=P.message,P}finally{r.value=!1}},T=async E=>{r.value=!0,l.value=null;try{const P=await Js.getByEvent(E);i.value=P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}};return{events:e,currentEvent:n,locations:i,assignments:a,eventStatus:s,loading:r,error:l,fetchEvents:c,fetchEvent:h,createEvent:p,updateEvent:f,deleteEvent:v,fetchLocations:T,createLocation:async E=>{r.value=!0,l.value=null;try{const P=await Js.create(E);return i.value.push(P.data),P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}},updateLocation:async(E,P,X)=>{r.value=!0,l.value=null;try{const Q=await Js.update(E,P,X),le=i.value.findIndex(ke=>ke.id===P);return le!==-1&&(i.value[le]=Q.data),Q.data}catch(Q){throw l.value=Q.message,Q}finally{r.value=!1}},deleteLocation:async(E,P)=>{r.value=!0,l.value=null;try{await Js.delete(E,P),i.value=i.value.filter(X=>X.id!==P)}catch(X){throw l.value=X.message,X}finally{r.value=!1}},bulkUpdateLocationTimes:async(E,P)=>{r.value=!0,l.value=null;try{const X=await Js.bulkUpdateTimes(E,P);return await T(E),X.data}catch(X){throw l.value=X.message,X}finally{r.value=!1}},fetchAssignments:async E=>{r.value=!0,l.value=null;try{const P=await Ko.getByEvent(E);a.value=P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}},createAssignment:async E=>{r.value=!0,l.value=null;try{const P=await Ko.create(E);return a.value.push(P.data),P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}},deleteAssignment:async(E,P)=>{r.value=!0,l.value=null;try{await Ko.delete(E,P),a.value=a.value.filter(X=>X.id!==P)}catch(X){throw l.value=X.message,X}finally{r.value=!1}},fetchEventStatus:async E=>{r.value=!0,l.value=null;try{const P=await Ko.getEventStatus(E);return s.value=P.data,P.data}catch(P){throw l.value=P.message,P}finally{r.value=!1}},updateAssignmentCheckIn:E=>{const P=a.value.findIndex(X=>X.id===E.id);P!==-1&&(a.value[P]=E),s.value&&s.value.locations.forEach(X=>{const Q=X.assignments.findIndex(le=>le.id===E.id);Q!==-1&&(X.assignments[Q]=E,X.checkedInCount=X.assignments.filter(le=>le.isCheckedIn).length)})}}}),Xb={class:"confirm-modal"},Qb={class:"confirm-actions"},ek={__name:"ConfirmModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm"},message:{type:String,required:!0},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const i=n,a=()=>{i("confirm")},s=()=>{i("cancel")};return(r,l)=>e.show?(g(),_("div",{key:0,class:"modal-overlay",onClick:It(s,["self"])},[u("div",Xb,[u("h3",null,S(e.title),1),u("p",null,S(e.message),1),u("div",Qb,[u("button",{onClick:s,class:"btn btn-secondary"},S(e.cancelText),1),u("button",{onClick:a,class:"btn btn-primary"},S(e.confirmText),1)])])])):B("",!0)}},ol=Ze(ek,[["__scopeId","data-v-4bd2c256"]]),tk={class:"base-modal-header"},nk={key:0,class:"base-modal-title"},sk={key:0,class:"base-modal-tab-header"},ik={class:"base-modal-body"},ok={key:1,class:"base-modal-footer"},ak={key:0,class:"base-modal-actions"},rk={__name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:""},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},variant:{type:String,default:"center",validator:e=>["center","sidebar"].includes(e)},zIndex:{type:Number,default:1e3},closeOnOverlay:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},confirmOnClose:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=e,a=n,s=O(!1),r=O(!1),l=()=>{i.closeOnOverlay&&c()},c=()=>{i.confirmOnClose&&i.isDirty?s.value=!0:a("close")},h=()=>{s.value=!1,a("close")},p=()=>{s.value=!1};return(f,v)=>e.show?(g(),_("div",{key:0,class:"base-modal-overlay",style:nn({zIndex:e.zIndex}),onClick:It(l,["self"])},[u("div",{class:Fe(["base-modal",[`base-modal--${e.size}`,`base-modal--${e.variant}`]])},[u("div",tk,[Uo(f.$slots,"header",{},()=>[e.title?(g(),_("h2",nk,S(e.title),1)):B("",!0)]),e.showCloseButton?(g(),_("button",{key:0,onClick:c,class:"base-modal-close",type:"button","aria-label":"Close"},"  ")):B("",!0)]),f.$slots["tab-header"]?(g(),_("div",sk,[Uo(f.$slots,"tab-header",{},void 0)])):B("",!0),u("div",ik,[Uo(f.$slots,"default",{},void 0)]),f.$slots.footer||f.$slots.actions?(g(),_("div",ok,[Uo(f.$slots,"footer",{},()=>[f.$slots.actions?(g(),_("div",ak,[Uo(f.$slots,"actions",{},void 0,!0)])):B("",!0)])])):B("",!0)],2),e.confirmOnClose&&!r.value?(g(),tt(ol,{key:0,show:s.value,title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to close?",onConfirm:h,onCancel:p},null,8,["show"])):B("",!0)],4)):B("",!0)}},Nt=Ze(rk,[["__scopeId","data-v-45873bc7"]]);function dp(e="details",n=[]){const i=O(e),a=v=>{i.value=v},s=()=>{i.value=e},r=v=>i.value===v,l=se(()=>n.length===0?-1:n.indexOf(i.value)),c=(v=!1)=>{if(n.length===0)return;const T=l.value;if(T===-1)return;const k=T+1;k<n.length?i.value=n[k]:v&&(i.value=n[0])},h=(v=!1)=>{if(n.length===0)return;const T=l.value;if(T===-1)return;const k=T-1;k>=0?i.value=n[k]:v&&(i.value=n[n.length-1])},p=se(()=>{if(n.length===0)return!1;const v=l.value;return v!==-1&&v<n.length-1}),f=se(()=>n.length===0?!1:l.value>0);return{activeTab:i,activeTabIndex:l,hasNextTab:p,hasPreviousTab:f,switchTab:a,resetTab:s,isActiveTab:r,nextTab:c,previousTab:h}}const hp=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEDT/AEST)"}],lk={class:"tabs"},ck={class:"tab-content"},uk={class:"form-group"},dk={class:"form-group"},hk={class:"form-group"},fk={class:"form-group"},pk=["value"],mk={class:"tab-content"},vk={class:"emergency-contacts-section"},gk={key:0,class:"empty-state"},_k={class:"card-header"},yk=["onClick"],bk={class:"form-group"},kk=["onUpdate:modelValue"],wk={class:"form-group"},Ck=["onUpdate:modelValue"],Lk={class:"form-group"},xk=["onUpdate:modelValue"],Sk={__name:"EventFormModal",props:{show:{type:Boolean,default:!1},eventData:{type:Object,default:()=>({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]})},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:n}){const i=e,a=n,{activeTab:s,switchTab:r,resetTab:l}=dp("basic",["basic","emergency"]),c=O({...i.eventData});qe(()=>i.eventData,T=>{c.value={...T},c.value.emergencyContacts||(c.value.emergencyContacts=[])},{deep:!0}),qe(()=>i.show,T=>{T&&l()});const h=()=>{c.value.emergencyContacts.push({name:"",phone:"",details:""})},p=T=>{c.value.emergencyContacts.splice(T,1)},f=()=>{a("submit",{...c.value})},v=()=>{a("close")};return(T,k)=>(g(),tt(Nt,{show:e.show,title:e.isEditing?"Edit Event":"Create New Event",size:"large",onClose:v},{"tab-header":Ge(()=>[u("div",lk,[u("button",{type:"button",onClick:k[0]||(k[0]=w=>U(r)("basic")),class:Fe(["tab-button",{active:U(s)==="basic"}])}," Basic Details ",2),u("button",{type:"button",onClick:k[1]||(k[1]=w=>U(r)("emergency")),class:Fe(["tab-button",{active:U(s)==="emergency"}])}," Emergency Contacts ",2)])]),actions:Ge(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary"},S(e.isEditing?"Update":"Create"),1)]),default:Ge(()=>[u("form",{onSubmit:It(f,["prevent"])},[Ne(u("div",ck,[u("div",uk,[k[6]||(k[6]=u("label",null,"Event Name *",-1)),Ne(u("input",{"onUpdate:modelValue":k[2]||(k[2]=w=>c.value.name=w),type:"text",required:"",class:"form-input"},null,512),[[ot,c.value.name]])]),u("div",dk,[k[7]||(k[7]=u("label",null,"Description",-1)),Ne(u("textarea",{"onUpdate:modelValue":k[3]||(k[3]=w=>c.value.description=w),rows:"3",class:"form-input"},null,512),[[ot,c.value.description]])]),u("div",hk,[k[8]||(k[8]=u("label",null,"Event Date *",-1)),Ne(u("input",{"onUpdate:modelValue":k[4]||(k[4]=w=>c.value.eventDate=w),type:"datetime-local",required:"",class:"form-input"},null,512),[[ot,c.value.eventDate]])]),u("div",fk,[k[9]||(k[9]=u("label",null,"Time Zone *",-1)),Ne(u("select",{"onUpdate:modelValue":k[5]||(k[5]=w=>c.value.timeZoneId=w),required:"",class:"form-input"},[(g(!0),_(Ce,null,De(U(hp),w=>(g(),_("option",{key:w.value,value:w.value},S(w.label),9,pk))),128))],512),[[kn,c.value.timeZoneId]])])],512),[[ni,U(s)==="basic"]]),Ne(u("div",mk,[u("div",vk,[u("div",{class:"section-header-small"},[k[10]||(k[10]=u("h3",null,"Emergency Contacts",-1)),u("button",{type:"button",onClick:h,class:"btn btn-small btn-primary"}," + Add Contact ")]),c.value.emergencyContacts.length===0?(g(),_("div",gk,[...k[11]||(k[11]=[u("p",null,'No emergency contacts added yet. Click "Add Contact" to add one.',-1)])])):B("",!0),(g(!0),_(Ce,null,De(c.value.emergencyContacts,(w,I)=>(g(),_("div",{key:I,class:"emergency-contact-card"},[u("div",_k,[u("h4",null,"Contact "+S(I+1),1),u("button",{type:"button",onClick:D=>p(I),class:"btn-remove"},"  ",8,yk)]),u("div",bk,[k[12]||(k[12]=u("label",null,"Name *",-1)),Ne(u("input",{"onUpdate:modelValue":D=>w.name=D,type:"text",required:"",class:"form-input",placeholder:"Contact person name"},null,8,kk),[[ot,w.name]])]),u("div",wk,[k[13]||(k[13]=u("label",null,"Phone *",-1)),Ne(u("input",{"onUpdate:modelValue":D=>w.phone=D,type:"tel",required:"",class:"form-input",placeholder:"+1 (555) 123-4567"},null,8,Ck),[[ot,w.phone]])]),u("div",Lk,[k[14]||(k[14]=u("label",null,"Additional Details",-1)),Ne(u("textarea",{"onUpdate:modelValue":D=>w.details=D,rows:"2",class:"form-input",placeholder:"Role, availability, or other important information..."},null,8,xk),[[ot,w.details]])])]))),128))])],512),[[ni,U(s)==="emergency"]])],32)]),_:1},8,["show","title"]))}},Tk=Ze(Sk,[["__scopeId","data-v-35885c7a"]]),Ik={class:"admin-dashboard"},Ak={class:"header"},Ek={class:"header-actions"},Mk={class:"user-email"},$k={class:"container"},Pk={class:"section"},Dk={class:"section-header"},Ok={key:0,class:"loading"},Rk={key:1,class:"empty"},Nk={key:2,class:"events-grid"},Bk=["onClick"],Fk={class:"event-date"},zk={class:"event-desc"},Uk={class:"event-actions"},Hk=["onClick"],Vk=["onClick"],Zk={__name:"AdminDashboard",setup(e){const n=Ca(),i=il(),a=up(),s=O(!0),r=O(!1),l=O(null),c=O({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}),h=O([]),p=O(!1),f=O(""),v=O(""),T=O(null),k=async()=>{s.value=!0;try{await a.fetchEvents(),h.value=a.events}catch(Q){console.error("Failed to load events:",Q)}finally{s.value=!1}},w=async Q=>{try{const le={...Q,adminEmail:i.adminEmail};l.value?await a.updateEvent(l.value.id,le):await a.createEvent(le),h.value=a.events,C()}catch(le){console.error("Failed to save event:",le),alert("Failed to save event. Please try again.")}},I=Q=>{l.value=Q,c.value={name:Q.name,description:Q.description,eventDate:X(Q.eventDate),timeZoneId:Q.timeZoneId||"UTC",emergencyContacts:Q.emergencyContacts?JSON.parse(JSON.stringify(Q.emergencyContacts)):[]}},D=async Q=>{f.value="Delete Event",v.value=`Are you sure you want to delete "${Q.name}"?`,T.value=async()=>{try{await a.deleteEvent(Q.id),h.value=a.events}catch(le){console.error("Failed to delete event:",le),alert("Failed to delete event. Please try again.")}},p.value=!0},A=()=>{p.value=!1,T.value&&(T.value(),T.value=null)},b=()=>{p.value=!1,T.value=null},C=()=>{r.value=!1,l.value=null,c.value={name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}},M=Q=>{if(!Q){console.error("Cannot navigate to event: eventId is undefined");return}n.push({name:"AdminEventManage",params:{eventId:Q}})},x=()=>{n.push({name:"AdminProfile"})},E=()=>{i.logout(),n.push({name:"Home"})},P=Q=>new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=Q=>{const le=new Date(Q),ke=le.getFullYear(),me=String(le.getMonth()+1).padStart(2,"0"),Le=String(le.getDate()).padStart(2,"0"),ye=String(le.getHours()).padStart(2,"0"),be=String(le.getMinutes()).padStart(2,"0");return`${ke}-${me}-${Le}T${ye}:${be}`};return Ln(()=>{k()}),(Q,le)=>(g(),_("div",Ik,[u("header",Ak,[le[1]||(le[1]=u("h1",null,"Admin Dashboard",-1)),u("div",Ek,[u("span",Mk,S(U(i).adminEmail),1),u("button",{onClick:x,class:"btn btn-secondary"},"Profile"),u("button",{onClick:E,class:"btn btn-secondary"},"Logout")])]),u("div",$k,[u("div",Pk,[u("div",Dk,[le[2]||(le[2]=u("h2",null,"Your Events",-1)),u("button",{onClick:le[0]||(le[0]=ke=>r.value=!0),class:"btn btn-primary"}," Create New Event ")]),s.value?(g(),_("div",Ok,"Loading events...")):h.value.length===0?(g(),_("div",Rk,[...le[3]||(le[3]=[u("p",null,"No events yet. Create your first event to get started!",-1)])])):(g(),_("div",Nk,[(g(!0),_(Ce,null,De(h.value,ke=>(g(),_("div",{key:ke.id,class:"event-card",onClick:me=>M(ke.id)},[u("h3",null,S(ke.name),1),u("p",Fk,S(P(ke.eventDate)),1),u("p",zk,S(ke.description),1),u("div",Uk,[u("button",{onClick:It(me=>I(ke),["stop"]),class:"btn btn-small btn-secondary"}," Edit ",8,Hk),u("button",{onClick:It(me=>D(ke),["stop"]),class:"btn btn-small btn-danger"}," Delete ",8,Vk)])],8,Bk))),128))]))])]),Oe(Tk,{show:r.value||!!l.value,eventData:c.value,isEditing:!!l.value,onClose:C,onSubmit:w},null,8,["show","eventData","isEditing"]),Oe(ol,{show:p.value,title:f.value,message:v.value,onConfirm:A,onCancel:b},null,8,["show","title","message"])]))}},jk=Ze(Zk,[["__scopeId","data-v-c3a3ad82"]]),qk=Hc("profile",()=>{const e=O(null),n=O(!1),i=O(null);return{profile:e,loading:n,error:i,fetchProfile:async()=>{n.value=!0,i.value=null;try{const h=await lr.getProfile();return e.value=h.data,h.data}catch(h){throw i.value=h.response?.data?.message||"Failed to load profile",h}finally{n.value=!1}},updateProfile:async h=>{n.value=!0,i.value=null;try{const p=await lr.updateProfile(h);return e.value=p.data,p.data}catch(p){throw i.value=p.response?.data?.message||"Failed to update profile",p}finally{n.value=!1}},fetchPerson:async(h,p)=>{n.value=!0,i.value=null;try{return(await lr.getPerson(h,p)).data}catch(f){throw i.value=f.response?.data?.message||"Failed to load person",f}finally{n.value=!1}},updatePerson:async(h,p,f)=>{n.value=!0,i.value=null;try{return(await lr.updatePerson(h,p,f)).data}catch(v){throw i.value=v.response?.data?.message||"Failed to update person",v}finally{n.value=!1}},clearProfile:()=>{e.value=null,i.value=null}}}),Wk={class:"form-group"},Gk={class:"form-group"},Kk={class:"form-group"},Jk={__name:"EditProfileModal",props:{show:{type:Boolean,default:!1},profile:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O({name:"",email:"",phone:""});qe(()=>i.profile,h=>{h&&(s.value={name:h.name||"",email:h.email||"",phone:h.phone||""})},{immediate:!0,deep:!0}),qe(()=>i.show,h=>{h&&i.profile&&(s.value={name:i.profile.name||"",email:i.profile.email||"",phone:i.profile.phone||""})});const r=()=>{a("update:isDirty",!0)},l=()=>{if(!s.value.name.trim()){alert("Name is required");return}if(!s.value.email.trim()){alert("Email is required");return}a("submit",{name:s.value.name.trim(),email:s.value.email.trim(),phone:s.value.phone?.trim()||""})},c=()=>{a("close")};return(h,p)=>(g(),tt(Nt,{show:e.show,title:"Edit Profile",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:c},{actions:Ge(()=>[u("button",{type:"button",onClick:c,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary"}," Save changes ")]),default:Ge(()=>[u("form",{onSubmit:It(l,["prevent"])},[u("div",Wk,[p[3]||(p[3]=u("label",null,"Name *",-1)),Ne(u("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>s.value.name=f),type:"text",required:"",class:"form-input",placeholder:"Your name",onInput:r},null,544),[[ot,s.value.name]])]),u("div",Gk,[p[4]||(p[4]=u("label",null,"Email *",-1)),Ne(u("input",{"onUpdate:modelValue":p[1]||(p[1]=f=>s.value.email=f),type:"email",required:"",class:"form-input",placeholder:"Your email address",onInput:r},null,544),[[ot,s.value.email]])]),u("div",Kk,[p[5]||(p[5]=u("label",null,"Phone",-1)),Ne(u("input",{"onUpdate:modelValue":p[2]||(p[2]=f=>s.value.phone=f),type:"tel",class:"form-input",placeholder:"Your phone number",onInput:r},null,544),[[ot,s.value.phone]])])],32)]),_:1},8,["show","is-dirty"]))}},Yk=Ze(Jk,[["__scopeId","data-v-2ce1a930"]]),Xk={class:"admin-profile"},Qk={class:"header"},ew={class:"header-actions"},tw={class:"user-email"},nw={class:"container"},sw={class:"section"},iw={class:"section-header"},ow={key:0,class:"loading"},aw={key:1,class:"error"},rw={key:2,class:"profile-details"},lw={class:"profile-field"},cw={class:"field-value"},uw={class:"profile-field"},dw={class:"field-value"},hw={class:"profile-field"},fw={class:"field-value"},pw={class:"profile-field"},mw={class:"field-value"},vw={__name:"AdminProfile",setup(e){const n=Ca(),i=il(),a=qk(),s=O(!1),r=async()=>{try{await a.fetchProfile()}catch(p){console.error("Failed to load profile:",p)}},l=async p=>{try{await a.updateProfile(p),s.value=!1}catch(f){console.error("Failed to save profile:",f),alert("Failed to save profile. Please try again.")}},c=()=>{i.logout(),n.push({name:"Home"})},h=()=>{n.push({name:"AdminDashboard"})};return Ln(()=>{r()}),(p,f)=>(g(),_("div",Xk,[u("header",Qk,[f[2]||(f[2]=u("h1",null,"My Profile",-1)),u("div",ew,[u("span",tw,S(U(i).adminEmail),1),u("button",{onClick:c,class:"btn btn-secondary"},"Logout")])]),u("div",nw,[u("div",sw,[u("div",iw,[f[3]||(f[3]=u("h2",null,"Profile Information",-1)),u("button",{onClick:f[0]||(f[0]=v=>s.value=!0),class:"btn btn-primary"}," Edit Profile ")]),U(a).loading?(g(),_("div",ow,"Loading profile...")):U(a).error?(g(),_("div",aw,[u("p",null,S(U(a).error),1),u("button",{onClick:r,class:"btn btn-secondary"},"Retry")])):U(a).profile?(g(),_("div",rw,[u("div",lw,[f[4]||(f[4]=u("label",null,"Name",-1)),u("div",cw,S(U(a).profile.name||""),1)]),u("div",uw,[f[5]||(f[5]=u("label",null,"Email",-1)),u("div",dw,S(U(a).profile.email||""),1)]),u("div",hw,[f[6]||(f[6]=u("label",null,"Phone",-1)),u("div",fw,S(U(a).profile.phone||""),1)]),u("div",pw,[f[7]||(f[7]=u("label",null,"System Admin",-1)),u("div",mw,[u("span",{class:Fe(["badge",U(a).profile.isSystemAdmin?"badge-success":"badge-secondary"])},S(U(a).profile.isSystemAdmin?"Yes":"No"),3)])])])):B("",!0)]),u("div",{class:"section"},[u("button",{onClick:h,class:"btn btn-secondary"}," Back to Dashboard ")])]),Oe(Yk,{show:s.value,profile:U(a).profile,onClose:f[1]||(f[1]=v=>s.value=!1),onSubmit:l},null,8,["show","profile"])]))}},gw=Ze(vw,[["__scopeId","data-v-e8d20355"]]);function _w(){const e=O(!1),n=O(""),i=O(""),a=O(null);return{showConfirmModal:e,confirmModalTitle:n,confirmModalMessage:i,showConfirm:(h,p,f)=>{n.value=h,i.value=p,a.value=f,e.value=!0},handleConfirmModalConfirm:()=>{e.value=!1,a.value&&(a.value(),a.value=null)},handleConfirmModalCancel:()=>{e.value=!1,a.value=null},closeConfirmModal:()=>{e.value=!1,a.value=null}}}const Ji=O({people:"Marshals",checkpoint:"Checkpoints",area:"Areas",checklist:"Checklists",course:"Course"}),Jo={people:{People:{singular:"Person",plural:"People"},Marshals:{singular:"Marshal",plural:"Marshals"},Volunteers:{singular:"Volunteer",plural:"Volunteers"},Helpers:{singular:"Helper",plural:"Helpers"},Staff:{singular:"Staff member",plural:"Staff"},Stewards:{singular:"Steward",plural:"Stewards"},"Team members":{singular:"Team member",plural:"Team members"}},checkpoint:{Checkpoints:{singular:"Checkpoint",plural:"Checkpoints"},Stations:{singular:"Station",plural:"Stations"},Locations:{singular:"Location",plural:"Locations"},"Feed stations":{singular:"Feed station",plural:"Feed stations"},"Aid stations":{singular:"Aid station",plural:"Aid stations"},"Water stations":{singular:"Water station",plural:"Water stations"},"Person points":{singular:null,plural:null,dynamic:!0}},area:{Areas:{singular:"Area",plural:"Areas"},Regions:{singular:"Region",plural:"Regions"},Zones:{singular:"Zone",plural:"Zones"}},checklist:{Checklists:{singular:"Checklist",plural:"Checklists"},Tasks:{singular:"Task",plural:"Tasks"},Jobs:{singular:"Job",plural:"Jobs"}},course:{Course:{singular:"Course",plural:"Courses"},Route:{singular:"Route",plural:"Routes"},Track:{singular:"Track",plural:"Tracks"},Trail:{singular:"Trail",plural:"Trails"},Path:{singular:"Path",plural:"Paths"}}},qo={people:["Helpers","Marshals","People","Staff","Stewards","Team members","Volunteers"],checkpoint:["Aid stations","Checkpoints","Feed stations","Locations","Person points","Stations","Water stations"],area:["Areas","Regions","Zones"],checklist:["Checklists","Jobs","Tasks"],course:["Course","Path","Route","Track","Trail"]};function yw(e,n){return e==="Person points"?`${Jo.people[n]?.singular||"Person"} points`:e}function kc(e){e&&(Ji.value={people:e.peopleTerm||"Marshals",checkpoint:e.checkpointTerm||"Checkpoints",area:e.areaTerm||"Areas",checklist:e.checklistTerm||"Checklists",course:e.courseTerm||"Course"})}const Nn=e=>e.toLowerCase(),Bn=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function ht(){const e=f=>{const v=Ji.value[f],T=Jo[f]?.[v];if(f==="checkpoint"&&v==="Person points"){const k=Ji.value.people;return`${Jo.people[k]?.singular||"Person"} point`}return T?.singular||v},n=f=>{const v=Ji.value[f],T=Jo[f]?.[v];if(f==="checkpoint"&&v==="Person points"){const k=Ji.value.people;return`${Jo.people[k]?.singular||"Person"} points`}return T?.plural||v},i=se(()=>({person:e("people"),checkpoint:e("checkpoint"),area:e("area"),checklist:e("checklist"),course:e("course"),people:n("people"),checkpoints:n("checkpoint"),areas:n("area"),checklists:n("checklist"),courses:n("course")})),a=se(()=>({person:Nn(e("people")),checkpoint:Nn(e("checkpoint")),area:Nn(e("area")),checklist:Nn(e("checklist")),course:Nn(e("course")),people:Nn(n("people")),checkpoints:Nn(n("checkpoint")),areas:Nn(n("area")),checklists:Nn(n("checklist")),courses:Nn(n("course"))})),s=se(()=>({person:Bn(e("people")),checkpoint:Bn(e("checkpoint")),area:Bn(e("area")),checklist:Bn(e("checklist")),course:Bn(e("course")),people:Bn(n("people")),checkpoints:Bn(n("checkpoint")),areas:Bn(n("area")),checklists:Bn(n("checklist")),courses:Bn(n("course"))})),r=se(()=>({course:i.value.course,checkpoints:i.value.checkpoints,areas:i.value.areas,marshals:i.value.people,checklists:i.value.checklists,notes:"Notes",details:"Event details"}));return{terms:i,termsLower:a,termsSentence:s,tabLabels:r,singular:e,plural:n,formatCount:(f,v)=>v===1?`1 ${e(f)}`:`${v} ${n(f)}`,lower:(f,v=!0)=>Nn(v?n(f):e(f)),title:(f,v=!0)=>v?n(f):e(f),sentence:(f,v=!0)=>Bn(v?n(f):e(f)),terminology:Ji}}const bw=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",$r=e=>{if(!e)return"";const n=new Date(e),i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return`${i}-${a}-${s}T${r}:${l}`},Pr=e=>{if(!e||e.trim()==="")return!0;if(!/^[a-z]{1,20}[./][a-z]{1,20}[./][a-z]{1,20}$/.test(e))return!1;const i=e.includes("."),a=e.includes("/");return i!==a};function kw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yo={exports:{}};var ww=Yo.exports,Xd;function Cw(){return Xd||(Xd=1,(function(e,n){(function(i,a){a(n)})(ww,(function(i){var a="1.9.4";function s(t){var o,d,m,y;for(d=1,m=arguments.length;d<m;d++){y=arguments[d];for(o in y)t[o]=y[o]}return t}var r=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function l(t,o){var d=Array.prototype.slice;if(t.bind)return t.bind.apply(t,d.call(arguments,1));var m=d.call(arguments,2);return function(){return t.apply(o,m.length?m.concat(d.call(arguments)):arguments)}}var c=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function p(t,o,d){var m,y,$,H;return H=function(){m=!1,y&&($.apply(d,y),y=!1)},$=function(){m?y=arguments:(t.apply(d,arguments),setTimeout(H,o),m=!0)},$}function f(t,o,d){var m=o[1],y=o[0],$=m-y;return t===m&&d?t:((t-y)%$+$)%$+y}function v(){return!1}function T(t,o){if(o===!1)return t;var d=Math.pow(10,o===void 0?6:o);return Math.round(t*d)/d}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function w(t){return k(t).split(/\s+/)}function I(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var d in o)t.options[d]=o[d];return t.options}function D(t,o,d){var m=[];for(var y in t)m.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(t[y]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function b(t,o){return t.replace(A,function(d,m){var y=o[m];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(o)),y})}var C=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function M(t,o){for(var d=0;d<t.length;d++)if(t[d]===o)return d;return-1}var x="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var P=0;function X(t){var o=+new Date,d=Math.max(0,16-(o-P));return P=o+d,window.setTimeout(t,d)}var Q=window.requestAnimationFrame||E("RequestAnimationFrame")||X,le=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ke(t,o,d){if(d&&Q===X)t.call(o);else return Q.call(window,l(t,o))}function me(t){t&&le.call(window,t)}var Le={__proto__:null,extend:s,create:r,bind:l,get lastId(){return c},stamp:h,throttle:p,wrapNum:f,falseFn:v,formatNum:T,trim:k,splitWords:w,setOptions:I,getParamString:D,template:b,isArray:C,indexOf:M,emptyImageUrl:x,requestFn:Q,cancelFn:le,requestAnimFrame:ke,cancelAnimFrame:me};function ye(){}ye.extend=function(t){var o=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=o.__super__=this.prototype,m=r(d);m.constructor=o,o.prototype=m;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(o[y]=this[y]);return t.statics&&s(o,t.statics),t.includes&&(be(t.includes),s.apply(null,[m].concat(t.includes))),s(m,t),delete m.statics,delete m.includes,m.options&&(m.options=d.options?r(d.options):{},s(m.options,t.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var $=0,H=m._initHooks.length;$<H;$++)m._initHooks[$].call(this)}},o},ye.include=function(t){var o=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},ye.mergeOptions=function(t){return s(this.prototype.options,t),this},ye.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),d=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function be(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=C(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(t,o,d){if(typeof t=="object")for(var m in t)this._on(m,t[m],o);else{t=w(t);for(var y=0,$=t.length;y<$;y++)this._on(t[y],o,d)}return this},off:function(t,o,d){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var m in t)this._off(m,t[m],o);else{t=w(t);for(var y=arguments.length===1,$=0,H=t.length;$<H;$++)y?this._off(t[$]):this._off(t[$],o,d)}return this},_on:function(t,o,d,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,d)===!1){d===this&&(d=void 0);var y={fn:o,ctx:d};m&&(y.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(y)}},_off:function(t,o,d){var m,y,$;if(this._events&&(m=this._events[t],!!m)){if(arguments.length===1){if(this._firingCount)for(y=0,$=m.length;y<$;y++)m[y].fn=v;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var H=this._listens(t,o,d);if(H!==!1){var ee=m[H];this._firingCount&&(ee.fn=v,this._events[t]=m=m.slice()),m.splice(H,1)}}},fire:function(t,o,d){if(!this.listens(t,d))return this;var m=s({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var y=this._events[t];if(y){this._firingCount=this._firingCount+1||1;for(var $=0,H=y.length;$<H;$++){var ee=y[$],ie=ee.fn;ee.once&&this.off(t,ie,ee.ctx),ie.call(ee.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(t,o,d,m){typeof t!="string"&&console.warn('"string" type argument expected');var y=o;typeof o!="function"&&(m=!!o,y=void 0,d=void 0);var $=this._events&&this._events[t];if($&&$.length&&this._listens(t,y,d)!==!1)return!0;if(m){for(var H in this._eventParents)if(this._eventParents[H].listens(t,o,d,m))return!0}return!1},_listens:function(t,o,d){if(!this._events)return!1;var m=this._events[t]||[];if(!o)return!!m.length;d===this&&(d=void 0);for(var y=0,$=m.length;y<$;y++)if(m[y].fn===o&&m[y].ctx===d)return y;return!1},once:function(t,o,d){if(typeof t=="object")for(var m in t)this._on(m,t[m],o,!0);else{t=w(t);for(var y=0,$=t.length;y<$;y++)this._on(t[y],o,d,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var K=ye.extend(de);function Z(t,o,d){this.x=d?Math.round(t):t,this.y=d?Math.round(o):o}var te=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(t){return this.clone()._add(j(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(j(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(t){t=j(t);var o=t.x-this.x,d=t.y-this.y;return Math.sqrt(o*o+d*d)},equals:function(t){return t=j(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=j(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function j(t,o,d){return t instanceof Z?t:C(t)?new Z(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Z(t.x,t.y):new Z(t,o,d)}function ce(t,o){if(t)for(var d=o?[t,o]:t,m=0,y=d.length;m<y;m++)this.extend(d[m])}ce.prototype={extend:function(t){var o,d;if(!t)return this;if(t instanceof Z||typeof t[0]=="number"||"x"in t)o=d=j(t);else if(t=Y(t),o=t.min,d=t.max,!o||!d)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=d.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(t){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,d;return typeof t[0]=="number"||t instanceof Z?t=j(t):t=Y(t),t instanceof ce?(o=t.min,d=t.max):o=d=t,o.x>=this.min.x&&d.x<=this.max.x&&o.y>=this.min.y&&d.y<=this.max.y},intersects:function(t){t=Y(t);var o=this.min,d=this.max,m=t.min,y=t.max,$=y.x>=o.x&&m.x<=d.x,H=y.y>=o.y&&m.y<=d.y;return $&&H},overlaps:function(t){t=Y(t);var o=this.min,d=this.max,m=t.min,y=t.max,$=y.x>o.x&&m.x<d.x,H=y.y>o.y&&m.y<d.y;return $&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,d=this.max,m=Math.abs(o.x-d.x)*t,y=Math.abs(o.y-d.y)*t;return Y(j(o.x-m,o.y-y),j(d.x+m,d.y+y))},equals:function(t){return t?(t=Y(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Y(t,o){return!t||t instanceof ce?t:new ce(t,o)}function ve(t,o){if(t)for(var d=o?[t,o]:t,m=0,y=d.length;m<y;m++)this.extend(d[m])}ve.prototype={extend:function(t){var o=this._southWest,d=this._northEast,m,y;if(t instanceof Ee)m=t,y=t;else if(t instanceof ve){if(m=t._southWest,y=t._northEast,!m||!y)return this}else return t?this.extend(Me(t)||Se(t)):this;return!o&&!d?(this._southWest=new Ee(m.lat,m.lng),this._northEast=new Ee(y.lat,y.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(t){var o=this._southWest,d=this._northEast,m=Math.abs(o.lat-d.lat)*t,y=Math.abs(o.lng-d.lng)*t;return new ve(new Ee(o.lat-m,o.lng-y),new Ee(d.lat+m,d.lng+y))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Ee||"lat"in t?t=Me(t):t=Se(t);var o=this._southWest,d=this._northEast,m,y;return t instanceof ve?(m=t.getSouthWest(),y=t.getNorthEast()):m=y=t,m.lat>=o.lat&&y.lat<=d.lat&&m.lng>=o.lng&&y.lng<=d.lng},intersects:function(t){t=Se(t);var o=this._southWest,d=this._northEast,m=t.getSouthWest(),y=t.getNorthEast(),$=y.lat>=o.lat&&m.lat<=d.lat,H=y.lng>=o.lng&&m.lng<=d.lng;return $&&H},overlaps:function(t){t=Se(t);var o=this._southWest,d=this._northEast,m=t.getSouthWest(),y=t.getNorthEast(),$=y.lat>o.lat&&m.lat<d.lat,H=y.lng>o.lng&&m.lng<d.lng;return $&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=Se(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(t,o){return t instanceof ve?t:new ve(t,o)}function Ee(t,o,d){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(t,o){if(!t)return!1;t=Me(t);var d=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return d<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+T(this.lat,t)+", "+T(this.lng,t)+")"},distanceTo:function(t){return J.distance(this,Me(t))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,d=o/Math.cos(Math.PI/180*this.lat);return Se([this.lat-o,this.lng-d],[this.lat+o,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function Me(t,o,d){return t instanceof Ee?t:C(t)&&typeof t[0]!="object"?t.length===3?new Ee(t[0],t[1],t[2]):t.length===2?new Ee(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Ee(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new Ee(t,o,d)}var F={latLngToPoint:function(t,o){var d=this.projection.project(t),m=this.scale(o);return this.transformation._transform(d,m)},pointToLatLng:function(t,o){var d=this.scale(o),m=this.transformation.untransform(t,d);return this.projection.unproject(m)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,d=this.scale(t),m=this.transformation.transform(o.min,d),y=this.transformation.transform(o.max,d);return new ce(m,y)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?f(t.lng,this.wrapLng,!0):t.lng,d=this.wrapLat?f(t.lat,this.wrapLat,!0):t.lat,m=t.alt;return new Ee(d,o,m)},wrapLatLngBounds:function(t){var o=t.getCenter(),d=this.wrapLatLng(o),m=o.lat-d.lat,y=o.lng-d.lng;if(m===0&&y===0)return t;var $=t.getSouthWest(),H=t.getNorthEast(),ee=new Ee($.lat-m,$.lng-y),ie=new Ee(H.lat-m,H.lng-y);return new ve(ee,ie)}},J=s({},F,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var d=Math.PI/180,m=t.lat*d,y=o.lat*d,$=Math.sin((o.lat-t.lat)*d/2),H=Math.sin((o.lng-t.lng)*d/2),ee=$*$+Math.cos(m)*Math.cos(y)*H*H,ie=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*ie}}),V=6378137,W={R:V,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,t.lat),-d),y=Math.sin(m*o);return new Z(this.R*t.lng*o,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(t){var o=180/Math.PI;return new Ee((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=V*Math.PI;return new ce([-t,-t],[t,t])})()};function pe(t,o,d,m){if(C(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=d,this._d=m}pe.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new Z((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function R(t,o,d,m){return new pe(t,o,d,m)}var z=s({},J,{code:"EPSG:3857",projection:W,transformation:(function(){var t=.5/(Math.PI*W.R);return R(t,.5,-t,.5)})()}),q=s({},z,{code:"EPSG:900913"});function ae(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function he(t,o){var d="",m,y,$,H,ee,ie;for(m=0,$=t.length;m<$;m++){for(ee=t[m],y=0,H=ee.length;y<H;y++)ie=ee[y],d+=(y?"L":"M")+ie.x+" "+ie.y;d+=o?ze.svg?"z":"x":""}return d||"M0 0"}var fe=document.documentElement.style,Ie="ActiveXObject"in window,Ae=Ie&&!document.addEventListener,xe="msLaunchUri"in navigator&&!("documentMode"in document),ge=dn("webkit"),Ue=dn("android"),Pe=dn("android 2")||dn("android 3"),He=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ke=Ue&&dn("Google")&&He<537&&!("AudioNode"in window),Je=!!window.opera,Qe=!xe&&dn("chrome"),je=dn("gecko")&&!ge&&!Je&&!Ie,mt=!Qe&&dn("safari"),St=dn("phantom"),Lt="OTransition"in fe,gt=navigator.platform.indexOf("Win")===0,sn=Ie&&"transition"in fe,jt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pe,bt="MozPerspective"in fe,nt=!window.L_DISABLE_3D&&(sn||jt||bt)&&!Lt&&!St,Et=typeof orientation<"u"||dn("mobile"),kt=Et&&ge,ss=Et&&jt,vn=!window.PointerEvent&&window.MSPointerEvent,Wn=!!(window.PointerEvent||vn),Wt="ontouchstart"in window||!!window.TouchEvent,xn=!window.L_NO_TOUCH&&(Wt||Wn),Rs=Et&&Je,ne=Et&&je,ue=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,re=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return t})(),Re=(function(){return!!document.createElement("canvas").getContext})(),Ye=!!(document.createElementNS&&ae("svg").createSVGRect),vt=!!Ye&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ut=!Ye&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),Sn=navigator.platform.indexOf("Mac")===0,oi=navigator.platform.indexOf("Linux")===0;function dn(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ze={ie:Ie,ielt9:Ae,edge:xe,webkit:ge,android:Ue,android23:Pe,androidStock:Ke,opera:Je,chrome:Qe,gecko:je,safari:mt,phantom:St,opera12:Lt,win:gt,ie3d:sn,webkit3d:jt,gecko3d:bt,any3d:nt,mobile:Et,mobileWebkit:kt,mobileWebkit3d:ss,msPointer:vn,pointer:Wn,touch:xn,touchNative:Wt,mobileOpera:Rs,mobileGecko:ne,retina:ue,passiveEvents:re,canvas:Re,svg:Ye,vml:Ut,inlineSvg:vt,mac:Sn,linux:oi},is=ze.msPointer?"MSPointerDown":"pointerdown",Ns=ze.msPointer?"MSPointerMove":"pointermove",ai=ze.msPointer?"MSPointerUp":"pointerup",fo=ze.msPointer?"MSPointerCancel":"pointercancel",po={touchstart:is,touchmove:Ns,touchend:ai,touchcancel:fo},Ia={touchstart:Ot,touchmove:Ai,touchend:Ai,touchcancel:Ai},Bs={},mo=!1;function ll(t,o,d){return o==="touchstart"&&dl(),Ia[o]?(d=Ia[o].bind(this,d),t.addEventListener(po[o],d,!1),d):(console.warn("wrong event specified:",o),v)}function Aa(t,o,d){if(!po[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(po[o],d,!1)}function cl(t){Bs[t.pointerId]=t}function ul(t){Bs[t.pointerId]&&(Bs[t.pointerId]=t)}function Ea(t){delete Bs[t.pointerId]}function dl(){mo||(document.addEventListener(is,cl,!0),document.addEventListener(Ns,ul,!0),document.addEventListener(ai,Ea,!0),document.addEventListener(fo,Ea,!0),mo=!0)}function Ai(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var d in Bs)o.touches.push(Bs[d]);o.changedTouches=[o],t(o)}}function Ot(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Bt(o),Ai(t,o)}function Ma(t){var o={},d,m;for(m in t)d=t[m],o[m]=d&&d.bind?d.bind(t):d;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var $a=200;function Pa(t,o){t.addEventListener("dblclick",o);var d=0,m;function y($){if($.detail!==1){m=$.detail;return}if(!($.pointerType==="mouse"||$.sourceCapabilities&&!$.sourceCapabilities.firesTouchEvents)){var H=Oa($);if(!(H.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!H.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var ee=Date.now();ee-d<=$a?(m++,m===2&&o(Ma($))):m=1,d=ee}}}return t.addEventListener("click",y),{dblclick:o,simDblclick:y}}function hl(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var vo=Pi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gt=Pi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ei=Gt==="webkitTransition"||Gt==="OTransition"?Gt+"End":"transitionend";function ri(t){return typeof t=="string"?document.getElementById(t):t}function os(t,o){var d=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(t,null);d=m?m[o]:null}return d==="auto"?null:d}function ct(t,o,d){var m=document.createElement(t);return m.className=o||"",d&&d.appendChild(m),m}function wt(t){var o=t.parentNode;o&&o.removeChild(t)}function Mi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function as(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function rs(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function go(t,o){if(t.classList!==void 0)return t.classList.contains(o);var d=$i(t);return d.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(d)}function it(t,o){if(t.classList!==void 0)for(var d=w(o),m=0,y=d.length;m<y;m++)t.classList.add(d[m]);else if(!go(t,o)){var $=$i(t);_o(t,($?$+" ":"")+o)}}function Tt(t,o){t.classList!==void 0?t.classList.remove(o):_o(t,k((" "+$i(t)+" ").replace(" "+o+" "," ")))}function _o(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function $i(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ht(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&fl(t,o)}function fl(t,o){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=t.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),d?(d.Enabled=o!==100,d.Opacity=o):t.style.filter+=" progid:"+m+"(opacity="+o+")"}function Pi(t){for(var o=document.documentElement.style,d=0;d<t.length;d++)if(t[d]in o)return t[d];return!1}function ls(t,o,d){var m=o||new Z(0,0);t.style[vo]=(ze.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function Mt(t,o){t._leaflet_pos=o,ze.any3d?ls(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function cs(t){return t._leaflet_pos||new Z(0,0)}var li,us,yo;if("onselectstart"in document)li=function(){et(window,"selectstart",Bt)},us=function(){_t(window,"selectstart",Bt)};else{var ci=Pi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);li=function(){if(ci){var t=document.documentElement.style;yo=t[ci],t[ci]="none"}},us=function(){ci&&(document.documentElement.style[ci]=yo,yo=void 0)}}function bo(){et(window,"dragstart",Bt)}function ko(){_t(window,"dragstart",Bt)}var Fs,wo;function Co(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Di(),Fs=t,wo=t.style.outlineStyle,t.style.outlineStyle="none",et(window,"keydown",Di))}function Di(){Fs&&(Fs.style.outlineStyle=wo,Fs=void 0,wo=void 0,_t(window,"keydown",Di))}function Da(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function ui(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var pl={__proto__:null,TRANSFORM:vo,TRANSITION:Gt,TRANSITION_END:Ei,get:ri,getStyle:os,create:ct,remove:wt,empty:Mi,toFront:as,toBack:rs,hasClass:go,addClass:it,removeClass:Tt,setClass:_o,getClass:$i,setOpacity:Ht,testProp:Pi,setTransform:ls,setPosition:Mt,getPosition:cs,get disableTextSelection(){return li},get enableTextSelection(){return us},disableImageDrag:bo,enableImageDrag:ko,preventOutline:Co,restoreOutline:Di,getSizedParentNode:Da,getScale:ui};function et(t,o,d,m){if(o&&typeof o=="object")for(var y in o)xo(t,y,o[y],d);else{o=w(o);for(var $=0,H=o.length;$<H;$++)xo(t,o[$],d,m)}return this}var Tn="_leaflet_events";function _t(t,o,d,m){if(arguments.length===1)Oi(t),delete t[Tn];else if(o&&typeof o=="object")for(var y in o)Ri(t,y,o[y],d);else if(o=w(o),arguments.length===2)Oi(t,function(ee){return M(o,ee)!==-1});else for(var $=0,H=o.length;$<H;$++)Ri(t,o[$],d,m);return this}function Oi(t,o){for(var d in t[Tn]){var m=d.split(/\d/)[0];(!o||o(m))&&Ri(t,m,null,null,d)}}var Lo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xo(t,o,d,m){var y=o+h(d)+(m?"_"+h(m):"");if(t[Tn]&&t[Tn][y])return this;var $=function(ee){return d.call(m||t,ee||window.event)},H=$;!ze.touchNative&&ze.pointer&&o.indexOf("touch")===0?$=ll(t,o,$):ze.touch&&o==="dblclick"?$=Pa(t,$):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(Lo[o]||o,$,ze.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?($=function(ee){ee=ee||window.event,So(t,ee)&&H(ee)},t.addEventListener(Lo[o],$,!1)):t.addEventListener(o,H,!1):t.attachEvent("on"+o,$),t[Tn]=t[Tn]||{},t[Tn][y]=$}function Ri(t,o,d,m,y){y=y||o+h(d)+(m?"_"+h(m):"");var $=t[Tn]&&t[Tn][y];if(!$)return this;!ze.touchNative&&ze.pointer&&o.indexOf("touch")===0?Aa(t,o,$):ze.touch&&o==="dblclick"?hl(t,$):"removeEventListener"in t?t.removeEventListener(Lo[o]||o,$,!1):t.detachEvent("on"+o,$),t[Tn][y]=null}function ds(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ni(t){return xo(t,"wheel",ds),this}function di(t){return et(t,"mousedown touchstart dblclick contextmenu",ds),t._leaflet_disable_click=!0,this}function Bt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function hs(t){return Bt(t),ds(t),this}function Oa(t){if(t.composedPath)return t.composedPath();for(var o=[],d=t.target;d;)o.push(d),d=d.parentNode;return o}function Ra(t,o){if(!o)return new Z(t.clientX,t.clientY);var d=ui(o),m=d.boundingClientRect;return new Z((t.clientX-m.left)/d.x-o.clientLeft,(t.clientY-m.top)/d.y-o.clientTop)}var ml=ze.linux&&ze.chrome?window.devicePixelRatio:ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Na(t){return ze.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ml:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function So(t,o){var d=o.relatedTarget;if(!d)return!0;try{for(;d&&d!==t;)d=d.parentNode}catch{return!1}return d!==t}var vl={__proto__:null,on:et,off:_t,stopPropagation:ds,disableScrollPropagation:Ni,disableClickPropagation:di,preventDefault:Bt,stop:hs,getPropagationPath:Oa,getMousePosition:Ra,getWheelDelta:Na,isExternalTarget:So,addListener:et,removeListener:_t},Ba=K.extend({run:function(t,o,d,m){this.stop(),this._el=t,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=cs(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ke(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,d=this._duration*1e3;o<d?this._runFrame(this._easeOut(o/d),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var d=this._startPos.add(this._offset.multiplyBy(t));o&&d._round(),Mt(this._el,d),this.fire("step")},_complete:function(){me(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ut=K.extend({options:{crs:z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=I(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Me(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gt&&ze.any3d&&!ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),et(this._proxy,Ei,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,d){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(Me(t),o,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=s({animate:d.animate},d.zoom),d.pan=s({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,d.zoom):this._tryAnimatedPan(t,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,d.pan&&d.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,d){var m=this.getZoomScale(o),y=this.getSize().divideBy(2),$=t instanceof Z?t:this.latLngToContainerPoint(t),H=$.subtract(y).multiplyBy(1-1/m),ee=this.containerPointToLatLng(y.add(H));return this.setView(ee,o,{zoom:d})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():Se(t);var d=j(o.paddingTopLeft||o.padding||[0,0]),m=j(o.paddingBottomRight||o.padding||[0,0]),y=this.getBoundsZoom(t,!1,d.add(m));if(y=typeof o.maxZoom=="number"?Math.min(o.maxZoom,y):y,y===1/0)return{center:t.getCenter(),zoom:y};var $=m.subtract(d).divideBy(2),H=this.project(t.getSouthWest(),y),ee=this.project(t.getNorthEast(),y),ie=this.unproject(H.add(ee).divideBy(2).add($),y);return{center:ie,zoom:y}},fitBounds:function(t,o){if(t=Se(t),!t.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(t,o);return this.setView(d.center,d.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=j(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ba,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){it(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,d,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,d){if(d=d||{},d.animate===!1||!ze.any3d)return this.setView(t,o,d);this._stop();var m=this.project(this.getCenter()),y=this.project(t),$=this.getSize(),H=this._zoom;t=Me(t),o=o===void 0?H:o;var ee=Math.max($.x,$.y),ie=ee*this.getZoomScale(H,o),we=y.distanceTo(m)||1,Be=1.42,Xe=Be*Be;function lt(Ft){var tr=Ft?-1:1,Yp=Ft?ie:ee,Xp=ie*ie-ee*ee+tr*Xe*Xe*we*we,Qp=2*Yp*Xe*we,Il=Xp/Qp,xu=Math.sqrt(Il*Il+1)-Il,em=xu<1e-9?-18:Math.log(xu);return em}function on(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function Vt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function An(Ft){return on(Ft)/Vt(Ft)}var hn=lt(0);function Zi(Ft){return ee*(Vt(hn)/Vt(hn+Be*Ft))}function Wp(Ft){return ee*(Vt(hn)*An(hn+Be*Ft)-on(hn))/Xe}function Gp(Ft){return 1-Math.pow(1-Ft,1.5)}var Kp=Date.now(),Cu=(lt(1)-hn)/Be,Jp=d.duration?1e3*d.duration:1e3*Cu*.8;function Lu(){var Ft=(Date.now()-Kp)/Jp,tr=Gp(Ft)*Cu;Ft<=1?(this._flyToFrame=ke(Lu,this),this._move(this.unproject(m.add(y.subtract(m).multiplyBy(Wp(tr)/we)),H),this.getScaleZoom(ee/Zi(tr),H),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Lu.call(this),this},flyToBounds:function(t,o){var d=this._getBoundsCenterZoom(t,o);return this.flyTo(d.center,d.zoom,o)},setMaxBounds:function(t){return t=Se(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Se(t));return d.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var d=j(o.paddingTopLeft||o.padding||[0,0]),m=j(o.paddingBottomRight||o.padding||[0,0]),y=this.project(this.getCenter()),$=this.project(t),H=this.getPixelBounds(),ee=Y([H.min.add(d),H.max.subtract(m)]),ie=ee.getSize();if(!ee.contains($)){this._enforcingBounds=!0;var we=$.subtract(ee.getCenter()),Be=ee.extend($).getSize().subtract(ie);y.x+=we.x<0?-Be.x:Be.x,y.y+=we.y<0?-Be.y:Be.y,this.panTo(this.unproject(y),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=o.divideBy(2).round(),y=d.divideBy(2).round(),$=m.subtract(y);return!$.x&&!$.y?this:(t.animate&&t.pan?this.panBy($):(t.pan&&this._rawPanBy($),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),d=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,d,t):navigator.geolocation.getCurrentPosition(o,d,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,d=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,d=t.coords.longitude,m=new Ee(o,d),y=m.toBounds(t.coords.accuracy*2),$=this._locateOptions;if($.setView){var H=this.getBoundsZoom(y);this.setView(m,$.maxZoom?Math.min(H,$.maxZoom):H)}var ee={latlng:m,bounds:y,timestamp:t.timestamp};for(var ie in t.coords)typeof t.coords[ie]=="number"&&(ee[ie]=t.coords[ie]);this.fire("locationfound",ee)}},addHandler:function(t,o){if(!o)return this;var d=this[t]=new o(this);return this._handlers.push(d),this.options[t]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(me(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)wt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var d="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),m=ct("div",d,o||this._mapPane);return t&&(this._panes[t]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),d=this.unproject(t.getTopRight());return new ve(o,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,d){t=Se(t),d=j(d||[0,0]);var m=this.getZoom()||0,y=this.getMinZoom(),$=this.getMaxZoom(),H=t.getNorthWest(),ee=t.getSouthEast(),ie=this.getSize().subtract(d),we=Y(this.project(ee,m),this.project(H,m)).getSize(),Be=ze.any3d?this.options.zoomSnap:1,Xe=ie.x/we.x,lt=ie.y/we.y,on=o?Math.max(Xe,lt):Math.min(Xe,lt);return m=this.getScaleZoom(on,m),Be&&(m=Math.round(m/(Be/100))*(Be/100),m=o?Math.ceil(m/Be)*Be:Math.floor(m/Be)*Be),Math.max(y,Math.min($,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var d=this._getTopLeftPoint(t,o);return new ce(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var d=this.options.crs;return o=o===void 0?this._zoom:o,d.scale(t)/d.scale(o)},getScaleZoom:function(t,o){var d=this.options.crs;o=o===void 0?this._zoom:o;var m=d.zoom(t*d.scale(o));return isNaN(m)?1/0:m},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Me(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(j(t),o)},layerPointToLatLng:function(t){var o=j(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(Me(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Me(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Se(t))},distance:function(t,o){return this.options.crs.distance(Me(t),Me(o))},containerPointToLayerPoint:function(t){return j(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return j(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(j(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Me(t)))},mouseEventToContainerPoint:function(t){return Ra(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=ri(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");et(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ze.any3d,it(t,"leaflet-container"+(ze.touch?" leaflet-touch":"")+(ze.retina?" leaflet-retina":"")+(ze.ielt9?" leaflet-oldie":"")+(ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=os(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Mt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(it(t.markerPane,"leaflet-zoom-hide"),it(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,d){Mt(this._mapPane,new Z(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var y=this._zoom!==o;this._moveStart(y,d)._move(t,o)._moveEnd(y),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,d,m){o===void 0&&(o=this._zoom);var y=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),m?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return me(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Mt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var o=t?_t:et;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ze.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){me(this._resizeRequest),this._resizeRequest=ke(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var d=[],m,y=o==="mouseout"||o==="mouseover",$=t.target||t.srcElement,H=!1;$;){if(m=this._targets[h($)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){H=!0;break}if(m&&m.listens(o,!0)&&(y&&!So($,t)||(d.push(m),y))||$===this._container)break;$=$.parentNode}return!d.length&&!H&&!y&&this.listens(o,!0)&&(d=[this]),d},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var d=t.type;d==="mousedown"&&Co(o),this._fireDOMEvent(t,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,d){if(t.type==="click"){var m=s({},t);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var y=this._findEventTargets(t,o);if(d){for(var $=[],H=0;H<d.length;H++)d[H].listens(o,!0)&&$.push(d[H]);y=$.concat(y)}if(y.length){o==="contextmenu"&&Bt(t);var ee=y[0],ie={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var we=ee.getLatLng&&(!ee._radius||ee._radius<=10);ie.containerPoint=we?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(t),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=we?ee.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(H=0;H<y.length;H++)if(y[H].fire(o,ie,!0),ie.originalEvent._stopped||y[H].options.bubblingMouseEvents===!1&&M(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return cs(this._mapPane)||new Z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var d=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var d=this.getSize()._divideBy(2);return this.project(t,o)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,d){var m=this._getNewPixelOrigin(d,o);return this.project(t,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(t,o,d){var m=this._getNewPixelOrigin(d,o);return Y([this.project(t.getSouthWest(),o)._subtract(m),this.project(t.getNorthWest(),o)._subtract(m),this.project(t.getSouthEast(),o)._subtract(m),this.project(t.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,d){if(!d)return t;var m=this.project(t,o),y=this.getSize().divideBy(2),$=new ce(m.subtract(y),m.add(y)),H=this._getBoundsOffset($,d,o);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?t:this.unproject(m.add(H),o)},_limitOffset:function(t,o){if(!o)return t;var d=this.getPixelBounds(),m=new ce(d.min.add(t),d.max.add(t));return t.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(t,o,d){var m=Y(this.project(o.getNorthEast(),d),this.project(o.getSouthWest(),d)),y=m.min.subtract(t.min),$=m.max.subtract(t.max),H=this._rebound(y.x,-$.x),ee=this._rebound(y.y,-$.y);return new Z(H,ee)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),d=this.getMaxZoom(),m=ze.any3d?this.options.zoomSnap:1;return m&&(t=Math.round(t/m)*m),Math.max(o,Math.min(d,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var d=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,o),!0)},_createAnimProxy:function(){var t=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var d=vo,m=this._proxy.style[d];ls(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();ls(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),y=this._getCenterOffset(t)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(y)?!1:(ke(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,it(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gl(t,o){return new ut(t,o)}var gn=ye.extend({options:{position:"topright"},initialize:function(t){I(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),d=this.getPosition(),m=t._controlCorners[d];return it(o,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),hi=function(t){return new gn(t)};ut.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",d=this._controlContainer=ct("div",o+"control-container",this._container);function m(y,$){var H=o+y+" "+o+$;t[y+$]=ct("div",H,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)wt(this._controlCorners[t]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zs=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,d,m){return d<m?-1:m<d?1:0}},initialize:function(t,o,d){I(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in t)this._addLayer(t[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return gn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){it(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(it(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ct("div",t),d=this.options.collapsed;o.setAttribute("aria-haspopup",!0),di(o),Ni(o);var m=this._section=ct("section",t+"-list");d&&(this._map.on("click",this.collapse,this),et(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=ct("a",t+"-toggle",o);y.href="#",y.title="Layers",y.setAttribute("role","button"),et(y,{keydown:function($){$.keyCode===13&&this._expandSafely()},click:function($){Bt($),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ct("div",t+"-base",m),this._separator=ct("div",t+"-separator",m),this._overlaysList=ct("div",t+"-overlays",m),o.appendChild(m)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,d){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:d}),this.options.sortLayers&&this._layers.sort(l(function(m,y){return this.options.sortFunction(m.layer,y.layer,m.name,y.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mi(this._baseLayersList),Mi(this._overlaysList),this._layerControlInputs=[];var t,o,d,m,y=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),o=o||m.overlay,t=t||!m.overlay,y+=m.overlay?0:1;return this.options.hideSingleBase&&(t=t&&y>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(h(t.target)),d=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;d&&this._map.fire(d,o)},_createRadioElement:function(t,o){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(t){var o=document.createElement("label"),d=this._map.hasLayer(t.layer),m;t.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(m),m.layerId=h(t.layer),et(m,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+t.name;var $=document.createElement("span");o.appendChild($),$.appendChild(m),$.appendChild(y);var H=t.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,d,m=[],y=[];this._handlingClick=!0;for(var $=t.length-1;$>=0;$--)o=t[$],d=this._getLayer(o.layerId).layer,o.checked?m.push(d):o.checked||y.push(d);for($=0;$<y.length;$++)this._map.hasLayer(y[$])&&this._map.removeLayer(y[$]);for($=0;$<m.length;$++)this._map.hasLayer(m[$])||this._map.addLayer(m[$]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,d,m=this._map.getZoom(),y=t.length-1;y>=0;y--)o=t[y],d=this._getLayer(o.layerId).layer,o.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,et(t,"click",Bt),this.expand();var o=this;setTimeout(function(){_t(t,"click",Bt),o._preventClick=!1})}}),_l=function(t,o,d){return new zs(t,o,d)},Us=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",d=ct("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",d,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,d,m,y){var $=ct("a",d,m);return $.innerHTML=t,$.href="#",$.title=o,$.setAttribute("role","button"),$.setAttribute("aria-label",o),di($),et($,"click",hs),et($,"click",y,this),et($,"click",this._refocusOnMap,this),$},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Tt(this._zoomInButton,o),Tt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(it(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(it(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});ut.mergeOptions({zoomControl:!0}),ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Us,this.addControl(this.zoomControl))});var yl=function(t){return new Us(t)},To=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",d=ct("div",o),m=this.options;return this._addScales(m,o+"-line",d),t.on(m.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),d},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,d){t.metric&&(this._mScale=ct("div",o,d)),t.imperial&&(this._iScale=ct("div",o,d))},_update:function(){var t=this._map,o=t.getSize().y/2,d=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(d)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),d=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,d,o/t)},_updateImperial:function(t){var o=t*3.2808399,d,m,y;o>5280?(d=o/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(y=this._getRoundNum(o),this._updateScale(this._iScale,y+" ft",y/o))},_updateScale:function(t,o,d){t.style.width=Math.round(this.options.maxWidth*d)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),d=t/o;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,o*d}}),Io=function(t){return new To(t)},Ao='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ze.inlineSvg?Ao+" ":"")+"Leaflet</a>"},initialize:function(t){I(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),di(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var d=[];this.options.prefix&&d.push(this.options.prefix),t.length&&d.push(t.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});ut.mergeOptions({attributionControl:!0}),ut.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var bl=function(t){return new Eo(t)};gn.Layers=zs,gn.Zoom=Us,gn.Scale=To,gn.Attribution=Eo,hi.layers=_l,hi.zoom=yl,hi.scale=Io,hi.attribution=bl;var In=ye.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(t,o){return t.addHandler(o,this),this};var kl={Events:de},Fa=ze.touch?"touchstart mousedown":"mousedown",On=K.extend({options:{clickTolerance:3},initialize:function(t,o,d,m){I(this,m),this._element=t,this._dragStartTarget=o||t,this._preventOutline=d},enable:function(){this._enabled||(et(this._dragStartTarget,Fa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(On._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Fa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!go(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){On._dragging===this&&this.finishDrag();return}if(!(On._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(On._dragging=this,this._preventOutline&&Co(this._element),bo(),li(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,d=Da(this._element);this._startPoint=new Z(o.clientX,o.clientY),this._startPos=cs(this._element),this._parentScale=ui(d);var m=t.type==="mousedown";et(document,m?"mousemove":"touchmove",this._onMove,this),et(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,d=new Z(o.clientX,o.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Bt(t),this._moved||(this.fire("dragstart"),this._moved=!0,it(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),it(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Mt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),ko(),us();var o=this._moved&&this._moving;this._moving=!1,On._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function za(t,o,d){var m,y=[1,4,2,8],$,H,ee,ie,we,Be,Xe,lt;for($=0,Be=t.length;$<Be;$++)t[$]._code=fs(t[$],o);for(ee=0;ee<4;ee++){for(Xe=y[ee],m=[],$=0,Be=t.length,H=Be-1;$<Be;H=$++)ie=t[$],we=t[H],ie._code&Xe?we._code&Xe||(lt=Bi(we,ie,Xe,o,d),lt._code=fs(lt,o),m.push(lt)):(we._code&Xe&&(lt=Bi(we,ie,Xe,o,d),lt._code=fs(lt,o),m.push(lt)),m.push(ie));t=m}return t}function Ua(t,o){var d,m,y,$,H,ee,ie,we,Be;if(!t||t.length===0)throw new Error("latlngs not passed");_e(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Xe=Me([0,0]),lt=Se(t),on=lt.getNorthWest().distanceTo(lt.getSouthWest())*lt.getNorthEast().distanceTo(lt.getNorthWest());on<1700&&(Xe=Mo(t));var Vt=t.length,An=[];for(d=0;d<Vt;d++){var hn=Me(t[d]);An.push(o.project(Me([hn.lat-Xe.lat,hn.lng-Xe.lng])))}for(ee=ie=we=0,d=0,m=Vt-1;d<Vt;m=d++)y=An[d],$=An[m],H=y.y*$.x-$.y*y.x,ie+=(y.x+$.x)*H,we+=(y.y+$.y)*H,ee+=H*3;ee===0?Be=An[0]:Be=[ie/ee,we/ee];var Zi=o.unproject(j(Be));return Me([Zi.lat+Xe.lat,Zi.lng+Xe.lng])}function Mo(t){for(var o=0,d=0,m=0,y=0;y<t.length;y++){var $=Me(t[y]);o+=$.lat,d+=$.lng,m++}return Me([o/m,d/m])}var Ha={__proto__:null,clipPolygon:za,polygonCenter:Ua,centroid:Mo};function Va(t,o){if(!o||!t.length)return t.slice();var d=o*o;return t=Do(t,d),t=Cl(t,d),t}function $o(t,o,d){return Math.sqrt(G(t,o,d,!0))}function wl(t,o,d){return G(t,o,d)}function Cl(t,o){var d=t.length,m=typeof Uint8Array<"u"?Uint8Array:Array,y=new m(d);y[0]=y[d-1]=1,Po(t,y,o,0,d-1);var $,H=[];for($=0;$<d;$++)y[$]&&H.push(t[$]);return H}function Po(t,o,d,m,y){var $=0,H,ee,ie;for(ee=m+1;ee<=y-1;ee++)ie=G(t[ee],t[m],t[y],!0),ie>$&&(H=ee,$=ie);$>d&&(o[H]=1,Po(t,o,d,m,H),Po(t,o,d,H,y))}function Do(t,o){for(var d=[t[0]],m=1,y=0,$=t.length;m<$;m++)N(t[m],t[y])>o&&(d.push(t[m]),y=m);return y<$-1&&d.push(t[$-1]),d}var Za;function Oo(t,o,d,m,y){var $=m?Za:fs(t,d),H=fs(o,d),ee,ie,we;for(Za=H;;){if(!($|H))return[t,o];if($&H)return!1;ee=$||H,ie=Bi(t,o,ee,d,y),we=fs(ie,d),ee===$?(t=ie,$=we):(o=ie,H=we)}}function Bi(t,o,d,m,y){var $=o.x-t.x,H=o.y-t.y,ee=m.min,ie=m.max,we,Be;return d&8?(we=t.x+$*(ie.y-t.y)/H,Be=ie.y):d&4?(we=t.x+$*(ee.y-t.y)/H,Be=ee.y):d&2?(we=ie.x,Be=t.y+H*(ie.x-t.x)/$):d&1&&(we=ee.x,Be=t.y+H*(ee.x-t.x)/$),new Z(we,Be,y)}function fs(t,o){var d=0;return t.x<o.min.x?d|=1:t.x>o.max.x&&(d|=2),t.y<o.min.y?d|=4:t.y>o.max.y&&(d|=8),d}function N(t,o){var d=o.x-t.x,m=o.y-t.y;return d*d+m*m}function G(t,o,d,m){var y=o.x,$=o.y,H=d.x-y,ee=d.y-$,ie=H*H+ee*ee,we;return ie>0&&(we=((t.x-y)*H+(t.y-$)*ee)/ie,we>1?(y=d.x,$=d.y):we>0&&(y+=H*we,$+=ee*we)),H=t.x-y,ee=t.y-$,m?H*H+ee*ee:new Z(y,$)}function _e(t){return!C(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Te(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_e(t)}function rt(t,o){var d,m,y,$,H,ee,ie,we;if(!t||t.length===0)throw new Error("latlngs not passed");_e(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Be=Me([0,0]),Xe=Se(t),lt=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());lt<1700&&(Be=Mo(t));var on=t.length,Vt=[];for(d=0;d<on;d++){var An=Me(t[d]);Vt.push(o.project(Me([An.lat-Be.lat,An.lng-Be.lng])))}for(d=0,m=0;d<on-1;d++)m+=Vt[d].distanceTo(Vt[d+1])/2;if(m===0)we=Vt[0];else for(d=0,$=0;d<on-1;d++)if(H=Vt[d],ee=Vt[d+1],y=H.distanceTo(ee),$+=y,$>m){ie=($-m)/y,we=[ee.x-ie*(ee.x-H.x),ee.y-ie*(ee.y-H.y)];break}var hn=o.unproject(j(we));return Me([hn.lat+Be.lat,hn.lng+Be.lng])}var Kt={__proto__:null,simplify:Va,pointToSegmentDistance:$o,closestPointOnSegment:wl,clipSegment:Oo,_getEdgeIntersection:Bi,_getBitCode:fs,_sqClosestPointOnSegment:G,isFlat:_e,_flat:Te,polylineCenter:rt},_n={project:function(t){return new Z(t.lng,t.lat)},unproject:function(t){return new Ee(t.y,t.x)},bounds:new ce([-180,-90],[180,90])},ps={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,d=this.R,m=t.lat*o,y=this.R_MINOR/d,$=Math.sqrt(1-y*y),H=$*Math.sin(m),ee=Math.tan(Math.PI/4-m/2)/Math.pow((1-H)/(1+H),$/2);return m=-d*Math.log(Math.max(ee,1e-10)),new Z(t.lng*o*d,m)},unproject:function(t){for(var o=180/Math.PI,d=this.R,m=this.R_MINOR/d,y=Math.sqrt(1-m*m),$=Math.exp(-t.y/d),H=Math.PI/2-2*Math.atan($),ee=0,ie=.1,we;ee<15&&Math.abs(ie)>1e-7;ee++)we=y*Math.sin(H),we=Math.pow((1-we)/(1+we),y/2),ie=Math.PI/2-2*Math.atan($*we)-H,H+=ie;return new Ee(H*o,t.x*o/d)}},Cp={__proto__:null,LonLat:_n,Mercator:ps,SphericalMercator:W},Lp=s({},J,{code:"EPSG:3395",projection:ps,transformation:(function(){var t=.5/(Math.PI*ps.R);return R(t,.5,-t,.5)})()}),su=s({},J,{code:"EPSG:4326",projection:_n,transformation:R(1/180,1,-1/180,.5)}),xp=s({},F,{projection:_n,transformation:R(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var d=o.lng-t.lng,m=o.lat-t.lat;return Math.sqrt(d*d+m*m)},infinite:!0});F.Earth=J,F.EPSG3395=Lp,F.EPSG3857=z,F.EPSG900913=q,F.EPSG4326=su,F.Simple=xp;var Rn=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var d=this.getEvents();o.on(d,this),this.once("remove",function(){o.off(d,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});ut.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=h(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,o){for(var d in this._layers)t.call(o,this._layers[d]);return this},_addLayers:function(t){t=t?C(t)?t:[t]:[];for(var o=0,d=t.length;o<d;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=h(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var y=this._zoomBoundLayers[m].options;t=y.minZoom===void 0?t:Math.min(t,y.minZoom),o=y.maxZoom===void 0?o:Math.max(o,y.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fi=Rn.extend({initialize:function(t,o){I(this,o),this._layers={};var d,m;if(t)for(d=0,m=t.length;d<m;d++)this.addLayer(t[d])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[t]&&m[t].apply(m,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var d in this._layers)t.call(o,this._layers[d]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),Sp=function(t,o){return new Fi(t,o)},ms=Fi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Fi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Fi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ve;for(var o in this._layers){var d=this._layers[o];t.extend(d.getBounds?d.getBounds():d.getLatLng())}return t}}),Tp=function(t,o){return new ms(t,o)},zi=ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){I(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var d=this._getIconUrl(t);if(!d){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(t,o){var d=this.options,m=d[o+"Size"];typeof m=="number"&&(m=[m,m]);var y=j(m),$=j(o==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(d.className||""),$&&(t.style.marginLeft=-$.x+"px",t.style.marginTop=-$.y+"px"),y&&(t.style.width=y.x+"px",t.style.height=y.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return ze.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ip(t){return new zi(t)}var Ro=zi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ro.imagePath!="string"&&(Ro.imagePath=this._detectIconPath()),(this.options.imagePath||Ro.imagePath)+zi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(d,m,y){var $=m.exec(d);return $&&$[y]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ct("div","leaflet-default-icon-path",document.body),o=os(t,"background-image")||os(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),iu=In.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new On(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),it(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,d=o._map,m=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,$=cs(o._icon),H=d.getPixelBounds(),ee=d.getPixelOrigin(),ie=Y(H.min._subtract(ee).add(y),H.max._subtract(ee).subtract(y));if(!ie.contains($)){var we=j((Math.max(ie.max.x,$.x)-ie.max.x)/(H.max.x-ie.max.x)-(Math.min(ie.min.x,$.x)-ie.min.x)/(H.min.x-ie.min.x),(Math.max(ie.max.y,$.y)-ie.max.y)/(H.max.y-ie.max.y)-(Math.min(ie.min.y,$.y)-ie.min.y)/(H.min.y-ie.min.y)).multiplyBy(m);d.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),Mt(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ke(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(me(this._panRequest),this._panRequest=ke(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,d=o._shadow,m=cs(o._icon),y=o._map.layerPointToLatLng(m);d&&Mt(d,m),o._latlng=y,t.latlng=y,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){me(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ja=Rn.extend({options:{icon:new Ro,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){I(this,o),this._latlng=Me(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=Me(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=t.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,t.title&&(d.title=t.title),d.tagName==="IMG"&&(d.alt=t.alt||"")),it(d,o),t.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(d,"focus",this._panOnFocus,this);var y=t.icon.createShadow(this._shadow),$=!1;y!==this._shadow&&(this._removeShadow(),$=!0),y&&(it(y,o),y.alt=""),this._shadow=y,t.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&$&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Mt(this._icon,t),this._shadow&&Mt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(it(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),iu)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new iu(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ht(this._icon,t),this._shadow&&Ht(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,d=o.iconSize?j(o.iconSize):j(0,0),m=o.iconAnchor?j(o.iconAnchor):j(0,0);t.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ap(t,o){return new ja(t,o)}var Hs=Rn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return I(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qa=Hs.extend({options:{fill:!0,radius:10},initialize:function(t,o){I(this,o),this._latlng=Me(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=Me(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return Hs.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,d=this._clickTolerance(),m=[t+d,o+d];this._pxBounds=new ce(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ep(t,o){return new qa(t,o)}var Ll=qa.extend({initialize:function(t,o,d){if(typeof o=="number"&&(o=s({},d,{radius:o})),I(this,o),this._latlng=Me(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Hs.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===J.distance){var y=Math.PI/180,$=this._mRadius/J.R/y,H=d.project([o+$,t]),ee=d.project([o-$,t]),ie=H.add(ee).divideBy(2),we=d.unproject(ie).lat,Be=Math.acos((Math.cos($*y)-Math.sin(o*y)*Math.sin(we*y))/(Math.cos(o*y)*Math.cos(we*y)))/y;(isNaN(Be)||Be===0)&&(Be=$/Math.cos(Math.PI/180*o)),this._point=ie.subtract(d.getPixelOrigin()),this._radius=isNaN(Be)?0:ie.x-d.project([we,t-Be]).x,this._radiusY=ie.y-H.y}else{var Xe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Xe).x}this._updateBounds()}});function Mp(t,o,d){return new Ll(t,o,d)}var vs=Hs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){I(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,d=null,m=G,y,$,H=0,ee=this._parts.length;H<ee;H++)for(var ie=this._parts[H],we=1,Be=ie.length;we<Be;we++){y=ie[we-1],$=ie[we];var Xe=m(t,y,$,!0);Xe<o&&(o=Xe,d=m(t,y,$))}return d&&(d.distance=Math.sqrt(o)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=Me(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ve,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return _e(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],d=_e(t),m=0,y=t.length;m<y;m++)d?(o[m]=Me(t[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(t[m]);return o},_project:function(){var t=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new Z(t,t);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,d){var m=t[0]instanceof Ee,y=t.length,$,H;if(m){for(H=[],$=0;$<y;$++)H[$]=this._map.latLngToLayerPoint(t[$]),d.extend(H[$]);o.push(H)}else for($=0;$<y;$++)this._projectLatlngs(t[$],o,d)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,d,m,y,$,H,ee,ie;for(d=0,y=0,$=this._rings.length;d<$;d++)for(ie=this._rings[d],m=0,H=ie.length;m<H-1;m++)ee=Oo(ie[m],ie[m+1],t,m,!0),ee&&(o[y]=o[y]||[],o[y].push(ee[0]),(ee[1]!==ie[m+1]||m===H-2)&&(o[y].push(ee[1]),y++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,d=0,m=t.length;d<m;d++)t[d]=Va(t[d],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var d,m,y,$,H,ee,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,$=this._parts.length;d<$;d++)for(ee=this._parts[d],m=0,H=ee.length,y=H-1;m<H;y=m++)if(!(!o&&m===0)&&$o(t,ee[y],ee[m])<=ie)return!0;return!1}});function $p(t,o){return new vs(t,o)}vs._flat=Te;var Ui=vs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ua(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=vs.prototype._convertLatLngs.call(this,t),d=o.length;return d>=2&&o[0]instanceof Ee&&o[0].equals(o[d-1])&&o.pop(),o},_setLatLngs:function(t){vs.prototype._setLatLngs.call(this,t),_e(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _e(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,d=new Z(o,o);if(t=new ce(t.min.subtract(d),t.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,y=this._rings.length,$;m<y;m++)$=za(this._rings[m],t,!0),$.length&&this._parts.push($)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,d,m,y,$,H,ee,ie,we;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for($=0,ie=this._parts.length;$<ie;$++)for(d=this._parts[$],H=0,we=d.length,ee=we-1;H<we;ee=H++)m=d[H],y=d[ee],m.y>t.y!=y.y>t.y&&t.x<(y.x-m.x)*(t.y-m.y)/(y.y-m.y)+m.x&&(o=!o);return o||vs.prototype._containsPoint.call(this,t,!0)}});function Pp(t,o){return new Ui(t,o)}var gs=ms.extend({initialize:function(t,o){I(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=C(t)?t:t.features,d,m,y;if(o){for(d=0,m=o.length;d<m;d++)y=o[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var $=this.options;if($.filter&&!$.filter(t))return this;var H=Wa(t,$);return H?(H.feature=Ja(t),H.defaultOptions=H.options,this.resetStyle(H),$.onEachFeature&&$.onEachFeature(t,H),this.addLayer(H)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function Wa(t,o){var d=t.type==="Feature"?t.geometry:t,m=d?d.coordinates:null,y=[],$=o&&o.pointToLayer,H=o&&o.coordsToLatLng||xl,ee,ie,we,Be;if(!m&&!d)return null;switch(d.type){case"Point":return ee=H(m),ou($,t,ee,o);case"MultiPoint":for(we=0,Be=m.length;we<Be;we++)ee=H(m[we]),y.push(ou($,t,ee,o));return new ms(y);case"LineString":case"MultiLineString":return ie=Ga(m,d.type==="LineString"?0:1,H),new vs(ie,o);case"Polygon":case"MultiPolygon":return ie=Ga(m,d.type==="Polygon"?1:2,H),new Ui(ie,o);case"GeometryCollection":for(we=0,Be=d.geometries.length;we<Be;we++){var Xe=Wa({geometry:d.geometries[we],type:"Feature",properties:t.properties},o);Xe&&y.push(Xe)}return new ms(y);case"FeatureCollection":for(we=0,Be=d.features.length;we<Be;we++){var lt=Wa(d.features[we],o);lt&&y.push(lt)}return new ms(y);default:throw new Error("Invalid GeoJSON object.")}}function ou(t,o,d,m){return t?t(o,d):new ja(d,m&&m.markersInheritOptions&&m)}function xl(t){return new Ee(t[1],t[0],t[2])}function Ga(t,o,d){for(var m=[],y=0,$=t.length,H;y<$;y++)H=o?Ga(t[y],o-1,d):(d||xl)(t[y]),m.push(H);return m}function Sl(t,o){return t=Me(t),t.alt!==void 0?[T(t.lng,o),T(t.lat,o),T(t.alt,o)]:[T(t.lng,o),T(t.lat,o)]}function Ka(t,o,d,m){for(var y=[],$=0,H=t.length;$<H;$++)y.push(o?Ka(t[$],_e(t[$])?0:o-1,d,m):Sl(t[$],m));return!o&&d&&y.length>0&&y.push(y[0].slice()),y}function Hi(t,o){return t.feature?s({},t.feature,{geometry:o}):Ja(o)}function Ja(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Tl={toGeoJSON:function(t){return Hi(this,{type:"Point",coordinates:Sl(this.getLatLng(),t)})}};ja.include(Tl),Ll.include(Tl),qa.include(Tl),vs.include({toGeoJSON:function(t){var o=!_e(this._latlngs),d=Ka(this._latlngs,o?1:0,!1,t);return Hi(this,{type:(o?"Multi":"")+"LineString",coordinates:d})}}),Ui.include({toGeoJSON:function(t){var o=!_e(this._latlngs),d=o&&!_e(this._latlngs[0]),m=Ka(this._latlngs,d?2:o?1:0,!0,t);return o||(m=[m]),Hi(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Fi.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(d){o.push(d.toGeoJSON(t).geometry.coordinates)}),Hi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var d=o==="GeometryCollection",m=[];return this.eachLayer(function(y){if(y.toGeoJSON){var $=y.toGeoJSON(t);if(d)m.push($.geometry);else{var H=Ja($);H.type==="FeatureCollection"?m.push.apply(m,H.features):m.push(H)}}}),d?Hi(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function au(t,o){return new gs(t,o)}var Dp=au,Ya=Rn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,d){this._url=t,this._bounds=Se(o),I(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(it(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&as(this._image),this},bringToBack:function(){return this._map&&rs(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Se(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ct("img");if(it(o,"leaflet-image-layer"),this._zoomAnimated&&it(o,"leaflet-zoom-animated"),this.options.className&&it(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ls(this._image,d,o)},_reset:function(){var t=this._image,o=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=o.getSize();Mt(t,o.min),t.style.width=d.x+"px",t.style.height=d.y+"px"},_updateOpacity:function(){Ht(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Op=function(t,o,d){return new Ya(t,o,d)},ru=Ya.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ct("video");if(it(o,"leaflet-image-layer"),this._zoomAnimated&&it(o,"leaflet-zoom-animated"),this.options.className&&it(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),t){for(var d=o.getElementsByTagName("source"),m=[],y=0;y<d.length;y++)m.push(d[y].src);this._url=d.length>0?m:[o.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var $=0;$<this._url.length;$++){var H=ct("source");H.src=this._url[$],o.appendChild(H)}}});function Rp(t,o,d){return new ru(t,o,d)}var lu=Ya.extend({_initImage:function(){var t=this._image=this._url;it(t,"leaflet-image-layer"),this._zoomAnimated&&it(t,"leaflet-zoom-animated"),this.options.className&&it(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Np(t,o,d){return new lu(t,o,d)}var Gn=Rn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof Ee||C(t))?(this._latlng=Me(t),I(this,o)):(I(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ht(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ht(this._container,1),this.bringToFront(),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ht(this._container,0),this._removeTimeout=setTimeout(l(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Me(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&as(this._container),this},bringToBack:function(){return this._map&&rs(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof ms){o=null;var d=this._source._layers;for(var m in d)if(d[m]._map){o=d[m];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=j(this.options.offset),d=this._getAnchor();this._zoomAnimated?Mt(this._container,t.add(d)):o=o.add(t).add(d);var m=this._containerBottom=-o.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ut.include({_initOverlay:function(t,o,d,m){var y=o;return y instanceof t||(y=new t(m).setContent(o)),d&&y.setLatLng(d),y}}),Rn.include({_initOverlay:function(t,o,d,m){var y=d;return y instanceof t?(I(y,m),y._source=this):(y=o&&!m?o:new t(m,this),y.setContent(d)),y}});var Xa=Gn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Gn.prototype.openOn.call(this,t)},onAdd:function(t){Gn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hs||this._source.on("preclick",ds))},onRemove:function(t){Gn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hs||this._source.off("preclick",ds))},getEvents:function(){var t=Gn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ct("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ct("div",t+"-content-wrapper",o);if(this._contentNode=ct("div",t+"-content",d),di(o),Ni(this._contentNode),et(o,"contextmenu",ds),this._tipContainer=ct("div",t+"-tip-container",o),this._tip=ct("div",t+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=ct("a",t+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',et(m,"click",function(y){Bt(y),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var d=t.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),o.width=d+1+"px",o.whiteSpace="",o.height="";var m=t.offsetHeight,y=this.options.maxHeight,$="leaflet-popup-scrolled";y&&m>y?(o.height=y+"px",it(t,$)):Tt(t,$),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),d=this._getAnchor();Mt(this._container,o.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(os(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+o,m=this._containerWidth,y=new Z(this._containerLeft,-d-this._containerBottom);y._add(cs(this._container));var $=t.layerPointToContainerPoint(y),H=j(this.options.autoPanPadding),ee=j(this.options.autoPanPaddingTopLeft||H),ie=j(this.options.autoPanPaddingBottomRight||H),we=t.getSize(),Be=0,Xe=0;$.x+m+ie.x>we.x&&(Be=$.x+m-we.x+ie.x),$.x-Be-ee.x<0&&(Be=$.x-ee.x),$.y+d+ie.y>we.y&&(Xe=$.y+d-we.y+ie.y),$.y-Xe-ee.y<0&&(Xe=$.y-ee.y),(Be||Xe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Be,Xe]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bp=function(t,o){return new Xa(t,o)};ut.mergeOptions({closePopupOnClick:!0}),ut.include({openPopup:function(t,o,d){return this._initOverlay(Xa,t,o,d).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Rn.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Xa,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof ms||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){hs(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof Hs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Qa=Gn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Gn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Gn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Gn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,d,m=this._map,y=this._container,$=m.latLngToContainerPoint(m.getCenter()),H=m.layerPointToContainerPoint(t),ee=this.options.direction,ie=y.offsetWidth,we=y.offsetHeight,Be=j(this.options.offset),Xe=this._getAnchor();ee==="top"?(o=ie/2,d=we):ee==="bottom"?(o=ie/2,d=0):ee==="center"?(o=ie/2,d=we/2):ee==="right"?(o=0,d=we/2):ee==="left"?(o=ie,d=we/2):H.x<$.x?(ee="right",o=0,d=we/2):(ee="left",o=ie+(Be.x+Xe.x)*2,d=we/2),t=t.subtract(j(o,d,!0)).add(Be).add(Xe),Tt(y,"leaflet-tooltip-right"),Tt(y,"leaflet-tooltip-left"),Tt(y,"leaflet-tooltip-top"),Tt(y,"leaflet-tooltip-bottom"),it(y,"leaflet-tooltip-"+ee),Mt(y,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ht(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fp=function(t,o){return new Qa(t,o)};ut.include({openTooltip:function(t,o,d){return this._initOverlay(Qa,t,o,d).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Rn.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[o](d),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof ms||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(et(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),et(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,d,m;this._tooltip.options.sticky&&t.originalEvent&&(d=this._map.mouseEventToContainerPoint(t.originalEvent),m=this._map.containerPointToLayerPoint(d),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var cu=zi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Mi(o),o.appendChild(d.html)):o.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=j(d.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function zp(t){return new cu(t)}zi.Default=Ro;var No=Rn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){I(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),wt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(as(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Z?t:new Z(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,d=-t(-1/0,1/0),m=0,y=o.length,$;m<y;m++)$=o[m].style.zIndex,o[m]!==this._container&&$&&(d=t(d,+$));isFinite(d)&&(this.options.zIndex=d+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ze.ielt9){Ht(this._container,this.options.opacity);var t=+new Date,o=!1,d=!1;for(var m in this._tiles){var y=this._tiles[m];if(!(!y.current||!y.loaded)){var $=Math.min(1,(t-y.loaded)/200);Ht(y.el,$),$<1?o=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),o&&(me(this._fadeFrame),this._fadeFrame=ke(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===t?(this._levels[d].el.style.zIndex=o-Math.abs(t-d),this._onUpdateLevel(d)):(wt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[t],y=this._map;return m||(m=this._levels[t]={},m.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=y.project(y.unproject(y.getPixelOrigin()),t).round(),m.zoom=t,this._setZoomTransform(m,y.getCenter(),y.getZoom()),v(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,o,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)wt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,d,m){var y=Math.floor(t/2),$=Math.floor(o/2),H=d-1,ee=new Z(+y,+$);ee.z=+H;var ie=this._tileCoordsToKey(ee),we=this._tiles[ie];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),H>m?this._retainParent(y,$,H,m):!1)},_retainChildren:function(t,o,d,m){for(var y=2*t;y<2*t+2;y++)for(var $=2*o;$<2*o+2;$++){var H=new Z(y,$);H.z=d+1;var ee=this._tileCoordsToKey(H),ie=this._tiles[ee];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);d+1<m&&this._retainChildren(y,$,d+1,m)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,d,m){var y=Math.round(o);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var $=this.options.updateWhenZooming&&y!==this._tileZoom;(!m||$)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(t),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var d in this._levels)this._setZoomTransform(this._levels[d],t,o)},_setZoomTransform:function(t,o,d){var m=this._map.getZoomScale(d,t.zoom),y=t.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,d)).round();ze.any3d?ls(t.el,y,m):Mt(t.el,y)},_resetGrid:function(){var t=this._map,o=t.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],m).x/d.x),Math.ceil(t.project([0,o.wrapLng[1]],m).x/d.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],m).y/d.x),Math.ceil(t.project([o.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,d=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(d,this._tileZoom),y=o.project(t,this._tileZoom).floor(),$=o.getSize().divideBy(m*2);return new ce(y.subtract($),y.add($))},_update:function(t){var o=this._map;if(o){var d=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(t),y=this._pxBoundsToTileRange(m),$=y.getCenter(),H=[],ee=this.options.keepBuffer,ie=new ce(y.getBottomLeft().subtract([ee,-ee]),y.getTopRight().add([ee,-ee]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var Be=this._tiles[we].coords;(Be.z!==this._tileZoom||!ie.contains(new Z(Be.x,Be.y)))&&(this._tiles[we].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(t,d);return}for(var Xe=y.min.y;Xe<=y.max.y;Xe++)for(var lt=y.min.x;lt<=y.max.x;lt++){var on=new Z(lt,Xe);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Vt=this._tiles[this._tileCoordsToKey(on)];Vt?Vt.current=!0:H.push(on)}}if(H.sort(function(hn,Zi){return hn.distanceTo($)-Zi.distanceTo($)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var An=document.createDocumentFragment();for(lt=0;lt<H.length;lt++)this._addTile(H[lt],An);this._level.el.appendChild(An)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var d=this._globalTileRange;if(!o.wrapLng&&(t.x<d.min.x||t.x>d.max.x)||!o.wrapLat&&(t.y<d.min.y||t.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(t);return Se(this.options.bounds).overlaps(m)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,d=this.getTileSize(),m=t.scaleBy(d),y=m.add(d),$=o.unproject(m,t.z),H=o.unproject(y,t.z);return[$,H]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),d=new ve(o[0],o[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),d=new Z(+o[0],+o[1]);return d.z=+o[2],d},_removeTile:function(t){var o=this._tiles[t];o&&(wt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){it(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=v,t.onmousemove=v,ze.ielt9&&this.options.opacity<1&&Ht(t,this.options.opacity)},_addTile:function(t,o){var d=this._getTilePos(t),m=this._tileCoordsToKey(t),y=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(y),this.createTile.length<2&&ke(l(this._tileReady,this,t,null,y)),Mt(y,d),this._tiles[m]={el:y,coords:t,current:!0},o.appendChild(y),this.fire("tileloadstart",{tile:y,coords:t})},_tileReady:function(t,o,d){o&&this.fire("tileerror",{error:o,tile:d,coords:t});var m=this._tileCoordsToKey(t);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Ht(d.el,0),me(this._fadeFrame),this._fadeFrame=ke(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),o||(it(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ze.ielt9||!this._map._fadeAnimated?ke(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new Z(this._wrapX?f(t.x,this._wrapX):t.x,this._wrapY?f(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new ce(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Up(t){return new No(t)}var Vi=No.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=I(this,o),o.detectRetina&&ze.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var d=document.createElement("img");return et(d,"load",l(this._tileOnLoad,this,o,d)),et(d,"error",l(this._tileOnError,this,o,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(t),d},getTileUrl:function(t){var o={r:ze.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=d),o["-y"]=d}return b(this._url,s(o,this.options))},_tileOnLoad:function(t,o){ze.ielt9?setTimeout(l(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,d){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),t(d,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(t=o-t),t+m},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=v,o.onerror=v,!o.complete)){o.src=x;var d=this._tiles[t].coords;wt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:d})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",x),No.prototype._removeTile.call(this,t)},_tileReady:function(t,o,d){if(!(!this._map||d&&d.getAttribute("src")===x))return No.prototype._tileReady.call(this,t,o,d)}});function uu(t,o){return new Vi(t,o)}var du=Vi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var d=s({},this.defaultWmsParams);for(var m in o)m in this.options||(d[m]=o[m]);o=I(this,o);var y=o.detectRetina&&ze.retina?2:1,$=this.getTileSize();d.width=$.x*y,d.height=$.y*y,this.wmsParams=d},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Vi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),d=this._crs,m=Y(d.project(o[0]),d.project(o[1])),y=m.min,$=m.max,H=(this._wmsVersion>=1.3&&this._crs===su?[y.y,y.x,$.y,$.x]:[y.x,y.y,$.x,$.y]).join(","),ee=Vi.prototype.getTileUrl.call(this,t);return ee+D(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(t,o){return s(this.wmsParams,t),o||this.redraw(),this}});function Hp(t,o){return new du(t,o)}Vi.WMS=du,uu.wms=Hp;var _s=Rn.extend({options:{padding:.1},initialize:function(t){I(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),it(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var d=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,o),$=m.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(t,o));ze.any3d?ls(this._container,$,d):Mt(this._container,$)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),d=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new ce(d,d.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hu=_s.extend({options:{tolerance:0},getEvents:function(){var t=_s.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_s.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");et(t,"mousemove",this._onMouseMove,this),et(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),et(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){me(this._redrawRequest),delete this._ctx,wt(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_s.prototype._update.call(this);var t=this._bounds,o=this._container,d=t.getSize(),m=ze.retina?2:1;Mt(o,t.min),o.width=m*d.x,o.height=m*d.y,o.style.width=d.x+"px",o.style.height=d.y+"px",ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){_s.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,d=o.next,m=o.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),d=[],m,y;for(y=0;y<o.length;y++){if(m=Number(o[y]),isNaN(m))return;d.push(m)}t.options._dashArray=d}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ke(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var d=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)t=m.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var d,m,y,$,H=t._parts,ee=H.length,ie=this._ctx;if(ee){for(ie.beginPath(),d=0;d<ee;d++){for(m=0,y=H[d].length;m<y;m++)$=H[d][m],ie[m?"lineTo":"moveTo"]($.x,$.y);o&&ie.closePath()}this._fillStroke(ie,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,d=this._ctx,m=Math.max(Math.round(t._radius),1),y=(Math.max(Math.round(t._radiusY),1)||m)/m;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(o.x,o.y/y,m,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,t)}},_fillStroke:function(t,o){var d=o.options;d.fill&&(t.globalAlpha=d.fillOpacity,t.fillStyle=d.fillColor||d.color,t.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=d.opacity,t.lineWidth=d.weight,t.strokeStyle=d.color,t.lineCap=d.lineCap,t.lineJoin=d.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),d,m,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var d,m,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(o)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(t),m&&(it(this._container,"leaflet-interactive"),this._fireEvent([m],t,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,d){this._map._fireDOMEvent(o,d||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var d=o.next,m=o.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var d=o.next,m=o.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function fu(t){return ze.canvas?new hu(t):null}var Bo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Vp={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_s.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=Bo("shape");it(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=Bo("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;wt(o),t.removeInteractiveTarget(o),delete this._layers[h(t)]},_updateStyle:function(t){var o=t._stroke,d=t._fill,m=t.options,y=t._container;y.stroked=!!m.stroke,y.filled=!!m.fill,m.stroke?(o||(o=t._stroke=Bo("stroke")),y.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=C(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(y.removeChild(o),t._stroke=null),m.fill?(d||(d=t._fill=Bo("fill")),y.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(y.removeChild(d),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),d=Math.round(t._radius),m=Math.round(t._radiusY||d);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){as(t._container)},_bringToBack:function(t){rs(t._container)}},er=ze.vml?Bo:ae,Fo=_s.extend({_initContainer:function(){this._container=er("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=er("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_s.prototype._update.call(this);var t=this._bounds,o=t.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,d.setAttribute("width",o.x),d.setAttribute("height",o.y)),Mt(d,t.min),d.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=er("path");t.options.className&&it(o,t.options.className),t.options.interactive&&it(o,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){wt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,d=t.options;o&&(d.stroke?(o.setAttribute("stroke",d.color),o.setAttribute("stroke-opacity",d.opacity),o.setAttribute("stroke-width",d.weight),o.setAttribute("stroke-linecap",d.lineCap),o.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?o.setAttribute("stroke-dasharray",d.dashArray):o.removeAttribute("stroke-dasharray"),d.dashOffset?o.setAttribute("stroke-dashoffset",d.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),d.fill?(o.setAttribute("fill",d.fillColor||d.color),o.setAttribute("fill-opacity",d.fillOpacity),o.setAttribute("fill-rule",d.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,he(t._parts,o))},_updateCircle:function(t){var o=t._point,d=Math.max(Math.round(t._radius),1),m=Math.max(Math.round(t._radiusY),1)||d,y="a"+d+","+m+" 0 1,0 ",$=t._empty()?"M0 0":"M"+(o.x-d)+","+o.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(t,$)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){as(t._path)},_bringToBack:function(t){rs(t._path)}});ze.vml&&Fo.include(Vp);function pu(t){return ze.svg||ze.vml?new Fo(t):null}ut.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&fu(t)||pu(t)}});var mu=Ui.extend({initialize:function(t,o){Ui.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Se(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Zp(t,o){return new mu(t,o)}Fo.create=er,Fo.pointsToPath=he,gs.geometryToLayer=Wa,gs.coordsToLatLng=xl,gs.coordsToLatLngs=Ga,gs.latLngToCoords=Sl,gs.latLngsToCoords=Ka,gs.getFeature=Hi,gs.asFeature=Ja,ut.mergeOptions({boxZoom:!0});var vu=In.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),li(),bo(),this._startPoint=this._map.mouseEventToContainerPoint(t),et(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),it(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new ce(this._point,this._startPoint),d=o.getSize();Mt(this._box,o.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(wt(this._box),Tt(this._container,"leaflet-crosshair")),us(),ko(),_t(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ut.addInitHook("addHandler","boxZoom",vu),ut.mergeOptions({doubleClickZoom:!0});var gu=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,d=o.getZoom(),m=o.options.zoomDelta,y=t.originalEvent.shiftKey?d-m:d+m;o.options.doubleClickZoom==="center"?o.setZoom(y):o.setZoomAround(t.containerPoint,y)}});ut.addInitHook("addHandler","doubleClickZoom",gu),ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _u=In.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new On(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}it(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Se(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,y=(m-o+d)%t+o-d,$=(m+o+d)%t-o-d,H=Math.abs(y+d)<Math.abs($+d)?y:$;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(t){var o=this._map,d=o.options,m=!d.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),m)o.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),$=(this._lastTime-this._times[0])/1e3,H=d.easeLinearity,ee=y.multiplyBy(H/$),ie=ee.distanceTo([0,0]),we=Math.min(d.inertiaMaxSpeed,ie),Be=ee.multiplyBy(we/ie),Xe=we/(d.inertiaDeceleration*H),lt=Be.multiplyBy(-Xe/2).round();!lt.x&&!lt.y?o.fire("moveend"):(lt=o._limitOffset(lt,o.options.maxBounds),ke(function(){o.panBy(lt,{duration:Xe,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});ut.addInitHook("addHandler","dragging",_u),ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yu=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),et(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,d=t.scrollTop||o.scrollTop,m=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},d=this.keyCodes,m,y;for(m=0,y=d.left.length;m<y;m++)o[d.left[m]]=[-1*t,0];for(m=0,y=d.right.length;m<y;m++)o[d.right[m]]=[t,0];for(m=0,y=d.down.length;m<y;m++)o[d.down[m]]=[0,t];for(m=0,y=d.up.length;m<y;m++)o[d.up[m]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},d=this.keyCodes,m,y;for(m=0,y=d.zoomIn.length;m<y;m++)o[d.zoomIn[m]]=t;for(m=0,y=d.zoomOut.length;m<y;m++)o[d.zoomOut[m]]=-t},_addHooks:function(){et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,d=this._map,m;if(o in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[o],t.shiftKey&&(m=j(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(j(m),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(y)}else d.panBy(m)}else if(o in this._zoomKeys)d.setZoom(d.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;hs(t)}}});ut.addInitHook("addHandler","keyboard",yu),ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bu=In.extend({addHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=Na(t),d=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),m),hs(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),d=this._map.options.zoomSnap||0;t._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,$=d?Math.ceil(y/d)*d:y,H=t._limitZoom(o+(this._delta>0?$:-$))-o;this._delta=0,this._startTime=null,H&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+H):t.setZoomAround(this._lastMousePos,o+H))}});ut.addInitHook("addHandler","scrollWheelZoom",bu);var jp=600;ut.mergeOptions({tapHold:ze.touchNative&&ze.safari&&ze.mobile,tapTolerance:15});var ku=In.extend({addHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new Z(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(et(document,"touchend",Bt),et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),jp),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){_t(document,"touchend",Bt),_t(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new Z(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var d=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});d._simulated=!0,o.target.dispatchEvent(d)}});ut.addInitHook("addHandler","tapHold",ku),ut.mergeOptions({touchZoom:ze.touch,bounceAtZoomLimits:!0});var wu=In.extend({addHooks:function(){it(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var d=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),Bt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,d=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]),y=d.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(y,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&y<1||this._zoom>o.getMaxZoom()&&y>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var $=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(y===1&&$.x===0&&$.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract($),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),me(this._animRequest);var H=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ke(H,this,!0),Bt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,me(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ut.addInitHook("addHandler","touchZoom",wu),ut.BoxZoom=vu,ut.DoubleClickZoom=gu,ut.Drag=_u,ut.Keyboard=yu,ut.ScrollWheelZoom=bu,ut.TapHold=ku,ut.TouchZoom=wu,i.Bounds=ce,i.Browser=ze,i.CRS=F,i.Canvas=hu,i.Circle=Ll,i.CircleMarker=qa,i.Class=ye,i.Control=gn,i.DivIcon=cu,i.DivOverlay=Gn,i.DomEvent=vl,i.DomUtil=pl,i.Draggable=On,i.Evented=K,i.FeatureGroup=ms,i.GeoJSON=gs,i.GridLayer=No,i.Handler=In,i.Icon=zi,i.ImageOverlay=Ya,i.LatLng=Ee,i.LatLngBounds=ve,i.Layer=Rn,i.LayerGroup=Fi,i.LineUtil=Kt,i.Map=ut,i.Marker=ja,i.Mixin=kl,i.Path=Hs,i.Point=Z,i.PolyUtil=Ha,i.Polygon=Ui,i.Polyline=vs,i.Popup=Xa,i.PosAnimation=Ba,i.Projection=Cp,i.Rectangle=mu,i.Renderer=_s,i.SVG=Fo,i.SVGOverlay=lu,i.TileLayer=Vi,i.Tooltip=Qa,i.Transformation=pe,i.Util=Le,i.VideoOverlay=ru,i.bind=l,i.bounds=Y,i.canvas=fu,i.circle=Mp,i.circleMarker=Ep,i.control=hi,i.divIcon=zp,i.extend=s,i.featureGroup=Tp,i.geoJSON=au,i.geoJson=Dp,i.gridLayer=Up,i.icon=Ip,i.imageOverlay=Op,i.latLng=Me,i.latLngBounds=Se,i.layerGroup=Sp,i.map=gl,i.marker=Ap,i.point=j,i.polygon=Pp,i.polyline=$p,i.popup=Bp,i.rectangle=Zp,i.setOptions=I,i.stamp=h,i.svg=pu,i.svgOverlay=Np,i.tileLayer=uu,i.tooltip=Fp,i.transformation=R,i.version=a,i.videoOverlay=Rp;var qp=window.L;i.noConflict=function(){return window.L=qp,this},window.L=i}))})(Yo,Yo.exports)),Yo.exports}var Lw=Cw();const an=kw(Lw);(function(e,n,i){function a(s,r){for(;(s=s.parentElement)&&!s.classList.contains(r););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,r){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),r=this._poly,l=r.getLatLngs(),c=l.splice(-1,1)[0];this._poly.setLatLngs(l),this._markerGroup.removeLayer(s),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(c,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent),l=this._map.layerPointToLatLng(r);this._currentLatLng=l,this._updateTooltip(l),this._updateGuide(r),this._mouseMarker.setLatLng(l),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var r=s.originalEvent,l=r.clientX,c=r.clientY;this._startPoint.call(this,l,c)}},_startPoint:function(s,r){this._mouseDownOrigin=L.point(s,r)},_onMouseUp:function(s){var r=s.originalEvent,l=r.clientX,c=r.clientY;this._endPoint.call(this,l,c,s),this._clickHandled=null},_endPoint:function(s,r,l){if(this._mouseDownOrigin){var c=L.point(s,r).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(l.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(l.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(c)<9*(e.devicePixelRatio||1)&&this.addVertex(l.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var r,l,c=s.originalEvent;!c.touches||!c.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=c.touches[0].clientX,l=c.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,l),this._endPoint.call(this,r,l,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var r;if(this._markers.length>0){var l;if(this.type===L.Draw.Polyline.TYPE)l=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;l=this._markers[0]}var c=this._map.latLngToContainerPoint(l.getLatLng()),h=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),p=this._map.latLngToContainerPoint(h.getLatLng());r=c.distanceTo(p)}else r=1/0;return r},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var r=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(s){var r=this._markers?this._markers.length:0;r>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),s))},_updateTooltip:function(s){var r=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(s,r){var l,c,h,p=Math.floor(Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))),f=this.options.guidelineDistance,v=this.options.maxGuideLineLength,T=p>v?p-v:f;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));T<p;T+=this.options.guidelineDistance)l=T/p,c={x:Math.floor(s.x*(1-l)+l*r.x),y:Math.floor(s.y*(1-l)+l*r.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,c)},_updateGuideColor:function(s){if(this._guidesContainer)for(var r=0,l=this._guidesContainer.childNodes.length;r<l;r++)this._guidesContainer.childNodes[r].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,r,l=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=l?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),s},_updateRunningMeasure:function(s,r){var l,c,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(l=h-(r?2:1),c=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[l].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[l].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=c*(r?1:-1))},_getMeasurementString:function(){var s,r=this._currentLatLng,l=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?l&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(l)*(this.options.factor||1):this._measurementRunningTotal||0:l&&r?this._measurementRunningTotal+this._map.distance(r,l)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,r){L.Draw.Polyline.prototype.initialize.call(this,s,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,r;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:s,subtext:r}},_getMeasurementString:function(){var s=this._area,r="";return s||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(r+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,r){var l;!this.options.allowIntersection&&this.options.showArea&&(l=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(l)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,r)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var r=s.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!a(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,r,l,c=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,p=this.options.showArea;return h&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(s),l=p?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:c.text,subtext:l}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var r=s.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,r)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,r)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(s);else var r=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var r,l=s.latlng,c=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(l),this._isDrawing){this._drawShape(l),r=this._shape.getRadius().toFixed(1);var p="";c&&(p=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:p})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,r){this._marker=s,L.setOptions(this,r)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var r=s.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,r){var l=parseInt(s.style.marginTop,10)-r,c=parseInt(s.style.marginLeft,10)-r;s.style.marginTop=l+"px",s.style.marginLeft=c+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var r=0;r<this._verticesHandlers.length;r++)s(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,r,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this._latlngs=r,L.setOptions(this,l)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,r=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),r&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.removeClass(r,l)}),s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.addClass(r,l)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,r=s._path;r&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.removeClass(r,l)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.addClass(r,l)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,r,l,c,h=this._defaultShape();for(s=0,l=h.length;s<l;s++)c=this._createMarker(h[s],s),c.on("click",this._onMarkerClick,this),c.on("contextmenu",this._onContextMenu,this),this._markers.push(c);var p,f;for(s=0,r=l-1;s<l;r=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(p=this._markers[r],f=this._markers[s],this._createMiddleMarker(p,f),this._updatePrevNext(p,f))},_createMarker:function(s,r){var l=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return l._origLatLng=s,l._index=r,l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(l),l},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),r=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),r},_removeMarker:function(s){var r=s._index;this._markerGroup.removeLayer(s),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var r=s.target,l=this._poly,c=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),l.options.poly){var h=l._map._editTooltip;if(!l.options.poly.allowIntersection&&l.intersects()){L.extend(r._origLatLng,c),r.setLatLng(c);var p=l.options.color;l.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){l.setStyle({color:p}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var f=this._poly.getLatLngs();this._poly._convertLatLngs(f,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,l=s.target;this._defaultShape().length<r||(this._removeMarker(l),this._updatePrevNext(l._prev,l._next),l._middleLeft&&this._markerGroup.removeLayer(l._middleLeft),l._middleRight&&this._markerGroup.removeLayer(l._middleRight),l._prev&&l._next?this._createMiddleMarker(l._prev,l._next):l._prev?l._next||(l._prev._middleRight=null):l._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var r=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(r),c=s.target;L.extend(c._origLatLng,l),c._middleLeft&&c._middleLeft.setLatLng(this._getMiddleLatLng(c._prev,c)),c._middleRight&&c._middleRight.setLatLng(this._getMiddleLatLng(c,c._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,r){this._markerGroup.eachLayer(function(l){l._index>s&&(l._index+=r)})},_createMiddleMarker:function(s,r){var l,c,h,p=this._getMiddleLatLng(s,r),f=this._createMarker(p);f.setOpacity(.6),s._middleRight=r._middleLeft=f,c=function(){f.off("touchmove",c,this);var v=r._index;f._index=v,f.off("click",l,this).on("click",this._onMarkerClick,this),p.lat=f.getLatLng().lat,p.lng=f.getLatLng().lng,this._spliceLatLngs(v,0,p),this._markers.splice(v,0,f),f.setOpacity(1),this._updateIndexes(v,1),r._index++,this._updatePrevNext(s,f),this._updatePrevNext(f,r),this._poly.fire("editstart")},h=function(){f.off("dragstart",c,this),f.off("dragend",h,this),f.off("touchmove",c,this),this._createMiddleMarker(s,f),this._createMiddleMarker(f,r)},l=function(){c.call(this),h.call(this),this._fireEdit()},f.on("click",l,this).on("dragstart",c,this).on("dragend",h,this).on("touchmove",c,this),this._markerGroup.addLayer(f)},_updatePrevNext:function(s,r){s&&(s._next=r),r&&(r._prev=s)},_getMiddleLatLng:function(s,r){var l=this._poly._map,c=l.project(s.getLatLng()),h=l.project(r.getLatLng());return l.unproject(c._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,r)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var r=0,l=this._resizeMarkers.length;r<l;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,r){var l=new L.Marker.Touch(s,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(l),this._markerGroup.addLayer(l),l},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var r=s.target,l=r.getLatLng();r===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var r=this._getCorners(),l=s.target,c=l._cornerIndex;l.setOpacity(0),this._oppositeCorner=r[(c+2)%4],this._toggleCornerMarkers(0,c)}this._shape.fire("editstart")},_onTouchMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(r);return s.target===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),r=s.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var r=0,l=s.length;r<l;r++)this._resizeMarkers.push(this._createMarker(s[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var r=this._getCorners(),l=s.target,c=l._cornerIndex;this._oppositeCorner=r[(c+2)%4],this._toggleCornerMarkers(0,c)},_onMarkerDragEnd:function(s){var r,l,c=s.target;c===this._moveMarker&&(r=this._shape.getBounds(),l=r.getCenter(),c.setLatLng(l)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var r,l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),c=this._shape.getBounds(),h=c.getCenter(),p=[],f=0,v=l.length;f<v;f++)r=[l[f].lat-h.lat,l[f].lng-h.lng],p.push([s.lat+r[0],s.lng+r[1]]);this._shape.setLatLngs(p),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var r;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var r=0,l=this._resizeMarkers.length;r<l;r++)this._resizeMarkers[r].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),r=0,l=this._resizeMarkers.length;r<l;r++)this._resizeMarkers[r].setLatLng(s[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),r=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var r=this._shape._radius*Math.cos(Math.PI/4),l=this._map.project(s);return this._map.unproject([l.x+r,l.y-r])},_resize:function(s){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(s):radius=this._map.distance(r,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,r){var l={};if(s.touches!==void 0){if(!s.touches.length)return;l=s.touches[0]}else if(s.pointerType!=="touch"||(l=s,!this._filterClick(s)))return;var c=this._map.mouseEventToContainerPoint(l),h=this._map.mouseEventToLayerPoint(l),p=this._map.layerPointToLatLng(h);this._map.fire(r,{latlng:p,layerPoint:h,containerPoint:c,pageX:l.pageX,pageY:l.pageY,originalEvent:s})},_filterClick:function(s){var r=s.timeStamp||s.originalEvent.timeStamp,l=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return l&&l>100&&l<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(s,r)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,r=s.indexOf("MSIE ");if(r>0)return parseInt(s.substring(r+5,s.indexOf(".",r)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var c=s.indexOf("Edge/");return c>0&&parseInt(s.substring(c+5,s.indexOf(".",c)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var l=0;l<r.length;l++)L.DomEvent.on(s,r[l],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,r=s.indexOf("MSIE ");if(r>0)return parseInt(s.substring(r+5,s.indexOf(".",r)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var c=s.indexOf("Edge/");return c>0&&parseInt(s.substring(c+5,s.indexOf(".",c)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var r=[],l=0,c=s.length;l<c;l++)Array.isArray(s[l])?r.push(L.LatLngUtil.cloneLatLngs(s[l])):r.push(this.cloneLatLng(s[l]));return r},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},(function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var l,c,h=r.length,p=0,f=Math.PI/180;if(h>2){for(var v=0;v<h;v++)l=r[v],c=r[(v+1)%h],p+=(c.lng-l.lng)*f*(2+Math.sin(l.lat*f)+Math.sin(c.lat*f));p=6378137*p*6378137/2}return Math.abs(p)},formattedNumber:function(r,l){var c=parseFloat(r).toFixed(l),h=L.drawLocal.format&&L.drawLocal.format.numeric,p=h&&h.delimiters,f=p&&p.thousands,v=p&&p.decimal;if(f||v){var T=c.split(".");c=f?T[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f):T[0],v=v||".",T.length>1&&(c=c+v+T[1])}return c},readableArea:function(r,l,f){var h,p,f=L.Util.extend({},s,f);return l?(p=["ha","m"],type=typeof l,type==="string"?p=[l]:type!=="boolean"&&(p=l),h=r>=1e6&&p.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,f.km)+" km":r>=1e4&&p.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,f.ha)+" ha":L.GeometryUtil.formattedNumber(r,f.m)+" m"):(r/=.836127,h=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,f.mi)+" mi":r>=4840?L.GeometryUtil.formattedNumber(r/4840,f.ac)+" acres":L.GeometryUtil.formattedNumber(r,f.yd)+" yd"),h},readableDistance:function(r,l,c,h,v){var f,v=L.Util.extend({},s,v);switch(l?typeof l=="string"?l:"metric":c?"feet":h?"nauticalMile":"yards"){case"metric":f=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(r,v.m)+" m";break;case"feet":r*=3.28083,f=L.GeometryUtil.formattedNumber(r,v.ft)+" ft";break;case"nauticalMile":r*=.53996,f=L.GeometryUtil.formattedNumber(r/1e3,v.nm)+" nm";break;default:r*=1.09361,f=r>1760?L.GeometryUtil.formattedNumber(r/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(r,v.yd)+" yd"}return f},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,r,l,c){return this._checkCounterclockwise(s,l,c)!==this._checkCounterclockwise(r,l,c)&&this._checkCounterclockwise(s,r,l)!==this._checkCounterclockwise(s,r,c)},_checkCounterclockwise:function(s,r,l){return(l.y-s.y)*(r.x-s.x)>(r.y-s.y)*(l.x-s.x)}}),L.Polyline.include({intersects:function(){var s,r,l,c=this._getProjectedPoints(),h=c?c.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=h-1;s>=3;s--)if(r=c[s-1],l=c[s],this._lineSegmentsIntersectsRange(r,l,s-2))return!0;return!1},newLatLngIntersects:function(s,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),r)},newPointIntersects:function(s,r){var l=this._getProjectedPoints(),c=l?l.length:0,h=l?l[c-1]:null,p=c-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,s,p,r?1:0)},_tooFewPointsForIntersection:function(s){var r=this._getProjectedPoints(),l=r?r.length:0;return l+=s||0,!r||l<=3},_lineSegmentsIntersectsRange:function(s,r,l,c){var h,p,f=this._getProjectedPoints();c=c||0;for(var v=l;v>c;v--)if(h=f[v-1],p=f[v],L.LineUtil.segmentsIntersect(s,r,h,p))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],r=this._defaultShape(),l=0;l<r.length;l++)s.push(this._map.latLngToLayerPoint(r[l]));return s}}),L.Polygon.include({intersects:function(){var s,r,l,c,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=h.length,r=h[0],l=h[s-1],c=s-2,this._lineSegmentsIntersectsRange(l,r,c,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var r,l=L.DomUtil.create("div","leaflet-draw"),c=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(r=this._toolbars[h].addToolbar(s))&&(c||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),c=!0),l.appendChild(r));return l},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(s)},_toolbarEnabled:function(s){var r=s.target;for(var l in this._toolbars)this._toolbars[l]!==r&&this._toolbars[l].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var r,l=L.DomUtil.create("div","leaflet-draw-section"),c=0,h=this._toolbarClass||"",p=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,r=0;r<p.length;r++)p[r].enabled&&this._initModeHandler(p[r].handler,this._toolbarContainer,c++,h,p[r].title);if(c)return this._lastButtonIndex=--c,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),l.appendChild(this._toolbarContainer),l.appendChild(this._actionsContainer),l},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,l=this._actionButtons.length;r<l;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,r,l,c,h){var p=s.type;this._modes[p]={},this._modes[p].handler=s,this._modes[p].button=this._createButton({type:p,title:h,className:c+"-"+p,container:r,callback:this._modes[p].handler.enable,context:this._modes[p].handler}),this._modes[p].buttonIndex=l,this._modes[p].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var r=L.DomUtil.create("a",s.className||"",s.container),l=L.DomUtil.create("span","sr-only",s.container);r.href="#",r.appendChild(l),s.title&&(r.title=s.title,l.innerHTML=s.title),s.text&&(r.innerHTML=s.text,l.innerHTML=s.text);var c=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,c,s.callback,s.context),r},_disposeButton:function(s,r){var l=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,l,r)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var r,l,c,h,p=this._actionsContainer,f=this.getActions(s),v=f.length;for(l=0,c=this._actionButtons.length;l<c;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback);for(this._actionButtons=[];p.firstChild;)p.removeChild(p.firstChild);for(var T=0;T<v;T++)"enabled"in f[T]&&!f[T].enabled||(r=L.DomUtil.create("li","",p),h=this._createButton({title:f[T].title,text:f[T].text,container:r,callback:f[T].callback,context:f[T].context}),this._actionButtons.push({button:h,callback:f[T].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,r=this._lastButtonIndex,l=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=l+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var r=this._map.latLngToLayerPoint(s),l=this._container;return this._container&&(this._visible&&(l.style.visibility="inherit"),L.DomUtil.setPosition(l,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var r in this.options)this.options.hasOwnProperty(r)&&s[r]&&(s[r]=L.extend({},this.options[r],s[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var r in this._modes)this._modes.hasOwnProperty(r)&&s.hasOwnProperty(r)&&this._modes[r].handler.setOptions(s[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(s){var r=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,r=this.options.featureGroup,l=r.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,r){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(s.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var r=L.Util.stamp(s);this._uneditedLayerProps[r]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var r=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[r].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[r].latlng),s.setRadius(this._uneditedLayerProps[r].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[r].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var r,l,c=s.layer||s.target||s;this._backupLayer(c),this.options.poly&&(l=L.Util.extend({},this.options.poly),c.options.poly=l),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=c.options.color,r.fillColor=c.options.fillColor),c.options.original=L.extend({},c.options),c.options.editing=r),c instanceof L.Marker?(c.editing&&c.editing.enable(),c.dragging.enable(),c.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):c.editing.enable()},_disableLayerEdit:function(s){var r=s.layer||s.target||s;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var r=s.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(s){var r=s.originalEvent.changedTouches[0],l=this._map.mouseEventToLayerPoint(r),c=this._map.layerPointToLatLng(l);s.target.setLatLng(c)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,r){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var r=s.layer||s.target||s;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(s){var r=s.layer||s.target||s;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);const fp=(e,n)=>e?e.length<=n?e:e.substring(0,n)+"...":"",Qd=e=>e.length*6+12,Jl=(e,n)=>!(e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom),xw=(e,n)=>{if(!e||n.length===0)return new Set;const i=[],a=e.getBounds();n.forEach(l=>{if(a.contains(l.getLatLng())){const c=e.latLngToContainerPoint(l.getLatLng()),h=l.locationData;h&&i.push({marker:l,pixelPos:c,location:h})}});const s=i.map(({marker:l,pixelPos:c,location:h})=>{const v=Qd(h.name),T=h.description?Qd(`${h.name}: ${fp(h.description,50)}`):v;return{marker:l,location:h,markerBox:{left:c.x-15,right:c.x+15,top:c.y-15,bottom:c.y+15},baseLabelBox:{left:c.x-v/2,right:c.x+v/2,top:c.y+15+2,bottom:c.y+15+2+20},descLabelBox:h.description?{left:c.x-T/2,right:c.x+T/2,top:c.y+15+2,bottom:c.y+15+2+20}:null}}),r=new Set;return s.forEach(({marker:l,location:c,markerBox:h,baseLabelBox:p,descLabelBox:f},v)=>{if(!c.description)return;let T=!1;for(let k=0;k<s.length;k++){if(v===k)continue;const w=s[k];if(Jl(f,w.markerBox)||Jl(f,w.baseLabelBox)){T=!0;break}if(w.descLabelBox&&r.has(w.location.id)&&Jl(f,w.descLabelBox)){T=!0;break}}T||r.add(c.id)}),r},wc=[{value:"default",label:"Default",colorizable:!1},{value:"circle",label:"Circle",colorizable:!0},{value:"square",label:"Square",colorizable:!0},{value:"triangle",label:"Triangle",colorizable:!0},{value:"diamond",label:"Diamond",colorizable:!0},{value:"star",label:"Star",colorizable:!0},{value:"hexagon",label:"Hexagon",colorizable:!0},{value:"pentagon",label:"Pentagon",colorizable:!0},{value:"water",label:"Water",fixedColor:"#3B82F6"},{value:"food",label:"Food",fixedColor:"#F59E0B"},{value:"medical",label:"Medical",fixedColor:"#EF4444"},{value:"photo",label:"Photo",fixedColor:"#8B5CF6"},{value:"music",label:"Music",fixedColor:"#EC4899"},{value:"start",label:"Start",fixedColor:"#10B981"},{value:"finish",label:"Finish",fixedColor:"#1F2937"}];function pp(e){return wc.find(n=>n.value===e)||wc[0]}function Sw(e){return pp(e).colorizable===!0}function Jc(e,n){const i=pp(e);return i.fixedColor?i.fixedColor:n||"#667eea"}const Mn={circle:(e,n=32)=>{const i=n/2-2;return`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <circle cx="${n/2}" cy="${n/2}" r="${i}" fill="${e}" stroke="#fff" stroke-width="2"/>
    </svg>`},square:(e,n=32)=>`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <rect x="4" y="4" width="${n-8}" height="${n-8}" rx="4" fill="${e}" stroke="#fff" stroke-width="2"/>
    </svg>`,triangle:(e,n=32)=>{const i=n/2,a=4,s=n-4,r=4,l=n-4;return`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <polygon points="${i},${a} ${l},${s} ${r},${s}" fill="${e}" stroke="#fff" stroke-width="2" stroke-linejoin="round"/>
    </svg>`},diamond:(e,n=32)=>{const i=n/2,a=n/2,s=n/2-4;return`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <polygon points="${i},${a-s} ${i+s},${a} ${i},${a+s} ${i-s},${a}" fill="${e}" stroke="#fff" stroke-width="2" stroke-linejoin="round"/>
    </svg>`},star:(e,n=32)=>{const i=n/2,a=n/2,s=n/2-3,r=s*.4,l=[];for(let c=0;c<5;c++){const h=Math.PI/2*-1+c*2*Math.PI/5;l.push(`${i+s*Math.cos(h)},${a+s*Math.sin(h)}`);const p=h+Math.PI/5;l.push(`${i+r*Math.cos(p)},${a+r*Math.sin(p)}`)}return`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <polygon points="${l.join(" ")}" fill="${e}" stroke="#fff" stroke-width="2" stroke-linejoin="round"/>
    </svg>`},hexagon:(e,n=32)=>{const i=n/2,a=n/2,s=n/2-4,r=[];for(let l=0;l<6;l++){const c=Math.PI/6+l*Math.PI/3;r.push(`${i+s*Math.cos(c)},${a+s*Math.sin(c)}`)}return`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <polygon points="${r.join(" ")}" fill="${e}" stroke="#fff" stroke-width="2" stroke-linejoin="round"/>
    </svg>`},pentagon:(e,n=32)=>{const i=n/2,a=n/2,s=n/2-4,r=[];for(let l=0;l<5;l++){const c=Math.PI/2*-1+l*2*Math.PI/5;r.push(`${i+s*Math.cos(c)},${a+s*Math.sin(c)}`)}return`<svg width="${n}" height="${n}" viewBox="0 0 ${n} ${n}" xmlns="http://www.w3.org/2000/svg">
      <polygon points="${r.join(" ")}" fill="${e}" stroke="#fff" stroke-width="2" stroke-linejoin="round"/>
    </svg>`}},ts={water:(e=32)=>`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="#3B82F6" stroke="#fff" stroke-width="2"/>
      <path d="M16 8 C16 8 10 14 10 18 C10 21.3 12.7 24 16 24 C19.3 24 22 21.3 22 18 C22 14 16 8 16 8Z" fill="#fff"/>
    </svg>`,food:(e=32)=>`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="#F59E0B" stroke="#fff" stroke-width="2"/>
      <path d="M11 9v6c0 1.1.9 2 2 2h1v7h2v-7h1c1.1 0 2-.9 2-2V9h-2v5h-1V9h-2v5h-1V9h-2z" fill="#fff"/>
      <path d="M21 9v14h2V9h-2z" fill="#fff"/>
    </svg>`,medical:(e=32)=>`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="#EF4444" stroke="#fff" stroke-width="2"/>
      <rect x="14" y="8" width="4" height="16" rx="1" fill="#fff"/>
      <rect x="8" y="14" width="16" height="4" rx="1" fill="#fff"/>
    </svg>`,photo:(e=32)=>{const n="#8B5CF6";return`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="${n}" stroke="#fff" stroke-width="2"/>
      <rect x="8" y="10" width="16" height="12" rx="2" fill="#fff"/>
      <circle cx="16" cy="16" r="3.5" fill="${n}"/>
      <circle cx="21" y="13" r="1" fill="${n}"/>
    </svg>`},music:(e=32)=>`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="#EC4899" stroke="#fff" stroke-width="2"/>
      <path d="M12 22c1.66 0 3-1.34 3-3v-9h5v4h-3v5c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3c.35 0 .69.07 1 .18V10c0-.55.45-1 1-1h5c.55 0 1 .45 1 1v6h-5v5c0 2.76-2.24 5-5 5s-5-2.24-5-5 2.24-5 5-5c.7 0 1.37.15 2 .41" fill="#fff"/>
      <ellipse cx="12" cy="21" rx="2.5" ry="2" fill="#fff"/>
      <rect x="14" y="10" width="2" height="9" fill="#fff"/>
      <rect x="14" y="10" width="6" height="2" fill="#fff"/>
    </svg>`,start:(e=32)=>`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="#10B981" stroke="#fff" stroke-width="2"/>
      <path d="M11 8v16l2-2V10l7 6-7 6v-4l-2 2v4l12-10-12-10v4z" fill="#fff"/>
    </svg>`,finish:(e=32)=>`<svg width="${e}" height="${e}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <circle cx="16" cy="16" r="14" fill="#1F2937" stroke="#fff" stroke-width="2"/>
      <rect x="10" y="8" width="4" height="4" fill="#fff"/>
      <rect x="14" y="12" width="4" height="4" fill="#fff"/>
      <rect x="18" y="8" width="4" height="4" fill="#fff"/>
      <rect x="10" y="16" width="4" height="4" fill="#fff"/>
      <rect x="18" y="16" width="4" height="4" fill="#fff"/>
      <rect x="14" y="20" width="4" height="4" fill="#fff"/>
    </svg>`},Tw={full:`<svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
    <circle cx="7" cy="7" r="6" fill="#10B981" stroke="#fff" stroke-width="1.5"/>
    <path d="M4 7l2 2 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
  </svg>`,partial:`<svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
    <circle cx="7" cy="7" r="6" fill="#F59E0B" stroke="#fff" stroke-width="1.5"/>
    <rect x="6" y="3.5" width="2" height="4.5" rx="1" fill="#fff"/>
    <circle cx="7" cy="10" r="1" fill="#fff"/>
  </svg>`,missing:`<svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
    <circle cx="7" cy="7" r="6" fill="#EF4444" stroke="#fff" stroke-width="1.5"/>
    <path d="M4.5 4.5l5 5M9.5 4.5l-5 5" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
  </svg>`};function mp(e,n){return e===0?"missing":e>=n?"full":"partial"}function vp(e,n){const i=mp(e,n);return Tw[i]}function Iw(e,n,i=32){if(e==="default")return null;if(ts[e])return ts[e](i);if(Mn[e]){const a=n||"#667eea";return Mn[e](a,i)}return null}const Aw=["circle","square","hexagon","pentagon"];function Ew(e){return Aw.includes(e)}function gp(e,n,i,a,s=32,r=!0){const l=Iw(e,n,s),c=vp(i,a);if(!l)return null;const h=r&&Ew(e),p=Jc(e,n),f=Pw(p),v=_p(p)?"0 1px 2px rgba(255,255,255,0.5)":"0 1px 2px rgba(0,0,0,0.5)",T=s>=36?"12px":"10px",k=h?`
    <div style="
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: ${f};
      font-weight: bold;
      font-size: ${T};
      text-shadow: ${v};
      pointer-events: none;
    ">${i}/${a}</div>
  `:"";return`
    <div style="position: relative; width: ${s}px; height: ${s}px;">
      ${l}
      ${k}
      <div style="position: absolute; bottom: -4px; right: -4px;">
        ${c}
      </div>
    </div>
  `}function Mw(e,n){switch(mp(e,n)){case"full":return"#10B981";case"partial":return"#F59E0B";case"missing":return"#EF4444";default:return"#6B7280"}}function $w(e){const n=e.replace("#",""),i=parseInt(n.substr(0,2),16)/255,a=parseInt(n.substr(2,2),16)/255,s=parseInt(n.substr(4,2),16)/255,r=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),l=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),c=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return .2126*r+.7152*l+.0722*c}function _p(e){return!e||e.length<6?!1:$w(e)>.4}function Pw(e){return _p(e)?"#1F2937":"#FFFFFF"}const Dw={__name:"MapView",props:{locations:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},center:{type:Object,default:null},zoom:{type:Number,default:13},clickable:{type:Boolean,default:!1},areas:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1},userLocation:{type:Object,default:null},highlightLocationId:{type:String,default:null},highlightLocationIds:{type:Array,default:()=>[]},allLocationsForBounds:{type:Array,default:()=>[]},marshalMode:{type:Boolean,default:!1}},emits:["location-click","map-click","area-click","polygon-complete","polygon-drawing"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=O(null);let l=null;const c=O([]),h=O([]),p=O([]);let f=null,v=null;const T=()=>{if(l){const Y=l.getCenter();return{lat:Y.lat,lng:Y.lng}}return null},k=()=>l?l.getZoom():null,w=()=>{if(c.value.length>0){p.value.push([...c.value]);const Y=h.value.pop()||[];c.value=Y,te(),s("polygon-drawing",c.value)}},I=()=>{if(p.value.length>0){h.value.push([...c.value]);const Y=p.value.pop();c.value=Y,te(),s("polygon-drawing",c.value)}},D=()=>c.value.length>0,A=()=>p.value.length>0,b=()=>c.value.length,C=()=>{c.value.length>=3&&(s("polygon-complete",[...c.value]),M())},M=()=>{c.value=[],h.value=[],p.value=[],te()};n({getMapCenter:T,getMapZoom:k,undoPolygonPoint:w,redoPolygonPoint:I,canUndo:D,canRedo:A,getPolygonPointCount:b,completePolygon:C,clearPolygonDrawing:M});const x=O([]);let E=null;const P=O(!0),X=O(!1),Q=O(new Set),le=O([]);let ke=null,me=null;const Le=(Y,ve,Se,Ee)=>{const Me=Mw(Y,ve),F=Se?"36px":Ee?"20px":"30px",J=Se?"#667eea":"white",V=Se?"14px":"12px",W=vp(Y,ve);return`
    <div style="position: relative; width: ${F}; height: ${F};">
      <div style="
        background-color: ${Me};
        width: ${F};
        height: ${F};
        border-radius: 50%;
        border: 3px solid ${J};
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: ${V};
      "></div>
      <div style="position: absolute; bottom: -4px; right: -4px;">
        ${W}
      </div>
    </div>
  `},ye=()=>{if(!l)return;const Y=xw(l,x.value),ve=Array.from(Q.value).sort().join(","),Se=Array.from(Y).sort().join(",");ve!==Se&&(Q.value=Y,ce())},be=()=>{if(me&&(me.remove(),me=null),!l||!a.userLocation)return;const Y=an.divIcon({className:"user-location-marker",html:`
      <div style="
        position: relative;
        width: 20px;
        height: 20px;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          background-color: #4285f4;
          border: 3px solid white;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        "></div>
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 40px;
          height: 40px;
          background-color: rgba(66, 133, 244, 0.2);
          border-radius: 50%;
          animation: pulse 2s ease-out infinite;
        "></div>
      </div>
    `,iconSize:[40,40],iconAnchor:[20,20]});me=an.marker([a.userLocation.lat,a.userLocation.lng],{icon:Y}).addTo(l).bindPopup("Your location")},de=()=>{if(!r.value)return;let Y=51.505,ve=-.09,Se=13;const Ee=a.allLocationsForBounds.length>0?a.allLocationsForBounds:a.locations,Me=[];Ee.length>0&&Me.push(...Ee.map(F=>({lat:F.latitude,lng:F.longitude}))),a.route&&a.route.length>0&&Me.push(...a.route.map(F=>({lat:F.lat,lng:F.lng}))),a.center?(Y=a.center.lat,ve=a.center.lng,Se=a.zoom??13):Me.length>0&&(Y=Me.reduce((F,J)=>F+J.lat,0)/Me.length,ve=Me.reduce((F,J)=>F+J.lng,0)/Me.length,Se=10),l=an.map(r.value).setView([Y,ve],Se),an.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(l),a.clickable&&l.on("click",F=>{a.drawingMode||s("map-click",{lat:F.latlng.lat,lng:F.latlng.lng})}),l.on("zoomend moveend",()=>{ye()}),ce(),K(),Z(),be(),j()},K=()=>{if(E&&(E.remove(),E=null),!l||a.route.length===0)return;const Y=a.route.map(ve=>[ve.lat,ve.lng]);E=an.polyline(Y,{color:"blue",weight:4,opacity:.7}).addTo(l)},Z=()=>{le.value.forEach(Y=>Y.remove()),le.value=[],!(!l||a.areas.length===0)&&a.areas.forEach(Y=>{const ve=typeof Y.polygon=="string"?JSON.parse(Y.polygon):Y.polygon;if(!ve||ve.length===0)return;const Se=ve.map(J=>[J.lat,J.lng]),Ee=Y.id===a.selectedAreaId,Me=Y.color||"#667eea",F=an.polygon(Se,{color:Me,fillColor:Me,fillOpacity:Ee?.4:.2,weight:Ee?3:2,opacity:.8}).addTo(l);F.setStyle({pane:"overlayPane"}),a.drawingMode||(F.on("click",()=>s("area-click",Y)),F.on("mouseover",()=>{F.setStyle({fillOpacity:.4})}),F.on("mouseout",()=>{F.setStyle({fillOpacity:Ee?.4:.2})})),le.value.push(F)})},te=()=>{if(l&&(f&&(f.remove(),f=null),v&&(v.remove(),v=null),c.value.length!==0&&(v=an.layerGroup().addTo(l),c.value.forEach((Y,ve)=>{const Se=ve===0,Ee=ve===c.value.length-1,Me=an.divIcon({className:"polygon-point-marker",html:`<div style="
        width: ${Se?"16px":"12px"};
        height: ${Se?"16px":"12px"};
        background-color: ${Se?"#667eea":Ee?"#ff9800":"white"};
        border: 3px solid #667eea;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      "></div>`,iconSize:[Se?16:12,Se?16:12],iconAnchor:[Se?8:6,Se?8:6]});an.marker([Y.lat,Y.lng],{icon:Me,interactive:!1}).addTo(v)}),c.value.length>=2))){const Y=c.value.map(ve=>[ve.lat,ve.lng]);c.value.length>=3&&Y.push(Y[0]),f=an.polyline(Y,{color:"#667eea",weight:3,opacity:.8,dashArray:c.value.length<3?"10, 10":null}).addTo(l)}},j=()=>{if(!l)return;if(ke||(ke=new an.FeatureGroup,l.addLayer(ke)),l._customDrawingHandlers&&(l.off("click",l._customDrawingHandlers.handleClick),l.getContainer().removeEventListener("touchstart",l._customDrawingHandlers.handleTouchStart),l.getContainer().removeEventListener("touchend",l._customDrawingHandlers.handleTouchEnd),l.getContainer().removeEventListener("touchmove",l._customDrawingHandlers.handleTouchMove),delete l._customDrawingHandlers),!a.drawingMode){M(),ke&&ke.clearLayers();return}let Y=0,ve=null,Se=!1,Ee=!1;const Me=300,F=15,J=z=>{h.value.push([...c.value]),p.value=[],c.value.push({lat:z.lat,lng:z.lng}),te(),s("polygon-drawing",c.value)},V=z=>{z.originalEvent&&z.originalEvent.sourceCapabilities?.firesTouchEvents||J(z.latlng)},W=z=>{if(z.touches.length>1){Ee=!0;return}Ee=!1,Y=Date.now(),ve={x:z.touches[0].clientX,y:z.touches[0].clientY},Se=!1},pe=z=>{if(!ve||Ee)return;const q=z.touches[0].clientX-ve.x,ae=z.touches[0].clientY-ve.y;Math.sqrt(q*q+ae*ae)>F&&(Se=!0)},R=z=>{if(Ee){Ee=!1,ve=null;return}if(Date.now()-Y<Me&&!Se&&ve){const ae=z.changedTouches[0],he=an.point(ae.clientX-l.getContainer().getBoundingClientRect().left,ae.clientY-l.getContainer().getBoundingClientRect().top),fe=l.containerPointToLatLng(he);z.preventDefault(),z.stopPropagation(),J(fe)}ve=null,Se=!1};l.on("click",V),l.getContainer().addEventListener("touchstart",W,{passive:!0}),l.getContainer().addEventListener("touchmove",pe,{passive:!0}),l.getContainer().addEventListener("touchend",R,{passive:!1}),l._customDrawingHandlers={handleClick:V,handleTouchStart:W,handleTouchMove:pe,handleTouchEnd:R},te()},ce=()=>{if(!(l&&l._animatingZoom)&&(x.value.forEach(Y=>Y.remove()),x.value=[],!!l)){if(a.locations.forEach(Y=>{const ve=Y.checkedInCount||0,Se=Y.requiredMarshals||1,Ee=a.highlightLocationId===Y.id||a.highlightLocationIds.includes(Y.id),Me=a.marshalMode&&!Ee,F=Y.resolvedStyleType&&Y.resolvedStyleType!=="default",J=Y.areaColor||"#999",V=Y.areaId&&!a.marshalMode,pe=Q.value.has(Y.id)&&Y.description?`${Y.name}: ${fp(Y.description,50)}`:Y.name,R=Ee?`
      <div style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        border: 3px solid #667eea;
        border-radius: 50%;
        animation: highlight-pulse 1.5s ease-out infinite;
      "></div>
    `:"",z=Me?"0.6":"1",q=Ee?"#667eea":Me?"#e0e0e0":"white",ae=Ee?"white":Me?"#888":"#333";let he;if(Me){const xe="20px";he=`
        <div style="
          background-color: #999;
          width: ${xe};
          height: ${xe};
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        "></div>
      `}else if(F&&!Me){const xe=!a.marshalMode,ge=gp(Y.resolvedStyleType,Y.resolvedStyleColor,ve,Se,Ee?40:32,xe);ge?he=ge:he=Le(ve,Se,Ee,a.marshalMode)}else he=Le(ve,Se,Ee,a.marshalMode);const fe=an.divIcon({className:"custom-marker",html:`
        <div style="display: flex; flex-direction: column; align-items: center; position: relative; opacity: ${z};">
          ${R}
          <div style="position: relative; display: flex; align-items: center; gap: 4px;">
            ${V?`<div style="
              width: 8px;
              height: 8px;
              border-radius: 50%;
              background-color: ${J};
              border: 2px solid white;
              box-shadow: 0 1px 2px rgba(0,0,0,0.3);
            "></div>`:""}
            ${he}
          </div>
          <div style="
            background-color: ${q};
            padding: 2px 6px;
            border-radius: 3px;
            font-size: ${Ee?"12px":"11px"};
            font-weight: bold;
            color: ${ae};
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            margin-top: 2px;
          ">
            ${pe}
          </div>
        </div>
      `,iconSize:[30,50],iconAnchor:[15,25]}),Ie=a.marshalMode?`<b>${Y.name}</b>${Y.description?`<br>${Y.description}`:""}`:`<b>${Y.name}</b><br>${Y.description||""}<br>Checked in: ${ve}/${Se}`,Ae=an.marker([Y.latitude,Y.longitude],{icon:fe}).addTo(l).bindPopup(Ie);Ae.on("click",()=>{s("location-click",Y)}),Ae.locationData=Y,x.value.push(Ae)}),l&&P.value&&!a.center&&!X.value){const Y=[],ve=a.allLocationsForBounds.length>0?a.allLocationsForBounds:a.locations;if(ve.length>0&&Y.push(...ve.map(Se=>[Se.latitude,Se.longitude])),a.route.length>0&&Y.push(...a.route.map(Se=>[Se.lat,Se.lng])),Y.length>0){const Se=an.latLngBounds(Y);l.fitBounds(Se,{padding:[50,50]}),P.value=!1,X.value=!0}}else a.center&&(P.value=!1);setTimeout(()=>{l&&!l._animatingZoom&&ye()},100)}};return Ln(()=>{X.value=!1,P.value=!0,de();let Y,ve=0,Se=0;const Ee=new ResizeObserver(Me=>{if(l&&Me.length>0){const{width:F,height:J}=Me[0].contentRect;(Math.abs(F-ve)>10||Math.abs(J-Se)>10)&&(ve=F,Se=J,clearTimeout(Y),Y=setTimeout(()=>{l.invalidateSize()},150))}});r.value&&Ee.observe(r.value),Ds(()=>{clearTimeout(Y),Ee.disconnect()})}),qe(()=>a.locations,Y=>{if(ce(),l&&!X.value&&Y.length>0&&!a.center){const ve=Y.map(F=>F.latitude),Se=Y.map(F=>F.longitude),Ee=ve.reduce((F,J)=>F+J,0)/ve.length,Me=Se.reduce((F,J)=>F+J,0)/Se.length;l.setView([Ee,Me],10),X.value=!0,P.value=!1}},{deep:!0}),qe(()=>a.route,Y=>{if(K(),ce(),l&&!X.value&&Y&&Y.length>0&&!a.center){const ve=Y.map(F=>F.lat),Se=Y.map(F=>F.lng),Ee=ve.reduce((F,J)=>F+J,0)/ve.length,Me=Se.reduce((F,J)=>F+J,0)/Se.length;l.setView([Ee,Me],10),X.value=!0,P.value=!1}},{deep:!0}),qe(()=>a.center,Y=>{l&&l.setView([Y.lat,Y.lng],a.zoom)}),qe(()=>a.areas,()=>{Z()},{deep:!0}),qe(()=>a.selectedAreaId,()=>{Z()}),qe(()=>a.drawingMode,()=>{j()}),qe(()=>a.userLocation,()=>{be()},{deep:!0}),qe(()=>a.highlightLocationId,()=>{ce()}),qe(()=>a.highlightLocationIds,()=>{ce()},{deep:!0}),qe(()=>a.marshalMode,()=>{ce()}),(Y,ve)=>(g(),_("div",{ref_key:"mapContainer",ref:r,class:"map-container"},null,512))}},_a=Ze(Dw,[["__scopeId","data-v-86fbe0bc"]]);function fn(e,n){return e.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}const Ow={class:"areas-selection"},Rw={key:0,class:"areas-selection-header"},Nw={class:"areas-list"},Bw=["checked","onChange"],Fw={__name:"AreasSelection",props:{areas:{type:Array,default:()=>[]},selectedAreaIds:{type:Array,default:()=>[]}},emits:["update:selectedAreaIds"],setup(e,{emit:n}){const i=e,a=n,s=se(()=>[...i.areas].sort((h,p)=>h.displayOrder!==p.displayOrder?h.displayOrder-p.displayOrder:fn(h.name,p.name))),r=se(()=>i.areas.length>0&&i.selectedAreaIds.length===i.areas.length),l=h=>{const p=[...i.selectedAreaIds],f=p.indexOf(h);f>=0?p.splice(f,1):p.push(h),a("update:selectedAreaIds",p)},c=()=>{r.value?a("update:selectedAreaIds",[]):a("update:selectedAreaIds",i.areas.map(h=>h.id))};return(h,p)=>(g(),_("div",Ow,[e.areas.length>1?(g(),_("div",Rw,[u("button",{onClick:c,class:"toggle-all-btn"},S(r.value?"Deselect all":"Select all"),1)])):B("",!0),u("div",Nw,[(g(!0),_(Ce,null,De(s.value,f=>(g(),_("label",{class:"area-checkbox",key:f.id},[u("input",{type:"checkbox",checked:e.selectedAreaIds.includes(f.id),onChange:v=>l(f.id)},null,40,Bw),u("span",{class:"area-color-dot",style:nn({backgroundColor:f.color||"#667eea"})},null,4),Ve(" "+S(f.name),1)]))),128))])]))}},yp=Ze(Fw,[["__scopeId","data-v-46364246"]]),zw={class:"course-areas-tab"},Uw={class:"map-wrapper"},Hw={key:0,class:"drawing-controls"},Vw={class:"point-count"},Zw={class:"undo-redo-buttons"},jw=["disabled"],qw=["disabled"],Ww={key:0},Gw={key:1},Kw={key:0,class:"filters-content"},Jw={class:"filter-section"},Yw={class:"filter-checkbox"},Xw={class:"filter-checkbox"},Qw={class:"filter-checkbox"},e1={key:0,class:"filter-section"},t1={key:0},n1={key:1},s1={key:0,class:"add-menu-content"},i1={__name:"CourseAreasTab",props:{checkpoints:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1}},emits:["map-click","location-click","area-click","import-checkpoints","upload-route","select-location","add-area","select-area","polygon-complete","cancel-drawing","add-checkpoint-from-map","add-many-checkpoints-from-map","add-area-from-map"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=O(null),l=O(null),c=O(!0),h=O(!1),p=O(null),f=O(0),v=O(!1),T=O(!1),k=O({showRoute:!0,showCheckpoints:!0,showAreas:!0,selectedAreas:[]}),w=()=>{c.value=!c.value,c.value||(h.value=!1)},I=()=>{h.value=!h.value,h.value&&(c.value=!0)},D=Le=>{h.value=!1,Le==="checkpoint"?(s("add-checkpoint-from-map"),P()):Le==="many-checkpoints"?(s("add-many-checkpoints-from-map"),P()):Le==="area"&&(s("add-area-from-map"),P())},A=()=>{h.value=!1,s("import-checkpoints")},b=()=>{h.value=!1,s("upload-route")},C=Le=>{f.value=Le?.length||0,M()},M=()=>{l.value&&(v.value=l.value.canUndo(),T.value=l.value.canRedo())},x=()=>{l.value&&(l.value.undoPolygonPoint(),M())},E=()=>{l.value&&(l.value.redoPolygonPoint(),M())},P=()=>{r.value&&r.value.scrollIntoView({behavior:"smooth",block:"start"})};n({scrollMapIntoView:P,getMapCenter:()=>l.value?.getMapCenter()||null,getMapZoom:()=>l.value?.getMapZoom()||null}),qe(()=>a.areas,Le=>{if(Le.length>0){const ye=new Set(k.value.selectedAreas);Le.forEach(be=>{ye.has(be.id)||k.value.selectedAreas.push(be.id)}),k.value.selectedAreas=k.value.selectedAreas.filter(be=>Le.some(de=>de.id===be))}},{immediate:!0}),qe(()=>a.drawingMode,Le=>{Le||(f.value=0,v.value=!1,T.value=!1)}),se(()=>[...a.areas].sort((Le,ye)=>Le.displayOrder!==ye.displayOrder?Le.displayOrder-ye.displayOrder:fn(Le.name,ye.name)));const le=se(()=>k.value.showRoute?a.route:[]),ke=se(()=>k.value.showCheckpoints?a.checkpoints.filter(Le=>{const ye=Le.areaIds||Le.AreaIds;return ye&&Array.isArray(ye)?ye.some(be=>k.value.selectedAreas.includes(be)):Le.areaId?k.value.selectedAreas.includes(Le.areaId):!1}):[]),me=se(()=>k.value.showAreas?a.areas.filter(Le=>k.value.selectedAreas.includes(Le.id)):[]);return(Le,ye)=>(g(),_("div",zw,[u("div",{class:"map-section",ref_key:"mapSection",ref:r},[u("div",Uw,[Oe(_a,{ref_key:"mapView",ref:l,locations:ke.value,route:le.value,areas:me.value,allLocationsForBounds:e.checkpoints,selectedAreaId:e.selectedAreaId,clickable:!0,drawingMode:e.drawingMode,onMapClick:ye[0]||(ye[0]=be=>Le.$emit("map-click",be)),onLocationClick:ye[1]||(ye[1]=be=>Le.$emit("location-click",be)),onAreaClick:ye[2]||(ye[2]=be=>Le.$emit("area-click",be)),onPolygonComplete:ye[3]||(ye[3]=be=>Le.$emit("polygon-complete",be)),onPolygonDrawing:C},null,8,["locations","route","areas","allLocationsForBounds","selectedAreaId","drawingMode"]),e.drawingMode&&f.value>0?(g(),_("div",Hw,[u("div",Vw,S(f.value)+" point"+S(f.value!==1?"s":""),1),u("div",Zw,[u("button",{onClick:x,class:"btn-drawing undo-btn",disabled:!v.value,title:"Undo last point"},"  Undo ",8,jw),u("button",{onClick:E,class:"btn-drawing redo-btn",disabled:!T.value,title:"Redo point"}," Redo  ",8,qw)])])):B("",!0)]),h.value?B("",!0):(g(),_("div",{key:0,class:Fe(["visibility-filters",{collapsed:c.value}])},[u("button",{onClick:w,class:"filters-toggle"},[c.value?(g(),_("span",Ww,"Show...")):(g(),_("span",Gw,""))]),c.value?B("",!0):(g(),_("div",Kw,[u("div",Jw,[ye[14]||(ye[14]=u("h4",null,"Show on map:",-1)),u("label",Yw,[Ne(u("input",{type:"checkbox","onUpdate:modelValue":ye[4]||(ye[4]=be=>k.value.showRoute=be)},null,512),[[to,k.value.showRoute]]),ye[11]||(ye[11]=Ve(" Route ",-1))]),u("label",Xw,[Ne(u("input",{type:"checkbox","onUpdate:modelValue":ye[5]||(ye[5]=be=>k.value.showCheckpoints=be)},null,512),[[to,k.value.showCheckpoints]]),ye[12]||(ye[12]=Ve(" Checkpoints ",-1))]),u("label",Qw,[Ne(u("input",{type:"checkbox","onUpdate:modelValue":ye[6]||(ye[6]=be=>k.value.showAreas=be)},null,512),[[to,k.value.showAreas]]),ye[13]||(ye[13]=Ve(" Areas ",-1))])]),e.areas.length>0&&k.value.showAreas?(g(),_("div",e1,[ye[15]||(ye[15]=u("h4",null,"Filter areas:",-1)),Oe(yp,{areas:e.areas,"selected-area-ids":k.value.selectedAreas,"onUpdate:selectedAreaIds":ye[7]||(ye[7]=be=>k.value.selectedAreas=be)},null,8,["areas","selected-area-ids"])])):B("",!0)]))],2)),c.value?(g(),_("div",{key:1,class:Fe(["add-menu",{expanded:h.value}])},[u("button",{onClick:I,class:"add-toggle",ref_key:"addButtonRef",ref:p},[h.value?(g(),_("span",t1,"")):(g(),_("span",n1,"Add..."))],512),h.value?(g(),_("div",s1,[u("button",{onClick:ye[8]||(ye[8]=be=>D("checkpoint")),class:"add-menu-item"}," Checkpoint "),u("button",{onClick:ye[9]||(ye[9]=be=>D("many-checkpoints")),class:"add-menu-item"}," Many checkpoints "),u("button",{onClick:ye[10]||(ye[10]=be=>D("area")),class:"add-menu-item"}," Area "),u("button",{onClick:A,class:"add-menu-item"}," Import checkpoints... "),u("button",{onClick:b,class:"add-menu-item"}," Upload route... ")])):B("",!0)],2)):B("",!0)],512)]))}},o1=Ze(i1,[["__scopeId","data-v-1bc3e7ee"]]),a1=(e,n)=>{const i=String(e).trim(),a=String(n).trim(),s=parseFloat(i),r=parseFloat(a),l=!isNaN(s)&&String(s)===i,c=!isNaN(r)&&String(r)===a;return l&&c?s-r:i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"})},r1=e=>e&&e.isCheckedIn?"":"",l1={class:"marshals-tab"},c1={class:"marshals-tab-header"},u1={class:"button-group"},d1={class:"marshals-grid"},h1={class:"marshals-table"},f1={key:0,class:"sort-indicator"},p1={key:0,class:"sort-indicator"},m1={key:0,class:"sort-indicator"},v1={key:0,class:"sort-indicator"},g1=["onClick"],_1=["rowspan"],y1=["value","onChange"],b1=["rowspan"],k1={key:0,class:"last-active-text"},w1={key:1,class:"last-active-never"},C1=["onClick"],L1={style:{color:"#999","font-style":"italic"}},x1={class:"hide-on-mobile last-active-cell"},S1={key:0,class:"last-active-text"},T1={key:1,class:"last-active-never"},I1={__name:"MarshalsTab",props:{marshals:{type:Array,required:!0},assignments:{type:Array,required:!0},locations:{type:Array,required:!0}},emits:["add-marshal","import-marshals","select-marshal","delete-marshal","change-assignment-status"],setup(e,{emit:n}){const{terms:i}=ht(),a=e,s=O("name"),r=O("asc"),l=k=>{s.value===k?r.value=r.value==="asc"?"desc":"asc":(s.value=k,r.value="asc")},c=k=>a.assignments.filter(w=>w.marshalId===k),h=k=>{const w=a.locations.find(I=>I.id===k);return w?w.name:"Unknown"},p=k=>{if(!k)return"";const w=new Date(k),D=new Date-w,A=Math.floor(D/6e4),b=Math.floor(A/60),C=Math.floor(b/24);return A<1?"just now":A<60?`${A}m ago`:b<24?`${b}h ago`:C===1?"yesterday":C<7?`${C}d ago`:w.toLocaleDateString()},f=se(()=>{const k=[...a.marshals];return k.sort((w,I)=>{let D=0;if(s.value==="name")D=w.name.localeCompare(I.name);else if(s.value==="checkpoint"){const A=c(w.id),b=c(I.id),C=A.length>0?h(A[0].locationId):"",M=b.length>0?h(b[0].locationId):"";D=a1(C,M)}else if(s.value==="status"){const A=c(w.id),b=c(I.id),C=A.length>0&&A[0].isCheckedIn?1:0;D=(b.length>0&&b[0].isCheckedIn?1:0)-C}else if(s.value==="lastActive"){const A=w.lastAccessedDate?new Date(w.lastAccessedDate).getTime():0;D=(I.lastAccessedDate?new Date(I.lastAccessedDate).getTime():0)-A}return r.value==="asc"?D:-D}),k}),v=k=>k.isAdminCheckedIn?"admin-checked-in":k.isWrongLocation?"wrong-location":k.isCheckedIn?"checked-in":"not-checked-in",T=k=>k.isCheckedIn?"status-checked-in":"status-not-checked-in";return(k,w)=>(g(),_("div",l1,[u("div",c1,[u("h2",null,S(U(i).people)+" management",1),u("div",u1,[u("button",{onClick:w[0]||(w[0]=I=>k.$emit("add-marshal")),class:"btn btn-primary"}," Add "+S(U(i).person.toLowerCase()),1),u("button",{onClick:w[1]||(w[1]=I=>k.$emit("import-marshals")),class:"btn btn-secondary"}," Import CSV ")])]),u("div",d1,[u("table",h1,[u("thead",null,[u("tr",null,[u("th",{onClick:w[2]||(w[2]=I=>l("name")),class:"sortable"},[w[7]||(w[7]=Ve(" Name ",-1)),s.value==="name"?(g(),_("span",f1,S(r.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:w[3]||(w[3]=I=>l("checkpoint")),class:"sortable"},[Ve(S(U(i).checkpoint)+" ",1),s.value==="checkpoint"?(g(),_("span",p1,S(r.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:w[4]||(w[4]=I=>l("status")),class:"sortable"},[w[8]||(w[8]=Ve(" Status ",-1)),s.value==="status"?(g(),_("span",m1,S(r.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:w[5]||(w[5]=I=>l("lastActive")),class:"sortable hide-on-mobile"},[w[9]||(w[9]=Ve(" Last active ",-1)),s.value==="lastActive"?(g(),_("span",v1,S(r.value==="asc"?"":""),1)):B("",!0)])])]),u("tbody",null,[(g(!0),_(Ce,null,De(f.value,I=>(g(),_(Ce,{key:I.id},[c(I.id).length>0?(g(!0),_(Ce,{key:0},De(c(I.id),(D,A)=>(g(),_("tr",{key:`${I.id}-${D.id}`,class:"marshal-row",onClick:b=>k.$emit("select-marshal",I)},[A===0?(g(),_("td",{key:0,rowspan:c(I.id).length},S(I.name),9,_1)):B("",!0),u("td",null,S(h(D.locationId)),1),u("td",{onClick:w[6]||(w[6]=It(()=>{},["stop"]))},[u("select",{value:v(D),onChange:b=>k.$emit("change-assignment-status",{assignment:D,status:b.target.value}),class:Fe(["status-select hide-on-mobile",T(D)])},[...w[10]||(w[10]=[u("option",{value:"not-checked-in"},"Not checked-in",-1),u("option",{value:"checked-in"},"Checked-in",-1),u("option",{value:"admin-checked-in"},"Admin checked-in",-1),u("option",{value:"wrong-location"},"Checked-in but not at correct location",-1)])],42,y1),u("span",{class:Fe(["status-icon show-on-mobile",T(D)])},S(U(r1)(D)),3)]),A===0?(g(),_("td",{key:1,rowspan:c(I.id).length,class:"hide-on-mobile last-active-cell"},[I.lastAccessedDate?(g(),_("span",k1,S(p(I.lastAccessedDate)),1)):(g(),_("span",w1,"Never"))],8,b1)):B("",!0)],8,g1))),128)):(g(),_("tr",{key:1,class:"marshal-row",onClick:D=>k.$emit("select-marshal",I)},[u("td",null,S(I.name),1),u("td",L1,"No "+S(U(i).checkpoint.toLowerCase())+" assigned",1),w[11]||(w[11]=u("td",null,[u("span",{class:"hide-on-mobile"},"-"),u("span",{class:"status-icon show-on-mobile",style:{color:"#999"}},"-")],-1)),u("td",x1,[I.lastAccessedDate?(g(),_("span",S1,S(p(I.lastAccessedDate)),1)):(g(),_("span",T1,"Never"))])],8,C1))],64))),128))])])])]))}},A1=Ze(I1,[["__scopeId","data-v-2155fb8d"]]),E1={class:"checklists-tab"},M1={class:"checklists-tab-header"},$1={class:"button-group"},P1={class:"filters-section"},D1={class:"filter-group"},O1={class:"filter-checkbox"},R1=["checked"],N1={key:0,class:"checkbox-dropdown"},B1={class:"checkbox-dropdown-header"},F1={class:"checkbox-list"},z1=["checked","onChange"],U1={class:"filter-group"},H1={class:"filter-checkbox"},V1=["checked"],Z1={key:0,class:"checkbox-dropdown"},j1={class:"checkbox-dropdown-header"},q1={class:"checkbox-list"},W1=["checked","onChange"],G1={class:"filter-group"},K1={class:"filter-checkbox"},J1=["checked"],Y1={key:0,class:"checkbox-dropdown"},X1={class:"checkbox-dropdown-header"},Q1={class:"checkbox-list"},e0=["checked","onChange"],t0={class:"checklist-items-list"},n0={key:0,class:"empty-state"},s0={class:"checklist-item-content"},i0=["onClick"],o0={class:"checklist-item-scopes"},a0=["onClick"],r0={__name:"ChecklistsTab",props:{checklistItems:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},completionReport:{type:Object,default:null}},emits:["add-checklist-item","select-checklist-item"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=O(!0),l=O(!0),c=O(!0),h=O([]),p=O([]),f=O([]),v=se(()=>[...s.areas].sort((te,j)=>te.displayOrder!==j.displayOrder?te.displayOrder-j.displayOrder:fn(te.name,j.name))),T=se(()=>[...s.locations].sort((te,j)=>fn(te.name,j.name))),k=se(()=>[...s.marshals].sort((te,j)=>fn(te.name,j.name))),w=se(()=>s.areas.length>0&&h.value.length===s.areas.length),I=se(()=>s.locations.length>0&&p.value.length===s.locations.length),D=se(()=>s.marshals.length>0&&f.value.length===s.marshals.length),A=se(()=>!r.value||!l.value||!c.value),b=()=>{r.value=!r.value,!r.value&&h.value.length===0&&(h.value=s.areas.map(te=>te.id))},C=()=>{l.value=!l.value,!l.value&&p.value.length===0&&(p.value=s.locations.map(te=>te.id))},M=()=>{c.value=!c.value,!c.value&&f.value.length===0&&(f.value=s.marshals.map(te=>te.id))},x=te=>{const j=h.value.indexOf(te);j>=0?h.value.splice(j,1):h.value.push(te)},E=te=>{const j=p.value.indexOf(te);j>=0?p.value.splice(j,1):p.value.push(te)},P=te=>{const j=f.value.indexOf(te);j>=0?f.value.splice(j,1):f.value.push(te)},X=()=>{w.value?h.value=[]:h.value=s.areas.map(te=>te.id)},Q=()=>{I.value?p.value=[]:p.value=s.locations.map(te=>te.id)},le=()=>{D.value?f.value=[]:f.value=s.marshals.map(te=>te.id)},ke=()=>{r.value=!0,l.value=!0,c.value=!0,h.value=[],p.value=[],f.value=[]},me=te=>{const j=s.marshals.find(ce=>ce.id===te);return!j||!j.assignments?[]:j.assignments.map(ce=>ce.locationId)},Le=te=>{const j=new Set;return te.forEach(ce=>{const Y=s.locations.find(ve=>ve.id===ce);Y&&Y.areaIds&&Y.areaIds.forEach(ve=>j.add(ve))}),Array.from(j)},ye=(te,j)=>{if(!j)return!1;const ce=me(te),Y=Le(ce);return j.scope==="SpecificPeople"&&j.itemType==="Marshal"?j.ids.includes(te)||j.ids.includes("ALL_MARSHALS"):j.scope==="EveryoneAtCheckpoints"&&j.itemType==="Checkpoint"?j.ids.includes("ALL_CHECKPOINTS")||ce.some(ve=>j.ids.includes(ve)):j.scope==="OnePerCheckpoint"&&j.itemType==="Checkpoint"?j.ids.includes("ALL_CHECKPOINTS")||ce.some(ve=>j.ids.includes(ve)):j.scope==="OnePerCheckpoint"&&j.itemType==="Area"?j.ids.includes("ALL_AREAS")||Y.some(ve=>j.ids.includes(ve)):j.scope==="EveryoneInAreas"&&j.itemType==="Area"?j.ids.includes("ALL_AREAS")||Y.some(ve=>j.ids.includes(ve)):j.scope==="OnePerArea"&&j.itemType==="Area"?j.ids.includes("ALL_AREAS")||Y.some(ve=>j.ids.includes(ve)):(j.scope==="EveryAreaLead"||j.scope==="OneLeadPerArea")&&j.itemType==="Area"?j.ids.includes("ALL_AREAS")||Y.some(ve=>j.ids.includes(ve)):!1},be=se(()=>{let te=s.checklistItems;return!r.value&&h.value.length>0&&(te=te.filter(j=>j.scopeConfigurations?j.scopeConfigurations.some(ce=>ce.itemType==="Area"&&h.value.some(Y=>ce.ids.includes(Y))):!1)),!l.value&&p.value.length>0&&(te=te.filter(j=>j.scopeConfigurations?j.scopeConfigurations.some(ce=>ce.itemType==="Checkpoint"&&p.value.some(Y=>ce.ids.includes(Y))):!1)),!c.value&&f.value.length>0&&(te=te.filter(j=>j.scopeConfigurations?f.value.some(ce=>j.scopeConfigurations.some(Y=>ye(ce,Y))):!1)),te}),de=se(()=>[...be.value].sort((te,j)=>te.displayOrder!==j.displayOrder?te.displayOrder-j.displayOrder:fn(te.text,j.text))),K=te=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${a.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${a.value.checkpoints}`,SpecificPeople:`Specific ${a.value.people}`,OnePerArea:`One per ${a.value.area}`,OnePerCheckpoint:`One per ${a.value.checkpoint}`,EveryAreaLead:`Every ${a.value.area} lead`,OneLeadPerArea:`One lead per ${a.value.area}`,AreaLead:`${i.value.area} lead`})[te]||te,Z=te=>{if(!te)return"";const j=K(te.scope);if(te.itemType===null)return j;const ce=te.ids||[];if(ce.includes("ALL_MARSHALS"))return`${j} (Everyone)`;if(ce.includes("ALL_AREAS"))return`${j} (All ${a.value.areas})`;if(ce.includes("ALL_CHECKPOINTS"))return`${j} (All ${a.value.checkpoints})`;const Y=ce.length;return Y===0?j:`${j} (${Y})`};return(te,j)=>(g(),_("div",E1,[u("div",M1,[u("h2",null,S(U(i).checklists),1),u("div",$1,[u("button",{onClick:j[0]||(j[0]=ce=>te.$emit("add-checklist-item")),class:"btn btn-primary"}," Add "+S(U(a).checklist),1)])]),u("div",P1,[u("div",D1,[u("h4",null,"Filter by "+S(U(a).area)+":",1),u("label",O1,[u("input",{type:"checkbox",checked:r.value,onChange:b},null,40,R1),Ve(" All "+S(U(a).areas),1)]),r.value?B("",!0):(g(),_("div",N1,[u("div",B1,[u("button",{onClick:X,class:"toggle-all-btn"},S(w.value?"Deselect all":"Select all"),1)]),u("div",F1,[(g(!0),_(Ce,null,De(v.value,ce=>(g(),_("label",{key:ce.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:h.value.includes(ce.id),onChange:Y=>x(ce.id)},null,40,z1),u("span",{class:"area-color-dot",style:nn({backgroundColor:ce.color||"#667eea"})},null,4),Ve(" "+S(ce.name),1)]))),128))])]))]),u("div",U1,[u("h4",null,"Filter by "+S(U(a).checkpoint)+":",1),u("label",H1,[u("input",{type:"checkbox",checked:l.value,onChange:C},null,40,V1),Ve(" All "+S(U(a).checkpoints),1)]),l.value?B("",!0):(g(),_("div",Z1,[u("div",j1,[u("button",{onClick:Q,class:"toggle-all-btn"},S(I.value?"Deselect all":"Select all"),1)]),u("div",q1,[(g(!0),_(Ce,null,De(T.value,ce=>(g(),_("label",{key:ce.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:p.value.includes(ce.id),onChange:Y=>E(ce.id)},null,40,W1),Ve(" "+S(ce.name),1)]))),128))])]))]),u("div",G1,[u("h4",null,"Filter by "+S(U(a).person)+":",1),u("label",K1,[u("input",{type:"checkbox",checked:c.value,onChange:M},null,40,J1),Ve(" All "+S(U(a).people),1)]),c.value?B("",!0):(g(),_("div",Y1,[u("div",X1,[u("button",{onClick:le,class:"toggle-all-btn"},S(D.value?"Deselect all":"Select all"),1)]),u("div",Q1,[(g(!0),_(Ce,null,De(k.value,ce=>(g(),_("label",{key:ce.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:f.value.includes(ce.id),onChange:Y=>P(ce.id)},null,40,e0),Ve(" "+S(ce.name),1)]))),128))])]))]),A.value?(g(),_("button",{key:0,onClick:ke,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",t0,[be.value.length===0?(g(),_("div",n0,[u("p",null,S(A.value?"No checklist items match the selected filters.":"No checklist items yet. Create one to get started!"),1)])):B("",!0),(g(!0),_(Ce,null,De(de.value,ce=>(g(),_("div",{key:ce.itemId,class:"checklist-item-card"},[u("div",s0,[u("div",{class:"checklist-item-title",onClick:Y=>te.$emit("select-checklist-item",ce,"details")},[u("strong",null,S(ce.text),1)],8,i0),u("div",o0,[(g(!0),_(Ce,null,De(ce.scopeConfigurations,(Y,ve)=>(g(),_("span",{key:ve,class:"scope-badge",onClick:Se=>te.$emit("select-checklist-item",ce,"visibility")},S(Z(Y)),9,a0))),128))])])]))),128))])]))}},l0=Ze(r0,[["__scopeId","data-v-5b51ce47"]]),c0={class:"notes-tab"},u0={class:"notes-tab-header"},d0={class:"button-group"},h0={class:"filters-section"},f0={class:"filter-group"},p0={class:"priority-filters"},m0=["checked","onChange"],v0={class:"filter-group"},g0={class:"filter-checkbox"},_0=["checked"],y0={key:0,class:"checkbox-dropdown"},b0={class:"checkbox-list"},k0=["checked","onChange"],w0={class:"notes-list"},C0={key:0,class:"empty-state"},L0=["onClick"],x0={class:"note-header"},S0={class:"note-title-row"},T0={key:0,class:"pin-icon",title:"Pinned"},I0={class:"note-meta"},A0={key:0,class:"category-badge"},E0={class:"created-info"},M0={key:0,class:"note-preview"},$0={class:"note-scopes"},P0={__name:"NotesTab",props:{notes:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]}},emits:["add-note","select-note"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=[{value:"Urgent",label:"Urgent"},{value:"High",label:"High"},{value:"Normal",label:"Normal"},{value:"Low",label:"Low"}],r=O(!0),l=O([]),c=O(["Urgent","High","Normal","Low"]),h=se(()=>[...a.areas].sort((M,x)=>M.displayOrder!==x.displayOrder?M.displayOrder-x.displayOrder:fn(M.name,x.name))),p=se(()=>!r.value||c.value.length<4),f=()=>{r.value=!r.value,!r.value&&l.value.length===0&&(l.value=a.areas.map(M=>M.id))},v=M=>{const x=l.value.indexOf(M);x>=0?l.value.splice(x,1):l.value.push(M)},T=M=>{const x=c.value.indexOf(M);x>=0?c.value.splice(x,1):c.value.push(M)},k=()=>{r.value=!0,l.value=[],c.value=["Urgent","High","Normal","Low"]},w=se(()=>{let M=a.notes;return c.value.length<4&&(M=M.filter(x=>c.value.includes(x.priority||"Normal"))),!r.value&&l.value.length>0&&(M=M.filter(x=>x.scopeConfigurations?x.scopeConfigurations.some(E=>E.itemType==="Area"&&l.value.some(P=>E.ids.includes(P))):!1)),M}),I=se(()=>{const M={Urgent:0,High:1,Normal:2,Low:3};return[...w.value].sort((x,E)=>{if(x.isPinned!==E.isPinned)return x.isPinned?-1:1;const P=M[x.priority]??2,X=M[E.priority]??2;return P!==X?P-X:x.displayOrder!==E.displayOrder?x.displayOrder-E.displayOrder:fn(x.title,E.title)})}),D=M=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,OnePerArea:`One per ${i.value.area}`,OneLeadPerArea:`One lead per ${i.value.area}`})[M]||M,A=M=>{if(!M)return"";const x=D(M.scope);if(M.itemType===null)return x;const E=M.ids||[];if(E.includes("ALL_MARSHALS"))return`${x} (Everyone)`;if(E.includes("ALL_AREAS"))return`${x} (All ${i.value.areas})`;if(E.includes("ALL_CHECKPOINTS"))return`${x} (All ${i.value.checkpoints})`;const P=E.length;return P===0?x:`${x} (${P})`},b=M=>{if(!M)return"";const x=150;return M.length<=x?M:M.substring(0,x)+"..."},C=M=>{if(!M)return"";const x=new Date(M),P=new Date-x,X=Math.floor(P/6e4),Q=Math.floor(P/36e5),le=Math.floor(P/864e5);return X<1?"Just now":X<60?`${X}m ago`:Q<24?`${Q}h ago`:le<7?`${le}d ago`:x.toLocaleDateString()};return(M,x)=>(g(),_("div",c0,[u("div",u0,[x[1]||(x[1]=u("h2",null,"Notes",-1)),u("div",d0,[u("button",{onClick:x[0]||(x[0]=E=>M.$emit("add-note")),class:"btn btn-primary"}," Add note ")])]),u("div",h0,[u("div",f0,[x[2]||(x[2]=u("h4",null,"Filter by priority:",-1)),u("div",p0,[(g(),_(Ce,null,De(s,E=>u("label",{key:E.value,class:"filter-checkbox"},[u("input",{type:"checkbox",checked:c.value.includes(E.value),onChange:P=>T(E.value)},null,40,m0),u("span",{class:Fe(["priority-dot",E.value.toLowerCase()])},null,2),Ve(" "+S(E.label),1)])),64))])]),u("div",v0,[x[4]||(x[4]=u("h4",null,"Filter by area:",-1)),u("label",g0,[u("input",{type:"checkbox",checked:r.value,onChange:f},null,40,_0),x[3]||(x[3]=Ve(" All areas ",-1))]),r.value?B("",!0):(g(),_("div",y0,[u("div",b0,[(g(!0),_(Ce,null,De(h.value,E=>(g(),_("label",{key:E.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:l.value.includes(E.id),onChange:P=>v(E.id)},null,40,k0),u("span",{class:"area-color-dot",style:nn({backgroundColor:E.color||"#667eea"})},null,4),Ve(" "+S(E.name),1)]))),128))])]))]),p.value?(g(),_("button",{key:0,onClick:k,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",w0,[w.value.length===0?(g(),_("div",C0,[u("p",null,S(p.value?"No notes match the selected filters.":"No notes yet. Create one to get started!"),1)])):B("",!0),(g(!0),_(Ce,null,De(I.value,E=>(g(),_("div",{key:E.noteId,class:Fe(["note-card",{pinned:E.isPinned}]),onClick:P=>M.$emit("select-note",E)},[u("div",x0,[u("div",S0,[E.isPinned?(g(),_("span",T0,"")):B("",!0),u("span",{class:Fe(["priority-indicator",E.priority?.toLowerCase()||"normal"])},null,2),u("strong",null,S(E.title),1)]),u("div",I0,[E.category?(g(),_("span",A0,S(E.category),1)):B("",!0),u("span",E0,S(C(E.createdAt)),1)])]),E.content?(g(),_("div",M0,S(b(E.content)),1)):B("",!0),u("div",$0,[(g(!0),_(Ce,null,De(E.scopeConfigurations,(P,X)=>(g(),_("span",{key:X,class:"scope-badge"},S(A(P)),1))),128))])],10,L0))),128))])]))}},D0=Ze(P0,[["__scopeId","data-v-f0d2cbb3"]]),O0={class:"contacts-tab"},R0={class:"contacts-tab-header"},N0={class:"button-group"},B0={class:"filters-section"},F0={class:"filter-group"},z0={class:"filter-checkbox"},U0=["checked"],H0={key:0,class:"checkbox-dropdown"},V0={class:"checkbox-list"},Z0=["checked","onChange"],j0={class:"contacts-list"},q0={key:0,class:"empty-state"},W0=["onClick"],G0={class:"contact-header"},K0={class:"contact-title-row"},J0={key:0,class:"primary-badge",title:"Primary contact"},Y0={class:"role-badge"},X0={class:"contact-details"},Q0={key:0,class:"contact-phone"},eC={key:1,class:"contact-email"},tC={key:0,class:"contact-notes"},nC={class:"contact-scopes"},sC={__name:"ContactsTab",props:{contacts:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})}},emits:["add-contact","select-contact"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=O(!0),r=O([]),l=se(()=>{const A=new Set([...a.availableRoles.builtInRoles||[],...a.availableRoles.customRoles||[],...a.contacts.map(b=>b.role)]);return Array.from(A).sort()}),c=se(()=>!s.value),h=()=>{s.value=!s.value,!s.value&&r.value.length===0&&(r.value=[...l.value])},p=A=>{const b=r.value.indexOf(A);b>=0?r.value.splice(b,1):r.value.push(A)},f=()=>{s.value=!0,r.value=[]},v=se(()=>{let A=a.contacts;return!s.value&&r.value.length>0&&(A=A.filter(b=>r.value.includes(b.role))),A}),T=se(()=>[...v.value].sort((A,b)=>{if(A.isPrimary!==b.isPrimary)return A.isPrimary?-1:1;const C=A.role.localeCompare(b.role);return C!==0?C:A.displayOrder!==b.displayOrder?A.displayOrder-b.displayOrder:fn(A.name,b.name)})),k=A=>A?A==="AreaLead"?`${i.value.area.charAt(0).toUpperCase()+i.value.area.slice(1)} Lead`:A.replace(/([A-Z])/g," $1").replace(/^./,b=>b.toUpperCase()).trim():"",w=A=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`})[A]||A,I=A=>{if(!A)return"";const b=w(A.scope);if(A.itemType===null)return b;const C=A.ids||[];if(C.includes("ALL_MARSHALS"))return`${b} (Everyone)`;if(C.includes("ALL_AREAS"))return`${b} (All ${i.value.areas})`;if(C.includes("ALL_CHECKPOINTS"))return`${b} (All ${i.value.checkpoints})`;const M=C.length;return M===0?b:`${b} (${M})`},D=A=>{if(!A)return"";const b=100;return A.length<=b?A:A.substring(0,b)+"..."};return(A,b)=>(g(),_("div",O0,[u("div",R0,[b[1]||(b[1]=u("h2",null,"Contacts",-1)),u("div",N0,[u("button",{onClick:b[0]||(b[0]=C=>A.$emit("add-contact")),class:"btn btn-primary"}," Add contact ")])]),u("div",B0,[u("div",F0,[b[3]||(b[3]=u("h4",null,"Filter by role:",-1)),u("label",z0,[u("input",{type:"checkbox",checked:s.value,onChange:h},null,40,U0),b[2]||(b[2]=Ve(" All roles ",-1))]),s.value?B("",!0):(g(),_("div",H0,[u("div",V0,[(g(!0),_(Ce,null,De(l.value,C=>(g(),_("label",{key:C,class:"checkbox-item"},[u("input",{type:"checkbox",checked:r.value.includes(C),onChange:M=>p(C)},null,40,Z0),Ve(" "+S(k(C)),1)]))),128))])]))]),c.value?(g(),_("button",{key:0,onClick:f,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",j0,[v.value.length===0?(g(),_("div",q0,[u("p",null,S(c.value?"No contacts match the selected filters.":"No contacts yet. Create one to get started!"),1)])):B("",!0),(g(!0),_(Ce,null,De(T.value,C=>(g(),_("div",{key:C.contactId,class:Fe(["contact-card",{primary:C.isPrimary}]),onClick:M=>A.$emit("select-contact",C)},[u("div",G0,[u("div",K0,[C.isPrimary?(g(),_("span",J0,"")):B("",!0),u("strong",null,S(C.name),1),u("span",Y0,S(k(C.role)),1)]),u("div",X0,[C.phone?(g(),_("span",Q0,S(C.phone),1)):B("",!0),C.email?(g(),_("span",eC,S(C.email),1)):B("",!0)])]),C.notes?(g(),_("div",tC,S(D(C.notes)),1)):B("",!0),u("div",nC,[(g(!0),_(Ce,null,De(C.scopeConfigurations,(M,x)=>(g(),_("span",{key:x,class:"scope-badge"},S(I(M)),1))),128))])],10,W0))),128))])]))}},iC=Ze(sC,[["__scopeId","data-v-62313ae0"]]),oC={class:"event-details-tab"},aC={class:"event-info-card"},rC={class:"form-group"},lC={class:"form-group"},cC={class:"form-row"},uC={class:"form-group"},dC={class:"form-group"},hC=["value"],fC={class:"form-actions"},pC=["disabled"],mC={__name:"EventDetailsTab",props:{eventData:{type:Object,required:!0},formDirty:{type:Boolean,default:!1}},emits:["submit","update:formDirty"],setup(e,{emit:n}){const i=e,a=n,s=O({...i.eventData});qe(()=>i.eventData,c=>{s.value={...c}},{deep:!0});const r=()=>{a("update:formDirty",!0)},l=()=>{a("submit",{...s.value})};return(c,h)=>(g(),_("div",oC,[u("div",aC,[u("form",{onSubmit:It(l,["prevent"]),class:"event-details-form"},[u("div",rC,[h[4]||(h[4]=u("label",null,"Event Name",-1)),Ne(u("input",{"onUpdate:modelValue":h[0]||(h[0]=p=>s.value.name=p),type:"text",required:"",class:"form-input",onInput:r},null,544),[[ot,s.value.name]])]),u("div",lC,[h[5]||(h[5]=u("label",null,"Description",-1)),Ne(u("textarea",{"onUpdate:modelValue":h[1]||(h[1]=p=>s.value.description=p),rows:"3",class:"form-input",onInput:r},null,544),[[ot,s.value.description]])]),u("div",cC,[u("div",uC,[h[6]||(h[6]=u("label",null,"Event Date & Time",-1)),Ne(u("input",{"onUpdate:modelValue":h[2]||(h[2]=p=>s.value.eventDate=p),type:"datetime-local",required:"",class:"form-input",onInput:r},null,544),[[ot,s.value.eventDate]])]),u("div",dC,[h[7]||(h[7]=u("label",null,"Time Zone",-1)),Ne(u("select",{"onUpdate:modelValue":h[3]||(h[3]=p=>s.value.timeZoneId=p),required:"",class:"form-input",onChange:r},[(g(!0),_(Ce,null,De(U(hp),p=>(g(),_("option",{key:p.value,value:p.value},S(p.label),9,hC))),128))],544),[[kn,s.value.timeZoneId]])])]),u("div",fC,[u("button",{type:"submit",class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,pC)])],32)])]))}},vC=Ze(mC,[["__scopeId","data-v-04baf73e"]]),gC={class:"admins-list"},_C={class:"admin-info"},yC={class:"admin-role"},bC=["onClick"],kC={__name:"AdminsList",props:{admins:{type:Array,required:!0}},emits:["add-admin","remove-admin"],setup(e){return(n,i)=>(g(),_("div",null,[i[1]||(i[1]=u("h3",null,"Event administrators",-1)),u("button",{onClick:i[0]||(i[0]=a=>n.$emit("add-admin")),class:"btn btn-small btn-primary"}," Add administrator "),u("div",gC,[(g(!0),_(Ce,null,De(e.admins,a=>(g(),_("div",{key:a.userEmail,class:"admin-item"},[u("div",_C,[u("strong",null,S(a.userEmail),1),u("span",yC,S(a.role),1)]),e.admins.length>1?(g(),_("button",{key:0,onClick:s=>n.$emit("remove-admin",a.userEmail),class:"btn btn-small btn-danger"}," Remove ",8,bC)):B("",!0)]))),128))])]))}},wC=Ze(kC,[["__scopeId","data-v-c76441fb"]]),Yc=[{name:"Charcoal",hex:"#2d3748"},{name:"Dark Gray",hex:"#4a5568"},{name:"Gray",hex:"#718096"},{name:"Red",hex:"#f56565"},{name:"Coral",hex:"#ff6b6b"},{name:"Rose",hex:"#fb7185"},{name:"Pink",hex:"#ed64a6"},{name:"Magenta",hex:"#d946ef"},{name:"Fuchsia",hex:"#e879f9"},{name:"Purple",hex:"#9f7aea"},{name:"Violet",hex:"#a78bfa"},{name:"Lavender",hex:"#b197fc"},{name:"Indigo",hex:"#5a67d8"},{name:"Navy",hex:"#4263eb"},{name:"Blue",hex:"#667eea"},{name:"Sky",hex:"#0ea5e9"},{name:"Cyan",hex:"#0bc5ea"},{name:"Aqua",hex:"#22d3ee"},{name:"Teal",hex:"#38b2ac"},{name:"Emerald",hex:"#10b981"},{name:"Green",hex:"#48bb78"},{name:"Mint",hex:"#51cf66"},{name:"Lime",hex:"#84cc16"},{name:"Olive",hex:"#a3b18a"},{name:"Yellow",hex:"#ecc94b"},{name:"Amber",hex:"#f59e0b"},{name:"Orange",hex:"#ed8936"},{name:"Peach",hex:"#ff922b"},{name:"Light Gray",hex:"#cbd5e0"},{name:"Silver",hex:"#e2e8f0"},{name:"Cream",hex:"#f7fafc"}],br="#667eea";function eh(e){const n=e.map(a=>a.color);return Yc.find(a=>!n.includes(a.hex))?.hex||br}const CC={class:"checkpoint-style-picker"},LC={class:"form-group"},xC={class:"icon-type-grid"},SC=["title","onClick"],TC=["innerHTML"],IC={class:"icon-label"},AC={key:0,class:"form-group"},EC={class:"color-picker"},MC=["title","onClick"],$C=["innerHTML"],PC={key:1,class:"live-preview"},DC=["innerHTML"],OC={__name:"CheckpointStylePicker",props:{styleType:{type:String,default:"default"},styleColor:{type:String,default:""},iconLabel:{type:String,default:"Icon style"},colorLabel:{type:String,default:"Icon color"},showPreview:{type:Boolean,default:!0},inheritedStyleType:{type:String,default:"default"},inheritedStyleColor:{type:String,default:""},defaultLabel:{type:String,default:"Default"}},emits:["update:styleType","update:styleColor","change"],setup(e,{emit:n}){const i=e,a=n,s=O(i.styleType),r=O(i.styleColor||"#667eea"),l=se(()=>Sw(s.value)),c=w=>w.value==="default"?i.defaultLabel:w.label,h=w=>Mn[s.value]?Mn[s.value](w,28):`<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
    <circle cx="${28/2}" cy="${28/2}" r="${28/2-2}" fill="${w}" stroke="#fff" stroke-width="1.5"/>
  </svg>`,p=w=>{if(w.value==="default"){if(i.inheritedStyleType&&i.inheritedStyleType!=="default"){if(ts[i.inheritedStyleType])return ts[i.inheritedStyleType](24);if(Mn[i.inheritedStyleType]){const D=i.inheritedStyleColor||"#667eea";return Mn[i.inheritedStyleType](D,24)}}return`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="defaultGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#10B981"/>
          <stop offset="50%" style="stop-color:#F59E0B"/>
          <stop offset="100%" style="stop-color:#EF4444"/>
        </linearGradient>
      </defs>
      <circle cx="${24/2}" cy="${24/2}" r="${24/2-2}" fill="url(#defaultGradient)" stroke="#fff" stroke-width="1.5"/>
    </svg>`}if(ts[w.value])return ts[w.value](24);if(Mn[w.value]){const D=s.value===w.value?r.value:"#667eea";return Mn[w.value](D,24)}return""},f=se(()=>{if(s.value==="default")return"";const w=Jc(s.value,r.value);return gp(s.value,w,1,2,40)||""}),v=w=>{s.value=w,a("update:styleType",w),k()},T=w=>{r.value=w,a("update:styleColor",w),k()},k=()=>{a("change",{styleType:s.value,styleColor:r.value})};return qe(()=>i.styleType,w=>{s.value=w}),qe(()=>i.styleColor,w=>{r.value=w||"#667eea"}),(w,I)=>(g(),_("div",CC,[u("div",LC,[u("label",null,S(e.iconLabel),1),u("div",xC,[(g(!0),_(Ce,null,De(U(wc),D=>(g(),_("button",{key:D.value,type:"button",class:Fe(["icon-type-button",{selected:s.value===D.value}]),title:c(D),onClick:A=>v(D.value)},[u("div",{class:"icon-preview",innerHTML:p(D)},null,8,TC),u("span",IC,S(c(D)),1)],10,SC))),128))])]),l.value?(g(),_("div",AC,[u("label",null,S(e.colorLabel),1),u("div",EC,[(g(!0),_(Ce,null,De(U(Yc),D=>(g(),_("button",{key:D.hex,type:"button",class:Fe(["color-swatch-button",{selected:r.value===D.hex}]),title:D.name,onClick:A=>T(D.hex)},[u("div",{class:"swatch-shape",innerHTML:h(D.hex)},null,8,$C)],10,MC))),128))])])):B("",!0),e.showPreview&&s.value!=="default"?(g(),_("div",PC,[I[0]||(I[0]=u("label",null,"Preview:",-1)),u("div",{class:"preview-container",innerHTML:f.value},null,8,DC)])):B("",!0)]))}},Xc=Ze(OC,[["__scopeId","data-v-e620a51a"]]),RC={class:"settings-tab"},NC={class:"accordion"},BC={class:"accordion-section"},FC={class:"accordion-title"},zC={class:"accordion-icon"},UC={key:0,class:"accordion-content"},HC={class:"accordion-section"},VC={class:"accordion-icon"},ZC={key:0,class:"accordion-content"},jC={class:"terminology-grid"},qC={class:"term-group"},WC=["value"],GC={class:"term-group"},KC=["value"],JC={class:"term-group"},YC=["value"],XC={class:"term-group"},QC=["value"],eL={class:"term-group"},tL=["value"],nL={class:"form-actions"},sL=["disabled"],iL={class:"accordion-section"},oL={class:"accordion-title"},aL={class:"accordion-icon"},rL={key:0,class:"accordion-content"},lL={class:"section-description"},cL={class:"form-actions"},uL=["disabled"],dL={__name:"SettingsTab",props:{eventData:{type:Object,required:!0},admins:{type:Array,default:()=>[]},formDirty:{type:Boolean,default:!1}},emits:["submit","add-admin","remove-admin","update:formDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O({...s.eventData}),c=O(null),h=se(()=>{const k=l.value.peopleTerm||"Marshals";return qo.checkpoint.map(w=>({value:w,label:yw(w,k)}))}),p=k=>{c.value=c.value===k?null:k};qe(()=>s.eventData,k=>{l.value={...k}},{deep:!0});const f=()=>{r("update:formDirty",!0)},v=(k,w)=>{l.value[k]=w,f()},T=()=>{r("submit",{...l.value})};return(k,w)=>(g(),_("div",RC,[u("div",NC,[u("div",BC,[u("button",{class:Fe(["accordion-header",{active:c.value==="admins"}]),onClick:w[0]||(w[0]=I=>p("admins"))},[u("span",FC,"Administrators ("+S(e.admins.length)+")",1),u("span",zC,S(c.value==="admins"?"-":"+"),1)],2),c.value==="admins"?(g(),_("div",UC,[Oe(wC,{admins:e.admins,onAddAdmin:w[1]||(w[1]=I=>k.$emit("add-admin")),onRemoveAdmin:w[2]||(w[2]=I=>k.$emit("remove-admin",I))},null,8,["admins"])])):B("",!0)]),u("div",HC,[u("button",{class:Fe(["accordion-header",{active:c.value==="terminology"}]),onClick:w[3]||(w[3]=I=>p("terminology"))},[w[12]||(w[12]=u("span",{class:"accordion-title"},"Terminology Settings",-1)),u("span",VC,S(c.value==="terminology"?"-":"+"),1)],2),c.value==="terminology"?(g(),_("div",ZC,[w[13]||(w[13]=u("p",{class:"section-description"}," Customise how things are named throughout the application. ",-1)),u("div",jC,[u("div",qC,[u("label",null,S(U(i).people)+" are called",1),Ne(u("select",{"onUpdate:modelValue":w[4]||(w[4]=I=>l.value.peopleTerm=I),class:"form-input",onChange:f},[(g(!0),_(Ce,null,De(U(qo).people,I=>(g(),_("option",{key:I,value:I},S(I),9,WC))),128))],544),[[kn,l.value.peopleTerm]])]),u("div",GC,[u("label",null,S(U(i).checkpoints)+" are called",1),Ne(u("select",{"onUpdate:modelValue":w[5]||(w[5]=I=>l.value.checkpointTerm=I),class:"form-input",onChange:f},[(g(!0),_(Ce,null,De(h.value,I=>(g(),_("option",{key:I.value,value:I.value},S(I.label),9,KC))),128))],544),[[kn,l.value.checkpointTerm]])]),u("div",JC,[u("label",null,S(U(i).areas)+" are called",1),Ne(u("select",{"onUpdate:modelValue":w[6]||(w[6]=I=>l.value.areaTerm=I),class:"form-input",onChange:f},[(g(!0),_(Ce,null,De(U(qo).area,I=>(g(),_("option",{key:I,value:I},S(I),9,YC))),128))],544),[[kn,l.value.areaTerm]])]),u("div",XC,[u("label",null,S(U(i).checklists)+" are called",1),Ne(u("select",{"onUpdate:modelValue":w[7]||(w[7]=I=>l.value.checklistTerm=I),class:"form-input",onChange:f},[(g(!0),_(Ce,null,De(U(qo).checklist,I=>(g(),_("option",{key:I,value:I},S(I),9,QC))),128))],544),[[kn,l.value.checklistTerm]])]),u("div",eL,[u("label",null,S(U(i).course)+" is called",1),Ne(u("select",{"onUpdate:modelValue":w[8]||(w[8]=I=>l.value.courseTerm=I),class:"form-input",onChange:f},[(g(!0),_(Ce,null,De(U(qo).course,I=>(g(),_("option",{key:I,value:I},S(I),9,tL))),128))],544),[[kn,l.value.courseTerm]])])]),u("div",nL,[u("button",{onClick:T,class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,sL)])])):B("",!0)]),u("div",iL,[u("button",{class:Fe(["accordion-header",{active:c.value==="appearance"}]),onClick:w[9]||(w[9]=I=>p("appearance"))},[u("span",oL,S(U(i).checkpoint)+" Appearance",1),u("span",aL,S(c.value==="appearance"?"-":"+"),1)],2),c.value==="appearance"?(g(),_("div",rL,[u("p",lL," Set the default icon style for all "+S(U(a).checkpoints)+" in this event. Individual "+S(U(a).areas)+" and "+S(U(a).checkpoints)+" can override this setting. ",1),Oe(Xc,{"style-type":l.value.defaultCheckpointStyleType||"default","style-color":l.value.defaultCheckpointStyleColor||"","icon-label":"Default icon style","color-label":"Default icon color","show-preview":!0,"onUpdate:styleType":w[10]||(w[10]=I=>v("defaultCheckpointStyleType",I)),"onUpdate:styleColor":w[11]||(w[11]=I=>v("defaultCheckpointStyleColor",I))},null,8,["style-type","style-color"]),u("div",cL,[u("button",{onClick:T,class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,uL)])])):B("",!0)])])]))}},hL=Ze(dL,[["__scopeId","data-v-29beb424"]]),fL={class:"button-group"},pL={key:0,class:"add-dropdown"},mL={key:0,class:"filter-group"},vL={class:"filter-checkbox"},gL=["checked"],_L={class:"locations-list"},yL=["onClick"],bL={class:"location-info"},kL={class:"location-header"},wL={class:"location-description"},CL={class:"location-status"},LL={class:"location-assignments"},xL={__name:"CheckpointsList",props:{locations:{type:Array,required:!0},areas:{type:Array,default:()=>[]}},emits:["add-checkpoint-manually","import-checkpoints","select-location"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O(!0),c=O([]),h=O(null),p=O(null),f=O(!1),v=()=>{f.value=!f.value},T=()=>{f.value=!1,r("add-checkpoint-manually")},k=()=>{f.value=!1,r("import-checkpoints")},w=C=>{p.value&&!p.value.contains(C.target)&&(f.value=!1)};Ln(()=>{document.addEventListener("click",w)}),Ds(()=>{document.removeEventListener("click",w)});const I=()=>{l.value=!l.value,!l.value&&c.value.length===0&&(c.value=s.areas.map(C=>C.id))},D=se(()=>{let C=s.locations;return!l.value&&c.value.length>0&&(C=C.filter(M=>(M.areaIds||M.AreaIds||[]).some(E=>c.value.includes(E)))),[...C].sort((M,x)=>fn(M.name,x.name))}),A=C=>{const M=s.areas.find(x=>x.id===C);return M?M.name:null},b=C=>{const M=s.areas.find(x=>x.id===C);return M?M.color:"#999"};return(C,M)=>(g(),_("div",null,[u("h3",null,S(U(i).checkpoints)+" ("+S(e.locations.length)+")",1),u("div",fL,[u("div",{class:"add-menu-wrapper",ref_key:"menuWrapperRef",ref:p},[u("button",{ref_key:"addButtonRef",ref:h,onClick:v,class:"btn btn-small btn-primary"}," Add... ",512),f.value?(g(),_("div",pL,[u("button",{onClick:T,class:"dropdown-item"}," Add "+S(U(a).checkpoint)+" manually ",1),u("button",{onClick:k,class:"dropdown-item"}," Import from CSV... ")])):B("",!0)],512)]),e.areas.length>0?(g(),_("div",mL,[u("h4",null,"Filter by "+S(U(i).area.toLowerCase())+":",1),u("label",vL,[u("input",{type:"checkbox",checked:l.value,onChange:I},null,40,gL),Ve(" All "+S(U(i).areas.toLowerCase())+" ("+S(e.locations.length)+") ",1)]),l.value?B("",!0):(g(),tt(yp,{key:0,areas:e.areas,"selected-area-ids":c.value,"onUpdate:selectedAreaIds":M[0]||(M[0]=x=>c.value=x)},null,8,["areas","selected-area-ids"]))])):B("",!0),u("div",_L,[(g(!0),_(Ce,null,De(D.value,x=>(g(),_("div",{key:x.id,class:Fe(["location-item",{"location-full":x.checkedInCount>=x.requiredMarshals,"location-missing":x.checkedInCount===0}]),onClick:E=>C.$emit("select-location",x)},[u("div",bL,[u("div",kL,[u("strong",null,S(x.name),1),(g(!0),_(Ce,null,De(x.areaIds||x.AreaIds||[],E=>(g(),_("span",{key:E,class:"area-badge",style:nn({backgroundColor:b(E)})},S(A(E)),5))),128))]),u("span",wL,S(x.description),1),u("span",CL,S(x.checkedInCount)+"/"+S(x.requiredMarshals),1)]),u("div",LL,[(g(!0),_(Ce,null,De(x.assignments,E=>(g(),_("span",{key:E.id,class:Fe(["assignment-badge",{"checked-in":E.isCheckedIn}])},S(E.marshalName),3))),128))])],10,yL))),128))])]))}},SL=Ze(xL,[["__scopeId","data-v-6e64a151"]]),TL={class:"button-group"},IL={class:"areas-list"},AL=["onClick"],EL={class:"area-info"},ML={class:"area-header"},$L={key:0,class:"default-badge"},PL={key:0,class:"area-description"},DL={class:"area-stats"},OL={class:"stat-badge"},RL={class:"stat-badge"},NL={key:0,class:"empty-state"},BL={__name:"AreasList",props:{areas:{type:Array,required:!0},checkpoints:{type:Array,default:()=>[]}},emits:["add-area","select-area"],setup(e){const{terms:n,formatCount:i}=ht(),a=e,s=se(()=>[...a.areas].sort((c,h)=>c.displayOrder!==h.displayOrder?c.displayOrder-h.displayOrder:fn(c.name,h.name))),r=c=>c.checkpointCount!==void 0?c.checkpointCount:a.checkpoints.filter(h=>h.areaId===c.id).length,l=c=>{if(!c.contacts)return 0;const h=typeof c.contacts=="string"?JSON.parse(c.contacts):c.contacts;return Array.isArray(h)?h.length:0};return(c,h)=>(g(),_("div",null,[u("h3",null,S(U(n).areas)+" ("+S(e.areas.length)+")",1),u("div",TL,[u("button",{onClick:h[0]||(h[0]=p=>c.$emit("add-area")),class:"btn btn-small btn-primary"}," Add "+S(U(n).area.toLowerCase()),1)]),u("div",IL,[(g(!0),_(Ce,null,De(s.value,p=>(g(),_("div",{key:p.id,class:"area-item",style:nn({borderLeftColor:p.color||"#667eea"}),onClick:f=>c.$emit("select-area",p)},[u("div",EL,[u("div",ML,[u("strong",null,S(p.name),1),p.isDefault?(g(),_("span",$L,"Default")):B("",!0)]),p.description?(g(),_("p",PL,S(p.description),1)):B("",!0),u("div",DL,[u("span",OL,S(U(i)("checkpoint",r(p))),1),u("span",RL,S(l(p))+" contact"+S(l(p)===1?"":"s"),1)])])],12,AL))),128)),e.areas.length===0?(g(),_("div",NL,[u("p",null,"No "+S(U(n).areas.toLowerCase())+' yet. Click "Add '+S(U(n).area.toLowerCase())+'" to create one.',1)])):B("",!0)])]))}},FL=Ze(BL,[["__scopeId","data-v-1ef45bfd"]]),zL={course:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>',checkpoint:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',area:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',marshal:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',checklist:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>',details:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16h6"/></svg>',location:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>',map:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',contacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',eventContacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 8V6a2 2 0 0 0-2-2h-2"/><path d="M22 12v2a2 2 0 0 1-2 2h-2"/></svg>',event:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>',appearance:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r="0.5" fill="currentColor"/><circle cx="17.5" cy="10.5" r="0.5" fill="currentColor"/><circle cx="8.5" cy="7.5" r="0.5" fill="currentColor"/><circle cx="6.5" cy="12.5" r="0.5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"/></svg>'},bn=e=>zL[e]||"",UL={class:"responsive-tabs"},HL={class:"visible-tabs"},VL=["onClick"],ZL=["innerHTML"],jL={class:"hamburger-only"},qL=["innerHTML"],WL={class:"hamburger-label"},GL=["onClick"],KL=["innerHTML"],JL={__name:"ResponsiveTabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,a=n,s=O(null),r=O(null),l=O(!1),c=O({}),h=se(()=>i.tabs.find(k=>k.value===i.modelValue)),p=se(()=>h.value?h.value.label:"Menu"),f=()=>{if(l.value=!l.value,l.value&&r.value){const k=r.value.getBoundingClientRect();c.value={top:`${k.bottom+4}px`}}},v=k=>{a("update:modelValue",k),l.value=!1},T=k=>{if(!s.value)return;const w=s.value.contains(k.target);l.value&&!w&&(l.value=!1)};return Ln(()=>{document.addEventListener("click",T)}),Ds(()=>{document.removeEventListener("click",T)}),(k,w)=>(g(),_("div",UL,[u("div",HL,[(g(!0),_(Ce,null,De(e.tabs,I=>(g(),_("button",{key:I.value,class:Fe(["tab-button",{active:e.modelValue===I.value}]),onClick:D=>k.$emit("update:modelValue",I.value),type:"button"},[I.icon?(g(),_("span",{key:0,class:"tab-icon",innerHTML:U(bn)(I.icon)},null,8,ZL)):B("",!0),Ve(" "+S(I.label),1)],10,VL))),128))]),u("div",jL,[u("div",{class:"hamburger-menu",ref_key:"hamburgerMenu",ref:s},[u("button",{ref_key:"hamburgerButton",ref:r,class:Fe(["hamburger-button",{active:l.value}]),onClick:It(f,["stop"]),type:"button"},[w[1]||(w[1]=u("span",{class:"hamburger-icon"},"",-1)),h.value?.icon?(g(),_("span",{key:0,class:"tab-icon",innerHTML:U(bn)(h.value.icon)},null,8,qL)):B("",!0),u("span",WL,S(p.value),1)],2),l.value?(g(),_("div",{key:0,class:"hamburger-dropdown",style:nn(c.value),onClick:w[0]||(w[0]=It(()=>{},["stop"]))},[(g(!0),_(Ce,null,De(e.tabs,I=>(g(),_("button",{key:I.value,class:Fe(["dropdown-item",{active:e.modelValue===I.value}]),onClick:It(D=>v(I.value),["stop"]),type:"button"},[I.icon?(g(),_("span",{key:0,class:"tab-icon",innerHTML:U(bn)(I.icon)},null,8,KL)):B("",!0),Ve(" "+S(I.label),1)],10,GL))),128))],4)):B("",!0)],512)])]))}},YL=Ze(JL,[["__scopeId","data-v-1710ea17"]]),XL={class:"share-link-container"},QL=["value"],ex={__name:"ShareLinkModal",props:{show:{type:Boolean,default:!1},link:{type:String,required:!0},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=n,a=O(!1),s=O(null),r=()=>{s.value&&(s.value.select(),document.execCommand("copy"),a.value=!0,setTimeout(()=>{a.value=!1},2e3))},l=()=>{i("close")};return(c,h)=>(g(),tt(Nt,{show:e.show,title:"Marshal check-in link",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:l},{actions:Ge(()=>[u("button",{onClick:l,class:"btn btn-secondary"},"Close")]),default:Ge(()=>[h[0]||(h[0]=u("p",{class:"instruction"},"Share this link with marshals so they can check in:",-1)),u("div",XL,[u("input",{value:e.link,readonly:"",class:"form-input",ref_key:"linkInput",ref:s},null,8,QL),u("button",{onClick:r,class:"btn btn-primary"},S(a.value?"Copied!":"Copy"),1)])]),_:1},8,["show","is-dirty"]))}},tx=Ze(ex,[["__scopeId","data-v-e3c38c66"]]),nx={class:"success-content"},sx={class:"success-message"},ix={class:"link-section"},ox={class:"help-text"},ax={key:0,class:"loading-text"},rx={key:1,class:"magic-link-container"},lx=["value"],cx={class:"magic-link-actions"},ux=["disabled"],dx={key:0,class:"success-text"},hx={key:1,class:"error-text"},fx={key:2,class:"error-text"},px={__name:"MarshalCreatedModal",props:{show:{type:Boolean,default:!1},eventId:{type:String,required:!0},marshalId:{type:String,default:null},marshalName:{type:String,default:""}},emits:["close"],setup(e,{emit:n}){const{terms:i}=ht(),a=e,s=n,r=O(""),l=O(!1),c=O(!1),h=O(""),p=O(!1),f=O(!1),v=O(!1),T=O(""),k=async()=>{if(!(!a.eventId||!a.marshalId)){c.value=!0,h.value="";try{const A=await Qn.getMagicLink(a.eventId,a.marshalId);r.value=A.data.magicLink,l.value=A.data.hasEmail}catch(A){console.error("Failed to fetch magic link:",A),h.value="Failed to load login link"}finally{c.value=!1}}},w=async()=>{try{await navigator.clipboard.writeText(r.value),p.value=!0,setTimeout(()=>{p.value=!1},2e3)}catch(A){console.error("Failed to copy:",A)}},I=async()=>{if(!(!a.eventId||!a.marshalId)){f.value=!0,v.value=!1,T.value="";try{await Qn.sendMagicLink(a.eventId,a.marshalId),v.value=!0,setTimeout(()=>{v.value=!1},3e3)}catch(A){console.error("Failed to send email:",A),T.value=A.response?.data?.message||"Failed to send email"}finally{f.value=!1}}},D=()=>{s("close")};return qe(()=>a.show,A=>{A&&a.marshalId?k():(r.value="",l.value=!1,h.value="",p.value=!1,v.value=!1,T.value="")},{immediate:!0}),(A,b)=>(g(),tt(Nt,{show:e.show,title:`${U(i).person} created`,size:"medium","confirm-on-close":!1,"is-dirty":!1,onClose:D},{actions:Ge(()=>[u("button",{onClick:D,class:"btn btn-primary"},"Done")]),default:Ge(()=>[u("div",nx,[b[2]||(b[2]=u("div",{class:"success-icon"},"",-1)),u("p",sx,[u("strong",null,S(e.marshalName),1),b[1]||(b[1]=Ve(" has been added successfully. ",-1))])]),u("div",ix,[b[3]||(b[3]=u("label",null,"Login Link",-1)),u("p",ox," Share this unique link with "+S(e.marshalName)+" so they can access their dashboard and check in. ",1),c.value?(g(),_("div",ax,"Loading link...")):r.value?(g(),_("div",rx,[u("input",{type:"text",value:r.value,readonly:"",class:"form-input magic-link-input",onFocus:b[0]||(b[0]=C=>C.target.select())},null,40,lx),u("div",cx,[u("button",{type:"button",class:"btn btn-secondary",onClick:w},S(p.value?"Copied!":"Copy link"),1),l.value?(g(),_("button",{key:0,type:"button",class:"btn btn-primary",disabled:f.value,onClick:I},S(f.value?"Sending...":"Send via email"),9,ux)):B("",!0)]),v.value?(g(),_("p",dx,"Email sent successfully!")):B("",!0),T.value?(g(),_("p",hx,S(T.value),1)):B("",!0)])):h.value?(g(),_("div",fx,S(h.value),1)):B("",!0)])]),_:1},8,["show","title"]))}},mx=Ze(px,[["__scopeId","data-v-f28f1004"]]),vx={class:"form-group"},gx={__name:"AddAdminModal",props:{show:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O("");qe(()=>i.show,h=>{h||(s.value="")});const r=()=>{a("update:isDirty",!0)},l=()=>{a("submit",s.value)},c=()=>{a("close")};return(h,p)=>(g(),tt(Nt,{show:e.show,title:"Add event administrator",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:c},{actions:Ge(()=>[u("button",{type:"button",onClick:c,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary"}," Add administrator ")]),default:Ge(()=>[p[2]||(p[2]=u("p",{class:"instruction"},"Enter the email address of the administrator to add",-1)),u("form",{onSubmit:It(l,["prevent"])},[u("div",vx,[p[1]||(p[1]=u("label",null,"Email address",-1)),Ne(u("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>s.value=f),type:"email",required:"",class:"form-input",placeholder:"admin@example.com",onInput:r},null,544),[[ot,s.value]])])],32)]),_:1},8,["show","is-dirty"]))}},_x=Ze(gx,[["__scopeId","data-v-43ad537f"]]),yx={class:"form-group"},bx={key:0,class:"error"},kx=["disabled"],wx={__name:"UploadRouteModal",props:{show:{type:Boolean,default:!1},uploading:{type:Boolean,default:!1},error:{type:String,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O(null);qe(()=>i.show,h=>{h||(s.value=null)});const r=h=>{s.value=h.target.files[0],a("update:isDirty",!0)},l=()=>{s.value&&a("submit",s.value)},c=()=>{a("close")};return(h,p)=>(g(),tt(Nt,{show:e.show,title:"Upload GPX route",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:c},{actions:Ge(()=>[u("button",{type:"button",onClick:c,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary",disabled:e.uploading},S(e.uploading?"Uploading...":"Upload route"),9,kx)]),default:Ge(()=>[p[1]||(p[1]=u("p",{class:"instruction"},"Upload a GPX file to display the event route on the map",-1)),u("form",{onSubmit:It(l,["prevent"])},[u("div",yx,[p[0]||(p[0]=u("label",null,"GPX file",-1)),u("input",{type:"file",accept:".gpx",onChange:r,required:"",class:"form-input"},null,32)]),e.error?(g(),_("div",bx,S(e.error),1)):B("",!0)],32)]),_:1},8,["show","is-dirty"]))}},Cx=Ze(wx,[["__scopeId","data-v-1c1d3033"]]),Lx={class:"instruction"},xx={class:"form-group"},Sx={class:"form-group"},Tx={class:"checkbox-label"},Ix={key:0,class:"error"},Ax={key:1,class:"import-result"},Ex={key:0,class:"import-errors"},Mx=["disabled"],$x={__name:"ImportLocationsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O(null),c=O(!1);qe(()=>s.show,T=>{T||(l.value=null,c.value=!1)});const h=T=>{l.value=T.target.files[0],r("update:isDirty",!0)},p=()=>{r("update:isDirty",!0)},f=()=>{l.value&&r("submit",{file:l.value,deleteExisting:c.value})},v=()=>{r("close")};return(T,k)=>(g(),tt(Nt,{show:e.show,title:`Import ${U(a).checkpoints} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:v},{actions:Ge(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary",disabled:e.importing},S(e.importing?"Importing...":`Import ${U(a).checkpoints}`),9,Mx)]),default:Ge(()=>[u("p",Lx,"Upload a CSV file with columns: Label, Lat/Latitude, Long/Longitude, What3Words (optional), "+S(U(i).people)+" (optional)",1),k[3]||(k[3]=u("div",{class:"csv-example"},[u("strong",null,"Example CSV format:"),u("pre",null,`Label,Latitude,Longitude,What3Words,Marshals
Checkpoint 1,51.505,-0.09,filled.count.soap,"John Doe, Jane Smith"
Checkpoint 2,51.510,-0.10,index.home.raft,Bob Wilson`)],-1)),u("form",{onSubmit:It(f,["prevent"])},[u("div",xx,[k[1]||(k[1]=u("label",null,"CSV file",-1)),u("input",{type:"file",accept:".csv",onChange:h,required:"",class:"form-input"},null,32)]),u("div",Sx,[u("label",Tx,[Ne(u("input",{type:"checkbox","onUpdate:modelValue":k[0]||(k[0]=w=>c.value=w),onChange:p},null,544),[[to,c.value]]),Ve(" Delete existing "+S(U(a).checkpoints)+" before import ",1)])]),e.error?(g(),_("div",Ix,S(e.error),1)):B("",!0),e.result?(g(),_("div",Ax,[u("p",null,"Created "+S(e.result.locationsCreated)+" "+S(U(a).checkpoints)+" and "+S(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(g(),_("div",Ex,[k[2]||(k[2]=u("strong",null,"Errors:",-1)),u("ul",null,[(g(!0),_(Ce,null,De(e.result.errors,(w,I)=>(g(),_("li",{key:I},S(w),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},Px=Ze($x,[["__scopeId","data-v-e0a01848"]]),Dx={class:"instruction"},Ox={class:"form-group"},Rx={key:0,class:"error"},Nx={key:1,class:"import-result"},Bx={key:0,class:"import-errors"},Fx=["disabled"],zx={__name:"ImportMarshalsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O(null);qe(()=>s.show,f=>{f||(l.value=null)});const c=f=>{l.value=f.target.files[0],r("update:isDirty",!0)},h=()=>{l.value&&r("submit",l.value)},p=()=>{r("close")};return(f,v)=>(g(),tt(Nt,{show:e.show,title:`Import ${U(a).people} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:p},{actions:Ge(()=>[u("button",{type:"button",onClick:p,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:h,class:"btn btn-primary",disabled:e.importing},S(e.importing?"Importing...":`Import ${U(a).people}`),9,Fx)]),default:Ge(()=>[u("p",Dx,"Upload a CSV file with columns: Name, Email (optional), Phone (optional), "+S(U(i).checkpoint)+" (optional)",1),v[2]||(v[2]=u("div",{class:"csv-example"},[u("strong",null,"Example CSV format:"),u("pre",null,`Name,Email,Phone,Checkpoint
John Doe,john@example.com,555-1234,Checkpoint 1
Jane Smith,jane@example.com,555-5678,Checkpoint 2`)],-1)),u("form",{onSubmit:It(h,["prevent"])},[u("div",Ox,[v[0]||(v[0]=u("label",null,"CSV file",-1)),u("input",{type:"file",accept:".csv",onChange:c,required:"",class:"form-input"},null,32)]),e.error?(g(),_("div",Rx,S(e.error),1)):B("",!0),e.result?(g(),_("div",Nx,[u("p",null,"Imported "+S(e.result.marshalsCreated)+" "+S(U(a).people)+" and "+S(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(g(),_("div",Bx,[v[1]||(v[1]=u("strong",null,"Errors:",-1)),u("ul",null,[(g(!0),_(Ce,null,De(e.result.errors,(T,k)=>(g(),_("li",{key:k},S(T),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},Ux=Ze(zx,[["__scopeId","data-v-dcaed17c"]]),Hx={key:0,class:"tabs"},Vx=["onClick"],Zx=["innerHTML"],jx=["innerHTML"],qx={class:"current-tab-label"},Wx={key:0,class:"hamburger-menu"},Gx=["onClick"],Kx=["innerHTML"],Jx=400,Yx={__name:"TabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,a=n,s=O(null),r=O(null),l=O(!1),c=O(!1),h=se(()=>{const I=i.tabs.find(D=>D.value===i.modelValue);return I?I.label:""}),p=se(()=>i.tabs.find(D=>D.value===i.modelValue)?.icon||null),f=()=>{if(!s.value)return;const I=s.value.clientWidth,D=i.tabs.length*100;l.value=D>I||I<Jx},v=()=>{c.value=!c.value},T=I=>{a("update:modelValue",I),c.value=!1},k=I=>{r.value&&!r.value.contains(I.target)&&(c.value=!1)};let w=null;return Ln(()=>{io(()=>{f(),s.value&&typeof ResizeObserver<"u"&&(w=new ResizeObserver(()=>{f()}),w.observe(s.value)),document.addEventListener("click",k)})}),Ds(()=>{w&&w.disconnect(),document.removeEventListener("click",k)}),qe(()=>i.tabs,()=>{io(()=>{f()})},{deep:!0}),(I,D)=>(g(),_("div",{class:"tabs-container",ref_key:"containerRef",ref:s},[l.value?(g(),_("div",{key:1,class:"hamburger-container",ref_key:"hamburgerRef",ref:r},[u("button",{class:"hamburger-button",onClick:v,type:"button","aria-label":"Tab menu"},[p.value?(g(),_("span",{key:0,class:"current-tab-icon",innerHTML:U(bn)(p.value)},null,8,jx)):B("",!0),u("span",qx,S(h.value),1),D[0]||(D[0]=u("span",{class:"hamburger-chevron"},"",-1))]),c.value?(g(),_("div",Wx,[(g(!0),_(Ce,null,De(e.tabs,A=>(g(),_("button",{key:A.value,class:Fe(["menu-item",{active:e.modelValue===A.value}]),onClick:b=>T(A.value),type:"button"},[A.icon?(g(),_("span",{key:0,class:"tab-icon",innerHTML:U(bn)(A.icon)},null,8,Kx)):B("",!0),Ve(" "+S(A.label),1)],10,Gx))),128))])):B("",!0)],512)):(g(),_("div",Hx,[(g(!0),_(Ce,null,De(e.tabs,A=>(g(),_("button",{key:A.value,class:Fe(["tab-button",{active:e.modelValue===A.value}]),onClick:b=>I.$emit("update:modelValue",A.value),type:"button"},[A.icon?(g(),_("span",{key:0,class:"tab-icon",innerHTML:U(bn)(A.icon)},null,8,Zx)):B("",!0),Ve(" "+S(A.label),1)],10,Vx))),128))]))],512))}},Qc=Ze(Yx,[["__scopeId","data-v-5c12f1ab"]]),Xx={class:"tab-content"},Qx={class:"form-group"},eS=["value"],tS={class:"form-group"},nS=["value"],sS={class:"form-group"},iS={class:"area-display"},oS={key:0,class:"no-area"},aS={class:"form-group"},rS={class:"checkbox-label"},lS=["checked"],cS={key:0,class:"custom-times-section"},uS={class:"form-group"},dS=["value"],hS={class:"form-group"},fS=["value"],pS={__name:"LocationDetailsTab",props:{form:{type:Object,required:!0},areas:{type:Array,default:()=>[]},eventDate:{type:String,default:""}},emits:["update:form","input","save"],setup(e,{emit:n}){const i=e,a=n,s=se(()=>(i.form.areaIds||i.form.AreaIds||[]).map(h=>i.areas.find(p=>p.id===h)).filter(h=>h!==void 0)),r=(c,h)=>{a("update:form",{...i.form,[c]:h}),a("input")},l=c=>{const h={...i.form,useCustomTimes:c};if(!c)h.startTime="",h.endTime="";else if(!h.startTime&&!h.endTime&&i.eventDate){const p=$r(i.eventDate);h.startTime=p,h.endTime=p}a("update:form",h),a("input")};return(c,h)=>(g(),_("div",Xx,[u("form",{onSubmit:h[5]||(h[5]=It(p=>c.$emit("save"),["prevent"]))},[u("div",Qx,[h[6]||(h[6]=u("label",null,"Name",-1)),u("input",{value:e.form.name,onInput:h[0]||(h[0]=p=>r("name",p.target.value)),type:"text",required:"",class:"form-input"},null,40,eS)]),u("div",tS,[h[7]||(h[7]=u("label",null,"Description (optional)",-1)),u("input",{value:e.form.description,onInput:h[1]||(h[1]=p=>r("description",p.target.value)),type:"text",class:"form-input"},null,40,nS)]),u("div",sS,[h[8]||(h[8]=u("label",null,"Area (auto-assigned by location)",-1)),u("div",iS,[s.value.length===0?(g(),_("span",oS," Not in any area polygon ")):B("",!0),(g(!0),_(Ce,null,De(s.value,p=>(g(),_("span",{key:p.id,class:"area-badge",style:nn({backgroundColor:p.color||"#667eea"})},S(p.name),5))),128))]),h[9]||(h[9]=u("small",{class:"form-help"}," Areas are automatically assigned based on checkpoint location within area boundaries ",-1))]),u("div",aS,[u("label",rS,[u("input",{checked:e.form.useCustomTimes,onChange:h[2]||(h[2]=p=>l(p.target.checked)),type:"checkbox"},null,40,lS),h[10]||(h[10]=Ve(" Use custom date/time for this checkpoint ",-1))]),h[11]||(h[11]=u("small",{class:"form-help"}," By default, marshals are expected during the event date/time. Enable this to set a specific time range. ",-1))]),e.form.useCustomTimes?(g(),_("div",cS,[u("div",uS,[h[12]||(h[12]=u("label",null,"Start Date & Time (optional)",-1)),u("input",{value:e.form.startTime,onInput:h[3]||(h[3]=p=>r("startTime",p.target.value)),type:"datetime-local",class:"form-input"},null,40,dS),h[13]||(h[13]=u("small",{class:"form-help"}," When marshal should arrive at this checkpoint ",-1))]),u("div",hS,[h[14]||(h[14]=u("label",null,"End Date & Time (optional)",-1)),u("input",{value:e.form.endTime,onInput:h[4]||(h[4]=p=>r("endTime",p.target.value)),type:"datetime-local",class:"form-input"},null,40,fS),h[15]||(h[15]=u("small",{class:"form-help"}," When marshal can leave this checkpoint ",-1))])])):B("",!0)],32)]))}},mS=Ze(pS,[["__scopeId","data-v-60977929"]]),vS={class:"tab-content"},gS={class:"form-group"},_S=["value"],yS={key:0,class:"form-error"},bS={class:"form-row"},kS={class:"form-group"},wS=["value","disabled"],CS={class:"form-group"},LS=["value","disabled"],xS={class:"form-group"},SS={__name:"LocationCoordinatesTab",props:{form:{type:Object,required:!0},isMoving:{type:Boolean,default:!1}},emits:["update:form","input","save","move-location"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=p=>p==null||p===""?"":Number(p).toFixed(6),l=(p,f)=>{s("update:form",{...a.form,[p]:f}),s("input")},c=(p,f)=>{s("update:form",{...a.form,[p]:Number(f)}),s("input")},h=p=>{if(!p)return!0;const f=p.includes(".")?p.split("."):p.split("/");if(f.length!==3)return!1;const v=/^[a-z]{1,20}$/;return f.every(T=>v.test(T))};return(p,f)=>(g(),_("div",vS,[u("form",{onSubmit:f[4]||(f[4]=It(v=>p.$emit("save"),["prevent"]))},[u("div",gS,[f[5]||(f[5]=u("label",null,"What3Words (optional)",-1)),u("input",{value:e.form.what3Words,onInput:f[0]||(f[0]=v=>l("what3Words",v.target.value)),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap"},null,40,_S),e.form.what3Words&&!h(e.form.what3Words)?(g(),_("small",yS," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),u("div",bS,[u("div",kS,[f[6]||(f[6]=u("label",null,"Longitude",-1)),u("input",{value:r(e.form.longitude),onInput:f[1]||(f[1]=v=>c("longitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., -0.091234"},null,40,wS)]),u("div",CS,[f[7]||(f[7]=u("label",null,"Latitude",-1)),u("input",{value:r(e.form.latitude),onInput:f[2]||(f[2]=v=>c("latitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., 51.505123"},null,40,LS)])]),u("div",xS,[u("button",{type:"button",onClick:f[3]||(f[3]=v=>p.$emit("move-location")),class:Fe(["btn btn-secondary btn-with-icon",{"btn-primary":e.isMoving}])},[f[8]||(f[8]=u("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),Ve(" "+S(e.isMoving?"Click on map to set new location...":`Move ${U(i).checkpoint}...`),1)],2)])],32)]))}},TS=Ze(SS,[["__scopeId","data-v-86bee5e5"]]);function bp(e){const n=O(new Map),i=f=>n.value.has(f.id)?n.value.get(f.id):f.isCheckedIn;return{pendingCheckInChanges:n,getEffectiveCheckInStatus:i,handleToggleCheckIn:f=>{const T=!i(f);T===f.isCheckedIn?n.value.delete(f.id):n.value.set(f.id,T),e&&e()},getStatusIcon:f=>i(f)?"":"",getStatusColor:f=>i(f)?"#28a745":"#dc3545",getStatusText:f=>i(f)?"Checked in":"Not checked in",formatTime:f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",clearPendingChanges:()=>{n.value.clear()},getPendingChanges:()=>Array.from(n.value.entries()).map(([f,v])=>({assignmentId:f,shouldBeCheckedIn:v}))}}const IS={class:"tab-content"},AS={class:"form-group"},ES=["value"],MS={class:"section-title"},$S={class:"assignments-list"},PS={class:"assignment-info"},DS={class:"assignment-header"},OS=["title"],RS={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},NS={key:2,class:"pending-badge"},BS={key:3,class:"pending-badge"},FS={key:0,class:"check-in-info"},zS={class:"check-in-method"},US={class:"assignment-actions"},HS=["onClick"],VS=["onClick"],ZS={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},jS={value:""},qS=["value"],WS={__name:"LocationAssignmentsTab",props:{form:{type:Object,required:!0},assignments:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]}},emits:["update:form","input","remove-assignment","assign-marshal"],setup(e,{expose:n,emit:i}){const{termsLower:a}=ht(),s=e,r=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:c,handleToggleCheckIn:h,getStatusIcon:p,getStatusColor:f,getStatusText:v,formatTime:T}=bp(()=>r("input")),k=O(""),w=se(()=>s.assignments?.length||0),I=se(()=>s.assignments?[...s.assignments].sort((C,M)=>{const x=C.marshalName?.toLowerCase()||"",E=M.marshalName?.toLowerCase()||"";return x.localeCompare(E)}):[]),D=se(()=>{const C=[...s.availableMarshals];return C.sort((M,x)=>(M.name||"").localeCompare(x.name||"",void 0,{numeric:!0,sensitivity:"base"})),C}),A=()=>{k.value&&(r("assign-marshal",k.value),k.value="")},b=(C,M)=>{r("update:form",{...s.form,[C]:Number(M)}),r("input")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),k.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([C,M])=>({assignmentId:C,shouldBeCheckedIn:M}))}),(C,M)=>(g(),_("div",IS,[u("div",AS,[u("label",null,"Required "+S(U(a).people),1),u("input",{value:e.form.requiredMarshals,onInput:M[0]||(M[0]=x=>b("requiredMarshals",x.target.value)),type:"number",min:"1",required:"",class:"form-input"},null,40,ES)]),u("h3",MS,"Assigned "+S(U(a).people)+" ("+S(w.value)+")",1),u("div",$S,[(g(!0),_(Ce,null,De(I.value,x=>(g(),_("div",{key:x.id,class:Fe(["assignment-item",{"checked-in":!x.isPending&&U(c)(x),"is-pending":x.isPending}])},[u("div",PS,[u("div",DS,[x.isPending?(g(),_("span",RS,"  ")):(g(),_("span",{key:0,class:"status-indicator",style:nn({color:U(f)(x)}),title:U(v)(x)},S(U(p)(x)),13,OS)),u("strong",null,S(x.marshalName),1),x.isPending?(g(),_("span",NS," (will be assigned on save) ")):U(l).has(x.id)?(g(),_("span",BS," (unsaved) ")):B("",!0)]),!x.isPending&&U(c)(x)?(g(),_("span",FS,[x.isCheckedIn&&!U(l).has(x.id)?(g(),_(Ce,{key:0},[Ve(S(U(T)(x.checkInTime))+" ",1),u("span",zS,"("+S(x.checkInMethod)+")",1)],64)):(g(),_(Ce,{key:1},[Ve(" Will be checked in on save ")],64))])):B("",!0)]),u("div",US,[x.isPending?B("",!0):(g(),_("button",{key:0,onClick:E=>U(h)(x),class:Fe(["btn btn-small",U(c)(x)?"btn-danger":"btn-secondary"])},S(U(c)(x)?"Undo":"Check in"),11,HS)),u("button",{onClick:E=>C.$emit("remove-assignment",x),class:"btn btn-small btn-danger"}," Remove ",8,VS)])],2))),128)),D.value.length>0?(g(),_("div",ZS,[u("label",null,"Assign "+S(U(a).person),1),Ne(u("select",{"onUpdate:modelValue":M[1]||(M[1]=x=>k.value=x),class:"form-input",onChange:A},[u("option",jS,"Select a "+S(U(a).person)+"...",1),(g(!0),_(Ce,null,De(D.value,x=>(g(),_("option",{key:x.id,value:x.id},S(x.name),9,qS))),128))],544),[[kn,k.value]])])):B("",!0)])]))}},GS=Ze(WS,[["__scopeId","data-v-2c486110"]]),KS={class:"checkpoint-checklist-view"},JS={key:0,class:"loading-state"},YS={key:1,class:"error-state"},XS={key:2,class:"empty-state"},QS={key:3,class:"empty-state"},eT={key:4,class:"checklist-items"},tT={class:"item-checkbox"},nT=["checked","disabled","onChange"],sT={class:"item-content"},iT={class:"item-header"},oT={class:"item-text-wrapper"},aT={class:"item-text"},rT={key:0,class:"item-context"},lT={class:"item-scope"},cT=["title"],uT={key:0,class:"completion-info"},dT={key:0,class:"pending-text"},hT={class:"completion-text"},fT={class:"completion-time"},pT={key:1,class:"uncomplete-info"},mT={key:2,class:"disabled-reason"},vT={__name:"CheckpointChecklistView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const{terms:a,termsLower:s}=ht(),r=e,l=i,c=O([]),h=O(!1),p=O(null),f=O(new Map),v=se(()=>r.assignments.length===0),T=se(()=>c.value.map(x=>{const E=f.value.get(`${x.itemId}|||${x.completionContextId}`),P=E!==void 0?E.complete:x.isCompleted,X=E!==void 0&&E.complete!==x.isCompleted;return{...x,localIsCompleted:P,isModified:X}})),k=async()=>{if(!(!r.eventId||!r.locationId&&!r.areaId)){h.value=!0,p.value=null;try{const x=r.locationId?await At.getCheckpointChecklist(r.eventId,r.locationId):await At.getAreaChecklist(r.eventId,r.areaId);if(c.value=x.data||[],r.modelValue&&r.modelValue.length>0){const E=new Map;r.modelValue.forEach(P=>{E.set(`${P.itemId}|||${P.contextId}`,{complete:P.complete,contextType:P.contextType,contextId:P.contextId})}),f.value=E}}catch(x){console.error("Failed to load checklist:",x),p.value=x.response?.data?.message||"Failed to load checklist"}finally{h.value=!1}}},w=x=>{const E=x.contextOwnerMarshalId||(r.assignments.length>0?r.assignments[0].marshalId:null);if(!E)return;const P=`${x.itemId}|||${x.completionContextId}`,X=f.value.get(P),Q=X!==void 0?X.complete:x.isCompleted;f.value.set(P,{complete:!Q,contextType:x.completionContextType,contextId:x.completionContextId,marshalId:E}),I()},I=()=>{const x=[];for(const[E,P]of f.value.entries()){const[X,Q]=E.split("|||"),le=c.value.find(ke=>ke.itemId===X&&ke.completionContextId===Q);le&&P.complete!==le.isCompleted&&x.push({itemId:X,complete:P.complete,contextType:P.contextType,contextId:P.contextId,marshalId:P.marshalId})}l("update:modelValue",x),l("change",x)};n({resetLocalState:()=>{if(f.value=new Map,r.modelValue&&r.modelValue.length>0){const x=new Map;r.modelValue.forEach(E=>{x.set(`${E.itemId}|||${E.contextId}`,{complete:E.complete,contextType:E.contextType,contextId:E.contextId,marshalId:E.marshalId})}),f.value=x}},loadChecklist:k});const A=x=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:`Your ${s.value.areas}`,EveryoneAtCheckpoints:`Your ${s.value.checkpoints}`,OnePerCheckpoint:`One per ${s.value.checkpoint}`,OnePerArea:`One per ${s.value.area}`,EveryAreaLead:`${a.value.area} lead`,OneLeadPerArea:`One lead per ${s.value.area}`})[x.matchedScope]||x.matchedScope,b=x=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to certain people",EveryoneInAreas:`This item is for everyone in certain ${s.value.areas}`,EveryoneAtCheckpoints:`This item is for everyone at certain ${s.value.checkpoints}`,OnePerCheckpoint:`One person at the ${s.value.checkpoint} needs to complete this`,OnePerArea:`One person in the ${s.value.area} needs to complete this`,EveryAreaLead:`This item is for ${s.value.area} leads only`,OneLeadPerArea:`One ${s.value.area} lead needs to complete this`})[x.matchedScope]||"",C=x=>{if(!x.completionContextType||!x.completionContextId)return null;if(x.completionContextType==="Checkpoint"){const E=r.locations.find(X=>X.id===x.completionContextId);if(!E)return null;const P=E.description?`${E.name} - ${E.description}`:E.name;return`at ${s.value.checkpoint} ${P}`}if(x.completionContextType==="Area"){const E=r.areas.find(P=>P.id===x.completionContextId);return E?`in ${s.value.area} ${E.name}`:null}return x.completionContextType==="Personal"?x.contextOwnerName?`for ${x.contextOwnerName}`:"assigned individually":null},M=x=>x?new Date(x).toLocaleString():"";return qe(()=>[r.eventId,r.locationId,r.areaId],()=>{k()},{immediate:!0}),(x,E)=>(g(),_("div",KS,[h.value?(g(),_("div",JS," Loading checklist... ")):p.value?(g(),_("div",YS,[u("p",null,S(p.value),1),u("button",{onClick:k,class:"btn btn-secondary btn-small"}," Retry ")])):v.value?(g(),_("div",XS,[...E[0]||(E[0]=[u("p",null,"No marshals assigned to this checkpoint yet.",-1),u("p",{class:"help-text"},"Assign marshals to enable checklist completion.",-1)])])):c.value.length===0?(g(),_("div",QS,[...E[1]||(E[1]=[u("p",null,"No checklist items for this checkpoint.",-1)])])):(g(),_("div",eT,[(g(!0),_(Ce,null,De(T.value,P=>(g(),_("div",{key:`${P.itemId}-${P.completionContextId}`,class:Fe(["checklist-item",{"item-completed":P.localIsCompleted,"item-modified":P.isModified}])},[u("div",tT,[u("input",{type:"checkbox",checked:P.localIsCompleted,disabled:!P.canBeCompletedByMe&&!P.localIsCompleted,onChange:X=>w(P)},null,40,nT)]),u("div",sT,[u("div",iT,[u("div",oT,[u("div",aT,S(P.text),1),C(P)?(g(),_("div",rT,S(C(P)),1)):B("",!0)]),u("div",lT,[u("span",{class:"scope-pill",title:b(P)},S(A(P)),9,cT)])]),P.localIsCompleted?(g(),_("div",uT,[P.isModified&&!P.isCompleted?(g(),_("span",dT," Will be marked as completed (pending save) ")):(g(),_(Ce,{key:1},[u("span",hT," Completed by "+S(P.completedByActorName||"Unknown"),1),u("span",fT,S(M(P.completedAt)),1)],64))])):B("",!0),P.isModified&&P.isCompleted&&!P.localIsCompleted?(g(),_("div",pT,[...E[2]||(E[2]=[u("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!P.canBeCompletedByMe&&!P.localIsCompleted?(g(),_("div",mT," Already completed by someone else ")):B("",!0)])],2))),128))]))]))}},kp=Ze(vT,[["__scopeId","data-v-9dc97489"]]),gT={class:"notes-view"},_T={key:0,class:"loading-state"},yT={key:1,class:"error-state"},bT={key:2,class:"empty-state"},kT={key:3,class:"notes-list"},wT={class:"note-header"},CT={class:"note-title-row"},LT={key:0,class:"pin-icon",title:"Pinned"},xT={class:"note-title"},ST={class:"note-meta"},TT={key:0,class:"category-badge"},IT={key:0,class:"note-content"},AT={class:"note-footer"},ET={class:"created-info"},MT={key:0,class:"scope-info"},$T={__name:"NotesView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},marshalId:{type:String,default:null},allNotes:{type:Array,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},showScope:{type:Boolean,default:!0}},setup(e,{expose:n}){const i=e,a=O([]),s=O(!1),r=O(null),l=se(()=>i.marshalId?"No notes for this marshal.":i.areaId?"No notes for this area.":i.locationId?"No notes for this checkpoint.":"No notes available."),c=se(()=>i.areaId?i.locations.filter(A=>A.areaIds&&A.areaIds.includes(i.areaId)):[]),h=se(()=>c.value.map(A=>A.id)),p=se(()=>{if(!i.areaId)return[];const A=new Set;return i.assignments.filter(b=>h.value.includes(b.locationId)).forEach(b=>A.add(b.marshalId)),Array.from(A)}),f=A=>i.assignments.filter(b=>b.marshalId===A).map(b=>b.locationId),v=A=>{const b=f(A),C=new Set;for(const M of b){const x=i.locations.find(E=>E.id===M);x?.areaIds&&x.areaIds.forEach(E=>C.add(E))}return Array.from(C)},T=(A,b)=>{if(!A.scopeConfigurations)return null;for(const C of A.scopeConfigurations){if(C.itemType==="Area"){if(b.type==="area"&&(C.ids.includes(b.areaId)||C.ids.includes("ALL_AREAS")))return{matched:!0,scope:C.scope==="EveryAreaLead"?"Area leads":"Area"};if(b.type==="checkpoint"){const x=i.locations.find(E=>E.id===b.locationId)?.areaIds||[];if(C.ids.includes("ALL_AREAS")||x.some(E=>C.ids.includes(E)))return{matched:!0,scope:C.scope==="EveryAreaLead"?"Area leads":"Area"}}}if(C.itemType==="Checkpoint"){if(b.type==="checkpoint"&&(C.ids.includes(b.locationId)||C.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint"};if(b.type==="area"&&b.checkpointIds.some(x=>C.ids.includes(x)||C.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint in area"}}if(C.itemType==="Marshal"){if(b.type==="marshal"&&(C.ids.includes(b.marshalId)||C.ids.includes("ALL_MARSHALS")))return{matched:!0,scope:"Marshal"};if(b.type==="checkpoint"){const M=i.assignments.filter(E=>E.locationId===b.locationId).map(E=>E.marshalId);if(C.ids.includes("ALL_MARSHALS")||M.some(E=>C.ids.includes(E)))return{matched:!0,scope:"Marshal at checkpoint"}}if(b.type==="area"&&(C.ids.includes("ALL_MARSHALS")||b.marshalIds.some(x=>C.ids.includes(x))))return{matched:!0,scope:"Marshal in area"}}if(b.type==="marshal"&&b.checkpointIds&&b.areaIds){if(C.itemType==="Checkpoint"&&(C.ids.includes("ALL_CHECKPOINTS")||b.checkpointIds.some(x=>C.ids.includes(x))))return{matched:!0,scope:"Assigned checkpoint"};if(C.itemType==="Area"&&(C.ids.includes("ALL_AREAS")||b.areaIds.some(x=>C.ids.includes(x))))return{matched:!0,scope:C.scope==="EveryAreaLead"?"Area lead":"Area"}}}return null},k=se(()=>{let A=i.allNotes||a.value;if(!A||A.length===0)return[];if(i.areaId&&i.allNotes){const b={type:"area",areaId:i.areaId,checkpointIds:h.value,marshalIds:p.value},C=[],M=new Set;for(const x of A){if(M.has(x.noteId))continue;const E=T(x,b);E&&(M.add(x.noteId),C.push({...x,matchedScope:E.scope}))}return C}if(i.locationId&&i.allNotes){const b={type:"checkpoint",locationId:i.locationId},C=[],M=new Set;for(const x of A){if(M.has(x.noteId))continue;const E=T(x,b);E&&(M.add(x.noteId),C.push({...x,matchedScope:E.scope}))}return C}if(i.marshalId&&i.allNotes){const b=f(i.marshalId),C=v(i.marshalId),M={type:"marshal",marshalId:i.marshalId,checkpointIds:b,areaIds:C},x=[],E=new Set;for(const P of A){if(E.has(P.noteId))continue;const X=T(P,M);X&&(E.add(P.noteId),x.push({...P,matchedScope:X.scope}))}return x}return A}),w=se(()=>{const A={Urgent:0,High:1,Normal:2,Low:3};return[...k.value].sort((b,C)=>{if(b.isPinned!==C.isPinned)return b.isPinned?-1:1;const M=A[b.priority]??2,x=A[C.priority]??2;return M!==x?M-x:b.displayOrder!==C.displayOrder?b.displayOrder-C.displayOrder:new Date(C.createdAt)-new Date(b.createdAt)})}),I=async()=>{if(i.allNotes===null&&i.eventId){s.value=!0,r.value=null;try{let A;i.marshalId?A=await Ls.getMarshalNotes(i.eventId,i.marshalId):A=await Ls.getByEvent(i.eventId),a.value=A.data||[]}catch(A){console.error("Failed to load notes:",A),r.value=A.response?.data?.message||"Failed to load notes"}finally{s.value=!1}}};qe(()=>[i.eventId,i.locationId,i.areaId,i.marshalId],()=>{i.allNotes===null&&I()},{immediate:!0});const D=A=>{if(!A)return"";const b=new Date(A),M=new Date-b,x=Math.floor(M/6e4),E=Math.floor(M/36e5),P=Math.floor(M/864e5);return x<1?"just now":x<60?`${x}m ago`:E<24?`${E}h ago`:P<7?`${P}d ago`:b.toLocaleDateString()};return n({loadNotes:I}),(A,b)=>(g(),_("div",gT,[s.value?(g(),_("div",_T," Loading notes... ")):r.value?(g(),_("div",yT,[u("p",null,S(r.value),1),u("button",{onClick:I,class:"btn btn-secondary btn-small"}," Retry ")])):k.value.length===0?(g(),_("div",bT,[u("p",null,S(l.value),1)])):(g(),_("div",kT,[(g(!0),_(Ce,null,De(w.value,C=>(g(),_("div",{key:C.noteId,class:Fe(["note-item",{pinned:C.isPinned}])},[u("div",wT,[u("div",CT,[C.isPinned?(g(),_("span",LT,"")):B("",!0),u("span",{class:Fe(["priority-indicator",(C.priority||"Normal").toLowerCase()])},null,2),u("strong",xT,S(C.title),1)]),u("div",ST,[C.category?(g(),_("span",TT,S(C.category),1)):B("",!0),u("span",{class:Fe(["priority-badge",(C.priority||"Normal").toLowerCase()])},S(C.priority||"Normal"),3)])]),C.content?(g(),_("div",IT,S(C.content),1)):B("",!0),u("div",AT,[u("span",ET," Created by "+S(C.createdByName||"Unknown")+"  "+S(D(C.createdAt)),1),C.matchedScope&&e.showScope?(g(),_("span",MT,S(C.matchedScope),1)):B("",!0)])],2))),128))]))]))}},al=Ze($T,[["__scopeId","data-v-bd15ca42"]]),PT={class:"checklist-preview"},DT={class:"preview-actions"},OT={class:"preview-header"},RT={key:0,class:"add-item-form"},NT=["placeholder"],BT=["disabled"],FT={key:1,class:"pending-items"},zT={class:"item-content"},UT={class:"item-header"},HT={class:"item-text"},VT={class:"item-scope"},ZT=["onClick"],jT={key:2,class:"empty-state"},qT={key:0,class:"help-text"},WT={key:3,class:"checklist-items"},GT={class:"item-content"},KT={class:"item-header"},JT={class:"item-text"},YT={class:"item-scope"},XT=["title"],QT={key:0,class:"item-context"},eI={__name:"ChecklistPreviewForLocation",props:{allChecklistItems:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=O(!1),l=O(""),c=O([...a.modelValue]);qe(()=>a.modelValue,A=>{c.value=[...A]},{deep:!0});const h=()=>{l.value.trim()&&(c.value.push({text:l.value.trim(),isNew:!0}),l.value="",r.value=!1,f())},p=A=>{c.value.splice(A,1),f()},f=()=>{s("update:modelValue",[...c.value]),s("change")},v=A=>{const b=A.scope,C=A.itemType,M=A.ids||[];return(b==="EveryoneAtCheckpoints"||b==="OnePerCheckpoint")&&C==="Checkpoint"?M.includes("ALL_CHECKPOINTS"):b==="OnePerCheckpoint"&&C==="Area"?M.includes("ALL_AREAS")?!0:M.some(x=>a.pendingAreaIds.includes(x)):(b==="EveryoneInAreas"||b==="OnePerArea"||b==="EveryAreaLead"||b==="OneLeadPerArea")&&C==="Area"?M.includes("ALL_AREAS")?!0:M.some(x=>a.pendingAreaIds.includes(x)):!1},T=se(()=>a.allChecklistItems.filter(A=>A.scopeConfigurations&&A.scopeConfigurations.length>0?A.scopeConfigurations.some(b=>v(b)):!1)),k=A=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[A]||A,w=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"Unknown";const b=A.scopeConfigurations.find(M=>v(M));if(!b)return k(A.scopeConfigurations[0].scope);const C=b.ids||[];return C.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:C.includes("ALL_AREAS")?`All ${i.value.areas}`:k(b.scope)},I=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"";const b=A.scopeConfigurations.find(M=>v(M));return b&&{EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[b.scope]||""},D=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return null;const b=A.scopeConfigurations.find(x=>v(x));if(!b)return null;const C=b.itemType,M=b.ids||[];if(M.includes("ALL_CHECKPOINTS")||M.includes("ALL_AREAS"))return null;if(C==="Area"){const x=a.areas.filter(E=>M.includes(E.id)&&a.pendingAreaIds.includes(E.id)).map(E=>E.name);if(x.length>0)return`In: ${x.join(", ")}`}return null};return(A,b)=>(g(),_("div",PT,[u("div",DT,[u("p",OT,S(e.isEditing?`Add new ${U(i).checklist} for this ${U(i).checkpoint}:`:`${U(i).checklists} that will apply at this ${U(i).checkpoint}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:b[0]||(b[0]=C=>r.value=!r.value)},S(r.value?"Cancel":`+ Add ${U(i).checklist}`),1)]),r.value?(g(),_("div",RT,[Ne(u("input",{"onUpdate:modelValue":b[1]||(b[1]=C=>l.value=C),type:"text",placeholder:`Enter ${U(i).checklist} text...`,class:"add-item-input",onKeyup:wf(h,["enter"])},null,40,NT),[[ot,l.value]]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,BT)])):B("",!0),c.value.length>0?(g(),_("div",FT,[(g(!0),_(Ce,null,De(c.value,(C,M)=>(g(),_("div",{key:`pending-${M}`,class:"checklist-item pending"},[b[3]||(b[3]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",zT,[u("div",UT,[u("div",HT,S(C.text),1),u("div",VT,[b[2]||(b[2]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:x=>p(M),title:"Remove"},"  ",8,ZT)])])])]))),128))])):B("",!0),!e.isEditing&&T.value.length===0&&c.value.length===0?(g(),_("div",jT,[u("p",null,"No "+S(U(i).checklists)+" will apply based on the current "+S(U(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(g(),_("p",qT," Assign "+S(U(i).areas)+" to see relevant "+S(U(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&T.value.length>0?(g(),_("div",WT,[(g(!0),_(Ce,null,De(T.value,C=>(g(),_("div",{key:C.id,class:"checklist-item"},[b[4]||(b[4]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",GT,[u("div",KT,[u("div",JT,S(C.text),1),u("div",YT,[u("span",{class:"scope-pill",title:I(C)},S(w(C)),9,XT)])]),D(C)?(g(),_("div",QT,S(D(C)),1)):B("",!0)])]))),128))])):B("",!0)]))}},tI=Ze(eI,[["__scopeId","data-v-b2164204"]]),nI={class:"notes-preview"},sI={class:"preview-actions"},iI={class:"preview-header"},oI={key:0,class:"add-item-form"},aI={class:"add-form-fields"},rI=["disabled"],lI={key:1,class:"pending-items"},cI={class:"note-header"},uI={class:"note-title"},dI={class:"note-actions"},hI=["onClick"],fI={key:0,class:"note-content"},pI={key:2,class:"empty-state"},mI={key:0,class:"help-text"},vI={key:3,class:"notes-list"},gI={class:"note-header"},_I={class:"note-title"},yI=["title"],bI={key:0,class:"note-content"},kI={key:1,class:"note-context"},wI={__name:"NotesPreviewForLocation",props:{allNotes:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=O(!1),l=O(""),c=O(""),h=O([...a.modelValue]);qe(()=>a.modelValue,b=>{h.value=[...b]},{deep:!0});const p=()=>{!l.value.trim()&&!c.value.trim()||(h.value.push({title:l.value.trim(),content:c.value.trim(),isNew:!0}),l.value="",c.value="",r.value=!1,v())},f=b=>{h.value.splice(b,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},T=b=>{const C=b.scope,M=b.itemType,x=b.ids||[];return C==="EveryoneAtCheckpoints"&&M==="Checkpoint"?x.includes("ALL_CHECKPOINTS"):C==="EveryoneInAreas"&&M==="Area"?x.includes("ALL_AREAS")?!0:x.some(E=>a.pendingAreaIds.includes(E)):!1},k=se(()=>a.allNotes.filter(b=>b.scopeConfigurations&&b.scopeConfigurations.length>0?b.scopeConfigurations.some(C=>T(C)):!1)),w=b=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[b]||b,I=b=>{if(!b.scopeConfigurations||b.scopeConfigurations.length===0)return"Unknown";const C=b.scopeConfigurations.find(x=>T(x));if(!C)return w(b.scopeConfigurations[0].scope);const M=C.ids||[];return M.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:M.includes("ALL_AREAS")?`All ${i.value.areas}`:w(C.scope)},D=b=>{if(!b.scopeConfigurations||b.scopeConfigurations.length===0)return"";const C=b.scopeConfigurations.find(x=>T(x));return C&&{EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[C.scope]||""},A=b=>{if(!b.scopeConfigurations||b.scopeConfigurations.length===0)return null;const C=b.scopeConfigurations.find(E=>T(E));if(!C)return null;const M=C.itemType,x=C.ids||[];if(x.includes("ALL_CHECKPOINTS")||x.includes("ALL_AREAS"))return null;if(M==="Area"){const E=a.areas.filter(P=>x.includes(P.id)&&a.pendingAreaIds.includes(P.id)).map(P=>P.name);if(E.length>0)return`In: ${E.join(", ")}`}return null};return(b,C)=>(g(),_("div",nI,[u("div",sI,[u("p",iI,S(e.isEditing?`Add new note for this ${U(i).checkpoint}:`:`Notes that will be visible at this ${U(i).checkpoint}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:C[0]||(C[0]=M=>r.value=!r.value)},S(r.value?"Cancel":"+ Add note"),1)]),r.value?(g(),_("div",oI,[u("div",aI,[Ne(u("input",{"onUpdate:modelValue":C[1]||(C[1]=M=>l.value=M),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[ot,l.value]]),Ne(u("textarea",{"onUpdate:modelValue":C[2]||(C[2]=M=>c.value=M),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[ot,c.value]])]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!c.value.trim(),onClick:p}," Add ",8,rI)])):B("",!0),h.value.length>0?(g(),_("div",lI,[(g(!0),_(Ce,null,De(h.value,(M,x)=>(g(),_("div",{key:`pending-${x}`,class:"note-item pending"},[u("div",cI,[u("span",uI,S(M.title||"Untitled"),1),u("div",dI,[C[3]||(C[3]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:E=>f(x),title:"Remove"},"  ",8,hI)])]),M.content?(g(),_("div",fI,S(M.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&k.value.length===0&&h.value.length===0?(g(),_("div",pI,[u("p",null,"No notes will apply based on the current "+S(U(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(g(),_("p",mI," Assign "+S(U(i).areas)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&k.value.length>0?(g(),_("div",vI,[(g(!0),_(Ce,null,De(k.value,M=>(g(),_("div",{key:M.id,class:"note-item"},[u("div",gI,[u("span",_I,S(M.title||"Untitled"),1),u("span",{class:"scope-pill",title:D(M)},S(I(M)),9,yI)]),M.content?(g(),_("div",bI,S(M.content),1)):B("",!0),A(M)?(g(),_("div",kI,S(A(M)),1)):B("",!0)]))),128))])):B("",!0)]))}},CI=Ze(wI,[["__scopeId","data-v-30a436c2"]]),LI={key:7,class:"tab-content appearance-tab"},xI={class:"section-description"},SI={class:"custom-footer"},TI={key:1},II={__name:"EditLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:null},assignments:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventDate:{type:String,default:""},areas:{type:Array,default:()=>[]},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]},eventDefaultStyleType:{type:String,default:"default"},eventDefaultStyleColor:{type:String,default:""},zIndex:{type:Number,default:1e3}},emits:["close","save","delete","move-location","toggle-check-in","remove-assignment","assign-marshal","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O("details"),c=O(!1),h=O(null),p=O(null),f=O([]),v=O([]),T=O([]),k=O({name:"",description:"",what3Words:"",latitude:0,longitude:0,requiredMarshals:1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:[],styleType:"default",styleColor:""}),w=se(()=>s.location&&s.location.id),I=se(()=>w.value?`Edit ${a.value.checkpoint}: ${s.location?.name||""}`:`Add ${a.value.checkpoint}`),D=se(()=>[{value:"details",label:"Details",icon:"details"},{value:"location",label:"Location",icon:"location"},{value:"marshals",label:i.value.people,icon:"marshal"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"},{value:"appearance",label:"Appearance",icon:"appearance"}]),A=se(()=>D.value.findIndex(de=>de.value===l.value)),b=se(()=>A.value===D.value.length-1),C=se(()=>{const de=k.value.areaIds||[];if(de.length>0){const K=s.areas.filter(Z=>de.includes(Z.id)&&Z.checkpointStyleType&&Z.checkpointStyleType!=="default").sort((Z,te)=>(Z.checkpointCount||0)-(te.checkpointCount||0));if(K.length>0)return{type:K[0].checkpointStyleType,color:K[0].checkpointStyleColor||""}}return{type:s.eventDefaultStyleType||"default",color:s.eventDefaultStyleColor||""}}),M=se(()=>b.value?null:D.value[A.value+1]),x=se(()=>b.value?`Create ${a.value.checkpoint}`:`Add ${M.value.label.toLowerCase()}...`);qe(()=>s.location,de=>{if(de){let K="",Z="";de.startTime&&(K=$r(de.startTime)),de.endTime&&(Z=$r(de.endTime)),k.value={name:de.name||"",description:de.description||"",what3Words:de.what3Words||"",latitude:de.latitude||0,longitude:de.longitude||0,requiredMarshals:de.requiredMarshals||1,useCustomTimes:!!(de.startTime||de.endTime),startTime:K,endTime:Z,areaIds:de.areaIds||de.AreaIds||[],styleType:de.styleType||"default",styleColor:de.styleColor||""}}},{immediate:!0,deep:!0}),qe(()=>s.show,de=>{de&&(l.value="details",c.value=!1,f.value=[],v.value=[],T.value=[],w.value||(k.value={name:s.location?.name||"",description:s.location?.description||"",what3Words:s.location?.what3Words||"",latitude:s.location?.latitude||0,longitude:s.location?.longitude||0,requiredMarshals:s.location?.requiredMarshals||1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:s.location?.areaIds||[],styleType:"default",styleColor:""}),h.value?.clearPendingChanges&&h.value.clearPendingChanges(),p.value?.resetLocalState&&p.value.resetLocalState())});const E=()=>{r("update:isDirty",!0)},P=()=>{c.value=!c.value,r("move-location",{isMoving:c.value,formData:{...k.value}})},X=de=>{f.value=de,E()},Q=()=>{w.value||b.value?le():l.value=M.value.value},le=()=>{const de={...k.value,startTime:k.value.useCustomTimes&&k.value.startTime?new Date(k.value.startTime).toISOString():null,endTime:k.value.useCustomTimes&&k.value.endTime?new Date(k.value.endTime).toISOString():null,checkInChanges:h.value?.getPendingChanges?.()||[],checklistChanges:f.value||[],pendingAssignments:s.assignments.filter(K=>K.isPending).map(K=>({marshalId:K.marshalId})),pendingNewChecklistItems:v.value,pendingNewNotes:T.value};r("save",de)},ke=()=>{s.location&&s.location.id&&r("delete",s.location.id)},me=de=>{r("remove-assignment",de)},Le=de=>{r("assign-marshal",de)},ye=()=>{r("close")},be=(de,K)=>{k.value[de]=K,E()};return(de,K)=>(g(),tt(Nt,{show:e.show,title:I.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,"z-index":e.zIndex,onClose:ye},{"tab-header":Ge(()=>[Oe(Qc,{modelValue:l.value,"onUpdate:modelValue":K[0]||(K[0]=Z=>l.value=Z),tabs:D.value},null,8,["modelValue","tabs"])]),footer:Ge(()=>[u("div",SI,[w.value?(g(),_("button",{key:0,type:"button",onClick:ke,class:"btn btn-danger"}," Delete "+S(U(a).checkpoint),1)):(g(),_("div",TI)),u("button",{type:"button",onClick:Q,class:"btn btn-primary"},S(w.value?"Save changes":x.value),1)])]),default:Ge(()=>[l.value==="details"?(g(),tt(mS,{key:0,form:k.value,areas:e.areas,"event-date":e.eventDate,"onUpdate:form":K[1]||(K[1]=Z=>k.value=Z),onInput:E,onSave:le},null,8,["form","areas","event-date"])):B("",!0),l.value==="location"?(g(),tt(TS,{key:1,form:k.value,"is-moving":c.value,"onUpdate:form":K[2]||(K[2]=Z=>k.value=Z),onInput:E,onSave:le,onMoveLocation:P},null,8,["form","is-moving"])):B("",!0),l.value==="marshals"?(g(),tt(GS,{key:2,ref_key:"assignmentsTabRef",ref:h,form:k.value,assignments:e.assignments,"available-marshals":e.availableMarshals,"onUpdate:form":K[3]||(K[3]=Z=>k.value=Z),onInput:E,onRemoveAssignment:me,onAssignMarshal:Le},null,8,["form","assignments","available-marshals"])):B("",!0),l.value==="checklists"&&w.value?(g(),tt(kp,{key:3,ref_key:"checklistTabRef",ref:p,modelValue:f.value,"onUpdate:modelValue":K[4]||(K[4]=Z=>f.value=Z),"event-id":e.eventId,"location-id":e.location.id,locations:e.allLocations,areas:e.areas,assignments:e.assignments,onChange:X},null,8,["modelValue","event-id","location-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"?(g(),tt(tI,{key:4,modelValue:v.value,"onUpdate:modelValue":K[5]||(K[5]=Z=>v.value=Z),"all-checklist-items":e.allChecklistItems,"pending-area-ids":k.value.areaIds,areas:e.areas,"is-editing":w.value,onChange:E},null,8,["modelValue","all-checklist-items","pending-area-ids","areas","is-editing"])):B("",!0),l.value==="notes"&&w.value?(g(),tt(al,{key:5,"event-id":e.eventId,"location-id":e.location?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","location-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(g(),tt(CI,{key:6,modelValue:T.value,"onUpdate:modelValue":K[6]||(K[6]=Z=>T.value=Z),"all-notes":e.notes,"pending-area-ids":k.value.areaIds,areas:e.areas,"is-editing":w.value,onChange:E},null,8,["modelValue","all-notes","pending-area-ids","areas","is-editing"])):B("",!0),l.value==="appearance"?(g(),_("div",LI,[u("p",xI," Choose a custom icon for this "+S(U(a).checkpoint)+", or leave as Default to inherit from "+S(U(a).area)+" or event settings. ",1),Oe(Xc,{"style-type":k.value.styleType||"default","style-color":k.value.styleColor||"","inherited-style-type":C.value.type,"inherited-style-color":C.value.color,"default-label":`${U(i).area} default`,"icon-label":"Icon style","color-label":"Icon colour","show-preview":!0,"onUpdate:styleType":K[7]||(K[7]=Z=>be("styleType",Z)),"onUpdate:styleColor":K[8]||(K[8]=Z=>be("styleColor",Z))},null,8,["style-type","style-color","inherited-style-type","inherited-style-color","default-label"])])):B("",!0)]),_:1},8,["show","title","is-dirty","z-index"]))}},AI=Ze(II,[["__scopeId","data-v-75565fb6"]]),EI={class:"tab-content"},MI={class:"form-group"},$I=["value"],PI={class:"form-group"},DI=["value"],OI={class:"form-group"},RI=["value"],NI={class:"form-group"},BI=["value"],FI={key:0,class:"magic-link-section"},zI={key:0,class:"loading-text"},UI={key:1,class:"magic-link-container"},HI={class:"magic-link-row"},VI=["value"],ZI={key:0,class:"magic-link-actions"},jI=["disabled"],qI={key:1,class:"success-text"},WI={key:2,class:"error-text"},GI={key:2,class:"error-text"},KI={__name:"MarshalDetailsTab",props:{form:{type:Object,required:!0},eventId:{type:String,default:null},marshalId:{type:String,default:null}},emits:["update:form","input"],setup(e,{emit:n}){const i=e,a=n,s=O(""),r=O(!1),l=O(!1),c=O(""),h=O(!1),p=O(!1),f=O(!1),v=O(""),T=(D,A)=>{a("update:form",{...i.form,[D]:A}),a("input")},k=async()=>{if(!(!i.eventId||!i.marshalId)){l.value=!0,c.value="";try{const D=await Qn.getMagicLink(i.eventId,i.marshalId);s.value=D.data.magicLink,r.value=D.data.hasEmail}catch(D){console.error("Failed to fetch magic link:",D),c.value="Failed to load login link"}finally{l.value=!1}}},w=async()=>{try{await navigator.clipboard.writeText(s.value),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(D){console.error("Failed to copy:",D)}},I=async()=>{if(!(!i.eventId||!i.marshalId)){p.value=!0,f.value=!1,v.value="";try{await Qn.sendMagicLink(i.eventId,i.marshalId),f.value=!0,setTimeout(()=>{f.value=!1},3e3)}catch(D){console.error("Failed to send email:",D),v.value=D.response?.data?.message||"Failed to send email"}finally{p.value=!1}}};return qe(()=>i.marshalId,D=>{D?k():(s.value="",r.value=!1)},{immediate:!0}),(D,A)=>(g(),_("div",EI,[u("div",MI,[A[5]||(A[5]=u("label",null,"Name *",-1)),u("input",{value:e.form.name,onInput:A[0]||(A[0]=b=>T("name",b.target.value)),type:"text",required:"",class:"form-input"},null,40,$I)]),u("div",PI,[A[6]||(A[6]=u("label",null,"Email",-1)),u("input",{value:e.form.email,onInput:A[1]||(A[1]=b=>T("email",b.target.value)),type:"email",class:"form-input"},null,40,DI)]),u("div",OI,[A[7]||(A[7]=u("label",null,"Phone number",-1)),u("input",{value:e.form.phoneNumber,onInput:A[2]||(A[2]=b=>T("phoneNumber",b.target.value)),type:"tel",class:"form-input"},null,40,RI)]),u("div",NI,[A[8]||(A[8]=u("label",null,"Notes",-1)),u("textarea",{value:e.form.notes,onInput:A[3]||(A[3]=b=>T("notes",b.target.value)),class:"form-input",rows:"3",placeholder:"e.g., Needs to leave by 11am"},null,40,BI)]),e.marshalId?(g(),_("div",FI,[A[9]||(A[9]=u("label",null,"Login Link",-1)),A[10]||(A[10]=u("p",{class:"help-text"},"Share this unique link with the marshal so they can access their dashboard.",-1)),l.value?(g(),_("div",zI,"Loading link...")):s.value?(g(),_("div",UI,[u("div",HI,[u("input",{type:"text",value:s.value,readonly:"",class:"form-input magic-link-input",onFocus:A[4]||(A[4]=b=>b.target.select())},null,40,VI),u("button",{type:"button",class:"btn btn-secondary",onClick:w},S(h.value?"Copied!":"Copy link"),1)]),r.value?(g(),_("div",ZI,[u("button",{type:"button",class:"btn btn-primary",disabled:p.value,onClick:I},S(p.value?"Sending...":"Send via email"),9,jI)])):B("",!0),f.value?(g(),_("p",qI,"Email sent successfully!")):B("",!0),v.value?(g(),_("p",WI,S(v.value),1)):B("",!0)])):c.value?(g(),_("div",GI,S(c.value),1)):B("",!0)])):B("",!0)]))}},JI=Ze(KI,[["__scopeId","data-v-3a8f4f1d"]]),YI={class:"tab-content"},XI={class:"section-title"},QI={class:"assignments-list"},eA={class:"assignment-info"},tA={class:"assignment-header"},nA=["title"],sA={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},iA={key:2,class:"pending-badge"},oA={key:3,class:"pending-badge"},aA={key:0,class:"check-in-info"},rA={class:"check-in-method"},lA={class:"assignment-actions"},cA=["onClick"],uA=["onClick"],dA={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},hA={value:""},fA=["value"],pA={__name:"MarshalCheckpointsTab",props:{assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},isNewMarshal:{type:Boolean,default:!1}},emits:["input","remove-assignment","assign-to-location"],setup(e,{expose:n,emit:i}){const{termsLower:a}=ht(),s=e,r=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:c,handleToggleCheckIn:h,getStatusIcon:p,getStatusColor:f,getStatusText:v,formatTime:T}=bp(()=>r("input")),k=O(""),w=se(()=>s.assignments?.length||0),I=se(()=>{const A=[...s.availableLocations];return A.sort((b,C)=>b.name.localeCompare(C.name,void 0,{numeric:!0,sensitivity:"base"})),A}),D=()=>{k.value&&(r("assign-to-location",k.value),k.value="")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),k.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([A,b])=>({assignmentId:A,shouldBeCheckedIn:b}))}),(A,b)=>(g(),_("div",YI,[u("h3",XI,"Assigned "+S(U(a).checkpoints)+" ("+S(w.value)+")",1),u("div",QI,[(g(!0),_(Ce,null,De(e.assignments,C=>(g(),_("div",{key:C.id,class:Fe(["assignment-item",{"checked-in":!C.isPending&&U(c)(C),"is-pending":C.isPending}])},[u("div",eA,[u("div",tA,[C.isPending?(g(),_("span",sA,"  ")):(g(),_("span",{key:0,class:"status-indicator",style:nn({color:U(f)(C)}),title:U(v)(C)},S(U(p)(C)),13,nA)),u("strong",null,S(C.locationName),1),C.isPending?(g(),_("span",iA," (will be assigned on save) ")):U(l).has(C.id)?(g(),_("span",oA," (unsaved) ")):B("",!0)]),!C.isPending&&U(c)(C)?(g(),_("span",aA,[C.isCheckedIn&&!U(l).has(C.id)?(g(),_(Ce,{key:0},[Ve(S(U(T)(C.checkInTime))+" ",1),u("span",rA,"("+S(C.checkInMethod)+")",1)],64)):(g(),_(Ce,{key:1},[Ve(" Will be checked in on save ")],64))])):B("",!0)]),u("div",lA,[C.isPending?B("",!0):(g(),_("button",{key:0,onClick:M=>U(h)(C),class:Fe(["btn btn-small",U(c)(C)?"btn-danger":"btn-secondary"])},S(U(c)(C)?"Undo":"Check in"),11,cA)),u("button",{onClick:M=>A.$emit("remove-assignment",C),class:"btn btn-small btn-danger"}," Remove ",8,uA)])],2))),128)),I.value.length>0?(g(),_("div",dA,[u("label",null,"Assign to "+S(U(a).checkpoint),1),Ne(u("select",{"onUpdate:modelValue":b[0]||(b[0]=C=>k.value=C),class:"form-input",onChange:D},[u("option",hA,"Select a "+S(U(a).checkpoint)+"...",1),(g(!0),_(Ce,null,De(I.value,C=>(g(),_("option",{key:C.id,value:C.id},S(C.name),9,fA))),128))],544),[[kn,k.value]])])):B("",!0)])]))}},mA=Ze(pA,[["__scopeId","data-v-5b6e7012"]]),vA={class:"marshal-checklist-view"},gA={key:0,class:"loading-state"},_A={key:1,class:"error-state"},yA={key:2,class:"empty-state"},bA={key:3,class:"checklist-items"},kA={class:"item-checkbox"},wA=["checked","disabled","onChange"],CA={class:"item-content"},LA={class:"item-header"},xA={class:"item-text-wrapper"},SA={class:"item-text"},TA={key:0,class:"item-context"},IA={class:"item-scope"},AA=["title"],EA={key:0,class:"completion-info"},MA={key:0,class:"pending-text"},$A={class:"completion-text"},PA={class:"completion-time"},DA={key:1,class:"uncomplete-info"},OA={key:2,class:"disabled-reason"},RA={__name:"MarshalChecklistView",props:{eventId:{type:String,required:!0},marshalId:{type:String,required:!0},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const{terms:a,termsLower:s}=ht(),r=e,l=i,c=O([]),h=O(!1),p=O(null),f=O(new Map),v=se(()=>c.value.map(x=>{const E=f.value.get(x.itemId),P=E!==void 0?E.complete:x.isCompleted,X=E!==void 0&&E.complete!==x.isCompleted;return{...x,localIsCompleted:P,isModified:X}})),T=async()=>{if(!(!r.eventId||!r.marshalId)){h.value=!0,p.value=null;try{const x=await At.getMarshalChecklist(r.eventId,r.marshalId);if(c.value=x.data||[],r.modelValue&&r.modelValue.length>0){const E=new Map;r.modelValue.forEach(P=>{E.set(P.itemId,{complete:P.complete,contextType:P.contextType,contextId:P.contextId})}),f.value=E}}catch(x){console.error("Failed to load checklist:",x),p.value=x.response?.data?.message||"Failed to load checklist"}finally{h.value=!1}}},k=x=>{const E=f.value.get(x.itemId),P=E!==void 0?E.complete:x.isCompleted;f.value.set(x.itemId,{complete:!P,contextType:x.completionContextType,contextId:x.completionContextId}),w()},w=()=>{const x=[];for(const[E,P]of f.value.entries()){const X=c.value.find(Q=>Q.itemId===E);X&&P.complete!==X.isCompleted&&x.push({itemId:E,complete:P.complete,contextType:P.contextType,contextId:P.contextId})}l("update:modelValue",x),l("change",x)};n({resetLocalState:()=>{if(f.value=new Map,r.modelValue&&r.modelValue.length>0){const x=new Map;r.modelValue.forEach(E=>{x.set(E.itemId,{complete:E.complete,contextType:E.contextType,contextId:E.contextId})}),f.value=x}},loadChecklist:T});const D=x=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:`Your ${s.value.areas}`,EveryoneAtCheckpoints:`Your ${s.value.checkpoints}`,OnePerCheckpoint:`One per ${s.value.checkpoint}`,OnePerArea:`One per ${s.value.area}`,EveryAreaLead:`${a.value.area} lead`,OneLeadPerArea:`One lead per ${s.value.area}`})[x.matchedScope]||x.matchedScope,A=x=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to this person",EveryoneInAreas:`This item is for everyone in certain ${s.value.areas}`,EveryoneAtCheckpoints:`This item is for everyone at certain ${s.value.checkpoints}`,OnePerCheckpoint:`One person at the ${s.value.checkpoint} needs to complete this`,OnePerArea:`One person in the ${s.value.area} needs to complete this`,EveryAreaLead:`This item is for ${s.value.area} leads only`,OneLeadPerArea:`One ${s.value.area} lead needs to complete this`})[x.matchedScope]||"",b=x=>x.completionContextType==="Checkpoint"||x.completionContextType==="Area"?"Already completed by someone else":"Cannot be completed",C=x=>{if(!x.completionContextType||!x.completionContextId)return null;if(x.completionContextType==="Checkpoint"){const E=r.locations.find(X=>X.id===x.completionContextId);if(!E)return null;const P=E.description?`${E.name} - ${E.description}`:E.name;return`at ${s.value.checkpoint} ${P}`}if(x.completionContextType==="Area"){const E=r.areas.find(P=>P.id===x.completionContextId);return E?`in ${s.value.area} ${E.name}`:null}return x.completionContextType==="Personal"?x.contextOwnerName?`for ${x.contextOwnerName}`:"assigned individually":null},M=x=>x?new Date(x).toLocaleString():"";return qe(()=>[r.eventId,r.marshalId],()=>{T()},{immediate:!0}),(x,E)=>(g(),_("div",vA,[h.value?(g(),_("div",gA," Loading checklist... ")):p.value?(g(),_("div",_A,[u("p",null,S(p.value),1),u("button",{onClick:T,class:"btn btn-secondary btn-small"}," Retry ")])):c.value.length===0?(g(),_("div",yA,[...E[0]||(E[0]=[u("p",null,"No checklist items for this person.",-1)])])):(g(),_("div",bA,[(g(!0),_(Ce,null,De(v.value,P=>(g(),_("div",{key:P.itemId,class:Fe(["checklist-item",{"item-completed":P.localIsCompleted,"item-modified":P.isModified}])},[u("div",kA,[u("input",{type:"checkbox",checked:P.localIsCompleted,disabled:!P.canBeCompletedByMe,onChange:X=>k(P)},null,40,wA)]),u("div",CA,[u("div",LA,[u("div",xA,[u("div",SA,S(P.text),1),C(P)?(g(),_("div",TA,S(C(P)),1)):B("",!0)]),u("div",IA,[u("span",{class:"scope-pill",title:A(P)},S(D(P)),9,AA)])]),P.localIsCompleted?(g(),_("div",EA,[P.isModified&&!P.isCompleted?(g(),_("span",MA," Will be marked as completed (pending save) ")):(g(),_(Ce,{key:1},[u("span",$A," Completed by "+S(P.completedByActorName||"Unknown"),1),u("span",PA,S(M(P.completedAt)),1)],64))])):B("",!0),P.isModified&&P.isCompleted&&!P.localIsCompleted?(g(),_("div",DA,[...E[1]||(E[1]=[u("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!P.canBeCompletedByMe&&!P.localIsCompleted?(g(),_("div",OA,S(b(P)),1)):B("",!0)])],2))),128))]))]))}},NA=Ze(RA,[["__scopeId","data-v-73be4aeb"]]),BA={class:"checklist-preview"},FA={class:"preview-actions"},zA={class:"preview-header"},UA={key:0,class:"add-item-form"},HA=["placeholder"],VA=["disabled"],ZA={key:1,class:"pending-items"},jA={class:"item-content"},qA={class:"item-header"},WA={class:"item-text"},GA={class:"item-scope"},KA=["onClick"],JA={key:2,class:"empty-state"},YA={key:0,class:"help-text"},XA={key:3,class:"checklist-items"},QA={class:"item-content"},eE={class:"item-header"},tE={class:"item-text"},nE={class:"item-scope"},sE=["title"],iE={key:0,class:"item-context"},oE={__name:"ChecklistPreview",props:{allChecklistItems:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=O(!1),l=O(""),c=O([...a.modelValue]);qe(()=>a.modelValue,b=>{c.value=[...b]},{deep:!0});const h=()=>{l.value.trim()&&(c.value.push({text:l.value.trim(),isNew:!0}),l.value="",r.value=!1,f())},p=b=>{c.value.splice(b,1),f()},f=()=>{s("update:modelValue",[...c.value]),s("change")},v=se(()=>{const b=new Set;for(const C of a.pendingLocationIds){const M=a.allLocations.find(x=>x.id===C);M&&(M.areaIds||M.AreaIds||[]).forEach(E=>b.add(E))}return[...b]}),T=b=>{const C=b.scope,M=b.itemType,x=b.ids||[];return C==="SpecificPeople"&&M==="Marshal"?x.includes("ALL_MARSHALS"):(C==="EveryoneAtCheckpoints"||C==="OnePerCheckpoint")&&M==="Checkpoint"?x.includes("ALL_CHECKPOINTS")?!0:x.some(E=>a.pendingLocationIds.includes(E)):C==="OnePerCheckpoint"&&M==="Area"?x.includes("ALL_AREAS")?!0:x.some(E=>v.value.includes(E)):(C==="EveryoneInAreas"||C==="OnePerArea"||C==="EveryAreaLead"||C==="OneLeadPerArea")&&M==="Area"?x.includes("ALL_AREAS")?!0:x.some(E=>v.value.includes(E)):!1},k=se(()=>a.allChecklistItems.filter(b=>b.scopeConfigurations&&b.scopeConfigurations.length>0?b.scopeConfigurations.some(C=>T(C)):!1)),w=b=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[b]||b,I=b=>{if(!b.scopeConfigurations||b.scopeConfigurations.length===0)return"Unknown";const C=b.scopeConfigurations.find(x=>T(x));if(!C)return w(b.scopeConfigurations[0].scope);const M=C.ids||[];return M.includes("ALL_MARSHALS")?"Everyone":M.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:M.includes("ALL_AREAS")?`All ${i.value.areas}`:w(C.scope)},D=b=>{if(!b.scopeConfigurations||b.scopeConfigurations.length===0)return"";const C=b.scopeConfigurations.find(x=>T(x));return C&&{SpecificPeople:"This item is for everyone at the event",EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[C.scope]||""},A=b=>{if(!b.scopeConfigurations||b.scopeConfigurations.length===0)return null;const C=b.scopeConfigurations.find(E=>T(E));if(!C)return null;const M=C.itemType,x=C.ids||[];if(x.includes("ALL_MARSHALS")||x.includes("ALL_CHECKPOINTS")||x.includes("ALL_AREAS"))return null;if(M==="Checkpoint"){const E=a.allLocations.filter(P=>x.includes(P.id)&&a.pendingLocationIds.includes(P.id)).map(P=>P.name);if(E.length>0)return`At: ${E.join(", ")}`}if(M==="Area"){const E=a.areas.filter(P=>x.includes(P.id)&&v.value.includes(P.id)).map(P=>P.name);if(E.length>0)return`In: ${E.join(", ")}`}return null};return(b,C)=>(g(),_("div",BA,[u("div",FA,[u("p",zA,S(e.isEditing?`Add new ${U(i).checklist} for this ${U(i).person}:`:`${U(i).checklists} that will apply to this ${U(i).person}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:C[0]||(C[0]=M=>r.value=!r.value)},S(r.value?"Cancel":`+ Add ${U(i).checklist}`),1)]),r.value?(g(),_("div",UA,[Ne(u("input",{"onUpdate:modelValue":C[1]||(C[1]=M=>l.value=M),type:"text",placeholder:`Enter ${U(i).checklist} text...`,class:"add-item-input",onKeyup:wf(h,["enter"])},null,40,HA),[[ot,l.value]]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,VA)])):B("",!0),c.value.length>0?(g(),_("div",ZA,[(g(!0),_(Ce,null,De(c.value,(M,x)=>(g(),_("div",{key:`pending-${x}`,class:"checklist-item pending"},[C[3]||(C[3]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",jA,[u("div",qA,[u("div",WA,S(M.text),1),u("div",GA,[C[2]||(C[2]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:E=>p(x),title:"Remove"},"  ",8,KA)])])])]))),128))])):B("",!0),!e.isEditing&&k.value.length===0&&c.value.length===0?(g(),_("div",JA,[u("p",null,"No "+S(U(i).checklists)+" will apply based on the current "+S(U(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(g(),_("p",YA," Assign "+S(U(i).checkpoints)+" to see relevant "+S(U(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&k.value.length>0?(g(),_("div",XA,[(g(!0),_(Ce,null,De(k.value,M=>(g(),_("div",{key:M.id,class:"checklist-item"},[C[4]||(C[4]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",QA,[u("div",eE,[u("div",tE,S(M.text),1),u("div",nE,[u("span",{class:"scope-pill",title:D(M)},S(I(M)),9,sE)])]),A(M)?(g(),_("div",iE,S(A(M)),1)):B("",!0)])]))),128))])):B("",!0)]))}},aE=Ze(oE,[["__scopeId","data-v-1c92d629"]]),rE={class:"notes-preview"},lE={class:"preview-actions"},cE={class:"preview-header"},uE={key:0,class:"add-item-form"},dE={class:"add-form-fields"},hE=["disabled"],fE={key:1,class:"pending-items"},pE={class:"note-header"},mE={class:"note-title"},vE={class:"note-actions"},gE=["onClick"],_E={key:0,class:"note-content"},yE={key:2,class:"empty-state"},bE={key:0,class:"help-text"},kE={key:3,class:"notes-list"},wE={class:"note-header"},CE={class:"note-title"},LE=["title"],xE={key:0,class:"note-content"},SE={key:1,class:"note-context"},TE={__name:"NotesPreview",props:{allNotes:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=O(!1),l=O(""),c=O(""),h=O([...a.modelValue]);qe(()=>a.modelValue,C=>{h.value=[...C]},{deep:!0});const p=()=>{!l.value.trim()&&!c.value.trim()||(h.value.push({title:l.value.trim(),content:c.value.trim(),isNew:!0}),l.value="",c.value="",r.value=!1,v())},f=C=>{h.value.splice(C,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},T=se(()=>{const C=new Set;for(const M of a.pendingLocationIds){const x=a.allLocations.find(E=>E.id===M);x&&(x.areaIds||x.AreaIds||[]).forEach(P=>C.add(P))}return[...C]}),k=C=>{const M=C.scope,x=C.itemType,E=C.ids||[];return M==="SpecificPeople"&&x==="Marshal"?E.includes("ALL_MARSHALS"):M==="EveryoneAtCheckpoints"&&x==="Checkpoint"?E.includes("ALL_CHECKPOINTS")?!0:E.some(P=>a.pendingLocationIds.includes(P)):M==="EveryoneInAreas"&&x==="Area"?E.includes("ALL_AREAS")?!0:E.some(P=>T.value.includes(P)):!1},w=se(()=>a.allNotes.filter(C=>C.scopeConfigurations&&C.scopeConfigurations.length>0?C.scopeConfigurations.some(M=>k(M)):!1)),I=C=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[C]||C,D=C=>{if(!C.scopeConfigurations||C.scopeConfigurations.length===0)return"Unknown";const M=C.scopeConfigurations.find(E=>k(E));if(!M)return I(C.scopeConfigurations[0].scope);const x=M.ids||[];return x.includes("ALL_MARSHALS")?"Everyone":x.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:x.includes("ALL_AREAS")?`All ${i.value.areas}`:I(M.scope)},A=C=>{if(!C.scopeConfigurations||C.scopeConfigurations.length===0)return"";const M=C.scopeConfigurations.find(E=>k(E));return M&&{SpecificPeople:"This note is for everyone at the event",EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[M.scope]||""},b=C=>{if(!C.scopeConfigurations||C.scopeConfigurations.length===0)return null;const M=C.scopeConfigurations.find(P=>k(P));if(!M)return null;const x=M.itemType,E=M.ids||[];if(E.includes("ALL_MARSHALS")||E.includes("ALL_CHECKPOINTS")||E.includes("ALL_AREAS"))return null;if(x==="Checkpoint"){const P=a.allLocations.filter(X=>E.includes(X.id)&&a.pendingLocationIds.includes(X.id)).map(X=>X.name);if(P.length>0)return`At: ${P.join(", ")}`}if(x==="Area"){const P=a.areas.filter(X=>E.includes(X.id)&&T.value.includes(X.id)).map(X=>X.name);if(P.length>0)return`In: ${P.join(", ")}`}return null};return(C,M)=>(g(),_("div",rE,[u("div",lE,[u("p",cE,S(e.isEditing?`Add new note for this ${U(i).person}:`:`Notes that will be visible to this ${U(i).person}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:M[0]||(M[0]=x=>r.value=!r.value)},S(r.value?"Cancel":"+ Add note"),1)]),r.value?(g(),_("div",uE,[u("div",dE,[Ne(u("input",{"onUpdate:modelValue":M[1]||(M[1]=x=>l.value=x),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[ot,l.value]]),Ne(u("textarea",{"onUpdate:modelValue":M[2]||(M[2]=x=>c.value=x),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[ot,c.value]])]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!c.value.trim(),onClick:p}," Add ",8,hE)])):B("",!0),h.value.length>0?(g(),_("div",fE,[(g(!0),_(Ce,null,De(h.value,(x,E)=>(g(),_("div",{key:`pending-${E}`,class:"note-item pending"},[u("div",pE,[u("span",mE,S(x.title||"Untitled"),1),u("div",vE,[M[3]||(M[3]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:P=>f(E),title:"Remove"},"  ",8,gE)])]),x.content?(g(),_("div",_E,S(x.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&w.value.length===0&&h.value.length===0?(g(),_("div",yE,[u("p",null,"No notes will be visible based on the current "+S(U(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(g(),_("p",bE," Assign "+S(U(i).checkpoints)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&w.value.length>0?(g(),_("div",kE,[(g(!0),_(Ce,null,De(w.value,x=>(g(),_("div",{key:x.id,class:"note-item"},[u("div",wE,[u("span",CE,S(x.title||"Untitled"),1),u("span",{class:"scope-pill",title:A(x)},S(D(x)),9,LE)]),x.content?(g(),_("div",xE,S(x.content),1)):B("",!0),b(x)?(g(),_("div",SE,S(b(x)),1)):B("",!0)]))),128))])):B("",!0)]))}},IE=Ze(TE,[["__scopeId","data-v-dc8ac5e7"]]),AE={class:"custom-footer"},EE={key:1},ME={__name:"EditMarshalModal",props:{show:{type:Boolean,default:!1},marshal:{type:Object,default:null},eventId:{type:String,required:!0},assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},eventNotes:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","toggle-check-in","remove-assignment","assign-to-location","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O("details"),c=O(null),h=O(null),p=O([]),f=O([]),v=O([]),T=O([]),k=O({name:"",email:"",phoneNumber:"",notes:""}),w=se(()=>{const be=s.isEditing?`Edit ${a.value.person}`:`Create ${a.value.person}`,de=k.value.name?.trim();return de?`${be} - ${de}`:be}),I=se(()=>[{value:"details",label:"Details",icon:"details"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),D=se(()=>I.value.findIndex(be=>be.value===l.value)),A=se(()=>D.value===I.value.length-1),b=se(()=>A.value?null:I.value[D.value+1]),C=se(()=>A.value?`Create ${a.value.person}`:`Add ${b.value.label.toLowerCase()}...`),M=se(()=>f.value.map(be=>be.locationId)),x=se(()=>s.isEditing?s.assignments:f.value.map(be=>({id:`pending-${be.locationId}`,locationId:be.locationId,locationName:s.allLocations.find(de=>de.id===be.locationId)?.name||"Unknown",isPending:!0}))),E=se(()=>{if(s.isEditing)return s.availableLocations;const be=f.value.map(de=>de.locationId);return s.allLocations.filter(de=>!be.includes(de.id))});qe(()=>s.marshal,be=>{be?k.value={name:be.name||"",email:be.email||"",phoneNumber:be.phoneNumber||"",notes:be.notes||""}:k.value={name:"",email:"",phoneNumber:"",notes:""}},{immediate:!0,deep:!0}),qe(()=>s.show,be=>{be&&(l.value="details",p.value=[],f.value=[],v.value=[],T.value=[],s.isEditing||(k.value={name:"",email:"",phoneNumber:"",notes:""}),c.value?.clearPendingChanges&&c.value.clearPendingChanges(),h.value?.resetLocalState&&h.value.resetLocalState())});const P=()=>{r("update:isDirty",!0)},X=()=>{r("update:isDirty",!0)},Q=()=>{s.isEditing||A.value?le():l.value=b.value.value},le=()=>{const be={...k.value,checkInChanges:c.value?.getPendingChanges?.()||[],checklistChanges:p.value||[],pendingAssignments:s.isEditing?[]:f.value,pendingNewChecklistItems:v.value,pendingNewNotes:T.value};r("save",be)},ke=()=>{r("delete")},me=be=>{!s.isEditing&&be.isPending?f.value=f.value.filter(de=>de.locationId!==be.locationId):r("remove-assignment",be)},Le=be=>{s.isEditing?r("assign-to-location",be):(f.value.push({locationId:be}),r("update:isDirty",!0))},ye=()=>{r("close")};return(be,de)=>(g(),tt(Nt,{show:e.show,title:w.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:ye},{"tab-header":Ge(()=>[Oe(Qc,{modelValue:l.value,"onUpdate:modelValue":de[0]||(de[0]=K=>l.value=K),tabs:I.value},null,8,["modelValue","tabs"])]),footer:Ge(()=>[u("div",AE,[e.isEditing?(g(),_("button",{key:0,type:"button",onClick:ke,class:"btn btn-danger"}," Delete "+S(U(a).person),1)):(g(),_("div",EE)),u("button",{type:"button",onClick:Q,class:"btn btn-primary"},S(e.isEditing?"Save changes":C.value),1)])]),default:Ge(()=>[l.value==="details"?(g(),tt(JI,{key:0,form:k.value,"event-id":e.eventId,"marshal-id":e.isEditing?e.marshal?.id:null,"onUpdate:form":de[1]||(de[1]=K=>k.value=K),onInput:P},null,8,["form","event-id","marshal-id"])):B("",!0),l.value==="checkpoints"?(g(),tt(mA,{key:1,ref_key:"checkpointsTabRef",ref:c,assignments:x.value,"available-locations":E.value,"is-new-marshal":!e.isEditing,onInput:P,onRemoveAssignment:me,onAssignToLocation:Le},null,8,["assignments","available-locations","is-new-marshal"])):B("",!0),l.value==="checklists"&&e.isEditing?(g(),tt(NA,{key:2,ref_key:"checklistTabRef",ref:h,modelValue:p.value,"onUpdate:modelValue":de[2]||(de[2]=K=>p.value=K),"event-id":e.eventId,"marshal-id":e.marshal.id,locations:e.allLocations,areas:e.areas,onChange:X},null,8,["modelValue","event-id","marshal-id","locations","areas"])):B("",!0),l.value==="checklists"?(g(),tt(aE,{key:3,modelValue:v.value,"onUpdate:modelValue":de[3]||(de[3]=K=>v.value=K),"all-checklist-items":e.allChecklistItems,"pending-location-ids":M.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:P},null,8,["modelValue","all-checklist-items","pending-location-ids","all-locations","areas","is-editing"])):B("",!0),l.value==="notes"&&e.isEditing?(g(),tt(al,{key:4,"event-id":e.eventId,"marshal-id":e.marshal?.id,"all-notes":e.eventNotes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","marshal-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(g(),tt(IE,{key:5,modelValue:T.value,"onUpdate:modelValue":de[4]||(de[4]=K=>T.value=K),"all-notes":e.eventNotes,"pending-location-ids":M.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:P},null,8,["modelValue","all-notes","pending-location-ids","all-locations","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},$E=Ze(ME,[["__scopeId","data-v-3cd98423"]]),PE={class:"locations-list"},DE={class:"conflict-actions"},OE={__name:"AssignmentConflictModal",props:{show:{type:Boolean,default:!1},conflictData:{type:Object,default:()=>({marshalName:"",locations:[]})}},emits:["close","choice"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=n,r=c=>{s("choice",c)},l=()=>{s("close")};return(c,h)=>(g(),tt(Nt,{show:e.show,title:`${U(i).person} already assigned`,size:"medium","z-index":1100,onClose:l},{actions:Ge(()=>[u("div",DE,[u("button",{onClick:h[0]||(h[0]=p=>r("move")),class:"btn btn-primary btn-full"}," Move to this "+S(U(a).checkpoint)+" (remove from others) ",1),u("button",{onClick:h[1]||(h[1]=p=>r("both")),class:"btn btn-secondary btn-full"}," Assign to both (keep existing assignments) "),u("button",{onClick:h[2]||(h[2]=p=>r("choose-other")),class:"btn btn-secondary btn-full"}," Choose someone else "),u("button",{onClick:h[3]||(h[3]=p=>r("cancel")),class:"btn btn-secondary btn-full"}," Cancel ")])]),default:Ge(()=>[u("p",null,[u("strong",null,S(e.conflictData.marshalName),1),h[4]||(h[4]=Ve(" is currently assigned to: ",-1))]),u("ul",PE,[(g(!0),_(Ce,null,De(e.conflictData.locations,p=>(g(),_("li",{key:p},S(p),1))),128))]),h[5]||(h[5]=u("p",null,"What would you like to do?",-1))]),_:1},8,["show","title"]))}},RE=Ze(OE,[["__scopeId","data-v-b64e5b37"]]),NE={key:0,class:"assign-marshal-section"},BE={value:""},FE=["value"],zE=["disabled"],UE={key:1,class:"assign-marshal-section create-mode"},HE={class:"form-group"},VE={class:"form-group"},ZE={class:"form-group"},jE={__name:"AssignMarshalModal",props:{show:{type:Boolean,default:!1},locationName:{type:String,default:""},marshals:{type:Array,default:()=>[]}},emits:["close","assign-existing","create-and-assign"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=O(!1),l=O(""),c=O({name:"",email:"",phoneNumber:""});qe(()=>a.show,k=>{k||(r.value=!1,l.value="",c.value={name:"",email:"",phoneNumber:""})});const h=()=>{r.value=!0},p=()=>{l.value&&s("assign-existing",l.value)},f=()=>{c.value.name&&s("create-and-assign",{...c.value})},v=()=>{r.value=!1,c.value={name:"",email:"",phoneNumber:""}},T=()=>{s("close")};return(k,w)=>(g(),tt(Nt,{show:e.show,title:r.value?`Create new ${U(i).person}`:`Assign ${U(i).person} to ${e.locationName}`,size:"medium",onClose:T},{actions:Ge(()=>[r.value?(g(),_(Ce,{key:0},[u("button",{onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{onClick:f,class:"btn btn-primary"}," Create & assign ")],64)):B("",!0)]),default:Ge(()=>[r.value?(g(),_("div",UE,[u("h3",null,"Create new "+S(U(i).person),1),u("div",HE,[w[5]||(w[5]=u("label",null,"Name *",-1)),Ne(u("input",{"onUpdate:modelValue":w[1]||(w[1]=I=>c.value.name=I),type:"text",required:"",class:"form-input"},null,512),[[ot,c.value.name]])]),u("div",VE,[w[6]||(w[6]=u("label",null,"Email",-1)),Ne(u("input",{"onUpdate:modelValue":w[2]||(w[2]=I=>c.value.email=I),type:"email",class:"form-input"},null,512),[[ot,c.value.email]])]),u("div",ZE,[w[7]||(w[7]=u("label",null,"Phone",-1)),Ne(u("input",{"onUpdate:modelValue":w[3]||(w[3]=I=>c.value.phoneNumber=I),type:"tel",class:"form-input"},null,512),[[ot,c.value.phoneNumber]])])])):(g(),_("div",NE,[u("h3",null,"Select existing "+S(U(i).person),1),Ne(u("select",{"onUpdate:modelValue":w[0]||(w[0]=I=>l.value=I),class:"form-input"},[u("option",BE,"Choose a "+S(U(i).person)+"...",1),(g(!0),_(Ce,null,De(e.marshals,I=>(g(),_("option",{key:I.id,value:I.id},[Ve(S(I.name)+" ",1),I.assignedLocationIds&&I.assignedLocationIds.length>0?(g(),_(Ce,{key:0},[Ve(" (assigned to "+S(I.assignedLocationIds.length)+" "+S(I.assignedLocationIds.length>1?U(i).checkpoints:U(i).checkpoint)+") ",1)],64)):B("",!0)],8,FE))),128))],512),[[kn,l.value]]),u("button",{onClick:p,class:"btn btn-primary btn-full",style:{"margin-top":"1rem"},disabled:!l.value}," Assign selected "+S(U(i).person),9,zE),w[4]||(w[4]=u("div",{class:"divider"},"OR",-1)),u("button",{onClick:h,class:"btn btn-secondary btn-full"}," Create new "+S(U(i).person),1)]))]),_:1},8,["show","title"]))}},qE=Ze(jE,[["__scopeId","data-v-f95e76a2"]]),WE={class:"shift-times-content"},GE={class:"info-text"},KE={class:"time-delta-info"},JE={class:"delta-detail"},YE={class:"delta-detail"},XE={class:"delta-summary"},QE={class:"affected-checkpoints"},eM={class:"option-selection"},tM={class:"radio-option"},nM={class:"radio-option"},sM={__name:"ShiftCheckpointTimesModal",props:{show:{type:Boolean,default:!1},oldEventDate:{type:String,required:!0},newEventDate:{type:String,required:!0},affectedCheckpointsCount:{type:Number,default:0}},emits:["confirm","cancel"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O("shift"),c=se(()=>{const T=new Date(s.oldEventDate);return new Date(s.newEventDate)-T}),h=T=>new Date(T).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=T=>{const k=Math.abs(T),w=T>=0?"+":"-",I=Math.floor(k/(1e3*60*60*24)),D=Math.floor(k%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(k%(1e3*60*60)/(1e3*60)),b=[];return I>0&&b.push(`${I}d`),D>0&&b.push(`${D}h`),A>0&&b.push(`${A}m`),`${w}${b.join(" ")}`},f=()=>{r("confirm",{shouldShift:l.value==="shift",timeDelta:c.value})},v=()=>{r("cancel")};return(T,k)=>(g(),tt(Nt,{show:e.show,title:`Shift ${U(i).checkpoint} Times?`,size:"medium",onClose:v},{actions:Ge(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary"},S(l.value==="shift"?"Shift Times":"Keep Times"),1)]),default:Ge(()=>[u("div",WE,[u("p",GE," You've changed the event date/time. Some "+S(U(a).checkpoints)+" have custom times set. ",1),u("div",KE,[k[2]||(k[2]=u("strong",null,"Event time change:",-1)),u("div",JE," Old: "+S(h(e.oldEventDate)),1),u("div",YE," New: "+S(h(e.newEventDate)),1),u("div",XE," Delta: "+S(p(c.value)),1)]),u("p",QE,[u("strong",null,S(e.affectedCheckpointsCount)+" "+S(e.affectedCheckpointsCount===1?U(a).checkpoint:U(a).checkpoints),1),k[3]||(k[3]=Ve(" with custom times will be shifted by the same amount. ",-1))]),u("div",eM,[u("label",tM,[Ne(u("input",{"onUpdate:modelValue":k[0]||(k[0]=w=>l.value=w),type:"radio",value:"shift",name:"shift-option"},null,512),[[hd,l.value]]),u("div",null,[u("strong",null,"Shift all "+S(U(a).checkpoint)+" times",1),k[4]||(k[4]=u("small",null,"Recommended: Maintains relative timing",-1))])]),u("label",nM,[Ne(u("input",{"onUpdate:modelValue":k[1]||(k[1]=w=>l.value=w),type:"radio",value:"keep",name:"shift-option"},null,512),[[hd,l.value]]),u("div",null,[u("strong",null,"Keep "+S(U(a).checkpoint)+" times unchanged",1),u("small",null,S(U(i).checkpoint)+" times will stay at their current values",1)])])])])]),_:1},8,["show","title"]))}},iM=Ze(sM,[["__scopeId","data-v-0e706cff"]]),oM={key:0,class:"tab-content"},aM={class:"form-group"},rM=["disabled"],lM={class:"form-group"},cM={key:1,class:"tab-content"},uM={class:"boundary-section"},dM={class:"boundary-actions"},hM={key:2,class:"tab-content"},fM={class:"section-title"},pM={class:"contacts-actions"},mM={key:0,class:"area-contacts-list"},vM=["onClick"],gM={class:"contact-info"},_M={key:0,class:"contact-role-badge"},yM={key:1,class:"contact-details"},bM={key:0},kM={key:1},wM={key:3,class:"tab-content"},CM={class:"section-title"},LM={key:0,class:"empty-state"},xM={key:1,class:"checkpoints-list"},SM=["onClick"],TM={class:"checkpoint-header"},IM={class:"checkpoint-name-section"},AM={key:0,class:"checkpoint-description"},EM={class:"checkpoint-stats"},MM={class:"checkpoint-details"},$M={class:"detail-row"},PM={class:"detail-label"},DM={class:"detail-value"},OM={key:0,class:"warning-text"},RM={class:"detail-row"},NM={class:"detail-value"},BM={key:0,class:"detail-row"},FM={key:1,class:"detail-row"},zM={key:4,class:"placeholder-message"},UM={key:6,class:"placeholder-message"},HM={key:8,class:"placeholder-message"},VM={key:9,class:"tab-content appearance-tab"},ZM={class:"accordion-item"},jM=["innerHTML"],qM={class:"accordion-arrow"},WM={key:0,class:"accordion-content"},GM={class:"section-description"},KM={class:"color-picker"},JM=["title","onClick"],YM={class:"accordion-item"},XM=["innerHTML"],QM={class:"accordion-title"},e2={class:"accordion-arrow"},t2={key:0,class:"accordion-content"},n2={class:"section-description"},s2={class:"custom-footer"},i2={key:1},o2={__name:"EditAreaModal",props:{show:{type:Boolean,default:!1},area:{type:Object,default:null},checkpoints:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]},eventDefaultStyleType:{type:String,default:"default"},eventDefaultStyleColor:{type:String,default:""}},emits:["close","save","delete","draw-boundary","update:isDirty","select-checkpoint","add-area-contact","edit-contact"],setup(e,{emit:n}){const{terms:i,termsLower:a}=ht(),s=e,r=n,l=O("details"),c=O(null),h=O([]),p=O({}),f=O({}),v=O({name:"",description:"",color:br,displayOrder:0,isDefault:!1,polygon:[],checkpointStyleType:"default",checkpointStyleColor:""}),T=O({polygonColor:!0,iconStyle:!1}),k=V=>{T.value[V]=!T.value[V]},w=se(()=>`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <polygon points="4,8 7,3 14,2 20,5 22,12 19,18 12,21 5,19 2,14" fill="${v.value.color||br}" stroke="#fff" stroke-width="1.5" opacity="0.8"/>
  </svg>`),I=se(()=>{const W=v.value.checkpointStyleType||"default",pe=v.value.checkpointStyleColor||"";if(W==="default"){if(s.eventDefaultStyleType&&s.eventDefaultStyleType!=="default"){if(ts[s.eventDefaultStyleType])return ts[s.eventDefaultStyleType](24);if(Mn[s.eventDefaultStyleType])return Mn[s.eventDefaultStyleType](s.eventDefaultStyleColor||"#667eea",24)}return`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="areaDefaultGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#10B981"/>
          <stop offset="50%" style="stop-color:#F59E0B"/>
          <stop offset="100%" style="stop-color:#EF4444"/>
        </linearGradient>
      </defs>
      <circle cx="${24/2}" cy="${24/2}" r="${24/2-2}" fill="url(#areaDefaultGrad)" stroke="#fff" stroke-width="1.5"/>
    </svg>`}if(ts[W])return ts[W](24);if(Mn[W]){const R=Jc(W,pe);return Mn[W](R,24)}return""}),D=se(()=>s.area&&s.area.id),A=se(()=>[{value:"details",label:"Details",icon:"details"},{value:"boundary",label:"Boundary",icon:"area"},{value:"contacts",label:"Contacts",icon:"marshal"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"},{value:"appearance",label:"Appearance",icon:"appearance"}]),b=se(()=>A.value.findIndex(V=>V.value===l.value)),C=se(()=>b.value===A.value.length-1),M=se(()=>C.value?null:A.value[b.value+1]),x=se(()=>C.value?`Create ${a.value.area}`:`Add ${M.value.label.toLowerCase()}...`),E=se(()=>{if(!s.area||!s.area.id)return[];const V=s.checkpoints.filter(W=>W.areaIds&&W.areaIds.includes(s.area.id)).map(W=>W.id);return s.assignments.filter(W=>V.includes(W.locationId))}),P=se(()=>!s.area||!s.area.id?[]:s.checkpoints.filter(V=>V.areaIds&&V.areaIds.includes(s.area.id))),X=se(()=>{const V=[...P.value];return V.sort((W,pe)=>{const R=W.name.match(/^(\d+)/),z=pe.name.match(/^(\d+)/);if(R&&z){const q=parseInt(R[1]),ae=parseInt(z[1]);if(q!==ae)return q-ae}return W.name.localeCompare(pe.name,void 0,{numeric:!0,sensitivity:"base"})}),V}),Q=se(()=>!s.area||!s.area.id?[]:s.contacts.filter(V=>V.scopeConfigurations?V.scopeConfigurations.some(W=>W.scope==="EveryoneInAreas"&&W.itemType==="Area"?W.ids?.includes("ALL_AREAS")?!0:W.ids?.includes(s.area.id):!1):!1)),le=V=>s.assignments.filter(W=>W.locationId===V),ke=V=>le(V.id).filter(pe=>pe.isCheckedIn).length,me=V=>{const W=le(V.id);if(W.length===0)return"status-none";const pe=W.filter(R=>R.isCheckedIn).length;return pe===0?"status-none":pe===W.length?"status-complete":"status-partial"},Le=V=>{const W=le(V.id);if(W.length===0)return`No ${a.value.people}`;const pe=W.filter(R=>R.isCheckedIn).length;return pe===0?"Not checked in":pe===W.length?"Fully checked in":`Partially checked in (${pe}/${W.length})`},ye=V=>{const W=p.value[V];return!W||W.total===0?"":W.completed===W.total?"status-complete":W.completed===0?"status-none":"status-partial"},be=V=>{const W=p.value[V];return W?W.total===0?"No tasks":W.completed===W.total?"All tasks completed":`${W.completed}/${W.total} completed`:""},de=async V=>{if(!(p.value[V]||f.value[V])){f.value[V]=!0;try{const pe=(await At.getCheckpointChecklist(s.eventId,V)).data||[];p.value[V]={total:pe.length,completed:pe.filter(R=>R.isCompleted).length}}catch(W){console.error("Failed to load checklist status for checkpoint:",V,W),p.value[V]={total:0,completed:0}}finally{f.value[V]=!1}}};qe(()=>s.area,V=>{if(V){const W=V.polygon?typeof V.polygon=="string"?JSON.parse(V.polygon):V.polygon:[];v.value={name:V.name||"",description:V.description||"",color:V.color||br,displayOrder:V.displayOrder||0,isDefault:V.isDefault||!1,polygon:W,checkpointStyleType:V.checkpointStyleType||"default",checkpointStyleColor:V.checkpointStyleColor||""}}else v.value={name:"",description:"",color:eh(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[],checkpointStyleType:"default",checkpointStyleColor:""}},{immediate:!0,deep:!0}),qe(()=>s.show,V=>{V&&(l.value="details",h.value=[],p.value={},f.value={},D.value||(v.value={name:"",description:"",color:eh(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[],checkpointStyleType:"default",checkpointStyleColor:""}),c.value?.resetLocalState&&c.value.resetLocalState())}),qe(l,V=>{V==="checkpoints"&&s.area&&s.area.id&&P.value.forEach(W=>{setTimeout(()=>de(W.id),0)})});const K=()=>{r("update:isDirty",!0)},Z=V=>{v.value.color=V,K()},te=(V,W)=>{v.value[V]=W,K()},j=()=>{r("draw-boundary",v.value)},ce=()=>{v.value.polygon=[],K()},Y=()=>{r("add-area-contact",s.area)},ve=V=>V?V.replace(/([A-Z])/g," $1").replace(/^./,W=>W.toUpperCase()).trim():"",Se=V=>{h.value=V,K()},Ee=()=>{D.value||C.value?Me():l.value=M.value.value},Me=()=>{const V=s.area?{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null,displayOrder:v.value.displayOrder,checkpointStyleType:v.value.checkpointStyleType,checkpointStyleColor:v.value.checkpointStyleColor,checklistChanges:h.value||[]}:{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null,checkpointStyleType:v.value.checkpointStyleType,checkpointStyleColor:v.value.checkpointStyleColor};r("save",V)},F=()=>{r("delete",s.area.id)},J=()=>{r("close")};return(V,W)=>(g(),tt(Nt,{show:e.show,title:e.area&&e.area.id?`Edit ${U(a).area}: ${e.area.name}`:`Create new ${U(a).area}`,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:J},{"tab-header":Ge(()=>[Oe(Qc,{modelValue:l.value,"onUpdate:modelValue":W[0]||(W[0]=pe=>l.value=pe),tabs:A.value},null,8,["modelValue","tabs"])]),footer:Ge(()=>[u("div",s2,[D.value&&!v.value.isDefault?(g(),_("button",{key:0,type:"button",onClick:F,class:"btn btn-danger"}," Delete "+S(U(a).area),1)):(g(),_("div",i2)),u("button",{type:"button",onClick:Ee,class:"btn btn-primary"},S(D.value?"Save changes":x.value),1)])]),default:Ge(()=>[l.value==="details"?(g(),_("div",oM,[u("form",{onSubmit:It(Me,["prevent"])},[u("div",aM,[W[8]||(W[8]=u("label",null,"Name *",-1)),Ne(u("input",{"onUpdate:modelValue":W[1]||(W[1]=pe=>v.value.name=pe),type:"text",required:"",class:"form-input",disabled:v.value.isDefault,onInput:K},null,40,rM),[[ot,v.value.name]])]),u("div",lM,[W[9]||(W[9]=u("label",null,"Description",-1)),Ne(u("textarea",{"onUpdate:modelValue":W[2]||(W[2]=pe=>v.value.description=pe),class:"form-input",rows:"3",onInput:K},null,544),[[ot,v.value.description]])])],32)])):B("",!0),l.value==="boundary"?(g(),_("div",cM,[u("div",uM,[W[10]||(W[10]=u("div",{class:"instructions-card"},[u("p",null,[u("strong",null,"Draw a polygon on the map to define this area's boundary")]),u("p",null,' Click "Draw on Map" to activate drawing mode. Click on the map to add vertices, and double-click to complete the polygon. ')],-1)),u("div",dM,[u("button",{onClick:j,class:"btn btn-primary btn-full"}," Draw on Map "),v.value.polygon&&v.value.polygon.length>0?(g(),_("button",{key:0,onClick:ce,class:"btn btn-danger btn-full"}," Clear Boundary ")):B("",!0)])])])):B("",!0),l.value==="contacts"?(g(),_("div",hM,[u("h3",fM,S(U(i).area)+" contacts",1),u("div",pM,[u("button",{onClick:Y,class:"btn btn-primary btn-full"}," Add contact for this "+S(U(a).area),1)]),Q.value.length>0?(g(),_("div",mM,[u("h4",null,"Contacts visible in this "+S(U(a).area)+" ("+S(Q.value.length)+")",1),(g(!0),_(Ce,null,De(Q.value,pe=>(g(),_("div",{key:pe.contactId,class:"contact-item",onClick:R=>V.$emit("edit-contact",pe)},[u("div",gM,[u("strong",null,S(pe.name),1),pe.role?(g(),_("span",_M,S(ve(pe.role)),1)):B("",!0),pe.phone||pe.email?(g(),_("div",yM,[pe.phone?(g(),_("span",bM,S(pe.phone),1)):B("",!0),pe.email?(g(),_("span",kM,S(pe.email),1)):B("",!0)])):B("",!0)])],8,vM))),128))])):B("",!0)])):B("",!0),l.value==="checkpoints"&&D.value?(g(),_("div",wM,[u("h3",CM,S(U(i).checkpoints)+" in "+S(e.area?.name)+" ("+S(P.value.length)+")",1),P.value.length===0?(g(),_("div",LM,[u("p",null,"No "+S(U(a).checkpoints)+" in this "+S(U(a).area)+" yet.",1)])):(g(),_("div",xM,[(g(!0),_(Ce,null,De(X.value,pe=>(g(),_("div",{key:pe.id,class:"checkpoint-card",onClick:R=>V.$emit("select-checkpoint",pe)},[u("div",TM,[u("div",IM,[u("h4",null,S(pe.name),1),pe.description?(g(),_("p",AM,S(pe.description),1)):B("",!0)]),u("div",EM,[u("div",{class:Fe(["stat-badge",me(pe)])},S(Le(pe)),3)])]),u("div",MM,[u("div",$M,[u("span",PM,S(U(i).people)+":",1),u("span",DM,[Ve(S(le(pe.id).length)+" / "+S(pe.requiredMarshals)+" ",1),le(pe.id).length<pe.requiredMarshals?(g(),_("span",OM," ("+S(pe.requiredMarshals-le(pe.id).length)+" needed) ",1)):B("",!0)])]),u("div",RM,[W[11]||(W[11]=u("span",{class:"detail-label"},"Checked in:",-1)),u("span",NM,S(ke(pe))+" / "+S(le(pe.id).length),1)]),p.value[pe.id]?(g(),_("div",BM,[W[12]||(W[12]=u("span",{class:"detail-label"},"Tasks:",-1)),u("span",{class:Fe(["detail-value",ye(pe.id)])},S(be(pe.id)),3)])):f.value[pe.id]?(g(),_("div",FM,[...W[13]||(W[13]=[u("span",{class:"detail-label"},"Tasks:",-1),u("span",{class:"detail-value loading-text"},"Loading...",-1)])])):B("",!0)])],8,SM))),128))]))])):B("",!0),l.value==="checkpoints"&&!D.value?(g(),_("div",zM,[u("p",null,S(U(i).checkpoints)+" will be automatically assigned based on boundaries after the "+S(U(a).area)+" is created.",1)])):B("",!0),l.value==="checklists"&&D.value?(g(),tt(kp,{key:5,ref_key:"checklistTabRef",ref:c,modelValue:h.value,"onUpdate:modelValue":W[3]||(W[3]=pe=>h.value=pe),"event-id":e.eventId,"area-id":e.area.id,locations:e.allLocations,areas:e.areas,assignments:E.value,onChange:Se},null,8,["modelValue","event-id","area-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"&&!D.value?(g(),_("div",UM,[u("p",null,S(U(i).checklists)+" can be assigned after the "+S(U(a).area)+" is created.",1)])):B("",!0),l.value==="notes"&&D.value?(g(),tt(al,{key:7,"event-id":e.eventId,"area-id":e.area?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","area-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"&&!D.value?(g(),_("div",HM,[u("p",null,"Notes can be viewed after the "+S(U(a).area)+" is created.",1)])):B("",!0),l.value==="appearance"?(g(),_("div",VM,[u("div",ZM,[u("button",{type:"button",class:Fe(["accordion-header",{expanded:T.value.polygonColor}]),onClick:W[4]||(W[4]=pe=>k("polygonColor"))},[u("div",{class:"accordion-icon",innerHTML:w.value},null,8,jM),W[14]||(W[14]=u("span",{class:"accordion-title"},"Area polygon colour",-1)),u("span",qM,S(T.value.polygonColor?"":""),1)],2),T.value.polygonColor?(g(),_("div",WM,[u("p",GM," Choose a colour for this "+S(U(a).area)+"'s boundary on the map. ",1),u("div",KM,[(g(!0),_(Ce,null,De(U(Yc),pe=>(g(),_("div",{key:pe.hex,class:Fe(["color-swatch",{selected:v.value.color===pe.hex}]),style:nn({backgroundColor:pe.hex}),title:pe.name,onClick:R=>Z(pe.hex)},null,14,JM))),128))])])):B("",!0)]),u("div",YM,[u("button",{type:"button",class:Fe(["accordion-header",{expanded:T.value.iconStyle}]),onClick:W[5]||(W[5]=pe=>k("iconStyle"))},[u("div",{class:"accordion-icon",innerHTML:I.value},null,8,XM),u("span",QM,S(U(i).checkpoint)+" icon style",1),u("span",e2,S(T.value.iconStyle?"":""),1)],2),T.value.iconStyle?(g(),_("div",t2,[u("p",n2," Set a default icon style for all "+S(U(a).checkpoints)+" in this "+S(U(a).area)+". Individual "+S(U(a).checkpoints)+" can override this setting. ",1),Oe(Xc,{"style-type":v.value.checkpointStyleType||"default","style-color":v.value.checkpointStyleColor||"","inherited-style-type":e.eventDefaultStyleType,"inherited-style-color":e.eventDefaultStyleColor,"default-label":"Event default","icon-label":"Icon style","color-label":"Icon colour","show-preview":!0,"onUpdate:styleType":W[6]||(W[6]=pe=>te("checkpointStyleType",pe)),"onUpdate:styleColor":W[7]||(W[7]=pe=>te("checkpointStyleColor",pe))},null,8,["style-type","style-color","inherited-style-type","inherited-style-color"])])):B("",!0)])])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},a2=Ze(o2,[["__scopeId","data-v-d45f6f88"]]),r2={class:"scope-configuration-editor"},l2={class:"editor-header"},c2={class:"scope-types-list"},u2=["onClick"],d2={class:"scope-type-label"},h2={class:"scope-type-pill"},f2={class:"expand-label"},p2={class:"expand-icon"},m2={class:"modal-content"},v2={class:"modal-header"},g2={class:"modal-body"},_2={class:"scope-help"},y2={key:0,class:"form-group"},b2={class:"checkbox-label special-option"},k2=["checked"],w2={key:0,class:"specific-selection"},C2=["placeholder"],L2={class:"checkbox-group scrollable"},x2=["checked","onChange"],S2={key:1,class:"form-group"},T2={class:"checkbox-label special-option"},I2=["checked"],A2={key:0,class:"specific-selection"},E2={class:"checkbox-group scrollable"},M2=["checked","onChange"],$2={key:2,class:"form-group"},P2={class:"checkbox-label special-option"},D2=["checked"],O2={key:0,class:"specific-selection"},R2=["placeholder"],N2={class:"checkbox-group scrollable"},B2=["checked","onChange"],F2={class:"checkpoint-info"},z2={class:"checkpoint-name"},U2={key:0,class:"checkpoint-description"},H2={__name:"ScopeConfigurationEditor",props:{modelValue:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},excludeScopes:{type:Array,default:()=>[]},headerText:{type:String,default:"Who can see and complete this item?"}},emits:["update:modelValue","user-changed"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=se(()=>[{scope:"SpecificPeople",label:`Specific ${i.value.people}`},{scope:"EveryoneAtCheckpoints",label:`Every ${i.value.person} at specified ${i.value.checkpoints}`},{scope:"OnePerCheckpoint",label:`One ${i.value.person} at each specified ${i.value.checkpoint}`},{scope:"OnePerArea",label:`One ${i.value.person} in specified ${i.value.areas}`},{scope:"EveryoneInAreas",label:`Everyone in specified ${i.value.areas}`},{scope:"EveryAreaLead",label:`Every ${i.value.area} lead at specified ${i.value.areas}`},{scope:"OneLeadPerArea",label:`One lead per specified ${i.value.area}`}]),l=O({SpecificPeople:{enabled:!0,ids:["ALL_MARSHALS"]},EveryoneInAreas:{enabled:!1,ids:[]},EveryoneAtCheckpoints:{enabled:!1,ids:[]},OnePerCheckpoint:{enabled:!1,ids:[]},OnePerArea:{enabled:!1,ids:[]},EveryAreaLead:{enabled:!1,ids:[]},OneLeadPerArea:{enabled:!1,ids:[]}}),c=O(null),h=O(""),p=O(""),f=O(!a.isEditing);let v=!0,T=!1;const k=se(()=>r.value.filter(F=>!a.excludeScopes.includes(F.scope))),w=se(()=>f.value?k.value:k.value.filter(F=>X(F.scope))),I=se(()=>k.value.filter(J=>X(J.scope)).length<k.value.length),D=se(()=>{const F=k.value.filter(J=>X(J.scope)).length;return k.value.length-F});qe(()=>a.modelValue,F=>{if(F){if(T){T=!1;return}v=!0,Object.keys(l.value).forEach(J=>{l.value[J]={enabled:!1,ids:[]}}),F.forEach(J=>{J.scope==="Everyone"?l.value.SpecificPeople={enabled:!0,ids:["ALL_MARSHALS"]}:J.scope==="AreaLead"?l.value.EveryAreaLead={enabled:!0,ids:[...J.ids]}:l.value[J.scope]&&(l.value[J.scope]={enabled:!0,ids:[...J.ids]})}),v=!1}},{immediate:!0});const A=()=>{const F=[];return Object.keys(l.value).forEach(J=>{const V=l.value[J];if(V.enabled){const W={scope:J,itemType:b(J),ids:[...V.ids]};F.push(W)}}),F};qe(l,()=>{if(v)return;if(Object.keys(l.value).some(V=>V!=="SpecificPeople"&&l.value[V].enabled)&&l.value.SpecificPeople?.ids.includes("ALL_MARSHALS")){const V=l.value.SpecificPeople.ids.indexOf("ALL_MARSHALS");l.value.SpecificPeople.ids.splice(V,1),l.value.SpecificPeople.ids.length===0&&(l.value.SpecificPeople.enabled=!1)}T=!0;const J=A();s("update:modelValue",J),s("user-changed")},{deep:!0});const b=F=>C(F)?"Area":M(F)?"Checkpoint":x(F)?"Marshal":null,C=F=>F==="EveryoneInAreas"||F==="OnePerArea"||F==="EveryAreaLead"||F==="OneLeadPerArea",M=F=>F==="EveryoneAtCheckpoints"||F==="OnePerCheckpoint",x=F=>F==="SpecificPeople",E=F=>{const J=r.value.find(V=>V.scope===F);return J?J.label:F},P=F=>({SpecificPeople:`Select "Everyone at the event" or choose specific ${i.value.people} who must complete this (personal completion)`,EveryoneAtCheckpoints:`Every ${i.value.person} at the selected ${i.value.checkpoints} must complete this (personal completion)`,OnePerCheckpoint:`One completion needed at each selected ${i.value.checkpoint} (shared completion)`,OnePerArea:`One completion needed in each selected ${i.value.area} (shared completion)`,EveryoneInAreas:`Every ${i.value.person} in the selected ${i.value.areas} must complete this (personal completion)`,EveryAreaLead:`Every ${i.value.area} lead at the selected ${i.value.areas} must complete this individually (personal completion)`,OneLeadPerArea:`One completion per ${i.value.area}, only ${i.value.area} leads can complete (shared among leads)`})[F]||"",X=F=>l.value[F]?.enabled||!1,Q=F=>{const J=l.value[F];if(!J||!J.enabled)return"No";const V=J.ids||[];if(C(F)){if(V.includes("ALL_AREAS"))return`All ${i.value.areas}`;const W=V.length;return W>0?`${W} ${W!==1?i.value.areas:i.value.area}`:`Select ${i.value.areas}...`}if(M(F)){if(V.includes("ALL_CHECKPOINTS"))return`All ${i.value.checkpoints}`;const W=V.length;return W>0?`${W} ${W!==1?i.value.checkpoints:i.value.checkpoint}`:`Select ${i.value.checkpoints}...`}if(x(F)){if(V.includes("ALL_MARSHALS"))return"Everyone";const W=V.length;return W>0?`${W} ${W!==1?i.value.people:i.value.person}`:`Select ${i.value.people}...`}return"Configured"},le=F=>{c.value=F,h.value="",p.value=""},ke=()=>{c.value=null},me=()=>{c.value&&(l.value[c.value]={enabled:!1,ids:[]}),ke()},Le=()=>c.value&&l.value[c.value]?.ids.includes("ALL_MARSHALS"),ye=()=>{if(!c.value)return;const F=l.value[c.value];Le()?(F.ids=[],F.enabled=!1):(F.ids=["ALL_MARSHALS"],F.enabled=!0)},be=F=>c.value&&l.value[c.value]?.ids.includes(F),de=F=>{if(!c.value)return;const J=l.value[c.value],V=J.ids.indexOf(F);V>=0?(J.ids.splice(V,1),J.ids.length===0&&(J.enabled=!1)):(J.ids.push(F),J.enabled=!0)},K=se(()=>{if(!p.value)return a.marshals;const F=p.value.toLowerCase();return a.marshals.filter(J=>J.name.toLowerCase().includes(F)||J.email&&J.email.toLowerCase().includes(F))}),Z=()=>c.value&&l.value[c.value]?.ids.includes("ALL_AREAS"),te=()=>{if(!c.value)return;const F=l.value[c.value];Z()?(F.ids=[],F.enabled=!1):(F.ids=["ALL_AREAS"],F.enabled=!0)},j=F=>c.value&&l.value[c.value]?.ids.includes(F),ce=F=>{if(!c.value)return;const J=l.value[c.value],V=J.ids.indexOf(F);V>=0?(J.ids.splice(V,1),J.ids.length===0&&(J.enabled=!1)):(J.ids.push(F),J.enabled=!0)},Y=()=>c.value&&l.value[c.value]?.ids.includes("ALL_CHECKPOINTS"),ve=()=>{if(!c.value)return;const F=l.value[c.value];Y()?(F.ids=[],F.enabled=!1):(F.ids=["ALL_CHECKPOINTS"],F.enabled=!0)},Se=F=>c.value&&l.value[c.value]?.ids.includes(F),Ee=F=>{if(!c.value)return;const J=l.value[c.value],V=J.ids.indexOf(F);V>=0?(J.ids.splice(V,1),J.ids.length===0&&(J.enabled=!1)):(J.ids.push(F),J.enabled=!0)},Me=se(()=>{let F=a.locations;if(h.value){const J=h.value.toLowerCase();F=F.filter(V=>V.name.toLowerCase().includes(J)||V.description&&V.description.toLowerCase().includes(J))}return[...F].sort((J,V)=>fn(J.name,V.name))});return(F,J)=>(g(),_("div",r2,[u("div",l2,[u("h4",null,S(e.headerText),1)]),u("div",c2,[(g(!0),_(Ce,null,De(w.value,V=>(g(),_("div",{key:V.scope,class:Fe(["scope-type-row",{active:X(V.scope)}]),onClick:W=>le(V.scope)},[u("div",d2,S(V.label),1),u("div",h2,S(Q(V.scope)),1)],10,u2))),128)),I.value?(g(),_("div",{key:0,class:"expand-row",onClick:J[0]||(J[0]=V=>f.value=!f.value)},[u("div",f2,S(f.value?"Show less":`Show ${D.value} more option${D.value!==1?"s":""}...`),1),u("div",p2,S(f.value?"":""),1)])):B("",!0)]),c.value?(g(),_("div",{key:0,class:"scope-config-modal",onClick:It(ke,["self"])},[u("div",m2,[u("div",v2,[u("h5",null,S(E(c.value)),1),u("button",{onClick:ke,class:"btn-close",type:"button"},"")]),u("div",g2,[u("p",_2,S(P(c.value)),1),x(c.value)?(g(),_("div",y2,[u("label",b2,[u("input",{type:"checkbox",checked:Le(),onChange:ye},null,40,k2),u("span",null,[J[3]||(J[3]=u("strong",null,"Everyone at the event",-1)),Ve(" (all current and future "+S(U(i).people)+")",1)])]),Le()?B("",!0):(g(),_("div",w2,[Ne(u("input",{"onUpdate:modelValue":J[1]||(J[1]=V=>p.value=V),type:"text",placeholder:`Search ${U(i).people}...`,class:"search-input"},null,8,C2),[[ot,p.value]]),u("div",L2,[(g(!0),_(Ce,null,De(K.value,V=>(g(),_("label",{key:V.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:be(V.id),onChange:W=>de(V.id)},null,40,x2),u("span",null,S(V.name),1)]))),128))])]))])):B("",!0),C(c.value)?(g(),_("div",S2,[u("label",T2,[u("input",{type:"checkbox",checked:Z(),onChange:te},null,40,I2),u("span",null,[u("strong",null,"All "+S(U(i).areas),1),Ve(" (includes future "+S(U(i).areas)+")",1)])]),Z()?B("",!0):(g(),_("div",A2,[u("div",E2,[(g(!0),_(Ce,null,De(e.areas,V=>(g(),_("label",{key:V.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:j(V.id),onChange:W=>ce(V.id)},null,40,M2),u("span",{class:"area-color-dot",style:nn({backgroundColor:V.color||"#667eea"})},null,4),u("span",null,S(V.name),1)]))),128))])]))])):B("",!0),M(c.value)?(g(),_("div",$2,[u("label",P2,[u("input",{type:"checkbox",checked:Y(),onChange:ve},null,40,D2),u("span",null,[u("strong",null,"All "+S(U(i).checkpoints),1),Ve(" (includes future "+S(U(i).checkpoints)+")",1)])]),Y()?B("",!0):(g(),_("div",O2,[Ne(u("input",{"onUpdate:modelValue":J[2]||(J[2]=V=>h.value=V),type:"text",placeholder:`Search ${U(i).checkpoints}...`,class:"search-input"},null,8,R2),[[ot,h.value]]),u("div",N2,[(g(!0),_(Ce,null,De(Me.value,V=>(g(),_("label",{key:V.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:Se(V.id),onChange:W=>Ee(V.id)},null,40,B2),u("div",F2,[u("span",z2,S(V.name),1),V.description?(g(),_("span",U2," - "+S(V.description),1)):B("",!0)])]))),128))])]))])):B("",!0)]),u("div",{class:"modal-footer"},[u("button",{onClick:me,class:"btn btn-secondary",type:"button"},"Deselect all"),u("button",{onClick:ke,class:"btn btn-primary",type:"button"},"Done")])])])):B("",!0)]))}},eu=Ze(H2,[["__scopeId","data-v-e1e2471d"]]),V2=["innerHTML"],Z2={__name:"InfoModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Information"},message:{type:String,required:!0},okText:{type:String,default:"OK"}},emits:["close"],setup(e,{emit:n}){const i=n,a=()=>{i("close")};return(s,r)=>(g(),tt(Nt,{show:e.show,title:e.title,size:"small","z-index":2e3,onClose:a},{actions:Ge(()=>[u("button",{onClick:a,class:"btn btn-primary"},S(e.okText),1)]),default:Ge(()=>[u("div",{class:"info-content",innerHTML:e.message},null,8,V2)]),_:1},8,["show","title"]))}},rl=Ze(Z2,[["__scopeId","data-v-897177d3"]]),j2={class:"tab-headers"},q2={class:"tab-content"},W2={class:"form-group"},G2=["placeholder"],K2={key:0,class:"checkbox-label-inline create-separate-items"},J2={class:"tab-content"},Y2={class:"custom-footer"},X2={__name:"EditChecklistItemModal",props:{show:{type:Boolean,default:!1},checklistItem:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O(!1),r=O(""),l=O("details"),c=O({text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0}),h=se(()=>!!i.checklistItem);qe(()=>i.show,A=>{A&&(l.value=i.initialTab,i.checklistItem?c.value={text:i.checklistItem.text||"",scopeConfigurations:i.checklistItem.scopeConfigurations?JSON.parse(JSON.stringify(i.checklistItem.scopeConfigurations)):[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:i.checklistItem.displayOrder||0,isRequired:i.checklistItem.isRequired!==!1,visibleFrom:i.checklistItem.visibleFrom?p(i.checklistItem.visibleFrom):null,visibleUntil:i.checklistItem.visibleUntil?p(i.checklistItem.visibleUntil):null,mustCompleteBy:i.checklistItem.mustCompleteBy?p(i.checklistItem.mustCompleteBy):null,createSeparateItems:!1}:c.value={text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0},a("update:isDirty",!1))});const p=A=>{if(!A)return null;const b=new Date(A),C=b.getTimezoneOffset();return new Date(b.getTime()-C*60*1e3).toISOString().slice(0,16)},f=A=>A?new Date(A).toISOString():null,v=()=>{a("update:isDirty",!0)},T=()=>{a("close")},k=()=>{l.value="visibility"},w=A=>{r.value=A,s.value=!0},I=()=>{if(!c.value.text||!c.value.text.trim()){w("Please enter checklist item text");return}if(!c.value.scopeConfigurations||c.value.scopeConfigurations.length===0){w("Please select at least one scope");return}if(!c.value.scopeConfigurations.some(C=>!(C.itemType!==null&&(!C.ids||C.ids.length===0)))){w("Please configure at least one scope with valid selections");return}const b={text:c.value.text,scopeConfigurations:c.value.scopeConfigurations,displayOrder:c.value.displayOrder||0,isRequired:c.value.isRequired,visibleFrom:f(c.value.visibleFrom),visibleUntil:f(c.value.visibleUntil),mustCompleteBy:f(c.value.mustCompleteBy)};h.value||(b.createSeparateItems=c.value.createSeparateItems),a("save",b)},D=()=>{a("delete",i.checklistItem.itemId)};return(A,b)=>(g(),_(Ce,null,[Oe(Nt,{show:e.show,title:h.value?"Edit checklist item":"Create checklist item",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:T},{footer:Ge(()=>[u("div",Y2,[h.value?(g(),_("button",{key:0,type:"button",onClick:D,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(g(),_("button",{key:1,type:"button",onClick:k,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(g(),_("button",{key:2,type:"button",onClick:I,class:"btn btn-primary"},S(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ge(()=>[u("div",j2,[u("button",{type:"button",class:Fe(["tab-header",{active:l.value==="details"}]),onClick:b[0]||(b[0]=C=>l.value="details")}," Details ",2),u("button",{type:"button",class:Fe(["tab-header",{active:l.value==="visibility"}]),onClick:b[1]||(b[1]=C=>l.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:It(I,["prevent"]),class:"checklist-form"},[Ne(u("div",q2,[u("div",W2,[b[7]||(b[7]=u("label",{for:"text"},"Checklist text: *",-1)),Ne(u("textarea",{id:"text","onUpdate:modelValue":b[2]||(b[2]=C=>c.value.text=C),onInput:v,required:"",rows:"3",placeholder:c.value.createSeparateItems?"Enter checklist items, one per line...":"Enter the checklist item text..."},null,40,G2),[[ot,c.value.text]]),h.value?B("",!0):(g(),_("label",K2,[Ne(u("input",{type:"checkbox","onUpdate:modelValue":b[3]||(b[3]=C=>c.value.createSeparateItems=C),onChange:v},null,544),[[to,c.value.createSeparateItems]]),b[6]||(b[6]=u("span",null,"Each line creates a new item",-1))]))])],512),[[ni,l.value==="details"]]),Ne(u("div",J2,[Oe(eu,{modelValue:c.value.scopeConfigurations,"onUpdate:modelValue":b[4]||(b[4]=C=>c.value.scopeConfigurations=C),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,onUserChanged:v},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[ni,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Oe(rl,{show:s.value,title:"Validation Error",message:r.value,onClose:b[5]||(b[5]=C=>s.value=!1)},null,8,["show","message"])],64))}},Q2=Ze(X2,[["__scopeId","data-v-2c532f20"]]),e$={class:"tab-headers"},t$={class:"tab-content"},n$={class:"form-group"},s$={class:"form-group"},i$={class:"form-row"},o$={class:"form-group"},a$={class:"form-group"},r$={class:"form-row"},l$={class:"form-group"},c$={class:"form-group checkbox-group-inline"},u$={class:"checkbox-label-inline"},d$={class:"tab-content"},h$={class:"custom-footer"},f$={__name:"EditNoteModal",props:{show:{type:Boolean,default:!1},note:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=O(!1),r=O(""),l=O("details"),c=O({title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1}),h=se(()=>!!i.note);qe(()=>i.show,I=>{I&&(l.value=i.initialTab,i.note?c.value={title:i.note.title||"",content:i.note.content||"",scopeConfigurations:i.note.scopeConfigurations?JSON.parse(JSON.stringify(i.note.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:i.note.displayOrder||0,priority:i.note.priority||"Normal",category:i.note.category||"",isPinned:i.note.isPinned||!1}:c.value={title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1},a("update:isDirty",!1))});const p=()=>{a("update:isDirty",!0)},f=()=>{a("close")},v=()=>{l.value="visibility"},T=I=>{r.value=I,s.value=!0},k=()=>{if(!c.value.title||!c.value.title.trim()){T("Please enter a note title");return}if(!c.value.scopeConfigurations||c.value.scopeConfigurations.length===0){T("Please select at least one visibility scope");return}if(!c.value.scopeConfigurations.some(A=>!(A.itemType!==null&&(!A.ids||A.ids.length===0)))){T("Please configure at least one scope with valid selections");return}const D={title:c.value.title.trim(),content:c.value.content||"",scopeConfigurations:c.value.scopeConfigurations,displayOrder:c.value.displayOrder||0,priority:c.value.priority||"Normal",category:c.value.category?.trim()||null,isPinned:c.value.isPinned||!1};a("save",D)},w=()=>{a("delete",i.note.noteId)};return(I,D)=>(g(),_(Ce,null,[Oe(Nt,{show:e.show,title:h.value?"Edit note":"Create note",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:f},{footer:Ge(()=>[u("div",h$,[h.value?(g(),_("button",{key:0,type:"button",onClick:w,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(g(),_("button",{key:1,type:"button",onClick:v,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(g(),_("button",{key:2,type:"button",onClick:k,class:"btn btn-primary"},S(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ge(()=>[u("div",e$,[u("button",{type:"button",class:Fe(["tab-header",{active:l.value==="details"}]),onClick:D[0]||(D[0]=A=>l.value="details")}," Details ",2),u("button",{type:"button",class:Fe(["tab-header",{active:l.value==="visibility"}]),onClick:D[1]||(D[1]=A=>l.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:It(k,["prevent"]),class:"note-form"},[Ne(u("div",t$,[u("div",n$,[D[10]||(D[10]=u("label",{for:"title"},"Title: *",-1)),Ne(u("input",{id:"title","onUpdate:modelValue":D[2]||(D[2]=A=>c.value.title=A),type:"text",onInput:p,required:"",placeholder:"Enter note title..."},null,544),[[ot,c.value.title]])]),u("div",s$,[D[11]||(D[11]=u("label",{for:"content"},"Content:",-1)),Ne(u("textarea",{id:"content","onUpdate:modelValue":D[3]||(D[3]=A=>c.value.content=A),onInput:p,rows:"6",placeholder:"Enter note content (supports markdown)..."},null,544),[[ot,c.value.content]])]),u("div",i$,[u("div",o$,[D[13]||(D[13]=u("label",{for:"priority"},"Priority:",-1)),Ne(u("select",{id:"priority","onUpdate:modelValue":D[4]||(D[4]=A=>c.value.priority=A),onChange:p},[...D[12]||(D[12]=[u("option",{value:"Urgent"},"Urgent",-1),u("option",{value:"High"},"High",-1),u("option",{value:"Normal"},"Normal",-1),u("option",{value:"Low"},"Low",-1)])],544),[[kn,c.value.priority]])]),u("div",a$,[D[14]||(D[14]=u("label",{for:"category"},"Category:",-1)),Ne(u("input",{id:"category","onUpdate:modelValue":D[5]||(D[5]=A=>c.value.category=A),type:"text",onInput:p,placeholder:"e.g., Safety, Logistics..."},null,544),[[ot,c.value.category]])])]),u("div",r$,[u("div",l$,[D[15]||(D[15]=u("label",{for:"displayOrder"},"Display order:",-1)),Ne(u("input",{id:"displayOrder","onUpdate:modelValue":D[6]||(D[6]=A=>c.value.displayOrder=A),type:"number",onInput:p,min:"0"},null,544),[[ot,c.value.displayOrder,void 0,{number:!0}]]),D[16]||(D[16]=u("span",{class:"help-text"},"Lower numbers appear first",-1))]),u("div",c$,[u("label",u$,[Ne(u("input",{type:"checkbox","onUpdate:modelValue":D[7]||(D[7]=A=>c.value.isPinned=A),onChange:p},null,544),[[to,c.value.isPinned]]),D[17]||(D[17]=u("span",null,"Pin to top",-1))]),D[18]||(D[18]=u("span",{class:"help-text"},"Pinned notes always appear at the top",-1))])])],512),[[ni,l.value==="details"]]),Ne(u("div",d$,[Oe(eu,{modelValue:c.value.scopeConfigurations,"onUpdate:modelValue":D[8]||(D[8]=A=>c.value.scopeConfigurations=A),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this note?",onUserChanged:p},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[ni,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Oe(rl,{show:s.value,title:"Validation Error",message:r.value,onClose:D[9]||(D[9]=A=>s.value=!1)},null,8,["show","message"])],64))}},p$=Ze(f$,[["__scopeId","data-v-0ffed598"]]),m$={class:"tab-headers"},v$={class:"tab-content"},g$={class:"form-group"},_$={for:"marshalId"},y$=["value"],b$={class:"help-text"},k$={class:"form-group"},w$=["disabled"],C$={class:"form-group"},L$={class:"role-input-group"},x$={key:0,label:"Built-in Roles"},S$=["value"],T$={key:1,label:"Custom Roles"},I$=["value"],A$={class:"form-row"},E$={class:"form-group"},M$={class:"form-group"},$$={class:"form-group"},P$={class:"tab-content"},D$={class:"custom-footer"},O$={__name:"EditContactModal",props:{show:{type:Boolean,default:!1},contact:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})},isDirty:{type:Boolean,default:!1},preselectedArea:{type:Object,default:null}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const{terms:i}=ht(),a=e,s=n,r=O(!1),l=O(""),c=O("details"),h=O(!1),p=O({role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}),f=se(()=>!!a.contact),v=se(()=>!!p.value.marshalId),T=se(()=>[...a.marshals].sort((x,E)=>fn(x.name,E.name)));qe(()=>a.show,x=>{if(x){if(c.value=a.initialTab,a.contact){const E=[...a.availableRoles.builtInRoles||[],...a.availableRoles.customRoles||[]];h.value=a.contact.role&&!E.includes(a.contact.role),p.value={role:a.contact.role||"",name:a.contact.name||"",phone:a.contact.phone||"",email:a.contact.email||"",notes:a.contact.notes||"",marshalId:a.contact.marshalId||null,scopeConfigurations:a.contact.scopeConfigurations?JSON.parse(JSON.stringify(a.contact.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}}else{h.value=!1;const E=a.preselectedArea?[{scope:"EveryoneInAreas",itemType:"Area",ids:[a.preselectedArea.id]}]:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}];p.value={role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:E}}s("update:isDirty",!1)}});const k=x=>x?x==="AreaLead"?`${i.value.area} Lead`:x.replace(/([A-Z])/g," $1").replace(/^./,E=>E.toUpperCase()).trim():"",w=()=>{s("update:isDirty",!0)},I=()=>{if(p.value.marshalId){const x=a.marshals.find(E=>E.id===p.value.marshalId);x&&(p.value.name=x.name,!p.value.phone&&x.phoneNumber&&(p.value.phone=x.phoneNumber),!p.value.email&&x.email&&(p.value.email=x.email))}w()},D=()=>{s("close")},A=()=>{if(!p.value.role||!p.value.role.trim()){b("Please select or enter a role");return}if(!p.value.name||!p.value.name.trim()){b("Please enter a contact name");return}c.value="visibility"},b=x=>{l.value=x,r.value=!0},C=()=>{if(!p.value.role||!p.value.role.trim()){b("Please select or enter a role");return}if(!p.value.name||!p.value.name.trim()){b("Please enter a contact name");return}if(!p.value.scopeConfigurations||p.value.scopeConfigurations.length===0){b("Please select at least one visibility scope");return}if(!p.value.scopeConfigurations.some(P=>!(P.itemType!==null&&(!P.ids||P.ids.length===0)))){b("Please configure at least one scope with valid selections");return}const E={role:p.value.role.trim(),name:p.value.name.trim(),phone:p.value.phone?.trim()||null,email:p.value.email?.trim()||null,notes:p.value.notes?.trim()||null,marshalId:p.value.marshalId||null,scopeConfigurations:p.value.scopeConfigurations};s("save",E)},M=()=>{s("delete",a.contact.contactId)};return(x,E)=>(g(),_(Ce,null,[Oe(Nt,{show:e.show,title:f.value?"Edit contact":"Create contact",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:D},{footer:Ge(()=>[u("div",D$,[f.value?(g(),_("button",{key:0,type:"button",onClick:M,class:"btn btn-danger"}," Delete ")):B("",!0),!f.value&&c.value==="details"?(g(),_("button",{key:1,type:"button",onClick:A,class:"btn btn-primary"}," Next ")):B("",!0),f.value||c.value==="visibility"?(g(),_("button",{key:2,type:"button",onClick:C,class:"btn btn-primary"},S(f.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ge(()=>[u("div",m$,[u("button",{type:"button",class:Fe(["tab-header",{active:c.value==="details"}]),onClick:E[0]||(E[0]=P=>c.value="details")}," Details ",2),u("button",{type:"button",class:Fe(["tab-header",{active:c.value==="visibility"}]),onClick:E[1]||(E[1]=P=>c.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:It(C,["prevent"]),class:"contact-form"},[Ne(u("div",v$,[u("div",g$,[u("label",_$,"Link to "+S(U(i).person.toLowerCase())+":",1),Ne(u("select",{id:"marshalId","onUpdate:modelValue":E[2]||(E[2]=P=>p.value.marshalId=P),onChange:I},[E[12]||(E[12]=u("option",{value:null},"-- Not linked --",-1)),(g(!0),_(Ce,null,De(T.value,P=>(g(),_("option",{key:P.id,value:P.id},S(P.name),9,y$))),128))],544),[[kn,p.value.marshalId]]),u("span",b$,"Optionally link to an existing "+S(U(i).person.toLowerCase())+" in the system",1)]),u("div",k$,[E[13]||(E[13]=u("label",{for:"name"},"Name: *",-1)),Ne(u("input",{id:"name","onUpdate:modelValue":E[3]||(E[3]=P=>p.value.name=P),type:"text",onInput:w,disabled:v.value,class:Fe({"input-disabled":v.value}),placeholder:"Contact name..."},null,42,w$),[[ot,p.value.name]])]),u("div",C$,[E[15]||(E[15]=u("label",{for:"role"},"Role: *",-1)),u("div",L$,[h.value?Ne((g(),_("input",{key:1,id:"customRole","onUpdate:modelValue":E[5]||(E[5]=P=>p.value.role=P),type:"text",onInput:w,placeholder:"Enter custom role name..."},null,544)),[[ot,p.value.role]]):Ne((g(),_("select",{key:0,id:"role","onUpdate:modelValue":E[4]||(E[4]=P=>p.value.role=P),onChange:w},[E[14]||(E[14]=u("option",{value:"",disabled:""},"Select a role...",-1)),e.availableRoles.builtInRoles?.length>0?(g(),_("optgroup",x$,[(g(!0),_(Ce,null,De(e.availableRoles.builtInRoles,P=>(g(),_("option",{key:P,value:P},S(k(P)),9,S$))),128))])):B("",!0),e.availableRoles.customRoles?.length>0?(g(),_("optgroup",T$,[(g(!0),_(Ce,null,De(e.availableRoles.customRoles,P=>(g(),_("option",{key:P,value:P},S(k(P)),9,I$))),128))])):B("",!0)],544)),[[kn,p.value.role]]),u("button",{type:"button",class:"toggle-custom-btn",onClick:E[6]||(E[6]=P=>h.value=!h.value)},S(h.value?"Use existing":"Custom"),1)])]),u("div",A$,[u("div",E$,[E[16]||(E[16]=u("label",{for:"phone"},"Phone:",-1)),Ne(u("input",{id:"phone","onUpdate:modelValue":E[7]||(E[7]=P=>p.value.phone=P),type:"tel",onInput:w,placeholder:"Phone number..."},null,544),[[ot,p.value.phone]])]),u("div",M$,[E[17]||(E[17]=u("label",{for:"email"},"Email:",-1)),Ne(u("input",{id:"email","onUpdate:modelValue":E[8]||(E[8]=P=>p.value.email=P),type:"email",onInput:w,placeholder:"Email address..."},null,544),[[ot,p.value.email]])])]),u("div",$$,[E[18]||(E[18]=u("label",{for:"notes"},"Notes / Instructions:",-1)),Ne(u("textarea",{id:"notes","onUpdate:modelValue":E[9]||(E[9]=P=>p.value.notes=P),onInput:w,rows:"3",placeholder:"Additional notes or instructions for when to contact..."},null,544),[[ot,p.value.notes]])])],512),[[ni,c.value==="details"]]),Ne(u("div",P$,[Oe(eu,{modelValue:p.value.scopeConfigurations,"onUpdate:modelValue":E[10]||(E[10]=P=>p.value.scopeConfigurations=P),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":f.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this contact?",onUserChanged:w},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[ni,c.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Oe(rl,{show:r.value,title:"Validation Error",message:l.value,onClose:E[11]||(E[11]=P=>r.value=!1)},null,8,["show","message"])],64))}},R$=Ze(O$,[["__scopeId","data-v-cc705819"]]),N$={key:0,class:"fullscreen-map-overlay"},B$={class:"fullscreen-map-header"},F$={class:"context-info"},z$={key:0},U$={class:"action-buttons"},H$=["disabled"],V$={class:"fullscreen-map-container"},Z$={key:0,class:"drawing-controls"},j$={class:"point-count"},q$={class:"undo-redo-buttons"},W$=["disabled"],G$=["disabled"],K$=Object.assign({inheritAttrs:!1},{__name:"FullscreenMapOverlay",props:{show:{type:Boolean,required:!0},mode:{type:String,validator:e=>["place-checkpoint","move-checkpoint","draw-area","add-multiple"].includes(e)},contextTitle:{type:String,default:""},contextDescription:{type:String,default:""},canComplete:{type:Boolean,default:!1},drawingMode:{type:Boolean,default:!1}},emits:["done","cancel","map-click","polygon-complete","polygon-drawing","location-click","area-click"],setup(e,{emit:n}){const i=e,a=n,s=O(null),r=O(0),l=O(!1),c=O(!1),h=()=>{a("done")},p=()=>{a("cancel")},f=I=>{r.value=I?.length||0,v(),a("polygon-drawing",I)},v=()=>{s.value&&(l.value=s.value.canUndo(),c.value=s.value.canRedo())},T=()=>{s.value&&(s.value.undoPolygonPoint(),v())},k=()=>{s.value&&(s.value.redoPolygonPoint(),v())};qe(()=>i.show,I=>{I||(r.value=0,l.value=!1,c.value=!1)});const w=I=>{I.key==="Escape"&&i.show&&p(),i.show&&i.drawingMode&&((I.ctrlKey||I.metaKey)&&I.key==="z"&&!I.shiftKey?(I.preventDefault(),T()):(I.ctrlKey||I.metaKey)&&(I.key==="y"||I.key==="z"&&I.shiftKey)&&(I.preventDefault(),k()))};return Ln(()=>{document.addEventListener("keydown",w)}),Ds(()=>{document.removeEventListener("keydown",w)}),(I,D)=>(g(),tt(Ym,{to:"body"},[e.show?(g(),_("div",N$,[u("div",B$,[u("div",F$,[u("h3",null,S(e.contextTitle),1),e.contextDescription?(g(),_("p",z$,S(e.contextDescription),1)):B("",!0)]),u("div",U$,[u("button",{onClick:p,class:"btn btn-cancel"}," Cancel "),u("button",{onClick:h,class:"btn btn-done",disabled:!e.canComplete}," Done ",8,H$)])]),u("div",V$,[Oe(_a,mf({ref_key:"mapViewRef",ref:s,drawingMode:e.drawingMode},I.$attrs,{onMapClick:D[0]||(D[0]=A=>I.$emit("map-click",A)),onPolygonComplete:D[1]||(D[1]=A=>I.$emit("polygon-complete",A)),onPolygonDrawing:f,onLocationClick:D[2]||(D[2]=A=>I.$emit("location-click",A)),onAreaClick:D[3]||(D[3]=A=>I.$emit("area-click",A))}),null,16,["drawingMode"]),e.drawingMode&&r.value>0?(g(),_("div",Z$,[u("div",j$,S(r.value)+" point"+S(r.value!==1?"s":""),1),u("div",q$,[u("button",{onClick:T,class:"btn-drawing undo-btn",disabled:!l.value,title:"Undo last point"},"  Undo ",8,W$),u("button",{onClick:k,class:"btn-drawing redo-btn",disabled:!c.value,title:"Redo point"}," Redo  ",8,G$)])])):B("",!0)])])):B("",!0)]))}}),J$=Ze(K$,[["__scopeId","data-v-f1e1d5c5"]]),Y$={class:"form-group"},X$={class:"form-group"},Q$={class:"form-group"},eP={key:0,class:"form-error"},tP={class:"form-row"},nP={class:"form-group",style:{flex:"1"}},sP={class:"form-group",style:{flex:"1"}},iP={class:"form-group",style:{flex:"0 0 auto"}},oP={class:"form-group"},aP={__name:"AddLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:()=>({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""})},isDirty:{type:Boolean,default:!1}},emits:["close","save","set-on-map","update:isDirty","update:location"],setup(e,{emit:n}){const{termsLower:i}=ht(),a=e,s=n,r=O({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""});qe(()=>a.location,p=>{p&&(r.value={...p})},{immediate:!0,deep:!0});const l=()=>{s("update:isDirty",!0),s("update:location",{...r.value})},c=()=>{if(!Pr(r.value.what3Words)&&r.value.what3Words){alert("Invalid What3Words format.");return}s("save",r.value)},h=()=>{s("close")};return(p,f)=>(g(),tt(Nt,{show:e.show,title:`Add ${U(i).checkpoint}`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:h},{actions:Ge(()=>[u("button",{type:"button",onClick:h,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:c,class:"btn btn-primary"}," Add "+S(U(i).checkpoint),1)]),default:Ge(()=>[u("form",{onSubmit:It(c,["prevent"])},[u("div",Y$,[f[7]||(f[7]=u("label",null,"Name",-1)),Ne(u("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>r.value.name=v),type:"text",required:"",class:"form-input",onInput:l},null,544),[[ot,r.value.name]])]),u("div",X$,[f[8]||(f[8]=u("label",null,"Description",-1)),Ne(u("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>r.value.description=v),type:"text",class:"form-input",onInput:l},null,544),[[ot,r.value.description]])]),u("div",Q$,[f[9]||(f[9]=u("label",null,"What3Words (optional)",-1)),Ne(u("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>r.value.what3Words=v),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap",onInput:l},null,544),[[ot,r.value.what3Words]]),r.value.what3Words&&!U(Pr)(r.value.what3Words)?(g(),_("small",eP," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),u("div",tP,[u("div",nP,[f[10]||(f[10]=u("label",null,"Longitude",-1)),Ne(u("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>r.value.longitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[ot,r.value.longitude,void 0,{number:!0}]])]),u("div",sP,[f[11]||(f[11]=u("label",null,"Latitude",-1)),Ne(u("input",{"onUpdate:modelValue":f[4]||(f[4]=v=>r.value.latitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[ot,r.value.latitude,void 0,{number:!0}]])]),u("div",iP,[f[12]||(f[12]=u("label",null,"",-1)),u("button",{type:"button",class:"icon-btn",title:"Set location on map",onClick:f[5]||(f[5]=v=>p.$emit("set-on-map"))},"  ")])]),u("div",oP,[u("label",null,"Required "+S(U(i).people),1),Ne(u("input",{"onUpdate:modelValue":f[6]||(f[6]=v=>r.value.requiredMarshals=v),type:"number",min:"1",required:"",class:"form-input",onInput:l},null,544),[[ot,r.value.requiredMarshals,void 0,{number:!0}]])])],32)]),_:1},8,["show","title","is-dirty"]))}},rP=Ze(aP,[["__scopeId","data-v-dcbdc216"]]),lP={class:"admin-event-manage"},cP={class:"header"},uP={class:"header-left"},dP={key:0},hP={class:"event-date"},fP={class:"header-actions"},pP={class:"container"},mP={class:"tabs-nav"},vP={class:"tab-content-wrapper"},gP={key:1,class:"tab-panel"},_P={key:2,class:"tab-panel"},yP={__name:"AdminEventManage",setup(e){const n=jc(),i=Ca(),a=up(),{activeTab:s,switchTab:r}=dp("details",["details","course","areas","checkpoints","marshals","notes","checklists","contacts","settings"]),{showConfirmModal:l,confirmModalTitle:c,confirmModalMessage:h,showConfirm:p,handleConfirmModalConfirm:f,handleConfirmModalCancel:v}=_w(),{tabLabels:T,termsLower:k}=ht(),w=se(()=>[{value:"details",label:"Event details",icon:"details"},{value:"course",label:T.value.course,icon:"course"},{value:"areas",label:T.value.areas,icon:"area"},{value:"checkpoints",label:T.value.checkpoints,icon:"checkpoint"},{value:"marshals",label:T.value.marshals,icon:"marshal"},{value:"notes",label:"Notes",icon:"notes"},{value:"checklists",label:T.value.checklists,icon:"checklist"},{value:"contacts",label:"Contacts",icon:"contacts"},{value:"settings",label:"Settings",icon:"settings"}]),I=O(null),D=O([]),A=O([]),b=O(null),C=O(!1),M=O(null),x=O(!1),E=O(!1),P=O(null),X=O(""),Q=O([]),le=O(!1),ke=O(!1),me=O(!1),Le=O(null),ye=O(!1),be=O(!1),de=O(!1),K=O(!1),Z=O(null),te=O(null),j=O(null),ce=O(!1),Y=O(!1),ve=O({id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),Se=O(!1),Ee=O(!1),Me=O({marshalName:"",locations:[],marshal:null}),F=O(null),J=O([]),V=O(!1),W=O(null),pe=O({id:"",name:"",email:"",phoneNumber:"",notes:""}),R=O(!1),z=O([]),q=O([]),ae=O([]),he=O([]),fe=O(!1),Ie=O(""),Ae=O(""),xe=O({name:"",description:"",eventDate:"",timeZoneId:"UTC",peopleTerm:"Marshals",checkpointTerm:"Checkpoints",areaTerm:"Areas",checklistTerm:"Checklists",courseTerm:"Course",defaultCheckpointStyleType:"default",defaultCheckpointStyleColor:""}),ge=O(!1),Ue=O(!1),Pe=O(""),He=O(""),Ke=O(0),Je=O({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),Qe=O([]),je=O(null),mt=O(!1),St=O(null),Lt=O(!1),gt=O(null),sn=O(!1),jt=O(1),bt=O(!1),nt=O(null),Et=O({}),kt=O(null),ss=O(null),vn=O(null),Wn=O([]),Wt=O(null),xn=O(null),Rs=O([]),ne=O(null),ue=O(!1),re=O("details"),Re=O(null),Ye=O([]),vt=O(null),Ut=O(!1),Sn=O("details"),oi=O([]),dn=O({builtInRoles:[],customRoles:[]}),ze=O(null),is=O(!1),Ns=O("details"),ai=O(null),fo=O(null),po=se(()=>fo.value?.marshalId!=null),Ia=()=>{i.push(`/event/${n.params.eventId}`)},Bs=se(()=>`${window.location.origin}/#/event/${n.params.eventId}`),mo=se(()=>{const N=[];return A.value.forEach(G=>{G.assignments&&N.push(...G.assignments)}),N}),ll=se(()=>{if(!W.value)return A.value;const N=W.value.assignedLocationIds||[],G=ae.value.map(Te=>Te.locationId),_e=he.value;return A.value.filter(Te=>!N.includes(Te.id)&&!G.includes(Te.id)||_e.includes(Te.id))}),Aa=se(()=>{let N=J.value;if(b.value){const G=b.value.assignments.map(Te=>Te.marshalName),_e=z.value.map(Te=>Te.marshalName);N=J.value.filter(Te=>!G.includes(Te.name)&&!_e.includes(Te.name))}return N.slice().sort((G,_e)=>G.name.localeCompare(_e.name))}),cl=se(()=>nt.value==="place-checkpoint"||nt.value==="move-checkpoint"?kt.value!==null:nt.value==="draw-area"?je.value?.polygon?.length>0||vn.value&&vn.value.length>=3:nt.value==="add-multiple"),ul=se(()=>{const N=[...A.value];return nt.value==="place-checkpoint"&&kt.value&&N.push({id:"temp-single",name:Je.value.name||"New Checkpoint",latitude:kt.value.lat,longitude:kt.value.lng,requiredMarshals:Je.value.requiredMarshals||1,assignments:[],isTemporary:!0}),nt.value==="move-checkpoint"&&kt.value&&b.value&&N.push({id:"temp-move",name:b.value.name+" (new position)",latitude:kt.value.lat,longitude:kt.value.lng,requiredMarshals:b.value.requiredMarshals,assignments:[],isTemporary:!0}),nt.value==="add-multiple"&&N.push(...Wn.value),N}),Ea=se(()=>{const N=[...Qe.value];if(nt.value==="draw-area"&&je.value?.polygon?.length>0){const G=N.findIndex(_e=>_e.id===je.value.id);G>=0?N[G]={...je.value}:N.push({...je.value,id:je.value.id||"temp-area"})}return N}),dl=()=>{i.push("/admin/dashboard")},Ai=()=>{i.push({name:"AdminProfile"})},Ot=(N=!0)=>{R.value=N},Ma=()=>{ge.value=!0},$a=async N=>{try{N&&(xe.value={...N});const G=I.value.eventDate,_e=xe.value.eventDate;if(G!==_e){const Te=D.value.filter(rt=>rt.startTime||rt.endTime);if(Te.length>0){Pe.value=G,He.value=_e,Ke.value=Te.length,Ue.value=!0;return}}await Pa(!1,null)}catch(G){console.error("Failed to update event:",G),alert("Failed to update event. Please try again.")}},Pa=async(N,G)=>{try{if(await a.updateEvent(n.params.eventId,{...xe.value}),N&&G!==null){const _e=Math.floor(Math.abs(G)/1e3),Te=G<0,rt=Math.floor(_e/3600),Kt=Math.floor(_e%3600/60),_n=_e%60,ps=`${Te?"-":""}${rt.toString().padStart(2,"0")}:${Kt.toString().padStart(2,"0")}:${_n.toString().padStart(2,"0")}`;await a.bulkUpdateLocationTimes(n.params.eventId,ps)}await Gt(),ge.value=!1}catch(_e){console.error("Failed to update event:",_e),alert("Failed to update event. Please try again.")}},hl=async({shouldShift:N,timeDelta:G})=>{Ue.value=!1,await Pa(N,G)},vo=()=>{Ue.value=!1,Gt()},Gt=async()=>{try{await a.fetchEvent(n.params.eventId),I.value=a.currentEvent,I.value&&(xe.value={name:I.value.name||"",description:I.value.description||"",eventDate:$r(I.value.eventDate),timeZoneId:I.value.timeZoneId||"UTC",peopleTerm:I.value.peopleTerm||"Marshals",checkpointTerm:I.value.checkpointTerm||"Checkpoints",areaTerm:I.value.areaTerm||"Areas",checklistTerm:I.value.checklistTerm||"Checklists",courseTerm:I.value.courseTerm||"Course",defaultCheckpointStyleType:I.value.defaultCheckpointStyleType||"default",defaultCheckpointStyleColor:I.value.defaultCheckpointStyleColor||""},ge.value=!1,kc(I.value));const N=await Promise.allSettled([a.fetchLocations(n.params.eventId),a.fetchEventStatus(n.params.eventId),Oi(),Ei(),ri(),os(),ct(),wt()]);D.value=a.locations,A.value=a.eventStatus.locations,N.forEach((G,_e)=>{G.status==="rejected"&&console.error(`Failed to load ${["locations","eventStatus","admins","marshals","areas","checklists","notes","contacts"][_e]}:`,G.reason)})}catch(N){console.error("Failed to load event data:",N)}},Ei=async()=>{try{const N=await Qn.getByEvent(n.params.eventId);J.value=N.data}catch(N){console.error("Failed to load marshals:",N)}},ri=async()=>{try{const N=await Ys.getByEvent(n.params.eventId);Qe.value=N.data}catch(N){console.error("Failed to load areas:",N)}},os=async()=>{try{const[N,G]=await Promise.all([At.getByEvent(n.params.eventId),At.getReport(n.params.eventId)]);Rs.value=N.data,Re.value=G.data}catch(N){console.error("Failed to load checklists:",N)}},ct=async()=>{try{const N=await Ls.getByEvent(n.params.eventId);Ye.value=N.data}catch(N){console.error("Failed to load notes:",N)}},wt=async()=>{try{const[N,G]=await Promise.all([Ki.getByEvent(n.params.eventId),Ki.getRoles(n.params.eventId)]);oi.value=N.data,dn.value=G.data}catch(N){console.error("Failed to load contacts:",N)}},Mi=async()=>{await Promise.all([a.fetchLocations(n.params.eventId),a.fetchEventStatus(n.params.eventId)]),D.value=a.locations,A.value=a.eventStatus.locations},as=async()=>{await Promise.all([Ei(),a.fetchEventStatus(n.params.eventId)]),A.value=a.eventStatus.locations},rs=async()=>{await Promise.all([a.fetchLocations(n.params.eventId),a.fetchEventStatus(n.params.eventId),ri()]),D.value=a.locations,A.value=a.eventStatus.locations},go=async()=>{await a.fetchEventStatus(n.params.eventId),A.value=a.eventStatus.locations},it=()=>{je.value=null,R.value=!1,mt.value=!0},Tt=N=>{je.value=N,St.value=N.id,R.value=!1,mt.value=!0},_o=async N=>{try{if(je.value&&je.value.id){if(await Ys.update(n.params.eventId,je.value.id,N),N.checklistChanges&&N.checklistChanges.length>0)for(const G of N.checklistChanges)try{G.complete?await At.complete(n.params.eventId,G.itemId,{marshalId:G.marshalId,contextType:G.contextType,contextId:G.contextId}):await At.uncomplete(n.params.eventId,G.itemId,{marshalId:G.marshalId,contextType:G.contextType,contextId:G.contextId})}catch(_e){console.error("Failed to update checklist item:",G,_e)}}else await Ys.create({eventId:n.params.eventId,...N});await ri(),await Gt(),Ht()}catch(G){console.error("Failed to save area:",G),alert(G.response?.data?.message||"Failed to save area. Please try again.")}},$i=async N=>{p("Delete Area","Are you sure you want to delete this area? Checkpoints will be automatically reassigned.",async()=>{try{await Ys.delete(n.params.eventId,N),await Ys.recalculate(n.params.eventId),await ri(),await Gt(),Ht()}catch(G){console.error("Failed to delete area:",G),alert(G.response?.data?.message||"Failed to delete area. Please try again.")}})},Ht=()=>{mt.value=!1,je.value=null,St.value=null,R.value=!1,Lt.value=!1,gt.value=null},fl=N=>{Ht(),ze.value=null,Ns.value="details",R.value=!1,ai.value=N,is.value=!0},Pi=N=>{Ht(),ze.value=N,Ns.value="details",R.value=!1,is.value=!0},ls=()=>{ne.value=null,re.value="details",R.value=!1,ue.value=!0},Mt=(N,G="details")=>{ne.value=N,re.value=G,R.value=!1,ue.value=!0},cs=async N=>{try{if(ne.value&&ne.value.itemId)await At.update(n.params.eventId,ne.value.itemId,N);else{const G=await At.create(n.params.eventId,N);G.data.count&&G.data.count>1&&(Ie.value="Checklist Items Created",Ae.value=`Successfully created ${G.data.count} checklist items.`,fe.value=!0)}await os(),us()}catch(G){console.error("Failed to save checklist item:",G);const _e=G.response?.data?.message||"Failed to save checklist item. Please try again.";alert(_e)}},li=async N=>{p("Delete Checklist Item","Are you sure you want to delete this checklist item?",async()=>{try{await At.delete(n.params.eventId,N),await os(),us()}catch(G){console.error("Failed to delete checklist item:",G),alert(G.response?.data?.message||"Failed to delete checklist item. Please try again.")}})},us=()=>{ue.value=!1,ne.value=null,R.value=!1},yo=()=>{vt.value=null,Sn.value="details",R.value=!1,Ut.value=!0},ci=N=>{vt.value=N,Sn.value="details",R.value=!1,Ut.value=!0},bo=async N=>{try{vt.value&&vt.value.noteId?await Ls.update(n.params.eventId,vt.value.noteId,N):await Ls.create(n.params.eventId,N),await ct(),Fs()}catch(G){console.error("Failed to save note:",G);const _e=G.response?.data?.message||"Failed to save note. Please try again.";alert(_e)}},ko=async N=>{p("Delete Note","Are you sure you want to delete this note?",async()=>{try{await Ls.delete(n.params.eventId,N),await ct(),Fs()}catch(G){console.error("Failed to delete note:",G),alert(G.response?.data?.message||"Failed to delete note. Please try again.")}})},Fs=()=>{Ut.value=!1,vt.value=null,R.value=!1},wo=()=>{ze.value=null,Ns.value="details",ai.value=null,R.value=!1,is.value=!0},Co=N=>{ze.value=N,Ns.value="details",R.value=!1,is.value=!0},Di=async N=>{try{ze.value&&ze.value.contactId?await Ki.update(n.params.eventId,ze.value.contactId,N):await Ki.create(n.params.eventId,N),await wt(),ui()}catch(G){console.error("Failed to save contact:",G);const _e=G.response?.data?.message||"Failed to save contact. Please try again.";alert(_e)}},Da=async N=>{p("Delete Contact","Are you sure you want to delete this contact?",async()=>{try{await Ki.delete(n.params.eventId,N),await wt(),ui()}catch(G){console.error("Failed to delete contact:",G),alert(G.response?.data?.message||"Failed to delete contact. Please try again.")}})},ui=()=>{is.value=!1,ze.value=null,ai.value=null,R.value=!1},pl=N=>{if(gt.value=N,mt.value=!1,M.value){const G=M.value.getMapCenter(),_e=M.value.getMapZoom();G&&_e!==null&&(Wt.value=G,xn.value=_e)}bt.value=!0,nt.value="draw-area",Lt.value=!0,Et.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},et=N=>{gt.value?je.value={...je.value||{},...gt.value,polygon:N}:je.value={...je.value,polygon:N}},Tn=N=>{vn.value=N},_t=()=>{Lt.value=!1,gt.value&&(je.value=gt.value,mt.value=!0,gt.value=null)},Oi=async()=>{try{const N=await Kl.getAdmins(n.params.eventId);Q.value=N.data}catch(N){console.error("Failed to load event admins:",N)}},Lo=async N=>{try{await Kl.addAdmin(n.params.eventId,N),await Oi(),Ri()}catch(G){console.error("Failed to add admin:",G),alert(G.response?.data?.message||"Failed to add administrator. Please try again.")}},xo=async N=>{p("Remove Administrator",`Remove ${N} as an administrator?`,async()=>{try{await Kl.removeAdmin(n.params.eventId,N),await Oi()}catch(G){console.error("Failed to remove admin:",G),alert(G.response?.data?.message||"Failed to remove administrator. Please try again.")}})},Ri=()=>{le.value=!1,R.value=!1},ds=async N=>{if(!N){Le.value="Please select a GPX file";return}me.value=!0,Le.value=null;try{await yi.uploadGpx(n.params.eventId,N),await Mi(),Ni()}catch(G){console.error("Failed to upload route:",G),Le.value=G.response?.data?.message||"Failed to upload route. Please try again."}finally{me.value=!1}},Ni=()=>{ke.value=!1,Le.value=null},di=async({file:N,deleteExisting:G})=>{if(!N){Z.value="Please select a CSV file";return}de.value=!0,Z.value=null,te.value=null;try{const _e=await Js.importCsv(n.params.eventId,N,G);te.value=_e.data,await rs(),Bt();const Te=_e.data;let rt=`<p>Created <strong>${Te.locationsCreated}</strong> location(s) and <strong>${Te.assignmentsCreated}</strong> assignment(s)</p>`;Te.errors&&Te.errors.length>0&&(rt+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',Te.errors.forEach(Kt=>{rt+=`<li>${Kt}</li>`}),rt+="</ul>"),Ie.value="Import Complete",Ae.value=rt,fe.value=!0}catch(_e){console.error("Failed to import locations:",_e),Z.value=_e.response?.data?.message||"Failed to import locations. Please try again."}finally{de.value=!1}},Bt=()=>{ye.value=!1,Z.value=null,te.value=null},hs=async N=>{if(C.value)Je.value.latitude=N.lat,Je.value.longitude=N.lng;else if(Y.value)ve.value.latitude=N.lat,ve.value.longitude=N.lng,b.value&&(b.value={...b.value,latitude:N.lat,longitude:N.lng}),Y.value=!1,ce.value=!0,Ot();else if(sn.value)try{await a.createLocation({eventId:n.params.eventId,name:`Checkpoint ${jt.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""}),jt.value++,await Gt()}catch(G){console.error("Failed to create checkpoint:",G),alert("Failed to create checkpoint. Please try again.")}},Oa=N=>{nt.value==="place-checkpoint"||nt.value==="move-checkpoint"?kt.value=N:nt.value==="add-multiple"&&ut(N)},Ra=N=>{Je.value={...N}},ml=()=>{C.value=!1,kt.value=null,bt.value=!0,nt.value="place-checkpoint",Et.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},Na=()=>{if(M.value){const N=M.value.getMapCenter(),G=M.value.getMapZoom();N&&G!==null&&(Wt.value=N,xn.value=G)}Je.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},kt.value=null,bt.value=!0,nt.value="place-checkpoint",Et.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},So=()=>{if(M.value){const N=M.value.getMapCenter(),G=M.value.getMapZoom();N&&G!==null&&(Wt.value=N,xn.value=G)}je.value={id:null,name:"",description:"",color:"#667eea",polygon:[],checkpointIds:[],marshalIds:[],displayOrder:Qe.value.length},bt.value=!0,nt.value="draw-area",Lt.value=!0,Et.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},vl=()=>{b.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},ve.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},z.value=[],q.value=[],R.value=!1,ce.value=!0},Ba=()=>{const N=A.value.map(G=>{const _e=G.name.match(/^Checkpoint (\d+)$/);return _e?parseInt(_e[1]):0}).filter(G=>G>0);if(jt.value=N.length>0?Math.max(...N)+1:1,M.value){const G=M.value.getMapCenter(),_e=M.value.getMapZoom();G&&_e!==null&&(Wt.value=G,xn.value=_e)}bt.value=!0,nt.value="add-multiple",sn.value=!0,Et.value={title:"Add multiple checkpoints",description:`Click on map to add checkpoints. Next: Checkpoint ${jt.value}`}},ut=N=>{Wn.value.push({id:`temp-${jt.value}`,name:`Checkpoint ${jt.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",assignments:[],isTemporary:!0}),jt.value++,Et.value={...Et.value,description:`Click on map to add checkpoints. Next: Checkpoint ${jt.value}`}},gl=()=>{if(nt.value==="place-checkpoint"){const N=kt.value||{lat:0,lng:0};b.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},ve.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""},z.value=[],q.value=[],R.value=!1,zs(),ce.value=!0}else if(nt.value==="move-checkpoint")kt.value&&(ve.value.latitude=kt.value.lat,ve.value.longitude=kt.value.lng,b.value&&(b.value={...b.value,...ss.value||{},latitude:kt.value.lat,longitude:kt.value.lng}),Ot()),ss.value=null,zs(),ce.value=!0;else if(nt.value==="draw-area"){if(vn.value&&vn.value.length>=3){const N=vn.value.map(G=>({lat:G.lat,lng:G.lng}));gt.value?je.value={...je.value||{},...gt.value,polygon:N}:je.value={...je.value||{},polygon:N}}Lt.value=!1,zs(),mt.value=!0,gt.value=null,vn.value=null}else nt.value==="add-multiple"&&gn()},gn=async()=>{const N=[...Wn.value];try{for(const G of N)await a.createLocation({eventId:n.params.eventId,name:G.name,description:G.description,latitude:G.latitude,longitude:G.longitude,requiredMarshals:G.requiredMarshals,what3Words:G.what3Words});Wn.value=[],sn.value=!1,zs(),await Gt()}catch(G){console.error("Failed to create checkpoints:",G),alert("Failed to create checkpoints. Please try again.")}},hi=()=>{nt.value==="draw-area"?(gt.value&&(je.value=gt.value,mt.value=!0,gt.value=null),Lt.value=!1,vn.value=null):nt.value==="add-multiple"&&(Wn.value=[],sn.value=!1),zs()},zs=()=>{bt.value=!1,nt.value=null,Et.value={},kt.value=null,Wt.value=null,xn.value=null,Lt.value&&(Lt.value=!1)},_l=N=>{Us(N)},Us=N=>{b.value=N,ve.value={id:N.id,name:N.name,description:N.description||"",latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||""},z.value=[],q.value=[],R.value=!1,ce.value=!0,setTimeout(()=>{M.value?.scrollMapIntoView()},100)},yl=async N=>{if(!Pr(N.what3Words)){alert("Invalid What3Words format. Please use word.word.word or word/word/word (lowercase letters only, 1-20 characters each)");return}try{await a.createLocation({eventId:n.params.eventId,...N}),await Gt(),To()}catch(G){console.error("Failed to save location:",G),alert("Failed to save location. Please try again.")}},To=()=>{C.value=!1,Je.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},R.value=!1,R.value=!1},Io=()=>{ce.value=!1,b.value=null,Y.value=!1,Se.value=!1,ss.value=null,ve.value={id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},z.value=[],q.value=[],R.value=!1},Ao=()=>{Se.value=!1},Eo=N=>{if(N?.formData&&(ss.value=N.formData),ce.value=!1,kt.value=null,M.value){const _e=M.value.getMapCenter(),Te=M.value.getMapZoom();_e&&Te!==null&&(Wt.value=_e,xn.value=Te)}const G=ss.value?.name||b.value?.name;bt.value=!0,nt.value="move-checkpoint",Et.value={title:`Move ${k.value.checkpoint}: ${G}`,description:"Click on the map to set the new location"}},bl=async N=>{if(!Pr(N.what3Words)){alert("Invalid What3Words format.");return}try{const G=!b.value.id;if(G){const _e=await a.createLocation({eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime,styleType:N.styleType,styleColor:N.styleColor,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const Te of N.pendingAssignments)await a.createAssignment({eventId:n.params.eventId,locationId:_e.id,marshalId:Te.marshalId})}else{const _e=b.value.id;if(await Js.update(n.params.eventId,_e,{eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime,styleType:N.styleType,styleColor:N.styleColor}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const Te of N.pendingNewChecklistItems)Te.text?.trim()&&await At.create(n.params.eventId,{text:Te.text,scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[_e]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const Te of N.pendingNewNotes)!Te.title?.trim()&&!Te.content?.trim()||await Ls.create(n.params.eventId,{title:Te.title||"Untitled",content:Te.content||"",scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[_e]}],displayOrder:0,priority:"Normal",isPinned:!1});for(const Te of q.value)await a.deleteAssignment(n.params.eventId,Te);for(const Te of z.value)await a.createAssignment({eventId:n.params.eventId,locationId:b.value.id,marshalId:Te.marshalId});if(N.checkInChanges&&N.checkInChanges.length>0)for(const Te of N.checkInChanges){const rt=b.value.assignments.find(Kt=>Kt.id===Te.assignmentId);rt&&rt.isCheckedIn!==Te.shouldBeCheckedIn&&await Is.adminCheckIn(n.params.eventId,Te.assignmentId)}}if(!G&&N.checklistChanges&&N.checklistChanges.length>0)for(const _e of N.checklistChanges)try{_e.complete?await At.complete(n.params.eventId,_e.itemId,{marshalId:_e.marshalId,contextType:_e.contextType,contextId:_e.contextId}):await At.uncomplete(n.params.eventId,_e.itemId,{marshalId:_e.marshalId,contextType:_e.contextType,contextId:_e.contextId})}catch(Te){console.error("Failed to update checklist item:",_e,Te)}await Gt(),Io()}catch(G){console.error("Failed to update location:",G),alert("Failed to update location. Please try again.")}},In=async N=>{p("Delete Location","Are you sure you want to delete this location?",async()=>{try{await Js.delete(n.params.eventId,N),await rs(),Io()}catch(G){console.error("Failed to delete location:",G),alert("Failed to delete location. Please try again.")}})},kl=N=>{if(N.toString().startsWith("temp-")){const G=b.value.assignments.find(_e=>_e.id===N);G&&(z.value=z.value.filter(_e=>_e.marshalId!==G.marshalId)),b.value.assignments=b.value.assignments.filter(_e=>_e.id!==N),Ot()}else q.value.includes(N)||(q.value.push(N),b.value.assignments=b.value.assignments.filter(G=>G.id!==N),Ot())},Fa=async N=>{await On(N)},On=async N=>{const G=J.value.find(Te=>Te.id===N);if(!G)return;const _e=A.value.filter(Te=>Te.assignments?.some(rt=>rt.marshalId===N&&Te.id!==b.value.id));if(_e.length>0){Me.value={marshalName:G.name,locations:_e.map(rt=>rt.name),marshal:G};const Te=await new Promise(rt=>{F.value=rt,Ee.value=!0});if(Te==="cancel"||Te==="choose-other")return;if(Te==="move")for(const rt of _e){const Kt=rt.assignments.find(_n=>_n.marshalId===N);if(Kt){q.value.push(Kt.id);const _n=A.value.findIndex(ps=>ps.id===rt.id);_n!==-1&&(A.value[_n].assignments=A.value[_n].assignments.filter(ps=>ps.id!==Kt.id))}}}z.value.push({marshalId:G.id,marshalName:G.name}),b.value.assignments||(b.value.assignments=[]),b.value.assignments.push({id:`temp-${Date.now()}`,marshalId:G.id,marshalName:G.name,locationId:b.value.id,isCheckedIn:!1,isPending:!0}),Ot(),Ao()},za=async N=>{try{const _e=(await Qn.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber})).data;await Ei(),z.value.push({marshalId:_e.id,marshalName:_e.name}),Ot(),Ao()}catch(G){console.error("Failed to create marshal:",G),alert("Failed to create marshal. Please try again.")}},Ua=()=>{W.value=null,pe.value={id:"",name:"",email:"",phoneNumber:"",notes:""},ae.value=[],he.value=[],R.value=!1,V.value=!0},Mo=N=>{W.value=N,pe.value={id:N.id,name:N.name,email:N.email||"",phoneNumber:N.phoneNumber||"",notes:N.notes||""},ae.value=[],he.value=[],R.value=!1,V.value=!0},Ha=()=>{if(!W.value)return[];const N=[];return A.value.forEach(G=>{G.assignments.filter(Te=>Te.marshalName===W.value.name).forEach(Te=>{N.push({...Te,locationName:G.name})})}),N},Va=async N=>{try{let G=W.value?.id,_e=!1;if(W.value){if(await Qn.update(n.params.eventId,W.value.id,{name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const Te of N.pendingNewChecklistItems)Te.text?.trim()&&await At.create(n.params.eventId,{text:Te.text,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[G]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const Te of N.pendingNewNotes)!Te.title?.trim()&&!Te.content?.trim()||await Ls.create(n.params.eventId,{title:Te.title||"Untitled",content:Te.content||"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[G]}],displayOrder:0,priority:"Normal",isPinned:!1})}else G=(await Qn.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]})).data.id,_e=!0;for(const Te of he.value)await a.deleteAssignment(n.params.eventId,Te);for(const Te of ae.value)await a.createAssignment({eventId:n.params.eventId,locationId:Te.locationId,marshalId:G});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const Te of N.pendingAssignments)await a.createAssignment({eventId:n.params.eventId,locationId:Te.locationId,marshalId:G});if(N.checkInChanges&&N.checkInChanges.length>0){const Te=Ha();for(const rt of N.checkInChanges){const Kt=Te.find(_n=>_n.id===rt.assignmentId);Kt&&Kt.isCheckedIn!==rt.shouldBeCheckedIn&&await Is.adminCheckIn(n.params.eventId,rt.assignmentId)}}if(N.checklistChanges&&N.checklistChanges.length>0)for(const Te of N.checklistChanges)try{const rt={marshalId:G};Te.contextType&&Te.contextId&&(rt.contextType=Te.contextType,rt.contextId=Te.contextId),Te.complete?await At.complete(n.params.eventId,Te.itemId,rt):await At.uncomplete(n.params.eventId,Te.itemId,rt)}catch(rt){console.error("Failed to process checklist change:",rt);const Kt=rt.response?.data?.message||"Failed to update checklist item";alert(`Error: ${Kt}`)}await Gt(),Do(),_e&&(P.value=G,X.value=N.name,E.value=!0)}catch(G){console.error("Failed to save marshal:",G),alert("Failed to save marshal. Please try again.")}},$o=async N=>{p("Delete Marshal","Are you sure you want to delete this marshal?",async()=>{try{await Qn.delete(n.params.eventId,N),await as(),Do()}catch(G){console.error("Failed to delete marshal:",G),alert("Failed to delete marshal. Please try again.")}})},wl=N=>{$o(N.id)},Cl=N=>{he.value.includes(N)||(he.value.push(N),Ot())},Po=N=>{ae.value.push({locationId:N}),Ot()},Do=()=>{V.value=!1,W.value=null,pe.value={id:"",name:"",email:"",phoneNumber:"",notes:""},ae.value=[],he.value=[],R.value=!1},Za=async({file:N})=>{if(!N){Z.value="Please select a CSV file";return}K.value=!0,Z.value=null,j.value=null;try{const G=await Qn.importCsv(n.params.eventId,N);j.value=G.data,await as(),Oo();const _e=G.data;let Te=`<p>Created <strong>${_e.marshalsCreated}</strong> marshal(s) and <strong>${_e.assignmentsCreated}</strong> assignment(s)</p>`;_e.errors&&_e.errors.length>0&&(Te+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',_e.errors.forEach(rt=>{Te+=`<li>${rt}</li>`}),Te+="</ul>"),Ie.value="Import Complete",Ae.value=Te,fe.value=!0}catch(G){console.error("Failed to import marshals:",G),Z.value=G.response?.data?.message||"Failed to import marshals. Please try again."}finally{K.value=!1}},Oo=()=>{be.value=!1,Z.value=null,j.value=null},Bi=N=>{F.value&&(F.value(N),F.value=null),Ee.value=!1},fs=async({assignment:N,status:G})=>{try{if(G==="not-checked-in"?N.isCheckedIn&&await Is.adminCheckIn(n.params.eventId,N.id):N.isCheckedIn||await Is.adminCheckIn(n.params.eventId,N.id),await go(),b.value){const _e=A.value.find(Te=>Te.id===b.value.id);_e&&(b.value=_e)}}catch(_e){console.error("Failed to change assignment status:",_e),alert("Failed to change status. Please try again.")}};return Ln(async()=>{await Gt();try{const N=await es.getMe(n.params.eventId);fo.value=N.data}catch(N){console.warn("Failed to fetch user claims:",N)}}),(N,G)=>(g(),_("div",lP,[u("header",cP,[u("div",uP,[u("button",{onClick:dl,class:"btn-back",title:"Back to Dashboard"}," Dashboard"),I.value?(g(),_("div",dP,[u("h1",null,S(I.value.name),1),u("p",hP,S(U(bw)(I.value.eventDate)),1)])):B("",!0)]),u("div",fP,[po.value?(g(),_("button",{key:0,onClick:Ia,class:"btn btn-marshal-mode"}," Switch to Marshal ")):B("",!0),u("button",{onClick:Ai,class:"btn btn-secondary"},"Profile")])]),u("div",pP,[u("div",mP,[Oe(YL,{tabs:w.value,"model-value":U(s),"onUpdate:modelValue":U(r)},null,8,["tabs","model-value","onUpdate:modelValue"])]),u("div",vP,[U(s)==="course"?(g(),tt(o1,{key:0,ref_key:"courseAreasTab",ref:M,checkpoints:A.value,areas:Qe.value,route:I.value?.route||[],selectedAreaId:St.value,drawingMode:Lt.value,onMapClick:hs,onLocationClick:_l,onAreaClick:Tt,onImportCheckpoints:G[0]||(G[0]=_e=>ye.value=!0),onUploadRoute:G[1]||(G[1]=_e=>ke.value=!0),onSelectLocation:Us,onAddArea:it,onSelectArea:Tt,onPolygonComplete:et,onCancelDrawing:_t,onAddCheckpointFromMap:Na,onAddManyCheckpointsFromMap:Ba,onAddAreaFromMap:So},null,8,["checkpoints","areas","route","selectedAreaId","drawingMode"])):B("",!0),U(s)==="checkpoints"?(g(),_("div",gP,[Oe(SL,{locations:A.value,areas:Qe.value,onAddCheckpointManually:vl,onImportCheckpoints:G[2]||(G[2]=_e=>ye.value=!0),onSelectLocation:Us},null,8,["locations","areas"])])):B("",!0),U(s)==="areas"?(g(),_("div",_P,[Oe(FL,{areas:Qe.value,checkpoints:A.value,onAddArea:it,onSelectArea:Tt},null,8,["areas","checkpoints"])])):B("",!0),U(s)==="marshals"?(g(),tt(A1,{key:3,marshals:J.value,assignments:mo.value,locations:A.value,onAddMarshal:Ua,onImportMarshals:G[3]||(G[3]=_e=>be.value=!0),onSelectMarshal:Mo,onDeleteMarshal:wl,onChangeAssignmentStatus:fs},null,8,["marshals","assignments","locations"])):B("",!0),U(s)==="checklists"?(g(),tt(l0,{key:4,"checklist-items":Rs.value,areas:Qe.value,locations:A.value,marshals:J.value,"completion-report":Re.value,onAddChecklistItem:ls,onSelectChecklistItem:Mt},null,8,["checklist-items","areas","locations","marshals","completion-report"])):B("",!0),U(s)==="notes"?(g(),tt(D0,{key:5,notes:Ye.value,areas:Qe.value,locations:A.value,marshals:J.value,onAddNote:yo,onSelectNote:ci},null,8,["notes","areas","locations","marshals"])):B("",!0),U(s)==="contacts"?(g(),tt(iC,{key:6,contacts:oi.value,areas:Qe.value,locations:A.value,marshals:J.value,"available-roles":dn.value,onAddContact:wo,onSelectContact:Co},null,8,["contacts","areas","locations","marshals","available-roles"])):B("",!0),U(s)==="details"?(g(),tt(vC,{key:7,"event-data":xe.value,"form-dirty":ge.value,onSubmit:$a,"onUpdate:formDirty":Ma},null,8,["event-data","form-dirty"])):B("",!0),U(s)==="settings"?(g(),tt(hL,{key:8,"event-data":xe.value,admins:Q.value,"form-dirty":ge.value,onSubmit:$a,onAddAdmin:G[4]||(G[4]=_e=>le.value=!0),onRemoveAdmin:xo,"onUpdate:formDirty":Ma},null,8,["event-data","admins","form-dirty"])):B("",!0)])]),Oe(rP,{show:C.value,location:Je.value,isDirty:R.value,onClose:To,onSave:yl,onSetOnMap:ml,"onUpdate:isDirty":Ot,"onUpdate:location":Ra},null,8,["show","location","isDirty"]),Oe(AI,{show:ce.value,location:b.value,assignments:b.value?.assignments||[],"event-date":I.value?.eventDate||"",areas:Qe.value,"event-id":U(n).params.eventId,"all-locations":A.value,notes:Ye.value,"available-marshals":Aa.value,"all-checklist-items":Rs.value,isDirty:R.value,"event-default-style-type":I.value?.defaultCheckpointStyleType||"default","event-default-style-color":I.value?.defaultCheckpointStyleColor||"","z-index":mt.value?1100:1e3,onClose:Io,onSave:bl,onDelete:In,onMoveLocation:Eo,onRemoveAssignment:kl,onAssignMarshal:Fa,"onUpdate:isDirty":Ot},null,8,["show","location","assignments","event-date","areas","event-id","all-locations","notes","available-marshals","all-checklist-items","isDirty","event-default-style-type","event-default-style-color","z-index"]),Oe(tx,{show:x.value,link:Bs.value,isDirty:!1,onClose:G[5]||(G[5]=_e=>x.value=!1)},null,8,["show","link"]),Oe(mx,{show:E.value,"event-id":U(n).params.eventId,"marshal-id":P.value,"marshal-name":X.value,onClose:G[6]||(G[6]=_e=>E.value=!1)},null,8,["show","event-id","marshal-id","marshal-name"]),Oe(_x,{show:le.value,isDirty:R.value,onClose:Ri,onSubmit:Lo,"onUpdate:isDirty":Ot},null,8,["show","isDirty"]),Oe(Cx,{show:ke.value,uploading:me.value,error:Le.value,isDirty:R.value,onClose:Ni,onSubmit:ds,"onUpdate:isDirty":Ot},null,8,["show","uploading","error","isDirty"]),Oe(Px,{show:ye.value,importing:de.value,error:Z.value,result:te.value,isDirty:R.value,onClose:Bt,onSubmit:di,"onUpdate:isDirty":Ot},null,8,["show","importing","error","result","isDirty"]),Oe($E,{show:V.value,marshal:W.value,"event-id":U(n).params.eventId,assignments:Ha(),availableLocations:ll.value,allLocations:A.value,areas:Qe.value,isEditing:!!W.value,eventNotes:Ye.value,allChecklistItems:Rs.value,isDirty:R.value,onClose:Do,onSave:Va,onDelete:$o,onRemoveAssignment:Cl,onAssignToLocation:Po,"onUpdate:isDirty":Ot},null,8,["show","marshal","event-id","assignments","availableLocations","allLocations","areas","isEditing","eventNotes","allChecklistItems","isDirty"]),Oe(Ux,{show:be.value,importing:K.value,error:Z.value,result:j.value,isDirty:R.value,onClose:Oo,onSubmit:Za,"onUpdate:isDirty":Ot},null,8,["show","importing","error","result","isDirty"]),Oe(RE,{show:Ee.value,conflictData:Me.value,onClose:G[7]||(G[7]=_e=>Ee.value=!1),onChoice:Bi},null,8,["show","conflictData"]),Oe(qE,{show:Se.value,locationName:b.value?.name||"",marshals:Aa.value,onClose:Ao,onAssignExisting:On,onCreateAndAssign:za},null,8,["show","locationName","marshals"]),Oe(iM,{show:Ue.value,"old-event-date":Pe.value,"new-event-date":He.value,"affected-checkpoints-count":Ke.value,onConfirm:hl,onCancel:vo},null,8,["show","old-event-date","new-event-date","affected-checkpoints-count"]),Oe(a2,{show:mt.value,area:je.value,checkpoints:A.value,marshals:J.value,areas:Qe.value,isDirty:R.value,"event-id":U(n).params.eventId,"all-locations":A.value,assignments:mo.value,notes:Ye.value,contacts:oi.value,"event-default-style-type":I.value?.defaultCheckpointStyleType||"default","event-default-style-color":I.value?.defaultCheckpointStyleColor||"",onClose:Ht,onSave:_o,onDelete:$i,onDrawBoundary:pl,"onUpdate:isDirty":Ot,onSelectCheckpoint:Us,onAddAreaContact:fl,onEditContact:Pi},null,8,["show","area","checkpoints","marshals","areas","isDirty","event-id","all-locations","assignments","notes","contacts","event-default-style-type","event-default-style-color"]),Oe(Q2,{show:ue.value,"checklist-item":ne.value,"initial-tab":re.value,areas:Qe.value,locations:A.value,marshals:J.value,isDirty:R.value,onClose:us,onSave:cs,onDelete:li,"onUpdate:isDirty":Ot},null,8,["show","checklist-item","initial-tab","areas","locations","marshals","isDirty"]),Oe(p$,{show:Ut.value,note:vt.value,"initial-tab":Sn.value,areas:Qe.value,locations:A.value,marshals:J.value,isDirty:R.value,onClose:Fs,onSave:bo,onDelete:ko,"onUpdate:isDirty":Ot},null,8,["show","note","initial-tab","areas","locations","marshals","isDirty"]),Oe(R$,{show:is.value,contact:ze.value,"initial-tab":Ns.value,areas:Qe.value,locations:A.value,marshals:J.value,"available-roles":dn.value,isDirty:R.value,"preselected-area":ai.value,onClose:ui,onSave:Di,onDelete:Da,"onUpdate:isDirty":Ot},null,8,["show","contact","initial-tab","areas","locations","marshals","available-roles","isDirty","preselected-area"]),Oe(J$,{show:bt.value,mode:nt.value,"context-title":Et.value.title,"context-description":Et.value.description,"can-complete":cl.value,clickable:nt.value!=="draw-area","drawing-mode":nt.value==="draw-area"&&Lt.value,locations:ul.value,areas:Ea.value,route:I.value?.route||[],"selected-area-id":St.value,center:Wt.value,zoom:xn.value,onMapClick:Oa,onPolygonComplete:et,onPolygonDrawing:Tn,onDone:gl,onCancel:hi},null,8,["show","mode","context-title","context-description","can-complete","clickable","drawing-mode","locations","areas","route","selected-area-id","center","zoom"]),Oe(rl,{show:fe.value,title:Ie.value,message:Ae.value,onClose:G[8]||(G[8]=_e=>fe.value=!1)},null,8,["show","title","message"]),Oe(ol,{show:U(l),title:U(c),message:U(h),onConfirm:U(f),onCancel:U(v)},null,8,["show","title","message","onConfirm","onCancel"])]))}},bP=Ze(yP,[["__scopeId","data-v-342ff16c"]]),kP={key:0,class:"emergency-contacts-list"},wP={class:"contact-header"},CP={key:0,class:"role-badge"},LP={class:"contact-details"},xP={key:0,class:"info-section"},SP=["href"],TP={key:1,class:"info-section"},IP=["href"],AP={key:2,class:"info-section"},EP=["href"],MP={key:1,class:"no-contacts"},$P={__name:"EmergencyContactModal",props:{show:{type:Boolean,default:!1},contacts:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n}){const i=n,a=()=>{i("close")},s=r=>r?{EmergencyContact:"Emergency Contact",EventDirector:"Event Director",MedicalLead:"Medical Lead",SafetyOfficer:"Safety Officer",Logistics:"Logistics"}[r]||r.replace(/([A-Z])/g," $1").trim():"";return(r,l)=>(g(),tt(Nt,{show:e.show,title:"Emergency Contact Information",size:"medium",onClose:a},{actions:Ge(()=>[u("button",{onClick:a,class:"btn btn-secondary"},"Close")]),default:Ge(()=>[e.contacts&&e.contacts.length>0?(g(),_("div",kP,[(g(!0),_(Ce,null,De(e.contacts,c=>(g(),_("div",{key:c.contactId||c.name,class:"emergency-contact-item"},[u("div",wP,[u("h3",null,S(c.name),1),c.role?(g(),_("span",CP,S(s(c.role)),1)):B("",!0)]),u("div",LP,[c.phone?(g(),_("div",xP,[l[0]||(l[0]=u("label",null,"Phone Number",-1)),u("a",{href:`tel:${c.phone}`,class:"phone-link"},S(c.phone),9,SP)])):B("",!0),c.email?(g(),_("div",TP,[l[1]||(l[1]=u("label",null,"Email",-1)),u("a",{href:`mailto:${c.email}`,class:"email-link"},S(c.email),9,IP)])):B("",!0),c.notes||c.details?(g(),_("div",AP,[l[2]||(l[2]=u("label",null,"Details",-1)),u("p",null,S(c.notes||c.details),1)])):B("",!0)]),c.phone?(g(),_("a",{key:0,href:`tel:${c.phone}`,class:"btn btn-danger btn-full"}," Call "+S(c.name),9,EP)):B("",!0)]))),128))])):(g(),_("div",MP,[...l[3]||(l[3]=[u("p",null,"No emergency contacts have been set up for this event.",-1)])]))]),_:1},8,["show"]))}},PP=Ze($P,[["__scopeId","data-v-8b9139a4"]]),cr=O(navigator.onLine),Xs=O(!0),Ci=O(0),ur=O(null),bi=O("idle"),no=O(null);let th=null,Yl=!1,Fn=null;function DP(e=1e3,n=1e4){return Math.floor(Math.random()*(n-e+1))+e}function Cc(){Fn&&(clearTimeout(Fn),Fn=null);const e=DP(1e3,1e4);console.log(`Scheduling auto-sync in ${e}ms`),Fn=setTimeout(async()=>{if(Fn=null,!navigator.onLine){console.log("Auto-sync cancelled: offline");return}if(await Mr()===0){console.log("Auto-sync cancelled: no pending actions");return}console.log("Starting auto-sync..."),await Dr();const i=await Mr();i>0&&navigator.onLine&&(console.log(`${i} actions remaining, scheduling retry...`),Cc())},e)}async function Xo(){if(!navigator.onLine)return Xs.value=!1,!1;try{const e=new AbortController,n=setTimeout(()=>e.abort(),5e3),i=await fetch("/api/health",{method:"HEAD",signal:e.signal}).catch(()=>null);if(clearTimeout(n),!i||i.status===404)return Xs.value=!0,!0;const a=i.ok;return Xs.value=a,a}catch(e){return e.name==="AbortError"&&console.warn("Server health check timed out"),Xs.value=!1,!1}}async function OP(e){try{switch(e.type){case"checkin":await Is.checkIn(e.payload);break;case"checkin_admin":await Is.adminCheckIn(e.payload.eventId,e.payload.assignmentId);break;case"checklist_complete":await At.complete(e.payload.eventId,e.payload.itemId,e.payload.data);break;case"checklist_uncomplete":await At.uncomplete(e.payload.eventId,e.payload.itemId,e.payload.data);break;default:return console.warn("Unknown action type:",e.type),!1}return!0}catch(n){return console.error("Failed to sync action:",e,n),n.response&&n.response.status>=400&&n.response.status<500?"permanent_failure":!1}}async function Dr(){if(!Yl&&navigator.onLine){Yl=!0,bi.value="syncing",no.value=null;try{const e=await cp();if(e.length===0){bi.value="success",Ci.value=0;return}let n=0,i=0;for(const a of e){const s=await OP(a);if(s===!0)await Jd(a.id),n++;else if(s==="permanent_failure")await Jd(a.id),i++;else{const r=(a.attempts||0)+1;r>=5?(await Kd(a.id,{status:"failed",attempts:r,lastAttempt:new Date().toISOString()}),i++):await Kd(a.id,{status:"retrying",attempts:r,lastAttempt:new Date().toISOString()})}}Ci.value=await Mr(),i>0?(bi.value="error",no.value=`${i} action(s) failed to sync`):bi.value="success"}catch(e){console.error("Sync error:",e),bi.value="error",no.value="Failed to sync pending actions"}finally{Yl=!1}}}function RP(){th||(th=setInterval(async()=>{navigator.onLine&&(await Xo(),Xs.value&&Ci.value>0&&await Dr())},3e4))}function tu(){const e=se(()=>cr.value&&Xs.value);async function n(){Ci.value=await Mr()}async function i(){cr.value=!0,await Xo()&&Ci.value>0&&Cc()}function a(){cr.value=!1,Xs.value=!1,Fn&&(clearTimeout(Fn),Fn=null)}Ln(async()=>{await Os(),await n(),window.addEventListener("online",i),window.addEventListener("offline",a),navigator.onLine&&await Xo()&&Ci.value>0&&Cc(),RP()}),Ds(()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a),Fn&&(clearTimeout(Fn),Fn=null)});async function s(h,p){if(!e.value)return console.warn("Cannot refresh cache while offline"),!1;try{const f=await p();return await ga(h,f),ur.value=new Date().toISOString(),!0}catch(f){return console.error("Failed to refresh cache:",f),!1}}async function r(h){const p=await ei(h);return p&&(ur.value=p.cachedAt),p}async function l(h){ur.value=await Db(h)}async function c(){return navigator.onLine?await Xo()?(await Dr(),bi.value==="success"):(no.value="Server is not responding",!1):(no.value="Cannot sync while offline",!1)}return{isOnline:cr,isServerHealthy:Xs,isFullyOnline:e,pendingActionsCount:Ci,lastSyncTime:ur,syncStatus:bi,syncError:no,checkServerHealth:Xo,syncPendingActions:Dr,updatePendingCount:n,refreshCache:s,getCachedData:r,loadLastSyncTime:l,forcSync:c}}const NP={class:"area-lead-content"},BP={key:0,class:"loading-state"},FP={key:1,class:"error-state"},zP={key:2,class:"empty-state"},UP={key:3,class:"checkpoint-accordion"},HP=["onClick"],VP={class:"checkpoint-header-content"},ZP={class:"checkpoint-title-row"},jP={class:"checkpoint-name"},qP={key:0,class:"area-badge"},WP={key:0,class:"checkpoint-description-preview"},GP={class:"checkpoint-status-row"},KP={class:"status-badge marshals-status"},JP={key:0,class:"status-badge tasks-status"},YP={class:"accordion-icon"},XP={key:0,class:"checkpoint-accordion-content"},QP={class:"checkpoint-mini-map"},eD={class:"checkpoint-marshals-section"},tD={class:"marshals-label"},nD={key:0,class:"empty-state"},sD={key:1,class:"marshals-list"},iD=["onClick"],oD={class:"marshal-header"},aD={class:"marshal-name-row"},rD={class:"marshal-name"},lD={key:0,class:"task-count"},cD={class:"check-status-row"},uD=["onClick","disabled"],dD={key:0,class:"check-in-time"},hD={key:0},fD={key:1,class:"last-access-time"},pD={key:0,class:"checkpoint-tasks-section"},mD={class:"marshals-label"},vD={class:"tasks-list"},gD=["disabled","onChange"],_D={class:"task-text"},yD={key:0,class:"marshal-details-modal"},bD={class:"details-section"},kD={class:"contact-info"},wD={key:0,class:"contact-row"},CD=["href"],LD={key:1,class:"contact-row"},xD=["href"],SD={key:2,class:"no-contact"},TD={class:"details-section"},ID={key:0,class:"checked-in-section"},AD={class:"checked-in-details"},ED={class:"check-time-detail"},MD={key:0,class:"check-method"},$D=["disabled"],PD={key:1,class:"not-checked-in-section"},DD=["disabled"],OD={key:2,class:"last-access-detail"},RD={class:"details-section"},ND={key:0,class:"no-tasks"},BD={key:1,class:"tasks-list modal-tasks"},FD=["disabled","onChange"],zD={class:"task-text"},UD={class:"details-section contact-actions-section"},HD={class:"contact-buttons"},VD=["href"],ZD=["href"],jD=["href"],qD={__name:"AreaLeadSection",props:{eventId:{type:String,required:!0},areaIds:{type:Array,default:()=>[]},marshalId:{type:String,required:!0},route:{type:Array,default:()=>[]}},emits:["checklist-updated","loaded","checkin-updated"],setup(e,{expose:n,emit:i}){const{terms:a,termsLower:s}=ht(),{updatePendingCount:r}=tu(),l=e,c=i,h=O(!1),p=O(null),f=O([]),v=O([]),T=O(null),k=O(!1),w=O(null),I=se(()=>[...v.value].sort((K,Z)=>fn(K.name,Z.name))),D=(K,Z=60)=>K?K.length<=Z?K:K.substring(0,Z).trim()+"...":"";n({areas:f,checkpoints:v,loading:h});const A=O(!1),b=O(null),C=O(null),M=async()=>{if(!(!l.eventId||l.areaIds.length===0)){if(h.value=!0,p.value=null,Yt()){try{const K=await ei(l.eventId);if(K?.areaLeadDashboard){f.value=K.areaLeadDashboard.areas||[],v.value=K.areaLeadDashboard.checkpoints||[],h.value=!1;return}}catch(K){console.warn("Failed to load cached dashboard:",K)}p.value="Offline - no cached data available",h.value=!1;return}try{const K=await Ys.getAreaLeadDashboard(l.eventId);f.value=K.data.areas||[],v.value=K.data.checkpoints||[];try{const Z=JSON.parse(JSON.stringify({areas:f.value,checkpoints:v.value}));await ei(l.eventId)?await Go(l.eventId,"areaLeadDashboard",Z):await ga(l.eventId,{areaLeadDashboard:Z})}catch(Z){console.warn("Failed to cache dashboard:",Z)}}catch(K){console.error("Failed to load area lead dashboard:",K);try{const Z=await ei(l.eventId);if(Z?.areaLeadDashboard){console.log("Loading area lead dashboard from cache after error"),f.value=Z.areaLeadDashboard.areas||[],v.value=Z.areaLeadDashboard.checkpoints||[],h.value=!1;return}}catch(Z){console.warn("Failed to load cached dashboard:",Z)}p.value=K.response?.data?.message||"Failed to load dashboard"}finally{h.value=!1}}},x=K=>{T.value=T.value===K?null:K},E=K=>K.marshals.filter(Z=>Z.isCheckedIn).length,P=K=>{const Z=K.marshals.reduce((te,j)=>te+j.outstandingTaskCount,0);return K.outstandingTaskCount+Z},X=(K,Z)=>{b.value=K,C.value=Z,A.value=!0},Q=()=>{A.value=!1,b.value=null,C.value=null},le=async(K,Z)=>{if(w.value)return;const te=K.assignmentId||K.id;if(!te){console.error("No assignment ID found for marshal:",K);return}w.value=K.marshalId;try{if(Yt())await yn("checkin_admin",{eventId:l.eventId,assignmentId:te}),K.isCheckedIn=!0,K.checkInTime=new Date().toISOString(),K.checkInMethod="AreaLead (pending)",await r(),c("checkin-updated");else if(await Is.adminCheckIn(l.eventId,te),await M(),c("checkin-updated"),b.value?.marshalId===K.marshalId&&C.value){const j=v.value.find(ce=>ce.checkpointId===C.value.checkpointId);if(j){const ce=j.marshals.find(Y=>Y.marshalId===K.marshalId);ce&&(b.value=ce)}}}catch(j){console.error("Failed to check in marshal:",j),(Yt()||!j.response)&&(await yn("checkin_admin",{eventId:l.eventId,assignmentId:te}),K.isCheckedIn=!0,K.checkInTime=new Date().toISOString(),K.checkInMethod="AreaLead (pending)",await r(),c("checkin-updated"))}finally{w.value=null}},ke=async(K,Z)=>{if(k.value)return;k.value=!0;const j={marshalId:Z.marshals.length>0?Z.marshals[0].marshalId:l.marshalId,contextType:K.contextType,contextId:K.contextId};try{Yt()?(await yn("checklist_complete",{eventId:l.eventId,itemId:K.itemId,data:j}),Z.outstandingTasks=Z.outstandingTasks.filter(ce=>ce.itemId!==K.itemId),Z.outstandingTaskCount=Math.max(0,Z.outstandingTaskCount-1),await r(),c("checklist-updated")):(await At.complete(l.eventId,K.itemId,j),await M(),c("checklist-updated"))}catch(ce){console.error("Failed to complete task:",ce),(Yt()||!ce.response)&&(await yn("checklist_complete",{eventId:l.eventId,itemId:K.itemId,data:j}),Z.outstandingTasks=Z.outstandingTasks.filter(Y=>Y.itemId!==K.itemId),Z.outstandingTaskCount=Math.max(0,Z.outstandingTaskCount-1),await r(),c("checklist-updated"))}finally{k.value=!1}},me=async K=>{if(k.value||!b.value)return;k.value=!0;const Z={marshalId:b.value.marshalId,contextType:K.contextType,contextId:K.contextId};try{if(Yt())await yn("checklist_complete",{eventId:l.eventId,itemId:K.itemId,data:Z}),b.value.outstandingTasks=b.value.outstandingTasks.filter(te=>te.itemId!==K.itemId),b.value.outstandingTaskCount=Math.max(0,b.value.outstandingTaskCount-1),await r(),c("checklist-updated");else{if(await At.complete(l.eventId,K.itemId,Z),await M(),b.value&&C.value){const te=v.value.find(j=>j.checkpointId===C.value.checkpointId);if(te){const j=te.marshals.find(ce=>ce.marshalId===b.value.marshalId);j&&(b.value=j)}}c("checklist-updated")}}catch(te){console.error("Failed to complete task:",te),(Yt()||!te.response)&&(await yn("checklist_complete",{eventId:l.eventId,itemId:K.itemId,data:Z}),b.value.outstandingTasks=b.value.outstandingTasks.filter(j=>j.itemId!==K.itemId),b.value.outstandingTaskCount=Math.max(0,b.value.outstandingTaskCount-1),await r(),c("checklist-updated"))}finally{k.value=!1}},Le=K=>K?new Date(K).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",ye=K=>K?new Date(K).toLocaleString():"",be=K=>{if(!K)return"";const Z=new Date(K),j=new Date-Z,ce=Math.floor(j/6e4),Y=Math.floor(ce/60),ve=Math.floor(Y/24);return ce<1?"just now":ce<60?`${ce}m ago`:Y<24?`${Y}h ago`:ve===1?"yesterday":ve<7?`${ve}d ago`:Z.toLocaleDateString()},de=K=>({GPS:"GPS",Manual:"Manual",Admin:"Admin",AreaLead:`${a.value.area} Lead`})[K]||K;return qe(()=>[l.eventId,l.areaIds],()=>{M()},{immediate:!0}),(K,Z)=>(g(),_("div",NP,[h.value?(g(),_("div",BP," Loading dashboard... ")):p.value?(g(),_("div",FP,[u("p",null,S(p.value),1),u("button",{onClick:M,class:"btn btn-secondary"},"Retry")])):I.value.length===0?(g(),_("div",zP,[u("p",null,"No "+S(U(s).checkpoints)+" in your "+S(U(s).areas)+".",1)])):(g(),_("div",UP,[(g(!0),_(Ce,null,De(I.value,te=>(g(),_("div",{key:te.checkpointId,class:"checkpoint-accordion-section"},[u("button",{class:Fe(["checkpoint-accordion-header",{active:T.value===te.checkpointId}]),onClick:j=>x(te.checkpointId)},[u("div",VP,[u("div",ZP,[u("span",jP,S(te.name),1),te.areaName?(g(),_("span",qP,S(te.areaName),1)):B("",!0)]),te.description?(g(),_("div",WP,S(D(te.description)),1)):B("",!0),u("div",GP,[u("span",KP,S(E(te))+" / "+S(te.marshals.length)+" checked in ",1),P(te)>0?(g(),_("span",JP,S(P(te))+" tasks ",1)):B("",!0)])]),u("span",YP,S(T.value===te.checkpointId?"":"+"),1)],10,HP),T.value===te.checkpointId?(g(),_("div",XP,[u("div",QP,[Oe(_a,{locations:[{id:te.checkpointId,name:te.name,description:te.description,latitude:te.latitude,longitude:te.longitude}],route:e.route,center:{lat:te.latitude,lng:te.longitude},zoom:16,"highlight-location-id":te.checkpointId,"marshal-mode":!0},null,8,["locations","route","center","highlight-location-id"])]),u("div",eD,[u("div",tD,S(U(a).people)+" ("+S(te.marshals.length)+")",1),te.marshals.length===0?(g(),_("div",nD," No "+S(U(s).people)+" assigned to this "+S(U(s).checkpoint)+". ",1)):(g(),_("div",sD,[(g(!0),_(Ce,null,De(te.marshals,j=>(g(),_("div",{key:j.marshalId,class:Fe(["marshal-card",{"is-checked-in":j.isCheckedIn}]),onClick:ce=>X(j,te)},[u("div",oD,[u("div",aD,[u("span",rD,S(j.name),1),j.outstandingTaskCount>0?(g(),_("span",lD,S(j.outstandingTaskCount)+" tasks ",1)):B("",!0)]),u("div",cD,[u("div",{class:Fe(["check-status",{"checked-in":j.isCheckedIn}])},S(j.isCheckedIn?" Checked In":"Not Checked In"),3),u("button",{onClick:It(ce=>le(j),["stop"]),class:Fe(["quick-checkin-btn",{"undo-btn":j.isCheckedIn}]),disabled:w.value===j.marshalId},S(w.value===j.marshalId?"...":j.isCheckedIn?"Undo":"Check In"),11,uD)])]),j.isCheckedIn&&j.checkInTime?(g(),_("div",dD,[Ve(S(Le(j.checkInTime))+" ",1),j.checkInMethod?(g(),_("span",hD," ("+S(de(j.checkInMethod))+")",1)):B("",!0)])):B("",!0),j.lastAccessedAt?(g(),_("div",fD," Last active: "+S(be(j.lastAccessedAt)),1)):B("",!0)],10,iD))),128))]))]),te.outstandingTaskCount>0?(g(),_("div",pD,[u("div",mD,"Outstanding "+S(U(s).checkpoint)+" tasks ("+S(te.outstandingTaskCount)+")",1),u("div",vD,[(g(!0),_(Ce,null,De(te.outstandingTasks,j=>(g(),_("div",{key:j.itemId,class:"task-item"},[u("input",{type:"checkbox",disabled:k.value,onChange:ce=>ke(j,te)},null,40,gD),u("span",_D,S(j.text),1)]))),128))])])):B("",!0)])):B("",!0)]))),128))])),Oe(Nt,{show:A.value,title:b.value?.name||"Marshal Details",size:"large",onClose:Q},{actions:Ge(()=>[u("button",{onClick:Q,class:"btn btn-secondary"},"Close")]),default:Ge(()=>[b.value?(g(),_("div",yD,[u("div",bD,[Z[4]||(Z[4]=u("h4",null,"Contact Details",-1)),u("div",kD,[b.value.email?(g(),_("div",wD,[Z[2]||(Z[2]=u("span",{class:"contact-label"},"Email:",-1)),u("a",{href:`mailto:${b.value.email}`},S(b.value.email),9,CD)])):B("",!0),b.value.phoneNumber?(g(),_("div",LD,[Z[3]||(Z[3]=u("span",{class:"contact-label"},"Phone:",-1)),u("a",{href:`tel:${b.value.phoneNumber}`},S(b.value.phoneNumber),9,xD)])):B("",!0),!b.value.email&&!b.value.phoneNumber?(g(),_("div",SD," No contact details available. ")):B("",!0)])]),u("div",TD,[Z[8]||(Z[8]=u("h4",null,"Check-in Status",-1)),b.value.isCheckedIn?(g(),_("div",ID,[u("div",AD,[Z[6]||(Z[6]=u("span",{class:"check-icon"},"",-1)),u("div",null,[Z[5]||(Z[5]=u("strong",null,"Checked In",-1)),u("p",ED,S(ye(b.value.checkInTime)),1),b.value.checkInMethod?(g(),_("p",MD," Method: "+S(de(b.value.checkInMethod)),1)):B("",!0)])]),u("button",{onClick:Z[0]||(Z[0]=te=>le(b.value,C.value)),class:"btn btn-secondary undo-checkin-btn",disabled:w.value===b.value.marshalId},S(w.value===b.value.marshalId?"Undoing...":"Undo Check-in"),9,$D)])):(g(),_("div",PD,[Z[7]||(Z[7]=u("div",{class:"not-checked-in"},[u("span",{class:"not-checked-icon"},""),u("span",null,"Not checked in")],-1)),u("button",{onClick:Z[1]||(Z[1]=te=>le(b.value,C.value)),class:"btn btn-primary check-in-btn",disabled:w.value===b.value.marshalId},S(w.value===b.value.marshalId?"Checking in...":"Check In"),9,DD)])),b.value.lastAccessedAt?(g(),_("div",OD," Last active: "+S(be(b.value.lastAccessedAt)),1)):B("",!0)]),u("div",RD,[u("h4",null,S(U(a).checklists)+" ("+S(b.value.outstandingTasks?.length||0)+" outstanding)",1),!b.value.outstandingTasks||b.value.outstandingTasks.length===0?(g(),_("div",ND," No outstanding tasks. ")):(g(),_("div",BD,[(g(!0),_(Ce,null,De(b.value.outstandingTasks,te=>(g(),_("div",{key:te.itemId,class:"task-item"},[u("input",{type:"checkbox",disabled:k.value,onChange:j=>me(te)},null,40,FD),u("span",zD,S(te.text),1)]))),128))]))]),u("div",UD,[u("div",HD,[b.value.phoneNumber?(g(),_("a",{key:0,href:`tel:${b.value.phoneNumber}`,class:"btn btn-primary"}," Call ",8,VD)):B("",!0),b.value.phoneNumber?(g(),_("a",{key:1,href:`sms:${b.value.phoneNumber}`,class:"btn btn-secondary"}," Text ",8,ZD)):B("",!0),b.value.email?(g(),_("a",{key:2,href:`mailto:${b.value.email}`,class:"btn btn-secondary"}," Email ",8,jD)):B("",!0)])])])):B("",!0)]),_:1},8,["show","title"])]))}},WD=Ze(qD,[["__scopeId","data-v-7df6c747"]]),GD={class:"offline-indicator-container"},KD={key:0,class:"offline-banner"},JD={class:"offline-text"},YD={key:0,class:"last-sync"},XD={class:"pending-text"},QD={key:0,class:"pending-subtext"},eO={key:1,class:"syncing-text"},tO={__name:"OfflineIndicator",setup(e){const{isOnline:n,isFullyOnline:i,pendingActionsCount:a,lastSyncTime:s,syncStatus:r,syncError:l,forcSync:c}=tu(),h=O(!1),p=O(""),f=O(""),v=se(()=>{if(!s.value)return"";const k=new Date(s.value),I=new Date-k,D=Math.floor(I/6e4),A=Math.floor(D/60);return D<1?"just now":D<60?`${D}m ago`:A<24?`${A}h ago`:k.toLocaleDateString()}),T=async()=>{await c()};return qe(r,k=>{k==="success"&&a.value===0?(p.value="All actions synced successfully!",f.value="success",h.value=!0,setTimeout(()=>{h.value=!1},3e3)):k==="error"&&(p.value=l.value||"Sync failed",f.value="error",h.value=!0,setTimeout(()=>{h.value=!1},5e3))}),(k,w)=>(g(),_("div",GD,[Oe(Nl,{name:"slide"},{default:Ge(()=>[U(i)?B("",!0):(g(),_("div",KD,[w[0]||(w[0]=u("span",{class:"offline-icon"},[u("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"})])],-1)),u("span",JD,S(U(n)?"Server unavailable":"You're offline"),1),U(s)?(g(),_("span",YD," Last synced: "+S(v.value),1)):B("",!0)]))]),_:1}),Oe(Nl,{name:"fade"},{default:Ge(()=>[U(a)>0?(g(),_("div",{key:0,class:Fe(["pending-banner",{"offline-pending":!U(i)}])},[w[1]||(w[1]=u("span",{class:"pending-icon"},[u("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})])],-1)),u("span",XD,[Ve(S(U(a))+" pending action"+S(U(a)!==1?"s":"")+" ",1),U(i)?B("",!0):(g(),_("span",QD,"(will sync when online)"))]),U(i)&&U(r)!=="syncing"?(g(),_("button",{key:0,onClick:T,class:"sync-button"}," Sync Now ")):U(r)==="syncing"?(g(),_("span",eO,"Syncing...")):B("",!0)],2)):B("",!0)]),_:1}),Oe(Nl,{name:"fade"},{default:Ge(()=>[h.value?(g(),_("div",{key:0,class:Fe(["sync-toast",f.value])},S(p.value),3)):B("",!0)]),_:1})]))}},nO=Ze(tO,[["__scopeId","data-v-61340ead"]]),sO={class:"marshal-view"},iO={class:"header"},oO={class:"header-title"},aO={key:0},rO={key:1,class:"header-event-date"},lO={class:"header-actions"},cO={class:"container"},uO={key:0,class:"selection-card"},dO={key:1,class:"selection-card"},hO={key:0,class:"loading"},fO={key:2,class:"selection-card error-card"},pO={class:"error"},mO={key:3,class:"dashboard"},vO={key:0,class:"welcome-bar"},gO={class:"welcome-info"},_O={key:0,class:"welcome-email"},yO={key:0,class:"mode-switch"},bO={key:1,class:"mode-switch"},kO={class:"accordion"},wO={key:0,class:"accordion-section"},CO={class:"accordion-title"},LO=["innerHTML"],xO={class:"accordion-icon"},SO={key:0,class:"accordion-content"},TO={class:"event-details"},IO={key:0,class:"event-detail-row"},AO={class:"detail-value"},EO={key:1,class:"event-description"},MO={class:"detail-value"},$O={class:"accordion-section"},PO={class:"accordion-title"},DO=["innerHTML"],OO={key:0,class:"location-status active"},RO={key:1,class:"location-status"},NO={class:"accordion-icon"},BO={key:0,class:"accordion-content map-content"},FO={class:"accordion-section"},zO={class:"accordion-title"},UO=["innerHTML"],HO={class:"accordion-icon"},VO={key:0,class:"accordion-content assignments-accordion-content"},ZO={key:0,class:"empty-state"},jO={key:1,class:"checkpoint-accordion"},qO=["onClick"],WO={class:"checkpoint-header-content"},GO={class:"checkpoint-title-row"},KO={key:0,class:"checkpoint-check-icon"},JO={class:"checkpoint-name"},YO={key:1,class:"area-badge"},XO={key:2,class:"checkpoint-time-badge"},QO={key:0,class:"checkpoint-description-preview"},eR={class:"accordion-icon"},tR={key:0,class:"checkpoint-accordion-content"},nR={key:0,class:"checkpoint-mini-map"},sR={class:"checkpoint-marshals"},iR={class:"marshals-label"},oR={class:"marshals-list"},aR={key:0,class:"check-badge"},rR={key:1,class:"checkpoint-area-contacts"},lR={class:"marshals-label"},cR={class:"contact-list"},uR={class:"contact-info"},dR={class:"contact-name"},hR={key:0,class:"contact-role"},fR={key:1,class:"contact-detail"},pR={key:2,class:"contact-detail"},mR={class:"contact-actions"},vR=["href"],gR=["href"],_R=["href"],yR={key:2,class:"checked-in-status"},bR={class:"check-time"},kR={key:3,class:"check-in-actions"},wR=["onClick","disabled"],CR=["onClick","disabled"],LR={key:4,class:"error"},xR={class:"accordion-section"},SR={class:"accordion-title"},TR=["innerHTML"],IR={class:"accordion-icon"},AR={key:0,class:"accordion-content"},ER={key:0,class:"loading"},MR={key:1,class:"error"},$R={key:2,class:"empty-state"},PR={key:3,class:"checklist-items"},DR={class:"item-checkbox"},OR=["checked","disabled","onChange"],RR={class:"item-content"},NR={key:0,class:"item-context"},BR={key:1,class:"completion-info"},FR={class:"completion-text"},zR={class:"completion-time"},UR={key:1,class:"accordion-section"},HR={class:"accordion-title"},VR=["innerHTML"],ZR={class:"accordion-icon"},jR={key:0,class:"accordion-content"},qR={key:0,class:"loading"},WR={key:1,class:"contact-list"},GR={class:"contact-info"},KR={class:"contact-name-row"},JR={key:0,class:"primary-badge"},YR={class:"contact-name"},XR={key:1,class:"contact-role-badge"},QR={key:0,class:"contact-notes-text"},eN={key:1,class:"contact-detail"},tN={key:2,class:"contact-detail"},nN={class:"contact-actions"},sN=["href"],iN=["href"],oN=["href"],aN={class:"accordion-section"},rN={class:"accordion-title"},lN=["innerHTML"],cN={class:"accordion-icon"},uN={key:0,class:"accordion-content"},dN={key:2,class:"accordion-section"},hN={class:"accordion-title"},fN=["innerHTML"],pN={key:0,class:"area-lead-badges"},mN={class:"accordion-icon"},vN={key:0,class:"accordion-content area-lead-accordion-content"},gN={__name:"MarshalView",setup(e){const{terms:n,termsLower:i}=ht(),{updatePendingCount:a}=tu(),s=jc(),r=Ca(),l=O(!1),c=O(!1),h=O(null),p=O(null),f=O(null),v=O(null),T=se(()=>v.value?.eventRoles?v.value.eventRoles.filter(ue=>ue.role==="EventAreaLead").flatMap(ue=>ue.areaIds||[]):[]),k=se(()=>T.value.length>0),w=se(()=>v.value?.eventRoles?v.value.eventRoles.some(ne=>ne.role==="EventAdmin"):!1),I=se(()=>v.value?.authMethod==="SecureEmailLink"&&w.value),D=se(()=>v.value?.authMethod==="MarshalMagicCode"&&w.value),A=()=>{r.push(`/admin/events/${s.params.eventId}`)},b=O(null),C=O([]),M=O([]),x=O([]),E=O(!0),P=O("assignments"),X=O(null),Q=O(null),le=O(null),ke=O([]),me=O(!1),Le=O(null),ye=O(!1),be=O([]),de=O(null),K=O(!1),Z=O(!1),te=O(""),j=O(""),ce=O(null),Y=O(null);let ve=null;const Se=ne=>{P.value=P.value===ne?null:ne},Ee=O(null),Me=ne=>{Ee.value=Ee.value===ne?null:ne};qe(()=>M.value,ne=>{ne.length===1&&Ee.value===null&&(Ee.value=ne[0].id)},{immediate:!0});const F=se(()=>M.value.map(ne=>{const ue=C.value.find(Ut=>Ut.id===ne.locationId),re=ue?.areaIds||ue?.AreaIds||[];let Re=null;re.length>0&&x.value.length>0&&(Re=x.value.find(Sn=>re.includes(Sn.id))?.name);const Ye=ue?.assignments||[],vt=Ie.value.filter(Ut=>re.includes(Ut.areaId));return{...ne,location:ue,areaName:Re,areaIds:re,allMarshals:Ye,areaContacts:vt,locationName:ue?.name||"Unknown Location"}})),J=se(()=>M.value.length>0?M.value[0]:null),V=se(()=>M.value.map(ne=>ne.locationId)),W=se(()=>b.value?.route?(typeof b.value.route=="string"?JSON.parse(b.value.route):b.value.route)||[]:[]),pe=se(()=>!J.value||!C.value.length?null:C.value.find(ne=>ne.id===J.value.locationId)),R=se(()=>ke.value.filter(ne=>ne.isCompleted?!["OnePerCheckpoint","OnePerArea","OneLeadPerArea"].includes(ne.matchedScope):!0)),z=se(()=>R.value.filter(ne=>ne.isCompleted).length),q=O([]),ae=O(!1),he=se(()=>q.value),fe=se(()=>{const ne=["EmergencyContact","EventDirector","MedicalLead","SafetyOfficer"];return q.value.filter(ue=>ne.includes(ue.role))}),Ie=O([]);se(()=>{if(Ie.value.length===0)return[];const ne={};for(const ue of Ie.value){const re=ue.areaId||"unknown";ne[re]||(ne[re]={areaId:ue.areaId,areaName:ue.areaName||"Unknown Area",contacts:[]}),ne[re].contacts.push(ue)}return Object.values(ne)}),se(()=>Ie.value.length);const Ae=se(()=>pe.value?{lat:pe.value.latitude,lng:pe.value.longitude}:Y.value?Y.value:C.value.length>0?{lat:C.value[0].latitude,lng:C.value[0].longitude}:{lat:51.505,lng:-.09}),xe=async(ne,ue)=>{c.value=!0,h.value=null,console.log("Authenticating with magic code:",{eventId:ne,code:ue});try{const re=await es.marshalLogin(ne,ue);if(console.log("Auth response:",re.data),re.data.success){localStorage.setItem("sessionToken",re.data.sessionToken),localStorage.setItem(`marshal_${ne}`,re.data.marshalId),p.value=re.data.person,f.value=re.data.marshalId,l.value=!0,console.log("Authenticated as marshal:",f.value,p.value?.name);try{const Re=await es.getMe(ne);v.value=Re.data,console.log("User claims:",v.value)}catch(Re){console.warn("Failed to fetch claims:",Re)}r.replace({path:s.path,query:{}}),xn(),await Ue()}else h.value=re.data.message||"Authentication failed"}catch(re){console.error("Authentication failed:",re),h.value=re.response?.data?.message||"Invalid or expired login link"}finally{c.value=!1}},ge=async ne=>{const ue=localStorage.getItem("sessionToken"),re=localStorage.getItem(`marshal_${ne}`);if(!ue||!re)return!1;try{const Re=await es.getMe(ne);if(Re.data&&Re.data.marshalId)return v.value=Re.data,p.value={personId:Re.data.personId,name:Re.data.personName,email:Re.data.personEmail},f.value=Re.data.marshalId,l.value=!0,xn(),!0}catch{localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${ne}`)}return!1},Ue=async()=>{const ne=s.params.eventId;if(console.log("Loading event data for:",{eventId:ne,marshalId:f.value}),Yt()){console.log("Offline mode detected, attempting to load from cache...");const Ye=await ei(ne);if(Ye){if(console.log("Loaded cached data from:",Ye.cachedAt),b.value=Ye.event,x.value=Ye.areas||[],C.value=Ye.locations||[],ke.value=Ye.checklist||[],q.value=Ye.contacts||[],be.value=Ye.notes||[],b.value&&kc(b.value),f.value){const vt=[];for(const Ut of C.value){const Sn=Ut.assignments?.find(oi=>oi.marshalId===f.value);Sn&&vt.push(Sn)}M.value=vt}return}else console.warn("No cached data available while offline")}console.log("Fetching event data in parallel...");const[ue,re,Re]=await Promise.allSettled([yi.getById(ne),Ys.getByEvent(ne),Ko.getEventStatus(ne)]);if(ue.status==="fulfilled"?(b.value=ue.value.data,console.log("Event loaded:",b.value?.name),b.value&&kc(b.value)):console.error("Failed to load event:",ue.reason),re.status==="fulfilled"?(x.value=re.value.data||[],console.log("Areas loaded:",x.value.length)):console.error("Failed to load areas:",re.reason),Re.status==="fulfilled"){if(C.value=Re.value.data?.locations||[],console.log("Locations loaded:",C.value.length),f.value){const Ye=[];for(const vt of C.value){const Ut=vt.assignments?.find(Sn=>Sn.marshalId===f.value);Ut&&Ye.push(Ut)}M.value=Ye,console.log("Total assignments found:",M.value.length)}}else console.error("Failed to load event status:",Re.reason);await Promise.allSettled([Je(),Ke(),He()]);try{const Ye=JSON.parse(JSON.stringify({event:b.value,areas:x.value,locations:C.value,checklist:ke.value,contacts:q.value,notes:be.value,marshalId:f.value}));await ga(ne,Ye),console.log("Event data cached for offline access")}catch(Ye){console.warn("Failed to cache event data:",Ye)}},Pe=async()=>{const ne=s.params.eventId;if(Yt()){console.log("Skipping background preload: offline");return}console.log("Starting background preload for offline data...");try{const ue=await Ys.getAreaLeadDashboard(ne);if(ue.data){const re=JSON.parse(JSON.stringify({areas:ue.data.areas||[],checkpoints:ue.data.checkpoints||[]}));await ei(ne)?await Go(ne,"areaLeadDashboard",re):await ga(ne,{areaLeadDashboard:re}),console.log("Area lead dashboard cached for offline access")}}catch(ue){ue.response?.status!==403&&console.warn("Failed to preload area lead dashboard:",ue)}console.log("Background preload complete")},He=async()=>{const ne=s.params.eventId;try{const ue=await Ls.getMyNotes(ne);be.value=ue.data||[],console.log("Notes loaded:",be.value.length)}catch(ue){console.error("Failed to load notes:",ue)}},Ke=async()=>{const ne=s.params.eventId;ae.value=!0;try{const ue=await Ki.getMyContacts(ne);q.value=ue.data,console.log("Contacts loaded:",q.value.length)}catch(ue){console.warn("Failed to load contacts:",ue),q.value=[]}finally{ae.value=!1}},Je=async()=>{if(!f.value){console.warn("No marshal ID, skipping checklist load");return}me.value=!0,Le.value=null;try{console.log("Fetching checklist for marshal:",f.value);const ne=await At.getMarshalChecklist(s.params.eventId,f.value);ke.value=ne.data||[],console.log("Checklist loaded:",ke.value.length,"items")}catch(ne){console.error("Failed to load checklist:",ne.response?.status,ne.response?.data),Le.value=ne.response?.data?.message||"Failed to load checklist"}finally{me.value=!1}},Qe=async ne=>{if(ye.value)return;ye.value=!0;const ue=s.params.eventId,re={marshalId:f.value,contextType:ne.completionContextType,contextId:ne.completionContextId};try{ne.isCompleted?Yt()?(await yn("checklist_uncomplete",{eventId:ue,itemId:ne.itemId,data:re}),ne.isCompleted=!1,ne.completedAt=null,ne.completedByActorName=null,await a()):(await At.uncomplete(ue,ne.itemId,re),await Je()):Yt()?(await yn("checklist_complete",{eventId:ue,itemId:ne.itemId,data:re}),ne.isCompleted=!0,ne.completedAt=new Date().toISOString(),ne.completedByActorName=p.value?.name||"You",await a()):(await At.complete(ue,ne.itemId,re),await Je()),await Go(ue,"checklist",ke.value)}catch(Re){if(console.error("Failed to toggle checklist item:",Re),Yt()||!Re.response){const Ye=ne.isCompleted?"checklist_uncomplete":"checklist_complete";await yn(Ye,{eventId:ue,itemId:ne.itemId,data:re}),ne.isCompleted=!ne.isCompleted,await a()}else Le.value=Re.response?.data?.message||"Failed to update checklist",setTimeout(()=>{Le.value=null},3e3)}finally{ye.value=!1}},je=ne=>{if(!ne.completionContextType||!ne.completionContextId)return null;if(ne.completionContextType==="Checkpoint"){const ue=C.value.find(Re=>Re.id===ne.completionContextId);if(!ue)return null;const re=ue.description?` - ${ue.description}`:"";return`At ${i.value.checkpoint} ${ue.name}${re}`}if(ne.completionContextType==="Area"){const ue=x.value.find(re=>re.id===ne.completionContextId);return ue?`At ${i.value.area} ${ue.name}`:null}return ne.completionContextType==="Personal"?"Personal item":null},mt=()=>{if(!("geolocation"in navigator)){console.warn("Geolocation not supported");return}console.log("Starting location tracking..."),ve=navigator.geolocation.watchPosition(ne=>{Y.value={lat:ne.coords.latitude,lng:ne.coords.longitude},console.log("Location updated:",Y.value)},ne=>{console.warn("Geolocation error:",{1:"Location permission denied. Please allow location access in your browser settings.",2:"Location unavailable. Make sure GPS is enabled on your device.",3:"Location request timed out. Please try again."}[ne.code]||ne.message)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4})},St=()=>{ve!==null&&(navigator.geolocation.clearWatch(ve),ve=null)},Lt=async ne=>{X.value=ne.id,Q.value=ne.id,le.value=null;const ue=s.params.eventId;try{if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by your browser");const re=await new Promise((Ye,vt)=>{navigator.geolocation.getCurrentPosition(Ye,vt,{enableHighAccuracy:!0,timeout:1e4})}),Re={eventId:ue,assignmentId:ne.id,latitude:re.coords.latitude,longitude:re.coords.longitude,manualCheckIn:!1};if(Yt()){await yn("checkin",Re);const Ye=M.value.findIndex(vt=>vt.id===ne.id);Ye!==-1&&(M.value[Ye]={...M.value[Ye],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"GPS (pending)",checkInLatitude:re.coords.latitude,checkInLongitude:re.coords.longitude}),await a(),await Go(ue,"locations",C.value)}else{const Ye=await Is.checkIn(Re),vt=M.value.findIndex(Ut=>Ut.id===ne.id);vt!==-1&&(M.value[vt]=Ye.data)}}catch(re){if(Yt()||!re.response){const Re={eventId:ue,assignmentId:ne.id,latitude:Y.value?.lat||null,longitude:Y.value?.lng||null,manualCheckIn:!0};await yn("checkin",Re);const Ye=M.value.findIndex(vt=>vt.id===ne.id);Ye!==-1&&(M.value[Ye]={...M.value[Ye],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"Manual (pending)"}),await a()}else re.response?.data?.message?le.value=re.response.data.message:re.message?le.value=re.message:le.value="Failed to check in. Please try manual check-in."}finally{X.value=null,Q.value=null}},gt=ne=>{te.value="Manual Check-In",j.value="Are you sure you want to check in manually? This should only be used if GPS is not available.",ce.value=async()=>{X.value=ne.id,Q.value=ne.id,le.value=null;const ue=s.params.eventId,re={eventId:ue,assignmentId:ne.id,latitude:null,longitude:null,manualCheckIn:!0};try{if(Yt()){await yn("checkin",re);const Re=M.value.findIndex(Ye=>Ye.id===ne.id);Re!==-1&&(M.value[Re]={...M.value[Re],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"Manual (pending)"}),await a(),await Go(ue,"locations",C.value)}else{const Re=await Is.checkIn(re),Ye=M.value.findIndex(vt=>vt.id===ne.id);Ye!==-1&&(M.value[Ye]=Re.data)}}catch(Re){if(Yt()||!Re.response){await yn("checkin",re);const Ye=M.value.findIndex(vt=>vt.id===ne.id);Ye!==-1&&(M.value[Ye]={...M.value[Ye],isCheckedIn:!0,checkInTime:new Date().toISOString(),checkInMethod:"Manual (pending)"}),await a()}else le.value="Failed to check in manually. Please contact the admin."}finally{X.value=null,Q.value=null}},Z.value=!0},sn=()=>{Z.value=!1,ce.value&&(ce.value(),ce.value=null)},jt=()=>{Z.value=!1,ce.value=null},bt=async()=>{try{await es.logout()}catch{}localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${s.params.eventId}`),l.value=!1,p.value=null,f.value=null,M.value=[],ke.value=[],Ie.value=[],r.push("/")},nt=ne=>ne?new Date(ne).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",Et=ne=>ne?new Date(ne).toLocaleString():"",kt=(ne,ue)=>{if(!ne&&!ue)return"";const re=ne?nt(ne):"?",Re=ue?nt(ue):"?";return`${re} - ${Re}`},ss=ne=>ne?new Date(ne).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",vn=ne=>ne?new Date(ne).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Wn=ne=>ne?ne.replace(/([A-Z])/g," $1").replace(/^./,ue=>ue.toUpperCase()).trim():"";Ln(async()=>{const ne=s.params.eventId,ue=s.query.code;E.value=!0;try{ue?await xe(ne,ue):await ge(ne)&&await Ue()}finally{E.value=!1}l.value&&(mt(),"requestIdleCallback"in window?requestIdleCallback(()=>{Pe()},{timeout:5e3}):setTimeout(()=>{Pe()},2e3))}),qe(l,ne=>{ne?mt():St()}),qe(()=>s.query.code,async ne=>{if(ne&&l.value){E.value=!0;try{await xe(s.params.eventId,ne)}finally{E.value=!1}}});let Wt=null;const xn=()=>{Wt||(Wt=setInterval(async()=>{if(v.value?.marshalId)try{await es.getMe(s.params.eventId)}catch(ne){console.debug("Heartbeat failed:",ne)}},300*1e3))},Rs=()=>{Wt&&(clearInterval(Wt),Wt=null)};return Ds(()=>{St(),Rs()}),(ne,ue)=>(g(),_("div",sO,[Oe(nO),u("header",iO,[u("div",oO,[b.value?(g(),_("h1",aO,S(b.value.name),1)):B("",!0),b.value?.eventDate?(g(),_("div",rO,S(vn(b.value.eventDate)),1)):B("",!0)]),u("div",lO,[l.value?(g(),_("button",{key:0,onClick:ue[0]||(ue[0]=re=>K.value=!0),class:"btn-emergency"}," Emergency Info ")):B("",!0),l.value?(g(),_("button",{key:1,onClick:bt,class:"btn-logout"}," Logout "+S(p.value?.name||""),1)):B("",!0)])]),u("div",cO,[E.value?(g(),_("div",uO,[...ue[9]||(ue[9]=[u("div",{class:"loading"},"Loading...",-1)])])):!l.value&&!h.value?(g(),_("div",dO,[ue[10]||(ue[10]=u("h2",null,"Welcome",-1)),ue[11]||(ue[11]=u("p",{class:"instruction"},"Please use the login link sent to you to access your marshal dashboard.",-1)),c.value?(g(),_("p",hO,"Authenticating...")):B("",!0)])):h.value?(g(),_("div",fO,[ue[12]||(ue[12]=u("h2",null,"Login Failed",-1)),u("p",pO,S(h.value),1),ue[13]||(ue[13]=u("p",{class:"instruction"},"Please contact the event organizer for a new login link.",-1))])):(g(),_("div",mO,[I.value||D.value?(g(),_("div",vO,[u("div",gO,[p.value?.email?(g(),_("span",_O,S(p.value.email),1)):B("",!0)]),I.value?(g(),_("div",yO,[u("button",{onClick:A,class:"btn-mode-switch"}," Switch to Admin ")])):D.value?(g(),_("div",bO,[...ue[14]||(ue[14]=[u("span",{class:"reauth-hint",title:"Login via admin flow to access admin features"}," Admin access requires re-login ",-1)])])):B("",!0)])):B("",!0),u("div",kO,[b.value?.eventDate||b.value?.description?(g(),_("div",wO,[u("button",{class:Fe(["accordion-header",{active:P.value==="eventDetails"}]),onClick:ue[1]||(ue[1]=re=>Se("eventDetails"))},[u("span",CO,[u("span",{class:"section-icon",innerHTML:U(bn)("event")},null,8,LO),ue[15]||(ue[15]=Ve(" Event details ",-1))]),u("span",xO,S(P.value==="eventDetails"?"":"+"),1)],2),P.value==="eventDetails"?(g(),_("div",SO,[u("div",TO,[b.value.eventDate?(g(),_("div",IO,[ue[16]||(ue[16]=u("span",{class:"detail-label"},"Date and time",-1)),u("span",AO,S(ss(b.value.eventDate)),1)])):B("",!0),b.value.description?(g(),_("div",EO,[ue[17]||(ue[17]=u("span",{class:"detail-label"},"Description",-1)),u("p",MO,S(b.value.description),1)])):B("",!0)])])):B("",!0)])):B("",!0),u("div",$O,[u("button",{class:Fe(["accordion-header",{active:P.value==="map"}]),onClick:ue[2]||(ue[2]=re=>Se("map"))},[u("span",PO,[u("span",{class:"section-icon",innerHTML:U(bn)("course")},null,8,DO),Ve(" "+S(U(n).course)+" ",1),Y.value?(g(),_("span",OO,"GPS Active")):(g(),_("span",RO,"GPS Inactive"))]),u("span",NO,S(P.value==="map"?"":"+"),1)],2),P.value==="map"?(g(),_("div",BO,[Oe(_a,{locations:C.value,route:W.value,center:Ae.value,zoom:15,"user-location":Y.value,"highlight-location-ids":V.value,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-ids"])])):B("",!0)]),u("div",FO,[u("button",{class:Fe(["accordion-header",{active:P.value==="assignments"}]),onClick:ue[3]||(ue[3]=re=>Se("assignments"))},[u("span",zO,[u("span",{class:"section-icon",innerHTML:U(bn)("checkpoint")},null,8,UO),Ve(" Your "+S(U(i).checkpoints)+" ("+S(M.value.length)+") ",1)]),u("span",HO,S(P.value==="assignments"?"":"+"),1)],2),P.value==="assignments"?(g(),_("div",VO,[M.value.length===0?(g(),_("div",ZO,[u("p",null,"You don't have any "+S(U(i).checkpoint)+" assignments yet.",1)])):(g(),_("div",jO,[(g(!0),_(Ce,null,De(F.value,re=>(g(),_("div",{key:re.id,class:"checkpoint-accordion-section"},[u("button",{class:Fe(["checkpoint-accordion-header",{active:Ee.value===re.id,"checked-in":re.isCheckedIn}]),onClick:Re=>Me(re.id)},[u("div",WO,[u("div",GO,[re.isCheckedIn?(g(),_("span",KO,"")):B("",!0),u("span",JO,S(re.location?.name||re.locationName),1),re.areaName?(g(),_("span",YO,S(re.areaName),1)):B("",!0),re.location?.startTime||re.location?.endTime?(g(),_("span",XO,S(kt(re.location.startTime,re.location.endTime)),1)):B("",!0)]),re.location?.description?(g(),_("div",QO,S(re.location.description),1)):B("",!0)]),u("span",eR,S(Ee.value===re.id?"":"+"),1)],10,qO),Ee.value===re.id?(g(),_("div",tR,[re.location?(g(),_("div",nR,[Oe(_a,{locations:C.value,route:W.value,center:{lat:re.location.latitude,lng:re.location.longitude},zoom:16,"user-location":Y.value,"highlight-location-id":re.locationId,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-id"])])):B("",!0),u("div",sR,[u("div",iR,S(U(n).people)+":",1),u("div",oR,[(g(!0),_(Ce,null,De(re.allMarshals,Re=>(g(),_("span",{key:Re.marshalId,class:Fe(["marshal-tag",{"is-you":Re.marshalId===f.value,"checked-in":Re.isCheckedIn}])},[Ve(S(Re.marshalName)+S(Re.marshalId===f.value?" (you)":"")+" ",1),Re.isCheckedIn?(g(),_("span",aR,"")):B("",!0)],2))),128))])]),re.areaContacts.length>0?(g(),_("div",rR,[u("div",lR,S(U(n).area)+" contacts:",1),u("div",cR,[(g(!0),_(Ce,null,De(re.areaContacts,Re=>(g(),_("div",{key:Re.marshalId,class:"contact-item"},[u("div",uR,[u("div",dR,S(Re.marshalName),1),Re.role?(g(),_("div",hR,S(Re.role),1)):B("",!0),Re.phone?(g(),_("div",fR,S(Re.phone),1)):B("",!0),Re.email?(g(),_("div",pR,S(Re.email),1)):B("",!0)]),u("div",mR,[Re.phone?(g(),_("a",{key:0,href:`tel:${Re.phone}`,class:"contact-link"},[...ue[18]||(ue[18]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Ve(" Call ",-1)])],8,vR)):B("",!0),Re.phone?(g(),_("a",{key:1,href:`sms:${Re.phone}`,class:"contact-link"},[...ue[19]||(ue[19]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Ve(" Text ",-1)])],8,gR)):B("",!0),Re.email?(g(),_("a",{key:2,href:`mailto:${Re.email}`,class:"contact-link"},[...ue[20]||(ue[20]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Ve(" Email ",-1)])],8,_R)):B("",!0)])]))),128))])])):B("",!0),re.isCheckedIn?(g(),_("div",yR,[ue[22]||(ue[22]=u("span",{class:"check-icon"},"",-1)),u("div",null,[ue[21]||(ue[21]=u("strong",null,"Checked In",-1)),u("p",bR,S(nt(re.checkInTime)),1)])])):(g(),_("div",kR,[u("button",{onClick:Re=>Lt(re),class:"btn btn-primary",disabled:X.value===re.id},S(X.value===re.id?"Checking in...":"GPS Check-In"),9,wR),u("button",{onClick:Re=>gt(re),class:"btn btn-secondary",disabled:X.value===re.id}," Manual ",8,CR)])),le.value&&Q.value===re.id?(g(),_("div",LR,S(le.value),1)):B("",!0)])):B("",!0)]))),128))]))])):B("",!0)]),u("div",xR,[u("button",{class:Fe(["accordion-header",{active:P.value==="checklist"}]),onClick:ue[4]||(ue[4]=re=>Se("checklist"))},[u("span",SR,[u("span",{class:"section-icon",innerHTML:U(bn)("checklist")},null,8,TR),Ve(" Your "+S(U(i).checklists)+" ("+S(z.value)+" of "+S(R.value.length)+" complete) ",1)]),u("span",IR,S(P.value==="checklist"?"":"+"),1)],2),P.value==="checklist"?(g(),_("div",AR,[me.value?(g(),_("div",ER,"Loading checklist...")):Le.value?(g(),_("div",MR,S(Le.value),1)):R.value.length===0?(g(),_("div",$R,[u("p",null,"No "+S(U(i).checklists)+" for you.",1)])):(g(),_("div",PR,[(g(!0),_(Ce,null,De(R.value,re=>(g(),_("div",{key:re.itemId,class:Fe(["checklist-item",{"item-completed":re.isCompleted}])},[u("div",DR,[u("input",{type:"checkbox",checked:re.isCompleted,disabled:!re.canBeCompletedByMe||ye.value,onChange:Re=>Qe(re)},null,40,OR)]),u("div",RR,[u("div",{class:Fe(["item-text",{"text-completed":re.isCompleted}])},S(re.text),3),je(re)?(g(),_("div",NR,S(je(re)),1)):B("",!0),re.isCompleted?(g(),_("div",BR,[u("span",FR," Completed by "+S(re.completedByActorName||"Unknown"),1),u("span",zR,S(Et(re.completedAt)),1)])):B("",!0)])],2))),128))]))])):B("",!0)]),he.value.length>0||ae.value?(g(),_("div",UR,[u("button",{class:Fe(["accordion-header",{active:P.value==="eventContacts"}]),onClick:ue[5]||(ue[5]=re=>Se("eventContacts"))},[u("span",HR,[u("span",{class:"section-icon",innerHTML:U(bn)("contacts")},null,8,VR),Ve(" Your contacts ("+S(he.value.length)+") ",1)]),u("span",ZR,S(P.value==="eventContacts"?"":"+"),1)],2),P.value==="eventContacts"?(g(),_("div",jR,[ae.value?(g(),_("div",qR,"Loading contacts...")):(g(),_("div",WR,[(g(!0),_(Ce,null,De(he.value,re=>(g(),_("div",{key:re.contactId,class:Fe(["contact-item",{"primary-contact":re.isPrimary}])},[u("div",GR,[u("div",KR,[re.isPrimary?(g(),_("span",JR,"")):B("",!0),u("span",YR,S(re.name),1),re.role?(g(),_("span",XR,S(Wn(re.role)),1)):B("",!0)]),re.notes?(g(),_("div",QR,S(re.notes),1)):B("",!0),re.phone?(g(),_("div",eN,S(re.phone),1)):B("",!0),re.email?(g(),_("div",tN,S(re.email),1)):B("",!0)]),u("div",nN,[re.phone?(g(),_("a",{key:0,href:`tel:${re.phone}`,class:"contact-link"},[...ue[23]||(ue[23]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Ve(" Call ",-1)])],8,sN)):B("",!0),re.phone?(g(),_("a",{key:1,href:`sms:${re.phone}`,class:"contact-link"},[...ue[24]||(ue[24]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Ve(" Text ",-1)])],8,iN)):B("",!0),re.email?(g(),_("a",{key:2,href:`mailto:${re.email}`,class:"contact-link"},[...ue[25]||(ue[25]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Ve(" Email ",-1)])],8,oN)):B("",!0)])],2))),128))]))])):B("",!0)])):B("",!0),u("div",aN,[u("button",{class:Fe(["accordion-header",{active:P.value==="notes"}]),onClick:ue[6]||(ue[6]=re=>Se("notes"))},[u("span",rN,[u("span",{class:"section-icon",innerHTML:U(bn)("notes")},null,8,lN),Ve(" Your notes ("+S(be.value.length)+") ",1)]),u("span",cN,S(P.value==="notes"?"":"+"),1)],2),P.value==="notes"?(g(),_("div",uN,[Oe(al,{"event-id":U(s).params.eventId,"all-notes":be.value,locations:C.value,areas:x.value,assignments:M.value,"show-scope":!1,onNotesChanged:He},null,8,["event-id","all-notes","locations","areas","assignments"])])):B("",!0)]),k.value?(g(),_("div",dN,[u("button",{class:Fe(["accordion-header",{active:P.value==="areaLead"}]),onClick:ue[7]||(ue[7]=re=>Se("areaLead"))},[u("span",hN,[u("span",{class:"section-icon",innerHTML:U(bn)("people")},null,8,fN),Ve(" Your "+S(U(i).people)+" ",1),de.value?.areas?.length>0?(g(),_("span",pN,[(g(!0),_(Ce,null,De(de.value.areas,re=>(g(),_("span",{key:re.areaId,class:"area-lead-badge",style:nn({backgroundColor:re.color||"#667eea"})},S(re.name),5))),128))])):B("",!0)]),u("span",mN,S(P.value==="areaLead"?"":"+"),1)],2),P.value==="areaLead"?(g(),_("div",vN,[Oe(WD,{ref_key:"areaLeadRef",ref:de,"event-id":U(s).params.eventId,"area-ids":T.value,"marshal-id":f.value,route:W.value,onChecklistUpdated:Je},null,8,["event-id","area-ids","marshal-id","route"])])):B("",!0)])):B("",!0)])]))]),Oe(PP,{show:K.value,contacts:fe.value,onClose:ue[8]||(ue[8]=re=>K.value=!1)},null,8,["show","contacts"]),Oe(ol,{show:Z.value,title:te.value,message:j.value,onConfirm:sn,onCancel:jt},null,8,["show","title","message"])]))}},_N=Ze(gN,[["__scopeId","data-v-e1ff2978"]]),yN=[{path:"/",name:"Home",component:ey},{path:"/admin/login",name:"AdminLogin",component:Zb},{path:"/admin/verify",name:"AdminVerify",component:Yb},{path:"/admin/dashboard",name:"AdminDashboard",component:jk,meta:{requiresAuth:!0}},{path:"/admin/profile",name:"AdminProfile",component:gw,meta:{requiresAuth:!0}},{path:"/admin/event/:eventId",name:"AdminEventManage",component:bP,meta:{requiresAuth:!0}},{path:"/event/:eventId",name:"MarshalView",component:_N},{path:"/:pathMatch(.*)*",redirect:"/"}],wp=G_({history:S_("/VolunteerCheckin/testing/"),routes:yN});wp.beforeEach((e,n,i)=>{const a=localStorage.getItem("adminEmail");e.meta.requiresAuth&&!a?i({name:"AdminLogin"}):i()});Os().then(()=>{console.log("Offline database initialized")}).catch(e=>{console.warn("Failed to initialize offline database:",e)});const nu=Ag(Ug);nu.use($g());nu.use(wp);nu.mount("#app");
