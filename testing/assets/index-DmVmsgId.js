(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();function Rl(e){const n=Object.create(null);for(const i of e.split(","))n[i]=1;return i=>i in n}const bt={},Li=[],Vn=()=>{},ed=()=>!1,Xa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Nl=e=>e.startsWith("onUpdate:"),Xt=Object.assign,Bl=(e,n)=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)},qf=Object.prototype.hasOwnProperty,ft=(e,n)=>qf.call(e,n),je=Array.isArray,xi=e=>Uo(e)==="[object Map]",Ri=e=>Uo(e)==="[object Set]",Oc=e=>Uo(e)==="[object Date]",nt=e=>typeof e=="function",Dt=e=>typeof e=="string",Mn=e=>typeof e=="symbol",kt=e=>e!==null&&typeof e=="object",td=e=>(kt(e)||nt(e))&&nt(e.then)&&nt(e.catch),nd=Object.prototype.toString,Uo=e=>nd.call(e),Wf=e=>Uo(e).slice(8,-1),sd=e=>Uo(e)==="[object Object]",Qa=e=>Dt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lo=Rl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),er=e=>{const n=Object.create(null);return(i=>n[i]||(n[i]=e(i)))},jf=/-\w/g,Ln=er(e=>e.replace(jf,n=>n.slice(1).toUpperCase())),Gf=/\B([A-Z])/g,Ps=er(e=>e.replace(Gf,"-$1").toLowerCase()),tr=er(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kr=er(e=>e?`on${tr(e)}`:""),Is=(e,n)=>!Object.is(e,n),Sa=(e,...n)=>{for(let i=0;i<e.length;i++)e[i](...n)},id=(e,n,i,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:i})},nr=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Dc;const sr=()=>Dc||(Dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qt(e){if(je(e)){const n={};for(let i=0;i<e.length;i++){const r=e[i],s=Dt(r)?Xf(r):Qt(r);if(s)for(const a in s)n[a]=s[a]}return n}else if(Dt(e)||kt(e))return e}const Kf=/;(?![^(]*\))/g,Yf=/:([^]+)/,Jf=/\/\*[^]*?\*\//g;function Xf(e){const n={};return e.replace(Jf,"").split(Kf).forEach(i=>{if(i){const r=i.split(Yf);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function Ue(e){let n="";if(Dt(e))n=e;else if(je(e))for(let i=0;i<e.length;i++){const r=Ue(e[i]);r&&(n+=r+" ")}else if(kt(e))for(const i in e)e[i]&&(n+=i+" ");return n.trim()}const Qf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ep=Rl(Qf);function od(e){return!!e||e===""}function tp(e,n){if(e.length!==n.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=ti(e[r],n[r]);return i}function ti(e,n){if(e===n)return!0;let i=Oc(e),r=Oc(n);if(i||r)return i&&r?e.getTime()===n.getTime():!1;if(i=Mn(e),r=Mn(n),i||r)return e===n;if(i=je(e),r=je(n),i||r)return i&&r?tp(e,n):!1;if(i=kt(e),r=kt(n),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,a=Object.keys(n).length;if(s!==a)return!1;for(const l in e){const d=e.hasOwnProperty(l),h=n.hasOwnProperty(l);if(d&&!h||!d&&h||!ti(e[l],n[l]))return!1}}return String(e)===String(n)}function Fl(e,n){return e.findIndex(i=>ti(i,n))}const ad=e=>!!(e&&e.__v_isRef===!0),E=e=>Dt(e)?e:e==null?"":je(e)||kt(e)&&(e.toString===nd||!nt(e.toString))?ad(e)?E(e.value):JSON.stringify(e,rd,2):String(e),rd=(e,n)=>ad(n)?rd(e,n.value):xi(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[r,s],a)=>(i[Yr(r,a)+" =>"]=s,i),{})}:Ri(n)?{[`Set(${n.size})`]:[...n.values()].map(i=>Yr(i))}:Mn(n)?Yr(n):kt(n)&&!je(n)&&!sd(n)?String(n):n,Yr=(e,n="")=>{var i;return Mn(e)?`Symbol(${(i=e.description)!=null?i:n})`:e};let Gt;class ld{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Gt,!n&&Gt&&(this.index=(Gt.scopes||(Gt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].pause();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].resume();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].resume()}}run(n){if(this._active){const i=Gt;try{return Gt=this,n()}finally{Gt=i}}}on(){++this._on===1&&(this.prevScope=Gt,Gt=this)}off(){this._on>0&&--this._on===0&&(Gt=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function cd(e){return new ld(e)}function ud(){return Gt}function np(e,n=!1){Gt&&Gt.cleanups.push(e)}let Ct;const Jr=new WeakSet;class dd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Gt&&Gt.active&&Gt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jr.has(this)&&(Jr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Rc(this),pd(this);const n=Ct,i=Sn;Ct=this,Sn=!0;try{return this.fn()}finally{md(this),Ct=n,Sn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Hl(n);this.deps=this.depsTail=void 0,Rc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pl(this)&&this.run()}get dirty(){return pl(this)}}let hd=0,xo,Ao;function fd(e,n=!1){if(e.flags|=8,n){e.next=Ao,Ao=e;return}e.next=xo,xo=e}function zl(){hd++}function Ul(){if(--hd>0)return;if(Ao){let n=Ao;for(Ao=void 0;n;){const i=n.next;n.next=void 0,n.flags&=-9,n=i}}let e;for(;xo;){let n=xo;for(xo=void 0;n;){const i=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=i}}if(e)throw e}function pd(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function md(e){let n,i=e.depsTail,r=i;for(;r;){const s=r.prevDep;r.version===-1?(r===i&&(i=s),Hl(r),sp(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=n,e.depsTail=i}function pl(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(vd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function vd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$o)||(e.globalVersion=$o,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!pl(e))))return;e.flags|=2;const n=e.dep,i=Ct,r=Sn;Ct=e,Sn=!0;try{pd(e);const s=e.fn(e._value);(n.version===0||Is(s,e._value))&&(e.flags|=128,e._value=s,n.version++)}catch(s){throw n.version++,s}finally{Ct=i,Sn=r,md(e),e.flags&=-3}}function Hl(e,n=!1){const{dep:i,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let a=i.computed.deps;a;a=a.nextDep)Hl(a,!0)}!n&&!--i.sc&&i.map&&i.map.delete(i.key)}function sp(e){const{prevDep:n,nextDep:i}=e;n&&(n.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=n,e.nextDep=void 0)}let Sn=!0;const gd=[];function ds(){gd.push(Sn),Sn=!1}function hs(){const e=gd.pop();Sn=e===void 0?!0:e}function Rc(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const i=Ct;Ct=void 0;try{n()}finally{Ct=i}}}let $o=0;class ip{constructor(n,i){this.sub=n,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vl{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!Ct||!Sn||Ct===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Ct)i=this.activeLink=new ip(Ct,this),Ct.deps?(i.prevDep=Ct.depsTail,Ct.depsTail.nextDep=i,Ct.depsTail=i):Ct.deps=Ct.depsTail=i,_d(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=Ct.depsTail,i.nextDep=void 0,Ct.depsTail.nextDep=i,Ct.depsTail=i,Ct.deps===i&&(Ct.deps=r)}return i}trigger(n){this.version++,$o++,this.notify(n)}notify(n){zl();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Ul()}}}function _d(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)_d(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const za=new WeakMap,Xs=Symbol(""),ml=Symbol(""),Oo=Symbol("");function Kt(e,n,i){if(Sn&&Ct){let r=za.get(e);r||za.set(e,r=new Map);let s=r.get(i);s||(r.set(i,s=new Vl),s.map=r,s.key=i),s.track()}}function as(e,n,i,r,s,a){const l=za.get(e);if(!l){$o++;return}const d=h=>{h&&h.trigger()};if(zl(),n==="clear")l.forEach(d);else{const h=je(e),m=h&&Qa(i);if(h&&i==="length"){const f=Number(r);l.forEach((v,b)=>{(b==="length"||b===Oo||!Mn(b)&&b>=f)&&d(v)})}else switch((i!==void 0||l.has(void 0))&&d(l.get(i)),m&&d(l.get(Oo)),n){case"add":h?m&&d(l.get("length")):(d(l.get(Xs)),xi(e)&&d(l.get(ml)));break;case"delete":h||(d(l.get(Xs)),xi(e)&&d(l.get(ml)));break;case"set":xi(e)&&d(l.get(Xs));break}}Ul()}function op(e,n){const i=za.get(e);return i&&i.get(n)}function _i(e){const n=ut(e);return n===e?n:(Kt(n,"iterate",Oo),gn(e)?n:n.map(Pn))}function ir(e){return Kt(e=ut(e),"iterate",Oo),e}function Ls(e,n){return fs(e)?us(e)?Ii(Pn(n)):Ii(n):Pn(n)}const ap={__proto__:null,[Symbol.iterator](){return Xr(this,Symbol.iterator,e=>Ls(this,e))},concat(...e){return _i(this).concat(...e.map(n=>je(n)?_i(n):n))},entries(){return Xr(this,"entries",e=>(e[1]=Ls(this,e[1]),e))},every(e,n){return ns(this,"every",e,n,void 0,arguments)},filter(e,n){return ns(this,"filter",e,n,i=>i.map(r=>Ls(this,r)),arguments)},find(e,n){return ns(this,"find",e,n,i=>Ls(this,i),arguments)},findIndex(e,n){return ns(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return ns(this,"findLast",e,n,i=>Ls(this,i),arguments)},findLastIndex(e,n){return ns(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return ns(this,"forEach",e,n,void 0,arguments)},includes(...e){return Qr(this,"includes",e)},indexOf(...e){return Qr(this,"indexOf",e)},join(e){return _i(this).join(e)},lastIndexOf(...e){return Qr(this,"lastIndexOf",e)},map(e,n){return ns(this,"map",e,n,void 0,arguments)},pop(){return po(this,"pop")},push(...e){return po(this,"push",e)},reduce(e,...n){return Nc(this,"reduce",e,n)},reduceRight(e,...n){return Nc(this,"reduceRight",e,n)},shift(){return po(this,"shift")},some(e,n){return ns(this,"some",e,n,void 0,arguments)},splice(...e){return po(this,"splice",e)},toReversed(){return _i(this).toReversed()},toSorted(e){return _i(this).toSorted(e)},toSpliced(...e){return _i(this).toSpliced(...e)},unshift(...e){return po(this,"unshift",e)},values(){return Xr(this,"values",e=>Ls(this,e))}};function Xr(e,n,i){const r=ir(e),s=r[n]();return r!==e&&!gn(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.done||(a.value=i(a.value)),a}),s}const rp=Array.prototype;function ns(e,n,i,r,s,a){const l=ir(e),d=l!==e&&!gn(e),h=l[n];if(h!==rp[n]){const v=h.apply(e,a);return d?Pn(v):v}let m=i;l!==e&&(d?m=function(v,b){return i.call(this,Ls(e,v),b,e)}:i.length>2&&(m=function(v,b){return i.call(this,v,b,e)}));const f=h.call(l,m,r);return d&&s?s(f):f}function Nc(e,n,i,r){const s=ir(e);let a=i;return s!==e&&(gn(e)?i.length>3&&(a=function(l,d,h){return i.call(this,l,d,h,e)}):a=function(l,d,h){return i.call(this,l,Ls(e,d),h,e)}),s[n](a,...r)}function Qr(e,n,i){const r=ut(e);Kt(r,"iterate",Oo);const s=r[n](...i);return(s===-1||s===!1)&&or(i[0])?(i[0]=ut(i[0]),r[n](...i)):s}function po(e,n,i=[]){ds(),zl();const r=ut(e)[n].apply(e,i);return Ul(),hs(),r}const lp=Rl("__proto__,__v_isRef,__isVue"),yd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mn));function cp(e){Mn(e)||(e=String(e));const n=ut(this);return Kt(n,"has",e),n.hasOwnProperty(e)}class bd{constructor(n=!1,i=!1){this._isReadonly=n,this._isShallow=i}get(n,i,r){if(i==="__v_skip")return n.__v_skip;const s=this._isReadonly,a=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return a;if(i==="__v_raw")return r===(s?a?yp:Ld:a?Cd:wd).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const l=je(n);if(!s){let h;if(l&&(h=ap[i]))return h;if(i==="hasOwnProperty")return cp}const d=Reflect.get(n,i,$t(n)?n:r);if((Mn(i)?yd.has(i):lp(i))||(s||Kt(n,"get",i),a))return d;if($t(d)){const h=l&&Qa(i)?d:d.value;return s&&kt(h)?gl(h):h}return kt(d)?s?gl(d):Ho(d):d}}class kd extends bd{constructor(n=!1){super(!1,n)}set(n,i,r,s){let a=n[i];const l=je(n)&&Qa(i);if(!this._isShallow){const m=fs(a);if(!gn(r)&&!fs(r)&&(a=ut(a),r=ut(r)),!l&&$t(a)&&!$t(r))return m||(a.value=r),!0}const d=l?Number(i)<n.length:ft(n,i),h=Reflect.set(n,i,r,$t(n)?n:s);return n===ut(s)&&(d?Is(r,a)&&as(n,"set",i,r):as(n,"add",i,r)),h}deleteProperty(n,i){const r=ft(n,i);n[i];const s=Reflect.deleteProperty(n,i);return s&&r&&as(n,"delete",i,void 0),s}has(n,i){const r=Reflect.has(n,i);return(!Mn(i)||!yd.has(i))&&Kt(n,"has",i),r}ownKeys(n){return Kt(n,"iterate",je(n)?"length":Xs),Reflect.ownKeys(n)}}class up extends bd{constructor(n=!1){super(!0,n)}set(n,i){return!0}deleteProperty(n,i){return!0}}const dp=new kd,hp=new up,fp=new kd(!0);const vl=e=>e,La=e=>Reflect.getPrototypeOf(e);function pp(e,n,i){return function(...r){const s=this.__v_raw,a=ut(s),l=xi(a),d=e==="entries"||e===Symbol.iterator&&l,h=e==="keys"&&l,m=s[e](...r),f=i?vl:n?Ii:Pn;return!n&&Kt(a,"iterate",h?ml:Xs),{next(){const{value:v,done:b}=m.next();return b?{value:v,done:b}:{value:d?[f(v[0]),f(v[1])]:f(v),done:b}},[Symbol.iterator](){return this}}}}function xa(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function mp(e,n){const i={get(s){const a=this.__v_raw,l=ut(a),d=ut(s);e||(Is(s,d)&&Kt(l,"get",s),Kt(l,"get",d));const{has:h}=La(l),m=n?vl:e?Ii:Pn;if(h.call(l,s))return m(a.get(s));if(h.call(l,d))return m(a.get(d));a!==l&&a.get(s)},get size(){const s=this.__v_raw;return!e&&Kt(ut(s),"iterate",Xs),s.size},has(s){const a=this.__v_raw,l=ut(a),d=ut(s);return e||(Is(s,d)&&Kt(l,"has",s),Kt(l,"has",d)),s===d?a.has(s):a.has(s)||a.has(d)},forEach(s,a){const l=this,d=l.__v_raw,h=ut(d),m=n?vl:e?Ii:Pn;return!e&&Kt(h,"iterate",Xs),d.forEach((f,v)=>s.call(a,m(f),m(v),l))}};return Xt(i,e?{add:xa("add"),set:xa("set"),delete:xa("delete"),clear:xa("clear")}:{add(s){!n&&!gn(s)&&!fs(s)&&(s=ut(s));const a=ut(this);return La(a).has.call(a,s)||(a.add(s),as(a,"add",s,s)),this},set(s,a){!n&&!gn(a)&&!fs(a)&&(a=ut(a));const l=ut(this),{has:d,get:h}=La(l);let m=d.call(l,s);m||(s=ut(s),m=d.call(l,s));const f=h.call(l,s);return l.set(s,a),m?Is(a,f)&&as(l,"set",s,a):as(l,"add",s,a),this},delete(s){const a=ut(this),{has:l,get:d}=La(a);let h=l.call(a,s);h||(s=ut(s),h=l.call(a,s)),d&&d.call(a,s);const m=a.delete(s);return h&&as(a,"delete",s,void 0),m},clear(){const s=ut(this),a=s.size!==0,l=s.clear();return a&&as(s,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=pp(s,e,n)}),i}function Zl(e,n){const i=mp(e,n);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(ft(i,s)&&s in r?i:r,s,a)}const vp={get:Zl(!1,!1)},gp={get:Zl(!1,!0)},_p={get:Zl(!0,!1)};const wd=new WeakMap,Cd=new WeakMap,Ld=new WeakMap,yp=new WeakMap;function bp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kp(e){return e.__v_skip||!Object.isExtensible(e)?0:bp(Wf(e))}function Ho(e){return fs(e)?e:ql(e,!1,dp,vp,wd)}function xd(e){return ql(e,!1,fp,gp,Cd)}function gl(e){return ql(e,!0,hp,_p,Ld)}function ql(e,n,i,r,s){if(!kt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const a=kp(e);if(a===0)return e;const l=s.get(e);if(l)return l;const d=new Proxy(e,a===2?r:i);return s.set(e,d),d}function us(e){return fs(e)?us(e.__v_raw):!!(e&&e.__v_isReactive)}function fs(e){return!!(e&&e.__v_isReadonly)}function gn(e){return!!(e&&e.__v_isShallow)}function or(e){return e?!!e.__v_raw:!1}function ut(e){const n=e&&e.__v_raw;return n?ut(n):e}function Wl(e){return!ft(e,"__v_skip")&&Object.isExtensible(e)&&id(e,"__v_skip",!0),e}const Pn=e=>kt(e)?Ho(e):e,Ii=e=>kt(e)?gl(e):e;function $t(e){return e?e.__v_isRef===!0:!1}function D(e){return Ad(e,!1)}function wp(e){return Ad(e,!0)}function Ad(e,n){return $t(e)?e:new Cp(e,n)}class Cp{constructor(n,i){this.dep=new Vl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?n:ut(n),this._value=i?n:Pn(n),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(n){const i=this._rawValue,r=this.__v_isShallow||gn(n)||fs(n);n=r?n:ut(n),Is(n,i)&&(this._rawValue=n,this._value=r?n:Pn(n),this.dep.trigger())}}function z(e){return $t(e)?e.value:e}const Lp={get:(e,n,i)=>n==="__v_raw"?e:z(Reflect.get(e,n,i)),set:(e,n,i,r)=>{const s=e[n];return $t(s)&&!$t(i)?(s.value=i,!0):Reflect.set(e,n,i,r)}};function Ed(e){return us(e)?e:new Proxy(e,Lp)}function xp(e){const n=je(e)?new Array(e.length):{};for(const i in e)n[i]=Ep(e,i);return n}class Ap{constructor(n,i,r){this._object=n,this._key=i,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=ut(n);let s=!0,a=n;if(!je(n)||!Qa(String(i)))do s=!or(a)||gn(a);while(s&&(a=a.__v_raw));this._shallow=s}get value(){let n=this._object[this._key];return this._shallow&&(n=z(n)),this._value=n===void 0?this._defaultValue:n}set value(n){if(this._shallow&&$t(this._raw[this._key])){const i=this._object[this._key];if($t(i)){i.value=n;return}}this._object[this._key]=n}get dep(){return op(this._raw,this._key)}}function Ep(e,n,i){return new Ap(e,n,i)}class Tp{constructor(n,i,r){this.fn=n,this.setter=i,this._value=void 0,this.dep=new Vl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ct!==this)return fd(this,!0),!0}get value(){const n=this.dep.track();return vd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Ip(e,n,i=!1){let r,s;return nt(e)?r=e:(r=e.get,s=e.set),new Tp(r,s,i)}const Aa={},Ua=new WeakMap;let js;function Sp(e,n=!1,i=js){if(i){let r=Ua.get(i);r||Ua.set(i,r=[]),r.push(e)}}function Mp(e,n,i=bt){const{immediate:r,deep:s,once:a,scheduler:l,augmentJob:d,call:h}=i,m=P=>s?P:gn(P)||s===!1||s===0?rs(P,1):rs(P);let f,v,b,A,M=!1,$=!1;if($t(e)?(v=()=>e.value,M=gn(e)):us(e)?(v=()=>m(e),M=!0):je(e)?($=!0,M=e.some(P=>us(P)||gn(P)),v=()=>e.map(P=>{if($t(P))return P.value;if(us(P))return m(P);if(nt(P))return h?h(P,2):P()})):nt(e)?n?v=h?()=>h(e,2):e:v=()=>{if(b){ds();try{b()}finally{hs()}}const P=js;js=f;try{return h?h(e,3,[A]):e(A)}finally{js=P}}:v=Vn,n&&s){const P=v,k=s===!0?1/0:s;v=()=>rs(P(),k)}const O=ud(),T=()=>{f.stop(),O&&O.active&&Bl(O.effects,f)};if(a&&n){const P=n;n=(...k)=>{P(...k),T()}}let x=$?new Array(e.length).fill(Aa):Aa;const w=P=>{if(!(!(f.flags&1)||!f.dirty&&!P))if(n){const k=f.run();if(s||M||($?k.some((C,I)=>Is(C,x[I])):Is(k,x))){b&&b();const C=js;js=f;try{const I=[k,x===Aa?void 0:$&&x[0]===Aa?[]:x,A];x=k,h?h(n,3,I):n(...I)}finally{js=C}}}else f.run()};return d&&d(w),f=new dd(v),f.scheduler=l?()=>l(w,!1):w,A=P=>Sp(P,!1,f),b=f.onStop=()=>{const P=Ua.get(f);if(P){if(h)h(P,4);else for(const k of P)k();Ua.delete(f)}},n?r?w(!0):x=f.run():l?l(w.bind(null,!0),!0):f.run(),T.pause=f.pause.bind(f),T.resume=f.resume.bind(f),T.stop=T,T}function rs(e,n=1/0,i){if(n<=0||!kt(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=n))return e;if(i.set(e,n),n--,$t(e))rs(e.value,n,i);else if(je(e))for(let r=0;r<e.length;r++)rs(e[r],n,i);else if(Ri(e)||xi(e))e.forEach(r=>{rs(r,n,i)});else if(sd(e)){for(const r in e)rs(e[r],n,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&rs(e[r],n,i)}return e}function Vo(e,n,i,r){try{return r?e(...r):e()}catch(s){ar(s,n,i)}}function Zn(e,n,i,r){if(nt(e)){const s=Vo(e,n,i,r);return s&&td(s)&&s.catch(a=>{ar(a,n,i)}),s}if(je(e)){const s=[];for(let a=0;a<e.length;a++)s.push(Zn(e[a],n,i,r));return s}}function ar(e,n,i,r=!0){const s=n?n.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=n&&n.appContext.config||bt;if(n){let d=n.parent;const h=n.proxy,m=`https://vuejs.org/error-reference/#runtime-${i}`;for(;d;){const f=d.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](e,h,m)===!1)return}d=d.parent}if(a){ds(),Vo(a,null,10,[e,h,m]),hs();return}}Pp(e,i,s,r,l)}function Pp(e,n,i,r=!0,s=!1){if(s)throw e;console.error(e)}const an=[];let zn=-1;const Ai=[];let xs=null,bi=0;const Td=Promise.resolve();let Ha=null;function Si(e){const n=Ha||Td;return e?n.then(this?e.bind(this):e):n}function $p(e){let n=zn+1,i=an.length;for(;n<i;){const r=n+i>>>1,s=an[r],a=Do(s);a<e||a===e&&s.flags&2?n=r+1:i=r}return n}function jl(e){if(!(e.flags&1)){const n=Do(e),i=an[an.length-1];!i||!(e.flags&2)&&n>=Do(i)?an.push(e):an.splice($p(n),0,e),e.flags|=1,Id()}}function Id(){Ha||(Ha=Td.then(Md))}function Op(e){je(e)?Ai.push(...e):xs&&e.id===-1?xs.splice(bi+1,0,e):e.flags&1||(Ai.push(e),e.flags|=1),Id()}function Bc(e,n,i=zn+1){for(;i<an.length;i++){const r=an[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;an.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Sd(e){if(Ai.length){const n=[...new Set(Ai)].sort((i,r)=>Do(i)-Do(r));if(Ai.length=0,xs){xs.push(...n);return}for(xs=n,bi=0;bi<xs.length;bi++){const i=xs[bi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}xs=null,bi=0}}const Do=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Md(e){try{for(zn=0;zn<an.length;zn++){const n=an[zn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Vo(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;zn<an.length;zn++){const n=an[zn];n&&(n.flags&=-2)}zn=-1,an.length=0,Sd(),Ha=null,(an.length||Ai.length)&&Md()}}let Wt=null,Pd=null;function Va(e){const n=Wt;return Wt=e,Pd=e&&e.type.__scopeId||null,n}function Ke(e,n=Wt,i){if(!n||e._n)return e;const r=(...s)=>{r._d&&Wa(-1);const a=Va(n);let l;try{l=e(...s)}finally{Va(a),r._d&&Wa(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function $e(e,n){if(Wt===null)return e;const i=dr(Wt),r=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[a,l,d,h=bt]=n[s];a&&(nt(a)&&(a={mounted:a,updated:a}),a.deep&&rs(l),r.push({dir:a,instance:i,value:l,oldValue:void 0,arg:d,modifiers:h}))}return e}function qs(e,n,i,r){const s=e.dirs,a=n&&n.dirs;for(let l=0;l<s.length;l++){const d=s[l];a&&(d.oldValue=a[l].value);let h=d.dir[r];h&&(ds(),Zn(h,i,8,[e.el,d,e,n]),hs())}}function Ma(e,n){if(Yt){let i=Yt.provides;const r=Yt.parent&&Yt.parent.provides;r===i&&(i=Yt.provides=Object.create(r)),i[e]=n}}function wn(e,n,i=!1){const r=rh();if(r||Qs){let s=Qs?Qs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&nt(n)?n.call(r&&r.proxy):n}}function Dp(){return!!(rh()||Qs)}const Rp=Symbol.for("v-scx"),Np=()=>wn(Rp);function We(e,n,i){return $d(e,n,i)}function $d(e,n,i=bt){const{immediate:r,deep:s,flush:a,once:l}=i,d=Xt({},i),h=n&&r||!n&&a!=="post";let m;if(Bo){if(a==="sync"){const A=Np();m=A.__watcherHandles||(A.__watcherHandles=[])}else if(!h){const A=()=>{};return A.stop=Vn,A.resume=Vn,A.pause=Vn,A}}const f=Yt;d.call=(A,M,$)=>Zn(A,f,M,$);let v=!1;a==="post"?d.scheduler=A=>{sn(A,f&&f.suspense)}:a!=="sync"&&(v=!0,d.scheduler=(A,M)=>{M?A():jl(A)}),d.augmentJob=A=>{n&&(A.flags|=4),v&&(A.flags|=2,f&&(A.id=f.uid,A.i=f))};const b=Mp(e,n,d);return Bo&&(m?m.push(b):h&&b()),b}function Bp(e,n,i){const r=this.proxy,s=Dt(e)?e.includes(".")?Od(r,e):()=>r[e]:e.bind(r,r);let a;nt(n)?a=n:(a=n.handler,i=n);const l=Zo(this),d=$d(s,a.bind(r),i);return l(),d}function Od(e,n){const i=n.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}const Dd=Symbol("_vte"),Fp=e=>e.__isTeleport,Eo=e=>e&&(e.disabled||e.disabled===""),Fc=e=>e&&(e.defer||e.defer===""),zc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Uc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,_l=(e,n)=>{const i=e&&e.to;return Dt(i)?n?n(i):null:i},Rd={name:"Teleport",__isTeleport:!0,process(e,n,i,r,s,a,l,d,h,m){const{mc:f,pc:v,pbc:b,o:{insert:A,querySelector:M,createText:$,createComment:O}}=m,T=Eo(n.props);let{shapeFlag:x,children:w,dynamicChildren:P}=n;if(e==null){const k=n.el=$(""),C=n.anchor=$("");A(k,i,r),A(C,i,r);const I=(V,ae)=>{x&16&&f(w,V,ae,s,a,l,d,h)},Z=()=>{const V=n.target=_l(n.props,M),ae=Nd(V,n,$,A);V&&(l!=="svg"&&zc(V)?l="svg":l!=="mathml"&&Uc(V)&&(l="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(V),T||(I(V,ae),Pa(n,!1)))};T&&(I(i,C),Pa(n,!0)),Fc(n.props)?(n.el.__isMounted=!1,sn(()=>{Z(),delete n.el.__isMounted},a)):Z()}else{if(Fc(n.props)&&e.el.__isMounted===!1){sn(()=>{Rd.process(e,n,i,r,s,a,l,d,h,m)},a);return}n.el=e.el,n.targetStart=e.targetStart;const k=n.anchor=e.anchor,C=n.target=e.target,I=n.targetAnchor=e.targetAnchor,Z=Eo(e.props),V=Z?i:C,ae=Z?k:I;if(l==="svg"||zc(C)?l="svg":(l==="mathml"||Uc(C))&&(l="mathml"),P?(b(e.dynamicChildren,P,V,s,a,l,d),Jl(e,n,!0)):h||v(e,n,V,ae,s,a,l,d,!1),T)Z?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Ea(n,i,k,m,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const ge=n.target=_l(n.props,M);ge&&Ea(n,ge,null,m,0)}else Z&&Ea(n,C,I,m,1);Pa(n,T)}},remove(e,n,i,{um:r,o:{remove:s}},a){const{shapeFlag:l,children:d,anchor:h,targetStart:m,targetAnchor:f,target:v,props:b}=e;if(v&&(s(m),s(f)),a&&s(h),l&16){const A=a||!Eo(b);for(let M=0;M<d.length;M++){const $=d[M];r($,n,i,A,!!$.dynamicChildren)}}},move:Ea,hydrate:zp};function Ea(e,n,i,{o:{insert:r},m:s},a=2){a===0&&r(e.targetAnchor,n,i);const{el:l,anchor:d,shapeFlag:h,children:m,props:f}=e,v=a===2;if(v&&r(l,n,i),(!v||Eo(f))&&h&16)for(let b=0;b<m.length;b++)s(m[b],n,i,2);v&&r(d,n,i)}function zp(e,n,i,r,s,a,{o:{nextSibling:l,parentNode:d,querySelector:h,insert:m,createText:f}},v){function b($,O,T,x){O.anchor=v(l($),O,d($),i,r,s,a),O.targetStart=T,O.targetAnchor=x}const A=n.target=_l(n.props,h),M=Eo(n.props);if(A){const $=A._lpa||A.firstChild;if(n.shapeFlag&16)if(M)b(e,n,$,$&&l($));else{n.anchor=l(e);let O=$;for(;O;){if(O&&O.nodeType===8){if(O.data==="teleport start anchor")n.targetStart=O;else if(O.data==="teleport anchor"){n.targetAnchor=O,A._lpa=n.targetAnchor&&l(n.targetAnchor);break}}O=l(O)}n.targetAnchor||Nd(A,n,f,m),v($&&l($),n,A,i,r,s,a)}Pa(n,M)}else M&&n.shapeFlag&16&&b(e,n,e,l(e));return n.anchor&&l(n.anchor)}const Up=Rd;function Pa(e,n){const i=e.ctx;if(i&&i.ut){let r,s;for(n?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",i.uid),r=r.nextSibling;i.ut()}}function Nd(e,n,i,r){const s=n.targetStart=i(""),a=n.targetAnchor=i("");return s[Dd]=a,e&&(r(s,e),r(a,e)),a}const Hp=Symbol("_leaveCb");function Gl(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Gl(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Bd(e,n){return nt(e)?Xt({name:e.name},n,{setup:e}):e}function Fd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Za=new WeakMap;function To(e,n,i,r,s=!1){if(je(e)){e.forEach((M,$)=>To(M,n&&(je(n)?n[$]:n),i,r,s));return}if(Ei(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&To(e,n,i,r.component.subTree);return}const a=r.shapeFlag&4?dr(r.component):r.el,l=s?null:a,{i:d,r:h}=e,m=n&&n.r,f=d.refs===bt?d.refs={}:d.refs,v=d.setupState,b=ut(v),A=v===bt?ed:M=>ft(b,M);if(m!=null&&m!==h){if(Hc(n),Dt(m))f[m]=null,A(m)&&(v[m]=null);else if($t(m)){m.value=null;const M=n;M.k&&(f[M.k]=null)}}if(nt(h))Vo(h,d,12,[l,f]);else{const M=Dt(h),$=$t(h);if(M||$){const O=()=>{if(e.f){const T=M?A(h)?v[h]:f[h]:h.value;if(s)je(T)&&Bl(T,a);else if(je(T))T.includes(a)||T.push(a);else if(M)f[h]=[a],A(h)&&(v[h]=f[h]);else{const x=[a];h.value=x,e.k&&(f[e.k]=x)}}else M?(f[h]=l,A(h)&&(v[h]=l)):$&&(h.value=l,e.k&&(f[e.k]=l))};if(l){const T=()=>{O(),Za.delete(e)};T.id=-1,Za.set(e,T),sn(T,i)}else Hc(e),O()}}}function Hc(e){const n=Za.get(e);n&&(n.flags|=8,Za.delete(e))}sr().requestIdleCallback;sr().cancelIdleCallback;const Ei=e=>!!e.type.__asyncLoader,zd=e=>e.type.__isKeepAlive;function Vp(e,n){Ud(e,"a",n)}function Zp(e,n){Ud(e,"da",n)}function Ud(e,n,i=Yt){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(rr(n,r,i),i){let s=i.parent;for(;s&&s.parent;)zd(s.parent.vnode)&&qp(r,n,i,s),s=s.parent}}function qp(e,n,i,r){const s=rr(n,e,r,!0);$s(()=>{Bl(r[n],s)},i)}function rr(e,n,i=Yt,r=!1){if(i){const s=i[e]||(i[e]=[]),a=n.__weh||(n.__weh=(...l)=>{ds();const d=Zo(i),h=Zn(n,i,e,l);return d(),hs(),h});return r?s.unshift(a):s.push(a),a}}const ms=e=>(n,i=Yt)=>{(!Bo||e==="sp")&&rr(e,(...r)=>n(...r),i)},Wp=ms("bm"),On=ms("m"),jp=ms("bu"),Gp=ms("u"),Kp=ms("bum"),$s=ms("um"),Yp=ms("sp"),Jp=ms("rtg"),Xp=ms("rtc");function Qp(e,n=Yt){rr("ec",e,n)}const em="components";function lr(e,n){return nm(em,e,!0,n)||e}const tm=Symbol.for("v-ndc");function nm(e,n,i=!0,r=!1){const s=Wt||Yt;if(s){const a=s.type;{const d=zm(a,!1);if(d&&(d===n||d===Ln(n)||d===tr(Ln(n))))return a}const l=Vc(s[e]||a[e],n)||Vc(s.appContext[e],n);return!l&&r?a:l}}function Vc(e,n){return e&&(e[n]||e[Ln(n)]||e[tr(Ln(n))])}function Pe(e,n,i,r){let s;const a=i,l=je(e);if(l||Dt(e)){const d=l&&us(e);let h=!1,m=!1;d&&(h=!gn(e),m=fs(e),e=ir(e)),s=new Array(e.length);for(let f=0,v=e.length;f<v;f++)s[f]=n(h?m?Ii(Pn(e[f])):Pn(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=n(d+1,d,void 0,a)}else if(kt(e))if(e[Symbol.iterator])s=Array.from(e,(d,h)=>n(d,h,void 0,a));else{const d=Object.keys(e);s=new Array(d.length);for(let h=0,m=d.length;h<m;h++){const f=d[h];s[h]=n(e[f],f,h,a)}}else s=[];return s}function mo(e,n,i={},r,s){if(Wt.ce||Wt.parent&&Ei(Wt.parent)&&Wt.parent.ce){const m=Object.keys(i).length>0;return n!=="default"&&(i.name=n),g(),tt(be,null,[De("slot",i,r&&r())],m?-2:64)}let a=e[n];a&&a._c&&(a._d=!1),g();const l=a&&Hd(a(i)),d=i.key||l&&l.key,h=tt(be,{key:(d&&!Mn(d)?d:`_${n}`)+(!l&&r?"_fb":"")},l||(r?r():[]),l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),h}function Hd(e){return e.some(n=>No(n)?!(n.type===ps||n.type===be&&!Hd(n.children)):!0)?e:null}const yl=e=>e?lh(e)?dr(e):yl(e.parent):null,Io=Xt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>yl(e.parent),$root:e=>yl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Zd(e),$forceUpdate:e=>e.f||(e.f=()=>{jl(e.update)}),$nextTick:e=>e.n||(e.n=Si.bind(e.proxy)),$watch:e=>Bp.bind(e)}),el=(e,n)=>e!==bt&&!e.__isScriptSetup&&ft(e,n),sm={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:i,setupState:r,data:s,props:a,accessCache:l,type:d,appContext:h}=e;if(n[0]!=="$"){const b=l[n];if(b!==void 0)switch(b){case 1:return r[n];case 2:return s[n];case 4:return i[n];case 3:return a[n]}else{if(el(r,n))return l[n]=1,r[n];if(s!==bt&&ft(s,n))return l[n]=2,s[n];if(ft(a,n))return l[n]=3,a[n];if(i!==bt&&ft(i,n))return l[n]=4,i[n];bl&&(l[n]=0)}}const m=Io[n];let f,v;if(m)return n==="$attrs"&&Kt(e.attrs,"get",""),m(e);if((f=d.__cssModules)&&(f=f[n]))return f;if(i!==bt&&ft(i,n))return l[n]=4,i[n];if(v=h.config.globalProperties,ft(v,n))return v[n]},set({_:e},n,i){const{data:r,setupState:s,ctx:a}=e;return el(s,n)?(s[n]=i,!0):r!==bt&&ft(r,n)?(r[n]=i,!0):ft(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(a[n]=i,!0)},has({_:{data:e,setupState:n,accessCache:i,ctx:r,appContext:s,props:a,type:l}},d){let h;return!!(i[d]||e!==bt&&d[0]!=="$"&&ft(e,d)||el(n,d)||ft(a,d)||ft(r,d)||ft(Io,d)||ft(s.config.globalProperties,d)||(h=l.__cssModules)&&h[d])},defineProperty(e,n,i){return i.get!=null?e._.accessCache[n]=0:ft(i,"value")&&this.set(e,n,i.value,null),Reflect.defineProperty(e,n,i)}};function Zc(e){return je(e)?e.reduce((n,i)=>(n[i]=null,n),{}):e}let bl=!0;function im(e){const n=Zd(e),i=e.proxy,r=e.ctx;bl=!1,n.beforeCreate&&qc(n.beforeCreate,e,"bc");const{data:s,computed:a,methods:l,watch:d,provide:h,inject:m,created:f,beforeMount:v,mounted:b,beforeUpdate:A,updated:M,activated:$,deactivated:O,beforeDestroy:T,beforeUnmount:x,destroyed:w,unmounted:P,render:k,renderTracked:C,renderTriggered:I,errorCaptured:Z,serverPrefetch:V,expose:ae,inheritAttrs:ge,components:Te,directives:fe,filters:j}=n;if(m&&om(m,r,null),l)for(const Ee in l){const pe=l[Ee];nt(pe)&&(r[Ee]=pe.bind(i))}if(s){const Ee=s.call(i,i);kt(Ee)&&(e.data=Ho(Ee))}if(bl=!0,a)for(const Ee in a){const pe=a[Ee],Le=nt(pe)?pe.bind(i,i):nt(pe.get)?pe.get.bind(i,i):Vn,J=!nt(pe)&&nt(pe.set)?pe.set.bind(i):Vn,he=ne({get:Le,set:J});Object.defineProperty(r,Ee,{enumerable:!0,configurable:!0,get:()=>he.value,set:Se=>he.value=Se})}if(d)for(const Ee in d)Vd(d[Ee],r,i,Ee);if(h){const Ee=nt(h)?h.call(i):h;Reflect.ownKeys(Ee).forEach(pe=>{Ma(pe,Ee[pe])})}f&&qc(f,e,"c");function se(Ee,pe){je(pe)?pe.forEach(Le=>Ee(Le.bind(i))):pe&&Ee(pe.bind(i))}if(se(Wp,v),se(On,b),se(jp,A),se(Gp,M),se(Vp,$),se(Zp,O),se(Qp,Z),se(Xp,C),se(Jp,I),se(Kp,x),se($s,P),se(Yp,V),je(ae))if(ae.length){const Ee=e.exposed||(e.exposed={});ae.forEach(pe=>{Object.defineProperty(Ee,pe,{get:()=>i[pe],set:Le=>i[pe]=Le,enumerable:!0})})}else e.exposed||(e.exposed={});k&&e.render===Vn&&(e.render=k),ge!=null&&(e.inheritAttrs=ge),Te&&(e.components=Te),fe&&(e.directives=fe),V&&Fd(e)}function om(e,n,i=Vn){je(e)&&(e=kl(e));for(const r in e){const s=e[r];let a;kt(s)?"default"in s?a=wn(s.from||r,s.default,!0):a=wn(s.from||r):a=wn(s),$t(a)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):n[r]=a}}function qc(e,n,i){Zn(je(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,i)}function Vd(e,n,i,r){let s=r.includes(".")?Od(i,r):()=>i[r];if(Dt(e)){const a=n[e];nt(a)&&We(s,a)}else if(nt(e))We(s,e.bind(i));else if(kt(e))if(je(e))e.forEach(a=>Vd(a,n,i,r));else{const a=nt(e.handler)?e.handler.bind(i):n[e.handler];nt(a)&&We(s,a,e)}}function Zd(e){const n=e.type,{mixins:i,extends:r}=n,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,d=a.get(n);let h;return d?h=d:!s.length&&!i&&!r?h=n:(h={},s.length&&s.forEach(m=>qa(h,m,l,!0)),qa(h,n,l)),kt(n)&&a.set(n,h),h}function qa(e,n,i,r=!1){const{mixins:s,extends:a}=n;a&&qa(e,a,i,!0),s&&s.forEach(l=>qa(e,l,i,!0));for(const l in n)if(!(r&&l==="expose")){const d=am[l]||i&&i[l];e[l]=d?d(e[l],n[l]):n[l]}return e}const am={data:Wc,props:jc,emits:jc,methods:ko,computed:ko,beforeCreate:nn,created:nn,beforeMount:nn,mounted:nn,beforeUpdate:nn,updated:nn,beforeDestroy:nn,beforeUnmount:nn,destroyed:nn,unmounted:nn,activated:nn,deactivated:nn,errorCaptured:nn,serverPrefetch:nn,components:ko,directives:ko,watch:lm,provide:Wc,inject:rm};function Wc(e,n){return n?e?function(){return Xt(nt(e)?e.call(this,this):e,nt(n)?n.call(this,this):n)}:n:e}function rm(e,n){return ko(kl(e),kl(n))}function kl(e){if(je(e)){const n={};for(let i=0;i<e.length;i++)n[e[i]]=e[i];return n}return e}function nn(e,n){return e?[...new Set([].concat(e,n))]:n}function ko(e,n){return e?Xt(Object.create(null),e,n):n}function jc(e,n){return e?je(e)&&je(n)?[...new Set([...e,...n])]:Xt(Object.create(null),Zc(e),Zc(n??{})):n}function lm(e,n){if(!e)return n;if(!n)return e;const i=Xt(Object.create(null),e);for(const r in n)i[r]=nn(e[r],n[r]);return i}function qd(){return{app:null,config:{isNativeTag:ed,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cm=0;function um(e,n){return function(r,s=null){nt(r)||(r=Xt({},r)),s!=null&&!kt(s)&&(s=null);const a=qd(),l=new WeakSet,d=[];let h=!1;const m=a.app={_uid:cm++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Hm,get config(){return a.config},set config(f){},use(f,...v){return l.has(f)||(f&&nt(f.install)?(l.add(f),f.install(m,...v)):nt(f)&&(l.add(f),f(m,...v))),m},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),m},component(f,v){return v?(a.components[f]=v,m):a.components[f]},directive(f,v){return v?(a.directives[f]=v,m):a.directives[f]},mount(f,v,b){if(!h){const A=m._ceVNode||De(r,s);return A.appContext=a,b===!0?b="svg":b===!1&&(b=void 0),e(A,f,b),h=!0,m._container=f,f.__vue_app__=m,dr(A.component)}},onUnmount(f){d.push(f)},unmount(){h&&(Zn(d,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(f,v){return a.provides[f]=v,m},runWithContext(f){const v=Qs;Qs=m;try{return f()}finally{Qs=v}}};return m}}let Qs=null;const dm=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${Ln(n)}Modifiers`]||e[`${Ps(n)}Modifiers`];function hm(e,n,...i){if(e.isUnmounted)return;const r=e.vnode.props||bt;let s=i;const a=n.startsWith("update:"),l=a&&dm(r,n.slice(7));l&&(l.trim&&(s=i.map(f=>Dt(f)?f.trim():f)),l.number&&(s=i.map(nr)));let d,h=r[d=Kr(n)]||r[d=Kr(Ln(n))];!h&&a&&(h=r[d=Kr(Ps(n))]),h&&Zn(h,e,6,s);const m=r[d+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,Zn(m,e,6,s)}}const fm=new WeakMap;function Wd(e,n,i=!1){const r=i?fm:n.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let l={},d=!1;if(!nt(e)){const h=m=>{const f=Wd(m,n,!0);f&&(d=!0,Xt(l,f))};!i&&n.mixins.length&&n.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!a&&!d?(kt(e)&&r.set(e,null),null):(je(a)?a.forEach(h=>l[h]=null):Xt(l,a),kt(e)&&r.set(e,l),l)}function cr(e,n){return!e||!Xa(n)?!1:(n=n.slice(2).replace(/Once$/,""),ft(e,n[0].toLowerCase()+n.slice(1))||ft(e,Ps(n))||ft(e,n))}function Gc(e){const{type:n,vnode:i,proxy:r,withProxy:s,propsOptions:[a],slots:l,attrs:d,emit:h,render:m,renderCache:f,props:v,data:b,setupState:A,ctx:M,inheritAttrs:$}=e,O=Va(e);let T,x;try{if(i.shapeFlag&4){const P=s||r,k=P;T=Un(m.call(k,P,f,v,A,b,M)),x=d}else{const P=n;T=Un(P.length>1?P(v,{attrs:d,slots:l,emit:h}):P(v,null)),x=n.props?d:pm(d)}}catch(P){So.length=0,ar(P,e,1),T=De(ps)}let w=T;if(x&&$!==!1){const P=Object.keys(x),{shapeFlag:k}=w;P.length&&k&7&&(a&&P.some(Nl)&&(x=mm(x,a)),w=Mi(w,x,!1,!0))}return i.dirs&&(w=Mi(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&Gl(w,i.transition),T=w,Va(O),T}const pm=e=>{let n;for(const i in e)(i==="class"||i==="style"||Xa(i))&&((n||(n={}))[i]=e[i]);return n},mm=(e,n)=>{const i={};for(const r in e)(!Nl(r)||!(r.slice(9)in n))&&(i[r]=e[r]);return i};function vm(e,n,i){const{props:r,children:s,component:a}=e,{props:l,children:d,patchFlag:h}=n,m=a.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return r?Kc(r,l,m):!!l;if(h&8){const f=n.dynamicProps;for(let v=0;v<f.length;v++){const b=f[v];if(l[b]!==r[b]&&!cr(m,b))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:r===l?!1:r?l?Kc(r,l,m):!0:!!l;return!1}function Kc(e,n,i){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(n[a]!==e[a]&&!cr(i,a))return!0}return!1}function gm({vnode:e,parent:n},i){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=i,n=n.parent;else break}}const jd={},Gd=()=>Object.create(jd),Kd=e=>Object.getPrototypeOf(e)===jd;function _m(e,n,i,r=!1){const s={},a=Gd();e.propsDefaults=Object.create(null),Yd(e,n,s,a);for(const l in e.propsOptions[0])l in s||(s[l]=void 0);i?e.props=r?s:xd(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function ym(e,n,i,r){const{props:s,attrs:a,vnode:{patchFlag:l}}=e,d=ut(s),[h]=e.propsOptions;let m=!1;if((r||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let v=0;v<f.length;v++){let b=f[v];if(cr(e.emitsOptions,b))continue;const A=n[b];if(h)if(ft(a,b))A!==a[b]&&(a[b]=A,m=!0);else{const M=Ln(b);s[M]=wl(h,d,M,A,e,!1)}else A!==a[b]&&(a[b]=A,m=!0)}}}else{Yd(e,n,s,a)&&(m=!0);let f;for(const v in d)(!n||!ft(n,v)&&((f=Ps(v))===v||!ft(n,f)))&&(h?i&&(i[v]!==void 0||i[f]!==void 0)&&(s[v]=wl(h,d,v,void 0,e,!0)):delete s[v]);if(a!==d)for(const v in a)(!n||!ft(n,v))&&(delete a[v],m=!0)}m&&as(e.attrs,"set","")}function Yd(e,n,i,r){const[s,a]=e.propsOptions;let l=!1,d;if(n)for(let h in n){if(Lo(h))continue;const m=n[h];let f;s&&ft(s,f=Ln(h))?!a||!a.includes(f)?i[f]=m:(d||(d={}))[f]=m:cr(e.emitsOptions,h)||(!(h in r)||m!==r[h])&&(r[h]=m,l=!0)}if(a){const h=ut(i),m=d||bt;for(let f=0;f<a.length;f++){const v=a[f];i[v]=wl(s,h,v,m[v],e,!ft(m,v))}}return l}function wl(e,n,i,r,s,a){const l=e[i];if(l!=null){const d=ft(l,"default");if(d&&r===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&nt(h)){const{propsDefaults:m}=s;if(i in m)r=m[i];else{const f=Zo(s);r=m[i]=h.call(null,n),f()}}else r=h;s.ce&&s.ce._setProp(i,r)}l[0]&&(a&&!d?r=!1:l[1]&&(r===""||r===Ps(i))&&(r=!0))}return r}const bm=new WeakMap;function Jd(e,n,i=!1){const r=i?bm:n.propsCache,s=r.get(e);if(s)return s;const a=e.props,l={},d=[];let h=!1;if(!nt(e)){const f=v=>{h=!0;const[b,A]=Jd(v,n,!0);Xt(l,b),A&&d.push(...A)};!i&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!h)return kt(e)&&r.set(e,Li),Li;if(je(a))for(let f=0;f<a.length;f++){const v=Ln(a[f]);Yc(v)&&(l[v]=bt)}else if(a)for(const f in a){const v=Ln(f);if(Yc(v)){const b=a[f],A=l[v]=je(b)||nt(b)?{type:b}:Xt({},b),M=A.type;let $=!1,O=!0;if(je(M))for(let T=0;T<M.length;++T){const x=M[T],w=nt(x)&&x.name;if(w==="Boolean"){$=!0;break}else w==="String"&&(O=!1)}else $=nt(M)&&M.name==="Boolean";A[0]=$,A[1]=O,($||ft(A,"default"))&&d.push(v)}}const m=[l,d];return kt(e)&&r.set(e,m),m}function Yc(e){return e[0]!=="$"&&!Lo(e)}const Kl=e=>e==="_"||e==="_ctx"||e==="$stable",Yl=e=>je(e)?e.map(Un):[Un(e)],km=(e,n,i)=>{if(n._n)return n;const r=Ke((...s)=>Yl(n(...s)),i);return r._c=!1,r},Xd=(e,n,i)=>{const r=e._ctx;for(const s in e){if(Kl(s))continue;const a=e[s];if(nt(a))n[s]=km(s,a,r);else if(a!=null){const l=Yl(a);n[s]=()=>l}}},Qd=(e,n)=>{const i=Yl(n);e.slots.default=()=>i},eh=(e,n,i)=>{for(const r in n)(i||!Kl(r))&&(e[r]=n[r])},wm=(e,n,i)=>{const r=e.slots=Gd();if(e.vnode.shapeFlag&32){const s=n._;s?(eh(r,n,i),i&&id(r,"_",s,!0)):Xd(n,r)}else n&&Qd(e,n)},Cm=(e,n,i)=>{const{vnode:r,slots:s}=e;let a=!0,l=bt;if(r.shapeFlag&32){const d=n._;d?i&&d===1?a=!1:eh(s,n,i):(a=!n.$stable,Xd(n,s)),l=n}else n&&(Qd(e,n),l={default:1});if(a)for(const d in s)!Kl(d)&&l[d]==null&&delete s[d]},sn=Tm;function Lm(e){return xm(e)}function xm(e,n){const i=sr();i.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:l,createText:d,createComment:h,setText:m,setElementText:f,parentNode:v,nextSibling:b,setScopeId:A=Vn,insertStaticContent:M}=e,$=(R,F,q,ie=null,ce=null,oe=null,Ae=void 0,xe=null,Ce=!!F.dynamicChildren)=>{if(R===F)return;R&&!vo(R,F)&&(ie=H(R),Se(R,ce,oe,!0),R=null),F.patchFlag===-2&&(Ce=!1,F.dynamicChildren=null);const{type:me,ref:ze,shapeFlag:Me}=F;switch(me){case ur:O(R,F,q,ie);break;case ps:T(R,F,q,ie);break;case $a:R==null&&x(F,q,ie,Ae);break;case be:Te(R,F,q,ie,ce,oe,Ae,xe,Ce);break;default:Me&1?k(R,F,q,ie,ce,oe,Ae,xe,Ce):Me&6?fe(R,F,q,ie,ce,oe,Ae,xe,Ce):(Me&64||Me&128)&&me.process(R,F,q,ie,ce,oe,Ae,xe,Ce,ke)}ze!=null&&ce?To(ze,R&&R.ref,oe,F||R,!F):ze==null&&R&&R.ref!=null&&To(R.ref,null,oe,R,!0)},O=(R,F,q,ie)=>{if(R==null)r(F.el=d(F.children),q,ie);else{const ce=F.el=R.el;F.children!==R.children&&m(ce,F.children)}},T=(R,F,q,ie)=>{R==null?r(F.el=h(F.children||""),q,ie):F.el=R.el},x=(R,F,q,ie)=>{[R.el,R.anchor]=M(R.children,F,q,ie,R.el,R.anchor)},w=({el:R,anchor:F},q,ie)=>{let ce;for(;R&&R!==F;)ce=b(R),r(R,q,ie),R=ce;r(F,q,ie)},P=({el:R,anchor:F})=>{let q;for(;R&&R!==F;)q=b(R),s(R),R=q;s(F)},k=(R,F,q,ie,ce,oe,Ae,xe,Ce)=>{if(F.type==="svg"?Ae="svg":F.type==="math"&&(Ae="mathml"),R==null)C(F,q,ie,ce,oe,Ae,xe,Ce);else{const me=R.el&&R.el._isVueCE?R.el:null;try{me&&me._beginPatch(),V(R,F,ce,oe,Ae,xe,Ce)}finally{me&&me._endPatch()}}},C=(R,F,q,ie,ce,oe,Ae,xe)=>{let Ce,me;const{props:ze,shapeFlag:Me,transition:Fe,dirs:qe}=R;if(Ce=R.el=l(R.type,oe,ze&&ze.is,ze),Me&8?f(Ce,R.children):Me&16&&Z(R.children,Ce,null,ie,ce,tl(R,oe),Ae,xe),qe&&qs(R,null,ie,"created"),I(Ce,R,R.scopeId,Ae,ie),ze){for(const Je in ze)Je!=="value"&&!Lo(Je)&&a(Ce,Je,null,ze[Je],oe,ie);"value"in ze&&a(Ce,"value",null,ze.value,oe),(me=ze.onVnodeBeforeMount)&&Bn(me,ie,R)}qe&&qs(R,null,ie,"beforeMount");const Ge=Am(ce,Fe);Ge&&Fe.beforeEnter(Ce),r(Ce,F,q),((me=ze&&ze.onVnodeMounted)||Ge||qe)&&sn(()=>{me&&Bn(me,ie,R),Ge&&Fe.enter(Ce),qe&&qs(R,null,ie,"mounted")},ce)},I=(R,F,q,ie,ce)=>{if(q&&A(R,q),ie)for(let oe=0;oe<ie.length;oe++)A(R,ie[oe]);if(ce){let oe=ce.subTree;if(F===oe||sh(oe.type)&&(oe.ssContent===F||oe.ssFallback===F)){const Ae=ce.vnode;I(R,Ae,Ae.scopeId,Ae.slotScopeIds,ce.parent)}}},Z=(R,F,q,ie,ce,oe,Ae,xe,Ce=0)=>{for(let me=Ce;me<R.length;me++){const ze=R[me]=xe?As(R[me]):Un(R[me]);$(null,ze,F,q,ie,ce,oe,Ae,xe)}},V=(R,F,q,ie,ce,oe,Ae)=>{const xe=F.el=R.el;let{patchFlag:Ce,dynamicChildren:me,dirs:ze}=F;Ce|=R.patchFlag&16;const Me=R.props||bt,Fe=F.props||bt;let qe;if(q&&Ws(q,!1),(qe=Fe.onVnodeBeforeUpdate)&&Bn(qe,q,F,R),ze&&qs(F,R,q,"beforeUpdate"),q&&Ws(q,!0),(Me.innerHTML&&Fe.innerHTML==null||Me.textContent&&Fe.textContent==null)&&f(xe,""),me?ae(R.dynamicChildren,me,xe,q,ie,tl(F,ce),oe):Ae||pe(R,F,xe,null,q,ie,tl(F,ce),oe,!1),Ce>0){if(Ce&16)ge(xe,Me,Fe,q,ce);else if(Ce&2&&Me.class!==Fe.class&&a(xe,"class",null,Fe.class,ce),Ce&4&&a(xe,"style",Me.style,Fe.style,ce),Ce&8){const Ge=F.dynamicProps;for(let Je=0;Je<Ge.length;Je++){const He=Ge[Je],vt=Me[He],Lt=Fe[He];(Lt!==vt||He==="value")&&a(xe,He,vt,Lt,ce,q)}}Ce&1&&R.children!==F.children&&f(xe,F.children)}else!Ae&&me==null&&ge(xe,Me,Fe,q,ce);((qe=Fe.onVnodeUpdated)||ze)&&sn(()=>{qe&&Bn(qe,q,F,R),ze&&qs(F,R,q,"updated")},ie)},ae=(R,F,q,ie,ce,oe,Ae)=>{for(let xe=0;xe<F.length;xe++){const Ce=R[xe],me=F[xe],ze=Ce.el&&(Ce.type===be||!vo(Ce,me)||Ce.shapeFlag&198)?v(Ce.el):q;$(Ce,me,ze,null,ie,ce,oe,Ae,!0)}},ge=(R,F,q,ie,ce)=>{if(F!==q){if(F!==bt)for(const oe in F)!Lo(oe)&&!(oe in q)&&a(R,oe,F[oe],null,ce,ie);for(const oe in q){if(Lo(oe))continue;const Ae=q[oe],xe=F[oe];Ae!==xe&&oe!=="value"&&a(R,oe,xe,Ae,ce,ie)}"value"in q&&a(R,"value",F.value,q.value,ce)}},Te=(R,F,q,ie,ce,oe,Ae,xe,Ce)=>{const me=F.el=R?R.el:d(""),ze=F.anchor=R?R.anchor:d("");let{patchFlag:Me,dynamicChildren:Fe,slotScopeIds:qe}=F;qe&&(xe=xe?xe.concat(qe):qe),R==null?(r(me,q,ie),r(ze,q,ie),Z(F.children||[],q,ze,ce,oe,Ae,xe,Ce)):Me>0&&Me&64&&Fe&&R.dynamicChildren&&R.dynamicChildren.length===Fe.length?(ae(R.dynamicChildren,Fe,q,ce,oe,Ae,xe),(F.key!=null||ce&&F===ce.subTree)&&Jl(R,F,!0)):pe(R,F,q,ze,ce,oe,Ae,xe,Ce)},fe=(R,F,q,ie,ce,oe,Ae,xe,Ce)=>{F.slotScopeIds=xe,R==null?F.shapeFlag&512?ce.ctx.activate(F,q,ie,Ae,Ce):j(F,q,ie,ce,oe,Ae,Ce):G(R,F,Ce)},j=(R,F,q,ie,ce,oe,Ae)=>{const xe=R.component=Dm(R,ie,ce);if(zd(R)&&(xe.ctx.renderer=ke),Rm(xe,!1,Ae),xe.asyncDep){if(ce&&ce.registerDep(xe,se,Ae),!R.el){const Ce=xe.subTree=De(ps);T(null,Ce,F,q),R.placeholder=Ce.el}}else se(xe,R,F,q,ce,oe,Ae)},G=(R,F,q)=>{const ie=F.component=R.component;if(vm(R,F,q))if(ie.asyncDep&&!ie.asyncResolved){Ee(ie,F,q);return}else ie.next=F,ie.update();else F.el=R.el,ie.vnode=F},se=(R,F,q,ie,ce,oe,Ae)=>{const xe=()=>{if(R.isMounted){let{next:Me,bu:Fe,u:qe,parent:Ge,vnode:Je}=R;{const mt=th(R);if(mt){Me&&(Me.el=Je.el,Ee(R,Me,Ae)),mt.asyncDep.then(()=>{R.isUnmounted||xe()});return}}let He=Me,vt;Ws(R,!1),Me?(Me.el=Je.el,Ee(R,Me,Ae)):Me=Je,Fe&&Sa(Fe),(vt=Me.props&&Me.props.onVnodeBeforeUpdate)&&Bn(vt,Ge,Me,Je),Ws(R,!0);const Lt=Gc(R),wt=R.subTree;R.subTree=Lt,$(wt,Lt,v(wt.el),H(wt),R,ce,oe),Me.el=Lt.el,He===null&&gm(R,Lt.el),qe&&sn(qe,ce),(vt=Me.props&&Me.props.onVnodeUpdated)&&sn(()=>Bn(vt,Ge,Me,Je),ce)}else{let Me;const{el:Fe,props:qe}=F,{bm:Ge,m:Je,parent:He,root:vt,type:Lt}=R,wt=Ei(F);Ws(R,!1),Ge&&Sa(Ge),!wt&&(Me=qe&&qe.onVnodeBeforeMount)&&Bn(Me,He,F),Ws(R,!0);{vt.ce&&vt.ce._def.shadowRoot!==!1&&vt.ce._injectChildStyle(Lt);const mt=R.subTree=Gc(R);$(null,mt,q,ie,R,ce,oe),F.el=mt.el}if(Je&&sn(Je,ce),!wt&&(Me=qe&&qe.onVnodeMounted)){const mt=F;sn(()=>Bn(Me,He,mt),ce)}(F.shapeFlag&256||He&&Ei(He.vnode)&&He.vnode.shapeFlag&256)&&R.a&&sn(R.a,ce),R.isMounted=!0,F=q=ie=null}};R.scope.on();const Ce=R.effect=new dd(xe);R.scope.off();const me=R.update=Ce.run.bind(Ce),ze=R.job=Ce.runIfDirty.bind(Ce);ze.i=R,ze.id=R.uid,Ce.scheduler=()=>jl(ze),Ws(R,!0),me()},Ee=(R,F,q)=>{F.component=R;const ie=R.vnode.props;R.vnode=F,R.next=null,ym(R,F.props,ie,q),Cm(R,F.children,q),ds(),Bc(R),hs()},pe=(R,F,q,ie,ce,oe,Ae,xe,Ce=!1)=>{const me=R&&R.children,ze=R?R.shapeFlag:0,Me=F.children,{patchFlag:Fe,shapeFlag:qe}=F;if(Fe>0){if(Fe&128){J(me,Me,q,ie,ce,oe,Ae,xe,Ce);return}else if(Fe&256){Le(me,Me,q,ie,ce,oe,Ae,xe,Ce);return}}qe&8?(ze&16&&de(me,ce,oe),Me!==me&&f(q,Me)):ze&16?qe&16?J(me,Me,q,ie,ce,oe,Ae,xe,Ce):de(me,ce,oe,!0):(ze&8&&f(q,""),qe&16&&Z(Me,q,ie,ce,oe,Ae,xe,Ce))},Le=(R,F,q,ie,ce,oe,Ae,xe,Ce)=>{R=R||Li,F=F||Li;const me=R.length,ze=F.length,Me=Math.min(me,ze);let Fe;for(Fe=0;Fe<Me;Fe++){const qe=F[Fe]=Ce?As(F[Fe]):Un(F[Fe]);$(R[Fe],qe,q,null,ce,oe,Ae,xe,Ce)}me>ze?de(R,ce,oe,!0,!1,Me):Z(F,q,ie,ce,oe,Ae,xe,Ce,Me)},J=(R,F,q,ie,ce,oe,Ae,xe,Ce)=>{let me=0;const ze=F.length;let Me=R.length-1,Fe=ze-1;for(;me<=Me&&me<=Fe;){const qe=R[me],Ge=F[me]=Ce?As(F[me]):Un(F[me]);if(vo(qe,Ge))$(qe,Ge,q,null,ce,oe,Ae,xe,Ce);else break;me++}for(;me<=Me&&me<=Fe;){const qe=R[Me],Ge=F[Fe]=Ce?As(F[Fe]):Un(F[Fe]);if(vo(qe,Ge))$(qe,Ge,q,null,ce,oe,Ae,xe,Ce);else break;Me--,Fe--}if(me>Me){if(me<=Fe){const qe=Fe+1,Ge=qe<ze?F[qe].el:ie;for(;me<=Fe;)$(null,F[me]=Ce?As(F[me]):Un(F[me]),q,Ge,ce,oe,Ae,xe,Ce),me++}}else if(me>Fe)for(;me<=Me;)Se(R[me],ce,oe,!0),me++;else{const qe=me,Ge=me,Je=new Map;for(me=Ge;me<=Fe;me++){const gt=F[me]=Ce?As(F[me]):Un(F[me]);gt.key!=null&&Je.set(gt.key,me)}let He,vt=0;const Lt=Fe-Ge+1;let wt=!1,mt=0;const en=new Array(Lt);for(me=0;me<Lt;me++)en[me]=0;for(me=qe;me<=Me;me++){const gt=R[me];if(vt>=Lt){Se(gt,ce,oe,!0);continue}let it;if(gt.key!=null)it=Je.get(gt.key);else for(He=Ge;He<=Fe;He++)if(en[He-Ge]===0&&vo(gt,F[He])){it=He;break}it===void 0?Se(gt,ce,oe,!0):(en[it-Ge]=me+1,it>=mt?mt=it:wt=!0,$(gt,F[it],q,null,ce,oe,Ae,xe,Ce),vt++)}const zt=wt?Em(en):Li;for(He=zt.length-1,me=Lt-1;me>=0;me--){const gt=Ge+me,it=F[gt],Et=F[gt+1],_t=gt+1<ze?Et.el||nh(Et):ie;en[me]===0?$(null,it,q,_t,ce,oe,Ae,xe,Ce):wt&&(He<0||me!==zt[He]?he(it,q,_t,2):He--)}}},he=(R,F,q,ie,ce=null)=>{const{el:oe,type:Ae,transition:xe,children:Ce,shapeFlag:me}=R;if(me&6){he(R.component.subTree,F,q,ie);return}if(me&128){R.suspense.move(F,q,ie);return}if(me&64){Ae.move(R,F,q,ke);return}if(Ae===be){r(oe,F,q);for(let Me=0;Me<Ce.length;Me++)he(Ce[Me],F,q,ie);r(R.anchor,F,q);return}if(Ae===$a){w(R,F,q);return}if(ie!==2&&me&1&&xe)if(ie===0)xe.beforeEnter(oe),r(oe,F,q),sn(()=>xe.enter(oe),ce);else{const{leave:Me,delayLeave:Fe,afterLeave:qe}=xe,Ge=()=>{R.ctx.isUnmounted?s(oe):r(oe,F,q)},Je=()=>{oe._isLeaving&&oe[Hp](!0),Me(oe,()=>{Ge(),qe&&qe()})};Fe?Fe(oe,Ge,Je):Je()}else r(oe,F,q)},Se=(R,F,q,ie=!1,ce=!1)=>{const{type:oe,props:Ae,ref:xe,children:Ce,dynamicChildren:me,shapeFlag:ze,patchFlag:Me,dirs:Fe,cacheIndex:qe}=R;if(Me===-2&&(ce=!1),xe!=null&&(ds(),To(xe,null,q,R,!0),hs()),qe!=null&&(F.renderCache[qe]=void 0),ze&256){F.ctx.deactivate(R);return}const Ge=ze&1&&Fe,Je=!Ei(R);let He;if(Je&&(He=Ae&&Ae.onVnodeBeforeUnmount)&&Bn(He,F,R),ze&6)le(R.component,q,ie);else{if(ze&128){R.suspense.unmount(q,ie);return}Ge&&qs(R,null,F,"beforeUnmount"),ze&64?R.type.remove(R,F,q,ke,ie):me&&!me.hasOnce&&(oe!==be||Me>0&&Me&64)?de(me,F,q,!1,!0):(oe===be&&Me&384||!ce&&ze&16)&&de(Ce,F,q),ie&&Re(R)}(Je&&(He=Ae&&Ae.onVnodeUnmounted)||Ge)&&sn(()=>{He&&Bn(He,F,R),Ge&&qs(R,null,F,"unmounted")},q)},Re=R=>{const{type:F,el:q,anchor:ie,transition:ce}=R;if(F===be){ve(q,ie);return}if(F===$a){P(R);return}const oe=()=>{s(q),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(R.shapeFlag&1&&ce&&!ce.persisted){const{leave:Ae,delayLeave:xe}=ce,Ce=()=>Ae(q,oe);xe?xe(R.el,oe,Ce):Ce()}else oe()},ve=(R,F)=>{let q;for(;R!==F;)q=b(R),s(R),R=q;s(F)},le=(R,F,q)=>{const{bum:ie,scope:ce,job:oe,subTree:Ae,um:xe,m:Ce,a:me}=R;Jc(Ce),Jc(me),ie&&Sa(ie),ce.stop(),oe&&(oe.flags|=8,Se(Ae,R,F,q)),xe&&sn(xe,F),sn(()=>{R.isUnmounted=!0},F)},de=(R,F,q,ie=!1,ce=!1,oe=0)=>{for(let Ae=oe;Ae<R.length;Ae++)Se(R[Ae],F,q,ie,ce)},H=R=>{if(R.shapeFlag&6)return H(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const F=b(R.anchor||R.el),q=F&&F[Dd];return q?b(q):F};let Y=!1;const X=(R,F,q)=>{let ie;R==null?F._vnode&&(Se(F._vnode,null,null,!0),ie=F._vnode.component):$(F._vnode||null,R,F,null,null,null,q),F._vnode=R,Y||(Y=!0,Bc(ie),Sd(),Y=!1)},ke={p:$,um:Se,m:he,r:Re,mt:j,mc:Z,pc:pe,pbc:ae,n:H,o:e};return{render:X,hydrate:void 0,createApp:um(X)}}function tl({type:e,props:n},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:i}function Ws({effect:e,job:n},i){i?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function Am(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Jl(e,n,i=!1){const r=e.children,s=n.children;if(je(r)&&je(s))for(let a=0;a<r.length;a++){const l=r[a];let d=s[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[a]=As(s[a]),d.el=l.el),!i&&d.patchFlag!==-2&&Jl(l,d)),d.type===ur&&(d.patchFlag!==-1?d.el=l.el:d.__elIndex=a+(e.type===be?1:0)),d.type===ps&&!d.el&&(d.el=l.el)}}function Em(e){const n=e.slice(),i=[0];let r,s,a,l,d;const h=e.length;for(r=0;r<h;r++){const m=e[r];if(m!==0){if(s=i[i.length-1],e[s]<m){n[r]=s,i.push(r);continue}for(a=0,l=i.length-1;a<l;)d=a+l>>1,e[i[d]]<m?a=d+1:l=d;m<e[i[a]]&&(a>0&&(n[r]=i[a-1]),i[a]=r)}}for(a=i.length,l=i[a-1];a-- >0;)i[a]=l,l=n[l];return i}function th(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:th(n)}function Jc(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function nh(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?nh(n.subTree):null}const sh=e=>e.__isSuspense;function Tm(e,n){n&&n.pendingBranch?je(e)?n.effects.push(...e):n.effects.push(e):Op(e)}const be=Symbol.for("v-fgt"),ur=Symbol.for("v-txt"),ps=Symbol.for("v-cmt"),$a=Symbol.for("v-stc"),So=[];let vn=null;function g(e=!1){So.push(vn=e?null:[])}function Im(){So.pop(),vn=So[So.length-1]||null}let Ro=1;function Wa(e,n=!1){Ro+=e,e<0&&vn&&n&&(vn.hasOnce=!0)}function ih(e){return e.dynamicChildren=Ro>0?vn||Li:null,Im(),Ro>0&&vn&&vn.push(e),e}function y(e,n,i,r,s,a){return ih(u(e,n,i,r,s,a,!0))}function tt(e,n,i,r,s){return ih(De(e,n,i,r,s,!0))}function No(e){return e?e.__v_isVNode===!0:!1}function vo(e,n){return e.type===n.type&&e.key===n.key}const oh=({key:e})=>e??null,Oa=({ref:e,ref_key:n,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Dt(e)||$t(e)||nt(e)?{i:Wt,r:e,k:n,f:!!i}:e:null);function u(e,n=null,i=null,r=0,s=null,a=e===be?0:1,l=!1,d=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&oh(n),ref:n&&Oa(n),scopeId:Pd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Wt};return d?(Xl(h,i),a&128&&e.normalize(h)):i&&(h.shapeFlag|=Dt(i)?8:16),Ro>0&&!l&&vn&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&vn.push(h),h}const De=Sm;function Sm(e,n=null,i=null,r=0,s=null,a=!1){if((!e||e===tm)&&(e=ps),No(e)){const d=Mi(e,n,!0);return i&&Xl(d,i),Ro>0&&!a&&vn&&(d.shapeFlag&6?vn[vn.indexOf(e)]=d:vn.push(d)),d.patchFlag=-2,d}if(Um(e)&&(e=e.__vccOpts),n){n=Mm(n);let{class:d,style:h}=n;d&&!Dt(d)&&(n.class=Ue(d)),kt(h)&&(or(h)&&!je(h)&&(h=Xt({},h)),n.style=Qt(h))}const l=Dt(e)?1:sh(e)?128:Fp(e)?64:kt(e)?4:nt(e)?2:0;return u(e,n,i,r,s,l,a,!0)}function Mm(e){return e?or(e)||Kd(e)?Xt({},e):e:null}function Mi(e,n,i=!1,r=!1){const{props:s,ref:a,patchFlag:l,children:d,transition:h}=e,m=n?ah(s||{},n):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&oh(m),ref:n&&n.ref?i&&a?je(a)?a.concat(Oa(n)):[a,Oa(n)]:Oa(n):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==be?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Mi(e.ssContent),ssFallback:e.ssFallback&&Mi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&r&&Gl(f,h.clone(f)),f}function Ve(e=" ",n=0){return De(ur,null,e,n)}function Pm(e,n){const i=De($a,null,e);return i.staticCount=n,i}function B(e="",n=!1){return n?(g(),tt(ps,null,e)):De(ps,null,e)}function Un(e){return e==null||typeof e=="boolean"?De(ps):je(e)?De(be,null,e.slice()):No(e)?As(e):De(ur,null,String(e))}function As(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Mi(e)}function Xl(e,n){let i=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(je(n))i=16;else if(typeof n=="object")if(r&65){const s=n.default;s&&(s._c&&(s._d=!1),Xl(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=n._;!s&&!Kd(n)?n._ctx=Wt:s===3&&Wt&&(Wt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else nt(n)?(n={default:n,_ctx:Wt},i=32):(n=String(n),r&64?(i=16,n=[Ve(n)]):i=8);e.children=n,e.shapeFlag|=i}function ah(...e){const n={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")n.class!==r.class&&(n.class=Ue([n.class,r.class]));else if(s==="style")n.style=Qt([n.style,r.style]);else if(Xa(s)){const a=n[s],l=r[s];l&&a!==l&&!(je(a)&&a.includes(l))&&(n[s]=a?[].concat(a,l):l)}else s!==""&&(n[s]=r[s])}return n}function Bn(e,n,i,r=null){Zn(e,n,7,[i,r])}const $m=qd();let Om=0;function Dm(e,n,i){const r=e.type,s=(n?n.appContext:e.appContext)||$m,a={uid:Om++,vnode:e,type:r,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ld(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jd(r,s),emitsOptions:Wd(r,s),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:r.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=n?n.root:a,a.emit=hm.bind(null,a),e.ce&&e.ce(a),a}let Yt=null;const rh=()=>Yt||Wt;let ja,Cl;{const e=sr(),n=(i,r)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(r),a=>{s.length>1?s.forEach(l=>l(a)):s[0](a)}};ja=n("__VUE_INSTANCE_SETTERS__",i=>Yt=i),Cl=n("__VUE_SSR_SETTERS__",i=>Bo=i)}const Zo=e=>{const n=Yt;return ja(e),e.scope.on(),()=>{e.scope.off(),ja(n)}},Xc=()=>{Yt&&Yt.scope.off(),ja(null)};function lh(e){return e.vnode.shapeFlag&4}let Bo=!1;function Rm(e,n=!1,i=!1){n&&Cl(n);const{props:r,children:s}=e.vnode,a=lh(e);_m(e,r,a,n),wm(e,s,i||n);const l=a?Nm(e,n):void 0;return n&&Cl(!1),l}function Nm(e,n){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,sm);const{setup:r}=i;if(r){ds();const s=e.setupContext=r.length>1?Fm(e):null,a=Zo(e),l=Vo(r,e,0,[e.props,s]),d=td(l);if(hs(),a(),(d||e.sp)&&!Ei(e)&&Fd(e),d){if(l.then(Xc,Xc),n)return l.then(h=>{Qc(e,h)}).catch(h=>{ar(h,e,0)});e.asyncDep=l}else Qc(e,l)}else ch(e)}function Qc(e,n,i){nt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:kt(n)&&(e.setupState=Ed(n)),ch(e)}function ch(e,n,i){const r=e.type;e.render||(e.render=r.render||Vn);{const s=Zo(e);ds();try{im(e)}finally{hs(),s()}}}const Bm={get(e,n){return Kt(e,"get",""),e[n]}};function Fm(e){const n=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Bm),slots:e.slots,emit:e.emit,expose:n}}function dr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ed(Wl(e.exposed)),{get(n,i){if(i in n)return n[i];if(i in Io)return Io[i](e)},has(n,i){return i in n||i in Io}})):e.proxy}function zm(e,n=!0){return nt(e)?e.displayName||e.name:e.name||n&&e.__name}function Um(e){return nt(e)&&"__vccOpts"in e}const ne=(e,n)=>Ip(e,n,Bo);function uh(e,n,i){try{Wa(-1);const r=arguments.length;return r===2?kt(n)&&!je(n)?No(n)?De(e,null,[n]):De(e,n):De(e,null,n):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&No(i)&&(i=[i]),De(e,n,i))}finally{Wa(1)}}const Hm="3.5.26";let Ll;const eu=typeof window<"u"&&window.trustedTypes;if(eu)try{Ll=eu.createPolicy("vue",{createHTML:e=>e})}catch{}const dh=Ll?e=>Ll.createHTML(e):e=>e,Vm="http://www.w3.org/2000/svg",Zm="http://www.w3.org/1998/Math/MathML",is=typeof document<"u"?document:null,tu=is&&is.createElement("template"),qm={insert:(e,n,i)=>{n.insertBefore(e,i||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,i,r)=>{const s=n==="svg"?is.createElementNS(Vm,e):n==="mathml"?is.createElementNS(Zm,e):i?is.createElement(e,{is:i}):is.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>is.createTextNode(e),createComment:e=>is.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>is.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,i,r,s,a){const l=i?i.previousSibling:n.lastChild;if(s&&(s===a||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),i),!(s===a||!(s=s.nextSibling)););else{tu.innerHTML=dh(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const d=tu.content;if(r==="svg"||r==="mathml"){const h=d.firstChild;for(;h.firstChild;)d.appendChild(h.firstChild);d.removeChild(h)}n.insertBefore(d,i)}return[l?l.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}},Wm=Symbol("_vtc");function jm(e,n,i){const r=e[Wm];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):i?e.setAttribute("class",n):e.className=n}const Ga=Symbol("_vod"),hh=Symbol("_vsh"),Ss={name:"show",beforeMount(e,{value:n},{transition:i}){e[Ga]=e.style.display==="none"?"":e.style.display,i&&n?i.beforeEnter(e):go(e,n)},mounted(e,{value:n},{transition:i}){i&&n&&i.enter(e)},updated(e,{value:n,oldValue:i},{transition:r}){!n!=!i&&(r?n?(r.beforeEnter(e),go(e,!0),r.enter(e)):r.leave(e,()=>{go(e,!1)}):go(e,n))},beforeUnmount(e,{value:n}){go(e,n)}};function go(e,n){e.style.display=n?e[Ga]:"none",e[hh]=!n}const Gm=Symbol(""),Km=/(?:^|;)\s*display\s*:/;function Ym(e,n,i){const r=e.style,s=Dt(i);let a=!1;if(i&&!s){if(n)if(Dt(n))for(const l of n.split(";")){const d=l.slice(0,l.indexOf(":")).trim();i[d]==null&&Da(r,d,"")}else for(const l in n)i[l]==null&&Da(r,l,"");for(const l in i)l==="display"&&(a=!0),Da(r,l,i[l])}else if(s){if(n!==i){const l=r[Gm];l&&(i+=";"+l),r.cssText=i,a=Km.test(i)}}else n&&e.removeAttribute("style");Ga in e&&(e[Ga]=a?r.display:"",e[hh]&&(r.display="none"))}const nu=/\s*!important$/;function Da(e,n,i){if(je(i))i.forEach(r=>Da(e,n,r));else if(i==null&&(i=""),n.startsWith("--"))e.setProperty(n,i);else{const r=Jm(e,n);nu.test(i)?e.setProperty(Ps(r),i.replace(nu,""),"important"):e[r]=i}}const su=["Webkit","Moz","ms"],nl={};function Jm(e,n){const i=nl[n];if(i)return i;let r=Ln(n);if(r!=="filter"&&r in e)return nl[n]=r;r=tr(r);for(let s=0;s<su.length;s++){const a=su[s]+r;if(a in e)return nl[n]=a}return n}const iu="http://www.w3.org/1999/xlink";function ou(e,n,i,r,s,a=ep(n)){r&&n.startsWith("xlink:")?i==null?e.removeAttributeNS(iu,n.slice(6,n.length)):e.setAttributeNS(iu,n,i):i==null||a&&!od(i)?e.removeAttribute(n):e.setAttribute(n,a?"":Mn(i)?String(i):i)}function au(e,n,i,r,s){if(n==="innerHTML"||n==="textContent"){i!=null&&(e[n]=n==="innerHTML"?dh(i):i);return}const a=e.tagName;if(n==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(d!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(n),e._value=i;return}let l=!1;if(i===""||i==null){const d=typeof e[n];d==="boolean"?i=od(i):i==null&&d==="string"?(i="",l=!0):d==="number"&&(i=0,l=!0)}try{e[n]=i}catch{}l&&e.removeAttribute(s||n)}function ls(e,n,i,r){e.addEventListener(n,i,r)}function Xm(e,n,i,r){e.removeEventListener(n,i,r)}const ru=Symbol("_vei");function Qm(e,n,i,r,s=null){const a=e[ru]||(e[ru]={}),l=a[n];if(r&&l)l.value=r;else{const[d,h]=ev(n);if(r){const m=a[n]=sv(r,s);ls(e,d,m,h)}else l&&(Xm(e,d,l,h),a[n]=void 0)}}const lu=/(?:Once|Passive|Capture)$/;function ev(e){let n;if(lu.test(e)){n={};let r;for(;r=e.match(lu);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ps(e.slice(2)),n]}let sl=0;const tv=Promise.resolve(),nv=()=>sl||(tv.then(()=>sl=0),sl=Date.now());function sv(e,n){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Zn(iv(r,i.value),n,5,[r])};return i.value=e,i.attached=nv(),i}function iv(e,n){if(je(n)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},n.map(r=>s=>!s._stopped&&r&&r(s))}else return n}const cu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ov=(e,n,i,r,s,a)=>{const l=s==="svg";n==="class"?jm(e,r,l):n==="style"?Ym(e,i,r):Xa(n)?Nl(n)||Qm(e,n,i,r,a):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):av(e,n,r,l))?(au(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&ou(e,n,r,l,a,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Dt(r))?au(e,Ln(n),r,a,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),ou(e,n,r,l))};function av(e,n,i,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&cu(n)&&nt(i));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return cu(n)&&Dt(i)?!1:n in e}const Ms=e=>{const n=e.props["onUpdate:modelValue"]||!1;return je(n)?i=>Sa(n,i):n};function rv(e){e.target.composing=!0}function uu(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Cn=Symbol("_assign");function du(e,n,i){return n&&(e=e.trim()),i&&(e=nr(e)),e}const st={created(e,{modifiers:{lazy:n,trim:i,number:r}},s){e[Cn]=Ms(s);const a=r||s.props&&s.props.type==="number";ls(e,n?"change":"input",l=>{l.target.composing||e[Cn](du(e.value,i,a))}),(i||a)&&ls(e,"change",()=>{e.value=du(e.value,i,a)}),n||(ls(e,"compositionstart",rv),ls(e,"compositionend",uu),ls(e,"change",uu))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:i,modifiers:{lazy:r,trim:s,number:a}},l){if(e[Cn]=Ms(l),e.composing)return;const d=(a||e.type==="number")&&!/^0\d/.test(e.value)?nr(e.value):e.value,h=n??"";d!==h&&(document.activeElement===e&&e.type!=="range"&&(r&&n===i||s&&e.value.trim()===h)||(e.value=h))}},Ti={deep:!0,created(e,n,i){e[Cn]=Ms(i),ls(e,"change",()=>{const r=e._modelValue,s=Pi(e),a=e.checked,l=e[Cn];if(je(r)){const d=Fl(r,s),h=d!==-1;if(a&&!h)l(r.concat(s));else if(!a&&h){const m=[...r];m.splice(d,1),l(m)}}else if(Ri(r)){const d=new Set(r);a?d.add(s):d.delete(s),l(d)}else l(fh(e,a))})},mounted:hu,beforeUpdate(e,n,i){e[Cn]=Ms(i),hu(e,n,i)}};function hu(e,{value:n,oldValue:i},r){e._modelValue=n;let s;if(je(n))s=Fl(n,r.props.value)>-1;else if(Ri(n))s=n.has(r.props.value);else{if(n===i)return;s=ti(n,fh(e,!0))}e.checked!==s&&(e.checked=s)}const fu={created(e,{value:n},i){e.checked=ti(n,i.props.value),e[Cn]=Ms(i),ls(e,"change",()=>{e[Cn](Pi(e))})},beforeUpdate(e,{value:n,oldValue:i},r){e[Cn]=Ms(r),n!==i&&(e.checked=ti(n,r.props.value))}},mn={deep:!0,created(e,{value:n,modifiers:{number:i}},r){const s=Ri(n);ls(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>i?nr(Pi(l)):Pi(l));e[Cn](e.multiple?s?new Set(a):a:a[0]),e._assigning=!0,Si(()=>{e._assigning=!1})}),e[Cn]=Ms(r)},mounted(e,{value:n}){pu(e,n)},beforeUpdate(e,n,i){e[Cn]=Ms(i)},updated(e,{value:n}){e._assigning||pu(e,n)}};function pu(e,n){const i=e.multiple,r=je(n);if(!(i&&!r&&!Ri(n))){for(let s=0,a=e.options.length;s<a;s++){const l=e.options[s],d=Pi(l);if(i)if(r){const h=typeof d;h==="string"||h==="number"?l.selected=n.some(m=>String(m)===String(d)):l.selected=Fl(n,d)>-1}else l.selected=n.has(d);else if(ti(Pi(l),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Pi(e){return"_value"in e?e._value:e.value}function fh(e,n){const i=n?"_trueValue":"_falseValue";return i in e?e[i]:n}const lv=["ctrl","shift","alt","meta"],cv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>lv.some(i=>e[`${i}Key`]&&!n.includes(i))},xt=(e,n)=>{const i=e._withMods||(e._withMods={}),r=n.join(".");return i[r]||(i[r]=((s,...a)=>{for(let l=0;l<n.length;l++){const d=cv[n[l]];if(d&&d(s,n))return}return e(s,...a)}))},uv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ph=(e,n)=>{const i=e._withKeys||(e._withKeys={}),r=n.join(".");return i[r]||(i[r]=(s=>{if(!("key"in s))return;const a=Ps(s.key);if(n.some(l=>l===a||uv[l]===a))return e(s)}))},dv=Xt({patchProp:ov},qm);let mu;function hv(){return mu||(mu=Lm(dv))}const fv=((...e)=>{const n=hv().createApp(...e),{mount:i}=n;return n.mount=r=>{const s=mv(r);if(!s)return;const a=n._component;!nt(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=i(s,!1,pv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},n});function pv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function mv(e){return Dt(e)?document.querySelector(e):e}let mh;const hr=e=>mh=e,vh=Symbol();function xl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Mo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Mo||(Mo={}));function vv(){const e=cd(!0),n=e.run(()=>D({}));let i=[],r=[];const s=Wl({install(a){hr(s),s._a=a,a.provide(vh,s),a.config.globalProperties.$pinia=s,r.forEach(l=>i.push(l)),r=[]},use(a){return this._a?i.push(a):r.push(a),this},_p:i,_a:null,_e:e,_s:new Map,state:n});return s}const gh=()=>{};function vu(e,n,i,r=gh){e.add(n);const s=()=>{e.delete(n)&&r()};return!i&&ud()&&np(s),s}function yi(e,...n){e.forEach(i=>{i(...n)})}const gv=e=>e(),gu=Symbol(),il=Symbol();function Al(e,n){e instanceof Map&&n instanceof Map?n.forEach((i,r)=>e.set(r,i)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i],s=e[i];xl(s)&&xl(r)&&e.hasOwnProperty(i)&&!$t(r)&&!us(r)?e[i]=Al(s,r):e[i]=r}return e}const _v=Symbol();function yv(e){return!xl(e)||!Object.prototype.hasOwnProperty.call(e,_v)}const{assign:Cs}=Object;function bv(e){return!!($t(e)&&e.effect)}function kv(e,n,i,r){const{state:s,actions:a,getters:l}=n,d=i.state.value[e];let h;function m(){d||(i.state.value[e]=s?s():{});const f=xp(i.state.value[e]);return Cs(f,a,Object.keys(l||{}).reduce((v,b)=>(v[b]=Wl(ne(()=>{hr(i);const A=i._s.get(e);return l[b].call(A,A)})),v),{}))}return h=_h(e,m,n,i,r,!0),h}function _h(e,n,i={},r,s,a){let l;const d=Cs({actions:{}},i),h={deep:!0};let m,f,v=new Set,b=new Set,A;const M=r.state.value[e];!a&&!M&&(r.state.value[e]={}),D({});let $;function O(Z){let V;m=f=!1,typeof Z=="function"?(Z(r.state.value[e]),V={type:Mo.patchFunction,storeId:e,events:A}):(Al(r.state.value[e],Z),V={type:Mo.patchObject,payload:Z,storeId:e,events:A});const ae=$=Symbol();Si().then(()=>{$===ae&&(m=!0)}),f=!0,yi(v,V,r.state.value[e])}const T=a?function(){const{state:V}=i,ae=V?V():{};this.$patch(ge=>{Cs(ge,ae)})}:gh;function x(){l.stop(),v.clear(),b.clear(),r._s.delete(e)}const w=(Z,V="")=>{if(gu in Z)return Z[il]=V,Z;const ae=function(){hr(r);const ge=Array.from(arguments),Te=new Set,fe=new Set;function j(Ee){Te.add(Ee)}function G(Ee){fe.add(Ee)}yi(b,{args:ge,name:ae[il],store:k,after:j,onError:G});let se;try{se=Z.apply(this&&this.$id===e?this:k,ge)}catch(Ee){throw yi(fe,Ee),Ee}return se instanceof Promise?se.then(Ee=>(yi(Te,Ee),Ee)).catch(Ee=>(yi(fe,Ee),Promise.reject(Ee))):(yi(Te,se),se)};return ae[gu]=!0,ae[il]=V,ae},P={_p:r,$id:e,$onAction:vu.bind(null,b),$patch:O,$reset:T,$subscribe(Z,V={}){const ae=vu(v,Z,V.detached,()=>ge()),ge=l.run(()=>We(()=>r.state.value[e],Te=>{(V.flush==="sync"?f:m)&&Z({storeId:e,type:Mo.direct,events:A},Te)},Cs({},h,V)));return ae},$dispose:x},k=Ho(P);r._s.set(e,k);const I=(r._a&&r._a.runWithContext||gv)(()=>r._e.run(()=>(l=cd()).run(()=>n({action:w}))));for(const Z in I){const V=I[Z];if($t(V)&&!bv(V)||us(V))a||(M&&yv(V)&&($t(V)?V.value=M[Z]:Al(V,M[Z])),r.state.value[e][Z]=V);else if(typeof V=="function"){const ae=w(V,Z);I[Z]=ae,d.actions[Z]=V}}return Cs(k,I),Cs(ut(k),I),Object.defineProperty(k,"$state",{get:()=>r.state.value[e],set:Z=>{O(V=>{Cs(V,Z)})}}),r._p.forEach(Z=>{Cs(k,l.run(()=>Z({store:k,app:r._a,pinia:r,options:d})))}),M&&a&&i.hydrate&&i.hydrate(k.$state,M),m=!0,f=!0,k}function Ql(e,n,i){let r;const s=typeof n=="function";r=s?i:n;function a(l,d){const h=Dp();return l=l||(h?wn(vh,null):null),l&&hr(l),l=mh,l._s.has(e)||(s?_h(e,n,r,l):kv(e,r,l)),l._s.get(e)}return a.$id=e,a}const Ze=(e,n)=>{const i=e.__vccOpts||e;for(const[r,s]of n)i[r]=s;return i},wv={},Cv={id:"app"};function Lv(e,n){const i=lr("router-view");return g(),y("div",Cv,[De(i)])}const xv=Ze(wv,[["render",Lv]]);const ki=typeof document<"u";function yh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Av(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&yh(e.default)}const ht=Object.assign;function ol(e,n){const i={};for(const r in n){const s=n[r];i[r]=$n(s)?s.map(e):e(s)}return i}const Po=()=>{},$n=Array.isArray;function _u(e,n){const i={};for(const r in e)i[r]=r in n?n[r]:e[r];return i}const bh=/#/g,Ev=/&/g,Tv=/\//g,Iv=/=/g,Sv=/\?/g,kh=/\+/g,Mv=/%5B/g,Pv=/%5D/g,wh=/%5E/g,$v=/%60/g,Ch=/%7B/g,Ov=/%7C/g,Lh=/%7D/g,Dv=/%20/g;function ec(e){return e==null?"":encodeURI(""+e).replace(Ov,"|").replace(Mv,"[").replace(Pv,"]")}function Rv(e){return ec(e).replace(Ch,"{").replace(Lh,"}").replace(wh,"^")}function El(e){return ec(e).replace(kh,"%2B").replace(Dv,"+").replace(bh,"%23").replace(Ev,"%26").replace($v,"`").replace(Ch,"{").replace(Lh,"}").replace(wh,"^")}function Nv(e){return El(e).replace(Iv,"%3D")}function Bv(e){return ec(e).replace(bh,"%23").replace(Sv,"%3F")}function Fv(e){return Bv(e).replace(Tv,"%2F")}function Fo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const zv=/\/$/,Uv=e=>e.replace(zv,"");function al(e,n,i="/"){let r,s={},a="",l="";const d=n.indexOf("#");let h=n.indexOf("?");return h=d>=0&&h>d?-1:h,h>=0&&(r=n.slice(0,h),a=n.slice(h,d>0?d:n.length),s=e(a.slice(1))),d>=0&&(r=r||n.slice(0,d),l=n.slice(d,n.length)),r=qv(r??n,i),{fullPath:r+a+l,path:r,query:s,hash:Fo(l)}}function Hv(e,n){const i=n.query?e(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function yu(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Vv(e,n,i){const r=n.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&$i(n.matched[r],i.matched[s])&&xh(n.params,i.params)&&e(n.query)===e(i.query)&&n.hash===i.hash}function $i(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function xh(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!Zv(e[i],n[i]))return!1;return!0}function Zv(e,n){return $n(e)?bu(e,n):$n(n)?bu(n,e):e?.valueOf()===n?.valueOf()}function bu(e,n){return $n(n)?e.length===n.length&&e.every((i,r)=>i===n[r]):e.length===1&&e[0]===n}function qv(e,n){if(e.startsWith("/"))return e;if(!e)return n;const i=n.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=i.length-1,l,d;for(l=0;l<r.length;l++)if(d=r[l],d!==".")if(d==="..")a>1&&a--;else break;return i.slice(0,a).join("/")+"/"+r.slice(l).join("/")}const ws={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Tl=(function(e){return e.pop="pop",e.push="push",e})({}),rl=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Wv(e){if(!e)if(ki){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Uv(e)}const jv=/^[^#]+#/;function Gv(e,n){return e.replace(jv,"#")+n}function Kv(e,n){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-i.left-(n.left||0),top:r.top-i.top-(n.top||0)}}const fr=()=>({left:window.scrollX,top:window.scrollY});function Yv(e){let n;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;n=Kv(s,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function ku(e,n){return(history.state?history.state.position-n:-1)+e}const Il=new Map;function Jv(e,n){Il.set(e,n)}function Xv(e){const n=Il.get(e);return Il.delete(e),n}function Qv(e){return typeof e=="string"||e&&typeof e=="object"}function Ah(e){return typeof e=="string"||typeof e=="symbol"}let Mt=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Eh=Symbol("");Mt.MATCHER_NOT_FOUND+"",Mt.NAVIGATION_GUARD_REDIRECT+"",Mt.NAVIGATION_ABORTED+"",Mt.NAVIGATION_CANCELLED+"",Mt.NAVIGATION_DUPLICATED+"";function Oi(e,n){return ht(new Error,{type:e,[Eh]:!0},n)}function ss(e,n){return e instanceof Error&&Eh in e&&(n==null||!!(e.type&n))}const eg=["params","query","hash"];function tg(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const i of eg)i in e&&(n[i]=e[i]);return JSON.stringify(n,null,2)}function ng(e){const n={};if(e===""||e==="?")return n;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(kh," "),a=s.indexOf("="),l=Fo(a<0?s:s.slice(0,a)),d=a<0?null:Fo(s.slice(a+1));if(l in n){let h=n[l];$n(h)||(h=n[l]=[h]),h.push(d)}else n[l]=d}return n}function wu(e){let n="";for(let i in e){const r=e[i];if(i=Nv(i),r==null){r!==void 0&&(n+=(n.length?"&":"")+i);continue}($n(r)?r.map(s=>s&&El(s)):[r&&El(r)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+i,s!=null&&(n+="="+s))})}return n}function sg(e){const n={};for(const i in e){const r=e[i];r!==void 0&&(n[i]=$n(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return n}const ig=Symbol(""),Cu=Symbol(""),pr=Symbol(""),tc=Symbol(""),Sl=Symbol("");function _o(){let e=[];function n(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:n,list:()=>e.slice(),reset:i}}function Es(e,n,i,r,s,a=l=>l()){const l=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((d,h)=>{const m=b=>{b===!1?h(Oi(Mt.NAVIGATION_ABORTED,{from:i,to:n})):b instanceof Error?h(b):Qv(b)?h(Oi(Mt.NAVIGATION_GUARD_REDIRECT,{from:n,to:b})):(l&&r.enterCallbacks[s]===l&&typeof b=="function"&&l.push(b),d())},f=a(()=>e.call(r&&r.instances[s],n,i,m));let v=Promise.resolve(f);e.length<3&&(v=v.then(m)),v.catch(b=>h(b))})}function ll(e,n,i,r,s=a=>a()){const a=[];for(const l of e)for(const d in l.components){let h=l.components[d];if(!(n!=="beforeRouteEnter"&&!l.instances[d]))if(yh(h)){const m=(h.__vccOpts||h)[n];m&&a.push(Es(m,i,r,l,d,s))}else{let m=h();a.push(()=>m.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${d}" at "${l.path}"`);const v=Av(f)?f.default:f;l.mods[d]=f,l.components[d]=v;const b=(v.__vccOpts||v)[n];return b&&Es(b,i,r,l,d,s)()}))}}return a}function og(e,n){const i=[],r=[],s=[],a=Math.max(n.matched.length,e.matched.length);for(let l=0;l<a;l++){const d=n.matched[l];d&&(e.matched.find(m=>$i(m,d))?r.push(d):i.push(d));const h=e.matched[l];h&&(n.matched.find(m=>$i(m,h))||s.push(h))}return[i,r,s]}let ag=()=>location.protocol+"//"+location.host;function Th(e,n){const{pathname:i,search:r,hash:s}=n,a=e.indexOf("#");if(a>-1){let l=s.includes(e.slice(a))?e.slice(a).length:1,d=s.slice(l);return d[0]!=="/"&&(d="/"+d),yu(d,"")}return yu(i,e)+r+s}function rg(e,n,i,r){let s=[],a=[],l=null;const d=({state:b})=>{const A=Th(e,location),M=i.value,$=n.value;let O=0;if(b){if(i.value=A,n.value=b,l&&l===M){l=null;return}O=$?b.position-$.position:0}else r(A);s.forEach(T=>{T(i.value,M,{delta:O,type:Tl.pop,direction:O?O>0?rl.forward:rl.back:rl.unknown})})};function h(){l=i.value}function m(b){s.push(b);const A=()=>{const M=s.indexOf(b);M>-1&&s.splice(M,1)};return a.push(A),A}function f(){if(document.visibilityState==="hidden"){const{history:b}=window;if(!b.state)return;b.replaceState(ht({},b.state,{scroll:fr()}),"")}}function v(){for(const b of a)b();a=[],window.removeEventListener("popstate",d),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",d),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:h,listen:m,destroy:v}}function Lu(e,n,i,r=!1,s=!1){return{back:e,current:n,forward:i,replaced:r,position:window.history.length,scroll:s?fr():null}}function lg(e){const{history:n,location:i}=window,r={value:Th(e,i)},s={value:n.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function a(h,m,f){const v=e.indexOf("#"),b=v>-1?(i.host&&document.querySelector("base")?e:e.slice(v))+h:ag()+e+h;try{n[f?"replaceState":"pushState"](m,"",b),s.value=m}catch(A){console.error(A),i[f?"replace":"assign"](b)}}function l(h,m){a(h,ht({},n.state,Lu(s.value.back,h,s.value.forward,!0),m,{position:s.value.position}),!0),r.value=h}function d(h,m){const f=ht({},s.value,n.state,{forward:h,scroll:fr()});a(f.current,f,!0),a(h,ht({},Lu(r.value,h,null),{position:f.position+1},m),!1),r.value=h}return{location:r,state:s,push:d,replace:l}}function cg(e){e=Wv(e);const n=lg(e),i=rg(e,n.state,n.location,n.replace);function r(a,l=!0){l||i.pauseListeners(),history.go(a)}const s=ht({location:"",base:e,go:r,createHref:Gv.bind(null,e)},n,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function ug(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),cg(e)}let Ys=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Vt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Vt||{});const dg={type:Ys.Static,value:""},hg=/[a-zA-Z0-9_]/;function fg(e){if(!e)return[[]];if(e==="/")return[[dg]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(A){throw new Error(`ERR (${i})/"${m}": ${A}`)}let i=Vt.Static,r=i;const s=[];let a;function l(){a&&s.push(a),a=[]}let d=0,h,m="",f="";function v(){m&&(i===Vt.Static?a.push({type:Ys.Static,value:m}):i===Vt.Param||i===Vt.ParamRegExp||i===Vt.ParamRegExpEnd?(a.length>1&&(h==="*"||h==="+")&&n(`A repeatable param (${m}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Ys.Param,value:m,regexp:f,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):n("Invalid state to consume buffer"),m="")}function b(){m+=h}for(;d<e.length;){if(h=e[d++],h==="\\"&&i!==Vt.ParamRegExp){r=i,i=Vt.EscapeNext;continue}switch(i){case Vt.Static:h==="/"?(m&&v(),l()):h===":"?(v(),i=Vt.Param):b();break;case Vt.EscapeNext:b(),i=r;break;case Vt.Param:h==="("?i=Vt.ParamRegExp:hg.test(h)?b():(v(),i=Vt.Static,h!=="*"&&h!=="?"&&h!=="+"&&d--);break;case Vt.ParamRegExp:h===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+h:i=Vt.ParamRegExpEnd:f+=h;break;case Vt.ParamRegExpEnd:v(),i=Vt.Static,h!=="*"&&h!=="?"&&h!=="+"&&d--,f="";break;default:n("Unknown state");break}}return i===Vt.ParamRegExp&&n(`Unfinished custom RegExp for param "${m}"`),v(),l(),s}const xu="[^/]+?",pg={sensitive:!1,strict:!1,start:!0,end:!0};var on=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(on||{});const mg=/[.+*?^${}()[\]/\\]/g;function vg(e,n){const i=ht({},pg,n),r=[];let s=i.start?"^":"";const a=[];for(const m of e){const f=m.length?[]:[on.Root];i.strict&&!m.length&&(s+="/");for(let v=0;v<m.length;v++){const b=m[v];let A=on.Segment+(i.sensitive?on.BonusCaseSensitive:0);if(b.type===Ys.Static)v||(s+="/"),s+=b.value.replace(mg,"\\$&"),A+=on.Static;else if(b.type===Ys.Param){const{value:M,repeatable:$,optional:O,regexp:T}=b;a.push({name:M,repeatable:$,optional:O});const x=T||xu;if(x!==xu){A+=on.BonusCustomRegExp;try{`${x}`}catch(P){throw new Error(`Invalid custom RegExp for param "${M}" (${x}): `+P.message)}}let w=$?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;v||(w=O&&m.length<2?`(?:/${w})`:"/"+w),O&&(w+="?"),s+=w,A+=on.Dynamic,O&&(A+=on.BonusOptional),$&&(A+=on.BonusRepeatable),x===".*"&&(A+=on.BonusWildcard)}f.push(A)}r.push(f)}if(i.strict&&i.end){const m=r.length-1;r[m][r[m].length-1]+=on.BonusStrict}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const l=new RegExp(s,i.sensitive?"":"i");function d(m){const f=m.match(l),v={};if(!f)return null;for(let b=1;b<f.length;b++){const A=f[b]||"",M=a[b-1];v[M.name]=A&&M.repeatable?A.split("/"):A}return v}function h(m){let f="",v=!1;for(const b of e){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const A of b)if(A.type===Ys.Static)f+=A.value;else if(A.type===Ys.Param){const{value:M,repeatable:$,optional:O}=A,T=M in m?m[M]:"";if($n(T)&&!$)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const x=$n(T)?T.join("/"):T;if(!x)if(O)b.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${M}"`);f+=x}}return f||"/"}return{re:l,score:r,keys:a,parse:d,stringify:h}}function gg(e,n){let i=0;for(;i<e.length&&i<n.length;){const r=n[i]-e[i];if(r)return r;i++}return e.length<n.length?e.length===1&&e[0]===on.Static+on.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===on.Static+on.Segment?1:-1:0}function Ih(e,n){let i=0;const r=e.score,s=n.score;for(;i<r.length&&i<s.length;){const a=gg(r[i],s[i]);if(a)return a;i++}if(Math.abs(s.length-r.length)===1){if(Au(r))return 1;if(Au(s))return-1}return s.length-r.length}function Au(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const _g={strict:!1,end:!0,sensitive:!1};function yg(e,n,i){const r=vg(fg(e.path),i),s=ht(r,{record:e,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function bg(e,n){const i=[],r=new Map;n=_u(_g,n);function s(v){return r.get(v)}function a(v,b,A){const M=!A,$=Tu(v);$.aliasOf=A&&A.record;const O=_u(n,v),T=[$];if("alias"in v){const P=typeof v.alias=="string"?[v.alias]:v.alias;for(const k of P)T.push(Tu(ht({},$,{components:A?A.record.components:$.components,path:k,aliasOf:A?A.record:$})))}let x,w;for(const P of T){const{path:k}=P;if(b&&k[0]!=="/"){const C=b.record.path,I=C[C.length-1]==="/"?"":"/";P.path=b.record.path+(k&&I+k)}if(x=yg(P,b,O),A?A.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),M&&v.name&&!Iu(x)&&l(v.name)),Sh(x)&&h(x),$.children){const C=$.children;for(let I=0;I<C.length;I++)a(C[I],x,A&&A.children[I])}A=A||x}return w?()=>{l(w)}:Po}function l(v){if(Ah(v)){const b=r.get(v);b&&(r.delete(v),i.splice(i.indexOf(b),1),b.children.forEach(l),b.alias.forEach(l))}else{const b=i.indexOf(v);b>-1&&(i.splice(b,1),v.record.name&&r.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function d(){return i}function h(v){const b=Cg(v,i);i.splice(b,0,v),v.record.name&&!Iu(v)&&r.set(v.record.name,v)}function m(v,b){let A,M={},$,O;if("name"in v&&v.name){if(A=r.get(v.name),!A)throw Oi(Mt.MATCHER_NOT_FOUND,{location:v});O=A.record.name,M=ht(Eu(b.params,A.keys.filter(w=>!w.optional).concat(A.parent?A.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),v.params&&Eu(v.params,A.keys.map(w=>w.name))),$=A.stringify(M)}else if(v.path!=null)$=v.path,A=i.find(w=>w.re.test($)),A&&(M=A.parse($),O=A.record.name);else{if(A=b.name?r.get(b.name):i.find(w=>w.re.test(b.path)),!A)throw Oi(Mt.MATCHER_NOT_FOUND,{location:v,currentLocation:b});O=A.record.name,M=ht({},b.params,v.params),$=A.stringify(M)}const T=[];let x=A;for(;x;)T.unshift(x.record),x=x.parent;return{name:O,path:$,params:M,matched:T,meta:wg(T)}}e.forEach(v=>a(v));function f(){i.length=0,r.clear()}return{addRoute:a,resolve:m,removeRoute:l,clearRoutes:f,getRoutes:d,getRecordMatcher:s}}function Eu(e,n){const i={};for(const r of n)r in e&&(i[r]=e[r]);return i}function Tu(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:kg(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function kg(e){const n={},i=e.props||!1;if("component"in e)n.default=i;else for(const r in e.components)n[r]=typeof i=="object"?i[r]:i;return n}function Iu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wg(e){return e.reduce((n,i)=>ht(n,i.meta),{})}function Cg(e,n){let i=0,r=n.length;for(;i!==r;){const a=i+r>>1;Ih(e,n[a])<0?r=a:i=a+1}const s=Lg(e);return s&&(r=n.lastIndexOf(s,r-1)),r}function Lg(e){let n=e;for(;n=n.parent;)if(Sh(n)&&Ih(e,n)===0)return n}function Sh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Su(e){const n=wn(pr),i=wn(tc),r=ne(()=>{const h=z(e.to);return n.resolve(h)}),s=ne(()=>{const{matched:h}=r.value,{length:m}=h,f=h[m-1],v=i.matched;if(!f||!v.length)return-1;const b=v.findIndex($i.bind(null,f));if(b>-1)return b;const A=Mu(h[m-2]);return m>1&&Mu(f)===A&&v[v.length-1].path!==A?v.findIndex($i.bind(null,h[m-2])):b}),a=ne(()=>s.value>-1&&Ig(i.params,r.value.params)),l=ne(()=>s.value>-1&&s.value===i.matched.length-1&&xh(i.params,r.value.params));function d(h={}){if(Tg(h)){const m=n[z(e.replace)?"replace":"push"](z(e.to)).catch(Po);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>m),m}return Promise.resolve()}return{route:r,href:ne(()=>r.value.href),isActive:a,isExactActive:l,navigate:d}}function xg(e){return e.length===1?e[0]:e}const Ag=Bd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Su,setup(e,{slots:n}){const i=Ho(Su(e)),{options:r}=wn(pr),s=ne(()=>({[Pu(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[Pu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const a=n.default&&xg(n.default(i));return e.custom?a:uh("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},a)}}}),Eg=Ag;function Tg(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function Ig(e,n){for(const i in n){const r=n[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!$n(s)||s.length!==r.length||r.some((a,l)=>a.valueOf()!==s[l].valueOf()))return!1}return!0}function Mu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Pu=(e,n,i)=>e??n??i,Sg=Bd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:i}){const r=wn(Sl),s=ne(()=>e.route||r.value),a=wn(Cu,0),l=ne(()=>{let m=z(a);const{matched:f}=s.value;let v;for(;(v=f[m])&&!v.components;)m++;return m}),d=ne(()=>s.value.matched[l.value]);Ma(Cu,ne(()=>l.value+1)),Ma(ig,d),Ma(Sl,s);const h=D();return We(()=>[h.value,d.value,e.name],([m,f,v],[b,A,M])=>{f&&(f.instances[v]=m,A&&A!==f&&m&&m===b&&(f.leaveGuards.size||(f.leaveGuards=A.leaveGuards),f.updateGuards.size||(f.updateGuards=A.updateGuards))),m&&f&&(!A||!$i(f,A)||!b)&&(f.enterCallbacks[v]||[]).forEach($=>$(m))},{flush:"post"}),()=>{const m=s.value,f=e.name,v=d.value,b=v&&v.components[f];if(!b)return $u(i.default,{Component:b,route:m});const A=v.props[f],M=A?A===!0?m.params:typeof A=="function"?A(m):A:null,O=uh(b,ht({},M,n,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(v.instances[f]=null)},ref:h}));return $u(i.default,{Component:O,route:m})||O}}});function $u(e,n){if(!e)return null;const i=e(n);return i.length===1?i[0]:i}const Mg=Sg;function Pg(e){const n=bg(e.routes,e),i=e.parseQuery||ng,r=e.stringifyQuery||wu,s=e.history,a=_o(),l=_o(),d=_o(),h=wp(ws);let m=ws;ki&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=ol.bind(null,H=>""+H),v=ol.bind(null,Fv),b=ol.bind(null,Fo);function A(H,Y){let X,ke;return Ah(H)?(X=n.getRecordMatcher(H),ke=Y):ke=H,n.addRoute(ke,X)}function M(H){const Y=n.getRecordMatcher(H);Y&&n.removeRoute(Y)}function $(){return n.getRoutes().map(H=>H.record)}function O(H){return!!n.getRecordMatcher(H)}function T(H,Y){if(Y=ht({},Y||h.value),typeof H=="string"){const q=al(i,H,Y.path),ie=n.resolve({path:q.path},Y),ce=s.createHref(q.fullPath);return ht(q,ie,{params:b(ie.params),hash:Fo(q.hash),redirectedFrom:void 0,href:ce})}let X;if(H.path!=null)X=ht({},H,{path:al(i,H.path,Y.path).path});else{const q=ht({},H.params);for(const ie in q)q[ie]==null&&delete q[ie];X=ht({},H,{params:v(q)}),Y.params=v(Y.params)}const ke=n.resolve(X,Y),Xe=H.hash||"";ke.params=f(b(ke.params));const R=Hv(r,ht({},H,{hash:Rv(Xe),path:ke.path})),F=s.createHref(R);return ht({fullPath:R,hash:Xe,query:r===wu?sg(H.query):H.query||{}},ke,{redirectedFrom:void 0,href:F})}function x(H){return typeof H=="string"?al(i,H,h.value.path):ht({},H)}function w(H,Y){if(m!==H)return Oi(Mt.NAVIGATION_CANCELLED,{from:Y,to:H})}function P(H){return I(H)}function k(H){return P(ht(x(H),{replace:!0}))}function C(H,Y){const X=H.matched[H.matched.length-1];if(X&&X.redirect){const{redirect:ke}=X;let Xe=typeof ke=="function"?ke(H,Y):ke;return typeof Xe=="string"&&(Xe=Xe.includes("?")||Xe.includes("#")?Xe=x(Xe):{path:Xe},Xe.params={}),ht({query:H.query,hash:H.hash,params:Xe.path!=null?{}:H.params},Xe)}}function I(H,Y){const X=m=T(H),ke=h.value,Xe=H.state,R=H.force,F=H.replace===!0,q=C(X,ke);if(q)return I(ht(x(q),{state:typeof q=="object"?ht({},Xe,q.state):Xe,force:R,replace:F}),Y||X);const ie=X;ie.redirectedFrom=Y;let ce;return!R&&Vv(r,ke,X)&&(ce=Oi(Mt.NAVIGATION_DUPLICATED,{to:ie,from:ke}),he(ke,ke,!0,!1)),(ce?Promise.resolve(ce):ae(ie,ke)).catch(oe=>ss(oe)?ss(oe,Mt.NAVIGATION_GUARD_REDIRECT)?oe:J(oe):pe(oe,ie,ke)).then(oe=>{if(oe){if(ss(oe,Mt.NAVIGATION_GUARD_REDIRECT))return I(ht({replace:F},x(oe.to),{state:typeof oe.to=="object"?ht({},Xe,oe.to.state):Xe,force:R}),Y||ie)}else oe=Te(ie,ke,!0,F,Xe);return ge(ie,ke,oe),oe})}function Z(H,Y){const X=w(H,Y);return X?Promise.reject(X):Promise.resolve()}function V(H){const Y=ve.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(H):H()}function ae(H,Y){let X;const[ke,Xe,R]=og(H,Y);X=ll(ke.reverse(),"beforeRouteLeave",H,Y);for(const q of ke)q.leaveGuards.forEach(ie=>{X.push(Es(ie,H,Y))});const F=Z.bind(null,H,Y);return X.push(F),de(X).then(()=>{X=[];for(const q of a.list())X.push(Es(q,H,Y));return X.push(F),de(X)}).then(()=>{X=ll(Xe,"beforeRouteUpdate",H,Y);for(const q of Xe)q.updateGuards.forEach(ie=>{X.push(Es(ie,H,Y))});return X.push(F),de(X)}).then(()=>{X=[];for(const q of R)if(q.beforeEnter)if($n(q.beforeEnter))for(const ie of q.beforeEnter)X.push(Es(ie,H,Y));else X.push(Es(q.beforeEnter,H,Y));return X.push(F),de(X)}).then(()=>(H.matched.forEach(q=>q.enterCallbacks={}),X=ll(R,"beforeRouteEnter",H,Y,V),X.push(F),de(X))).then(()=>{X=[];for(const q of l.list())X.push(Es(q,H,Y));return X.push(F),de(X)}).catch(q=>ss(q,Mt.NAVIGATION_CANCELLED)?q:Promise.reject(q))}function ge(H,Y,X){d.list().forEach(ke=>V(()=>ke(H,Y,X)))}function Te(H,Y,X,ke,Xe){const R=w(H,Y);if(R)return R;const F=Y===ws,q=ki?history.state:{};X&&(ke||F?s.replace(H.fullPath,ht({scroll:F&&q&&q.scroll},Xe)):s.push(H.fullPath,Xe)),h.value=H,he(H,Y,X,F),J()}let fe;function j(){fe||(fe=s.listen((H,Y,X)=>{if(!le.listening)return;const ke=T(H),Xe=C(ke,le.currentRoute.value);if(Xe){I(ht(Xe,{replace:!0,force:!0}),ke).catch(Po);return}m=ke;const R=h.value;ki&&Jv(ku(R.fullPath,X.delta),fr()),ae(ke,R).catch(F=>ss(F,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_CANCELLED)?F:ss(F,Mt.NAVIGATION_GUARD_REDIRECT)?(I(ht(x(F.to),{force:!0}),ke).then(q=>{ss(q,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&!X.delta&&X.type===Tl.pop&&s.go(-1,!1)}).catch(Po),Promise.reject()):(X.delta&&s.go(-X.delta,!1),pe(F,ke,R))).then(F=>{F=F||Te(ke,R,!1),F&&(X.delta&&!ss(F,Mt.NAVIGATION_CANCELLED)?s.go(-X.delta,!1):X.type===Tl.pop&&ss(F,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),ge(ke,R,F)}).catch(Po)}))}let G=_o(),se=_o(),Ee;function pe(H,Y,X){J(H);const ke=se.list();return ke.length?ke.forEach(Xe=>Xe(H,Y,X)):console.error(H),Promise.reject(H)}function Le(){return Ee&&h.value!==ws?Promise.resolve():new Promise((H,Y)=>{G.add([H,Y])})}function J(H){return Ee||(Ee=!H,j(),G.list().forEach(([Y,X])=>H?X(H):Y()),G.reset()),H}function he(H,Y,X,ke){const{scrollBehavior:Xe}=e;if(!ki||!Xe)return Promise.resolve();const R=!X&&Xv(ku(H.fullPath,0))||(ke||!X)&&history.state&&history.state.scroll||null;return Si().then(()=>Xe(H,Y,R)).then(F=>F&&Yv(F)).catch(F=>pe(F,H,Y))}const Se=H=>s.go(H);let Re;const ve=new Set,le={currentRoute:h,listening:!0,addRoute:A,removeRoute:M,clearRoutes:n.clearRoutes,hasRoute:O,getRoutes:$,resolve:T,options:e,push:P,replace:k,go:Se,back:()=>Se(-1),forward:()=>Se(1),beforeEach:a.add,beforeResolve:l.add,afterEach:d.add,onError:se.add,isReady:Le,install(H){H.component("RouterLink",Eg),H.component("RouterView",Mg),H.config.globalProperties.$router=le,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>z(h)}),ki&&!Re&&h.value===ws&&(Re=!0,P(s.location).catch(ke=>{}));const Y={};for(const ke in ws)Object.defineProperty(Y,ke,{get:()=>h.value[ke],enumerable:!0});H.provide(pr,le),H.provide(tc,xd(Y)),H.provide(Sl,h);const X=H.unmount;ve.add(H),H.unmount=function(){ve.delete(H),ve.size<1&&(m=ws,fe&&fe(),fe=null,h.value=ws,Re=!1,Ee=!1),X()}}};function de(H){return H.reduce((Y,X)=>Y.then(()=>V(X)),Promise.resolve())}return le}function qo(){return wn(pr)}function nc(e){return wn(tc)}const $g={},Og={class:"home"},Dg={class:"container"},Rg={class:"actions"};function Ng(e,n){const i=lr("router-link");return g(),y("div",Og,[u("div",Dg,[n[1]||(n[1]=u("h1",null,"Volunteer Check-in System ",-1)),n[2]||(n[2]=u("p",{class:"subtitle"},"Manage race marshals and volunteers with ease",-1)),u("div",Rg,[De(i,{to:"/admin/login",class:"btn btn-primary"},{default:Ke(()=>[...n[0]||(n[0]=[Ve(" Admin Portal ",-1)])]),_:1})]),n[3]||(n[3]=Pm('<div class="features" data-v-536ab6a4><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Admins</h3><ul data-v-536ab6a4><li data-v-536ab6a4>Create and manage events</li><li data-v-536ab6a4>Define marshal locations</li><li data-v-536ab6a4>Assign marshals to locations</li><li data-v-536ab6a4>Real-time check-in monitoring</li><li data-v-536ab6a4>Map view of all locations</li></ul></div><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Marshals</h3><ul data-v-536ab6a4><li data-v-536ab6a4>View your assigned location</li><li data-v-536ab6a4>Check in with GPS verification</li><li data-v-536ab6a4>Access emergency contact info</li><li data-v-536ab6a4>View all marshal locations</li></ul></div></div>',1))])])}const Bg=Ze($g,[["render",Ng],["__scopeId","data-v-536ab6a4"]]);function Mh(e,n){return function(){return e.apply(n,arguments)}}const{toString:Fg}=Object.prototype,{getPrototypeOf:sc}=Object,{iterator:mr,toStringTag:Ph}=Symbol,vr=(e=>n=>{const i=Fg.call(n);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Dn=e=>(e=e.toLowerCase(),n=>vr(n)===e),gr=e=>n=>typeof n===e,{isArray:Ni}=Array,Di=gr("undefined");function Wo(e){return e!==null&&!Di(e)&&e.constructor!==null&&!Di(e.constructor)&&hn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $h=Dn("ArrayBuffer");function zg(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&$h(e.buffer),n}const Ug=gr("string"),hn=gr("function"),Oh=gr("number"),jo=e=>e!==null&&typeof e=="object",Hg=e=>e===!0||e===!1,Ra=e=>{if(vr(e)!=="object")return!1;const n=sc(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ph in e)&&!(mr in e)},Vg=e=>{if(!jo(e)||Wo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zg=Dn("Date"),qg=Dn("File"),Wg=Dn("Blob"),jg=Dn("FileList"),Gg=e=>jo(e)&&hn(e.pipe),Kg=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||hn(e.append)&&((n=vr(e))==="formdata"||n==="object"&&hn(e.toString)&&e.toString()==="[object FormData]"))},Yg=Dn("URLSearchParams"),[Jg,Xg,Qg,e_]=["ReadableStream","Request","Response","Headers"].map(Dn),t_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Go(e,n,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Ni(e))for(r=0,s=e.length;r<s;r++)n.call(null,e[r],r,e);else{if(Wo(e))return;const a=i?Object.getOwnPropertyNames(e):Object.keys(e),l=a.length;let d;for(r=0;r<l;r++)d=a[r],n.call(null,e[d],d,e)}}function Dh(e,n){if(Wo(e))return null;n=n.toLowerCase();const i=Object.keys(e);let r=i.length,s;for(;r-- >0;)if(s=i[r],n===s.toLowerCase())return s;return null}const Js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rh=e=>!Di(e)&&e!==Js;function Ml(){const{caseless:e,skipUndefined:n}=Rh(this)&&this||{},i={},r=(s,a)=>{const l=e&&Dh(i,a)||a;Ra(i[l])&&Ra(s)?i[l]=Ml(i[l],s):Ra(s)?i[l]=Ml({},s):Ni(s)?i[l]=s.slice():(!n||!Di(s))&&(i[l]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Go(arguments[s],r);return i}const n_=(e,n,i,{allOwnKeys:r}={})=>(Go(n,(s,a)=>{i&&hn(s)?e[a]=Mh(s,i):e[a]=s},{allOwnKeys:r}),e),s_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),i_=(e,n,i,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),i&&Object.assign(e.prototype,i)},o_=(e,n,i,r)=>{let s,a,l;const d={};if(n=n||{},e==null)return n;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)l=s[a],(!r||r(l,e,n))&&!d[l]&&(n[l]=e[l],d[l]=!0);e=i!==!1&&sc(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},a_=(e,n,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=n.length;const r=e.indexOf(n,i);return r!==-1&&r===i},r_=e=>{if(!e)return null;if(Ni(e))return e;let n=e.length;if(!Oh(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=e[n];return i},l_=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&sc(Uint8Array)),c_=(e,n)=>{const r=(e&&e[mr]).call(e);let s;for(;(s=r.next())&&!s.done;){const a=s.value;n.call(e,a[0],a[1])}},u_=(e,n)=>{let i;const r=[];for(;(i=e.exec(n))!==null;)r.push(i);return r},d_=Dn("HTMLFormElement"),h_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,s){return r.toUpperCase()+s}),Ou=(({hasOwnProperty:e})=>(n,i)=>e.call(n,i))(Object.prototype),f_=Dn("RegExp"),Nh=(e,n)=>{const i=Object.getOwnPropertyDescriptors(e),r={};Go(i,(s,a)=>{let l;(l=n(s,a,e))!==!1&&(r[a]=l||s)}),Object.defineProperties(e,r)},p_=e=>{Nh(e,(n,i)=>{if(hn(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(hn(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},m_=(e,n)=>{const i={},r=s=>{s.forEach(a=>{i[a]=!0})};return Ni(e)?r(e):r(String(e).split(n)),i},v_=()=>{},g_=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function __(e){return!!(e&&hn(e.append)&&e[Ph]==="FormData"&&e[mr])}const y_=e=>{const n=new Array(10),i=(r,s)=>{if(jo(r)){if(n.indexOf(r)>=0)return;if(Wo(r))return r;if(!("toJSON"in r)){n[s]=r;const a=Ni(r)?[]:{};return Go(r,(l,d)=>{const h=i(l,s+1);!Di(h)&&(a[d]=h)}),n[s]=void 0,a}}return r};return i(e,0)},b_=Dn("AsyncFunction"),k_=e=>e&&(jo(e)||hn(e))&&hn(e.then)&&hn(e.catch),Bh=((e,n)=>e?setImmediate:n?((i,r)=>(Js.addEventListener("message",({source:s,data:a})=>{s===Js&&a===i&&r.length&&r.shift()()},!1),s=>{r.push(s),Js.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",hn(Js.postMessage)),w_=typeof queueMicrotask<"u"?queueMicrotask.bind(Js):typeof process<"u"&&process.nextTick||Bh,C_=e=>e!=null&&hn(e[mr]),ee={isArray:Ni,isArrayBuffer:$h,isBuffer:Wo,isFormData:Kg,isArrayBufferView:zg,isString:Ug,isNumber:Oh,isBoolean:Hg,isObject:jo,isPlainObject:Ra,isEmptyObject:Vg,isReadableStream:Jg,isRequest:Xg,isResponse:Qg,isHeaders:e_,isUndefined:Di,isDate:Zg,isFile:qg,isBlob:Wg,isRegExp:f_,isFunction:hn,isStream:Gg,isURLSearchParams:Yg,isTypedArray:l_,isFileList:jg,forEach:Go,merge:Ml,extend:n_,trim:t_,stripBOM:s_,inherits:i_,toFlatObject:o_,kindOf:vr,kindOfTest:Dn,endsWith:a_,toArray:r_,forEachEntry:c_,matchAll:u_,isHTMLForm:d_,hasOwnProperty:Ou,hasOwnProp:Ou,reduceDescriptors:Nh,freezeMethods:p_,toObjectSet:m_,toCamelCase:h_,noop:v_,toFiniteNumber:g_,findKey:Dh,global:Js,isContextDefined:Rh,isSpecCompliantForm:__,toJSONObject:y_,isAsyncFn:b_,isThenable:k_,setImmediate:Bh,asap:w_,isIterable:C_};function ot(e,n,i,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const Fh=ot.prototype,zh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{zh[e]={value:e}});Object.defineProperties(ot,zh);Object.defineProperty(Fh,"isAxiosError",{value:!0});ot.from=(e,n,i,r,s,a)=>{const l=Object.create(Fh);ee.toFlatObject(e,l,function(f){return f!==Error.prototype},m=>m!=="isAxiosError");const d=e&&e.message?e.message:"Error",h=n==null&&e?e.code:n;return ot.call(l,d,h,i,r,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",a&&Object.assign(l,a),l};const L_=null;function Pl(e){return ee.isPlainObject(e)||ee.isArray(e)}function Uh(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function Du(e,n,i){return e?e.concat(n).map(function(s,a){return s=Uh(s),!i&&a?"["+s+"]":s}).join(i?".":""):n}function x_(e){return ee.isArray(e)&&!e.some(Pl)}const A_=ee.toFlatObject(ee,{},null,function(n){return/^is[A-Z]/.test(n)});function _r(e,n,i){if(!ee.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,i=ee.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,O){return!ee.isUndefined(O[$])});const r=i.metaTokens,s=i.visitor||f,a=i.dots,l=i.indexes,h=(i.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(n);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function m(M){if(M===null)return"";if(ee.isDate(M))return M.toISOString();if(ee.isBoolean(M))return M.toString();if(!h&&ee.isBlob(M))throw new ot("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(M)||ee.isTypedArray(M)?h&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function f(M,$,O){let T=M;if(M&&!O&&typeof M=="object"){if(ee.endsWith($,"{}"))$=r?$:$.slice(0,-2),M=JSON.stringify(M);else if(ee.isArray(M)&&x_(M)||(ee.isFileList(M)||ee.endsWith($,"[]"))&&(T=ee.toArray(M)))return $=Uh($),T.forEach(function(w,P){!(ee.isUndefined(w)||w===null)&&n.append(l===!0?Du([$],P,a):l===null?$:$+"[]",m(w))}),!1}return Pl(M)?!0:(n.append(Du(O,$,a),m(M)),!1)}const v=[],b=Object.assign(A_,{defaultVisitor:f,convertValue:m,isVisitable:Pl});function A(M,$){if(!ee.isUndefined(M)){if(v.indexOf(M)!==-1)throw Error("Circular reference detected in "+$.join("."));v.push(M),ee.forEach(M,function(T,x){(!(ee.isUndefined(T)||T===null)&&s.call(n,T,ee.isString(x)?x.trim():x,$,b))===!0&&A(T,$?$.concat(x):[x])}),v.pop()}}if(!ee.isObject(e))throw new TypeError("data must be an object");return A(e),n}function Ru(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function ic(e,n){this._pairs=[],e&&_r(e,this,n)}const Hh=ic.prototype;Hh.append=function(n,i){this._pairs.push([n,i])};Hh.toString=function(n){const i=n?function(r){return n.call(this,r,Ru)}:Ru;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function E_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Vh(e,n,i){if(!n)return e;const r=i&&i.encode||E_;ee.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let a;if(s?a=s(n,i):a=ee.isURLSearchParams(n)?n.toString():new ic(n,i).toString(r),a){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Nu{constructor(){this.handlers=[]}use(n,i,r){return this.handlers.push({fulfilled:n,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ee.forEach(this.handlers,function(r){r!==null&&n(r)})}}const Zh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},T_=typeof URLSearchParams<"u"?URLSearchParams:ic,I_=typeof FormData<"u"?FormData:null,S_=typeof Blob<"u"?Blob:null,M_={isBrowser:!0,classes:{URLSearchParams:T_,FormData:I_,Blob:S_},protocols:["http","https","file","blob","url","data"]},oc=typeof window<"u"&&typeof document<"u",$l=typeof navigator=="object"&&navigator||void 0,P_=oc&&(!$l||["ReactNative","NativeScript","NS"].indexOf($l.product)<0),$_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",O_=oc&&window.location.href||"http://localhost",D_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:oc,hasStandardBrowserEnv:P_,hasStandardBrowserWebWorkerEnv:$_,navigator:$l,origin:O_},Symbol.toStringTag,{value:"Module"})),Jt={...D_,...M_};function R_(e,n){return _r(e,new Jt.classes.URLSearchParams,{visitor:function(i,r,s,a){return Jt.isNode&&ee.isBuffer(i)?(this.append(r,i.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...n})}function N_(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function B_(e){const n={},i=Object.keys(e);let r;const s=i.length;let a;for(r=0;r<s;r++)a=i[r],n[a]=e[a];return n}function qh(e){function n(i,r,s,a){let l=i[a++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),h=a>=i.length;return l=!l&&ee.isArray(s)?s.length:l,h?(ee.hasOwnProp(s,l)?s[l]=[s[l],r]:s[l]=r,!d):((!s[l]||!ee.isObject(s[l]))&&(s[l]=[]),n(i,r,s[l],a)&&ee.isArray(s[l])&&(s[l]=B_(s[l])),!d)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const i={};return ee.forEachEntry(e,(r,s)=>{n(N_(r),s,i,0)}),i}return null}function F_(e,n,i){if(ee.isString(e))try{return(n||JSON.parse)(e),ee.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const Ko={transitional:Zh,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const r=i.getContentType()||"",s=r.indexOf("application/json")>-1,a=ee.isObject(n);if(a&&ee.isHTMLForm(n)&&(n=new FormData(n)),ee.isFormData(n))return s?JSON.stringify(qh(n)):n;if(ee.isArrayBuffer(n)||ee.isBuffer(n)||ee.isStream(n)||ee.isFile(n)||ee.isBlob(n)||ee.isReadableStream(n))return n;if(ee.isArrayBufferView(n))return n.buffer;if(ee.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return R_(n,this.formSerializer).toString();if((d=ee.isFileList(n))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return _r(d?{"files[]":n}:n,h&&new h,this.formSerializer)}}return a||s?(i.setContentType("application/json",!1),F_(n)):n}],transformResponse:[function(n){const i=this.transitional||Ko.transitional,r=i&&i.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(n)||ee.isReadableStream(n))return n;if(n&&ee.isString(n)&&(r&&!this.responseType||s)){const l=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(n,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?ot.from(d,ot.ERR_BAD_RESPONSE,this,null,this.response):d}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],e=>{Ko.headers[e]={}});const z_=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U_=e=>{const n={};let i,r,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),i=l.substring(0,s).trim().toLowerCase(),r=l.substring(s+1).trim(),!(!i||n[i]&&z_[i])&&(i==="set-cookie"?n[i]?n[i].push(r):n[i]=[r]:n[i]=n[i]?n[i]+", "+r:r)}),n},Bu=Symbol("internals");function yo(e){return e&&String(e).trim().toLowerCase()}function Na(e){return e===!1||e==null?e:ee.isArray(e)?e.map(Na):String(e)}function H_(e){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)n[r[1]]=r[2];return n}const V_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function cl(e,n,i,r,s){if(ee.isFunction(r))return r.call(this,n,i);if(s&&(n=i),!!ee.isString(n)){if(ee.isString(r))return n.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(n)}}function Z_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,r)=>i.toUpperCase()+r)}function q_(e,n){const i=ee.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(s,a,l){return this[r].call(this,n,s,a,l)},configurable:!0})})}let fn=class{constructor(n){n&&this.set(n)}set(n,i,r){const s=this;function a(d,h,m){const f=yo(h);if(!f)throw new Error("header name must be a non-empty string");const v=ee.findKey(s,f);(!v||s[v]===void 0||m===!0||m===void 0&&s[v]!==!1)&&(s[v||h]=Na(d))}const l=(d,h)=>ee.forEach(d,(m,f)=>a(m,f,h));if(ee.isPlainObject(n)||n instanceof this.constructor)l(n,i);else if(ee.isString(n)&&(n=n.trim())&&!V_(n))l(U_(n),i);else if(ee.isObject(n)&&ee.isIterable(n)){let d={},h,m;for(const f of n){if(!ee.isArray(f))throw TypeError("Object iterator must return a key-value pair");d[m=f[0]]=(h=d[m])?ee.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}l(d,i)}else n!=null&&a(i,n,r);return this}get(n,i){if(n=yo(n),n){const r=ee.findKey(this,n);if(r){const s=this[r];if(!i)return s;if(i===!0)return H_(s);if(ee.isFunction(i))return i.call(this,s,r);if(ee.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=yo(n),n){const r=ee.findKey(this,n);return!!(r&&this[r]!==void 0&&(!i||cl(this,this[r],r,i)))}return!1}delete(n,i){const r=this;let s=!1;function a(l){if(l=yo(l),l){const d=ee.findKey(r,l);d&&(!i||cl(r,r[d],d,i))&&(delete r[d],s=!0)}}return ee.isArray(n)?n.forEach(a):a(n),s}clear(n){const i=Object.keys(this);let r=i.length,s=!1;for(;r--;){const a=i[r];(!n||cl(this,this[a],a,n,!0))&&(delete this[a],s=!0)}return s}normalize(n){const i=this,r={};return ee.forEach(this,(s,a)=>{const l=ee.findKey(r,a);if(l){i[l]=Na(s),delete i[a];return}const d=n?Z_(a):String(a).trim();d!==a&&delete i[a],i[d]=Na(s),r[d]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ee.forEach(this,(r,s)=>{r!=null&&r!==!1&&(i[s]=n&&ee.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const r=new this(n);return i.forEach(s=>r.set(s)),r}static accessor(n){const r=(this[Bu]=this[Bu]={accessors:{}}).accessors,s=this.prototype;function a(l){const d=yo(l);r[d]||(q_(s,l),r[d]=!0)}return ee.isArray(n)?n.forEach(a):a(n),this}};fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(fn.prototype,({value:e},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[i]=r}}});ee.freezeMethods(fn);function ul(e,n){const i=this||Ko,r=n||i,s=fn.from(r.headers);let a=r.data;return ee.forEach(e,function(d){a=d.call(i,a,s.normalize(),n?n.status:void 0)}),s.normalize(),a}function Wh(e){return!!(e&&e.__CANCEL__)}function Bi(e,n,i){ot.call(this,e??"canceled",ot.ERR_CANCELED,n,i),this.name="CanceledError"}ee.inherits(Bi,ot,{__CANCEL__:!0});function jh(e,n,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):n(new ot("Request failed with status code "+i.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function W_(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function j_(e,n){e=e||10;const i=new Array(e),r=new Array(e);let s=0,a=0,l;return n=n!==void 0?n:1e3,function(h){const m=Date.now(),f=r[a];l||(l=m),i[s]=h,r[s]=m;let v=a,b=0;for(;v!==s;)b+=i[v++],v=v%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),m-l<n)return;const A=f&&m-f;return A?Math.round(b*1e3/A):void 0}}function G_(e,n){let i=0,r=1e3/n,s,a;const l=(m,f=Date.now())=>{i=f,s=null,a&&(clearTimeout(a),a=null),e(...m)};return[(...m)=>{const f=Date.now(),v=f-i;v>=r?l(m,f):(s=m,a||(a=setTimeout(()=>{a=null,l(s)},r-v)))},()=>s&&l(s)]}const Ka=(e,n,i=3)=>{let r=0;const s=j_(50,250);return G_(a=>{const l=a.loaded,d=a.lengthComputable?a.total:void 0,h=l-r,m=s(h),f=l<=d;r=l;const v={loaded:l,total:d,progress:d?l/d:void 0,bytes:h,rate:m||void 0,estimated:m&&d&&f?(d-l)/m:void 0,event:a,lengthComputable:d!=null,[n?"download":"upload"]:!0};e(v)},i)},Fu=(e,n)=>{const i=e!=null;return[r=>n[0]({lengthComputable:i,total:e,loaded:r}),n[1]]},zu=e=>(...n)=>ee.asap(()=>e(...n)),K_=Jt.hasStandardBrowserEnv?((e,n)=>i=>(i=new URL(i,Jt.origin),e.protocol===i.protocol&&e.host===i.host&&(n||e.port===i.port)))(new URL(Jt.origin),Jt.navigator&&/(msie|trident)/i.test(Jt.navigator.userAgent)):()=>!0,Y_=Jt.hasStandardBrowserEnv?{write(e,n,i,r,s,a,l){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(n)}`];ee.isNumber(i)&&d.push(`expires=${new Date(i).toUTCString()}`),ee.isString(r)&&d.push(`path=${r}`),ee.isString(s)&&d.push(`domain=${s}`),a===!0&&d.push("secure"),ee.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function J_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function X_(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Gh(e,n,i){let r=!J_(n);return e&&(r||i==!1)?X_(e,n):n}const Uu=e=>e instanceof fn?{...e}:e;function ni(e,n){n=n||{};const i={};function r(m,f,v,b){return ee.isPlainObject(m)&&ee.isPlainObject(f)?ee.merge.call({caseless:b},m,f):ee.isPlainObject(f)?ee.merge({},f):ee.isArray(f)?f.slice():f}function s(m,f,v,b){if(ee.isUndefined(f)){if(!ee.isUndefined(m))return r(void 0,m,v,b)}else return r(m,f,v,b)}function a(m,f){if(!ee.isUndefined(f))return r(void 0,f)}function l(m,f){if(ee.isUndefined(f)){if(!ee.isUndefined(m))return r(void 0,m)}else return r(void 0,f)}function d(m,f,v){if(v in n)return r(m,f);if(v in e)return r(void 0,m)}const h={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(m,f,v)=>s(Uu(m),Uu(f),v,!0)};return ee.forEach(Object.keys({...e,...n}),function(f){const v=h[f]||s,b=v(e[f],n[f],f);ee.isUndefined(b)&&v!==d||(i[f]=b)}),i}const Kh=e=>{const n=ni({},e);let{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:d}=n;if(n.headers=l=fn.from(l),n.url=Vh(Gh(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),ee.isFormData(i)){if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ee.isFunction(i.getHeaders)){const h=i.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([f,v])=>{m.includes(f.toLowerCase())&&l.set(f,v)})}}if(Jt.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(n)),r||r!==!1&&K_(n.url))){const h=s&&a&&Y_.read(a);h&&l.set(s,h)}return n},Q_=typeof XMLHttpRequest<"u",ey=Q_&&function(e){return new Promise(function(i,r){const s=Kh(e);let a=s.data;const l=fn.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:m}=s,f,v,b,A,M;function $(){A&&A(),M&&M(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let O=new XMLHttpRequest;O.open(s.method.toUpperCase(),s.url,!0),O.timeout=s.timeout;function T(){if(!O)return;const w=fn.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),k={data:!d||d==="text"||d==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:w,config:e,request:O};jh(function(I){i(I),$()},function(I){r(I),$()},k),O=null}"onloadend"in O?O.onloadend=T:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(T)},O.onabort=function(){O&&(r(new ot("Request aborted",ot.ECONNABORTED,e,O)),O=null)},O.onerror=function(P){const k=P&&P.message?P.message:"Network Error",C=new ot(k,ot.ERR_NETWORK,e,O);C.event=P||null,r(C),O=null},O.ontimeout=function(){let P=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const k=s.transitional||Zh;s.timeoutErrorMessage&&(P=s.timeoutErrorMessage),r(new ot(P,k.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,e,O)),O=null},a===void 0&&l.setContentType(null),"setRequestHeader"in O&&ee.forEach(l.toJSON(),function(P,k){O.setRequestHeader(k,P)}),ee.isUndefined(s.withCredentials)||(O.withCredentials=!!s.withCredentials),d&&d!=="json"&&(O.responseType=s.responseType),m&&([b,M]=Ka(m,!0),O.addEventListener("progress",b)),h&&O.upload&&([v,A]=Ka(h),O.upload.addEventListener("progress",v),O.upload.addEventListener("loadend",A)),(s.cancelToken||s.signal)&&(f=w=>{O&&(r(!w||w.type?new Bi(null,e,O):w),O.abort(),O=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const x=W_(s.url);if(x&&Jt.protocols.indexOf(x)===-1){r(new ot("Unsupported protocol "+x+":",ot.ERR_BAD_REQUEST,e));return}O.send(a||null)})},ty=(e,n)=>{const{length:i}=e=e?e.filter(Boolean):[];if(n||i){let r=new AbortController,s;const a=function(m){if(!s){s=!0,d();const f=m instanceof Error?m:this.reason;r.abort(f instanceof ot?f:new Bi(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,a(new ot(`timeout ${n} of ms exceeded`,ot.ETIMEDOUT))},n);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),e=null)};e.forEach(m=>m.addEventListener("abort",a));const{signal:h}=r;return h.unsubscribe=()=>ee.asap(d),h}},ny=function*(e,n){let i=e.byteLength;if(i<n){yield e;return}let r=0,s;for(;r<i;)s=r+n,yield e.slice(r,s),r=s},sy=async function*(e,n){for await(const i of iy(e))yield*ny(i,n)},iy=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:i,value:r}=await n.read();if(i)break;yield r}}finally{await n.cancel()}},Hu=(e,n,i,r)=>{const s=sy(e,n);let a=0,l,d=h=>{l||(l=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:m,value:f}=await s.next();if(m){d(),h.close();return}let v=f.byteLength;if(i){let b=a+=v;i(b)}h.enqueue(new Uint8Array(f))}catch(m){throw d(m),m}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},Vu=64*1024,{isFunction:Ta}=ee,oy=(({Request:e,Response:n})=>({Request:e,Response:n}))(ee.global),{ReadableStream:Zu,TextEncoder:qu}=ee.global,Wu=(e,...n)=>{try{return!!e(...n)}catch{return!1}},ay=e=>{e=ee.merge.call({skipUndefined:!0},oy,e);const{fetch:n,Request:i,Response:r}=e,s=n?Ta(n):typeof fetch=="function",a=Ta(i),l=Ta(r);if(!s)return!1;const d=s&&Ta(Zu),h=s&&(typeof qu=="function"?(M=>$=>M.encode($))(new qu):async M=>new Uint8Array(await new i(M).arrayBuffer())),m=a&&d&&Wu(()=>{let M=!1;const $=new i(Jt.origin,{body:new Zu,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!$}),f=l&&d&&Wu(()=>ee.isReadableStream(new r("").body)),v={stream:f&&(M=>M.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!v[M]&&(v[M]=($,O)=>{let T=$&&$[M];if(T)return T.call($);throw new ot(`Response type '${M}' is not supported`,ot.ERR_NOT_SUPPORT,O)})});const b=async M=>{if(M==null)return 0;if(ee.isBlob(M))return M.size;if(ee.isSpecCompliantForm(M))return(await new i(Jt.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(M)||ee.isArrayBuffer(M))return M.byteLength;if(ee.isURLSearchParams(M)&&(M=M+""),ee.isString(M))return(await h(M)).byteLength},A=async(M,$)=>{const O=ee.toFiniteNumber(M.getContentLength());return O??b($)};return async M=>{let{url:$,method:O,data:T,signal:x,cancelToken:w,timeout:P,onDownloadProgress:k,onUploadProgress:C,responseType:I,headers:Z,withCredentials:V="same-origin",fetchOptions:ae}=Kh(M),ge=n||fetch;I=I?(I+"").toLowerCase():"text";let Te=ty([x,w&&w.toAbortSignal()],P),fe=null;const j=Te&&Te.unsubscribe&&(()=>{Te.unsubscribe()});let G;try{if(C&&m&&O!=="get"&&O!=="head"&&(G=await A(Z,T))!==0){let he=new i($,{method:"POST",body:T,duplex:"half"}),Se;if(ee.isFormData(T)&&(Se=he.headers.get("content-type"))&&Z.setContentType(Se),he.body){const[Re,ve]=Fu(G,Ka(zu(C)));T=Hu(he.body,Vu,Re,ve)}}ee.isString(V)||(V=V?"include":"omit");const se=a&&"credentials"in i.prototype,Ee={...ae,signal:Te,method:O.toUpperCase(),headers:Z.normalize().toJSON(),body:T,duplex:"half",credentials:se?V:void 0};fe=a&&new i($,Ee);let pe=await(a?ge(fe,ae):ge($,Ee));const Le=f&&(I==="stream"||I==="response");if(f&&(k||Le&&j)){const he={};["status","statusText","headers"].forEach(le=>{he[le]=pe[le]});const Se=ee.toFiniteNumber(pe.headers.get("content-length")),[Re,ve]=k&&Fu(Se,Ka(zu(k),!0))||[];pe=new r(Hu(pe.body,Vu,Re,()=>{ve&&ve(),j&&j()}),he)}I=I||"text";let J=await v[ee.findKey(v,I)||"text"](pe,M);return!Le&&j&&j(),await new Promise((he,Se)=>{jh(he,Se,{data:J,headers:fn.from(pe.headers),status:pe.status,statusText:pe.statusText,config:M,request:fe})})}catch(se){throw j&&j(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,M,fe),{cause:se.cause||se}):ot.from(se,se&&se.code,M,fe)}}},ry=new Map,Yh=e=>{let n=e&&e.env||{};const{fetch:i,Request:r,Response:s}=n,a=[r,s,i];let l=a.length,d=l,h,m,f=ry;for(;d--;)h=a[d],m=f.get(h),m===void 0&&f.set(h,m=d?new Map:ay(n)),f=m;return m};Yh();const ac={http:L_,xhr:ey,fetch:{get:Yh}};ee.forEach(ac,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const ju=e=>`- ${e}`,ly=e=>ee.isFunction(e)||e===null||e===!1;function cy(e,n){e=ee.isArray(e)?e:[e];const{length:i}=e;let r,s;const a={};for(let l=0;l<i;l++){r=e[l];let d;if(s=r,!ly(r)&&(s=ac[(d=String(r)).toLowerCase()],s===void 0))throw new ot(`Unknown adapter '${d}'`);if(s&&(ee.isFunction(s)||(s=s.get(n))))break;a[d||"#"+l]=s}if(!s){const l=Object.entries(a).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=i?l.length>1?`since :
`+l.map(ju).join(`
`):" "+ju(l[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const Jh={getAdapter:cy,adapters:ac};function dl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bi(null,e)}function Gu(e){return dl(e),e.headers=fn.from(e.headers),e.data=ul.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Jh.getAdapter(e.adapter||Ko.adapter,e)(e).then(function(r){return dl(e),r.data=ul.call(e,e.transformResponse,r),r.headers=fn.from(r.headers),r},function(r){return Wh(r)||(dl(e),r&&r.response&&(r.response.data=ul.call(e,e.transformResponse,r.response),r.response.headers=fn.from(r.response.headers))),Promise.reject(r)})}const Xh="1.13.2",yr={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{yr[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const Ku={};yr.transitional=function(n,i,r){function s(a,l){return"[Axios v"+Xh+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,d)=>{if(n===!1)throw new ot(s(l," has been removed"+(i?" in "+i:"")),ot.ERR_DEPRECATED);return i&&!Ku[l]&&(Ku[l]=!0,console.warn(s(l," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(a,l,d):!0}};yr.spelling=function(n){return(i,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function uy(e,n,i){if(typeof e!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],l=n[a];if(l){const d=e[a],h=d===void 0||l(d,a,e);if(h!==!0)throw new ot("option "+a+" must be "+h,ot.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ot("Unknown option "+a,ot.ERR_BAD_OPTION)}}const Ba={assertOptions:uy,validators:yr},Fn=Ba.validators;let ei=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Nu,response:new Nu}}async request(n,i){try{return await this._request(n,i)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=ni(this.defaults,i);const{transitional:r,paramsSerializer:s,headers:a}=i;r!==void 0&&Ba.assertOptions(r,{silentJSONParsing:Fn.transitional(Fn.boolean),forcedJSONParsing:Fn.transitional(Fn.boolean),clarifyTimeoutError:Fn.transitional(Fn.boolean)},!1),s!=null&&(ee.isFunction(s)?i.paramsSerializer={serialize:s}:Ba.assertOptions(s,{encode:Fn.function,serialize:Fn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Ba.assertOptions(i,{baseUrl:Fn.spelling("baseURL"),withXsrfToken:Fn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=a&&ee.merge(a.common,a[i.method]);a&&ee.forEach(["delete","get","head","post","put","patch","common"],M=>{delete a[M]}),i.headers=fn.concat(l,a);const d=[];let h=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(i)===!1||(h=h&&$.synchronous,d.unshift($.fulfilled,$.rejected))});const m=[];this.interceptors.response.forEach(function($){m.push($.fulfilled,$.rejected)});let f,v=0,b;if(!h){const M=[Gu.bind(this),void 0];for(M.unshift(...d),M.push(...m),b=M.length,f=Promise.resolve(i);v<b;)f=f.then(M[v++],M[v++]);return f}b=d.length;let A=i;for(;v<b;){const M=d[v++],$=d[v++];try{A=M(A)}catch(O){$.call(this,O);break}}try{f=Gu.call(this,A)}catch(M){return Promise.reject(M)}for(v=0,b=m.length;v<b;)f=f.then(m[v++],m[v++]);return f}getUri(n){n=ni(this.defaults,n);const i=Gh(n.baseURL,n.url,n.allowAbsoluteUrls);return Vh(i,n.params,n.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(n){ei.prototype[n]=function(i,r){return this.request(ni(r||{},{method:n,url:i,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(n){function i(r){return function(a,l,d){return this.request(ni(d||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}ei.prototype[n]=i(),ei.prototype[n+"Form"]=i(!0)});let dy=class Qh{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(a){i=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(d=>{r.subscribe(d),a=d}).then(s);return l.cancel=function(){r.unsubscribe(a)},l},n(function(a,l,d){r.reason||(r.reason=new Bi(a,l,d),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=r=>{n.abort(r)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Qh(function(s){n=s}),cancel:n}}};function hy(e){return function(i){return e.apply(null,i)}}function fy(e){return ee.isObject(e)&&e.isAxiosError===!0}const Ol={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ol).forEach(([e,n])=>{Ol[n]=e});function ef(e){const n=new ei(e),i=Mh(ei.prototype.request,n);return ee.extend(i,ei.prototype,n,{allOwnKeys:!0}),ee.extend(i,n,null,{allOwnKeys:!0}),i.create=function(s){return ef(ni(e,s))},i}const Rt=ef(Ko);Rt.Axios=ei;Rt.CanceledError=Bi;Rt.CancelToken=dy;Rt.isCancel=Wh;Rt.VERSION=Xh;Rt.toFormData=_r;Rt.AxiosError=ot;Rt.Cancel=Rt.CanceledError;Rt.all=function(n){return Promise.all(n)};Rt.spread=hy;Rt.isAxiosError=fy;Rt.mergeConfig=ni;Rt.AxiosHeaders=fn;Rt.formToJSON=e=>qh(ee.isHTMLForm(e)?new FormData(e):e);Rt.getAdapter=Jh.getAdapter;Rt.HttpStatusCode=Ol;Rt.default=Rt;const{Axios:AO,AxiosError:EO,CanceledError:TO,isCancel:IO,CancelToken:SO,VERSION:MO,all:PO,Cancel:$O,isAxiosError:OO,spread:DO,toFormData:RO,AxiosHeaders:NO,HttpStatusCode:BO,formToJSON:FO,getAdapter:zO,mergeConfig:UO}=Rt,py="https://sterobson-volunteercheckin-testing.azurewebsites.net/api",Ie=Rt.create({baseURL:py,headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(e=>{const n=localStorage.getItem("adminEmail");n&&(e.headers["X-Admin-Email"]=n);const i=localStorage.getItem("sessionToken");return i&&(e.headers.Authorization=`Bearer ${i}`),e});const cs={requestLogin:e=>Ie.post("/auth/request-login",{email:e}),verifyToken:e=>Ie.post("/auth/verify-token",{token:e}),instantLogin:e=>Ie.post("/auth/instant-login",{email:e}),createAdmin:e=>Ie.post("/auth/create-admin",{email:e}),marshalLogin:(e,n)=>Ie.post("/auth/marshal-login",{eventId:e,magicCode:n}),getMe:e=>Ie.get("/auth/me",{params:{eventId:e}}),logout:()=>Ie.post("/auth/logout")},Ia={getProfile:()=>Ie.get("/auth/profile"),updateProfile:e=>Ie.put("/auth/profile",e),getPerson:(e,n)=>Ie.get(`/people/${e}`,{params:{eventId:n}}),updatePerson:(e,n,i)=>Ie.put(`/people/${e}`,i,{params:{eventId:n}})},Gs={create:e=>Ie.post("/events",e),getAll:()=>Ie.get("/events"),getById:e=>Ie.get(`/events/${e}`),update:(e,n)=>Ie.put(`/events/${e}`,n),delete:e=>Ie.delete(`/events/${e}`),uploadGpx:(e,n)=>{const i=new FormData;return i.append("gpx",n),Ie.post(`/events/${e}/upload-gpx`,i,{headers:{"Content-Type":"multipart/form-data"}})}},Ts={create:e=>Ie.post("/locations",e),getById:(e,n)=>Ie.get(`/locations/${e}/${n}`),getByEvent:e=>Ie.get(`/events/${e}/locations`),update:(e,n,i)=>Ie.put(`/locations/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/locations/${e}/${n}`),importCsv:(e,n,i)=>{const r=new FormData;return r.append("csv",n),Ie.post(`/locations/import/${e}?deleteExisting=${i}`,r,{headers:{"Content-Type":"multipart/form-data"}})},bulkUpdateTimes:(e,n)=>Ie.post(`/locations/bulk-update-times/${e}`,{timeDelta:n})},wo={create:e=>Ie.post("/assignments",e),getById:(e,n)=>Ie.get(`/assignments/${e}/${n}`),getByEvent:e=>Ie.get(`/assignments/event/${e}`),delete:(e,n)=>Ie.delete(`/assignments/${e}/${n}`),getEventStatus:e=>Ie.get(`/events/${e}/status`)},Ci={checkIn:e=>Ie.post("/checkin",e),adminCheckIn:(e,n)=>Ie.post(`/checkin/admin/${e}/${n}`)},hl={getAdmins:e=>Ie.get(`/events/${e}/admins`),addAdmin:(e,n)=>Ie.post(`/events/${e}/admins`,{userEmail:n}),removeAdmin:(e,n)=>Ie.delete(`/events/${e}/admins/${n}`)},Hn={create:e=>Ie.post("/marshals",e),getByEvent:e=>Ie.get(`/events/${e}/marshals`),getById:(e,n)=>Ie.get(`/marshals/${e}/${n}`),update:(e,n,i)=>Ie.put(`/marshals/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/marshals/${e}/${n}`),getMagicLink:(e,n)=>Ie.get(`/marshals/${e}/${n}/magic-link`),sendMagicLink:(e,n)=>Ie.post(`/marshals/${e}/${n}/send-magic-link`),importCsv:(e,n)=>{const i=new FormData;return i.append("csv",n),Ie.post(`/marshals/import/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})}},Ks={create:e=>Ie.post("/areas",e),getByEvent:e=>Ie.get(`/events/${e}/areas`),getById:(e,n)=>Ie.get(`/areas/${e}/${n}`),update:(e,n,i)=>Ie.put(`/areas/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/areas/${e}/${n}`),recalculate:e=>Ie.post(`/areas/recalculate/${e}`),getCheckpoints:(e,n)=>Ie.get(`/areas/${e}/${n}/locations`),getAreaLeads:(e,n)=>Ie.get(`/areas/${e}/${n}/leads`),getAreaLeadDashboard:e=>Ie.get(`/events/${e}/area-lead-dashboard`)},Pt={create:(e,n)=>Ie.post(`/events/${e}/checklist-items`,n),getByEvent:e=>Ie.get(`/events/${e}/checklist-items`),getById:(e,n)=>Ie.get(`/checklist-items/${e}/${n}`),update:(e,n,i)=>Ie.put(`/checklist-items/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/checklist-items/${e}/${n}`),getReport:e=>Ie.get(`/events/${e}/checklist-report`),getMarshalChecklist:(e,n)=>Ie.get(`/events/${e}/marshals/${n}/checklist`),getCheckpointChecklist:(e,n)=>Ie.get(`/events/${e}/locations/${n}/checklist`),getAreaChecklist:(e,n)=>Ie.get(`/events/${e}/areas/${n}/checklist`),complete:(e,n,i)=>Ie.post(`/checklist-items/${e}/${n}/complete`,i),uncomplete:(e,n,i)=>Ie.post(`/checklist-items/${e}/${n}/uncomplete`,i)},os={create:(e,n)=>Ie.post(`/events/${e}/notes`,n),getByEvent:e=>Ie.get(`/events/${e}/notes`),getById:(e,n)=>Ie.get(`/events/${e}/notes/${n}`),update:(e,n,i)=>Ie.put(`/events/${e}/notes/${n}`,i),delete:(e,n)=>Ie.delete(`/events/${e}/notes/${n}`),getMarshalNotes:(e,n)=>Ie.get(`/events/${e}/marshals/${n}/notes`),getMyNotes:e=>Ie.get(`/events/${e}/my-notes`)},wi={create:(e,n)=>Ie.post(`/events/${e}/contacts`,n),getByEvent:e=>Ie.get(`/events/${e}/contacts`),getById:(e,n)=>Ie.get(`/events/${e}/contacts/${n}`),update:(e,n,i)=>Ie.put(`/events/${e}/contacts/${n}`,i),delete:(e,n)=>Ie.delete(`/events/${e}/contacts/${n}`),getRoles:e=>Ie.get(`/events/${e}/contact-roles`),getMarshalContacts:(e,n)=>Ie.get(`/events/${e}/marshals/${n}/contacts`),getMyContacts:e=>Ie.get(`/events/${e}/my-contacts`)},br=Ql("auth",()=>{const e=D(localStorage.getItem("adminEmail")||null),n=D(!!e.value),i=D(!1);return{adminEmail:e,isAuthenticated:n,loginPending:i,requestLogin:async d=>{const h=await cs.requestLogin(d);return h.data.success&&(i.value=!0),h.data},verifyToken:async d=>{const h=await cs.verifyToken(d);return h.data.success&&(e.value=h.data.person?.email,n.value=!0,i.value=!1,localStorage.setItem("adminEmail",h.data.person?.email),localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},instantLogin:async d=>{const h=await cs.instantLogin(d);return h.data.success&&(e.value=h.data.email,n.value=!0,localStorage.setItem("adminEmail",h.data.email),h.data.sessionToken&&localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},logout:async()=>{try{await cs.logout()}catch{}e.value=null,n.value=!1,i.value=!1,localStorage.removeItem("adminEmail"),localStorage.removeItem("sessionToken")}}}),my={class:"admin-login"},vy={class:"login-card"},gy={key:0,class:"email-sent"},_y={class:"form-group"},yy=["disabled"],by={key:0,class:"error"},ky={__name:"AdminLogin",setup(e){const n=br(),i=D(""),r=D(!1),s=D(null),a=D(!1),l=async()=>{r.value=!0,s.value=null;try{const h=await n.requestLogin(i.value);h.success?a.value=!0:s.value=h.message||"Failed to send login link. Please try again."}catch{s.value="Failed to send login link. Please try again."}finally{r.value=!1}},d=()=>{i.value="",a.value=!1,s.value=null};return(h,m)=>{const f=lr("router-link");return g(),y("div",my,[u("div",vy,[m[7]||(m[7]=u("h2",null,"Admin Login",-1)),a.value?(g(),y("div",gy,[m[2]||(m[2]=u("div",{class:"check-icon"},"",-1)),m[3]||(m[3]=u("h3",null,"Check your email!",-1)),u("p",null,[m[1]||(m[1]=Ve("We've sent a login link to ",-1)),u("strong",null,E(i.value),1)]),m[4]||(m[4]=u("p",{class:"hint"},"The link will expire in 15 minutes.",-1)),u("button",{onClick:d,class:"btn btn-secondary"}," Use a different email ")])):(g(),y(be,{key:1},[m[5]||(m[5]=u("p",{class:"instruction"},"Enter your email to receive a login link",-1)),u("form",{onSubmit:xt(l,["prevent"])},[u("div",_y,[$e(u("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>i.value=v),type:"email",placeholder:"admin@example.com",required:"",class:"form-input"},null,512),[[st,i.value]])]),u("button",{type:"submit",class:"btn btn-primary",disabled:r.value},E(r.value?"Sending...":"Send login link"),9,yy)],32),s.value?(g(),y("div",by,E(s.value),1)):B("",!0)],64)),De(f,{to:"/",class:"back-link"},{default:Ke(()=>[...m[6]||(m[6]=[Ve(" Back to Home",-1)])]),_:1})])])}}},wy=Ze(ky,[["__scopeId","data-v-50552d01"]]),Cy={class:"admin-verify"},Ly={class:"verify-card"},xy={key:0,class:"status"},Ay={key:1,class:"status error"},Ey={key:2,class:"status success"},Ty={__name:"AdminVerify",setup(e){const n=qo(),i=nc(),r=br(),s=D(!0),a=D(null);return On(async()=>{const l=i.query.token;if(!l){a.value="No login token provided. Please request a new login link.",s.value=!1;return}try{const d=await r.verifyToken(l);d.success?setTimeout(()=>{n.push({name:"AdminDashboard"})},1e3):a.value=d.message||"Invalid or expired login link. Please request a new one."}catch(d){console.error("Verification error:",d),a.value="Failed to verify login. Please try again."}finally{s.value=!1}}),(l,d)=>{const h=lr("router-link");return g(),y("div",Cy,[u("div",Ly,[s.value?(g(),y("div",xy,[...d[0]||(d[0]=[u("div",{class:"spinner"},null,-1),u("h2",null,"Verifying your login...",-1),u("p",null,"Please wait while we confirm your identity.",-1)])])):a.value?(g(),y("div",Ay,[d[2]||(d[2]=u("h2",null,"Login Failed",-1)),u("p",null,E(a.value),1),De(h,{to:"/admin/login",class:"btn btn-primary"},{default:Ke(()=>[...d[1]||(d[1]=[Ve(" Try Again ",-1)])]),_:1})])):(g(),y("div",Ey,[...d[3]||(d[3]=[u("h2",null,"Login Successful!",-1),u("p",null,"Redirecting to dashboard...",-1)])]))])])}}},Iy=Ze(Ty,[["__scopeId","data-v-7bb86bfc"]]),tf=Ql("events",()=>{const e=D([]),n=D(null),i=D([]),r=D([]),s=D(null),a=D(!1),l=D(null),d=async()=>{a.value=!0,l.value=null;try{const C=await Gs.getAll();e.value=C.data}catch(C){throw l.value=C.message,C}finally{a.value=!1}},h=async C=>{a.value=!0,l.value=null;try{const I=await Gs.getById(C);n.value=I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},m=async C=>{a.value=!0,l.value=null;try{const I=await Gs.create(C);return e.value.push(I.data),I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},f=async(C,I)=>{a.value=!0,l.value=null;try{const Z=await Gs.update(C,I),V=e.value.findIndex(ae=>ae.id===C);return V!==-1&&(e.value[V]=Z.data),n.value?.id===C&&(n.value=Z.data),Z.data}catch(Z){throw l.value=Z.message,Z}finally{a.value=!1}},v=async C=>{a.value=!0,l.value=null;try{await Gs.delete(C),e.value=e.value.filter(I=>I.id!==C)}catch(I){throw l.value=I.message,I}finally{a.value=!1}},b=async C=>{a.value=!0,l.value=null;try{const I=await Ts.getByEvent(C);i.value=I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}};return{events:e,currentEvent:n,locations:i,assignments:r,eventStatus:s,loading:a,error:l,fetchEvents:d,fetchEvent:h,createEvent:m,updateEvent:f,deleteEvent:v,fetchLocations:b,createLocation:async C=>{a.value=!0,l.value=null;try{const I=await Ts.create(C);return i.value.push(I.data),I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},updateLocation:async(C,I,Z)=>{a.value=!0,l.value=null;try{const V=await Ts.update(C,I,Z),ae=i.value.findIndex(ge=>ge.id===I);return ae!==-1&&(i.value[ae]=V.data),V.data}catch(V){throw l.value=V.message,V}finally{a.value=!1}},deleteLocation:async(C,I)=>{a.value=!0,l.value=null;try{await Ts.delete(C,I),i.value=i.value.filter(Z=>Z.id!==I)}catch(Z){throw l.value=Z.message,Z}finally{a.value=!1}},bulkUpdateLocationTimes:async(C,I)=>{a.value=!0,l.value=null;try{const Z=await Ts.bulkUpdateTimes(C,I);return await b(C),Z.data}catch(Z){throw l.value=Z.message,Z}finally{a.value=!1}},fetchAssignments:async C=>{a.value=!0,l.value=null;try{const I=await wo.getByEvent(C);r.value=I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},createAssignment:async C=>{a.value=!0,l.value=null;try{const I=await wo.create(C);return r.value.push(I.data),I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},deleteAssignment:async(C,I)=>{a.value=!0,l.value=null;try{await wo.delete(C,I),r.value=r.value.filter(Z=>Z.id!==I)}catch(Z){throw l.value=Z.message,Z}finally{a.value=!1}},fetchEventStatus:async C=>{a.value=!0,l.value=null;try{const I=await wo.getEventStatus(C);return s.value=I.data,I.data}catch(I){throw l.value=I.message,I}finally{a.value=!1}},updateAssignmentCheckIn:C=>{const I=r.value.findIndex(Z=>Z.id===C.id);I!==-1&&(r.value[I]=C),s.value&&s.value.locations.forEach(Z=>{const V=Z.assignments.findIndex(ae=>ae.id===C.id);V!==-1&&(Z.assignments[V]=C,Z.checkedInCount=Z.assignments.filter(ae=>ae.isCheckedIn).length)})}}}),Sy={class:"confirm-modal"},My={class:"confirm-actions"},Py={__name:"ConfirmModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm"},message:{type:String,required:!0},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const i=n,r=()=>{i("confirm")},s=()=>{i("cancel")};return(a,l)=>e.show?(g(),y("div",{key:0,class:"modal-overlay",onClick:xt(s,["self"])},[u("div",Sy,[u("h3",null,E(e.title),1),u("p",null,E(e.message),1),u("div",My,[u("button",{onClick:s,class:"btn btn-secondary"},E(e.cancelText),1),u("button",{onClick:r,class:"btn btn-primary"},E(e.confirmText),1)])])])):B("",!0)}},kr=Ze(Py,[["__scopeId","data-v-4bd2c256"]]),$y={class:"base-modal-header"},Oy={key:0,class:"base-modal-title"},Dy={key:0,class:"base-modal-tab-header"},Ry={class:"base-modal-body"},Ny={key:1,class:"base-modal-footer"},By={key:0,class:"base-modal-actions"},Fy={__name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:""},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},variant:{type:String,default:"center",validator:e=>["center","sidebar"].includes(e)},zIndex:{type:Number,default:1e3},closeOnOverlay:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},confirmOnClose:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=e,r=n,s=D(!1),a=D(!1),l=()=>{i.closeOnOverlay&&d()},d=()=>{i.confirmOnClose&&i.isDirty?s.value=!0:r("close")},h=()=>{s.value=!1,r("close")},m=()=>{s.value=!1};return(f,v)=>e.show?(g(),y("div",{key:0,class:"base-modal-overlay",style:Qt({zIndex:e.zIndex}),onClick:xt(l,["self"])},[u("div",{class:Ue(["base-modal",[`base-modal--${e.size}`,`base-modal--${e.variant}`]])},[u("div",$y,[mo(f.$slots,"header",{},()=>[e.title?(g(),y("h2",Oy,E(e.title),1)):B("",!0)]),e.showCloseButton?(g(),y("button",{key:0,onClick:d,class:"base-modal-close",type:"button","aria-label":"Close"},"  ")):B("",!0)]),f.$slots["tab-header"]?(g(),y("div",Dy,[mo(f.$slots,"tab-header",{},void 0)])):B("",!0),u("div",Ry,[mo(f.$slots,"default",{},void 0)]),f.$slots.footer||f.$slots.actions?(g(),y("div",Ny,[mo(f.$slots,"footer",{},()=>[f.$slots.actions?(g(),y("div",By,[mo(f.$slots,"actions",{},void 0,!0)])):B("",!0)])])):B("",!0)],2),e.confirmOnClose&&!a.value?(g(),tt(kr,{key:0,show:s.value,title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to close?",onConfirm:h,onCancel:m},null,8,["show"])):B("",!0)],4)):B("",!0)}},Nt=Ze(Fy,[["__scopeId","data-v-45873bc7"]]);function nf(e="details",n=[]){const i=D(e),r=v=>{i.value=v},s=()=>{i.value=e},a=v=>i.value===v,l=ne(()=>n.length===0?-1:n.indexOf(i.value)),d=(v=!1)=>{if(n.length===0)return;const b=l.value;if(b===-1)return;const A=b+1;A<n.length?i.value=n[A]:v&&(i.value=n[0])},h=(v=!1)=>{if(n.length===0)return;const b=l.value;if(b===-1)return;const A=b-1;A>=0?i.value=n[A]:v&&(i.value=n[n.length-1])},m=ne(()=>{if(n.length===0)return!1;const v=l.value;return v!==-1&&v<n.length-1}),f=ne(()=>n.length===0?!1:l.value>0);return{activeTab:i,activeTabIndex:l,hasNextTab:m,hasPreviousTab:f,switchTab:r,resetTab:s,isActiveTab:a,nextTab:d,previousTab:h}}const sf=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEDT/AEST)"}],zy={class:"tabs"},Uy={class:"tab-content"},Hy={class:"form-group"},Vy={class:"form-group"},Zy={class:"form-group"},qy={class:"form-group"},Wy=["value"],jy={class:"tab-content"},Gy={class:"emergency-contacts-section"},Ky={key:0,class:"empty-state"},Yy={class:"card-header"},Jy=["onClick"],Xy={class:"form-group"},Qy=["onUpdate:modelValue"],eb={class:"form-group"},tb=["onUpdate:modelValue"],nb={class:"form-group"},sb=["onUpdate:modelValue"],ib={__name:"EventFormModal",props:{show:{type:Boolean,default:!1},eventData:{type:Object,default:()=>({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]})},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:n}){const i=e,r=n,{activeTab:s,switchTab:a,resetTab:l}=nf("basic",["basic","emergency"]),d=D({...i.eventData});We(()=>i.eventData,b=>{d.value={...b},d.value.emergencyContacts||(d.value.emergencyContacts=[])},{deep:!0}),We(()=>i.show,b=>{b&&l()});const h=()=>{d.value.emergencyContacts.push({name:"",phone:"",details:""})},m=b=>{d.value.emergencyContacts.splice(b,1)},f=()=>{r("submit",{...d.value})},v=()=>{r("close")};return(b,A)=>(g(),tt(Nt,{show:e.show,title:e.isEditing?"Edit Event":"Create New Event",size:"large",onClose:v},{"tab-header":Ke(()=>[u("div",zy,[u("button",{type:"button",onClick:A[0]||(A[0]=M=>z(a)("basic")),class:Ue(["tab-button",{active:z(s)==="basic"}])}," Basic Details ",2),u("button",{type:"button",onClick:A[1]||(A[1]=M=>z(a)("emergency")),class:Ue(["tab-button",{active:z(s)==="emergency"}])}," Emergency Contacts ",2)])]),actions:Ke(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary"},E(e.isEditing?"Update":"Create"),1)]),default:Ke(()=>[u("form",{onSubmit:xt(f,["prevent"])},[$e(u("div",Uy,[u("div",Hy,[A[6]||(A[6]=u("label",null,"Event Name *",-1)),$e(u("input",{"onUpdate:modelValue":A[2]||(A[2]=M=>d.value.name=M),type:"text",required:"",class:"form-input"},null,512),[[st,d.value.name]])]),u("div",Vy,[A[7]||(A[7]=u("label",null,"Description",-1)),$e(u("textarea",{"onUpdate:modelValue":A[3]||(A[3]=M=>d.value.description=M),rows:"3",class:"form-input"},null,512),[[st,d.value.description]])]),u("div",Zy,[A[8]||(A[8]=u("label",null,"Event Date *",-1)),$e(u("input",{"onUpdate:modelValue":A[4]||(A[4]=M=>d.value.eventDate=M),type:"datetime-local",required:"",class:"form-input"},null,512),[[st,d.value.eventDate]])]),u("div",qy,[A[9]||(A[9]=u("label",null,"Time Zone *",-1)),$e(u("select",{"onUpdate:modelValue":A[5]||(A[5]=M=>d.value.timeZoneId=M),required:"",class:"form-input"},[(g(!0),y(be,null,Pe(z(sf),M=>(g(),y("option",{key:M.value,value:M.value},E(M.label),9,Wy))),128))],512),[[mn,d.value.timeZoneId]])])],512),[[Ss,z(s)==="basic"]]),$e(u("div",jy,[u("div",Gy,[u("div",{class:"section-header-small"},[A[10]||(A[10]=u("h3",null,"Emergency Contacts",-1)),u("button",{type:"button",onClick:h,class:"btn btn-small btn-primary"}," + Add Contact ")]),d.value.emergencyContacts.length===0?(g(),y("div",Ky,[...A[11]||(A[11]=[u("p",null,'No emergency contacts added yet. Click "Add Contact" to add one.',-1)])])):B("",!0),(g(!0),y(be,null,Pe(d.value.emergencyContacts,(M,$)=>(g(),y("div",{key:$,class:"emergency-contact-card"},[u("div",Yy,[u("h4",null,"Contact "+E($+1),1),u("button",{type:"button",onClick:O=>m($),class:"btn-remove"},"  ",8,Jy)]),u("div",Xy,[A[12]||(A[12]=u("label",null,"Name *",-1)),$e(u("input",{"onUpdate:modelValue":O=>M.name=O,type:"text",required:"",class:"form-input",placeholder:"Contact person name"},null,8,Qy),[[st,M.name]])]),u("div",eb,[A[13]||(A[13]=u("label",null,"Phone *",-1)),$e(u("input",{"onUpdate:modelValue":O=>M.phone=O,type:"tel",required:"",class:"form-input",placeholder:"+1 (555) 123-4567"},null,8,tb),[[st,M.phone]])]),u("div",nb,[A[14]||(A[14]=u("label",null,"Additional Details",-1)),$e(u("textarea",{"onUpdate:modelValue":O=>M.details=O,rows:"2",class:"form-input",placeholder:"Role, availability, or other important information..."},null,8,sb),[[st,M.details]])])]))),128))])],512),[[Ss,z(s)==="emergency"]])],32)]),_:1},8,["show","title"]))}},ob=Ze(ib,[["__scopeId","data-v-35885c7a"]]),ab={class:"admin-dashboard"},rb={class:"header"},lb={class:"header-actions"},cb={class:"user-email"},ub={class:"container"},db={class:"section"},hb={class:"section-header"},fb={key:0,class:"loading"},pb={key:1,class:"empty"},mb={key:2,class:"events-grid"},vb=["onClick"],gb={class:"event-date"},_b={class:"event-desc"},yb={class:"event-actions"},bb=["onClick"],kb=["onClick"],wb={__name:"AdminDashboard",setup(e){const n=qo(),i=br(),r=tf(),s=D(!0),a=D(!1),l=D(null),d=D({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}),h=D([]),m=D(!1),f=D(""),v=D(""),b=D(null),A=async()=>{s.value=!0;try{await r.fetchEvents(),h.value=r.events}catch(V){console.error("Failed to load events:",V)}finally{s.value=!1}},M=async V=>{try{const ae={...V,adminEmail:i.adminEmail};l.value?await r.updateEvent(l.value.id,ae):await r.createEvent(ae),h.value=r.events,w()}catch(ae){console.error("Failed to save event:",ae),alert("Failed to save event. Please try again.")}},$=V=>{l.value=V,d.value={name:V.name,description:V.description,eventDate:Z(V.eventDate),timeZoneId:V.timeZoneId||"UTC",emergencyContacts:V.emergencyContacts?JSON.parse(JSON.stringify(V.emergencyContacts)):[]}},O=async V=>{f.value="Delete Event",v.value=`Are you sure you want to delete "${V.name}"?`,b.value=async()=>{try{await r.deleteEvent(V.id),h.value=r.events}catch(ae){console.error("Failed to delete event:",ae),alert("Failed to delete event. Please try again.")}},m.value=!0},T=()=>{m.value=!1,b.value&&(b.value(),b.value=null)},x=()=>{m.value=!1,b.value=null},w=()=>{a.value=!1,l.value=null,d.value={name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}},P=V=>{if(!V){console.error("Cannot navigate to event: eventId is undefined");return}n.push({name:"AdminEventManage",params:{eventId:V}})},k=()=>{n.push({name:"AdminProfile"})},C=()=>{i.logout(),n.push({name:"Home"})},I=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),Z=V=>{const ae=new Date(V),ge=ae.getFullYear(),Te=String(ae.getMonth()+1).padStart(2,"0"),fe=String(ae.getDate()).padStart(2,"0"),j=String(ae.getHours()).padStart(2,"0"),G=String(ae.getMinutes()).padStart(2,"0");return`${ge}-${Te}-${fe}T${j}:${G}`};return On(()=>{A()}),(V,ae)=>(g(),y("div",ab,[u("header",rb,[ae[1]||(ae[1]=u("h1",null,"Admin Dashboard",-1)),u("div",lb,[u("span",cb,E(z(i).adminEmail),1),u("button",{onClick:k,class:"btn btn-secondary"},"Profile"),u("button",{onClick:C,class:"btn btn-secondary"},"Logout")])]),u("div",ub,[u("div",db,[u("div",hb,[ae[2]||(ae[2]=u("h2",null,"Your Events",-1)),u("button",{onClick:ae[0]||(ae[0]=ge=>a.value=!0),class:"btn btn-primary"}," Create New Event ")]),s.value?(g(),y("div",fb,"Loading events...")):h.value.length===0?(g(),y("div",pb,[...ae[3]||(ae[3]=[u("p",null,"No events yet. Create your first event to get started!",-1)])])):(g(),y("div",mb,[(g(!0),y(be,null,Pe(h.value,ge=>(g(),y("div",{key:ge.id,class:"event-card",onClick:Te=>P(ge.id)},[u("h3",null,E(ge.name),1),u("p",gb,E(I(ge.eventDate)),1),u("p",_b,E(ge.description),1),u("div",yb,[u("button",{onClick:xt(Te=>$(ge),["stop"]),class:"btn btn-small btn-secondary"}," Edit ",8,bb),u("button",{onClick:xt(Te=>O(ge),["stop"]),class:"btn btn-small btn-danger"}," Delete ",8,kb)])],8,vb))),128))]))])]),De(ob,{show:a.value||!!l.value,eventData:d.value,isEditing:!!l.value,onClose:w,onSubmit:M},null,8,["show","eventData","isEditing"]),De(kr,{show:m.value,title:f.value,message:v.value,onConfirm:T,onCancel:x},null,8,["show","title","message"])]))}},Cb=Ze(wb,[["__scopeId","data-v-c3a3ad82"]]),Lb=Ql("profile",()=>{const e=D(null),n=D(!1),i=D(null);return{profile:e,loading:n,error:i,fetchProfile:async()=>{n.value=!0,i.value=null;try{const h=await Ia.getProfile();return e.value=h.data,h.data}catch(h){throw i.value=h.response?.data?.message||"Failed to load profile",h}finally{n.value=!1}},updateProfile:async h=>{n.value=!0,i.value=null;try{const m=await Ia.updateProfile(h);return e.value=m.data,m.data}catch(m){throw i.value=m.response?.data?.message||"Failed to update profile",m}finally{n.value=!1}},fetchPerson:async(h,m)=>{n.value=!0,i.value=null;try{return(await Ia.getPerson(h,m)).data}catch(f){throw i.value=f.response?.data?.message||"Failed to load person",f}finally{n.value=!1}},updatePerson:async(h,m,f)=>{n.value=!0,i.value=null;try{return(await Ia.updatePerson(h,m,f)).data}catch(v){throw i.value=v.response?.data?.message||"Failed to update person",v}finally{n.value=!1}},clearProfile:()=>{e.value=null,i.value=null}}}),xb={class:"form-group"},Ab={class:"form-group"},Eb={class:"form-group"},Tb={__name:"EditProfileModal",props:{show:{type:Boolean,default:!1},profile:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=D({name:"",email:"",phone:""});We(()=>i.profile,h=>{h&&(s.value={name:h.name||"",email:h.email||"",phone:h.phone||""})},{immediate:!0,deep:!0}),We(()=>i.show,h=>{h&&i.profile&&(s.value={name:i.profile.name||"",email:i.profile.email||"",phone:i.profile.phone||""})});const a=()=>{r("update:isDirty",!0)},l=()=>{if(!s.value.name.trim()){alert("Name is required");return}if(!s.value.email.trim()){alert("Email is required");return}r("submit",{name:s.value.name.trim(),email:s.value.email.trim(),phone:s.value.phone?.trim()||""})},d=()=>{r("close")};return(h,m)=>(g(),tt(Nt,{show:e.show,title:"Edit Profile",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:d},{actions:Ke(()=>[u("button",{type:"button",onClick:d,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary"}," Save changes ")]),default:Ke(()=>[u("form",{onSubmit:xt(l,["prevent"])},[u("div",xb,[m[3]||(m[3]=u("label",null,"Name *",-1)),$e(u("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>s.value.name=f),type:"text",required:"",class:"form-input",placeholder:"Your name",onInput:a},null,544),[[st,s.value.name]])]),u("div",Ab,[m[4]||(m[4]=u("label",null,"Email *",-1)),$e(u("input",{"onUpdate:modelValue":m[1]||(m[1]=f=>s.value.email=f),type:"email",required:"",class:"form-input",placeholder:"Your email address",onInput:a},null,544),[[st,s.value.email]])]),u("div",Eb,[m[5]||(m[5]=u("label",null,"Phone",-1)),$e(u("input",{"onUpdate:modelValue":m[2]||(m[2]=f=>s.value.phone=f),type:"tel",class:"form-input",placeholder:"Your phone number",onInput:a},null,544),[[st,s.value.phone]])])],32)]),_:1},8,["show","is-dirty"]))}},Ib=Ze(Tb,[["__scopeId","data-v-2ce1a930"]]),Sb={class:"admin-profile"},Mb={class:"header"},Pb={class:"header-actions"},$b={class:"user-email"},Ob={class:"container"},Db={class:"section"},Rb={class:"section-header"},Nb={key:0,class:"loading"},Bb={key:1,class:"error"},Fb={key:2,class:"profile-details"},zb={class:"profile-field"},Ub={class:"field-value"},Hb={class:"profile-field"},Vb={class:"field-value"},Zb={class:"profile-field"},qb={class:"field-value"},Wb={class:"profile-field"},jb={class:"field-value"},Gb={__name:"AdminProfile",setup(e){const n=qo(),i=br(),r=Lb(),s=D(!1),a=async()=>{try{await r.fetchProfile()}catch(m){console.error("Failed to load profile:",m)}},l=async m=>{try{await r.updateProfile(m),s.value=!1}catch(f){console.error("Failed to save profile:",f),alert("Failed to save profile. Please try again.")}},d=()=>{i.logout(),n.push({name:"Home"})},h=()=>{n.push({name:"AdminDashboard"})};return On(()=>{a()}),(m,f)=>(g(),y("div",Sb,[u("header",Mb,[f[2]||(f[2]=u("h1",null,"My Profile",-1)),u("div",Pb,[u("span",$b,E(z(i).adminEmail),1),u("button",{onClick:d,class:"btn btn-secondary"},"Logout")])]),u("div",Ob,[u("div",Db,[u("div",Rb,[f[3]||(f[3]=u("h2",null,"Profile Information",-1)),u("button",{onClick:f[0]||(f[0]=v=>s.value=!0),class:"btn btn-primary"}," Edit Profile ")]),z(r).loading?(g(),y("div",Nb,"Loading profile...")):z(r).error?(g(),y("div",Bb,[u("p",null,E(z(r).error),1),u("button",{onClick:a,class:"btn btn-secondary"},"Retry")])):z(r).profile?(g(),y("div",Fb,[u("div",zb,[f[4]||(f[4]=u("label",null,"Name",-1)),u("div",Ub,E(z(r).profile.name||""),1)]),u("div",Hb,[f[5]||(f[5]=u("label",null,"Email",-1)),u("div",Vb,E(z(r).profile.email||""),1)]),u("div",Zb,[f[6]||(f[6]=u("label",null,"Phone",-1)),u("div",qb,E(z(r).profile.phone||""),1)]),u("div",Wb,[f[7]||(f[7]=u("label",null,"System Admin",-1)),u("div",jb,[u("span",{class:Ue(["badge",z(r).profile.isSystemAdmin?"badge-success":"badge-secondary"])},E(z(r).profile.isSystemAdmin?"Yes":"No"),3)])])])):B("",!0)]),u("div",{class:"section"},[u("button",{onClick:h,class:"btn btn-secondary"}," Back to Dashboard ")])]),De(Ib,{show:s.value,profile:z(r).profile,onClose:f[1]||(f[1]=v=>s.value=!1),onSubmit:l},null,8,["show","profile"])]))}},Kb=Ze(Gb,[["__scopeId","data-v-e8d20355"]]);function Yb(){const e=D(!1),n=D(""),i=D(""),r=D(null);return{showConfirmModal:e,confirmModalTitle:n,confirmModalMessage:i,showConfirm:(h,m,f)=>{n.value=h,i.value=m,r.value=f,e.value=!0},handleConfirmModalConfirm:()=>{e.value=!1,r.value&&(r.value(),r.value=null)},handleConfirmModalCancel:()=>{e.value=!1,r.value=null},closeConfirmModal:()=>{e.value=!1,r.value=null}}}const Fa=D({people:"Marshals",checkpoint:"Checkpoints",area:"Areas",checklist:"Checklists",course:"Course"}),Yu={people:{People:{singular:"Person",plural:"People"},Marshals:{singular:"Marshal",plural:"Marshals"},Volunteers:{singular:"Volunteer",plural:"Volunteers"},Helpers:{singular:"Helper",plural:"Helpers"},Staff:{singular:"Staff member",plural:"Staff"},Stewards:{singular:"Steward",plural:"Stewards"}},checkpoint:{Checkpoints:{singular:"Checkpoint",plural:"Checkpoints"},Stations:{singular:"Station",plural:"Stations"},Locations:{singular:"Location",plural:"Locations"}},area:{Areas:{singular:"Area",plural:"Areas"},Regions:{singular:"Region",plural:"Regions"},Zones:{singular:"Zone",plural:"Zones"}},checklist:{Checklists:{singular:"Checklist",plural:"Checklists"},Tasks:{singular:"Task",plural:"Tasks"}},course:{Course:{singular:"Course",plural:"Courses"},Route:{singular:"Route",plural:"Routes"},Track:{singular:"Track",plural:"Tracks"},Trail:{singular:"Trail",plural:"Trails"},Path:{singular:"Path",plural:"Paths"}}},bo={people:["Helpers","Marshals","People","Staff","Stewards","Volunteers"],checkpoint:["Checkpoints","Locations","Stations"],area:["Areas","Regions","Zones"],checklist:["Checklists","Tasks"],course:["Course","Path","Route","Track","Trail"]};function of(e){e&&(Fa.value={people:e.peopleTerm||"Marshals",checkpoint:e.checkpointTerm||"Checkpoints",area:e.areaTerm||"Areas",checklist:e.checklistTerm||"Checklists",course:e.courseTerm||"Course"})}const Tn=e=>e.toLowerCase(),In=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function dt(){const e=f=>{const v=Fa.value[f];return Yu[f]?.[v]?.singular||v},n=f=>{const v=Fa.value[f];return Yu[f]?.[v]?.plural||v},i=ne(()=>({person:e("people"),checkpoint:e("checkpoint"),area:e("area"),checklist:e("checklist"),course:e("course"),people:n("people"),checkpoints:n("checkpoint"),areas:n("area"),checklists:n("checklist"),courses:n("course")})),r=ne(()=>({person:Tn(e("people")),checkpoint:Tn(e("checkpoint")),area:Tn(e("area")),checklist:Tn(e("checklist")),course:Tn(e("course")),people:Tn(n("people")),checkpoints:Tn(n("checkpoint")),areas:Tn(n("area")),checklists:Tn(n("checklist")),courses:Tn(n("course"))})),s=ne(()=>({person:In(e("people")),checkpoint:In(e("checkpoint")),area:In(e("area")),checklist:In(e("checklist")),course:In(e("course")),people:In(n("people")),checkpoints:In(n("checkpoint")),areas:In(n("area")),checklists:In(n("checklist")),courses:In(n("course"))})),a=ne(()=>({course:i.value.course,checkpoints:i.value.checkpoints,areas:i.value.areas,marshals:i.value.people,checklists:i.value.checklists,notes:"Notes",details:"Event details"}));return{terms:i,termsLower:r,termsSentence:s,tabLabels:a,singular:e,plural:n,formatCount:(f,v)=>v===1?`1 ${e(f)}`:`${v} ${n(f)}`,lower:(f,v=!0)=>Tn(v?n(f):e(f)),title:(f,v=!0)=>v?n(f):e(f),sentence:(f,v=!0)=>In(v?n(f):e(f)),terminology:Fa}}const Jb=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Ya=e=>{if(!e)return"";const n=new Date(e),i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),a=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return`${i}-${r}-${s}T${a}:${l}`},Ja=e=>{if(!e||e.trim()==="")return!0;if(!/^[a-z]{1,20}[./][a-z]{1,20}[./][a-z]{1,20}$/.test(e))return!1;const i=e.includes("."),r=e.includes("/");return i!==r};function Xb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Co={exports:{}};var Qb=Co.exports,Ju;function ek(){return Ju||(Ju=1,(function(e,n){(function(i,r){r(n)})(Qb,(function(i){var r="1.9.4";function s(t){var o,c,p,_;for(c=1,p=arguments.length;c<p;c++){_=arguments[c];for(o in _)t[o]=_[o]}return t}var a=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function l(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var p=c.call(arguments,2);return function(){return t.apply(o,p.length?p.concat(c.call(arguments)):arguments)}}var d=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,o,c){var p,_,S,U;return U=function(){p=!1,_&&(S.apply(c,_),_=!1)},S=function(){p?_=arguments:(t.apply(c,arguments),setTimeout(U,o),p=!0)},S}function f(t,o,c){var p=o[1],_=o[0],S=p-_;return t===p&&c?t:((t-_)%S+S)%S+_}function v(){return!1}function b(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return A(t).split(/\s+/)}function $(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function O(t,o,c){var p=[];for(var _ in t)p.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(t[_]));return(!o||o.indexOf("?")===-1?"?":"&")+p.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function x(t,o){return t.replace(T,function(c,p){var _=o[p];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(o)),_})}var w=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function P(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var I=0;function Z(t){var o=+new Date,c=Math.max(0,16-(o-I));return I=o+c,window.setTimeout(t,c)}var V=window.requestAnimationFrame||C("RequestAnimationFrame")||Z,ae=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ge(t,o,c){if(c&&V===Z)t.call(o);else return V.call(window,l(t,o))}function Te(t){t&&ae.call(window,t)}var fe={__proto__:null,extend:s,create:a,bind:l,get lastId(){return d},stamp:h,throttle:m,wrapNum:f,falseFn:v,formatNum:b,trim:A,splitWords:M,setOptions:$,getParamString:O,template:x,isArray:w,indexOf:P,emptyImageUrl:k,requestFn:V,cancelFn:ae,requestAnimFrame:ge,cancelAnimFrame:Te};function j(){}j.extend=function(t){var o=function(){$(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,p=a(c);p.constructor=o,o.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(o[_]=this[_]);return t.statics&&s(o,t.statics),t.includes&&(G(t.includes),s.apply(null,[p].concat(t.includes))),s(p,t),delete p.statics,delete p.includes,p.options&&(p.options=c.options?a(c.options):{},s(p.options,t.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,U=p._initHooks.length;S<U;S++)p._initHooks[S].call(this)}},o},j.include=function(t){var o=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},j.mergeOptions=function(t){return s(this.prototype.options,t),this},j.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function G(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=w(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var se={on:function(t,o,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],o);else{t=M(t);for(var _=0,S=t.length;_<S;_++)this._on(t[_],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var p in t)this._off(p,t[p],o);else{t=M(t);for(var _=arguments.length===1,S=0,U=t.length;S<U;S++)_?this._off(t[S]):this._off(t[S],o,c)}return this},_on:function(t,o,c,p){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var _={fn:o,ctx:c};p&&(_.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(_)}},_off:function(t,o,c){var p,_,S;if(this._events&&(p=this._events[t],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,S=p.length;_<S;_++)p[_].fn=v;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var U=this._listens(t,o,c);if(U!==!1){var K=p[U];this._firingCount&&(K.fn=v,this._events[t]=p=p.slice()),p.splice(U,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var p=s({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var _=this._events[t];if(_){this._firingCount=this._firingCount+1||1;for(var S=0,U=_.length;S<U;S++){var K=_[S],Q=K.fn;K.once&&this.off(t,Q,K.ctx),Q.call(K.ctx||this,p)}this._firingCount--}}return c&&this._propagateEvent(p),this},listens:function(t,o,c,p){typeof t!="string"&&console.warn('"string" type argument expected');var _=o;typeof o!="function"&&(p=!!o,_=void 0,c=void 0);var S=this._events&&this._events[t];if(S&&S.length&&this._listens(t,_,c)!==!1)return!0;if(p){for(var U in this._eventParents)if(this._eventParents[U].listens(t,o,c,p))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var p=this._events[t]||[];if(!o)return!!p.length;c===this&&(c=void 0);for(var _=0,S=p.length;_<S;_++)if(p[_].fn===o&&p[_].ctx===c)return _;return!1},once:function(t,o,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],o,!0);else{t=M(t);for(var _=0,S=t.length;_<S;_++)this._on(t[_],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};se.addEventListener=se.on,se.removeEventListener=se.clearAllEventListeners=se.off,se.addOneTimeEventListener=se.once,se.fireEvent=se.fire,se.hasEventListeners=se.listens;var Ee=j.extend(se);function pe(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var Le=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};pe.prototype={clone:function(){return new pe(this.x,this.y)},add:function(t){return this.clone()._add(J(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(J(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new pe(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new pe(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Le(this.x),this.y=Le(this.y),this},distanceTo:function(t){t=J(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=J(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=J(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function J(t,o,c){return t instanceof pe?t:w(t)?new pe(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new pe(t.x,t.y):new pe(t,o,c)}function he(t,o){if(t)for(var c=o?[t,o]:t,p=0,_=c.length;p<_;p++)this.extend(c[p])}he.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof pe||typeof t[0]=="number"||"x"in t)o=c=J(t);else if(t=Se(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof pe?t=J(t):t=Se(t),t instanceof he?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=Se(t);var o=this.min,c=this.max,p=t.min,_=t.max,S=_.x>=o.x&&p.x<=c.x,U=_.y>=o.y&&p.y<=c.y;return S&&U},overlaps:function(t){t=Se(t);var o=this.min,c=this.max,p=t.min,_=t.max,S=_.x>o.x&&p.x<c.x,U=_.y>o.y&&p.y<c.y;return S&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,p=Math.abs(o.x-c.x)*t,_=Math.abs(o.y-c.y)*t;return Se(J(o.x-p,o.y-_),J(c.x+p,c.y+_))},equals:function(t){return t?(t=Se(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Se(t,o){return!t||t instanceof he?t:new he(t,o)}function Re(t,o){if(t)for(var c=o?[t,o]:t,p=0,_=c.length;p<_;p++)this.extend(c[p])}Re.prototype={extend:function(t){var o=this._southWest,c=this._northEast,p,_;if(t instanceof le)p=t,_=t;else if(t instanceof Re){if(p=t._southWest,_=t._northEast,!p||!_)return this}else return t?this.extend(de(t)||ve(t)):this;return!o&&!c?(this._southWest=new le(p.lat,p.lng),this._northEast=new le(_.lat,_.lng)):(o.lat=Math.min(p.lat,o.lat),o.lng=Math.min(p.lng,o.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,p=Math.abs(o.lat-c.lat)*t,_=Math.abs(o.lng-c.lng)*t;return new Re(new le(o.lat-p,o.lng-_),new le(c.lat+p,c.lng+_))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof le||"lat"in t?t=de(t):t=ve(t);var o=this._southWest,c=this._northEast,p,_;return t instanceof Re?(p=t.getSouthWest(),_=t.getNorthEast()):p=_=t,p.lat>=o.lat&&_.lat<=c.lat&&p.lng>=o.lng&&_.lng<=c.lng},intersects:function(t){t=ve(t);var o=this._southWest,c=this._northEast,p=t.getSouthWest(),_=t.getNorthEast(),S=_.lat>=o.lat&&p.lat<=c.lat,U=_.lng>=o.lng&&p.lng<=c.lng;return S&&U},overlaps:function(t){t=ve(t);var o=this._southWest,c=this._northEast,p=t.getSouthWest(),_=t.getNorthEast(),S=_.lat>o.lat&&p.lat<c.lat,U=_.lng>o.lng&&p.lng<c.lng;return S&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=ve(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ve(t,o){return t instanceof Re?t:new Re(t,o)}function le(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}le.prototype={equals:function(t,o){if(!t)return!1;t=de(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+b(this.lat,t)+", "+b(this.lng,t)+")"},distanceTo:function(t){return Y.distance(this,de(t))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return ve([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function de(t,o,c){return t instanceof le?t:w(t)&&typeof t[0]!="object"?t.length===3?new le(t[0],t[1],t[2]):t.length===2?new le(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new le(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new le(t,o,c)}var H={latLngToPoint:function(t,o){var c=this.projection.project(t),p=this.scale(o);return this.transformation._transform(c,p)},pointToLatLng:function(t,o){var c=this.scale(o),p=this.transformation.untransform(t,c);return this.projection.unproject(p)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),p=this.transformation.transform(o.min,c),_=this.transformation.transform(o.max,c);return new he(p,_)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?f(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?f(t.lat,this.wrapLat,!0):t.lat,p=t.alt;return new le(c,o,p)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),p=o.lat-c.lat,_=o.lng-c.lng;if(p===0&&_===0)return t;var S=t.getSouthWest(),U=t.getNorthEast(),K=new le(S.lat-p,S.lng-_),Q=new le(U.lat-p,U.lng-_);return new Re(K,Q)}},Y=s({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,p=t.lat*c,_=o.lat*c,S=Math.sin((o.lat-t.lat)*c/2),U=Math.sin((o.lng-t.lng)*c/2),K=S*S+Math.cos(p)*Math.cos(_)*U*U,Q=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*Q}}),X=6378137,ke={R:X,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,p=Math.max(Math.min(c,t.lat),-c),_=Math.sin(p*o);return new pe(this.R*t.lng*o,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(t){var o=180/Math.PI;return new le((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=X*Math.PI;return new he([-t,-t],[t,t])})()};function Xe(t,o,c,p){if(w(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=p}Xe.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new pe((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function R(t,o,c,p){return new Xe(t,o,c,p)}var F=s({},Y,{code:"EPSG:3857",projection:ke,transformation:(function(){var t=.5/(Math.PI*ke.R);return R(t,.5,-t,.5)})()}),q=s({},F,{code:"EPSG:900913"});function ie(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ce(t,o){var c="",p,_,S,U,K,Q;for(p=0,S=t.length;p<S;p++){for(K=t[p],_=0,U=K.length;_<U;_++)Q=K[_],c+=(_?"L":"M")+Q.x+" "+Q.y;c+=o?Ne.svg?"z":"x":""}return c||"M0 0"}var oe=document.documentElement.style,Ae="ActiveXObject"in window,xe=Ae&&!document.addEventListener,Ce="msLaunchUri"in navigator&&!("documentMode"in document),me=ln("webkit"),ze=ln("android"),Me=ln("android 2")||ln("android 3"),Fe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qe=ze&&ln("Google")&&Fe<537&&!("AudioNode"in window),Ge=!!window.opera,Je=!Ce&&ln("chrome"),He=ln("gecko")&&!me&&!Ge&&!Ae,vt=!Je&&ln("safari"),Lt=ln("phantom"),wt="OTransition"in oe,mt=navigator.platform.indexOf("Win")===0,en=Ae&&"transition"in oe,zt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Me,gt="MozPerspective"in oe,it=!window.L_DISABLE_3D&&(en||zt||gt)&&!wt&&!Lt,Et=typeof orientation<"u"||ln("mobile"),_t=Et&&me,ue=Et&&zt,te=!window.PointerEvent&&window.MSPointerEvent,re=!!(window.PointerEvent||te),Be="ontouchstart"in window||!!window.TouchEvent,Ut=!window.L_NO_TOUCH&&(Be||re),_n=Et&&Ge,rn=Et&&He,vs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fi=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return t})(),Yo=(function(){return!!document.createElement("canvas").getContext})(),qn=!!(document.createElementNS&&ie("svg").createSVGRect),Wn=!!qn&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),si=!qn&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),zi=navigator.platform.indexOf("Mac")===0,Ui=navigator.platform.indexOf("Linux")===0;function ln(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ne={ie:Ae,ielt9:xe,edge:Ce,webkit:me,android:ze,android23:Me,androidStock:qe,opera:Ge,chrome:Je,gecko:He,safari:vt,phantom:Lt,opera12:wt,win:mt,ie3d:en,webkit3d:zt,gecko3d:gt,any3d:it,mobile:Et,mobileWebkit:_t,mobileWebkit3d:ue,msPointer:te,pointer:re,touch:Ut,touchNative:Be,mobileOpera:_n,mobileGecko:rn,retina:vs,passiveEvents:Fi,canvas:Yo,svg:qn,vml:si,inlineSvg:Wn,mac:zi,linux:Ui},jn=Ne.msPointer?"MSPointerDown":"pointerdown",gs=Ne.msPointer?"MSPointerMove":"pointermove",Os=Ne.msPointer?"MSPointerUp":"pointerup",Hi=Ne.msPointer?"MSPointerCancel":"pointercancel",Vi={touchstart:jn,touchmove:gs,touchend:Os,touchcancel:Hi},Jo={touchstart:Ot,touchmove:ii,touchend:ii,touchcancel:ii},_s={},Zi=!1;function Lr(t,o,c){return o==="touchstart"&&Er(),Jo[o]?(c=Jo[o].bind(this,c),t.addEventListener(Vi[o],c,!1),c):(console.warn("wrong event specified:",o),v)}function Xo(t,o,c){if(!Vi[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(Vi[o],c,!1)}function xr(t){_s[t.pointerId]=t}function Ar(t){_s[t.pointerId]&&(_s[t.pointerId]=t)}function Qo(t){delete _s[t.pointerId]}function Er(){Zi||(document.addEventListener(jn,xr,!0),document.addEventListener(gs,Ar,!0),document.addEventListener(Os,Qo,!0),document.addEventListener(Hi,Qo,!0),Zi=!0)}function ii(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in _s)o.touches.push(_s[c]);o.changedTouches=[o],t(o)}}function Ot(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Ht(o),ii(t,o)}function Tr(t){var o={},c,p;for(p in t)c=t[p],o[p]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ir=200;function ea(t,o){t.addEventListener("dblclick",o);var c=0,p;function _(S){if(S.detail!==1){p=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var U=sa(S);if(!(U.some(function(Q){return Q instanceof HTMLLabelElement&&Q.attributes.for})&&!U.some(function(Q){return Q instanceof HTMLInputElement||Q instanceof HTMLSelectElement}))){var K=Date.now();K-c<=Ir?(p++,p===2&&o(Tr(S))):p=1,c=K}}}return t.addEventListener("click",_),{dblclick:o,simDblclick:_}}function Sr(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var qi=ri(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Tt=ri(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wi=Tt==="webkitTransition"||Tt==="OTransition"?Tt+"End":"transitionend";function oi(t){return typeof t=="string"?document.getElementById(t):t}function Gn(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(t,null);c=p?p[o]:null}return c==="auto"?null:c}function ct(t,o,c){var p=document.createElement(t);return p.className=o||"",c&&c.appendChild(p),p}function yt(t){var o=t.parentNode;o&&o.removeChild(t)}function Ds(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Rn(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function ys(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function ji(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=ai(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function Qe(t,o){if(t.classList!==void 0)for(var c=M(o),p=0,_=c.length;p<_;p++)t.classList.add(c[p]);else if(!ji(t,o)){var S=ai(t);Gi(t,(S?S+" ":"")+o)}}function At(t,o){t.classList!==void 0?t.classList.remove(o):Gi(t,A((" "+ai(t)+" ").replace(" "+o+" "," ")))}function Gi(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function ai(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function cn(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Mr(t,o)}function Mr(t,o){var c=!1,p="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(p)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+p+"(opacity="+o+")"}function ri(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function xn(t,o,c){var p=o||new pe(0,0);t.style[qi]=(Ne.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(c?" scale("+c+")":"")}function It(t,o){t._leaflet_pos=o,Ne.any3d?xn(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Kn(t){return t._leaflet_pos||new pe(0,0)}var Rs,Ns,Bs;if("onselectstart"in document)Rs=function(){et(window,"selectstart",Ht)},Ns=function(){pt(window,"selectstart",Ht)};else{var Fs=ri(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rs=function(){if(Fs){var t=document.documentElement.style;Bs=t[Fs],t[Fs]="none"}},Ns=function(){Fs&&(document.documentElement.style[Fs]=Bs,Bs=void 0)}}function Ki(){et(window,"dragstart",Ht)}function Yi(){pt(window,"dragstart",Ht)}var li,zs;function Ji(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Us(),li=t,zs=t.style.outlineStyle,t.style.outlineStyle="none",et(window,"keydown",Us))}function Us(){li&&(li.style.outlineStyle=zs,li=void 0,zs=void 0,pt(window,"keydown",Us))}function ta(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Xi(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var Qi={__proto__:null,TRANSFORM:qi,TRANSITION:Tt,TRANSITION_END:Wi,get:oi,getStyle:Gn,create:ct,remove:yt,empty:Ds,toFront:Rn,toBack:ys,hasClass:ji,addClass:Qe,removeClass:At,setClass:Gi,getClass:ai,setOpacity:cn,testProp:ri,setTransform:xn,setPosition:It,getPosition:Kn,get disableTextSelection(){return Rs},get enableTextSelection(){return Ns},disableImageDrag:Ki,enableImageDrag:Yi,preventOutline:Ji,restoreOutline:Us,getSizedParentNode:ta,getScale:Xi};function et(t,o,c,p){if(o&&typeof o=="object")for(var _ in o)eo(t,_,o[_],c);else{o=M(o);for(var S=0,U=o.length;S<U;S++)eo(t,o[S],c,p)}return this}var yn="_leaflet_events";function pt(t,o,c,p){if(arguments.length===1)na(t),delete t[yn];else if(o&&typeof o=="object")for(var _ in o)ui(t,_,o[_],c);else if(o=M(o),arguments.length===2)na(t,function(K){return P(o,K)!==-1});else for(var S=0,U=o.length;S<U;S++)ui(t,o[S],c,p);return this}function na(t,o){for(var c in t[yn]){var p=c.split(/\d/)[0];(!o||o(p))&&ui(t,p,null,null,c)}}var ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function eo(t,o,c,p){var _=o+h(c)+(p?"_"+h(p):"");if(t[yn]&&t[yn][_])return this;var S=function(K){return c.call(p||t,K||window.event)},U=S;!Ne.touchNative&&Ne.pointer&&o.indexOf("touch")===0?S=Lr(t,o,S):Ne.touch&&o==="dblclick"?S=ea(t,S):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(ci[o]||o,S,Ne.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(S=function(K){K=K||window.event,no(t,K)&&U(K)},t.addEventListener(ci[o],S,!1)):t.addEventListener(o,U,!1):t.attachEvent("on"+o,S),t[yn]=t[yn]||{},t[yn][_]=S}function ui(t,o,c,p,_){_=_||o+h(c)+(p?"_"+h(p):"");var S=t[yn]&&t[yn][_];if(!S)return this;!Ne.touchNative&&Ne.pointer&&o.indexOf("touch")===0?Xo(t,o,S):Ne.touch&&o==="dblclick"?Sr(t,S):"removeEventListener"in t?t.removeEventListener(ci[o]||o,S,!1):t.detachEvent("on"+o,S),t[yn][_]=null}function Yn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function to(t){return eo(t,"wheel",Yn),this}function Hs(t){return et(t,"mousedown touchstart dblclick contextmenu",Yn),t._leaflet_disable_click=!0,this}function Ht(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Jn(t){return Ht(t),Yn(t),this}function sa(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function ia(t,o){if(!o)return new pe(t.clientX,t.clientY);var c=Xi(o),p=c.boundingClientRect;return new pe((t.clientX-p.left)/c.x-o.clientLeft,(t.clientY-p.top)/c.y-o.clientTop)}var Pr=Ne.linux&&Ne.chrome?window.devicePixelRatio:Ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function oa(t){return Ne.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Pr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function no(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var $r={__proto__:null,on:et,off:pt,stopPropagation:Yn,disableScrollPropagation:to,disableClickPropagation:Hs,preventDefault:Ht,stop:Jn,getPropagationPath:sa,getMousePosition:ia,getWheelDelta:oa,isExternalTarget:no,addListener:et,removeListener:pt},aa=Ee.extend({run:function(t,o,c,p){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Kn(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ge(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),It(this._el,c),this.fire("step")},_complete:function(){Te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),at=Ee.extend({options:{crs:F,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=$(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(de(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Tt&&Ne.any3d&&!Ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),et(this._proxy,Wi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(de(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var p=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var p=this.getZoomScale(o),_=this.getSize().divideBy(2),S=t instanceof pe?t:this.latLngToContainerPoint(t),U=S.subtract(_).multiplyBy(1-1/p),K=this.containerPointToLatLng(_.add(U));return this.setView(K,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():ve(t);var c=J(o.paddingTopLeft||o.padding||[0,0]),p=J(o.paddingBottomRight||o.padding||[0,0]),_=this.getBoundsZoom(t,!1,c.add(p));if(_=typeof o.maxZoom=="number"?Math.min(o.maxZoom,_):_,_===1/0)return{center:t.getCenter(),zoom:_};var S=p.subtract(c).divideBy(2),U=this.project(t.getSouthWest(),_),K=this.project(t.getNorthEast(),_),Q=this.unproject(U.add(K).divideBy(2).add(S),_);return{center:Q,zoom:_}},fitBounds:function(t,o){if(t=ve(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=J(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new aa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Qe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!Ne.any3d)return this.setView(t,o,c);this._stop();var p=this.project(this.getCenter()),_=this.project(t),S=this.getSize(),U=this._zoom;t=de(t),o=o===void 0?U:o;var K=Math.max(S.x,S.y),Q=K*this.getZoomScale(U,o),_e=_.distanceTo(p)||1,Oe=1.42,Ye=Oe*Oe;function rt(Ft){var Ca=Ft?-1:1,Uf=Ft?Q:K,Hf=Q*Q-K*K+Ca*Ye*Ye*_e*_e,Vf=2*Uf*Ye*_e,Gr=Hf/Vf,$c=Math.sqrt(Gr*Gr+1)-Gr,Zf=$c<1e-9?-18:Math.log($c);return Zf}function tn(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function Zt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function kn(Ft){return tn(Ft)/Zt(Ft)}var un=rt(0);function gi(Ft){return K*(Zt(un)/Zt(un+Oe*Ft))}function Nf(Ft){return K*(Zt(un)*kn(un+Oe*Ft)-tn(un))/Ye}function Bf(Ft){return 1-Math.pow(1-Ft,1.5)}var Ff=Date.now(),Mc=(rt(1)-un)/Oe,zf=c.duration?1e3*c.duration:1e3*Mc*.8;function Pc(){var Ft=(Date.now()-Ff)/zf,Ca=Bf(Ft)*Mc;Ft<=1?(this._flyToFrame=ge(Pc,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(Nf(Ca)/_e)),U),this.getScaleZoom(K/gi(Ca),U),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Pc.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=ve(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),p=this._limitCenter(c,this._zoom,ve(t));return c.equals(p)||this.panTo(p,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=J(o.paddingTopLeft||o.padding||[0,0]),p=J(o.paddingBottomRight||o.padding||[0,0]),_=this.project(this.getCenter()),S=this.project(t),U=this.getPixelBounds(),K=Se([U.min.add(c),U.max.subtract(p)]),Q=K.getSize();if(!K.contains(S)){this._enforcingBounds=!0;var _e=S.subtract(K.getCenter()),Oe=K.extend(S).getSize().subtract(Q);_.x+=_e.x<0?-Oe.x:Oe.x,_.y+=_e.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(_),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),p=o.divideBy(2).round(),_=c.divideBy(2).round(),S=p.subtract(_);return!S.x&&!S.y?this:(t.animate&&t.pan?this.panBy(S):(t.pan&&this._rawPanBy(S),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,p=new le(o,c),_=p.toBounds(t.coords.accuracy*2),S=this._locateOptions;if(S.setView){var U=this.getBoundsZoom(_);this.setView(p,S.maxZoom?Math.min(U,S.maxZoom):U)}var K={latlng:p,bounds:_,timestamp:t.timestamp};for(var Q in t.coords)typeof t.coords[Q]=="number"&&(K[Q]=t.coords[Q]);this.fire("locationfound",K)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),yt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)yt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),p=ct("div",c,o||this._mapPane);return t&&(this._panes[t]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new Re(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=ve(t),c=J(c||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),S=this.getMaxZoom(),U=t.getNorthWest(),K=t.getSouthEast(),Q=this.getSize().subtract(c),_e=Se(this.project(K,p),this.project(U,p)).getSize(),Oe=Ne.any3d?this.options.zoomSnap:1,Ye=Q.x/_e.x,rt=Q.y/_e.y,tn=o?Math.max(Ye,rt):Math.min(Ye,rt);return p=this.getScaleZoom(tn,p),Oe&&(p=Math.round(p/(Oe/100))*(Oe/100),p=o?Math.ceil(p/Oe)*Oe:Math.floor(p/Oe)*Oe),Math.max(_,Math.min(S,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new pe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var p=c.zoom(t*c.scale(o));return isNaN(p)?1/0:p},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(de(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(J(t),o)},layerPointToLatLng:function(t){var o=J(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(de(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(de(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ve(t))},distance:function(t,o){return this.options.crs.distance(de(t),de(o))},containerPointToLayerPoint:function(t){return J(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return J(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(J(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(t)))},mouseEventToContainerPoint:function(t){return ia(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=oi(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");et(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ne.any3d,Qe(t,"leaflet-container"+(Ne.touch?" leaflet-touch":"")+(Ne.retina?" leaflet-retina":"")+(Ne.ielt9?" leaflet-oldie":"")+(Ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Gn(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new pe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qe(t.markerPane,"leaflet-zoom-hide"),Qe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){It(this._mapPane,new pe(0,0));var p=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var _=this._zoom!==o;this._moveStart(_,c)._move(t,o)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,p){o===void 0&&(o=this._zoom);var _=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),p?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){It(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var o=t?pt:et;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),Ne.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Te(this._resizeRequest),this._resizeRequest=ge(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],p,_=o==="mouseout"||o==="mouseover",S=t.target||t.srcElement,U=!1;S;){if(p=this._targets[h(S)],p&&(o==="click"||o==="preclick")&&this._draggableMoved(p)){U=!0;break}if(p&&p.listens(o,!0)&&(_&&!no(S,t)||(c.push(p),_))||S===this._container)break;S=S.parentNode}return!c.length&&!U&&!_&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&Ji(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var p=s({},t);p.type="preclick",this._fireDOMEvent(p,p.type,c)}var _=this._findEventTargets(t,o);if(c){for(var S=[],U=0;U<c.length;U++)c[U].listens(o,!0)&&S.push(c[U]);_=S.concat(_)}if(_.length){o==="contextmenu"&&Ht(t);var K=_[0],Q={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var _e=K.getLatLng&&(!K._radius||K._radius<=10);Q.containerPoint=_e?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(t),Q.layerPoint=this.containerPointToLayerPoint(Q.containerPoint),Q.latlng=_e?K.getLatLng():this.layerPointToLatLng(Q.layerPoint)}for(U=0;U<_.length;U++)if(_[U].fire(o,Q,!0),Q.originalEvent._stopped||_[U].options.bubblingMouseEvents===!1&&P(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Kn(this._mapPane)||new pe(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var p=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(p)},_latLngBoundsToNewLayerBounds:function(t,o,c){var p=this._getNewPixelOrigin(c,o);return Se([this.project(t.getSouthWest(),o)._subtract(p),this.project(t.getNorthWest(),o)._subtract(p),this.project(t.getSouthEast(),o)._subtract(p),this.project(t.getNorthEast(),o)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var p=this.project(t,o),_=this.getSize().divideBy(2),S=new he(p.subtract(_),p.add(_)),U=this._getBoundsOffset(S,c,o);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?t:this.unproject(p.add(U),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),p=new he(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(p,o))},_getBoundsOffset:function(t,o,c){var p=Se(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),_=p.min.subtract(t.min),S=p.max.subtract(t.max),U=this._rebound(_.x,-S.x),K=this._rebound(_.y,-S.y);return new pe(U,K)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),p=Ne.any3d?this.options.zoomSnap:1;return p&&(t=Math.round(t/p)*p),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){At(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=qi,p=this._proxy.style[c];xn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),p===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){yt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();xn(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(o),_=this._getCenterOffset(t)._divideBy(1-1/p);return c.animate!==!0&&!this.getSize().contains(_)?!1:(ge(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,p){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,Qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&At(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Or(t,o){return new at(t,o)}var jt=j.extend({options:{position:"topright"},initialize:function(t){$(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),p=t._controlCorners[c];return Qe(o,"leaflet-control"),c.indexOf("bottom")!==-1?p.insertBefore(o,p.firstChild):p.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(yt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Vs=function(t){return new jt(t)};at.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=ct("div",o+"control-container",this._container);function p(_,S){var U=o+_+" "+o+S;t[_+S]=ct("div",U,c)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)yt(this._controlCorners[t]);yt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var so=jt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,p){return c<p?-1:p<c?1:0}},initialize:function(t,o,c){$(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in t)this._addLayer(t[p],p);for(p in o)this._addLayer(o[p],p,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return jt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):At(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return At(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=ct("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Hs(o),to(o);var p=this._section=ct("section",t+"-list");c&&(this._map.on("click",this.collapse,this),et(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=ct("a",t+"-toggle",o);_.href="#",_.title="Layers",_.setAttribute("role","button"),et(_,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Ht(S),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=ct("div",t+"-base",p),this._separator=ct("div",t+"-separator",p),this._overlaysList=ct("div",t+"-overlays",p),o.appendChild(p)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ds(this._baseLayersList),Ds(this._overlaysList),this._layerControlInputs=[];var t,o,c,p,_=0;for(c=0;c<this._layers.length;c++)p=this._layers[c],this._addItem(p),o=o||p.overlay,t=t||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(t=t&&_>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(h(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=c,p.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),p;t.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=c):p=this._createRadioElement("leaflet-base-layers_"+h(this),c),this._layerControlInputs.push(p),p.layerId=h(t.layer),et(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+t.name;var S=document.createElement("span");o.appendChild(S),S.appendChild(p),S.appendChild(_);var U=t.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,p=[],_=[];this._handlingClick=!0;for(var S=t.length-1;S>=0;S--)o=t[S],c=this._getLayer(o.layerId).layer,o.checked?p.push(c):o.checked||_.push(c);for(S=0;S<_.length;S++)this._map.hasLayer(_[S])&&this._map.removeLayer(_[S]);for(S=0;S<p.length;S++)this._map.hasLayer(p[S])||this._map.addLayer(p[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,p=this._map.getZoom(),_=t.length-1;_>=0;_--)o=t[_],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&p<c.options.minZoom||c.options.maxZoom!==void 0&&p>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,et(t,"click",Ht),this.expand();var o=this;setTimeout(function(){pt(t,"click",Ht),o._preventClick=!1})}}),io=function(t,o,c){return new so(t,o,c)},Zs=jt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=ct("div",o+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,p,_){var S=ct("a",c,p);return S.innerHTML=t,S.href="#",S.title=o,S.setAttribute("role","button"),S.setAttribute("aria-label",o),Hs(S),et(S,"click",Jn),et(S,"click",_,this),et(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";At(this._zoomInButton,o),At(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Qe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Qe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zs,this.addControl(this.zoomControl))});var Dr=function(t){return new Zs(t)},ra=jt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=ct("div",o),p=this.options;return this._addScales(p,o+"-line",c),t.on(p.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=ct("div",o,c)),t.imperial&&(this._iScale=ct("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,p,_;o>5280?(c=o/5280,p=this._getRoundNum(c),this._updateScale(this._iScale,p+" mi",p/c)):(_=this._getRoundNum(o),this._updateScale(this._iScale,_+" ft",_/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),Rr=function(t){return new ra(t)},Nr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oo=jt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ne.inlineSvg?Nr+" ":"")+"Leaflet</a>"},initialize:function(t){$(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),Hs(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new oo().addTo(this)});var la=function(t){return new oo(t)};jt.Layers=so,jt.Zoom=Zs,jt.Scale=ra,jt.Attribution=oo,Vs.layers=io,Vs.zoom=Dr,Vs.scale=Rr,Vs.attribution=la;var bn=j.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bn.addTo=function(t,o){return t.addHandler(o,this),this};var Br={Events:se},ca=Ne.touch?"touchstart mousedown":"mousedown",An=Ee.extend({options:{clickTolerance:3},initialize:function(t,o,c,p){$(this,p),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(et(this._dragStartTarget,ca,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(An._dragging===this&&this.finishDrag(!0),pt(this._dragStartTarget,ca,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ji(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){An._dragging===this&&this.finishDrag();return}if(!(An._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(An._dragging=this,this._preventOutline&&Ji(this._element),Ki(),Rs(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=ta(this._element);this._startPoint=new pe(o.clientX,o.clientY),this._startPos=Kn(this._element),this._parentScale=Xi(c);var p=t.type==="mousedown";et(document,p?"mousemove":"touchmove",this._onMove,this),et(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new pe(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Ht(t),this._moved||(this.fire("dragstart"),this._moved=!0,Qe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),It(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){At(document.body,"leaflet-dragging"),this._lastTarget&&(At(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),pt(document,"mousemove touchmove",this._onMove,this),pt(document,"mouseup touchend touchcancel",this._onUp,this),Yi(),Ns();var o=this._moved&&this._moving;this._moving=!1,An._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ua(t,o,c){var p,_=[1,4,2,8],S,U,K,Q,_e,Oe,Ye,rt;for(S=0,Oe=t.length;S<Oe;S++)t[S]._code=we(t[S],o);for(K=0;K<4;K++){for(Ye=_[K],p=[],S=0,Oe=t.length,U=Oe-1;S<Oe;U=S++)Q=t[S],_e=t[U],Q._code&Ye?_e._code&Ye||(rt=ye(_e,Q,Ye,o,c),rt._code=we(rt,o),p.push(rt)):(_e._code&Ye&&(rt=ye(_e,Q,Ye,o,c),rt._code=we(rt,o),p.push(rt)),p.push(Q));t=p}return t}function ao(t,o){var c,p,_,S,U,K,Q,_e,Oe;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Ye=de([0,0]),rt=ve(t),tn=rt.getNorthWest().distanceTo(rt.getSouthWest())*rt.getNorthEast().distanceTo(rt.getNorthWest());tn<1700&&(Ye=ro(t));var Zt=t.length,kn=[];for(c=0;c<Zt;c++){var un=de(t[c]);kn.push(o.project(de([un.lat-Ye.lat,un.lng-Ye.lng])))}for(K=Q=_e=0,c=0,p=Zt-1;c<Zt;p=c++)_=kn[c],S=kn[p],U=_.y*S.x-S.y*_.x,Q+=(_.x+S.x)*U,_e+=(_.y+S.y)*U,K+=U*3;K===0?Oe=kn[0]:Oe=[Q/K,_e/K];var gi=o.unproject(J(Oe));return de([gi.lat+Ye.lat,gi.lng+Ye.lng])}function ro(t){for(var o=0,c=0,p=0,_=0;_<t.length;_++){var S=de(t[_]);o+=S.lat,c+=S.lng,p++}return de([o/p,c/p])}var Fr={__proto__:null,clipPolygon:ua,polygonCenter:ao,centroid:ro};function da(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=Ur(t,c),t=ha(t,c),t}function di(t,o,c){return Math.sqrt(Bt(t,o,c,!0))}function zr(t,o,c){return Bt(t,o,c)}function ha(t,o){var c=t.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(c);_[0]=_[c-1]=1,lo(t,_,o,0,c-1);var S,U=[];for(S=0;S<c;S++)_[S]&&U.push(t[S]);return U}function lo(t,o,c,p,_){var S=0,U,K,Q;for(K=p+1;K<=_-1;K++)Q=Bt(t[K],t[p],t[_],!0),Q>S&&(U=K,S=Q);S>c&&(o[U]=1,lo(t,o,c,p,U),lo(t,o,c,U,_))}function Ur(t,o){for(var c=[t[0]],p=1,_=0,S=t.length;p<S;p++)lt(t[p],t[_])>o&&(c.push(t[p]),_=p);return _<S-1&&c.push(t[S-1]),c}var N;function W(t,o,c,p,_){var S=p?N:we(t,c),U=we(o,c),K,Q,_e;for(N=U;;){if(!(S|U))return[t,o];if(S&U)return!1;K=S||U,Q=ye(t,o,K,c,_),_e=we(Q,c),K===S?(t=Q,S=_e):(o=Q,U=_e)}}function ye(t,o,c,p,_){var S=o.x-t.x,U=o.y-t.y,K=p.min,Q=p.max,_e,Oe;return c&8?(_e=t.x+S*(Q.y-t.y)/U,Oe=Q.y):c&4?(_e=t.x+S*(K.y-t.y)/U,Oe=K.y):c&2?(_e=Q.x,Oe=t.y+U*(Q.x-t.x)/S):c&1&&(_e=K.x,Oe=t.y+U*(K.x-t.x)/S),new pe(_e,Oe,_)}function we(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function lt(t,o){var c=o.x-t.x,p=o.y-t.y;return c*c+p*p}function Bt(t,o,c,p){var _=o.x,S=o.y,U=c.x-_,K=c.y-S,Q=U*U+K*K,_e;return Q>0&&(_e=((t.x-_)*U+(t.y-S)*K)/Q,_e>1?(_=c.x,S=c.y):_e>0&&(_+=U*_e,S+=K*_e)),U=t.x-_,K=t.y-S,p?U*U+K*K:new pe(_,S)}function St(t){return!w(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function bs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(t)}function uc(t,o){var c,p,_,S,U,K,Q,_e;if(!t||t.length===0)throw new Error("latlngs not passed");St(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Oe=de([0,0]),Ye=ve(t),rt=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());rt<1700&&(Oe=ro(t));var tn=t.length,Zt=[];for(c=0;c<tn;c++){var kn=de(t[c]);Zt.push(o.project(de([kn.lat-Oe.lat,kn.lng-Oe.lng])))}for(c=0,p=0;c<tn-1;c++)p+=Zt[c].distanceTo(Zt[c+1])/2;if(p===0)_e=Zt[0];else for(c=0,S=0;c<tn-1;c++)if(U=Zt[c],K=Zt[c+1],_=U.distanceTo(K),S+=_,S>p){Q=(S-p)/_,_e=[K.x-Q*(K.x-U.x),K.y-Q*(K.y-U.y)];break}var un=o.unproject(J(_e));return de([un.lat+Oe.lat,un.lng+Oe.lng])}var hf={__proto__:null,simplify:da,pointToSegmentDistance:di,closestPointOnSegment:zr,clipSegment:W,_getEdgeIntersection:ye,_getBitCode:we,_sqClosestPointOnSegment:Bt,isFlat:St,_flat:bs,polylineCenter:uc},Hr={project:function(t){return new pe(t.lng,t.lat)},unproject:function(t){return new le(t.y,t.x)},bounds:new he([-180,-90],[180,90])},Vr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,p=t.lat*o,_=this.R_MINOR/c,S=Math.sqrt(1-_*_),U=S*Math.sin(p),K=Math.tan(Math.PI/4-p/2)/Math.pow((1-U)/(1+U),S/2);return p=-c*Math.log(Math.max(K,1e-10)),new pe(t.lng*o*c,p)},unproject:function(t){for(var o=180/Math.PI,c=this.R,p=this.R_MINOR/c,_=Math.sqrt(1-p*p),S=Math.exp(-t.y/c),U=Math.PI/2-2*Math.atan(S),K=0,Q=.1,_e;K<15&&Math.abs(Q)>1e-7;K++)_e=_*Math.sin(U),_e=Math.pow((1-_e)/(1+_e),_/2),Q=Math.PI/2-2*Math.atan(S*_e)-U,U+=Q;return new le(U*o,t.x*o/c)}},ff={__proto__:null,LonLat:Hr,Mercator:Vr,SphericalMercator:ke},pf=s({},Y,{code:"EPSG:3395",projection:Vr,transformation:(function(){var t=.5/(Math.PI*Vr.R);return R(t,.5,-t,.5)})()}),dc=s({},Y,{code:"EPSG:4326",projection:Hr,transformation:R(1/180,1,-1/180,.5)}),mf=s({},H,{projection:Hr,transformation:R(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,p=o.lat-t.lat;return Math.sqrt(c*c+p*p)},infinite:!0});H.Earth=Y,H.EPSG3395=pf,H.EPSG3857=F,H.EPSG900913=q,H.EPSG4326=dc,H.Simple=mf;var En=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});at.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=h(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?w(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=h(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;t=_.minZoom===void 0?t:Math.min(t,_.minZoom),o=_.maxZoom===void 0?o:Math.max(o,_.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hi=En.extend({initialize:function(t,o){$(this,o),this._layers={};var c,p;if(t)for(c=0,p=t.length;c<p;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,p;for(c in this._layers)p=this._layers[c],p[t]&&p[t].apply(p,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),vf=function(t,o){return new hi(t,o)},Xn=hi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),hi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),hi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Re;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),gf=function(t,o){return new Xn(t,o)},fi=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){$(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(p,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(t,o){var c=this.options,p=c[o+"Size"];typeof p=="number"&&(p=[p,p]);var _=J(p),S=J(o==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),S&&(t.style.marginLeft=-S.x+"px",t.style.marginTop=-S.y+"px"),_&&(t.style.width=_.x+"px",t.style.height=_.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return Ne.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function _f(t){return new fi(t)}var co=fi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof co.imagePath!="string"&&(co.imagePath=this._detectIconPath()),(this.options.imagePath||co.imagePath)+fi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,p,_){var S=p.exec(c);return S&&S[_]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ct("div","leaflet-default-icon-path",document.body),o=Gn(t,"background-image")||Gn(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),hc=bn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new An(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&At(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,S=Kn(o._icon),U=c.getPixelBounds(),K=c.getPixelOrigin(),Q=Se(U.min._subtract(K).add(_),U.max._subtract(K).subtract(_));if(!Q.contains(S)){var _e=J((Math.max(Q.max.x,S.x)-Q.max.x)/(U.max.x-Q.max.x)-(Math.min(Q.min.x,S.x)-Q.min.x)/(U.min.x-Q.min.x),(Math.max(Q.max.y,S.y)-Q.max.y)/(U.max.y-Q.max.y)-(Math.min(Q.min.y,S.y)-Q.min.y)/(U.min.y-Q.min.y)).multiplyBy(p);c.panBy(_e,{animate:!1}),this._draggable._newPos._add(_e),this._draggable._startPos._add(_e),It(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ge(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Te(this._panRequest),this._panRequest=ge(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,p=Kn(o._icon),_=o._map.layerPointToLatLng(p);c&&It(c,p),o._latlng=_,t.latlng=_,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),fa=En.extend({options:{icon:new co,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){$(this,o),this._latlng=de(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=de(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),p=!1;c!==this._icon&&(this._icon&&this._removeIcon(),p=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),Qe(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(c,"focus",this._panOnFocus,this);var _=t.icon.createShadow(this._shadow),S=!1;_!==this._shadow&&(this._removeShadow(),S=!0),_&&(Qe(_,o),_.alt=""),this._shadow=_,t.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&S&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(this._icon,"focus",this._panOnFocus,this),yt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&yt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&It(this._icon,t),this._shadow&&It(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hc)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hc(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&cn(this._icon,t),this._shadow&&cn(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?J(o.iconSize):J(0,0),p=o.iconAnchor?J(o.iconAnchor):J(0,0);t.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:c.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yf(t,o){return new fa(t,o)}var ks=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return $(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),pa=ks.extend({options:{fill:!0,radius:10},initialize:function(t,o){$(this,o),this._latlng=de(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=de(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return ks.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),p=[t+c,o+c];this._pxBounds=new he(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bf(t,o){return new pa(t,o)}var Zr=pa.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),$(this,o),this._latlng=de(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Re(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ks.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,p=c.options.crs;if(p.distance===Y.distance){var _=Math.PI/180,S=this._mRadius/Y.R/_,U=c.project([o+S,t]),K=c.project([o-S,t]),Q=U.add(K).divideBy(2),_e=c.unproject(Q).lat,Oe=Math.acos((Math.cos(S*_)-Math.sin(o*_)*Math.sin(_e*_))/(Math.cos(o*_)*Math.cos(_e*_)))/_;(isNaN(Oe)||Oe===0)&&(Oe=S/Math.cos(Math.PI/180*o)),this._point=Q.subtract(c.getPixelOrigin()),this._radius=isNaN(Oe)?0:Q.x-c.project([_e,t-Oe]).x,this._radiusY=Q.y-U.y}else{var Ye=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Ye).x}this._updateBounds()}});function kf(t,o,c){return new Zr(t,o,c)}var Qn=ks.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){$(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,p=Bt,_,S,U=0,K=this._parts.length;U<K;U++)for(var Q=this._parts[U],_e=1,Oe=Q.length;_e<Oe;_e++){_=Q[_e-1],S=Q[_e];var Ye=p(t,_,S,!0);Ye<o&&(o=Ye,c=p(t,_,S))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=de(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Re,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=St(t),p=0,_=t.length;p<_;p++)c?(o[p]=de(t[p]),this._bounds.extend(o[p])):o[p]=this._convertLatLngs(t[p]);return o},_project:function(){var t=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new pe(t,t);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var p=t[0]instanceof le,_=t.length,S,U;if(p){for(U=[],S=0;S<_;S++)U[S]=this._map.latLngToLayerPoint(t[S]),c.extend(U[S]);o.push(U)}else for(S=0;S<_;S++)this._projectLatlngs(t[S],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,p,_,S,U,K,Q;for(c=0,_=0,S=this._rings.length;c<S;c++)for(Q=this._rings[c],p=0,U=Q.length;p<U-1;p++)K=W(Q[p],Q[p+1],t,p,!0),K&&(o[_]=o[_]||[],o[_].push(K[0]),(K[1]!==Q[p+1]||p===U-2)&&(o[_].push(K[1]),_++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,p=t.length;c<p;c++)t[c]=da(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,p,_,S,U,K,Q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,S=this._parts.length;c<S;c++)for(K=this._parts[c],p=0,U=K.length,_=U-1;p<U;_=p++)if(!(!o&&p===0)&&di(t,K[_],K[p])<=Q)return!0;return!1}});function wf(t,o){return new Qn(t,o)}Qn._flat=bs;var pi=Qn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ao(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Qn.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof le&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){Qn.prototype._setLatLngs.call(this,t),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new pe(o,o);if(t=new he(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,S;p<_;p++)S=ua(this._rings[p],t,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,p,_,S,U,K,Q,_e;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(S=0,Q=this._parts.length;S<Q;S++)for(c=this._parts[S],U=0,_e=c.length,K=_e-1;U<_e;K=U++)p=c[U],_=c[K],p.y>t.y!=_.y>t.y&&t.x<(_.x-p.x)*(t.y-p.y)/(_.y-p.y)+p.x&&(o=!o);return o||Qn.prototype._containsPoint.call(this,t,!0)}});function Cf(t,o){return new pi(t,o)}var es=Xn.extend({initialize:function(t,o){$(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=w(t)?t:t.features,c,p,_;if(o){for(c=0,p=o.length;c<p;c++)_=o[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var S=this.options;if(S.filter&&!S.filter(t))return this;var U=ma(t,S);return U?(U.feature=_a(t),U.defaultOptions=U.options,this.resetStyle(U),S.onEachFeature&&S.onEachFeature(t,U),this.addLayer(U)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function ma(t,o){var c=t.type==="Feature"?t.geometry:t,p=c?c.coordinates:null,_=[],S=o&&o.pointToLayer,U=o&&o.coordsToLatLng||qr,K,Q,_e,Oe;if(!p&&!c)return null;switch(c.type){case"Point":return K=U(p),fc(S,t,K,o);case"MultiPoint":for(_e=0,Oe=p.length;_e<Oe;_e++)K=U(p[_e]),_.push(fc(S,t,K,o));return new Xn(_);case"LineString":case"MultiLineString":return Q=va(p,c.type==="LineString"?0:1,U),new Qn(Q,o);case"Polygon":case"MultiPolygon":return Q=va(p,c.type==="Polygon"?1:2,U),new pi(Q,o);case"GeometryCollection":for(_e=0,Oe=c.geometries.length;_e<Oe;_e++){var Ye=ma({geometry:c.geometries[_e],type:"Feature",properties:t.properties},o);Ye&&_.push(Ye)}return new Xn(_);case"FeatureCollection":for(_e=0,Oe=c.features.length;_e<Oe;_e++){var rt=ma(c.features[_e],o);rt&&_.push(rt)}return new Xn(_);default:throw new Error("Invalid GeoJSON object.")}}function fc(t,o,c,p){return t?t(o,c):new fa(c,p&&p.markersInheritOptions&&p)}function qr(t){return new le(t[1],t[0],t[2])}function va(t,o,c){for(var p=[],_=0,S=t.length,U;_<S;_++)U=o?va(t[_],o-1,c):(c||qr)(t[_]),p.push(U);return p}function Wr(t,o){return t=de(t),t.alt!==void 0?[b(t.lng,o),b(t.lat,o),b(t.alt,o)]:[b(t.lng,o),b(t.lat,o)]}function ga(t,o,c,p){for(var _=[],S=0,U=t.length;S<U;S++)_.push(o?ga(t[S],St(t[S])?0:o-1,c,p):Wr(t[S],p));return!o&&c&&_.length>0&&_.push(_[0].slice()),_}function mi(t,o){return t.feature?s({},t.feature,{geometry:o}):_a(o)}function _a(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var jr={toGeoJSON:function(t){return mi(this,{type:"Point",coordinates:Wr(this.getLatLng(),t)})}};fa.include(jr),Zr.include(jr),pa.include(jr),Qn.include({toGeoJSON:function(t){var o=!St(this._latlngs),c=ga(this._latlngs,o?1:0,!1,t);return mi(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),pi.include({toGeoJSON:function(t){var o=!St(this._latlngs),c=o&&!St(this._latlngs[0]),p=ga(this._latlngs,c?2:o?1:0,!0,t);return o||(p=[p]),mi(this,{type:(c?"Multi":"")+"Polygon",coordinates:p})}}),hi.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),mi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var S=_.toGeoJSON(t);if(c)p.push(S.geometry);else{var U=_a(S);U.type==="FeatureCollection"?p.push.apply(p,U.features):p.push(U)}}}),c?mi(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function pc(t,o){return new es(t,o)}var Lf=pc,ya=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=ve(o),$(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){yt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Rn(this._image),this},bringToBack:function(){return this._map&&ys(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ve(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:ct("img");if(Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xn(this._image,c,o)},_reset:function(){var t=this._image,o=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();It(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),xf=function(t,o,c){return new ya(t,o,c)},mc=ya.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:ct("video");if(Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),p=[],_=0;_<c.length;_++)p.push(c[_].src);this._url=c.length>0?p:[o.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var U=ct("source");U.src=this._url[S],o.appendChild(U)}}});function Af(t,o,c){return new mc(t,o,c)}var vc=ya.extend({_initImage:function(){var t=this._image=this._url;Qe(t,"leaflet-image-layer"),this._zoomAnimated&&Qe(t,"leaflet-zoom-animated"),this.options.className&&Qe(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Ef(t,o,c){return new vc(t,o,c)}var Nn=En.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof le||w(t))?(this._latlng=de(t),$(this,o)):($(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(l(yt,void 0,this._container),200)):yt(this._container),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=de(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rn(this._container),this},bringToBack:function(){return this._map&&ys(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Xn){o=null;var c=this._source._layers;for(var p in c)if(c[p]._map){o=c[p];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?It(this._container,t.add(c)):o=o.add(t).add(c);var p=this._containerBottom=-o.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(t,o,c,p){var _=o;return _ instanceof t||(_=new t(p).setContent(o)),c&&_.setLatLng(c),_}}),En.include({_initOverlay:function(t,o,c,p){var _=c;return _ instanceof t?($(_,p),_._source=this):(_=o&&!p?o:new t(p,this),_.setContent(c)),_}});var ba=Nn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Nn.prototype.openOn.call(this,t)},onAdd:function(t){Nn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ks||this._source.on("preclick",Yn))},onRemove:function(t){Nn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ks||this._source.off("preclick",Yn))},getEvents:function(){var t=Nn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=ct("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=ct("div",t+"-content-wrapper",o);if(this._contentNode=ct("div",t+"-content",c),Hs(o),to(this._contentNode),et(o,"contextmenu",Yn),this._tipContainer=ct("div",t+"-tip-container",o),this._tip=ct("div",t+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=ct("a",t+"-close-button",o);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',et(p,"click",function(_){Ht(_),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var p=t.offsetHeight,_=this.options.maxHeight,S="leaflet-popup-scrolled";_&&p>_?(o.height=_+"px",Qe(t,S)):At(t,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();It(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(Gn(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,p=this._containerWidth,_=new pe(this._containerLeft,-c-this._containerBottom);_._add(Kn(this._container));var S=t.layerPointToContainerPoint(_),U=J(this.options.autoPanPadding),K=J(this.options.autoPanPaddingTopLeft||U),Q=J(this.options.autoPanPaddingBottomRight||U),_e=t.getSize(),Oe=0,Ye=0;S.x+p+Q.x>_e.x&&(Oe=S.x+p-_e.x+Q.x),S.x-Oe-K.x<0&&(Oe=S.x-K.x),S.y+c+Q.y>_e.y&&(Ye=S.y+c-_e.y+Q.y),S.y-Ye-K.y<0&&(Ye=S.y-K.y),(Oe||Ye)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Oe,Ye]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tf=function(t,o){return new ba(t,o)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(t,o,c){return this._initOverlay(ba,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),En.include({bindPopup:function(t,o){return this._popup=this._initOverlay(ba,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Xn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Jn(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof ks)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ka=Nn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Nn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Nn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Nn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,p=this._map,_=this._container,S=p.latLngToContainerPoint(p.getCenter()),U=p.layerPointToContainerPoint(t),K=this.options.direction,Q=_.offsetWidth,_e=_.offsetHeight,Oe=J(this.options.offset),Ye=this._getAnchor();K==="top"?(o=Q/2,c=_e):K==="bottom"?(o=Q/2,c=0):K==="center"?(o=Q/2,c=_e/2):K==="right"?(o=0,c=_e/2):K==="left"?(o=Q,c=_e/2):U.x<S.x?(K="right",o=0,c=_e/2):(K="left",o=Q+(Oe.x+Ye.x)*2,c=_e/2),t=t.subtract(J(o,c,!0)).add(Oe).add(Ye),At(_,"leaflet-tooltip-right"),At(_,"leaflet-tooltip-left"),At(_,"leaflet-tooltip-top"),At(_,"leaflet-tooltip-bottom"),Qe(_,"leaflet-tooltip-"+K),It(_,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&cn(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),If=function(t,o){return new ka(t,o)};at.include({openTooltip:function(t,o,c){return this._initOverlay(ka,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),En.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ka,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Xn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(et(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),et(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,p;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),p=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(o)}});var gc=fi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Ds(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var p=J(c.bgPos);o.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Sf(t){return new gc(t)}fi.Default=co;var uo=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){$(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),yt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ys(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof pe?t:new pe(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),p=0,_=o.length,S;p<_;p++)S=o[p].style.zIndex,o[p]!==this._container&&S&&(c=t(c,+S));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ne.ielt9){cn(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var S=Math.min(1,(t-_.loaded)/200);cn(_.el,S),S<1?o=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Te(this._fadeFrame),this._fadeFrame=ge(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(yt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var p=this._levels[t],_=this._map;return p||(p=this._levels[t]={},p.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=o,p.origin=_.project(_.unproject(_.getPixelOrigin()),t).round(),p.zoom=t,this._setZoomTransform(p,_.getCenter(),_.getZoom()),v(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var p=o.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)yt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,p){var _=Math.floor(t/2),S=Math.floor(o/2),U=c-1,K=new pe(+_,+S);K.z=+U;var Q=this._tileCoordsToKey(K),_e=this._tiles[Q];return _e&&_e.active?(_e.retain=!0,!0):(_e&&_e.loaded&&(_e.retain=!0),U>p?this._retainParent(_,S,U,p):!1)},_retainChildren:function(t,o,c,p){for(var _=2*t;_<2*t+2;_++)for(var S=2*o;S<2*o+2;S++){var U=new pe(_,S);U.z=c+1;var K=this._tileCoordsToKey(U),Q=this._tiles[K];if(Q&&Q.active){Q.retain=!0;continue}else Q&&Q.loaded&&(Q.retain=!0);c+1<p&&this._retainChildren(_,S,c+1,p)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,p){var _=Math.round(o);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var S=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||S)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var p=this._map.getZoomScale(c,t.zoom),_=t.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(o,c)).round();Ne.any3d?xn(t.el,_,p):It(t.el,_)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],p).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],p).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],p).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],p).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),p=o.getZoomScale(c,this._tileZoom),_=o.project(t,this._tileZoom).floor(),S=o.getSize().divideBy(p*2);return new he(_.subtract(S),_.add(S))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(t),_=this._pxBoundsToTileRange(p),S=_.getCenter(),U=[],K=this.options.keepBuffer,Q=new he(_.getBottomLeft().subtract([K,-K]),_.getTopRight().add([K,-K]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _e in this._tiles){var Oe=this._tiles[_e].coords;(Oe.z!==this._tileZoom||!Q.contains(new pe(Oe.x,Oe.y)))&&(this._tiles[_e].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var Ye=_.min.y;Ye<=_.max.y;Ye++)for(var rt=_.min.x;rt<=_.max.x;rt++){var tn=new pe(rt,Ye);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Zt=this._tiles[this._tileCoordsToKey(tn)];Zt?Zt.current=!0:U.push(tn)}}if(U.sort(function(un,gi){return un.distanceTo(S)-gi.distanceTo(S)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kn=document.createDocumentFragment();for(rt=0;rt<U.length;rt++)this._addTile(U[rt],kn);this._level.el.appendChild(kn)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(t);return ve(this.options.bounds).overlaps(p)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),p=t.scaleBy(c),_=p.add(c),S=o.unproject(p,t.z),U=o.unproject(_,t.z);return[S,U]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new Re(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new pe(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(yt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Qe(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=v,t.onmousemove=v,Ne.ielt9&&this.options.opacity<1&&cn(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),p=this._tileCoordsToKey(t),_=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(_),this.createTile.length<2&&ge(l(this._tileReady,this,t,null,_)),It(_,c),this._tiles[p]={el:_,coords:t,current:!0},o.appendChild(_),this.fire("tileloadstart",{tile:_,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var p=this._tileCoordsToKey(t);c=this._tiles[p],c&&(c.loaded=+new Date,this._map._fadeAnimated?(cn(c.el,0),Te(this._fadeFrame),this._fadeFrame=ge(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(Qe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ne.ielt9||!this._map._fadeAnimated?ge(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new pe(this._wrapX?f(t.x,this._wrapX):t.x,this._wrapY?f(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new he(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Mf(t){return new uo(t)}var vi=uo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=$(this,o),o.detectRetina&&Ne.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return et(c,"load",l(this._tileOnLoad,this,o,c)),et(c,"error",l(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:Ne.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return x(this._url,s(o,this.options))},_tileOnLoad:function(t,o){Ne.ielt9?setTimeout(l(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var p=this.options.errorTileUrl;p&&o.getAttribute("src")!==p&&(o.src=p),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,p=this.options.zoomOffset;return c&&(t=o-t),t+p},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=v,o.onerror=v,!o.complete)){o.src=k;var c=this._tiles[t].coords;yt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",k),uo.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===k))return uo.prototype._tileReady.call(this,t,o,c)}});function _c(t,o){return new vi(t,o)}var yc=vi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=s({},this.defaultWmsParams);for(var p in o)p in this.options||(c[p]=o[p]);o=$(this,o);var _=o.detectRetina&&Ne.retina?2:1,S=this.getTileSize();c.width=S.x*_,c.height=S.y*_,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,vi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,p=Se(c.project(o[0]),c.project(o[1])),_=p.min,S=p.max,U=(this._wmsVersion>=1.3&&this._crs===dc?[_.y,_.x,S.y,S.x]:[_.x,_.y,S.x,S.y]).join(","),K=vi.prototype.getTileUrl.call(this,t);return K+O(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(t,o){return s(this.wmsParams,t),o||this.redraw(),this}});function Pf(t,o){return new yc(t,o)}vi.WMS=yc,_c.wms=Pf;var ts=En.extend({options:{padding:.1},initialize:function(t){$(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,o),S=p.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(t,o));Ne.any3d?xn(this._container,S,c):It(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new he(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bc=ts.extend({options:{tolerance:0},getEvents:function(){var t=ts.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ts.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");et(t,"mousemove",this._onMouseMove,this),et(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),et(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Te(this._redrawRequest),delete this._ctx,yt(this._container),pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ts.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),p=Ne.retina?2:1;It(o,t.min),o.width=p*c.x,o.height=p*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",Ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ts.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,p=o.prev;c?c.prev=p:this._drawLast=p,p?p.next=c:this._drawFirst=c,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],p,_;for(_=0;_<o.length;_++){if(p=Number(o[_]),isNaN(p))return;c.push(p)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ge(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)t=p.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,p,_,S,U=t._parts,K=U.length,Q=this._ctx;if(K){for(Q.beginPath(),c=0;c<K;c++){for(p=0,_=U[c].length;p<_;p++)S=U[c][p],Q[p?"lineTo":"moveTo"](S.x,S.y);o&&Q.closePath()}this._fillStroke(Q,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,p=Math.max(Math.round(t._radius),1),_=(Math.max(Math.round(t._radiusY),1)||p)/p;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(o.x,o.y/_,p,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,p,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(p=c);this._fireEvent(p?[p]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(At(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,p,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(o)&&(p=c);p!==this._hoveredLayer&&(this._handleMouseOut(t),p&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([p],t,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,p=o.prev;if(c)c.prev=p;else return;p?p.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,p=o.prev;if(p)p.next=c;else return;c?c.prev=p:p&&(this._drawLast=p),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function kc(t){return Ne.canvas?new bc(t):null}var ho=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),$f={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ts.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=ho("shape");Qe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=ho("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;yt(o),t.removeInteractiveTarget(o),delete this._layers[h(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,p=t.options,_=t._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(o||(o=t._stroke=ho("stroke")),_.appendChild(o),o.weight=p.weight+"px",o.color=p.color,o.opacity=p.opacity,p.dashArray?o.dashStyle=w(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=p.lineCap.replace("butt","flat"),o.joinstyle=p.lineJoin):o&&(_.removeChild(o),t._stroke=null),p.fill?(c||(c=t._fill=ho("fill")),_.appendChild(c),c.color=p.fillColor||p.color,c.opacity=p.fillOpacity):c&&(_.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),p=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+p+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Rn(t._container)},_bringToBack:function(t){ys(t._container)}},wa=Ne.vml?ho:ie,fo=ts.extend({_initContainer:function(){this._container=wa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){yt(this._container),pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ts.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),It(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=wa("path");t.options.className&&Qe(o,t.options.className),t.options.interactive&&Qe(o,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){yt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,ce(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),p=Math.max(Math.round(t._radiusY),1)||c,_="a"+c+","+p+" 0 1,0 ",S=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(t,S)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Rn(t._path)},_bringToBack:function(t){ys(t._path)}});Ne.vml&&fo.include($f);function wc(t){return Ne.svg||Ne.vml?new fo(t):null}at.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&kc(t)||wc(t)}});var Cc=pi.extend({initialize:function(t,o){pi.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ve(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Of(t,o){return new Cc(t,o)}fo.create=wa,fo.pointsToPath=ce,es.geometryToLayer=ma,es.coordsToLatLng=qr,es.coordsToLatLngs=va,es.latLngToCoords=Wr,es.latLngsToCoords=ga,es.getFeature=mi,es.asFeature=_a,at.mergeOptions({boxZoom:!0});var Lc=bn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){yt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rs(),Ki(),this._startPoint=this._map.mouseEventToContainerPoint(t),et(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),Qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new he(this._point,this._startPoint),c=o.getSize();It(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(yt(this._box),At(this._container,"leaflet-crosshair")),Ns(),Yi(),pt(document,{contextmenu:Jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new Re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",Lc),at.mergeOptions({doubleClickZoom:!0});var xc=bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),p=o.options.zoomDelta,_=t.originalEvent.shiftKey?c-p:c+p;o.options.doubleClickZoom==="center"?o.setZoom(_):o.setZoomAround(t.containerPoint,_)}});at.addInitHook("addHandler","doubleClickZoom",xc),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ac=bn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new An(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){At(this._map._container,"leaflet-grab"),At(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ve(this._map.options.maxBounds);this._offsetLimit=Se(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-o+c)%t+o-c,S=(p+o+c)%t-o-c,U=Math.abs(_+c)<Math.abs(S+c)?_:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(t){var o=this._map,c=o.options,p=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),p)o.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,U=c.easeLinearity,K=_.multiplyBy(U/S),Q=K.distanceTo([0,0]),_e=Math.min(c.inertiaMaxSpeed,Q),Oe=K.multiplyBy(_e/Q),Ye=_e/(c.inertiaDeceleration*U),rt=Oe.multiplyBy(-Ye/2).round();!rt.x&&!rt.y?o.fire("moveend"):(rt=o._limitOffset(rt,o.options.maxBounds),ge(function(){o.panBy(rt,{duration:Ye,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",Ac),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ec=bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),et(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,p=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(p,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,p,_;for(p=0,_=c.left.length;p<_;p++)o[c.left[p]]=[-1*t,0];for(p=0,_=c.right.length;p<_;p++)o[c.right[p]]=[t,0];for(p=0,_=c.down.length;p<_;p++)o[c.down[p]]=[0,t];for(p=0,_=c.up.length;p<_;p++)o[c.up[p]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,p,_;for(p=0,_=c.zoomIn.length;p<_;p++)o[c.zoomIn[p]]=t;for(p=0,_=c.zoomOut.length;p<_;p++)o[c.zoomOut[p]]=-t},_addHooks:function(){et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,p;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(p=this._panKeys[o],t.shiftKey&&(p=J(p).multiplyBy(3)),c.options.maxBounds&&(p=c._limitOffset(J(p),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(p)));c.panTo(_)}else c.panBy(p)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Jn(t)}}});at.addInitHook("addHandler","keyboard",Ec),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tc=bn.extend({addHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=oa(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var p=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),Jn(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,S=c?Math.ceil(_/c)*c:_,U=t._limitZoom(o+(this._delta>0?S:-S))-o;this._delta=0,this._startTime=null,U&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+U):t.setZoomAround(this._lastMousePos,o+U))}});at.addInitHook("addHandler","scrollWheelZoom",Tc);var Df=600;at.mergeOptions({tapHold:Ne.touchNative&&Ne.safari&&Ne.mobile,tapTolerance:15});var Ic=bn.extend({addHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new pe(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(et(document,"touchend",Ht),et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Df),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){pt(document,"touchend",Ht),pt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new pe(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});at.addInitHook("addHandler","tapHold",Ic),at.mergeOptions({touchZoom:Ne.touch,bounceAtZoomLimits:!0});var Sc=bn.extend({addHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){At(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),p=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(p)._divideBy(2))),this._startDist=c.distanceTo(p),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),Ht(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),p=o.mouseEventToContainerPoint(t.touches[1]),_=c.distanceTo(p)/this._startDist;if(this._zoom=o.getScaleZoom(_,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&_<1||this._zoom>o.getMaxZoom()&&_>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var S=c._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&S.x===0&&S.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Te(this._animRequest);var U=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ge(U,this,!0),Ht(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Te(this._animRequest),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",Sc),at.BoxZoom=Lc,at.DoubleClickZoom=xc,at.Drag=Ac,at.Keyboard=Ec,at.ScrollWheelZoom=Tc,at.TapHold=Ic,at.TouchZoom=Sc,i.Bounds=he,i.Browser=Ne,i.CRS=H,i.Canvas=bc,i.Circle=Zr,i.CircleMarker=pa,i.Class=j,i.Control=jt,i.DivIcon=gc,i.DivOverlay=Nn,i.DomEvent=$r,i.DomUtil=Qi,i.Draggable=An,i.Evented=Ee,i.FeatureGroup=Xn,i.GeoJSON=es,i.GridLayer=uo,i.Handler=bn,i.Icon=fi,i.ImageOverlay=ya,i.LatLng=le,i.LatLngBounds=Re,i.Layer=En,i.LayerGroup=hi,i.LineUtil=hf,i.Map=at,i.Marker=fa,i.Mixin=Br,i.Path=ks,i.Point=pe,i.PolyUtil=Fr,i.Polygon=pi,i.Polyline=Qn,i.Popup=ba,i.PosAnimation=aa,i.Projection=ff,i.Rectangle=Cc,i.Renderer=ts,i.SVG=fo,i.SVGOverlay=vc,i.TileLayer=vi,i.Tooltip=ka,i.Transformation=Xe,i.Util=fe,i.VideoOverlay=mc,i.bind=l,i.bounds=Se,i.canvas=kc,i.circle=kf,i.circleMarker=bf,i.control=Vs,i.divIcon=Sf,i.extend=s,i.featureGroup=gf,i.geoJSON=pc,i.geoJson=Lf,i.gridLayer=Mf,i.icon=_f,i.imageOverlay=xf,i.latLng=de,i.latLngBounds=ve,i.layerGroup=vf,i.map=Or,i.marker=yf,i.point=J,i.polygon=Cf,i.polyline=wf,i.popup=Tf,i.rectangle=Of,i.setOptions=$,i.stamp=h,i.svg=wc,i.svgOverlay=Ef,i.tileLayer=_c,i.tooltip=If,i.transformation=R,i.version=r,i.videoOverlay=Af;var Rf=window.L;i.noConflict=function(){return window.L=Rf,this},window.L=i}))})(Co,Co.exports)),Co.exports}var tk=ek();const qt=Xb(tk);(function(e,n,i){function r(s,a){for(;(s=s.parentElement)&&!s.classList.contains(a););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,a){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),a=this._poly,l=a.getLatLngs(),d=l.splice(-1,1)[0];this._poly.setLatLngs(l),this._markerGroup.removeLayer(s),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(d,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent),l=this._map.layerPointToLatLng(a);this._currentLatLng=l,this._updateTooltip(l),this._updateGuide(a),this._mouseMarker.setLatLng(l),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var a=s.originalEvent,l=a.clientX,d=a.clientY;this._startPoint.call(this,l,d)}},_startPoint:function(s,a){this._mouseDownOrigin=L.point(s,a)},_onMouseUp:function(s){var a=s.originalEvent,l=a.clientX,d=a.clientY;this._endPoint.call(this,l,d,s),this._clickHandled=null},_endPoint:function(s,a,l){if(this._mouseDownOrigin){var d=L.point(s,a).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(l.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(l.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(d)<9*(e.devicePixelRatio||1)&&this.addVertex(l.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var a,l,d=s.originalEvent;!d.touches||!d.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=d.touches[0].clientX,l=d.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,l),this._endPoint.call(this,a,l,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var a;if(this._markers.length>0){var l;if(this.type===L.Draw.Polyline.TYPE)l=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;l=this._markers[0]}var d=this._map.latLngToContainerPoint(l.getLatLng()),h=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(h.getLatLng());a=d.distanceTo(m)}else a=1/0;return a},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var a=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(s){var a=this._markers?this._markers.length:0;a>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),s))},_updateTooltip:function(s){var a=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(s,a){var l,d,h,m=Math.floor(Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))),f=this.options.guidelineDistance,v=this.options.maxGuideLineLength,b=m>v?m-v:f;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));b<m;b+=this.options.guidelineDistance)l=b/m,d={x:Math.floor(s.x*(1-l)+l*a.x),y:Math.floor(s.y*(1-l)+l*a.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,d)},_updateGuideColor:function(s){if(this._guidesContainer)for(var a=0,l=this._guidesContainer.childNodes.length;a<l;a++)this._guidesContainer.childNodes[a].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,a,l=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=l?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),s},_updateRunningMeasure:function(s,a){var l,d,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(l=h-(a?2:1),d=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[l].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[l].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=d*(a?1:-1))},_getMeasurementString:function(){var s,a=this._currentLatLng,l=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?l&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(l)*(this.options.factor||1):this._measurementRunningTotal||0:l&&a?this._measurementRunningTotal+this._map.distance(a,l)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,a){L.Draw.Polyline.prototype.initialize.call(this,s,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,a;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:s,subtext:a}},_getMeasurementString:function(){var s=this._area,a="";return s||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(a+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,a){var l;!this.options.allowIntersection&&this.options.showArea&&(l=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(l)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,a)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!r(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,a,l,d=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,m=this.options.showArea;return h&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(s),l=m?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:d.text,subtext:l}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(s);else var a=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var a,l=s.latlng,d=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(l),this._isDrawing){this._drawShape(l),a=this._shape.getRadius().toFixed(1);var m="";d&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,a){this._marker=s,L.setOptions(this,a)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,a){var l=parseInt(s.style.marginTop,10)-a,d=parseInt(s.style.marginLeft,10)-a;s.style.marginTop=l+"px",s.style.marginLeft=d+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var a=0;a<this._verticesHandlers.length;a++)s(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,a,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this._latlngs=a,L.setOptions(this,l)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,a=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),a&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.removeClass(a,l)}),s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.addClass(a,l)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,a=s._path;a&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.removeClass(a,l)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.addClass(a,l)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,a,l,d,h=this._defaultShape();for(s=0,l=h.length;s<l;s++)d=this._createMarker(h[s],s),d.on("click",this._onMarkerClick,this),d.on("contextmenu",this._onContextMenu,this),this._markers.push(d);var m,f;for(s=0,a=l-1;s<l;a=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[a],f=this._markers[s],this._createMiddleMarker(m,f),this._updatePrevNext(m,f))},_createMarker:function(s,a){var l=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return l._origLatLng=s,l._index=a,l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(l),l},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),a=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),a},_removeMarker:function(s){var a=s._index;this._markerGroup.removeLayer(s),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var a=s.target,l=this._poly,d=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),l.options.poly){var h=l._map._editTooltip;if(!l.options.poly.allowIntersection&&l.intersects()){L.extend(a._origLatLng,d),a.setLatLng(d);var m=l.options.color;l.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){l.setStyle({color:m}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var f=this._poly.getLatLngs();this._poly._convertLatLngs(f,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,l=s.target;this._defaultShape().length<a||(this._removeMarker(l),this._updatePrevNext(l._prev,l._next),l._middleLeft&&this._markerGroup.removeLayer(l._middleLeft),l._middleRight&&this._markerGroup.removeLayer(l._middleRight),l._prev&&l._next?this._createMiddleMarker(l._prev,l._next):l._prev?l._next||(l._prev._middleRight=null):l._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var a=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(a),d=s.target;L.extend(d._origLatLng,l),d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,a){this._markerGroup.eachLayer(function(l){l._index>s&&(l._index+=a)})},_createMiddleMarker:function(s,a){var l,d,h,m=this._getMiddleLatLng(s,a),f=this._createMarker(m);f.setOpacity(.6),s._middleRight=a._middleLeft=f,d=function(){f.off("touchmove",d,this);var v=a._index;f._index=v,f.off("click",l,this).on("click",this._onMarkerClick,this),m.lat=f.getLatLng().lat,m.lng=f.getLatLng().lng,this._spliceLatLngs(v,0,m),this._markers.splice(v,0,f),f.setOpacity(1),this._updateIndexes(v,1),a._index++,this._updatePrevNext(s,f),this._updatePrevNext(f,a),this._poly.fire("editstart")},h=function(){f.off("dragstart",d,this),f.off("dragend",h,this),f.off("touchmove",d,this),this._createMiddleMarker(s,f),this._createMiddleMarker(f,a)},l=function(){d.call(this),h.call(this),this._fireEdit()},f.on("click",l,this).on("dragstart",d,this).on("dragend",h,this).on("touchmove",d,this),this._markerGroup.addLayer(f)},_updatePrevNext:function(s,a){s&&(s._next=a),a&&(a._prev=s)},_getMiddleLatLng:function(s,a){var l=this._poly._map,d=l.project(s.getLatLng()),h=l.project(a.getLatLng());return l.unproject(d._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,a)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var a=0,l=this._resizeMarkers.length;a<l;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,a){var l=new L.Marker.Touch(s,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(l),this._markerGroup.addLayer(l),l},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var a=s.target,l=a.getLatLng();a===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var a=this._getCorners(),l=s.target,d=l._cornerIndex;l.setOpacity(0),this._oppositeCorner=a[(d+2)%4],this._toggleCornerMarkers(0,d)}this._shape.fire("editstart")},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(a);return s.target===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),a=s.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var a=0,l=s.length;a<l;a++)this._resizeMarkers.push(this._createMarker(s[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var a=this._getCorners(),l=s.target,d=l._cornerIndex;this._oppositeCorner=a[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(s){var a,l,d=s.target;d===this._moveMarker&&(a=this._shape.getBounds(),l=a.getCenter(),d.setLatLng(l)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var a,l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=this._shape.getBounds(),h=d.getCenter(),m=[],f=0,v=l.length;f<v;f++)a=[l[f].lat-h.lat,l[f].lng-h.lng],m.push([s.lat+a[0],s.lng+a[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var a;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var a=0,l=this._resizeMarkers.length;a<l;a++)this._resizeMarkers[a].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),a=0,l=this._resizeMarkers.length;a<l;a++)this._resizeMarkers[a].setLatLng(s[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),a=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var a=this._shape._radius*Math.cos(Math.PI/4),l=this._map.project(s);return this._map.unproject([l.x+a,l.y-a])},_resize:function(s){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(s):radius=this._map.distance(a,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,a){var l={};if(s.touches!==void 0){if(!s.touches.length)return;l=s.touches[0]}else if(s.pointerType!=="touch"||(l=s,!this._filterClick(s)))return;var d=this._map.mouseEventToContainerPoint(l),h=this._map.mouseEventToLayerPoint(l),m=this._map.layerPointToLatLng(h);this._map.fire(a,{latlng:m,layerPoint:h,containerPoint:d,pageX:l.pageX,pageY:l.pageY,originalEvent:s})},_filterClick:function(s){var a=s.timeStamp||s.originalEvent.timeStamp,l=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return l&&l>100&&l<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(s,a)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var l=0;l<a.length;l++)L.DomEvent.on(s,a[l],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var a=[],l=0,d=s.length;l<d;l++)Array.isArray(s[l])?a.push(L.LatLngUtil.cloneLatLngs(s[l])):a.push(this.cloneLatLng(s[l]));return a},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},(function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var l,d,h=a.length,m=0,f=Math.PI/180;if(h>2){for(var v=0;v<h;v++)l=a[v],d=a[(v+1)%h],m+=(d.lng-l.lng)*f*(2+Math.sin(l.lat*f)+Math.sin(d.lat*f));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(a,l){var d=parseFloat(a).toFixed(l),h=L.drawLocal.format&&L.drawLocal.format.numeric,m=h&&h.delimiters,f=m&&m.thousands,v=m&&m.decimal;if(f||v){var b=d.split(".");d=f?b[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f):b[0],v=v||".",b.length>1&&(d=d+v+b[1])}return d},readableArea:function(a,l,f){var h,m,f=L.Util.extend({},s,f);return l?(m=["ha","m"],type=typeof l,type==="string"?m=[l]:type!=="boolean"&&(m=l),h=a>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,f.km)+" km":a>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,f.ha)+" ha":L.GeometryUtil.formattedNumber(a,f.m)+" m"):(a/=.836127,h=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,f.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,f.ac)+" acres":L.GeometryUtil.formattedNumber(a,f.yd)+" yd"),h},readableDistance:function(a,l,d,h,v){var f,v=L.Util.extend({},s,v);switch(l?typeof l=="string"?l:"metric":d?"feet":h?"nauticalMile":"yards"){case"metric":f=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(a,v.m)+" m";break;case"feet":a*=3.28083,f=L.GeometryUtil.formattedNumber(a,v.ft)+" ft";break;case"nauticalMile":a*=.53996,f=L.GeometryUtil.formattedNumber(a/1e3,v.nm)+" nm";break;default:a*=1.09361,f=a>1760?L.GeometryUtil.formattedNumber(a/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(a,v.yd)+" yd"}return f},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,a,l,d){return this._checkCounterclockwise(s,l,d)!==this._checkCounterclockwise(a,l,d)&&this._checkCounterclockwise(s,a,l)!==this._checkCounterclockwise(s,a,d)},_checkCounterclockwise:function(s,a,l){return(l.y-s.y)*(a.x-s.x)>(a.y-s.y)*(l.x-s.x)}}),L.Polyline.include({intersects:function(){var s,a,l,d=this._getProjectedPoints(),h=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=h-1;s>=3;s--)if(a=d[s-1],l=d[s],this._lineSegmentsIntersectsRange(a,l,s-2))return!0;return!1},newLatLngIntersects:function(s,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),a)},newPointIntersects:function(s,a){var l=this._getProjectedPoints(),d=l?l.length:0,h=l?l[d-1]:null,m=d-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,s,m,a?1:0)},_tooFewPointsForIntersection:function(s){var a=this._getProjectedPoints(),l=a?a.length:0;return l+=s||0,!a||l<=3},_lineSegmentsIntersectsRange:function(s,a,l,d){var h,m,f=this._getProjectedPoints();d=d||0;for(var v=l;v>d;v--)if(h=f[v-1],m=f[v],L.LineUtil.segmentsIntersect(s,a,h,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],a=this._defaultShape(),l=0;l<a.length;l++)s.push(this._map.latLngToLayerPoint(a[l]));return s}}),L.Polygon.include({intersects:function(){var s,a,l,d,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=h.length,a=h[0],l=h[s-1],d=s-2,this._lineSegmentsIntersectsRange(l,a,d,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var a,l=L.DomUtil.create("div","leaflet-draw"),d=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(a=this._toolbars[h].addToolbar(s))&&(d||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),d=!0),l.appendChild(a));return l},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(s)},_toolbarEnabled:function(s){var a=s.target;for(var l in this._toolbars)this._toolbars[l]!==a&&this._toolbars[l].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var a,l=L.DomUtil.create("div","leaflet-draw-section"),d=0,h=this._toolbarClass||"",m=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,a=0;a<m.length;a++)m[a].enabled&&this._initModeHandler(m[a].handler,this._toolbarContainer,d++,h,m[a].title);if(d)return this._lastButtonIndex=--d,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),l.appendChild(this._toolbarContainer),l.appendChild(this._actionsContainer),l},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,l=this._actionButtons.length;a<l;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,a,l,d,h){var m=s.type;this._modes[m]={},this._modes[m].handler=s,this._modes[m].button=this._createButton({type:m,title:h,className:d+"-"+m,container:a,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=l,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var a=L.DomUtil.create("a",s.className||"",s.container),l=L.DomUtil.create("span","sr-only",s.container);a.href="#",a.appendChild(l),s.title&&(a.title=s.title,l.innerHTML=s.title),s.text&&(a.innerHTML=s.text,l.innerHTML=s.text);var d=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,d,s.callback,s.context),a},_disposeButton:function(s,a){var l=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,l,a)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var a,l,d,h,m=this._actionsContainer,f=this.getActions(s),v=f.length;for(l=0,d=this._actionButtons.length;l<d;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var b=0;b<v;b++)"enabled"in f[b]&&!f[b].enabled||(a=L.DomUtil.create("li","",m),h=this._createButton({title:f[b].title,text:f[b].text,container:a,callback:f[b].callback,context:f[b].context}),this._actionButtons.push({button:h,callback:f[b].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,a=this._lastButtonIndex,l=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=l+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var a=this._map.latLngToLayerPoint(s),l=this._container;return this._container&&(this._visible&&(l.style.visibility="inherit"),L.DomUtil.setPosition(l,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var a in this.options)this.options.hasOwnProperty(a)&&s[a]&&(s[a]=L.extend({},this.options[a],s[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var a in this._modes)this._modes.hasOwnProperty(a)&&s.hasOwnProperty(a)&&this._modes[a].handler.setOptions(s[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(s){var a=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,a=this.options.featureGroup,l=a.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(s.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var a=L.Util.stamp(s);this._uneditedLayerProps[a]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var a=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[a].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[a].latlng),s.setRadius(this._uneditedLayerProps[a].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[a].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var a,l,d=s.layer||s.target||s;this._backupLayer(d),this.options.poly&&(l=L.Util.extend({},this.options.poly),d.options.poly=l),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=d.options.color,a.fillColor=d.options.fillColor),d.options.original=L.extend({},d.options),d.options.editing=a),d instanceof L.Marker?(d.editing&&d.editing.enable(),d.dragging.enable(),d.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.enable()},_disableLayerEdit:function(s){var a=s.layer||s.target||s;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(s){var a=s.originalEvent.changedTouches[0],l=this._map.mouseEventToLayerPoint(a),d=this._map.layerPointToLatLng(l);s.target.setLatLng(d)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var a=s.layer||s.target||s;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(s){var a=s.layer||s.target||s;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);const af=(e,n)=>e?e.length<=n?e:e.substring(0,n)+"...":"",Xu=e=>e.length*6+12,fl=(e,n)=>!(e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom),nk=(e,n)=>{if(!e||n.length===0)return new Set;const i=[],r=e.getBounds();n.forEach(l=>{if(r.contains(l.getLatLng())){const d=e.latLngToContainerPoint(l.getLatLng()),h=l.locationData;h&&i.push({marker:l,pixelPos:d,location:h})}});const s=i.map(({marker:l,pixelPos:d,location:h})=>{const v=Xu(h.name),b=h.description?Xu(`${h.name}: ${af(h.description,50)}`):v;return{marker:l,location:h,markerBox:{left:d.x-15,right:d.x+15,top:d.y-15,bottom:d.y+15},baseLabelBox:{left:d.x-v/2,right:d.x+v/2,top:d.y+15+2,bottom:d.y+15+2+20},descLabelBox:h.description?{left:d.x-b/2,right:d.x+b/2,top:d.y+15+2,bottom:d.y+15+2+20}:null}}),a=new Set;return s.forEach(({marker:l,location:d,markerBox:h,baseLabelBox:m,descLabelBox:f},v)=>{if(!d.description)return;let b=!1;for(let A=0;A<s.length;A++){if(v===A)continue;const M=s[A];if(fl(f,M.markerBox)||fl(f,M.baseLabelBox)){b=!0;break}if(M.descLabelBox&&a.has(M.location.id)&&fl(f,M.descLabelBox)){b=!0;break}}b||a.add(d.id)}),a},sk={__name:"MapView",props:{locations:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},center:{type:Object,default:null},zoom:{type:Number,default:13},clickable:{type:Boolean,default:!1},areas:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1},userLocation:{type:Object,default:null},highlightLocationId:{type:String,default:null},highlightLocationIds:{type:Array,default:()=>[]},allLocationsForBounds:{type:Array,default:()=>[]},marshalMode:{type:Boolean,default:!1}},emits:["location-click","map-click","area-click","polygon-complete","polygon-drawing"],setup(e,{expose:n,emit:i}){const r=e,s=i,a=D(null);let l=null;n({getMapCenter:()=>{if(l){const V=l.getCenter();return{lat:V.lat,lng:V.lng}}return null},getMapZoom:()=>l?l.getZoom():null});const m=D([]);let f=null;const v=D(!0),b=D(!1),A=D(new Set),M=D([]);let $=null,O=null,T=null;const x=()=>{if(!l)return;const V=nk(l,m.value),ae=Array.from(A.value).sort().join(","),ge=Array.from(V).sort().join(",");ae!==ge&&(A.value=V,Z())},w=()=>{if(T&&(T.remove(),T=null),!l||!r.userLocation)return;const V=qt.divIcon({className:"user-location-marker",html:`
      <div style="
        position: relative;
        width: 20px;
        height: 20px;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          background-color: #4285f4;
          border: 3px solid white;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        "></div>
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 40px;
          height: 40px;
          background-color: rgba(66, 133, 244, 0.2);
          border-radius: 50%;
          animation: pulse 2s ease-out infinite;
        "></div>
      </div>
    `,iconSize:[40,40],iconAnchor:[20,20]});T=qt.marker([r.userLocation.lat,r.userLocation.lng],{icon:V}).addTo(l).bindPopup("Your location")},P=()=>{if(!a.value)return;let V=51.505,ae=-.09,ge=13;const Te=r.allLocationsForBounds.length>0?r.allLocationsForBounds:r.locations,fe=[];Te.length>0&&fe.push(...Te.map(j=>({lat:j.latitude,lng:j.longitude}))),r.route&&r.route.length>0&&fe.push(...r.route.map(j=>({lat:j.lat,lng:j.lng}))),r.center?(V=r.center.lat,ae=r.center.lng,ge=r.zoom??13):fe.length>0&&(V=fe.reduce((j,G)=>j+G.lat,0)/fe.length,ae=fe.reduce((j,G)=>j+G.lng,0)/fe.length,ge=10),l=qt.map(a.value).setView([V,ae],ge),qt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(l),r.clickable&&l.on("click",j=>{r.drawingMode||s("map-click",{lat:j.latlng.lat,lng:j.latlng.lng})}),l.on("zoomend moveend",()=>{x()}),Z(),k(),C(),w(),I()},k=()=>{if(f&&(f.remove(),f=null),!l||r.route.length===0)return;const V=r.route.map(ae=>[ae.lat,ae.lng]);f=qt.polyline(V,{color:"blue",weight:4,opacity:.7}).addTo(l)},C=()=>{M.value.forEach(V=>V.remove()),M.value=[],!(!l||r.areas.length===0)&&r.areas.forEach(V=>{const ae=typeof V.polygon=="string"?JSON.parse(V.polygon):V.polygon;if(!ae||ae.length===0)return;const ge=ae.map(G=>[G.lat,G.lng]),Te=V.id===r.selectedAreaId,fe=V.color||"#667eea",j=qt.polygon(ge,{color:fe,fillColor:fe,fillOpacity:Te?.4:.2,weight:Te?3:2,opacity:.8}).addTo(l);j.setStyle({pane:"overlayPane"}),r.drawingMode||(j.on("click",()=>s("area-click",V)),j.on("mouseover",()=>{j.setStyle({fillOpacity:.4})}),j.on("mouseout",()=>{j.setStyle({fillOpacity:Te?.4:.2})})),M.value.push(j)})},I=()=>{if(l)if(O||(O=new qt.FeatureGroup,l.addLayer(O)),$&&(l.removeControl($),$=null),r.drawingMode){$=new qt.Control.Draw({draw:{polygon:{allowIntersection:!1,showArea:!1,shapeOptions:{color:"#667eea",weight:3,opacity:.8,fillOpacity:.3},repeatMode:!1,touchExtend:!0,metric:!0,feet:!1,nautic:!1},polyline:!1,rectangle:!1,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:O,remove:!1}}),l.addControl($);let V=null;const ae=G=>{V={x:G.originalEvent.clientX,y:G.originalEvent.clientY}},ge=G=>{V&&(G.originalEvent.clientX-V.x,G.originalEvent.clientY-V.y)},Te=()=>{V=null};l.on("mousedown",ae),l.on("mousemove",ge),l.on("mouseup",Te),new qt.Draw.Polygon(l,$.options.draw.polygon).enable(),l._drawingHandlers={handleMouseDown:ae,handleMouseMove:ge,handleMouseUp:Te};const j=G=>{if(G.layers&&G.layers.getLayers().length>0){const se=G.layers.getLayers()[0];if(se&&se.getLatLngs){const Ee=se.getLatLngs()[0]||[];s("polygon-drawing",Ee)}}};l.on(qt.Draw.Event.DRAWVERTEX,j),l._drawVertexHandler=j,l.on(qt.Draw.Event.CREATED,G=>{const Ee=G.layer.getLatLngs()[0].map(pe=>({lat:pe.lat,lng:pe.lng}));s("polygon-complete",Ee),O.clearLayers(),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(qt.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)})}else O&&O.clearLayers(),l.off(qt.Draw.Event.CREATED),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(qt.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)},Z=()=>{if(!(l&&l._animatingZoom)&&(m.value.forEach(V=>V.remove()),m.value=[],!!l)){if(r.locations.forEach(V=>{const ae=V.checkedInCount||0,ge=V.requiredMarshals||1,Te=ae>=ge,fe=ae===0,j=r.highlightLocationId===V.id||r.highlightLocationIds.includes(V.id),G=r.marshalMode&&!j;let se;r.marshalMode?se=j?"#667eea":"#999":se=Te?"green":fe?"red":"orange";const Ee=V.areaColor||"#999",pe=V.areaId&&!r.marshalMode,J=A.value.has(V.id)&&V.description?`${V.name}: ${af(V.description,50)}`:V.name,he=j?`
      <div style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        border: 3px solid #667eea;
        border-radius: 50%;
        animation: highlight-pulse 1.5s ease-out infinite;
      "></div>
    `:"",Se=G?"0.6":"1",Re=j?"36px":r.marshalMode?"20px":"30px",ve=j?"#667eea":G?"#e0e0e0":"white",le=j?"white":G?"#888":"#333",de=j?"#667eea":"white",H=r.marshalMode&&!j||r.marshalMode?"":`${ae}/${ge}`,Y=qt.divIcon({className:"custom-marker",html:`
        <div style="display: flex; flex-direction: column; align-items: center; position: relative; opacity: ${Se};">
          ${he}
          <div style="position: relative; display: flex; align-items: center; gap: 4px;">
            ${pe?`<div style="
              width: 8px;
              height: 8px;
              border-radius: 50%;
              background-color: ${Ee};
              border: 2px solid white;
              box-shadow: 0 1px 2px rgba(0,0,0,0.3);
            "></div>`:""}
            <div style="
              background-color: ${se};
              width: ${Re};
              height: ${Re};
              border-radius: 50%;
              border: 3px solid ${de};
              box-shadow: 0 2px 5px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
              color: white;
              font-weight: bold;
              font-size: ${j?"14px":"12px"};
            ">
              ${H}
            </div>
          </div>
          <div style="
            background-color: ${ve};
            padding: 2px 6px;
            border-radius: 3px;
            font-size: ${j?"12px":"11px"};
            font-weight: bold;
            color: ${le};
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            margin-top: 2px;
          ">
            ${J}
          </div>
        </div>
      `,iconSize:[30,50],iconAnchor:[15,25]}),X=r.marshalMode?`<b>${V.name}</b>${V.description?`<br>${V.description}`:""}`:`<b>${V.name}</b><br>${V.description||""}<br>Checked in: ${ae}/${ge}`,ke=qt.marker([V.latitude,V.longitude],{icon:Y}).addTo(l).bindPopup(X);ke.on("click",()=>{s("location-click",V)}),ke.locationData=V,m.value.push(ke)}),l&&v.value&&!r.center&&!b.value){const V=[],ae=r.allLocationsForBounds.length>0?r.allLocationsForBounds:r.locations;if(ae.length>0&&V.push(...ae.map(ge=>[ge.latitude,ge.longitude])),r.route.length>0&&V.push(...r.route.map(ge=>[ge.lat,ge.lng])),V.length>0){const ge=qt.latLngBounds(V);l.fitBounds(ge,{padding:[50,50]}),v.value=!1,b.value=!0}}else r.center&&(v.value=!1);setTimeout(()=>{l&&!l._animatingZoom&&x()},100)}};return On(()=>{b.value=!1,v.value=!0,P();let V,ae=0,ge=0;const Te=new ResizeObserver(fe=>{if(l&&fe.length>0){const{width:j,height:G}=fe[0].contentRect;(Math.abs(j-ae)>10||Math.abs(G-ge)>10)&&(ae=j,ge=G,clearTimeout(V),V=setTimeout(()=>{l.invalidateSize()},150))}});a.value&&Te.observe(a.value),$s(()=>{clearTimeout(V),Te.disconnect()})}),We(()=>r.locations,V=>{if(Z(),l&&!b.value&&V.length>0&&!r.center){const ae=V.map(j=>j.latitude),ge=V.map(j=>j.longitude),Te=ae.reduce((j,G)=>j+G,0)/ae.length,fe=ge.reduce((j,G)=>j+G,0)/ge.length;l.setView([Te,fe],10),b.value=!0,v.value=!1}},{deep:!0}),We(()=>r.route,V=>{if(k(),Z(),l&&!b.value&&V&&V.length>0&&!r.center){const ae=V.map(j=>j.lat),ge=V.map(j=>j.lng),Te=ae.reduce((j,G)=>j+G,0)/ae.length,fe=ge.reduce((j,G)=>j+G,0)/ge.length;l.setView([Te,fe],10),b.value=!0,v.value=!1}},{deep:!0}),We(()=>r.center,V=>{l&&l.setView([V.lat,V.lng],r.zoom)}),We(()=>r.areas,()=>{C()},{deep:!0}),We(()=>r.selectedAreaId,()=>{C()}),We(()=>r.drawingMode,()=>{I()}),We(()=>r.userLocation,()=>{w()},{deep:!0}),We(()=>r.highlightLocationId,()=>{Z()}),We(()=>r.highlightLocationIds,()=>{Z()},{deep:!0}),We(()=>r.marshalMode,()=>{Z()}),(V,ae)=>(g(),y("div",{ref_key:"mapContainer",ref:a,class:"map-container"},null,512))}},zo=Ze(sk,[["__scopeId","data-v-1cdd9dc1"]]);function dn(e,n){return e.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}const ik={class:"areas-selection"},ok={key:0,class:"areas-selection-header"},ak={class:"areas-list"},rk=["checked","onChange"],lk={__name:"AreasSelection",props:{areas:{type:Array,default:()=>[]},selectedAreaIds:{type:Array,default:()=>[]}},emits:["update:selectedAreaIds"],setup(e,{emit:n}){const i=e,r=n,s=ne(()=>[...i.areas].sort((h,m)=>h.displayOrder!==m.displayOrder?h.displayOrder-m.displayOrder:dn(h.name,m.name))),a=ne(()=>i.areas.length>0&&i.selectedAreaIds.length===i.areas.length),l=h=>{const m=[...i.selectedAreaIds],f=m.indexOf(h);f>=0?m.splice(f,1):m.push(h),r("update:selectedAreaIds",m)},d=()=>{a.value?r("update:selectedAreaIds",[]):r("update:selectedAreaIds",i.areas.map(h=>h.id))};return(h,m)=>(g(),y("div",ik,[e.areas.length>1?(g(),y("div",ok,[u("button",{onClick:d,class:"toggle-all-btn"},E(a.value?"Deselect all":"Select all"),1)])):B("",!0),u("div",ak,[(g(!0),y(be,null,Pe(s.value,f=>(g(),y("label",{class:"area-checkbox",key:f.id},[u("input",{type:"checkbox",checked:e.selectedAreaIds.includes(f.id),onChange:v=>l(f.id)},null,40,rk),u("span",{class:"area-color-dot",style:Qt({backgroundColor:f.color||"#667eea"})},null,4),Ve(" "+E(f.name),1)]))),128))])]))}},rf=Ze(lk,[["__scopeId","data-v-46364246"]]),ck={class:"course-areas-tab"},uk={class:"map-wrapper"},dk={key:0},hk={key:1},fk={key:0,class:"filters-content"},pk={class:"filter-section"},mk={class:"filter-checkbox"},vk={class:"filter-checkbox"},gk={class:"filter-checkbox"},_k={key:0,class:"filter-section"},yk={key:0},bk={key:1},kk={key:0,class:"add-menu-content"},wk={__name:"CourseAreasTab",props:{checkpoints:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1}},emits:["map-click","location-click","area-click","import-checkpoints","upload-route","select-location","add-area","select-area","polygon-complete","cancel-drawing","add-checkpoint-from-map","add-many-checkpoints-from-map","add-area-from-map"],setup(e,{expose:n,emit:i}){const r=e,s=i,a=D(null),l=D(null),d=D(!0),h=D(!1),m=D(null),f=D({showRoute:!0,showCheckpoints:!0,showAreas:!0,selectedAreas:[]}),v=()=>{d.value=!d.value,d.value||(h.value=!1)},b=()=>{h.value=!h.value,h.value&&(d.value=!0)},A=C=>{h.value=!1,C==="checkpoint"?(s("add-checkpoint-from-map"),O()):C==="many-checkpoints"?(s("add-many-checkpoints-from-map"),O()):C==="area"&&(s("add-area-from-map"),O())},M=()=>{h.value=!1,s("import-checkpoints")},$=()=>{h.value=!1,s("upload-route")},O=()=>{a.value&&a.value.scrollIntoView({behavior:"smooth",block:"start"})};n({scrollMapIntoView:O,getMapCenter:()=>l.value?.getMapCenter()||null,getMapZoom:()=>l.value?.getMapZoom()||null}),We(()=>r.areas,C=>{if(C.length>0){const I=new Set(f.value.selectedAreas);C.forEach(Z=>{I.has(Z.id)||f.value.selectedAreas.push(Z.id)}),f.value.selectedAreas=f.value.selectedAreas.filter(Z=>C.some(V=>V.id===Z))}},{immediate:!0}),ne(()=>[...r.areas].sort((C,I)=>C.displayOrder!==I.displayOrder?C.displayOrder-I.displayOrder:dn(C.name,I.name)));const w=ne(()=>f.value.showRoute?r.route:[]),P=ne(()=>f.value.showCheckpoints?r.checkpoints.filter(C=>{const I=C.areaIds||C.AreaIds;return I&&Array.isArray(I)?I.some(Z=>f.value.selectedAreas.includes(Z)):C.areaId?f.value.selectedAreas.includes(C.areaId):!1}):[]),k=ne(()=>f.value.showAreas?r.areas.filter(C=>f.value.selectedAreas.includes(C.id)):[]);return(C,I)=>(g(),y("div",ck,[u("div",{class:"map-section",ref_key:"mapSection",ref:a},[u("div",uk,[De(zo,{ref_key:"mapView",ref:l,locations:P.value,route:w.value,areas:k.value,allLocationsForBounds:e.checkpoints,selectedAreaId:e.selectedAreaId,clickable:!0,drawingMode:e.drawingMode,onMapClick:I[0]||(I[0]=Z=>C.$emit("map-click",Z)),onLocationClick:I[1]||(I[1]=Z=>C.$emit("location-click",Z)),onAreaClick:I[2]||(I[2]=Z=>C.$emit("area-click",Z)),onPolygonComplete:I[3]||(I[3]=Z=>C.$emit("polygon-complete",Z))},null,8,["locations","route","areas","allLocationsForBounds","selectedAreaId","drawingMode"])]),h.value?B("",!0):(g(),y("div",{key:0,class:Ue(["visibility-filters",{collapsed:d.value}])},[u("button",{onClick:v,class:"filters-toggle"},[d.value?(g(),y("span",dk,"Show...")):(g(),y("span",hk,""))]),d.value?B("",!0):(g(),y("div",fk,[u("div",pk,[I[14]||(I[14]=u("h4",null,"Show on map:",-1)),u("label",mk,[$e(u("input",{type:"checkbox","onUpdate:modelValue":I[4]||(I[4]=Z=>f.value.showRoute=Z)},null,512),[[Ti,f.value.showRoute]]),I[11]||(I[11]=Ve(" Route ",-1))]),u("label",vk,[$e(u("input",{type:"checkbox","onUpdate:modelValue":I[5]||(I[5]=Z=>f.value.showCheckpoints=Z)},null,512),[[Ti,f.value.showCheckpoints]]),I[12]||(I[12]=Ve(" Checkpoints ",-1))]),u("label",gk,[$e(u("input",{type:"checkbox","onUpdate:modelValue":I[6]||(I[6]=Z=>f.value.showAreas=Z)},null,512),[[Ti,f.value.showAreas]]),I[13]||(I[13]=Ve(" Areas ",-1))])]),e.areas.length>0&&f.value.showAreas?(g(),y("div",_k,[I[15]||(I[15]=u("h4",null,"Filter areas:",-1)),De(rf,{areas:e.areas,"selected-area-ids":f.value.selectedAreas,"onUpdate:selectedAreaIds":I[7]||(I[7]=Z=>f.value.selectedAreas=Z)},null,8,["areas","selected-area-ids"])])):B("",!0)]))],2)),d.value?(g(),y("div",{key:1,class:Ue(["add-menu",{expanded:h.value}])},[u("button",{onClick:b,class:"add-toggle",ref_key:"addButtonRef",ref:m},[h.value?(g(),y("span",yk,"")):(g(),y("span",bk,"Add..."))],512),h.value?(g(),y("div",kk,[u("button",{onClick:I[8]||(I[8]=Z=>A("checkpoint")),class:"add-menu-item"}," Checkpoint "),u("button",{onClick:I[9]||(I[9]=Z=>A("many-checkpoints")),class:"add-menu-item"}," Many checkpoints "),u("button",{onClick:I[10]||(I[10]=Z=>A("area")),class:"add-menu-item"}," Area "),u("button",{onClick:M,class:"add-menu-item"}," Import checkpoints... "),u("button",{onClick:$,class:"add-menu-item"}," Upload route... ")])):B("",!0)],2)):B("",!0)],512)]))}},Ck=Ze(wk,[["__scopeId","data-v-aa8741b6"]]),Lk=(e,n)=>{const i=String(e).trim(),r=String(n).trim(),s=parseFloat(i),a=parseFloat(r),l=!isNaN(s)&&String(s)===i,d=!isNaN(a)&&String(a)===r;return l&&d?s-a:i.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"})},xk=e=>e&&e.isCheckedIn?"":"",Ak={class:"marshals-tab"},Ek={class:"marshals-tab-header"},Tk={class:"button-group"},Ik={class:"marshals-grid"},Sk={class:"marshals-table"},Mk={key:0,class:"sort-indicator"},Pk={key:0,class:"sort-indicator"},$k={key:0,class:"sort-indicator"},Ok=["onClick"],Dk=["rowspan"],Rk=["value","onChange"],Nk=["onClick"],Bk={style:{color:"#999","font-style":"italic"}},Fk={__name:"MarshalsTab",props:{marshals:{type:Array,required:!0},assignments:{type:Array,required:!0},locations:{type:Array,required:!0}},emits:["add-marshal","import-marshals","select-marshal","delete-marshal","change-assignment-status"],setup(e,{emit:n}){const{terms:i}=dt(),r=e,s=D("name"),a=D("asc"),l=b=>{s.value===b?a.value=a.value==="asc"?"desc":"asc":(s.value=b,a.value="asc")},d=b=>r.assignments.filter(A=>A.marshalId===b),h=b=>{const A=r.locations.find(M=>M.id===b);return A?A.name:"Unknown"},m=ne(()=>{const b=[...r.marshals];return b.sort((A,M)=>{let $=0;if(s.value==="name")$=A.name.localeCompare(M.name);else if(s.value==="checkpoint"){const O=d(A.id),T=d(M.id),x=O.length>0?h(O[0].locationId):"",w=T.length>0?h(T[0].locationId):"";$=Lk(x,w)}else if(s.value==="status"){const O=d(A.id),T=d(M.id),x=O.length>0&&O[0].isCheckedIn?1:0;$=(T.length>0&&T[0].isCheckedIn?1:0)-x}return a.value==="asc"?$:-$}),b}),f=b=>b.isAdminCheckedIn?"admin-checked-in":b.isWrongLocation?"wrong-location":b.isCheckedIn?"checked-in":"not-checked-in",v=b=>b.isCheckedIn?"status-checked-in":"status-not-checked-in";return(b,A)=>(g(),y("div",Ak,[u("div",Ek,[u("h2",null,E(z(i).people)+" management",1),u("div",Tk,[u("button",{onClick:A[0]||(A[0]=M=>b.$emit("add-marshal")),class:"btn btn-primary"}," Add "+E(z(i).person.toLowerCase()),1),u("button",{onClick:A[1]||(A[1]=M=>b.$emit("import-marshals")),class:"btn btn-secondary"}," Import CSV ")])]),u("div",Ik,[u("table",Sk,[u("thead",null,[u("tr",null,[u("th",{onClick:A[2]||(A[2]=M=>l("name")),class:"sortable"},[A[6]||(A[6]=Ve(" Name ",-1)),s.value==="name"?(g(),y("span",Mk,E(a.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:A[3]||(A[3]=M=>l("checkpoint")),class:"sortable"},[Ve(E(z(i).checkpoint)+" ",1),s.value==="checkpoint"?(g(),y("span",Pk,E(a.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:A[4]||(A[4]=M=>l("status")),class:"sortable"},[A[7]||(A[7]=Ve(" Status ",-1)),s.value==="status"?(g(),y("span",$k,E(a.value==="asc"?"":""),1)):B("",!0)])])]),u("tbody",null,[(g(!0),y(be,null,Pe(m.value,M=>(g(),y(be,{key:M.id},[d(M.id).length>0?(g(!0),y(be,{key:0},Pe(d(M.id),($,O)=>(g(),y("tr",{key:`${M.id}-${$.id}`,class:"marshal-row",onClick:T=>b.$emit("select-marshal",M)},[O===0?(g(),y("td",{key:0,rowspan:d(M.id).length},E(M.name),9,Dk)):B("",!0),u("td",null,E(h($.locationId)),1),u("td",{onClick:A[5]||(A[5]=xt(()=>{},["stop"]))},[u("select",{value:f($),onChange:T=>b.$emit("change-assignment-status",{assignment:$,status:T.target.value}),class:Ue(["status-select hide-on-mobile",v($)])},[...A[8]||(A[8]=[u("option",{value:"not-checked-in"},"Not checked-in",-1),u("option",{value:"checked-in"},"Checked-in",-1),u("option",{value:"admin-checked-in"},"Admin checked-in",-1),u("option",{value:"wrong-location"},"Checked-in but not at correct location",-1)])],42,Rk),u("span",{class:Ue(["status-icon show-on-mobile",v($)])},E(z(xk)($)),3)])],8,Ok))),128)):(g(),y("tr",{key:1,class:"marshal-row",onClick:$=>b.$emit("select-marshal",M)},[u("td",null,E(M.name),1),u("td",Bk,"No "+E(z(i).checkpoint.toLowerCase())+" assigned",1),A[9]||(A[9]=u("td",null,[u("span",{class:"hide-on-mobile"},"-"),u("span",{class:"status-icon show-on-mobile",style:{color:"#999"}},"-")],-1))],8,Nk))],64))),128))])])])]))}},zk=Ze(Fk,[["__scopeId","data-v-6b4bda15"]]),Uk={class:"checklists-tab"},Hk={class:"checklists-tab-header"},Vk={class:"button-group"},Zk={class:"filters-section"},qk={class:"filter-group"},Wk={class:"filter-checkbox"},jk=["checked"],Gk={key:0,class:"checkbox-dropdown"},Kk={class:"checkbox-dropdown-header"},Yk={class:"checkbox-list"},Jk=["checked","onChange"],Xk={class:"filter-group"},Qk={class:"filter-checkbox"},ew=["checked"],tw={key:0,class:"checkbox-dropdown"},nw={class:"checkbox-dropdown-header"},sw={class:"checkbox-list"},iw=["checked","onChange"],ow={class:"filter-group"},aw={class:"filter-checkbox"},rw=["checked"],lw={key:0,class:"checkbox-dropdown"},cw={class:"checkbox-dropdown-header"},uw={class:"checkbox-list"},dw=["checked","onChange"],hw={class:"checklist-items-list"},fw={key:0,class:"empty-state"},pw={class:"checklist-item-content"},mw=["onClick"],vw={class:"checklist-item-scopes"},gw=["onClick"],_w={__name:"ChecklistsTab",props:{checklistItems:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},completionReport:{type:Object,default:null}},emits:["add-checklist-item","select-checklist-item"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=D(!0),l=D(!0),d=D(!0),h=D([]),m=D([]),f=D([]),v=ne(()=>[...s.areas].sort((Le,J)=>Le.displayOrder!==J.displayOrder?Le.displayOrder-J.displayOrder:dn(Le.name,J.name))),b=ne(()=>[...s.locations].sort((Le,J)=>dn(Le.name,J.name))),A=ne(()=>[...s.marshals].sort((Le,J)=>dn(Le.name,J.name))),M=ne(()=>s.areas.length>0&&h.value.length===s.areas.length),$=ne(()=>s.locations.length>0&&m.value.length===s.locations.length),O=ne(()=>s.marshals.length>0&&f.value.length===s.marshals.length),T=ne(()=>!a.value||!l.value||!d.value),x=()=>{a.value=!a.value,!a.value&&h.value.length===0&&(h.value=s.areas.map(Le=>Le.id))},w=()=>{l.value=!l.value,!l.value&&m.value.length===0&&(m.value=s.locations.map(Le=>Le.id))},P=()=>{d.value=!d.value,!d.value&&f.value.length===0&&(f.value=s.marshals.map(Le=>Le.id))},k=Le=>{const J=h.value.indexOf(Le);J>=0?h.value.splice(J,1):h.value.push(Le)},C=Le=>{const J=m.value.indexOf(Le);J>=0?m.value.splice(J,1):m.value.push(Le)},I=Le=>{const J=f.value.indexOf(Le);J>=0?f.value.splice(J,1):f.value.push(Le)},Z=()=>{M.value?h.value=[]:h.value=s.areas.map(Le=>Le.id)},V=()=>{$.value?m.value=[]:m.value=s.locations.map(Le=>Le.id)},ae=()=>{O.value?f.value=[]:f.value=s.marshals.map(Le=>Le.id)},ge=()=>{a.value=!0,l.value=!0,d.value=!0,h.value=[],m.value=[],f.value=[]},Te=Le=>{const J=s.marshals.find(he=>he.id===Le);return!J||!J.assignments?[]:J.assignments.map(he=>he.locationId)},fe=Le=>{const J=new Set;return Le.forEach(he=>{const Se=s.locations.find(Re=>Re.id===he);Se&&Se.areaIds&&Se.areaIds.forEach(Re=>J.add(Re))}),Array.from(J)},j=(Le,J)=>{if(!J)return!1;const he=Te(Le),Se=fe(he);return J.scope==="SpecificPeople"&&J.itemType==="Marshal"?J.ids.includes(Le)||J.ids.includes("ALL_MARSHALS"):J.scope==="EveryoneAtCheckpoints"&&J.itemType==="Checkpoint"?J.ids.includes("ALL_CHECKPOINTS")||he.some(Re=>J.ids.includes(Re)):J.scope==="OnePerCheckpoint"&&J.itemType==="Checkpoint"?J.ids.includes("ALL_CHECKPOINTS")||he.some(Re=>J.ids.includes(Re)):J.scope==="OnePerCheckpoint"&&J.itemType==="Area"?J.ids.includes("ALL_AREAS")||Se.some(Re=>J.ids.includes(Re)):J.scope==="EveryoneInAreas"&&J.itemType==="Area"?J.ids.includes("ALL_AREAS")||Se.some(Re=>J.ids.includes(Re)):J.scope==="OnePerArea"&&J.itemType==="Area"?J.ids.includes("ALL_AREAS")||Se.some(Re=>J.ids.includes(Re)):(J.scope==="EveryAreaLead"||J.scope==="OneLeadPerArea")&&J.itemType==="Area"?J.ids.includes("ALL_AREAS")||Se.some(Re=>J.ids.includes(Re)):!1},G=ne(()=>{let Le=s.checklistItems;return!a.value&&h.value.length>0&&(Le=Le.filter(J=>J.scopeConfigurations?J.scopeConfigurations.some(he=>he.itemType==="Area"&&h.value.some(Se=>he.ids.includes(Se))):!1)),!l.value&&m.value.length>0&&(Le=Le.filter(J=>J.scopeConfigurations?J.scopeConfigurations.some(he=>he.itemType==="Checkpoint"&&m.value.some(Se=>he.ids.includes(Se))):!1)),!d.value&&f.value.length>0&&(Le=Le.filter(J=>J.scopeConfigurations?f.value.some(he=>J.scopeConfigurations.some(Se=>j(he,Se))):!1)),Le}),se=ne(()=>[...G.value].sort((Le,J)=>Le.displayOrder!==J.displayOrder?Le.displayOrder-J.displayOrder:dn(Le.text,J.text))),Ee=Le=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${r.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${r.value.checkpoints}`,SpecificPeople:`Specific ${r.value.people}`,OnePerArea:`One per ${r.value.area}`,OnePerCheckpoint:`One per ${r.value.checkpoint}`,EveryAreaLead:`Every ${r.value.area} lead`,OneLeadPerArea:`One lead per ${r.value.area}`,AreaLead:`${i.value.area} lead`})[Le]||Le,pe=Le=>{if(!Le)return"";const J=Ee(Le.scope);if(Le.itemType===null)return J;const he=Le.ids||[];if(he.includes("ALL_MARSHALS"))return`${J} (Everyone)`;if(he.includes("ALL_AREAS"))return`${J} (All ${r.value.areas})`;if(he.includes("ALL_CHECKPOINTS"))return`${J} (All ${r.value.checkpoints})`;const Se=he.length;return Se===0?J:`${J} (${Se})`};return(Le,J)=>(g(),y("div",Uk,[u("div",Hk,[u("h2",null,E(z(i).checklists),1),u("div",Vk,[u("button",{onClick:J[0]||(J[0]=he=>Le.$emit("add-checklist-item")),class:"btn btn-primary"}," Add "+E(z(r).checklist),1)])]),u("div",Zk,[u("div",qk,[u("h4",null,"Filter by "+E(z(r).area)+":",1),u("label",Wk,[u("input",{type:"checkbox",checked:a.value,onChange:x},null,40,jk),Ve(" All "+E(z(r).areas),1)]),a.value?B("",!0):(g(),y("div",Gk,[u("div",Kk,[u("button",{onClick:Z,class:"toggle-all-btn"},E(M.value?"Deselect all":"Select all"),1)]),u("div",Yk,[(g(!0),y(be,null,Pe(v.value,he=>(g(),y("label",{key:he.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:h.value.includes(he.id),onChange:Se=>k(he.id)},null,40,Jk),u("span",{class:"area-color-dot",style:Qt({backgroundColor:he.color||"#667eea"})},null,4),Ve(" "+E(he.name),1)]))),128))])]))]),u("div",Xk,[u("h4",null,"Filter by "+E(z(r).checkpoint)+":",1),u("label",Qk,[u("input",{type:"checkbox",checked:l.value,onChange:w},null,40,ew),Ve(" All "+E(z(r).checkpoints),1)]),l.value?B("",!0):(g(),y("div",tw,[u("div",nw,[u("button",{onClick:V,class:"toggle-all-btn"},E($.value?"Deselect all":"Select all"),1)]),u("div",sw,[(g(!0),y(be,null,Pe(b.value,he=>(g(),y("label",{key:he.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:m.value.includes(he.id),onChange:Se=>C(he.id)},null,40,iw),Ve(" "+E(he.name),1)]))),128))])]))]),u("div",ow,[u("h4",null,"Filter by "+E(z(r).person)+":",1),u("label",aw,[u("input",{type:"checkbox",checked:d.value,onChange:P},null,40,rw),Ve(" All "+E(z(r).people),1)]),d.value?B("",!0):(g(),y("div",lw,[u("div",cw,[u("button",{onClick:ae,class:"toggle-all-btn"},E(O.value?"Deselect all":"Select all"),1)]),u("div",uw,[(g(!0),y(be,null,Pe(A.value,he=>(g(),y("label",{key:he.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:f.value.includes(he.id),onChange:Se=>I(he.id)},null,40,dw),Ve(" "+E(he.name),1)]))),128))])]))]),T.value?(g(),y("button",{key:0,onClick:ge,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",hw,[G.value.length===0?(g(),y("div",fw,[u("p",null,E(T.value?"No checklist items match the selected filters.":"No checklist items yet. Create one to get started!"),1)])):B("",!0),(g(!0),y(be,null,Pe(se.value,he=>(g(),y("div",{key:he.itemId,class:"checklist-item-card"},[u("div",pw,[u("div",{class:"checklist-item-title",onClick:Se=>Le.$emit("select-checklist-item",he,"details")},[u("strong",null,E(he.text),1)],8,mw),u("div",vw,[(g(!0),y(be,null,Pe(he.scopeConfigurations,(Se,Re)=>(g(),y("span",{key:Re,class:"scope-badge",onClick:ve=>Le.$emit("select-checklist-item",he,"visibility")},E(pe(Se)),9,gw))),128))])])]))),128))])]))}},yw=Ze(_w,[["__scopeId","data-v-5b51ce47"]]),bw={class:"notes-tab"},kw={class:"notes-tab-header"},ww={class:"button-group"},Cw={class:"filters-section"},Lw={class:"filter-group"},xw={class:"priority-filters"},Aw=["checked","onChange"],Ew={class:"filter-group"},Tw={class:"filter-checkbox"},Iw=["checked"],Sw={key:0,class:"checkbox-dropdown"},Mw={class:"checkbox-list"},Pw=["checked","onChange"],$w={class:"notes-list"},Ow={key:0,class:"empty-state"},Dw=["onClick"],Rw={class:"note-header"},Nw={class:"note-title-row"},Bw={key:0,class:"pin-icon",title:"Pinned"},Fw={class:"note-meta"},zw={key:0,class:"category-badge"},Uw={class:"created-info"},Hw={key:0,class:"note-preview"},Vw={class:"note-scopes"},Zw={__name:"NotesTab",props:{notes:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]}},emits:["add-note","select-note"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=[{value:"Urgent",label:"Urgent"},{value:"High",label:"High"},{value:"Normal",label:"Normal"},{value:"Low",label:"Low"}],a=D(!0),l=D([]),d=D(["Urgent","High","Normal","Low"]),h=ne(()=>[...r.areas].sort((P,k)=>P.displayOrder!==k.displayOrder?P.displayOrder-k.displayOrder:dn(P.name,k.name))),m=ne(()=>!a.value||d.value.length<4),f=()=>{a.value=!a.value,!a.value&&l.value.length===0&&(l.value=r.areas.map(P=>P.id))},v=P=>{const k=l.value.indexOf(P);k>=0?l.value.splice(k,1):l.value.push(P)},b=P=>{const k=d.value.indexOf(P);k>=0?d.value.splice(k,1):d.value.push(P)},A=()=>{a.value=!0,l.value=[],d.value=["Urgent","High","Normal","Low"]},M=ne(()=>{let P=r.notes;return d.value.length<4&&(P=P.filter(k=>d.value.includes(k.priority||"Normal"))),!a.value&&l.value.length>0&&(P=P.filter(k=>k.scopeConfigurations?k.scopeConfigurations.some(C=>C.itemType==="Area"&&l.value.some(I=>C.ids.includes(I))):!1)),P}),$=ne(()=>{const P={Urgent:0,High:1,Normal:2,Low:3};return[...M.value].sort((k,C)=>{if(k.isPinned!==C.isPinned)return k.isPinned?-1:1;const I=P[k.priority]??2,Z=P[C.priority]??2;return I!==Z?I-Z:k.displayOrder!==C.displayOrder?k.displayOrder-C.displayOrder:dn(k.title,C.title)})}),O=P=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,OnePerArea:`One per ${i.value.area}`,OneLeadPerArea:`One lead per ${i.value.area}`})[P]||P,T=P=>{if(!P)return"";const k=O(P.scope);if(P.itemType===null)return k;const C=P.ids||[];if(C.includes("ALL_MARSHALS"))return`${k} (Everyone)`;if(C.includes("ALL_AREAS"))return`${k} (All ${i.value.areas})`;if(C.includes("ALL_CHECKPOINTS"))return`${k} (All ${i.value.checkpoints})`;const I=C.length;return I===0?k:`${k} (${I})`},x=P=>{if(!P)return"";const k=150;return P.length<=k?P:P.substring(0,k)+"..."},w=P=>{if(!P)return"";const k=new Date(P),I=new Date-k,Z=Math.floor(I/6e4),V=Math.floor(I/36e5),ae=Math.floor(I/864e5);return Z<1?"Just now":Z<60?`${Z}m ago`:V<24?`${V}h ago`:ae<7?`${ae}d ago`:k.toLocaleDateString()};return(P,k)=>(g(),y("div",bw,[u("div",kw,[k[1]||(k[1]=u("h2",null,"Notes",-1)),u("div",ww,[u("button",{onClick:k[0]||(k[0]=C=>P.$emit("add-note")),class:"btn btn-primary"}," Add note ")])]),u("div",Cw,[u("div",Lw,[k[2]||(k[2]=u("h4",null,"Filter by priority:",-1)),u("div",xw,[(g(),y(be,null,Pe(s,C=>u("label",{key:C.value,class:"filter-checkbox"},[u("input",{type:"checkbox",checked:d.value.includes(C.value),onChange:I=>b(C.value)},null,40,Aw),u("span",{class:Ue(["priority-dot",C.value.toLowerCase()])},null,2),Ve(" "+E(C.label),1)])),64))])]),u("div",Ew,[k[4]||(k[4]=u("h4",null,"Filter by area:",-1)),u("label",Tw,[u("input",{type:"checkbox",checked:a.value,onChange:f},null,40,Iw),k[3]||(k[3]=Ve(" All areas ",-1))]),a.value?B("",!0):(g(),y("div",Sw,[u("div",Mw,[(g(!0),y(be,null,Pe(h.value,C=>(g(),y("label",{key:C.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:l.value.includes(C.id),onChange:I=>v(C.id)},null,40,Pw),u("span",{class:"area-color-dot",style:Qt({backgroundColor:C.color||"#667eea"})},null,4),Ve(" "+E(C.name),1)]))),128))])]))]),m.value?(g(),y("button",{key:0,onClick:A,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",$w,[M.value.length===0?(g(),y("div",Ow,[u("p",null,E(m.value?"No notes match the selected filters.":"No notes yet. Create one to get started!"),1)])):B("",!0),(g(!0),y(be,null,Pe($.value,C=>(g(),y("div",{key:C.noteId,class:Ue(["note-card",{pinned:C.isPinned}]),onClick:I=>P.$emit("select-note",C)},[u("div",Rw,[u("div",Nw,[C.isPinned?(g(),y("span",Bw,"")):B("",!0),u("span",{class:Ue(["priority-indicator",C.priority?.toLowerCase()||"normal"])},null,2),u("strong",null,E(C.title),1)]),u("div",Fw,[C.category?(g(),y("span",zw,E(C.category),1)):B("",!0),u("span",Uw,E(w(C.createdAt)),1)])]),C.content?(g(),y("div",Hw,E(x(C.content)),1)):B("",!0),u("div",Vw,[(g(!0),y(be,null,Pe(C.scopeConfigurations,(I,Z)=>(g(),y("span",{key:Z,class:"scope-badge"},E(T(I)),1))),128))])],10,Dw))),128))])]))}},qw=Ze(Zw,[["__scopeId","data-v-f0d2cbb3"]]),Ww={class:"contacts-tab"},jw={class:"contacts-tab-header"},Gw={class:"button-group"},Kw={class:"filters-section"},Yw={class:"filter-group"},Jw={class:"filter-checkbox"},Xw=["checked"],Qw={key:0,class:"checkbox-dropdown"},eC={class:"checkbox-list"},tC=["checked","onChange"],nC={class:"contacts-list"},sC={key:0,class:"empty-state"},iC=["onClick"],oC={class:"contact-header"},aC={class:"contact-title-row"},rC={key:0,class:"primary-badge",title:"Primary contact"},lC={class:"role-badge"},cC={class:"contact-details"},uC={key:0,class:"contact-phone"},dC={key:1,class:"contact-email"},hC={key:0,class:"contact-notes"},fC={class:"contact-scopes"},pC={__name:"ContactsTab",props:{contacts:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})}},emits:["add-contact","select-contact"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=D(!0),a=D([]),l=ne(()=>{const T=new Set([...r.availableRoles.builtInRoles||[],...r.availableRoles.customRoles||[],...r.contacts.map(x=>x.role)]);return Array.from(T).sort()}),d=ne(()=>!s.value),h=()=>{s.value=!s.value,!s.value&&a.value.length===0&&(a.value=[...l.value])},m=T=>{const x=a.value.indexOf(T);x>=0?a.value.splice(x,1):a.value.push(T)},f=()=>{s.value=!0,a.value=[]},v=ne(()=>{let T=r.contacts;return!s.value&&a.value.length>0&&(T=T.filter(x=>a.value.includes(x.role))),T}),b=ne(()=>[...v.value].sort((T,x)=>{if(T.isPrimary!==x.isPrimary)return T.isPrimary?-1:1;const w=T.role.localeCompare(x.role);return w!==0?w:T.displayOrder!==x.displayOrder?T.displayOrder-x.displayOrder:dn(T.name,x.name)})),A=T=>T?T==="AreaLead"?`${i.value.area.charAt(0).toUpperCase()+i.value.area.slice(1)} Lead`:T.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()).trim():"",M=T=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`})[T]||T,$=T=>{if(!T)return"";const x=M(T.scope);if(T.itemType===null)return x;const w=T.ids||[];if(w.includes("ALL_MARSHALS"))return`${x} (Everyone)`;if(w.includes("ALL_AREAS"))return`${x} (All ${i.value.areas})`;if(w.includes("ALL_CHECKPOINTS"))return`${x} (All ${i.value.checkpoints})`;const P=w.length;return P===0?x:`${x} (${P})`},O=T=>{if(!T)return"";const x=100;return T.length<=x?T:T.substring(0,x)+"..."};return(T,x)=>(g(),y("div",Ww,[u("div",jw,[x[1]||(x[1]=u("h2",null,"Contacts",-1)),u("div",Gw,[u("button",{onClick:x[0]||(x[0]=w=>T.$emit("add-contact")),class:"btn btn-primary"}," Add contact ")])]),u("div",Kw,[u("div",Yw,[x[3]||(x[3]=u("h4",null,"Filter by role:",-1)),u("label",Jw,[u("input",{type:"checkbox",checked:s.value,onChange:h},null,40,Xw),x[2]||(x[2]=Ve(" All roles ",-1))]),s.value?B("",!0):(g(),y("div",Qw,[u("div",eC,[(g(!0),y(be,null,Pe(l.value,w=>(g(),y("label",{key:w,class:"checkbox-item"},[u("input",{type:"checkbox",checked:a.value.includes(w),onChange:P=>m(w)},null,40,tC),Ve(" "+E(A(w)),1)]))),128))])]))]),d.value?(g(),y("button",{key:0,onClick:f,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",nC,[v.value.length===0?(g(),y("div",sC,[u("p",null,E(d.value?"No contacts match the selected filters.":"No contacts yet. Create one to get started!"),1)])):B("",!0),(g(!0),y(be,null,Pe(b.value,w=>(g(),y("div",{key:w.contactId,class:Ue(["contact-card",{primary:w.isPrimary}]),onClick:P=>T.$emit("select-contact",w)},[u("div",oC,[u("div",aC,[w.isPrimary?(g(),y("span",rC,"")):B("",!0),u("strong",null,E(w.name),1),u("span",lC,E(A(w.role)),1)]),u("div",cC,[w.phone?(g(),y("span",uC,E(w.phone),1)):B("",!0),w.email?(g(),y("span",dC,E(w.email),1)):B("",!0)])]),w.notes?(g(),y("div",hC,E(O(w.notes)),1)):B("",!0),u("div",fC,[(g(!0),y(be,null,Pe(w.scopeConfigurations,(P,k)=>(g(),y("span",{key:k,class:"scope-badge"},E($(P)),1))),128))])],10,iC))),128))])]))}},mC=Ze(pC,[["__scopeId","data-v-62313ae0"]]),vC={class:"admins-list"},gC={class:"admin-info"},_C={class:"admin-role"},yC=["onClick"],bC={__name:"AdminsList",props:{admins:{type:Array,required:!0}},emits:["add-admin","remove-admin"],setup(e){return(n,i)=>(g(),y("div",null,[i[1]||(i[1]=u("h3",null,"Event administrators",-1)),u("button",{onClick:i[0]||(i[0]=r=>n.$emit("add-admin")),class:"btn btn-small btn-primary"}," Add administrator "),u("div",vC,[(g(!0),y(be,null,Pe(e.admins,r=>(g(),y("div",{key:r.userEmail,class:"admin-item"},[u("div",gC,[u("strong",null,E(r.userEmail),1),u("span",_C,E(r.role),1)]),e.admins.length>1?(g(),y("button",{key:0,onClick:s=>n.$emit("remove-admin",r.userEmail),class:"btn btn-small btn-danger"}," Remove ",8,yC)):B("",!0)]))),128))])]))}},kC=Ze(bC,[["__scopeId","data-v-c76441fb"]]),wC={class:"event-details-tab"},CC={class:"accordion"},LC={class:"accordion-section"},xC={class:"accordion-icon"},AC={key:0,class:"accordion-content"},EC={class:"form-group"},TC={class:"form-group"},IC={class:"form-group"},SC={class:"form-group"},MC=["value"],PC={class:"form-actions"},$C=["disabled"],OC={class:"accordion-section"},DC={class:"accordion-title"},RC={class:"accordion-icon"},NC={key:0,class:"accordion-content"},BC={class:"accordion-section"},FC={class:"accordion-icon"},zC={key:0,class:"accordion-content"},UC={class:"terminology-grid"},HC={class:"term-group"},VC=["value"],ZC={class:"term-group"},qC=["value"],WC={class:"term-group"},jC=["value"],GC={class:"term-group"},KC=["value"],YC={class:"term-group"},JC=["value"],XC={class:"form-actions"},QC=["disabled"],e1={__name:"EventDetailsTab",props:{eventData:{type:Object,required:!0},admins:{type:Array,default:()=>[]},formDirty:{type:Boolean,default:!1}},emits:["submit","add-admin","remove-admin","update:formDirty"],setup(e,{emit:n}){const{terms:i}=dt(),r=e,s=n,a=D({...r.eventData}),l=D(null),d=f=>{l.value=l.value===f?null:f};We(()=>r.eventData,f=>{a.value={...f}},{deep:!0});const h=()=>{s("update:formDirty",!0)},m=()=>{s("submit",{...a.value})};return(f,v)=>(g(),y("div",wC,[u("div",CC,[u("div",LC,[u("button",{class:Ue(["accordion-header",{active:l.value==="info"}]),onClick:v[0]||(v[0]=b=>d("info"))},[v[14]||(v[14]=u("span",{class:"accordion-title"},"Event Information",-1)),u("span",xC,E(l.value==="info"?"":"+"),1)],2),l.value==="info"?(g(),y("div",AC,[u("form",{onSubmit:xt(m,["prevent"]),class:"event-details-form"},[u("div",EC,[v[15]||(v[15]=u("label",null,"Event Name",-1)),$e(u("input",{"onUpdate:modelValue":v[1]||(v[1]=b=>a.value.name=b),type:"text",required:"",class:"form-input",onInput:h},null,544),[[st,a.value.name]])]),u("div",TC,[v[16]||(v[16]=u("label",null,"Description",-1)),$e(u("textarea",{"onUpdate:modelValue":v[2]||(v[2]=b=>a.value.description=b),rows:"3",class:"form-input",onInput:h},null,544),[[st,a.value.description]])]),u("div",IC,[v[17]||(v[17]=u("label",null,"Event Date & Time",-1)),$e(u("input",{"onUpdate:modelValue":v[3]||(v[3]=b=>a.value.eventDate=b),type:"datetime-local",required:"",class:"form-input",onInput:h},null,544),[[st,a.value.eventDate]])]),u("div",SC,[v[18]||(v[18]=u("label",null,"Time Zone",-1)),$e(u("select",{"onUpdate:modelValue":v[4]||(v[4]=b=>a.value.timeZoneId=b),required:"",class:"form-input",onChange:h},[(g(!0),y(be,null,Pe(z(sf),b=>(g(),y("option",{key:b.value,value:b.value},E(b.label),9,MC))),128))],544),[[mn,a.value.timeZoneId]])]),u("div",PC,[u("button",{type:"submit",class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,$C)])],32)])):B("",!0)]),u("div",OC,[u("button",{class:Ue(["accordion-header",{active:l.value==="admins"}]),onClick:v[5]||(v[5]=b=>d("admins"))},[u("span",DC,"Administrators ("+E(e.admins.length)+")",1),u("span",RC,E(l.value==="admins"?"":"+"),1)],2),l.value==="admins"?(g(),y("div",NC,[De(kC,{admins:e.admins,onAddAdmin:v[6]||(v[6]=b=>f.$emit("add-admin")),onRemoveAdmin:v[7]||(v[7]=b=>f.$emit("remove-admin",b))},null,8,["admins"])])):B("",!0)]),u("div",BC,[u("button",{class:Ue(["accordion-header",{active:l.value==="terminology"}]),onClick:v[8]||(v[8]=b=>d("terminology"))},[v[19]||(v[19]=u("span",{class:"accordion-title"},"Terminology Settings",-1)),u("span",FC,E(l.value==="terminology"?"":"+"),1)],2),l.value==="terminology"?(g(),y("div",zC,[v[20]||(v[20]=u("p",{class:"section-description"}," Customise how things are named throughout the application. ",-1)),u("div",UC,[u("div",HC,[u("label",null,E(z(i).people)+" are called",1),$e(u("select",{"onUpdate:modelValue":v[9]||(v[9]=b=>a.value.peopleTerm=b),class:"form-input",onChange:h},[(g(!0),y(be,null,Pe(z(bo).people,b=>(g(),y("option",{key:b,value:b},E(b),9,VC))),128))],544),[[mn,a.value.peopleTerm]])]),u("div",ZC,[u("label",null,E(z(i).checkpoints)+" are called",1),$e(u("select",{"onUpdate:modelValue":v[10]||(v[10]=b=>a.value.checkpointTerm=b),class:"form-input",onChange:h},[(g(!0),y(be,null,Pe(z(bo).checkpoint,b=>(g(),y("option",{key:b,value:b},E(b),9,qC))),128))],544),[[mn,a.value.checkpointTerm]])]),u("div",WC,[u("label",null,E(z(i).areas)+" are called",1),$e(u("select",{"onUpdate:modelValue":v[11]||(v[11]=b=>a.value.areaTerm=b),class:"form-input",onChange:h},[(g(!0),y(be,null,Pe(z(bo).area,b=>(g(),y("option",{key:b,value:b},E(b),9,jC))),128))],544),[[mn,a.value.areaTerm]])]),u("div",GC,[u("label",null,E(z(i).checklists)+" are called",1),$e(u("select",{"onUpdate:modelValue":v[12]||(v[12]=b=>a.value.checklistTerm=b),class:"form-input",onChange:h},[(g(!0),y(be,null,Pe(z(bo).checklist,b=>(g(),y("option",{key:b,value:b},E(b),9,KC))),128))],544),[[mn,a.value.checklistTerm]])]),u("div",YC,[u("label",null,E(z(i).course)+" is called",1),$e(u("select",{"onUpdate:modelValue":v[13]||(v[13]=b=>a.value.courseTerm=b),class:"form-input",onChange:h},[(g(!0),y(be,null,Pe(z(bo).course,b=>(g(),y("option",{key:b,value:b},E(b),9,JC))),128))],544),[[mn,a.value.courseTerm]])])]),u("div",XC,[u("button",{onClick:m,class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,QC)])])):B("",!0)])])]))}},t1=Ze(e1,[["__scopeId","data-v-2b66b552"]]),n1={class:"button-group"},s1={key:0,class:"add-dropdown"},i1={key:0,class:"filter-group"},o1={class:"filter-checkbox"},a1=["checked"],r1={class:"locations-list"},l1=["onClick"],c1={class:"location-info"},u1={class:"location-header"},d1={class:"location-description"},h1={class:"location-status"},f1={class:"location-assignments"},p1={__name:"CheckpointsList",props:{locations:{type:Array,required:!0},areas:{type:Array,default:()=>[]}},emits:["add-checkpoint-manually","import-checkpoints","select-location"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D(!0),d=D([]),h=D(null),m=D(null),f=D(!1),v=()=>{f.value=!f.value},b=()=>{f.value=!1,a("add-checkpoint-manually")},A=()=>{f.value=!1,a("import-checkpoints")},M=w=>{m.value&&!m.value.contains(w.target)&&(f.value=!1)};On(()=>{document.addEventListener("click",M)}),$s(()=>{document.removeEventListener("click",M)});const $=()=>{l.value=!l.value,!l.value&&d.value.length===0&&(d.value=s.areas.map(w=>w.id))},O=ne(()=>{let w=s.locations;return!l.value&&d.value.length>0&&(w=w.filter(P=>(P.areaIds||P.AreaIds||[]).some(C=>d.value.includes(C)))),[...w].sort((P,k)=>dn(P.name,k.name))}),T=w=>{const P=s.areas.find(k=>k.id===w);return P?P.name:null},x=w=>{const P=s.areas.find(k=>k.id===w);return P?P.color:"#999"};return(w,P)=>(g(),y("div",null,[u("h3",null,E(z(i).checkpoints)+" ("+E(e.locations.length)+")",1),u("div",n1,[u("div",{class:"add-menu-wrapper",ref_key:"menuWrapperRef",ref:m},[u("button",{ref_key:"addButtonRef",ref:h,onClick:v,class:"btn btn-small btn-primary"}," Add... ",512),f.value?(g(),y("div",s1,[u("button",{onClick:b,class:"dropdown-item"}," Add "+E(z(r).checkpoint)+" manually ",1),u("button",{onClick:A,class:"dropdown-item"}," Import from CSV... ")])):B("",!0)],512)]),e.areas.length>0?(g(),y("div",i1,[u("h4",null,"Filter by "+E(z(i).area.toLowerCase())+":",1),u("label",o1,[u("input",{type:"checkbox",checked:l.value,onChange:$},null,40,a1),Ve(" All "+E(z(i).areas.toLowerCase())+" ("+E(e.locations.length)+") ",1)]),l.value?B("",!0):(g(),tt(rf,{key:0,areas:e.areas,"selected-area-ids":d.value,"onUpdate:selectedAreaIds":P[0]||(P[0]=k=>d.value=k)},null,8,["areas","selected-area-ids"]))])):B("",!0),u("div",r1,[(g(!0),y(be,null,Pe(O.value,k=>(g(),y("div",{key:k.id,class:Ue(["location-item",{"location-full":k.checkedInCount>=k.requiredMarshals,"location-missing":k.checkedInCount===0}]),onClick:C=>w.$emit("select-location",k)},[u("div",c1,[u("div",u1,[u("strong",null,E(k.name),1),(g(!0),y(be,null,Pe(k.areaIds||k.AreaIds||[],C=>(g(),y("span",{key:C,class:"area-badge",style:Qt({backgroundColor:x(C)})},E(T(C)),5))),128))]),u("span",d1,E(k.description),1),u("span",h1,E(k.checkedInCount)+"/"+E(k.requiredMarshals),1)]),u("div",f1,[(g(!0),y(be,null,Pe(k.assignments,C=>(g(),y("span",{key:C.id,class:Ue(["assignment-badge",{"checked-in":C.isCheckedIn}])},E(C.marshalName),3))),128))])],10,l1))),128))])]))}},m1=Ze(p1,[["__scopeId","data-v-6e64a151"]]),v1={class:"button-group"},g1={class:"areas-list"},_1=["onClick"],y1={class:"area-info"},b1={class:"area-header"},k1={key:0,class:"default-badge"},w1={key:0,class:"area-description"},C1={class:"area-stats"},L1={class:"stat-badge"},x1={class:"stat-badge"},A1={key:0,class:"empty-state"},E1={__name:"AreasList",props:{areas:{type:Array,required:!0},checkpoints:{type:Array,default:()=>[]}},emits:["add-area","select-area"],setup(e){const{terms:n,formatCount:i}=dt(),r=e,s=ne(()=>[...r.areas].sort((d,h)=>d.displayOrder!==h.displayOrder?d.displayOrder-h.displayOrder:dn(d.name,h.name))),a=d=>d.checkpointCount!==void 0?d.checkpointCount:r.checkpoints.filter(h=>h.areaId===d.id).length,l=d=>{if(!d.contacts)return 0;const h=typeof d.contacts=="string"?JSON.parse(d.contacts):d.contacts;return Array.isArray(h)?h.length:0};return(d,h)=>(g(),y("div",null,[u("h3",null,E(z(n).areas)+" ("+E(e.areas.length)+")",1),u("div",v1,[u("button",{onClick:h[0]||(h[0]=m=>d.$emit("add-area")),class:"btn btn-small btn-primary"}," Add "+E(z(n).area.toLowerCase()),1)]),u("div",g1,[(g(!0),y(be,null,Pe(s.value,m=>(g(),y("div",{key:m.id,class:"area-item",style:Qt({borderLeftColor:m.color||"#667eea"}),onClick:f=>d.$emit("select-area",m)},[u("div",y1,[u("div",b1,[u("strong",null,E(m.name),1),m.isDefault?(g(),y("span",k1,"Default")):B("",!0)]),m.description?(g(),y("p",w1,E(m.description),1)):B("",!0),u("div",C1,[u("span",L1,E(z(i)("checkpoint",a(m))),1),u("span",x1,E(l(m))+" contact"+E(l(m)===1?"":"s"),1)])])],12,_1))),128)),e.areas.length===0?(g(),y("div",A1,[u("p",null,"No "+E(z(n).areas.toLowerCase())+' yet. Click "Add '+E(z(n).area.toLowerCase())+'" to create one.',1)])):B("",!0)])]))}},T1=Ze(E1,[["__scopeId","data-v-1ef45bfd"]]),I1={course:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>',checkpoint:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',area:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',marshal:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',checklist:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>',details:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16h6"/></svg>',location:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>',map:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',contacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',eventContacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 8V6a2 2 0 0 0-2-2h-2"/><path d="M22 12v2a2 2 0 0 1-2 2h-2"/></svg>',event:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>'},pn=e=>I1[e]||"",S1={class:"responsive-tabs"},M1={class:"visible-tabs"},P1=["onClick"],$1=["innerHTML"],O1={class:"hamburger-only"},D1=["innerHTML"],R1={class:"hamburger-label"},N1=["onClick"],B1=["innerHTML"],F1={__name:"ResponsiveTabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,r=n,s=D(null),a=D(null),l=D(!1),d=D({}),h=ne(()=>i.tabs.find(A=>A.value===i.modelValue)),m=ne(()=>h.value?h.value.label:"Menu"),f=()=>{if(l.value=!l.value,l.value&&a.value){const A=a.value.getBoundingClientRect();d.value={top:`${A.bottom+4}px`}}},v=A=>{r("update:modelValue",A),l.value=!1},b=A=>{if(!s.value)return;const M=s.value.contains(A.target);l.value&&!M&&(l.value=!1)};return On(()=>{document.addEventListener("click",b)}),$s(()=>{document.removeEventListener("click",b)}),(A,M)=>(g(),y("div",S1,[u("div",M1,[(g(!0),y(be,null,Pe(e.tabs,$=>(g(),y("button",{key:$.value,class:Ue(["tab-button",{active:e.modelValue===$.value}]),onClick:O=>A.$emit("update:modelValue",$.value),type:"button"},[$.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:z(pn)($.icon)},null,8,$1)):B("",!0),Ve(" "+E($.label),1)],10,P1))),128))]),u("div",O1,[u("div",{class:"hamburger-menu",ref_key:"hamburgerMenu",ref:s},[u("button",{ref_key:"hamburgerButton",ref:a,class:Ue(["hamburger-button",{active:l.value}]),onClick:xt(f,["stop"]),type:"button"},[M[1]||(M[1]=u("span",{class:"hamburger-icon"},"",-1)),h.value?.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:z(pn)(h.value.icon)},null,8,D1)):B("",!0),u("span",R1,E(m.value),1)],2),l.value?(g(),y("div",{key:0,class:"hamburger-dropdown",style:Qt(d.value),onClick:M[0]||(M[0]=xt(()=>{},["stop"]))},[(g(!0),y(be,null,Pe(e.tabs,$=>(g(),y("button",{key:$.value,class:Ue(["dropdown-item",{active:e.modelValue===$.value}]),onClick:xt(O=>v($.value),["stop"]),type:"button"},[$.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:z(pn)($.icon)},null,8,B1)):B("",!0),Ve(" "+E($.label),1)],10,N1))),128))],4)):B("",!0)],512)])]))}},z1=Ze(F1,[["__scopeId","data-v-1710ea17"]]),U1={class:"share-link-container"},H1=["value"],V1={__name:"ShareLinkModal",props:{show:{type:Boolean,default:!1},link:{type:String,required:!0},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=n,r=D(!1),s=D(null),a=()=>{s.value&&(s.value.select(),document.execCommand("copy"),r.value=!0,setTimeout(()=>{r.value=!1},2e3))},l=()=>{i("close")};return(d,h)=>(g(),tt(Nt,{show:e.show,title:"Marshal check-in link",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:l},{actions:Ke(()=>[u("button",{onClick:l,class:"btn btn-secondary"},"Close")]),default:Ke(()=>[h[0]||(h[0]=u("p",{class:"instruction"},"Share this link with marshals so they can check in:",-1)),u("div",U1,[u("input",{value:e.link,readonly:"",class:"form-input",ref_key:"linkInput",ref:s},null,8,H1),u("button",{onClick:a,class:"btn btn-primary"},E(r.value?"Copied!":"Copy"),1)])]),_:1},8,["show","is-dirty"]))}},Z1=Ze(V1,[["__scopeId","data-v-e3c38c66"]]),q1={class:"success-content"},W1={class:"success-message"},j1={class:"link-section"},G1={class:"help-text"},K1={key:0,class:"loading-text"},Y1={key:1,class:"magic-link-container"},J1=["value"],X1={class:"magic-link-actions"},Q1=["disabled"],eL={key:0,class:"success-text"},tL={key:1,class:"error-text"},nL={key:2,class:"error-text"},sL={__name:"MarshalCreatedModal",props:{show:{type:Boolean,default:!1},eventId:{type:String,required:!0},marshalId:{type:String,default:null},marshalName:{type:String,default:""}},emits:["close"],setup(e,{emit:n}){const{terms:i}=dt(),r=e,s=n,a=D(""),l=D(!1),d=D(!1),h=D(""),m=D(!1),f=D(!1),v=D(!1),b=D(""),A=async()=>{if(!(!r.eventId||!r.marshalId)){d.value=!0,h.value="";try{const T=await Hn.getMagicLink(r.eventId,r.marshalId);a.value=T.data.magicLink,l.value=T.data.hasEmail}catch(T){console.error("Failed to fetch magic link:",T),h.value="Failed to load login link"}finally{d.value=!1}}},M=async()=>{try{await navigator.clipboard.writeText(a.value),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch(T){console.error("Failed to copy:",T)}},$=async()=>{if(!(!r.eventId||!r.marshalId)){f.value=!0,v.value=!1,b.value="";try{await Hn.sendMagicLink(r.eventId,r.marshalId),v.value=!0,setTimeout(()=>{v.value=!1},3e3)}catch(T){console.error("Failed to send email:",T),b.value=T.response?.data?.message||"Failed to send email"}finally{f.value=!1}}},O=()=>{s("close")};return We(()=>r.show,T=>{T&&r.marshalId?A():(a.value="",l.value=!1,h.value="",m.value=!1,v.value=!1,b.value="")},{immediate:!0}),(T,x)=>(g(),tt(Nt,{show:e.show,title:`${z(i).person} created`,size:"medium","confirm-on-close":!1,"is-dirty":!1,onClose:O},{actions:Ke(()=>[u("button",{onClick:O,class:"btn btn-primary"},"Done")]),default:Ke(()=>[u("div",q1,[x[2]||(x[2]=u("div",{class:"success-icon"},"",-1)),u("p",W1,[u("strong",null,E(e.marshalName),1),x[1]||(x[1]=Ve(" has been added successfully. ",-1))])]),u("div",j1,[x[3]||(x[3]=u("label",null,"Login Link",-1)),u("p",G1," Share this unique link with "+E(e.marshalName)+" so they can access their dashboard and check in. ",1),d.value?(g(),y("div",K1,"Loading link...")):a.value?(g(),y("div",Y1,[u("input",{type:"text",value:a.value,readonly:"",class:"form-input magic-link-input",onFocus:x[0]||(x[0]=w=>w.target.select())},null,40,J1),u("div",X1,[u("button",{type:"button",class:"btn btn-secondary",onClick:M},E(m.value?"Copied!":"Copy link"),1),l.value?(g(),y("button",{key:0,type:"button",class:"btn btn-primary",disabled:f.value,onClick:$},E(f.value?"Sending...":"Send via email"),9,Q1)):B("",!0)]),v.value?(g(),y("p",eL,"Email sent successfully!")):B("",!0),b.value?(g(),y("p",tL,E(b.value),1)):B("",!0)])):h.value?(g(),y("div",nL,E(h.value),1)):B("",!0)])]),_:1},8,["show","title"]))}},iL=Ze(sL,[["__scopeId","data-v-f28f1004"]]),oL={class:"form-group"},aL={__name:"AddAdminModal",props:{show:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=D("");We(()=>i.show,h=>{h||(s.value="")});const a=()=>{r("update:isDirty",!0)},l=()=>{r("submit",s.value)},d=()=>{r("close")};return(h,m)=>(g(),tt(Nt,{show:e.show,title:"Add event administrator",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:d},{actions:Ke(()=>[u("button",{type:"button",onClick:d,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary"}," Add administrator ")]),default:Ke(()=>[m[2]||(m[2]=u("p",{class:"instruction"},"Enter the email address of the administrator to add",-1)),u("form",{onSubmit:xt(l,["prevent"])},[u("div",oL,[m[1]||(m[1]=u("label",null,"Email address",-1)),$e(u("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>s.value=f),type:"email",required:"",class:"form-input",placeholder:"admin@example.com",onInput:a},null,544),[[st,s.value]])])],32)]),_:1},8,["show","is-dirty"]))}},rL=Ze(aL,[["__scopeId","data-v-43ad537f"]]),lL={class:"form-group"},cL={key:0,class:"error"},uL=["disabled"],dL={__name:"UploadRouteModal",props:{show:{type:Boolean,default:!1},uploading:{type:Boolean,default:!1},error:{type:String,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=D(null);We(()=>i.show,h=>{h||(s.value=null)});const a=h=>{s.value=h.target.files[0],r("update:isDirty",!0)},l=()=>{s.value&&r("submit",s.value)},d=()=>{r("close")};return(h,m)=>(g(),tt(Nt,{show:e.show,title:"Upload GPX route",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:d},{actions:Ke(()=>[u("button",{type:"button",onClick:d,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary",disabled:e.uploading},E(e.uploading?"Uploading...":"Upload route"),9,uL)]),default:Ke(()=>[m[1]||(m[1]=u("p",{class:"instruction"},"Upload a GPX file to display the event route on the map",-1)),u("form",{onSubmit:xt(l,["prevent"])},[u("div",lL,[m[0]||(m[0]=u("label",null,"GPX file",-1)),u("input",{type:"file",accept:".gpx",onChange:a,required:"",class:"form-input"},null,32)]),e.error?(g(),y("div",cL,E(e.error),1)):B("",!0)],32)]),_:1},8,["show","is-dirty"]))}},hL=Ze(dL,[["__scopeId","data-v-1c1d3033"]]),fL={class:"instruction"},pL={class:"form-group"},mL={class:"form-group"},vL={class:"checkbox-label"},gL={key:0,class:"error"},_L={key:1,class:"import-result"},yL={key:0,class:"import-errors"},bL=["disabled"],kL={__name:"ImportLocationsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D(null),d=D(!1);We(()=>s.show,b=>{b||(l.value=null,d.value=!1)});const h=b=>{l.value=b.target.files[0],a("update:isDirty",!0)},m=()=>{a("update:isDirty",!0)},f=()=>{l.value&&a("submit",{file:l.value,deleteExisting:d.value})},v=()=>{a("close")};return(b,A)=>(g(),tt(Nt,{show:e.show,title:`Import ${z(r).checkpoints} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:v},{actions:Ke(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary",disabled:e.importing},E(e.importing?"Importing...":`Import ${z(r).checkpoints}`),9,bL)]),default:Ke(()=>[u("p",fL,"Upload a CSV file with columns: Label, Lat/Latitude, Long/Longitude, What3Words (optional), "+E(z(i).people)+" (optional)",1),A[3]||(A[3]=u("div",{class:"csv-example"},[u("strong",null,"Example CSV format:"),u("pre",null,`Label,Latitude,Longitude,What3Words,Marshals
Checkpoint 1,51.505,-0.09,filled.count.soap,"John Doe, Jane Smith"
Checkpoint 2,51.510,-0.10,index.home.raft,Bob Wilson`)],-1)),u("form",{onSubmit:xt(f,["prevent"])},[u("div",pL,[A[1]||(A[1]=u("label",null,"CSV file",-1)),u("input",{type:"file",accept:".csv",onChange:h,required:"",class:"form-input"},null,32)]),u("div",mL,[u("label",vL,[$e(u("input",{type:"checkbox","onUpdate:modelValue":A[0]||(A[0]=M=>d.value=M),onChange:m},null,544),[[Ti,d.value]]),Ve(" Delete existing "+E(z(r).checkpoints)+" before import ",1)])]),e.error?(g(),y("div",gL,E(e.error),1)):B("",!0),e.result?(g(),y("div",_L,[u("p",null,"Created "+E(e.result.locationsCreated)+" "+E(z(r).checkpoints)+" and "+E(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(g(),y("div",yL,[A[2]||(A[2]=u("strong",null,"Errors:",-1)),u("ul",null,[(g(!0),y(be,null,Pe(e.result.errors,(M,$)=>(g(),y("li",{key:$},E(M),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},wL=Ze(kL,[["__scopeId","data-v-e0a01848"]]),CL={class:"instruction"},LL={class:"form-group"},xL={key:0,class:"error"},AL={key:1,class:"import-result"},EL={key:0,class:"import-errors"},TL=["disabled"],IL={__name:"ImportMarshalsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D(null);We(()=>s.show,f=>{f||(l.value=null)});const d=f=>{l.value=f.target.files[0],a("update:isDirty",!0)},h=()=>{l.value&&a("submit",l.value)},m=()=>{a("close")};return(f,v)=>(g(),tt(Nt,{show:e.show,title:`Import ${z(r).people} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:m},{actions:Ke(()=>[u("button",{type:"button",onClick:m,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:h,class:"btn btn-primary",disabled:e.importing},E(e.importing?"Importing...":`Import ${z(r).people}`),9,TL)]),default:Ke(()=>[u("p",CL,"Upload a CSV file with columns: Name, Email (optional), Phone (optional), "+E(z(i).checkpoint)+" (optional)",1),v[2]||(v[2]=u("div",{class:"csv-example"},[u("strong",null,"Example CSV format:"),u("pre",null,`Name,Email,Phone,Checkpoint
John Doe,john@example.com,555-1234,Checkpoint 1
Jane Smith,jane@example.com,555-5678,Checkpoint 2`)],-1)),u("form",{onSubmit:xt(h,["prevent"])},[u("div",LL,[v[0]||(v[0]=u("label",null,"CSV file",-1)),u("input",{type:"file",accept:".csv",onChange:d,required:"",class:"form-input"},null,32)]),e.error?(g(),y("div",xL,E(e.error),1)):B("",!0),e.result?(g(),y("div",AL,[u("p",null,"Imported "+E(e.result.marshalsCreated)+" "+E(z(r).people)+" and "+E(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(g(),y("div",EL,[v[1]||(v[1]=u("strong",null,"Errors:",-1)),u("ul",null,[(g(!0),y(be,null,Pe(e.result.errors,(b,A)=>(g(),y("li",{key:A},E(b),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},SL=Ze(IL,[["__scopeId","data-v-dcaed17c"]]),ML={key:0,class:"tabs"},PL=["onClick"],$L=["innerHTML"],OL=["innerHTML"],DL={class:"current-tab-label"},RL={key:0,class:"hamburger-menu"},NL=["onClick"],BL=["innerHTML"],FL=400,zL={__name:"TabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,r=n,s=D(null),a=D(null),l=D(!1),d=D(!1),h=ne(()=>{const $=i.tabs.find(O=>O.value===i.modelValue);return $?$.label:""}),m=ne(()=>i.tabs.find(O=>O.value===i.modelValue)?.icon||null),f=()=>{if(!s.value)return;const $=s.value.clientWidth,O=i.tabs.length*100;l.value=O>$||$<FL},v=()=>{d.value=!d.value},b=$=>{r("update:modelValue",$),d.value=!1},A=$=>{a.value&&!a.value.contains($.target)&&(d.value=!1)};let M=null;return On(()=>{Si(()=>{f(),s.value&&typeof ResizeObserver<"u"&&(M=new ResizeObserver(()=>{f()}),M.observe(s.value)),document.addEventListener("click",A)})}),$s(()=>{M&&M.disconnect(),document.removeEventListener("click",A)}),We(()=>i.tabs,()=>{Si(()=>{f()})},{deep:!0}),($,O)=>(g(),y("div",{class:"tabs-container",ref_key:"containerRef",ref:s},[l.value?(g(),y("div",{key:1,class:"hamburger-container",ref_key:"hamburgerRef",ref:a},[u("button",{class:"hamburger-button",onClick:v,type:"button","aria-label":"Tab menu"},[m.value?(g(),y("span",{key:0,class:"current-tab-icon",innerHTML:z(pn)(m.value)},null,8,OL)):B("",!0),u("span",DL,E(h.value),1),O[0]||(O[0]=u("span",{class:"hamburger-chevron"},"",-1))]),d.value?(g(),y("div",RL,[(g(!0),y(be,null,Pe(e.tabs,T=>(g(),y("button",{key:T.value,class:Ue(["menu-item",{active:e.modelValue===T.value}]),onClick:x=>b(T.value),type:"button"},[T.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:z(pn)(T.icon)},null,8,BL)):B("",!0),Ve(" "+E(T.label),1)],10,NL))),128))])):B("",!0)],512)):(g(),y("div",ML,[(g(!0),y(be,null,Pe(e.tabs,T=>(g(),y("button",{key:T.value,class:Ue(["tab-button",{active:e.modelValue===T.value}]),onClick:x=>$.$emit("update:modelValue",T.value),type:"button"},[T.icon?(g(),y("span",{key:0,class:"tab-icon",innerHTML:z(pn)(T.icon)},null,8,$L)):B("",!0),Ve(" "+E(T.label),1)],10,PL))),128))]))],512))}},rc=Ze(zL,[["__scopeId","data-v-5c12f1ab"]]),UL={class:"tab-content"},HL={class:"form-group"},VL=["value"],ZL={class:"form-group"},qL=["value"],WL={class:"form-group"},jL={class:"area-display"},GL={key:0,class:"no-area"},KL={class:"form-group"},YL={class:"checkbox-label"},JL=["checked"],XL={key:0,class:"custom-times-section"},QL={class:"form-group"},e0=["value"],t0={class:"form-group"},n0=["value"],s0={__name:"LocationDetailsTab",props:{form:{type:Object,required:!0},areas:{type:Array,default:()=>[]},eventDate:{type:String,default:""}},emits:["update:form","input","save"],setup(e,{emit:n}){const i=e,r=n,s=ne(()=>(i.form.areaIds||i.form.AreaIds||[]).map(h=>i.areas.find(m=>m.id===h)).filter(h=>h!==void 0)),a=(d,h)=>{r("update:form",{...i.form,[d]:h}),r("input")},l=d=>{const h={...i.form,useCustomTimes:d};if(!d)h.startTime="",h.endTime="";else if(!h.startTime&&!h.endTime&&i.eventDate){const m=Ya(i.eventDate);h.startTime=m,h.endTime=m}r("update:form",h),r("input")};return(d,h)=>(g(),y("div",UL,[u("form",{onSubmit:h[5]||(h[5]=xt(m=>d.$emit("save"),["prevent"]))},[u("div",HL,[h[6]||(h[6]=u("label",null,"Name",-1)),u("input",{value:e.form.name,onInput:h[0]||(h[0]=m=>a("name",m.target.value)),type:"text",required:"",class:"form-input"},null,40,VL)]),u("div",ZL,[h[7]||(h[7]=u("label",null,"Description (optional)",-1)),u("input",{value:e.form.description,onInput:h[1]||(h[1]=m=>a("description",m.target.value)),type:"text",class:"form-input"},null,40,qL)]),u("div",WL,[h[8]||(h[8]=u("label",null,"Area (auto-assigned by location)",-1)),u("div",jL,[s.value.length===0?(g(),y("span",GL," Not in any area polygon ")):B("",!0),(g(!0),y(be,null,Pe(s.value,m=>(g(),y("span",{key:m.id,class:"area-badge",style:Qt({backgroundColor:m.color||"#667eea"})},E(m.name),5))),128))]),h[9]||(h[9]=u("small",{class:"form-help"}," Areas are automatically assigned based on checkpoint location within area boundaries ",-1))]),u("div",KL,[u("label",YL,[u("input",{checked:e.form.useCustomTimes,onChange:h[2]||(h[2]=m=>l(m.target.checked)),type:"checkbox"},null,40,JL),h[10]||(h[10]=Ve(" Use custom date/time for this checkpoint ",-1))]),h[11]||(h[11]=u("small",{class:"form-help"}," By default, marshals are expected during the event date/time. Enable this to set a specific time range. ",-1))]),e.form.useCustomTimes?(g(),y("div",XL,[u("div",QL,[h[12]||(h[12]=u("label",null,"Start Date & Time (optional)",-1)),u("input",{value:e.form.startTime,onInput:h[3]||(h[3]=m=>a("startTime",m.target.value)),type:"datetime-local",class:"form-input"},null,40,e0),h[13]||(h[13]=u("small",{class:"form-help"}," When marshal should arrive at this checkpoint ",-1))]),u("div",t0,[h[14]||(h[14]=u("label",null,"End Date & Time (optional)",-1)),u("input",{value:e.form.endTime,onInput:h[4]||(h[4]=m=>a("endTime",m.target.value)),type:"datetime-local",class:"form-input"},null,40,n0),h[15]||(h[15]=u("small",{class:"form-help"}," When marshal can leave this checkpoint ",-1))])])):B("",!0)],32)]))}},i0=Ze(s0,[["__scopeId","data-v-60977929"]]),o0={class:"tab-content"},a0={class:"form-group"},r0=["value"],l0={key:0,class:"form-error"},c0={class:"form-row"},u0={class:"form-group"},d0=["value","disabled"],h0={class:"form-group"},f0=["value","disabled"],p0={class:"form-group"},m0={__name:"LocationCoordinatesTab",props:{form:{type:Object,required:!0},isMoving:{type:Boolean,default:!1}},emits:["update:form","input","save","move-location"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=m=>m==null||m===""?"":Number(m).toFixed(6),l=(m,f)=>{s("update:form",{...r.form,[m]:f}),s("input")},d=(m,f)=>{s("update:form",{...r.form,[m]:Number(f)}),s("input")},h=m=>{if(!m)return!0;const f=m.includes(".")?m.split("."):m.split("/");if(f.length!==3)return!1;const v=/^[a-z]{1,20}$/;return f.every(b=>v.test(b))};return(m,f)=>(g(),y("div",o0,[u("form",{onSubmit:f[4]||(f[4]=xt(v=>m.$emit("save"),["prevent"]))},[u("div",a0,[f[5]||(f[5]=u("label",null,"What3Words (optional)",-1)),u("input",{value:e.form.what3Words,onInput:f[0]||(f[0]=v=>l("what3Words",v.target.value)),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap"},null,40,r0),e.form.what3Words&&!h(e.form.what3Words)?(g(),y("small",l0," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),u("div",c0,[u("div",u0,[f[6]||(f[6]=u("label",null,"Longitude",-1)),u("input",{value:a(e.form.longitude),onInput:f[1]||(f[1]=v=>d("longitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., -0.091234"},null,40,d0)]),u("div",h0,[f[7]||(f[7]=u("label",null,"Latitude",-1)),u("input",{value:a(e.form.latitude),onInput:f[2]||(f[2]=v=>d("latitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., 51.505123"},null,40,f0)])]),u("div",p0,[u("button",{type:"button",onClick:f[3]||(f[3]=v=>m.$emit("move-location")),class:Ue(["btn btn-secondary btn-with-icon",{"btn-primary":e.isMoving}])},[f[8]||(f[8]=u("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),Ve(" "+E(e.isMoving?"Click on map to set new location...":`Move ${z(i).checkpoint}...`),1)],2)])],32)]))}},v0=Ze(m0,[["__scopeId","data-v-86bee5e5"]]);function lf(e){const n=D(new Map),i=f=>n.value.has(f.id)?n.value.get(f.id):f.isCheckedIn;return{pendingCheckInChanges:n,getEffectiveCheckInStatus:i,handleToggleCheckIn:f=>{const b=!i(f);b===f.isCheckedIn?n.value.delete(f.id):n.value.set(f.id,b),e&&e()},getStatusIcon:f=>i(f)?"":"",getStatusColor:f=>i(f)?"#28a745":"#dc3545",getStatusText:f=>i(f)?"Checked in":"Not checked in",formatTime:f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",clearPendingChanges:()=>{n.value.clear()},getPendingChanges:()=>Array.from(n.value.entries()).map(([f,v])=>({assignmentId:f,shouldBeCheckedIn:v}))}}const g0={class:"tab-content"},_0={class:"form-group"},y0=["value"],b0={class:"section-title"},k0={class:"assignments-list"},w0={class:"assignment-info"},C0={class:"assignment-header"},L0=["title"],x0={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},A0={key:2,class:"pending-badge"},E0={key:3,class:"pending-badge"},T0={key:0,class:"check-in-info"},I0={class:"check-in-method"},S0={class:"assignment-actions"},M0=["onClick"],P0=["onClick"],$0={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},O0={value:""},D0=["value"],R0={__name:"LocationAssignmentsTab",props:{form:{type:Object,required:!0},assignments:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]}},emits:["update:form","input","remove-assignment","assign-marshal"],setup(e,{expose:n,emit:i}){const{termsLower:r}=dt(),s=e,a=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:d,handleToggleCheckIn:h,getStatusIcon:m,getStatusColor:f,getStatusText:v,formatTime:b}=lf(()=>a("input")),A=D(""),M=ne(()=>s.assignments?.length||0),$=ne(()=>s.assignments?[...s.assignments].sort((w,P)=>{const k=w.marshalName?.toLowerCase()||"",C=P.marshalName?.toLowerCase()||"";return k.localeCompare(C)}):[]),O=ne(()=>{const w=[...s.availableMarshals];return w.sort((P,k)=>(P.name||"").localeCompare(k.name||"",void 0,{numeric:!0,sensitivity:"base"})),w}),T=()=>{A.value&&(a("assign-marshal",A.value),A.value="")},x=(w,P)=>{a("update:form",{...s.form,[w]:Number(P)}),a("input")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),A.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([w,P])=>({assignmentId:w,shouldBeCheckedIn:P}))}),(w,P)=>(g(),y("div",g0,[u("div",_0,[u("label",null,"Required "+E(z(r).people),1),u("input",{value:e.form.requiredMarshals,onInput:P[0]||(P[0]=k=>x("requiredMarshals",k.target.value)),type:"number",min:"1",required:"",class:"form-input"},null,40,y0)]),u("h3",b0,"Assigned "+E(z(r).people)+" ("+E(M.value)+")",1),u("div",k0,[(g(!0),y(be,null,Pe($.value,k=>(g(),y("div",{key:k.id,class:Ue(["assignment-item",{"checked-in":!k.isPending&&z(d)(k),"is-pending":k.isPending}])},[u("div",w0,[u("div",C0,[k.isPending?(g(),y("span",x0,"  ")):(g(),y("span",{key:0,class:"status-indicator",style:Qt({color:z(f)(k)}),title:z(v)(k)},E(z(m)(k)),13,L0)),u("strong",null,E(k.marshalName),1),k.isPending?(g(),y("span",A0," (will be assigned on save) ")):z(l).has(k.id)?(g(),y("span",E0," (unsaved) ")):B("",!0)]),!k.isPending&&z(d)(k)?(g(),y("span",T0,[k.isCheckedIn&&!z(l).has(k.id)?(g(),y(be,{key:0},[Ve(E(z(b)(k.checkInTime))+" ",1),u("span",I0,"("+E(k.checkInMethod)+")",1)],64)):(g(),y(be,{key:1},[Ve(" Will be checked in on save ")],64))])):B("",!0)]),u("div",S0,[k.isPending?B("",!0):(g(),y("button",{key:0,onClick:C=>z(h)(k),class:Ue(["btn btn-small",z(d)(k)?"btn-danger":"btn-secondary"])},E(z(d)(k)?"Undo":"Check in"),11,M0)),u("button",{onClick:C=>w.$emit("remove-assignment",k),class:"btn btn-small btn-danger"}," Remove ",8,P0)])],2))),128)),O.value.length>0?(g(),y("div",$0,[u("label",null,"Assign "+E(z(r).person),1),$e(u("select",{"onUpdate:modelValue":P[1]||(P[1]=k=>A.value=k),class:"form-input",onChange:T},[u("option",O0,"Select a "+E(z(r).person)+"...",1),(g(!0),y(be,null,Pe(O.value,k=>(g(),y("option",{key:k.id,value:k.id},E(k.name),9,D0))),128))],544),[[mn,A.value]])])):B("",!0)])]))}},N0=Ze(R0,[["__scopeId","data-v-2c486110"]]),B0={class:"checkpoint-checklist-view"},F0={key:0,class:"loading-state"},z0={key:1,class:"error-state"},U0={key:2,class:"empty-state"},H0={key:3,class:"empty-state"},V0={key:4,class:"checklist-items"},Z0={class:"item-checkbox"},q0=["checked","disabled","onChange"],W0={class:"item-content"},j0={class:"item-header"},G0={class:"item-text-wrapper"},K0={class:"item-text"},Y0={key:0,class:"item-context"},J0={class:"item-scope"},X0=["title"],Q0={key:0,class:"completion-info"},ex={key:0,class:"pending-text"},tx={class:"completion-text"},nx={class:"completion-time"},sx={key:1,class:"uncomplete-info"},ix={key:2,class:"disabled-reason"},ox={__name:"CheckpointChecklistView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const{terms:r,termsLower:s}=dt(),a=e,l=i,d=D([]),h=D(!1),m=D(null),f=D(new Map),v=ne(()=>a.assignments.length===0),b=ne(()=>d.value.map(k=>{const C=f.value.get(`${k.itemId}|||${k.completionContextId}`),I=C!==void 0?C.complete:k.isCompleted,Z=C!==void 0&&C.complete!==k.isCompleted;return{...k,localIsCompleted:I,isModified:Z}})),A=async()=>{if(!(!a.eventId||!a.locationId&&!a.areaId)){h.value=!0,m.value=null;try{const k=a.locationId?await Pt.getCheckpointChecklist(a.eventId,a.locationId):await Pt.getAreaChecklist(a.eventId,a.areaId);if(d.value=k.data||[],a.modelValue&&a.modelValue.length>0){const C=new Map;a.modelValue.forEach(I=>{C.set(`${I.itemId}|||${I.contextId}`,{complete:I.complete,contextType:I.contextType,contextId:I.contextId})}),f.value=C}}catch(k){console.error("Failed to load checklist:",k),m.value=k.response?.data?.message||"Failed to load checklist"}finally{h.value=!1}}},M=k=>{const C=k.contextOwnerMarshalId||(a.assignments.length>0?a.assignments[0].marshalId:null);if(!C)return;const I=`${k.itemId}|||${k.completionContextId}`,Z=f.value.get(I),V=Z!==void 0?Z.complete:k.isCompleted;f.value.set(I,{complete:!V,contextType:k.completionContextType,contextId:k.completionContextId,marshalId:C}),$()},$=()=>{const k=[];for(const[C,I]of f.value.entries()){const[Z,V]=C.split("|||"),ae=d.value.find(ge=>ge.itemId===Z&&ge.completionContextId===V);ae&&I.complete!==ae.isCompleted&&k.push({itemId:Z,complete:I.complete,contextType:I.contextType,contextId:I.contextId,marshalId:I.marshalId})}l("update:modelValue",k),l("change",k)};n({resetLocalState:()=>{if(f.value=new Map,a.modelValue&&a.modelValue.length>0){const k=new Map;a.modelValue.forEach(C=>{k.set(`${C.itemId}|||${C.contextId}`,{complete:C.complete,contextType:C.contextType,contextId:C.contextId,marshalId:C.marshalId})}),f.value=k}},loadChecklist:A});const T=k=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:`Your ${s.value.areas}`,EveryoneAtCheckpoints:`Your ${s.value.checkpoints}`,OnePerCheckpoint:`One per ${s.value.checkpoint}`,OnePerArea:`One per ${s.value.area}`,EveryAreaLead:`${r.value.area} lead`,OneLeadPerArea:`One lead per ${s.value.area}`})[k.matchedScope]||k.matchedScope,x=k=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to certain people",EveryoneInAreas:`This item is for everyone in certain ${s.value.areas}`,EveryoneAtCheckpoints:`This item is for everyone at certain ${s.value.checkpoints}`,OnePerCheckpoint:`One person at the ${s.value.checkpoint} needs to complete this`,OnePerArea:`One person in the ${s.value.area} needs to complete this`,EveryAreaLead:`This item is for ${s.value.area} leads only`,OneLeadPerArea:`One ${s.value.area} lead needs to complete this`})[k.matchedScope]||"",w=k=>{if(!k.completionContextType||!k.completionContextId)return null;if(k.completionContextType==="Checkpoint"){const C=a.locations.find(Z=>Z.id===k.completionContextId);if(!C)return null;const I=C.description?`${C.name} - ${C.description}`:C.name;return`at ${s.value.checkpoint} ${I}`}if(k.completionContextType==="Area"){const C=a.areas.find(I=>I.id===k.completionContextId);return C?`in ${s.value.area} ${C.name}`:null}return k.completionContextType==="Personal"?k.contextOwnerName?`for ${k.contextOwnerName}`:"assigned individually":null},P=k=>k?new Date(k).toLocaleString():"";return We(()=>[a.eventId,a.locationId,a.areaId],()=>{A()},{immediate:!0}),(k,C)=>(g(),y("div",B0,[h.value?(g(),y("div",F0," Loading checklist... ")):m.value?(g(),y("div",z0,[u("p",null,E(m.value),1),u("button",{onClick:A,class:"btn btn-secondary btn-small"}," Retry ")])):v.value?(g(),y("div",U0,[...C[0]||(C[0]=[u("p",null,"No marshals assigned to this checkpoint yet.",-1),u("p",{class:"help-text"},"Assign marshals to enable checklist completion.",-1)])])):d.value.length===0?(g(),y("div",H0,[...C[1]||(C[1]=[u("p",null,"No checklist items for this checkpoint.",-1)])])):(g(),y("div",V0,[(g(!0),y(be,null,Pe(b.value,I=>(g(),y("div",{key:`${I.itemId}-${I.completionContextId}`,class:Ue(["checklist-item",{"item-completed":I.localIsCompleted,"item-modified":I.isModified}])},[u("div",Z0,[u("input",{type:"checkbox",checked:I.localIsCompleted,disabled:!I.canBeCompletedByMe&&!I.localIsCompleted,onChange:Z=>M(I)},null,40,q0)]),u("div",W0,[u("div",j0,[u("div",G0,[u("div",K0,E(I.text),1),w(I)?(g(),y("div",Y0,E(w(I)),1)):B("",!0)]),u("div",J0,[u("span",{class:"scope-pill",title:x(I)},E(T(I)),9,X0)])]),I.localIsCompleted?(g(),y("div",Q0,[I.isModified&&!I.isCompleted?(g(),y("span",ex," Will be marked as completed (pending save) ")):(g(),y(be,{key:1},[u("span",tx," Completed by "+E(I.completedByActorName||"Unknown"),1),u("span",nx,E(P(I.completedAt)),1)],64))])):B("",!0),I.isModified&&I.isCompleted&&!I.localIsCompleted?(g(),y("div",sx,[...C[2]||(C[2]=[u("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!I.canBeCompletedByMe&&!I.localIsCompleted?(g(),y("div",ix," Already completed by someone else ")):B("",!0)])],2))),128))]))]))}},cf=Ze(ox,[["__scopeId","data-v-9dc97489"]]),ax={class:"notes-view"},rx={key:0,class:"loading-state"},lx={key:1,class:"error-state"},cx={key:2,class:"empty-state"},ux={key:3,class:"notes-list"},dx={class:"note-header"},hx={class:"note-title-row"},fx={key:0,class:"pin-icon",title:"Pinned"},px={class:"note-title"},mx={class:"note-meta"},vx={key:0,class:"category-badge"},gx={key:0,class:"note-content"},_x={class:"note-footer"},yx={class:"created-info"},bx={key:0,class:"scope-info"},kx={__name:"NotesView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},marshalId:{type:String,default:null},allNotes:{type:Array,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},showScope:{type:Boolean,default:!0}},setup(e,{expose:n}){const i=e,r=D([]),s=D(!1),a=D(null),l=ne(()=>i.marshalId?"No notes for this marshal.":i.areaId?"No notes for this area.":i.locationId?"No notes for this checkpoint.":"No notes available."),d=ne(()=>i.areaId?i.locations.filter(T=>T.areaIds&&T.areaIds.includes(i.areaId)):[]),h=ne(()=>d.value.map(T=>T.id)),m=ne(()=>{if(!i.areaId)return[];const T=new Set;return i.assignments.filter(x=>h.value.includes(x.locationId)).forEach(x=>T.add(x.marshalId)),Array.from(T)}),f=T=>i.assignments.filter(x=>x.marshalId===T).map(x=>x.locationId),v=T=>{const x=f(T),w=new Set;for(const P of x){const k=i.locations.find(C=>C.id===P);k?.areaIds&&k.areaIds.forEach(C=>w.add(C))}return Array.from(w)},b=(T,x)=>{if(!T.scopeConfigurations)return null;for(const w of T.scopeConfigurations){if(w.itemType==="Area"){if(x.type==="area"&&(w.ids.includes(x.areaId)||w.ids.includes("ALL_AREAS")))return{matched:!0,scope:w.scope==="EveryAreaLead"?"Area leads":"Area"};if(x.type==="checkpoint"){const k=i.locations.find(C=>C.id===x.locationId)?.areaIds||[];if(w.ids.includes("ALL_AREAS")||k.some(C=>w.ids.includes(C)))return{matched:!0,scope:w.scope==="EveryAreaLead"?"Area leads":"Area"}}}if(w.itemType==="Checkpoint"){if(x.type==="checkpoint"&&(w.ids.includes(x.locationId)||w.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint"};if(x.type==="area"&&x.checkpointIds.some(k=>w.ids.includes(k)||w.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint in area"}}if(w.itemType==="Marshal"){if(x.type==="marshal"&&(w.ids.includes(x.marshalId)||w.ids.includes("ALL_MARSHALS")))return{matched:!0,scope:"Marshal"};if(x.type==="checkpoint"){const P=i.assignments.filter(C=>C.locationId===x.locationId).map(C=>C.marshalId);if(w.ids.includes("ALL_MARSHALS")||P.some(C=>w.ids.includes(C)))return{matched:!0,scope:"Marshal at checkpoint"}}if(x.type==="area"&&(w.ids.includes("ALL_MARSHALS")||x.marshalIds.some(k=>w.ids.includes(k))))return{matched:!0,scope:"Marshal in area"}}if(x.type==="marshal"&&x.checkpointIds&&x.areaIds){if(w.itemType==="Checkpoint"&&(w.ids.includes("ALL_CHECKPOINTS")||x.checkpointIds.some(k=>w.ids.includes(k))))return{matched:!0,scope:"Assigned checkpoint"};if(w.itemType==="Area"&&(w.ids.includes("ALL_AREAS")||x.areaIds.some(k=>w.ids.includes(k))))return{matched:!0,scope:w.scope==="EveryAreaLead"?"Area lead":"Area"}}}return null},A=ne(()=>{let T=i.allNotes||r.value;if(!T||T.length===0)return[];if(i.areaId&&i.allNotes){const x={type:"area",areaId:i.areaId,checkpointIds:h.value,marshalIds:m.value},w=[],P=new Set;for(const k of T){if(P.has(k.noteId))continue;const C=b(k,x);C&&(P.add(k.noteId),w.push({...k,matchedScope:C.scope}))}return w}if(i.locationId&&i.allNotes){const x={type:"checkpoint",locationId:i.locationId},w=[],P=new Set;for(const k of T){if(P.has(k.noteId))continue;const C=b(k,x);C&&(P.add(k.noteId),w.push({...k,matchedScope:C.scope}))}return w}if(i.marshalId&&i.allNotes){const x=f(i.marshalId),w=v(i.marshalId),P={type:"marshal",marshalId:i.marshalId,checkpointIds:x,areaIds:w},k=[],C=new Set;for(const I of T){if(C.has(I.noteId))continue;const Z=b(I,P);Z&&(C.add(I.noteId),k.push({...I,matchedScope:Z.scope}))}return k}return T}),M=ne(()=>{const T={Urgent:0,High:1,Normal:2,Low:3};return[...A.value].sort((x,w)=>{if(x.isPinned!==w.isPinned)return x.isPinned?-1:1;const P=T[x.priority]??2,k=T[w.priority]??2;return P!==k?P-k:x.displayOrder!==w.displayOrder?x.displayOrder-w.displayOrder:new Date(w.createdAt)-new Date(x.createdAt)})}),$=async()=>{if(i.allNotes===null&&i.eventId){s.value=!0,a.value=null;try{let T;i.marshalId?T=await os.getMarshalNotes(i.eventId,i.marshalId):T=await os.getByEvent(i.eventId),r.value=T.data||[]}catch(T){console.error("Failed to load notes:",T),a.value=T.response?.data?.message||"Failed to load notes"}finally{s.value=!1}}};We(()=>[i.eventId,i.locationId,i.areaId,i.marshalId],()=>{i.allNotes===null&&$()},{immediate:!0});const O=T=>{if(!T)return"";const x=new Date(T),P=new Date-x,k=Math.floor(P/6e4),C=Math.floor(P/36e5),I=Math.floor(P/864e5);return k<1?"just now":k<60?`${k}m ago`:C<24?`${C}h ago`:I<7?`${I}d ago`:x.toLocaleDateString()};return n({loadNotes:$}),(T,x)=>(g(),y("div",ax,[s.value?(g(),y("div",rx," Loading notes... ")):a.value?(g(),y("div",lx,[u("p",null,E(a.value),1),u("button",{onClick:$,class:"btn btn-secondary btn-small"}," Retry ")])):A.value.length===0?(g(),y("div",cx,[u("p",null,E(l.value),1)])):(g(),y("div",ux,[(g(!0),y(be,null,Pe(M.value,w=>(g(),y("div",{key:w.noteId,class:Ue(["note-item",{pinned:w.isPinned}])},[u("div",dx,[u("div",hx,[w.isPinned?(g(),y("span",fx,"")):B("",!0),u("span",{class:Ue(["priority-indicator",(w.priority||"Normal").toLowerCase()])},null,2),u("strong",px,E(w.title),1)]),u("div",mx,[w.category?(g(),y("span",vx,E(w.category),1)):B("",!0),u("span",{class:Ue(["priority-badge",(w.priority||"Normal").toLowerCase()])},E(w.priority||"Normal"),3)])]),w.content?(g(),y("div",gx,E(w.content),1)):B("",!0),u("div",_x,[u("span",yx," Created by "+E(w.createdByName||"Unknown")+"  "+E(O(w.createdAt)),1),w.matchedScope&&e.showScope?(g(),y("span",bx,E(w.matchedScope),1)):B("",!0)])],2))),128))]))]))}},wr=Ze(kx,[["__scopeId","data-v-bd15ca42"]]),wx={class:"checklist-preview"},Cx={class:"preview-actions"},Lx={class:"preview-header"},xx={key:0,class:"add-item-form"},Ax=["placeholder"],Ex=["disabled"],Tx={key:1,class:"pending-items"},Ix={class:"item-content"},Sx={class:"item-header"},Mx={class:"item-text"},Px={class:"item-scope"},$x=["onClick"],Ox={key:2,class:"empty-state"},Dx={key:0,class:"help-text"},Rx={key:3,class:"checklist-items"},Nx={class:"item-content"},Bx={class:"item-header"},Fx={class:"item-text"},zx={class:"item-scope"},Ux=["title"],Hx={key:0,class:"item-context"},Vx={__name:"ChecklistPreviewForLocation",props:{allChecklistItems:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=D(!1),l=D(""),d=D([...r.modelValue]);We(()=>r.modelValue,T=>{d.value=[...T]},{deep:!0});const h=()=>{l.value.trim()&&(d.value.push({text:l.value.trim(),isNew:!0}),l.value="",a.value=!1,f())},m=T=>{d.value.splice(T,1),f()},f=()=>{s("update:modelValue",[...d.value]),s("change")},v=T=>{const x=T.scope,w=T.itemType,P=T.ids||[];return(x==="EveryoneAtCheckpoints"||x==="OnePerCheckpoint")&&w==="Checkpoint"?P.includes("ALL_CHECKPOINTS"):x==="OnePerCheckpoint"&&w==="Area"?P.includes("ALL_AREAS")?!0:P.some(k=>r.pendingAreaIds.includes(k)):(x==="EveryoneInAreas"||x==="OnePerArea"||x==="EveryAreaLead"||x==="OneLeadPerArea")&&w==="Area"?P.includes("ALL_AREAS")?!0:P.some(k=>r.pendingAreaIds.includes(k)):!1},b=ne(()=>r.allChecklistItems.filter(T=>T.scopeConfigurations&&T.scopeConfigurations.length>0?T.scopeConfigurations.some(x=>v(x)):!1)),A=T=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[T]||T,M=T=>{if(!T.scopeConfigurations||T.scopeConfigurations.length===0)return"Unknown";const x=T.scopeConfigurations.find(P=>v(P));if(!x)return A(T.scopeConfigurations[0].scope);const w=x.ids||[];return w.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:w.includes("ALL_AREAS")?`All ${i.value.areas}`:A(x.scope)},$=T=>{if(!T.scopeConfigurations||T.scopeConfigurations.length===0)return"";const x=T.scopeConfigurations.find(P=>v(P));return x&&{EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[x.scope]||""},O=T=>{if(!T.scopeConfigurations||T.scopeConfigurations.length===0)return null;const x=T.scopeConfigurations.find(k=>v(k));if(!x)return null;const w=x.itemType,P=x.ids||[];if(P.includes("ALL_CHECKPOINTS")||P.includes("ALL_AREAS"))return null;if(w==="Area"){const k=r.areas.filter(C=>P.includes(C.id)&&r.pendingAreaIds.includes(C.id)).map(C=>C.name);if(k.length>0)return`In: ${k.join(", ")}`}return null};return(T,x)=>(g(),y("div",wx,[u("div",Cx,[u("p",Lx,E(e.isEditing?`Add new ${z(i).checklist} for this ${z(i).checkpoint}:`:`${z(i).checklists} that will apply at this ${z(i).checkpoint}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:x[0]||(x[0]=w=>a.value=!a.value)},E(a.value?"Cancel":`+ Add ${z(i).checklist}`),1)]),a.value?(g(),y("div",xx,[$e(u("input",{"onUpdate:modelValue":x[1]||(x[1]=w=>l.value=w),type:"text",placeholder:`Enter ${z(i).checklist} text...`,class:"add-item-input",onKeyup:ph(h,["enter"])},null,40,Ax),[[st,l.value]]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,Ex)])):B("",!0),d.value.length>0?(g(),y("div",Tx,[(g(!0),y(be,null,Pe(d.value,(w,P)=>(g(),y("div",{key:`pending-${P}`,class:"checklist-item pending"},[x[3]||(x[3]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",Ix,[u("div",Sx,[u("div",Mx,E(w.text),1),u("div",Px,[x[2]||(x[2]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:k=>m(P),title:"Remove"},"  ",8,$x)])])])]))),128))])):B("",!0),!e.isEditing&&b.value.length===0&&d.value.length===0?(g(),y("div",Ox,[u("p",null,"No "+E(z(i).checklists)+" will apply based on the current "+E(z(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(g(),y("p",Dx," Assign "+E(z(i).areas)+" to see relevant "+E(z(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&b.value.length>0?(g(),y("div",Rx,[(g(!0),y(be,null,Pe(b.value,w=>(g(),y("div",{key:w.id,class:"checklist-item"},[x[4]||(x[4]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",Nx,[u("div",Bx,[u("div",Fx,E(w.text),1),u("div",zx,[u("span",{class:"scope-pill",title:$(w)},E(M(w)),9,Ux)])]),O(w)?(g(),y("div",Hx,E(O(w)),1)):B("",!0)])]))),128))])):B("",!0)]))}},Zx=Ze(Vx,[["__scopeId","data-v-b2164204"]]),qx={class:"notes-preview"},Wx={class:"preview-actions"},jx={class:"preview-header"},Gx={key:0,class:"add-item-form"},Kx={class:"add-form-fields"},Yx=["disabled"],Jx={key:1,class:"pending-items"},Xx={class:"note-header"},Qx={class:"note-title"},eA={class:"note-actions"},tA=["onClick"],nA={key:0,class:"note-content"},sA={key:2,class:"empty-state"},iA={key:0,class:"help-text"},oA={key:3,class:"notes-list"},aA={class:"note-header"},rA={class:"note-title"},lA=["title"],cA={key:0,class:"note-content"},uA={key:1,class:"note-context"},dA={__name:"NotesPreviewForLocation",props:{allNotes:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=D(!1),l=D(""),d=D(""),h=D([...r.modelValue]);We(()=>r.modelValue,x=>{h.value=[...x]},{deep:!0});const m=()=>{!l.value.trim()&&!d.value.trim()||(h.value.push({title:l.value.trim(),content:d.value.trim(),isNew:!0}),l.value="",d.value="",a.value=!1,v())},f=x=>{h.value.splice(x,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},b=x=>{const w=x.scope,P=x.itemType,k=x.ids||[];return w==="EveryoneAtCheckpoints"&&P==="Checkpoint"?k.includes("ALL_CHECKPOINTS"):w==="EveryoneInAreas"&&P==="Area"?k.includes("ALL_AREAS")?!0:k.some(C=>r.pendingAreaIds.includes(C)):!1},A=ne(()=>r.allNotes.filter(x=>x.scopeConfigurations&&x.scopeConfigurations.length>0?x.scopeConfigurations.some(w=>b(w)):!1)),M=x=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[x]||x,$=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"Unknown";const w=x.scopeConfigurations.find(k=>b(k));if(!w)return M(x.scopeConfigurations[0].scope);const P=w.ids||[];return P.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:P.includes("ALL_AREAS")?`All ${i.value.areas}`:M(w.scope)},O=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"";const w=x.scopeConfigurations.find(k=>b(k));return w&&{EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[w.scope]||""},T=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return null;const w=x.scopeConfigurations.find(C=>b(C));if(!w)return null;const P=w.itemType,k=w.ids||[];if(k.includes("ALL_CHECKPOINTS")||k.includes("ALL_AREAS"))return null;if(P==="Area"){const C=r.areas.filter(I=>k.includes(I.id)&&r.pendingAreaIds.includes(I.id)).map(I=>I.name);if(C.length>0)return`In: ${C.join(", ")}`}return null};return(x,w)=>(g(),y("div",qx,[u("div",Wx,[u("p",jx,E(e.isEditing?`Add new note for this ${z(i).checkpoint}:`:`Notes that will be visible at this ${z(i).checkpoint}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:w[0]||(w[0]=P=>a.value=!a.value)},E(a.value?"Cancel":"+ Add note"),1)]),a.value?(g(),y("div",Gx,[u("div",Kx,[$e(u("input",{"onUpdate:modelValue":w[1]||(w[1]=P=>l.value=P),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[st,l.value]]),$e(u("textarea",{"onUpdate:modelValue":w[2]||(w[2]=P=>d.value=P),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[st,d.value]])]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!d.value.trim(),onClick:m}," Add ",8,Yx)])):B("",!0),h.value.length>0?(g(),y("div",Jx,[(g(!0),y(be,null,Pe(h.value,(P,k)=>(g(),y("div",{key:`pending-${k}`,class:"note-item pending"},[u("div",Xx,[u("span",Qx,E(P.title||"Untitled"),1),u("div",eA,[w[3]||(w[3]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:C=>f(k),title:"Remove"},"  ",8,tA)])]),P.content?(g(),y("div",nA,E(P.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&A.value.length===0&&h.value.length===0?(g(),y("div",sA,[u("p",null,"No notes will apply based on the current "+E(z(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(g(),y("p",iA," Assign "+E(z(i).areas)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&A.value.length>0?(g(),y("div",oA,[(g(!0),y(be,null,Pe(A.value,P=>(g(),y("div",{key:P.id,class:"note-item"},[u("div",aA,[u("span",rA,E(P.title||"Untitled"),1),u("span",{class:"scope-pill",title:O(P)},E($(P)),9,lA)]),P.content?(g(),y("div",cA,E(P.content),1)):B("",!0),T(P)?(g(),y("div",uA,E(T(P)),1)):B("",!0)]))),128))])):B("",!0)]))}},hA=Ze(dA,[["__scopeId","data-v-30a436c2"]]),fA={class:"custom-footer"},pA={key:1},mA={__name:"EditLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:null},assignments:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventDate:{type:String,default:""},areas:{type:Array,default:()=>[]},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","move-location","toggle-check-in","remove-assignment","assign-marshal","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D("details"),d=D(!1),h=D(null),m=D(null),f=D([]),v=D([]),b=D([]),A=D({name:"",description:"",what3Words:"",latitude:0,longitude:0,requiredMarshals:1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:[]}),M=ne(()=>s.location&&s.location.id),$=ne(()=>M.value?`Edit ${r.value.checkpoint}: ${s.location?.name||""}`:`Add ${r.value.checkpoint}`),O=ne(()=>[{value:"details",label:"Details",icon:"details"},{value:"location",label:"Location",icon:"location"},{value:"marshals",label:i.value.people,icon:"marshal"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),T=ne(()=>O.value.findIndex(j=>j.value===l.value)),x=ne(()=>T.value===O.value.length-1),w=ne(()=>x.value?null:O.value[T.value+1]),P=ne(()=>x.value?`Create ${r.value.checkpoint}`:`Add ${w.value.label.toLowerCase()}...`);We(()=>s.location,j=>{if(j){let G="",se="";j.startTime&&(G=Ya(j.startTime)),j.endTime&&(se=Ya(j.endTime)),A.value={name:j.name||"",description:j.description||"",what3Words:j.what3Words||"",latitude:j.latitude||0,longitude:j.longitude||0,requiredMarshals:j.requiredMarshals||1,useCustomTimes:!!(j.startTime||j.endTime),startTime:G,endTime:se,areaIds:j.areaIds||j.AreaIds||[]}}},{immediate:!0,deep:!0}),We(()=>s.show,j=>{j&&(l.value="details",d.value=!1,f.value=[],v.value=[],b.value=[],M.value||(A.value={name:s.location?.name||"",description:s.location?.description||"",what3Words:s.location?.what3Words||"",latitude:s.location?.latitude||0,longitude:s.location?.longitude||0,requiredMarshals:s.location?.requiredMarshals||1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:s.location?.areaIds||[]}),h.value?.clearPendingChanges&&h.value.clearPendingChanges(),m.value?.resetLocalState&&m.value.resetLocalState())});const k=()=>{a("update:isDirty",!0)},C=()=>{d.value=!d.value,a("move-location",{isMoving:d.value,formData:{...A.value}})},I=j=>{f.value=j,k()},Z=()=>{M.value||x.value?V():l.value=w.value.value},V=()=>{const j={...A.value,startTime:A.value.useCustomTimes&&A.value.startTime?new Date(A.value.startTime).toISOString():null,endTime:A.value.useCustomTimes&&A.value.endTime?new Date(A.value.endTime).toISOString():null,checkInChanges:h.value?.getPendingChanges?.()||[],checklistChanges:f.value||[],pendingAssignments:s.assignments.filter(G=>G.isPending).map(G=>({marshalId:G.marshalId})),pendingNewChecklistItems:v.value,pendingNewNotes:b.value};a("save",j)},ae=()=>{s.location&&s.location.id&&a("delete",s.location.id)},ge=j=>{a("remove-assignment",j)},Te=j=>{a("assign-marshal",j)},fe=()=>{a("close")};return(j,G)=>(g(),tt(Nt,{show:e.show,title:$.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:fe},{"tab-header":Ke(()=>[De(rc,{modelValue:l.value,"onUpdate:modelValue":G[0]||(G[0]=se=>l.value=se),tabs:O.value},null,8,["modelValue","tabs"])]),footer:Ke(()=>[u("div",fA,[M.value?(g(),y("button",{key:0,type:"button",onClick:ae,class:"btn btn-danger"}," Delete "+E(z(r).checkpoint),1)):(g(),y("div",pA)),u("button",{type:"button",onClick:Z,class:"btn btn-primary"},E(M.value?"Save changes":P.value),1)])]),default:Ke(()=>[l.value==="details"?(g(),tt(i0,{key:0,form:A.value,areas:e.areas,"event-date":e.eventDate,"onUpdate:form":G[1]||(G[1]=se=>A.value=se),onInput:k,onSave:V},null,8,["form","areas","event-date"])):B("",!0),l.value==="location"?(g(),tt(v0,{key:1,form:A.value,"is-moving":d.value,"onUpdate:form":G[2]||(G[2]=se=>A.value=se),onInput:k,onSave:V,onMoveLocation:C},null,8,["form","is-moving"])):B("",!0),l.value==="marshals"?(g(),tt(N0,{key:2,ref_key:"assignmentsTabRef",ref:h,form:A.value,assignments:e.assignments,"available-marshals":e.availableMarshals,"onUpdate:form":G[3]||(G[3]=se=>A.value=se),onInput:k,onRemoveAssignment:ge,onAssignMarshal:Te},null,8,["form","assignments","available-marshals"])):B("",!0),l.value==="checklists"&&M.value?(g(),tt(cf,{key:3,ref_key:"checklistTabRef",ref:m,modelValue:f.value,"onUpdate:modelValue":G[4]||(G[4]=se=>f.value=se),"event-id":e.eventId,"location-id":e.location.id,locations:e.allLocations,areas:e.areas,assignments:e.assignments,onChange:I},null,8,["modelValue","event-id","location-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"?(g(),tt(Zx,{key:4,modelValue:v.value,"onUpdate:modelValue":G[5]||(G[5]=se=>v.value=se),"all-checklist-items":e.allChecklistItems,"pending-area-ids":A.value.areaIds,areas:e.areas,"is-editing":M.value,onChange:k},null,8,["modelValue","all-checklist-items","pending-area-ids","areas","is-editing"])):B("",!0),l.value==="notes"&&M.value?(g(),tt(wr,{key:5,"event-id":e.eventId,"location-id":e.location?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","location-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(g(),tt(hA,{key:6,modelValue:b.value,"onUpdate:modelValue":G[6]||(G[6]=se=>b.value=se),"all-notes":e.notes,"pending-area-ids":A.value.areaIds,areas:e.areas,"is-editing":M.value,onChange:k},null,8,["modelValue","all-notes","pending-area-ids","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},vA=Ze(mA,[["__scopeId","data-v-b2783ab5"]]),gA={class:"tab-content"},_A={class:"form-group"},yA=["value"],bA={class:"form-group"},kA=["value"],wA={class:"form-group"},CA=["value"],LA={class:"form-group"},xA=["value"],AA={key:0,class:"magic-link-section"},EA={key:0,class:"loading-text"},TA={key:1,class:"magic-link-container"},IA={class:"magic-link-row"},SA=["value"],MA={key:0,class:"magic-link-actions"},PA=["disabled"],$A={key:1,class:"success-text"},OA={key:2,class:"error-text"},DA={key:2,class:"error-text"},RA={__name:"MarshalDetailsTab",props:{form:{type:Object,required:!0},eventId:{type:String,default:null},marshalId:{type:String,default:null}},emits:["update:form","input"],setup(e,{emit:n}){const i=e,r=n,s=D(""),a=D(!1),l=D(!1),d=D(""),h=D(!1),m=D(!1),f=D(!1),v=D(""),b=(O,T)=>{r("update:form",{...i.form,[O]:T}),r("input")},A=async()=>{if(!(!i.eventId||!i.marshalId)){l.value=!0,d.value="";try{const O=await Hn.getMagicLink(i.eventId,i.marshalId);s.value=O.data.magicLink,a.value=O.data.hasEmail}catch(O){console.error("Failed to fetch magic link:",O),d.value="Failed to load login link"}finally{l.value=!1}}},M=async()=>{try{await navigator.clipboard.writeText(s.value),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(O){console.error("Failed to copy:",O)}},$=async()=>{if(!(!i.eventId||!i.marshalId)){m.value=!0,f.value=!1,v.value="";try{await Hn.sendMagicLink(i.eventId,i.marshalId),f.value=!0,setTimeout(()=>{f.value=!1},3e3)}catch(O){console.error("Failed to send email:",O),v.value=O.response?.data?.message||"Failed to send email"}finally{m.value=!1}}};return We(()=>i.marshalId,O=>{O?A():(s.value="",a.value=!1)},{immediate:!0}),(O,T)=>(g(),y("div",gA,[u("div",_A,[T[5]||(T[5]=u("label",null,"Name *",-1)),u("input",{value:e.form.name,onInput:T[0]||(T[0]=x=>b("name",x.target.value)),type:"text",required:"",class:"form-input"},null,40,yA)]),u("div",bA,[T[6]||(T[6]=u("label",null,"Email",-1)),u("input",{value:e.form.email,onInput:T[1]||(T[1]=x=>b("email",x.target.value)),type:"email",class:"form-input"},null,40,kA)]),u("div",wA,[T[7]||(T[7]=u("label",null,"Phone number",-1)),u("input",{value:e.form.phoneNumber,onInput:T[2]||(T[2]=x=>b("phoneNumber",x.target.value)),type:"tel",class:"form-input"},null,40,CA)]),u("div",LA,[T[8]||(T[8]=u("label",null,"Notes",-1)),u("textarea",{value:e.form.notes,onInput:T[3]||(T[3]=x=>b("notes",x.target.value)),class:"form-input",rows:"3",placeholder:"e.g., Needs to leave by 11am"},null,40,xA)]),e.marshalId?(g(),y("div",AA,[T[9]||(T[9]=u("label",null,"Login Link",-1)),T[10]||(T[10]=u("p",{class:"help-text"},"Share this unique link with the marshal so they can access their dashboard.",-1)),l.value?(g(),y("div",EA,"Loading link...")):s.value?(g(),y("div",TA,[u("div",IA,[u("input",{type:"text",value:s.value,readonly:"",class:"form-input magic-link-input",onFocus:T[4]||(T[4]=x=>x.target.select())},null,40,SA),u("button",{type:"button",class:"btn btn-secondary",onClick:M},E(h.value?"Copied!":"Copy link"),1)]),a.value?(g(),y("div",MA,[u("button",{type:"button",class:"btn btn-primary",disabled:m.value,onClick:$},E(m.value?"Sending...":"Send via email"),9,PA)])):B("",!0),f.value?(g(),y("p",$A,"Email sent successfully!")):B("",!0),v.value?(g(),y("p",OA,E(v.value),1)):B("",!0)])):d.value?(g(),y("div",DA,E(d.value),1)):B("",!0)])):B("",!0)]))}},NA=Ze(RA,[["__scopeId","data-v-3a8f4f1d"]]),BA={class:"tab-content"},FA={class:"section-title"},zA={class:"assignments-list"},UA={class:"assignment-info"},HA={class:"assignment-header"},VA=["title"],ZA={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},qA={key:2,class:"pending-badge"},WA={key:3,class:"pending-badge"},jA={key:0,class:"check-in-info"},GA={class:"check-in-method"},KA={class:"assignment-actions"},YA=["onClick"],JA=["onClick"],XA={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},QA={value:""},eE=["value"],tE={__name:"MarshalCheckpointsTab",props:{assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},isNewMarshal:{type:Boolean,default:!1}},emits:["input","remove-assignment","assign-to-location"],setup(e,{expose:n,emit:i}){const{termsLower:r}=dt(),s=e,a=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:d,handleToggleCheckIn:h,getStatusIcon:m,getStatusColor:f,getStatusText:v,formatTime:b}=lf(()=>a("input")),A=D(""),M=ne(()=>s.assignments?.length||0),$=ne(()=>{const T=[...s.availableLocations];return T.sort((x,w)=>x.name.localeCompare(w.name,void 0,{numeric:!0,sensitivity:"base"})),T}),O=()=>{A.value&&(a("assign-to-location",A.value),A.value="")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),A.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([T,x])=>({assignmentId:T,shouldBeCheckedIn:x}))}),(T,x)=>(g(),y("div",BA,[u("h3",FA,"Assigned "+E(z(r).checkpoints)+" ("+E(M.value)+")",1),u("div",zA,[(g(!0),y(be,null,Pe(e.assignments,w=>(g(),y("div",{key:w.id,class:Ue(["assignment-item",{"checked-in":!w.isPending&&z(d)(w),"is-pending":w.isPending}])},[u("div",UA,[u("div",HA,[w.isPending?(g(),y("span",ZA,"  ")):(g(),y("span",{key:0,class:"status-indicator",style:Qt({color:z(f)(w)}),title:z(v)(w)},E(z(m)(w)),13,VA)),u("strong",null,E(w.locationName),1),w.isPending?(g(),y("span",qA," (will be assigned on save) ")):z(l).has(w.id)?(g(),y("span",WA," (unsaved) ")):B("",!0)]),!w.isPending&&z(d)(w)?(g(),y("span",jA,[w.isCheckedIn&&!z(l).has(w.id)?(g(),y(be,{key:0},[Ve(E(z(b)(w.checkInTime))+" ",1),u("span",GA,"("+E(w.checkInMethod)+")",1)],64)):(g(),y(be,{key:1},[Ve(" Will be checked in on save ")],64))])):B("",!0)]),u("div",KA,[w.isPending?B("",!0):(g(),y("button",{key:0,onClick:P=>z(h)(w),class:Ue(["btn btn-small",z(d)(w)?"btn-danger":"btn-secondary"])},E(z(d)(w)?"Undo":"Check in"),11,YA)),u("button",{onClick:P=>T.$emit("remove-assignment",w),class:"btn btn-small btn-danger"}," Remove ",8,JA)])],2))),128)),$.value.length>0?(g(),y("div",XA,[u("label",null,"Assign to "+E(z(r).checkpoint),1),$e(u("select",{"onUpdate:modelValue":x[0]||(x[0]=w=>A.value=w),class:"form-input",onChange:O},[u("option",QA,"Select a "+E(z(r).checkpoint)+"...",1),(g(!0),y(be,null,Pe($.value,w=>(g(),y("option",{key:w.id,value:w.id},E(w.name),9,eE))),128))],544),[[mn,A.value]])])):B("",!0)])]))}},nE=Ze(tE,[["__scopeId","data-v-5b6e7012"]]),sE={class:"marshal-checklist-view"},iE={key:0,class:"loading-state"},oE={key:1,class:"error-state"},aE={key:2,class:"empty-state"},rE={key:3,class:"checklist-items"},lE={class:"item-checkbox"},cE=["checked","disabled","onChange"],uE={class:"item-content"},dE={class:"item-header"},hE={class:"item-text-wrapper"},fE={class:"item-text"},pE={key:0,class:"item-context"},mE={class:"item-scope"},vE=["title"],gE={key:0,class:"completion-info"},_E={key:0,class:"pending-text"},yE={class:"completion-text"},bE={class:"completion-time"},kE={key:1,class:"uncomplete-info"},wE={key:2,class:"disabled-reason"},CE={__name:"MarshalChecklistView",props:{eventId:{type:String,required:!0},marshalId:{type:String,required:!0},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const{terms:r,termsLower:s}=dt(),a=e,l=i,d=D([]),h=D(!1),m=D(null),f=D(new Map),v=ne(()=>d.value.map(k=>{const C=f.value.get(k.itemId),I=C!==void 0?C.complete:k.isCompleted,Z=C!==void 0&&C.complete!==k.isCompleted;return{...k,localIsCompleted:I,isModified:Z}})),b=async()=>{if(!(!a.eventId||!a.marshalId)){h.value=!0,m.value=null;try{const k=await Pt.getMarshalChecklist(a.eventId,a.marshalId);if(d.value=k.data||[],a.modelValue&&a.modelValue.length>0){const C=new Map;a.modelValue.forEach(I=>{C.set(I.itemId,{complete:I.complete,contextType:I.contextType,contextId:I.contextId})}),f.value=C}}catch(k){console.error("Failed to load checklist:",k),m.value=k.response?.data?.message||"Failed to load checklist"}finally{h.value=!1}}},A=k=>{const C=f.value.get(k.itemId),I=C!==void 0?C.complete:k.isCompleted;f.value.set(k.itemId,{complete:!I,contextType:k.completionContextType,contextId:k.completionContextId}),M()},M=()=>{const k=[];for(const[C,I]of f.value.entries()){const Z=d.value.find(V=>V.itemId===C);Z&&I.complete!==Z.isCompleted&&k.push({itemId:C,complete:I.complete,contextType:I.contextType,contextId:I.contextId})}l("update:modelValue",k),l("change",k)};n({resetLocalState:()=>{if(f.value=new Map,a.modelValue&&a.modelValue.length>0){const k=new Map;a.modelValue.forEach(C=>{k.set(C.itemId,{complete:C.complete,contextType:C.contextType,contextId:C.contextId})}),f.value=k}},loadChecklist:b});const O=k=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:`Your ${s.value.areas}`,EveryoneAtCheckpoints:`Your ${s.value.checkpoints}`,OnePerCheckpoint:`One per ${s.value.checkpoint}`,OnePerArea:`One per ${s.value.area}`,EveryAreaLead:`${r.value.area} lead`,OneLeadPerArea:`One lead per ${s.value.area}`})[k.matchedScope]||k.matchedScope,T=k=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to this person",EveryoneInAreas:`This item is for everyone in certain ${s.value.areas}`,EveryoneAtCheckpoints:`This item is for everyone at certain ${s.value.checkpoints}`,OnePerCheckpoint:`One person at the ${s.value.checkpoint} needs to complete this`,OnePerArea:`One person in the ${s.value.area} needs to complete this`,EveryAreaLead:`This item is for ${s.value.area} leads only`,OneLeadPerArea:`One ${s.value.area} lead needs to complete this`})[k.matchedScope]||"",x=k=>k.completionContextType==="Checkpoint"||k.completionContextType==="Area"?"Already completed by someone else":"Cannot be completed",w=k=>{if(!k.completionContextType||!k.completionContextId)return null;if(k.completionContextType==="Checkpoint"){const C=a.locations.find(Z=>Z.id===k.completionContextId);if(!C)return null;const I=C.description?`${C.name} - ${C.description}`:C.name;return`at ${s.value.checkpoint} ${I}`}if(k.completionContextType==="Area"){const C=a.areas.find(I=>I.id===k.completionContextId);return C?`in ${s.value.area} ${C.name}`:null}return k.completionContextType==="Personal"?k.contextOwnerName?`for ${k.contextOwnerName}`:"assigned individually":null},P=k=>k?new Date(k).toLocaleString():"";return We(()=>[a.eventId,a.marshalId],()=>{b()},{immediate:!0}),(k,C)=>(g(),y("div",sE,[h.value?(g(),y("div",iE," Loading checklist... ")):m.value?(g(),y("div",oE,[u("p",null,E(m.value),1),u("button",{onClick:b,class:"btn btn-secondary btn-small"}," Retry ")])):d.value.length===0?(g(),y("div",aE,[...C[0]||(C[0]=[u("p",null,"No checklist items for this person.",-1)])])):(g(),y("div",rE,[(g(!0),y(be,null,Pe(v.value,I=>(g(),y("div",{key:I.itemId,class:Ue(["checklist-item",{"item-completed":I.localIsCompleted,"item-modified":I.isModified}])},[u("div",lE,[u("input",{type:"checkbox",checked:I.localIsCompleted,disabled:!I.canBeCompletedByMe,onChange:Z=>A(I)},null,40,cE)]),u("div",uE,[u("div",dE,[u("div",hE,[u("div",fE,E(I.text),1),w(I)?(g(),y("div",pE,E(w(I)),1)):B("",!0)]),u("div",mE,[u("span",{class:"scope-pill",title:T(I)},E(O(I)),9,vE)])]),I.localIsCompleted?(g(),y("div",gE,[I.isModified&&!I.isCompleted?(g(),y("span",_E," Will be marked as completed (pending save) ")):(g(),y(be,{key:1},[u("span",yE," Completed by "+E(I.completedByActorName||"Unknown"),1),u("span",bE,E(P(I.completedAt)),1)],64))])):B("",!0),I.isModified&&I.isCompleted&&!I.localIsCompleted?(g(),y("div",kE,[...C[1]||(C[1]=[u("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!I.canBeCompletedByMe&&!I.localIsCompleted?(g(),y("div",wE,E(x(I)),1)):B("",!0)])],2))),128))]))]))}},LE=Ze(CE,[["__scopeId","data-v-73be4aeb"]]),xE={class:"checklist-preview"},AE={class:"preview-actions"},EE={class:"preview-header"},TE={key:0,class:"add-item-form"},IE=["placeholder"],SE=["disabled"],ME={key:1,class:"pending-items"},PE={class:"item-content"},$E={class:"item-header"},OE={class:"item-text"},DE={class:"item-scope"},RE=["onClick"],NE={key:2,class:"empty-state"},BE={key:0,class:"help-text"},FE={key:3,class:"checklist-items"},zE={class:"item-content"},UE={class:"item-header"},HE={class:"item-text"},VE={class:"item-scope"},ZE=["title"],qE={key:0,class:"item-context"},WE={__name:"ChecklistPreview",props:{allChecklistItems:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=D(!1),l=D(""),d=D([...r.modelValue]);We(()=>r.modelValue,x=>{d.value=[...x]},{deep:!0});const h=()=>{l.value.trim()&&(d.value.push({text:l.value.trim(),isNew:!0}),l.value="",a.value=!1,f())},m=x=>{d.value.splice(x,1),f()},f=()=>{s("update:modelValue",[...d.value]),s("change")},v=ne(()=>{const x=new Set;for(const w of r.pendingLocationIds){const P=r.allLocations.find(k=>k.id===w);P&&(P.areaIds||P.AreaIds||[]).forEach(C=>x.add(C))}return[...x]}),b=x=>{const w=x.scope,P=x.itemType,k=x.ids||[];return w==="SpecificPeople"&&P==="Marshal"?k.includes("ALL_MARSHALS"):(w==="EveryoneAtCheckpoints"||w==="OnePerCheckpoint")&&P==="Checkpoint"?k.includes("ALL_CHECKPOINTS")?!0:k.some(C=>r.pendingLocationIds.includes(C)):w==="OnePerCheckpoint"&&P==="Area"?k.includes("ALL_AREAS")?!0:k.some(C=>v.value.includes(C)):(w==="EveryoneInAreas"||w==="OnePerArea"||w==="EveryAreaLead"||w==="OneLeadPerArea")&&P==="Area"?k.includes("ALL_AREAS")?!0:k.some(C=>v.value.includes(C)):!1},A=ne(()=>r.allChecklistItems.filter(x=>x.scopeConfigurations&&x.scopeConfigurations.length>0?x.scopeConfigurations.some(w=>b(w)):!1)),M=x=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[x]||x,$=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"Unknown";const w=x.scopeConfigurations.find(k=>b(k));if(!w)return M(x.scopeConfigurations[0].scope);const P=w.ids||[];return P.includes("ALL_MARSHALS")?"Everyone":P.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:P.includes("ALL_AREAS")?`All ${i.value.areas}`:M(w.scope)},O=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return"";const w=x.scopeConfigurations.find(k=>b(k));return w&&{SpecificPeople:"This item is for everyone at the event",EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[w.scope]||""},T=x=>{if(!x.scopeConfigurations||x.scopeConfigurations.length===0)return null;const w=x.scopeConfigurations.find(C=>b(C));if(!w)return null;const P=w.itemType,k=w.ids||[];if(k.includes("ALL_MARSHALS")||k.includes("ALL_CHECKPOINTS")||k.includes("ALL_AREAS"))return null;if(P==="Checkpoint"){const C=r.allLocations.filter(I=>k.includes(I.id)&&r.pendingLocationIds.includes(I.id)).map(I=>I.name);if(C.length>0)return`At: ${C.join(", ")}`}if(P==="Area"){const C=r.areas.filter(I=>k.includes(I.id)&&v.value.includes(I.id)).map(I=>I.name);if(C.length>0)return`In: ${C.join(", ")}`}return null};return(x,w)=>(g(),y("div",xE,[u("div",AE,[u("p",EE,E(e.isEditing?`Add new ${z(i).checklist} for this ${z(i).person}:`:`${z(i).checklists} that will apply to this ${z(i).person}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:w[0]||(w[0]=P=>a.value=!a.value)},E(a.value?"Cancel":`+ Add ${z(i).checklist}`),1)]),a.value?(g(),y("div",TE,[$e(u("input",{"onUpdate:modelValue":w[1]||(w[1]=P=>l.value=P),type:"text",placeholder:`Enter ${z(i).checklist} text...`,class:"add-item-input",onKeyup:ph(h,["enter"])},null,40,IE),[[st,l.value]]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,SE)])):B("",!0),d.value.length>0?(g(),y("div",ME,[(g(!0),y(be,null,Pe(d.value,(P,k)=>(g(),y("div",{key:`pending-${k}`,class:"checklist-item pending"},[w[3]||(w[3]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",PE,[u("div",$E,[u("div",OE,E(P.text),1),u("div",DE,[w[2]||(w[2]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:C=>m(k),title:"Remove"},"  ",8,RE)])])])]))),128))])):B("",!0),!e.isEditing&&A.value.length===0&&d.value.length===0?(g(),y("div",NE,[u("p",null,"No "+E(z(i).checklists)+" will apply based on the current "+E(z(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(g(),y("p",BE," Assign "+E(z(i).checkpoints)+" to see relevant "+E(z(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&A.value.length>0?(g(),y("div",FE,[(g(!0),y(be,null,Pe(A.value,P=>(g(),y("div",{key:P.id,class:"checklist-item"},[w[4]||(w[4]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",zE,[u("div",UE,[u("div",HE,E(P.text),1),u("div",VE,[u("span",{class:"scope-pill",title:O(P)},E($(P)),9,ZE)])]),T(P)?(g(),y("div",qE,E(T(P)),1)):B("",!0)])]))),128))])):B("",!0)]))}},jE=Ze(WE,[["__scopeId","data-v-1c92d629"]]),GE={class:"notes-preview"},KE={class:"preview-actions"},YE={class:"preview-header"},JE={key:0,class:"add-item-form"},XE={class:"add-form-fields"},QE=["disabled"],eT={key:1,class:"pending-items"},tT={class:"note-header"},nT={class:"note-title"},sT={class:"note-actions"},iT=["onClick"],oT={key:0,class:"note-content"},aT={key:2,class:"empty-state"},rT={key:0,class:"help-text"},lT={key:3,class:"notes-list"},cT={class:"note-header"},uT={class:"note-title"},dT=["title"],hT={key:0,class:"note-content"},fT={key:1,class:"note-context"},pT={__name:"NotesPreview",props:{allNotes:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=D(!1),l=D(""),d=D(""),h=D([...r.modelValue]);We(()=>r.modelValue,w=>{h.value=[...w]},{deep:!0});const m=()=>{!l.value.trim()&&!d.value.trim()||(h.value.push({title:l.value.trim(),content:d.value.trim(),isNew:!0}),l.value="",d.value="",a.value=!1,v())},f=w=>{h.value.splice(w,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},b=ne(()=>{const w=new Set;for(const P of r.pendingLocationIds){const k=r.allLocations.find(C=>C.id===P);k&&(k.areaIds||k.AreaIds||[]).forEach(I=>w.add(I))}return[...w]}),A=w=>{const P=w.scope,k=w.itemType,C=w.ids||[];return P==="SpecificPeople"&&k==="Marshal"?C.includes("ALL_MARSHALS"):P==="EveryoneAtCheckpoints"&&k==="Checkpoint"?C.includes("ALL_CHECKPOINTS")?!0:C.some(I=>r.pendingLocationIds.includes(I)):P==="EveryoneInAreas"&&k==="Area"?C.includes("ALL_AREAS")?!0:C.some(I=>b.value.includes(I)):!1},M=ne(()=>r.allNotes.filter(w=>w.scopeConfigurations&&w.scopeConfigurations.length>0?w.scopeConfigurations.some(P=>A(P)):!1)),$=w=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[w]||w,O=w=>{if(!w.scopeConfigurations||w.scopeConfigurations.length===0)return"Unknown";const P=w.scopeConfigurations.find(C=>A(C));if(!P)return $(w.scopeConfigurations[0].scope);const k=P.ids||[];return k.includes("ALL_MARSHALS")?"Everyone":k.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:k.includes("ALL_AREAS")?`All ${i.value.areas}`:$(P.scope)},T=w=>{if(!w.scopeConfigurations||w.scopeConfigurations.length===0)return"";const P=w.scopeConfigurations.find(C=>A(C));return P&&{SpecificPeople:"This note is for everyone at the event",EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[P.scope]||""},x=w=>{if(!w.scopeConfigurations||w.scopeConfigurations.length===0)return null;const P=w.scopeConfigurations.find(I=>A(I));if(!P)return null;const k=P.itemType,C=P.ids||[];if(C.includes("ALL_MARSHALS")||C.includes("ALL_CHECKPOINTS")||C.includes("ALL_AREAS"))return null;if(k==="Checkpoint"){const I=r.allLocations.filter(Z=>C.includes(Z.id)&&r.pendingLocationIds.includes(Z.id)).map(Z=>Z.name);if(I.length>0)return`At: ${I.join(", ")}`}if(k==="Area"){const I=r.areas.filter(Z=>C.includes(Z.id)&&b.value.includes(Z.id)).map(Z=>Z.name);if(I.length>0)return`In: ${I.join(", ")}`}return null};return(w,P)=>(g(),y("div",GE,[u("div",KE,[u("p",YE,E(e.isEditing?`Add new note for this ${z(i).person}:`:`Notes that will be visible to this ${z(i).person}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:P[0]||(P[0]=k=>a.value=!a.value)},E(a.value?"Cancel":"+ Add note"),1)]),a.value?(g(),y("div",JE,[u("div",XE,[$e(u("input",{"onUpdate:modelValue":P[1]||(P[1]=k=>l.value=k),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[st,l.value]]),$e(u("textarea",{"onUpdate:modelValue":P[2]||(P[2]=k=>d.value=k),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[st,d.value]])]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!d.value.trim(),onClick:m}," Add ",8,QE)])):B("",!0),h.value.length>0?(g(),y("div",eT,[(g(!0),y(be,null,Pe(h.value,(k,C)=>(g(),y("div",{key:`pending-${C}`,class:"note-item pending"},[u("div",tT,[u("span",nT,E(k.title||"Untitled"),1),u("div",sT,[P[3]||(P[3]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:I=>f(C),title:"Remove"},"  ",8,iT)])]),k.content?(g(),y("div",oT,E(k.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&M.value.length===0&&h.value.length===0?(g(),y("div",aT,[u("p",null,"No notes will be visible based on the current "+E(z(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(g(),y("p",rT," Assign "+E(z(i).checkpoints)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&M.value.length>0?(g(),y("div",lT,[(g(!0),y(be,null,Pe(M.value,k=>(g(),y("div",{key:k.id,class:"note-item"},[u("div",cT,[u("span",uT,E(k.title||"Untitled"),1),u("span",{class:"scope-pill",title:T(k)},E(O(k)),9,dT)]),k.content?(g(),y("div",hT,E(k.content),1)):B("",!0),x(k)?(g(),y("div",fT,E(x(k)),1)):B("",!0)]))),128))])):B("",!0)]))}},mT=Ze(pT,[["__scopeId","data-v-dc8ac5e7"]]),vT={class:"custom-footer"},gT={key:1},_T={__name:"EditMarshalModal",props:{show:{type:Boolean,default:!1},marshal:{type:Object,default:null},eventId:{type:String,required:!0},assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},eventNotes:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","toggle-check-in","remove-assignment","assign-to-location","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D("details"),d=D(null),h=D(null),m=D([]),f=D([]),v=D([]),b=D([]),A=D({name:"",email:"",phoneNumber:"",notes:""}),M=ne(()=>{const G=s.isEditing?`Edit ${r.value.person}`:`Create ${r.value.person}`,se=A.value.name?.trim();return se?`${G} - ${se}`:G}),$=ne(()=>[{value:"details",label:"Details",icon:"details"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),O=ne(()=>$.value.findIndex(G=>G.value===l.value)),T=ne(()=>O.value===$.value.length-1),x=ne(()=>T.value?null:$.value[O.value+1]),w=ne(()=>T.value?`Create ${r.value.person}`:`Add ${x.value.label.toLowerCase()}...`),P=ne(()=>f.value.map(G=>G.locationId)),k=ne(()=>s.isEditing?s.assignments:f.value.map(G=>({id:`pending-${G.locationId}`,locationId:G.locationId,locationName:s.allLocations.find(se=>se.id===G.locationId)?.name||"Unknown",isPending:!0}))),C=ne(()=>{if(s.isEditing)return s.availableLocations;const G=f.value.map(se=>se.locationId);return s.allLocations.filter(se=>!G.includes(se.id))});We(()=>s.marshal,G=>{G?A.value={name:G.name||"",email:G.email||"",phoneNumber:G.phoneNumber||"",notes:G.notes||""}:A.value={name:"",email:"",phoneNumber:"",notes:""}},{immediate:!0,deep:!0}),We(()=>s.show,G=>{G&&(l.value="details",m.value=[],f.value=[],v.value=[],b.value=[],s.isEditing||(A.value={name:"",email:"",phoneNumber:"",notes:""}),d.value?.clearPendingChanges&&d.value.clearPendingChanges(),h.value?.resetLocalState&&h.value.resetLocalState())});const I=()=>{a("update:isDirty",!0)},Z=()=>{a("update:isDirty",!0)},V=()=>{s.isEditing||T.value?ae():l.value=x.value.value},ae=()=>{const G={...A.value,checkInChanges:d.value?.getPendingChanges?.()||[],checklistChanges:m.value||[],pendingAssignments:s.isEditing?[]:f.value,pendingNewChecklistItems:v.value,pendingNewNotes:b.value};a("save",G)},ge=()=>{a("delete")},Te=G=>{!s.isEditing&&G.isPending?f.value=f.value.filter(se=>se.locationId!==G.locationId):a("remove-assignment",G)},fe=G=>{s.isEditing?a("assign-to-location",G):(f.value.push({locationId:G}),a("update:isDirty",!0))},j=()=>{a("close")};return(G,se)=>(g(),tt(Nt,{show:e.show,title:M.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:j},{"tab-header":Ke(()=>[De(rc,{modelValue:l.value,"onUpdate:modelValue":se[0]||(se[0]=Ee=>l.value=Ee),tabs:$.value},null,8,["modelValue","tabs"])]),footer:Ke(()=>[u("div",vT,[e.isEditing?(g(),y("button",{key:0,type:"button",onClick:ge,class:"btn btn-danger"}," Delete "+E(z(r).person),1)):(g(),y("div",gT)),u("button",{type:"button",onClick:V,class:"btn btn-primary"},E(e.isEditing?"Save changes":w.value),1)])]),default:Ke(()=>[l.value==="details"?(g(),tt(NA,{key:0,form:A.value,"event-id":e.eventId,"marshal-id":e.isEditing?e.marshal?.id:null,"onUpdate:form":se[1]||(se[1]=Ee=>A.value=Ee),onInput:I},null,8,["form","event-id","marshal-id"])):B("",!0),l.value==="checkpoints"?(g(),tt(nE,{key:1,ref_key:"checkpointsTabRef",ref:d,assignments:k.value,"available-locations":C.value,"is-new-marshal":!e.isEditing,onInput:I,onRemoveAssignment:Te,onAssignToLocation:fe},null,8,["assignments","available-locations","is-new-marshal"])):B("",!0),l.value==="checklists"&&e.isEditing?(g(),tt(LE,{key:2,ref_key:"checklistTabRef",ref:h,modelValue:m.value,"onUpdate:modelValue":se[2]||(se[2]=Ee=>m.value=Ee),"event-id":e.eventId,"marshal-id":e.marshal.id,locations:e.allLocations,areas:e.areas,onChange:Z},null,8,["modelValue","event-id","marshal-id","locations","areas"])):B("",!0),l.value==="checklists"?(g(),tt(jE,{key:3,modelValue:v.value,"onUpdate:modelValue":se[3]||(se[3]=Ee=>v.value=Ee),"all-checklist-items":e.allChecklistItems,"pending-location-ids":P.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:I},null,8,["modelValue","all-checklist-items","pending-location-ids","all-locations","areas","is-editing"])):B("",!0),l.value==="notes"&&e.isEditing?(g(),tt(wr,{key:4,"event-id":e.eventId,"marshal-id":e.marshal?.id,"all-notes":e.eventNotes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","marshal-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(g(),tt(mT,{key:5,modelValue:b.value,"onUpdate:modelValue":se[4]||(se[4]=Ee=>b.value=Ee),"all-notes":e.eventNotes,"pending-location-ids":P.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:I},null,8,["modelValue","all-notes","pending-location-ids","all-locations","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},yT=Ze(_T,[["__scopeId","data-v-3cd98423"]]),bT={class:"locations-list"},kT={class:"conflict-actions"},wT={__name:"AssignmentConflictModal",props:{show:{type:Boolean,default:!1},conflictData:{type:Object,default:()=>({marshalName:"",locations:[]})}},emits:["close","choice"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=n,a=d=>{s("choice",d)},l=()=>{s("close")};return(d,h)=>(g(),tt(Nt,{show:e.show,title:`${z(i).person} already assigned`,size:"medium","z-index":1100,onClose:l},{actions:Ke(()=>[u("div",kT,[u("button",{onClick:h[0]||(h[0]=m=>a("move")),class:"btn btn-primary btn-full"}," Move to this "+E(z(r).checkpoint)+" (remove from others) ",1),u("button",{onClick:h[1]||(h[1]=m=>a("both")),class:"btn btn-secondary btn-full"}," Assign to both (keep existing assignments) "),u("button",{onClick:h[2]||(h[2]=m=>a("choose-other")),class:"btn btn-secondary btn-full"}," Choose someone else "),u("button",{onClick:h[3]||(h[3]=m=>a("cancel")),class:"btn btn-secondary btn-full"}," Cancel ")])]),default:Ke(()=>[u("p",null,[u("strong",null,E(e.conflictData.marshalName),1),h[4]||(h[4]=Ve(" is currently assigned to: ",-1))]),u("ul",bT,[(g(!0),y(be,null,Pe(e.conflictData.locations,m=>(g(),y("li",{key:m},E(m),1))),128))]),h[5]||(h[5]=u("p",null,"What would you like to do?",-1))]),_:1},8,["show","title"]))}},CT=Ze(wT,[["__scopeId","data-v-b64e5b37"]]),LT={key:0,class:"assign-marshal-section"},xT={value:""},AT=["value"],ET=["disabled"],TT={key:1,class:"assign-marshal-section create-mode"},IT={class:"form-group"},ST={class:"form-group"},MT={class:"form-group"},PT={__name:"AssignMarshalModal",props:{show:{type:Boolean,default:!1},locationName:{type:String,default:""},marshals:{type:Array,default:()=>[]}},emits:["close","assign-existing","create-and-assign"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=D(!1),l=D(""),d=D({name:"",email:"",phoneNumber:""});We(()=>r.show,A=>{A||(a.value=!1,l.value="",d.value={name:"",email:"",phoneNumber:""})});const h=()=>{a.value=!0},m=()=>{l.value&&s("assign-existing",l.value)},f=()=>{d.value.name&&s("create-and-assign",{...d.value})},v=()=>{a.value=!1,d.value={name:"",email:"",phoneNumber:""}},b=()=>{s("close")};return(A,M)=>(g(),tt(Nt,{show:e.show,title:a.value?`Create new ${z(i).person}`:`Assign ${z(i).person} to ${e.locationName}`,size:"medium",onClose:b},{actions:Ke(()=>[a.value?(g(),y(be,{key:0},[u("button",{onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{onClick:f,class:"btn btn-primary"}," Create & assign ")],64)):B("",!0)]),default:Ke(()=>[a.value?(g(),y("div",TT,[u("h3",null,"Create new "+E(z(i).person),1),u("div",IT,[M[5]||(M[5]=u("label",null,"Name *",-1)),$e(u("input",{"onUpdate:modelValue":M[1]||(M[1]=$=>d.value.name=$),type:"text",required:"",class:"form-input"},null,512),[[st,d.value.name]])]),u("div",ST,[M[6]||(M[6]=u("label",null,"Email",-1)),$e(u("input",{"onUpdate:modelValue":M[2]||(M[2]=$=>d.value.email=$),type:"email",class:"form-input"},null,512),[[st,d.value.email]])]),u("div",MT,[M[7]||(M[7]=u("label",null,"Phone",-1)),$e(u("input",{"onUpdate:modelValue":M[3]||(M[3]=$=>d.value.phoneNumber=$),type:"tel",class:"form-input"},null,512),[[st,d.value.phoneNumber]])])])):(g(),y("div",LT,[u("h3",null,"Select existing "+E(z(i).person),1),$e(u("select",{"onUpdate:modelValue":M[0]||(M[0]=$=>l.value=$),class:"form-input"},[u("option",xT,"Choose a "+E(z(i).person)+"...",1),(g(!0),y(be,null,Pe(e.marshals,$=>(g(),y("option",{key:$.id,value:$.id},[Ve(E($.name)+" ",1),$.assignedLocationIds&&$.assignedLocationIds.length>0?(g(),y(be,{key:0},[Ve(" (assigned to "+E($.assignedLocationIds.length)+" "+E($.assignedLocationIds.length>1?z(i).checkpoints:z(i).checkpoint)+") ",1)],64)):B("",!0)],8,AT))),128))],512),[[mn,l.value]]),u("button",{onClick:m,class:"btn btn-primary btn-full",style:{"margin-top":"1rem"},disabled:!l.value}," Assign selected "+E(z(i).person),9,ET),M[4]||(M[4]=u("div",{class:"divider"},"OR",-1)),u("button",{onClick:h,class:"btn btn-secondary btn-full"}," Create new "+E(z(i).person),1)]))]),_:1},8,["show","title"]))}},$T=Ze(PT,[["__scopeId","data-v-f95e76a2"]]),OT={class:"shift-times-content"},DT={class:"info-text"},RT={class:"time-delta-info"},NT={class:"delta-detail"},BT={class:"delta-detail"},FT={class:"delta-summary"},zT={class:"affected-checkpoints"},UT={class:"option-selection"},HT={class:"radio-option"},VT={class:"radio-option"},ZT={__name:"ShiftCheckpointTimesModal",props:{show:{type:Boolean,default:!1},oldEventDate:{type:String,required:!0},newEventDate:{type:String,required:!0},affectedCheckpointsCount:{type:Number,default:0}},emits:["confirm","cancel"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D("shift"),d=ne(()=>{const b=new Date(s.oldEventDate);return new Date(s.newEventDate)-b}),h=b=>new Date(b).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=b=>{const A=Math.abs(b),M=b>=0?"+":"-",$=Math.floor(A/(1e3*60*60*24)),O=Math.floor(A%(1e3*60*60*24)/(1e3*60*60)),T=Math.floor(A%(1e3*60*60)/(1e3*60)),x=[];return $>0&&x.push(`${$}d`),O>0&&x.push(`${O}h`),T>0&&x.push(`${T}m`),`${M}${x.join(" ")}`},f=()=>{a("confirm",{shouldShift:l.value==="shift",timeDelta:d.value})},v=()=>{a("cancel")};return(b,A)=>(g(),tt(Nt,{show:e.show,title:`Shift ${z(i).checkpoint} Times?`,size:"medium",onClose:v},{actions:Ke(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary"},E(l.value==="shift"?"Shift Times":"Keep Times"),1)]),default:Ke(()=>[u("div",OT,[u("p",DT," You've changed the event date/time. Some "+E(z(r).checkpoints)+" have custom times set. ",1),u("div",RT,[A[2]||(A[2]=u("strong",null,"Event time change:",-1)),u("div",NT," Old: "+E(h(e.oldEventDate)),1),u("div",BT," New: "+E(h(e.newEventDate)),1),u("div",FT," Delta: "+E(m(d.value)),1)]),u("p",zT,[u("strong",null,E(e.affectedCheckpointsCount)+" "+E(e.affectedCheckpointsCount===1?z(r).checkpoint:z(r).checkpoints),1),A[3]||(A[3]=Ve(" with custom times will be shifted by the same amount. ",-1))]),u("div",UT,[u("label",HT,[$e(u("input",{"onUpdate:modelValue":A[0]||(A[0]=M=>l.value=M),type:"radio",value:"shift",name:"shift-option"},null,512),[[fu,l.value]]),u("div",null,[u("strong",null,"Shift all "+E(z(r).checkpoint)+" times",1),A[4]||(A[4]=u("small",null,"Recommended: Maintains relative timing",-1))])]),u("label",VT,[$e(u("input",{"onUpdate:modelValue":A[1]||(A[1]=M=>l.value=M),type:"radio",value:"keep",name:"shift-option"},null,512),[[fu,l.value]]),u("div",null,[u("strong",null,"Keep "+E(z(r).checkpoint)+" times unchanged",1),u("small",null,E(z(i).checkpoint)+" times will stay at their current values",1)])])])])]),_:1},8,["show","title"]))}},qT=Ze(ZT,[["__scopeId","data-v-0e706cff"]]),uf=[{name:"Charcoal",hex:"#2d3748"},{name:"Dark Gray",hex:"#4a5568"},{name:"Gray",hex:"#718096"},{name:"Red",hex:"#f56565"},{name:"Coral",hex:"#ff6b6b"},{name:"Rose",hex:"#fb7185"},{name:"Pink",hex:"#ed64a6"},{name:"Magenta",hex:"#d946ef"},{name:"Fuchsia",hex:"#e879f9"},{name:"Purple",hex:"#9f7aea"},{name:"Violet",hex:"#a78bfa"},{name:"Lavender",hex:"#b197fc"},{name:"Indigo",hex:"#5a67d8"},{name:"Navy",hex:"#4263eb"},{name:"Blue",hex:"#667eea"},{name:"Sky",hex:"#0ea5e9"},{name:"Cyan",hex:"#0bc5ea"},{name:"Aqua",hex:"#22d3ee"},{name:"Teal",hex:"#38b2ac"},{name:"Emerald",hex:"#10b981"},{name:"Green",hex:"#48bb78"},{name:"Mint",hex:"#51cf66"},{name:"Lime",hex:"#84cc16"},{name:"Olive",hex:"#a3b18a"},{name:"Yellow",hex:"#ecc94b"},{name:"Amber",hex:"#f59e0b"},{name:"Orange",hex:"#ed8936"},{name:"Peach",hex:"#ff922b"},{name:"Light Gray",hex:"#cbd5e0"},{name:"Silver",hex:"#e2e8f0"},{name:"Cream",hex:"#f7fafc"}],Dl="#667eea";function Qu(e){const n=e.map(r=>r.color);return uf.find(r=>!n.includes(r.hex))?.hex||Dl}const WT={key:0,class:"tab-content"},jT={class:"form-group"},GT=["disabled"],KT={class:"form-group"},YT={class:"form-group"},JT={class:"color-picker"},XT=["title","onClick"],QT={key:1,class:"tab-content"},eI={class:"boundary-section"},tI={class:"boundary-actions"},nI={key:2,class:"tab-content"},sI={class:"section-title"},iI={class:"contacts-actions"},oI={key:0,class:"area-contacts-list"},aI=["onClick"],rI={class:"contact-info"},lI={key:0,class:"contact-role-badge"},cI={key:1,class:"contact-details"},uI={key:0},dI={key:1},hI={key:3,class:"tab-content"},fI={class:"section-title"},pI={key:0,class:"empty-state"},mI={key:1,class:"checkpoints-list"},vI=["onClick"],gI={class:"checkpoint-header"},_I={class:"checkpoint-name-section"},yI={key:0,class:"checkpoint-description"},bI={class:"checkpoint-stats"},kI={class:"checkpoint-details"},wI={class:"detail-row"},CI={class:"detail-label"},LI={class:"detail-value"},xI={key:0,class:"warning-text"},AI={class:"detail-row"},EI={class:"detail-value"},TI={key:0,class:"detail-row"},II={key:1,class:"detail-row"},SI={key:4,class:"placeholder-message"},MI={key:6,class:"placeholder-message"},PI={key:8,class:"placeholder-message"},$I={class:"custom-footer"},OI={key:1},DI={__name:"EditAreaModal",props:{show:{type:Boolean,default:!1},area:{type:Object,default:null},checkpoints:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]}},emits:["close","save","delete","draw-boundary","update:isDirty","select-checkpoint","add-area-contact","edit-contact"],setup(e,{emit:n}){const{terms:i,termsLower:r}=dt(),s=e,a=n,l=D("details"),d=D(null),h=D([]),m=D({}),f=D({}),v=D({name:"",description:"",color:Dl,displayOrder:0,isDefault:!1,polygon:[]}),b=ne(()=>s.area&&s.area.id),A=ne(()=>[{value:"details",label:"Details",icon:"details"},{value:"boundary",label:"Boundary",icon:"area"},{value:"contacts",label:"Contacts",icon:"marshal"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),M=ne(()=>A.value.findIndex(ve=>ve.value===l.value)),$=ne(()=>M.value===A.value.length-1),O=ne(()=>$.value?null:A.value[M.value+1]),T=ne(()=>$.value?`Create ${r.value.area}`:`Add ${O.value.label.toLowerCase()}...`),x=ne(()=>{if(!s.area||!s.area.id)return[];const ve=s.checkpoints.filter(le=>le.areaIds&&le.areaIds.includes(s.area.id)).map(le=>le.id);return s.assignments.filter(le=>ve.includes(le.locationId))}),w=ne(()=>!s.area||!s.area.id?[]:s.checkpoints.filter(ve=>ve.areaIds&&ve.areaIds.includes(s.area.id))),P=ne(()=>{const ve=[...w.value];return ve.sort((le,de)=>{const H=le.name.match(/^(\d+)/),Y=de.name.match(/^(\d+)/);if(H&&Y){const X=parseInt(H[1]),ke=parseInt(Y[1]);if(X!==ke)return X-ke}return le.name.localeCompare(de.name,void 0,{numeric:!0,sensitivity:"base"})}),ve}),k=ne(()=>!s.area||!s.area.id?[]:s.contacts.filter(ve=>ve.scopeConfigurations?ve.scopeConfigurations.some(le=>le.scope==="EveryoneInAreas"&&le.itemType==="Area"?le.ids?.includes("ALL_AREAS")?!0:le.ids?.includes(s.area.id):!1):!1)),C=ve=>s.assignments.filter(le=>le.locationId===ve),I=ve=>C(ve.id).filter(de=>de.isCheckedIn).length,Z=ve=>{const le=C(ve.id);if(le.length===0)return"status-none";const de=le.filter(H=>H.isCheckedIn).length;return de===0?"status-none":de===le.length?"status-complete":"status-partial"},V=ve=>{const le=C(ve.id);if(le.length===0)return`No ${r.value.people}`;const de=le.filter(H=>H.isCheckedIn).length;return de===0?"Not checked in":de===le.length?"Fully checked in":`Partially checked in (${de}/${le.length})`},ae=ve=>{const le=m.value[ve];return!le||le.total===0?"":le.completed===le.total?"status-complete":le.completed===0?"status-none":"status-partial"},ge=ve=>{const le=m.value[ve];return le?le.total===0?"No tasks":le.completed===le.total?"All tasks completed":`${le.completed}/${le.total} completed`:""},Te=async ve=>{if(!(m.value[ve]||f.value[ve])){f.value[ve]=!0;try{const de=(await Pt.getCheckpointChecklist(s.eventId,ve)).data||[];m.value[ve]={total:de.length,completed:de.filter(H=>H.isCompleted).length}}catch(le){console.error("Failed to load checklist status for checkpoint:",ve,le),m.value[ve]={total:0,completed:0}}finally{f.value[ve]=!1}}};We(()=>s.area,ve=>{if(ve){const le=ve.polygon?typeof ve.polygon=="string"?JSON.parse(ve.polygon):ve.polygon:[];v.value={name:ve.name||"",description:ve.description||"",color:ve.color||Dl,displayOrder:ve.displayOrder||0,isDefault:ve.isDefault||!1,polygon:le}}else v.value={name:"",description:"",color:Qu(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[]}},{immediate:!0,deep:!0}),We(()=>s.show,ve=>{ve&&(l.value="details",h.value=[],m.value={},f.value={},b.value||(v.value={name:"",description:"",color:Qu(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[]}),d.value?.resetLocalState&&d.value.resetLocalState())}),We(l,ve=>{ve==="checkpoints"&&s.area&&s.area.id&&w.value.forEach(le=>{setTimeout(()=>Te(le.id),0)})});const fe=()=>{a("update:isDirty",!0)},j=ve=>{v.value.color=ve,fe()},G=()=>{a("draw-boundary",v.value)},se=()=>{v.value.polygon=[],fe()},Ee=()=>{a("add-area-contact",s.area)},pe=ve=>ve?ve.replace(/([A-Z])/g," $1").replace(/^./,le=>le.toUpperCase()).trim():"",Le=ve=>{h.value=ve,fe()},J=()=>{b.value||$.value?he():l.value=O.value.value},he=()=>{const ve=s.area?{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null,displayOrder:v.value.displayOrder,checklistChanges:h.value||[]}:{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null};a("save",ve)},Se=()=>{a("delete",s.area.id)},Re=()=>{a("close")};return(ve,le)=>(g(),tt(Nt,{show:e.show,title:e.area&&e.area.id?`Edit ${z(r).area}: ${e.area.name}`:`Create new ${z(r).area}`,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Re},{"tab-header":Ke(()=>[De(rc,{modelValue:l.value,"onUpdate:modelValue":le[0]||(le[0]=de=>l.value=de),tabs:A.value},null,8,["modelValue","tabs"])]),footer:Ke(()=>[u("div",$I,[b.value&&!v.value.isDefault?(g(),y("button",{key:0,type:"button",onClick:Se,class:"btn btn-danger"}," Delete "+E(z(r).area),1)):(g(),y("div",OI)),u("button",{type:"button",onClick:J,class:"btn btn-primary"},E(b.value?"Save changes":T.value),1)])]),default:Ke(()=>[l.value==="details"?(g(),y("div",WT,[u("form",{onSubmit:xt(he,["prevent"])},[u("div",jT,[le[4]||(le[4]=u("label",null,"Name *",-1)),$e(u("input",{"onUpdate:modelValue":le[1]||(le[1]=de=>v.value.name=de),type:"text",required:"",class:"form-input",disabled:v.value.isDefault,onInput:fe},null,40,GT),[[st,v.value.name]])]),u("div",KT,[le[5]||(le[5]=u("label",null,"Description",-1)),$e(u("textarea",{"onUpdate:modelValue":le[2]||(le[2]=de=>v.value.description=de),class:"form-input",rows:"3",onInput:fe},null,544),[[st,v.value.description]])]),u("div",YT,[le[6]||(le[6]=u("label",null,"Color *",-1)),u("div",JT,[(g(!0),y(be,null,Pe(z(uf),de=>(g(),y("div",{key:de.hex,class:Ue(["color-swatch",{selected:v.value.color===de.hex}]),style:Qt({backgroundColor:de.hex}),title:de.name,onClick:H=>j(de.hex)},null,14,XT))),128))])])],32)])):B("",!0),l.value==="boundary"?(g(),y("div",QT,[u("div",eI,[le[7]||(le[7]=u("div",{class:"instructions-card"},[u("p",null,[u("strong",null,"Draw a polygon on the map to define this area's boundary")]),u("p",null,' Click "Draw on Map" to activate drawing mode. Click on the map to add vertices, and double-click to complete the polygon. ')],-1)),u("div",tI,[u("button",{onClick:G,class:"btn btn-primary btn-full"}," Draw on Map "),v.value.polygon&&v.value.polygon.length>0?(g(),y("button",{key:0,onClick:se,class:"btn btn-danger btn-full"}," Clear Boundary ")):B("",!0)])])])):B("",!0),l.value==="contacts"?(g(),y("div",nI,[u("h3",sI,E(z(i).area)+" contacts",1),u("div",iI,[u("button",{onClick:Ee,class:"btn btn-primary btn-full"}," Add contact for this "+E(z(r).area),1)]),k.value.length>0?(g(),y("div",oI,[u("h4",null,"Contacts visible in this "+E(z(r).area)+" ("+E(k.value.length)+")",1),(g(!0),y(be,null,Pe(k.value,de=>(g(),y("div",{key:de.contactId,class:"contact-item",onClick:H=>ve.$emit("edit-contact",de)},[u("div",rI,[u("strong",null,E(de.name),1),de.role?(g(),y("span",lI,E(pe(de.role)),1)):B("",!0),de.phone||de.email?(g(),y("div",cI,[de.phone?(g(),y("span",uI,E(de.phone),1)):B("",!0),de.email?(g(),y("span",dI,E(de.email),1)):B("",!0)])):B("",!0)])],8,aI))),128))])):B("",!0)])):B("",!0),l.value==="checkpoints"&&b.value?(g(),y("div",hI,[u("h3",fI,E(z(i).checkpoints)+" in "+E(e.area?.name)+" ("+E(w.value.length)+")",1),w.value.length===0?(g(),y("div",pI,[u("p",null,"No "+E(z(r).checkpoints)+" in this "+E(z(r).area)+" yet.",1)])):(g(),y("div",mI,[(g(!0),y(be,null,Pe(P.value,de=>(g(),y("div",{key:de.id,class:"checkpoint-card",onClick:H=>ve.$emit("select-checkpoint",de)},[u("div",gI,[u("div",_I,[u("h4",null,E(de.name),1),de.description?(g(),y("p",yI,E(de.description),1)):B("",!0)]),u("div",bI,[u("div",{class:Ue(["stat-badge",Z(de)])},E(V(de)),3)])]),u("div",kI,[u("div",wI,[u("span",CI,E(z(i).people)+":",1),u("span",LI,[Ve(E(C(de.id).length)+" / "+E(de.requiredMarshals)+" ",1),C(de.id).length<de.requiredMarshals?(g(),y("span",xI," ("+E(de.requiredMarshals-C(de.id).length)+" needed) ",1)):B("",!0)])]),u("div",AI,[le[8]||(le[8]=u("span",{class:"detail-label"},"Checked in:",-1)),u("span",EI,E(I(de))+" / "+E(C(de.id).length),1)]),m.value[de.id]?(g(),y("div",TI,[le[9]||(le[9]=u("span",{class:"detail-label"},"Tasks:",-1)),u("span",{class:Ue(["detail-value",ae(de.id)])},E(ge(de.id)),3)])):f.value[de.id]?(g(),y("div",II,[...le[10]||(le[10]=[u("span",{class:"detail-label"},"Tasks:",-1),u("span",{class:"detail-value loading-text"},"Loading...",-1)])])):B("",!0)])],8,vI))),128))]))])):B("",!0),l.value==="checkpoints"&&!b.value?(g(),y("div",SI,[u("p",null,E(z(i).checkpoints)+" will be automatically assigned based on boundaries after the "+E(z(r).area)+" is created.",1)])):B("",!0),l.value==="checklists"&&b.value?(g(),tt(cf,{key:5,ref_key:"checklistTabRef",ref:d,modelValue:h.value,"onUpdate:modelValue":le[3]||(le[3]=de=>h.value=de),"event-id":e.eventId,"area-id":e.area.id,locations:e.allLocations,areas:e.areas,assignments:x.value,onChange:Le},null,8,["modelValue","event-id","area-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"&&!b.value?(g(),y("div",MI,[u("p",null,E(z(i).checklists)+" can be assigned after the "+E(z(r).area)+" is created.",1)])):B("",!0),l.value==="notes"&&b.value?(g(),tt(wr,{key:7,"event-id":e.eventId,"area-id":e.area?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","area-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"&&!b.value?(g(),y("div",PI,[u("p",null,"Notes can be viewed after the "+E(z(r).area)+" is created.",1)])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},RI=Ze(DI,[["__scopeId","data-v-ad57309b"]]),NI={class:"scope-configuration-editor"},BI={class:"editor-header"},FI={class:"scope-types-list"},zI=["onClick"],UI={class:"scope-type-label"},HI={class:"scope-type-pill"},VI={class:"expand-label"},ZI={class:"expand-icon"},qI={class:"modal-content"},WI={class:"modal-header"},jI={class:"modal-body"},GI={class:"scope-help"},KI={key:0,class:"form-group"},YI={class:"checkbox-label special-option"},JI=["checked"],XI={key:0,class:"specific-selection"},QI=["placeholder"],eS={class:"checkbox-group scrollable"},tS=["checked","onChange"],nS={key:1,class:"form-group"},sS={class:"checkbox-label special-option"},iS=["checked"],oS={key:0,class:"specific-selection"},aS={class:"checkbox-group scrollable"},rS=["checked","onChange"],lS={key:2,class:"form-group"},cS={class:"checkbox-label special-option"},uS=["checked"],dS={key:0,class:"specific-selection"},hS=["placeholder"],fS={class:"checkbox-group scrollable"},pS=["checked","onChange"],mS={class:"checkpoint-info"},vS={class:"checkpoint-name"},gS={key:0,class:"checkpoint-description"},_S={__name:"ScopeConfigurationEditor",props:{modelValue:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},excludeScopes:{type:Array,default:()=>[]},headerText:{type:String,default:"Who can see and complete this item?"}},emits:["update:modelValue","user-changed"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=ne(()=>[{scope:"SpecificPeople",label:`Specific ${i.value.people}`},{scope:"EveryoneAtCheckpoints",label:`Every ${i.value.person} at specified ${i.value.checkpoints}`},{scope:"OnePerCheckpoint",label:`One ${i.value.person} at each specified ${i.value.checkpoint}`},{scope:"OnePerArea",label:`One ${i.value.person} in specified ${i.value.areas}`},{scope:"EveryoneInAreas",label:`Everyone in specified ${i.value.areas}`},{scope:"EveryAreaLead",label:`Every ${i.value.area} lead at specified ${i.value.areas}`},{scope:"OneLeadPerArea",label:`One lead per specified ${i.value.area}`}]),l=D({SpecificPeople:{enabled:!0,ids:["ALL_MARSHALS"]},EveryoneInAreas:{enabled:!1,ids:[]},EveryoneAtCheckpoints:{enabled:!1,ids:[]},OnePerCheckpoint:{enabled:!1,ids:[]},OnePerArea:{enabled:!1,ids:[]},EveryAreaLead:{enabled:!1,ids:[]},OneLeadPerArea:{enabled:!1,ids:[]}}),d=D(null),h=D(""),m=D(""),f=D(!r.isEditing);let v=!0,b=!1;const A=ne(()=>a.value.filter(H=>!r.excludeScopes.includes(H.scope))),M=ne(()=>f.value?A.value:A.value.filter(H=>Z(H.scope))),$=ne(()=>A.value.filter(Y=>Z(Y.scope)).length<A.value.length),O=ne(()=>{const H=A.value.filter(Y=>Z(Y.scope)).length;return A.value.length-H});We(()=>r.modelValue,H=>{if(H){if(b){b=!1;return}v=!0,Object.keys(l.value).forEach(Y=>{l.value[Y]={enabled:!1,ids:[]}}),H.forEach(Y=>{Y.scope==="Everyone"?l.value.SpecificPeople={enabled:!0,ids:["ALL_MARSHALS"]}:Y.scope==="AreaLead"?l.value.EveryAreaLead={enabled:!0,ids:[...Y.ids]}:l.value[Y.scope]&&(l.value[Y.scope]={enabled:!0,ids:[...Y.ids]})}),v=!1}},{immediate:!0});const T=()=>{const H=[];return Object.keys(l.value).forEach(Y=>{const X=l.value[Y];if(X.enabled){const ke={scope:Y,itemType:x(Y),ids:[...X.ids]};H.push(ke)}}),H};We(l,()=>{if(v)return;if(Object.keys(l.value).some(X=>X!=="SpecificPeople"&&l.value[X].enabled)&&l.value.SpecificPeople?.ids.includes("ALL_MARSHALS")){const X=l.value.SpecificPeople.ids.indexOf("ALL_MARSHALS");l.value.SpecificPeople.ids.splice(X,1),l.value.SpecificPeople.ids.length===0&&(l.value.SpecificPeople.enabled=!1)}b=!0;const Y=T();s("update:modelValue",Y),s("user-changed")},{deep:!0});const x=H=>w(H)?"Area":P(H)?"Checkpoint":k(H)?"Marshal":null,w=H=>H==="EveryoneInAreas"||H==="OnePerArea"||H==="EveryAreaLead"||H==="OneLeadPerArea",P=H=>H==="EveryoneAtCheckpoints"||H==="OnePerCheckpoint",k=H=>H==="SpecificPeople",C=H=>{const Y=a.value.find(X=>X.scope===H);return Y?Y.label:H},I=H=>({SpecificPeople:`Select "Everyone at the event" or choose specific ${i.value.people} who must complete this (personal completion)`,EveryoneAtCheckpoints:`Every ${i.value.person} at the selected ${i.value.checkpoints} must complete this (personal completion)`,OnePerCheckpoint:`One completion needed at each selected ${i.value.checkpoint} (shared completion)`,OnePerArea:`One completion needed in each selected ${i.value.area} (shared completion)`,EveryoneInAreas:`Every ${i.value.person} in the selected ${i.value.areas} must complete this (personal completion)`,EveryAreaLead:`Every ${i.value.area} lead at the selected ${i.value.areas} must complete this individually (personal completion)`,OneLeadPerArea:`One completion per ${i.value.area}, only ${i.value.area} leads can complete (shared among leads)`})[H]||"",Z=H=>l.value[H]?.enabled||!1,V=H=>{const Y=l.value[H];if(!Y||!Y.enabled)return"No";const X=Y.ids||[];if(w(H)){if(X.includes("ALL_AREAS"))return`All ${i.value.areas}`;const ke=X.length;return ke>0?`${ke} ${ke!==1?i.value.areas:i.value.area}`:`Select ${i.value.areas}...`}if(P(H)){if(X.includes("ALL_CHECKPOINTS"))return`All ${i.value.checkpoints}`;const ke=X.length;return ke>0?`${ke} ${ke!==1?i.value.checkpoints:i.value.checkpoint}`:`Select ${i.value.checkpoints}...`}if(k(H)){if(X.includes("ALL_MARSHALS"))return"Everyone";const ke=X.length;return ke>0?`${ke} ${ke!==1?i.value.people:i.value.person}`:`Select ${i.value.people}...`}return"Configured"},ae=H=>{d.value=H,h.value="",m.value=""},ge=()=>{d.value=null},Te=()=>{d.value&&(l.value[d.value]={enabled:!1,ids:[]}),ge()},fe=()=>d.value&&l.value[d.value]?.ids.includes("ALL_MARSHALS"),j=()=>{if(!d.value)return;const H=l.value[d.value];fe()?(H.ids=[],H.enabled=!1):(H.ids=["ALL_MARSHALS"],H.enabled=!0)},G=H=>d.value&&l.value[d.value]?.ids.includes(H),se=H=>{if(!d.value)return;const Y=l.value[d.value],X=Y.ids.indexOf(H);X>=0?(Y.ids.splice(X,1),Y.ids.length===0&&(Y.enabled=!1)):(Y.ids.push(H),Y.enabled=!0)},Ee=ne(()=>{if(!m.value)return r.marshals;const H=m.value.toLowerCase();return r.marshals.filter(Y=>Y.name.toLowerCase().includes(H)||Y.email&&Y.email.toLowerCase().includes(H))}),pe=()=>d.value&&l.value[d.value]?.ids.includes("ALL_AREAS"),Le=()=>{if(!d.value)return;const H=l.value[d.value];pe()?(H.ids=[],H.enabled=!1):(H.ids=["ALL_AREAS"],H.enabled=!0)},J=H=>d.value&&l.value[d.value]?.ids.includes(H),he=H=>{if(!d.value)return;const Y=l.value[d.value],X=Y.ids.indexOf(H);X>=0?(Y.ids.splice(X,1),Y.ids.length===0&&(Y.enabled=!1)):(Y.ids.push(H),Y.enabled=!0)},Se=()=>d.value&&l.value[d.value]?.ids.includes("ALL_CHECKPOINTS"),Re=()=>{if(!d.value)return;const H=l.value[d.value];Se()?(H.ids=[],H.enabled=!1):(H.ids=["ALL_CHECKPOINTS"],H.enabled=!0)},ve=H=>d.value&&l.value[d.value]?.ids.includes(H),le=H=>{if(!d.value)return;const Y=l.value[d.value],X=Y.ids.indexOf(H);X>=0?(Y.ids.splice(X,1),Y.ids.length===0&&(Y.enabled=!1)):(Y.ids.push(H),Y.enabled=!0)},de=ne(()=>{let H=r.locations;if(h.value){const Y=h.value.toLowerCase();H=H.filter(X=>X.name.toLowerCase().includes(Y)||X.description&&X.description.toLowerCase().includes(Y))}return[...H].sort((Y,X)=>dn(Y.name,X.name))});return(H,Y)=>(g(),y("div",NI,[u("div",BI,[u("h4",null,E(e.headerText),1)]),u("div",FI,[(g(!0),y(be,null,Pe(M.value,X=>(g(),y("div",{key:X.scope,class:Ue(["scope-type-row",{active:Z(X.scope)}]),onClick:ke=>ae(X.scope)},[u("div",UI,E(X.label),1),u("div",HI,E(V(X.scope)),1)],10,zI))),128)),$.value?(g(),y("div",{key:0,class:"expand-row",onClick:Y[0]||(Y[0]=X=>f.value=!f.value)},[u("div",VI,E(f.value?"Show less":`Show ${O.value} more option${O.value!==1?"s":""}...`),1),u("div",ZI,E(f.value?"":""),1)])):B("",!0)]),d.value?(g(),y("div",{key:0,class:"scope-config-modal",onClick:xt(ge,["self"])},[u("div",qI,[u("div",WI,[u("h5",null,E(C(d.value)),1),u("button",{onClick:ge,class:"btn-close",type:"button"},"")]),u("div",jI,[u("p",GI,E(I(d.value)),1),k(d.value)?(g(),y("div",KI,[u("label",YI,[u("input",{type:"checkbox",checked:fe(),onChange:j},null,40,JI),u("span",null,[Y[3]||(Y[3]=u("strong",null,"Everyone at the event",-1)),Ve(" (all current and future "+E(z(i).people)+")",1)])]),fe()?B("",!0):(g(),y("div",XI,[$e(u("input",{"onUpdate:modelValue":Y[1]||(Y[1]=X=>m.value=X),type:"text",placeholder:`Search ${z(i).people}...`,class:"search-input"},null,8,QI),[[st,m.value]]),u("div",eS,[(g(!0),y(be,null,Pe(Ee.value,X=>(g(),y("label",{key:X.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:G(X.id),onChange:ke=>se(X.id)},null,40,tS),u("span",null,E(X.name),1)]))),128))])]))])):B("",!0),w(d.value)?(g(),y("div",nS,[u("label",sS,[u("input",{type:"checkbox",checked:pe(),onChange:Le},null,40,iS),u("span",null,[u("strong",null,"All "+E(z(i).areas),1),Ve(" (includes future "+E(z(i).areas)+")",1)])]),pe()?B("",!0):(g(),y("div",oS,[u("div",aS,[(g(!0),y(be,null,Pe(e.areas,X=>(g(),y("label",{key:X.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:J(X.id),onChange:ke=>he(X.id)},null,40,rS),u("span",{class:"area-color-dot",style:Qt({backgroundColor:X.color||"#667eea"})},null,4),u("span",null,E(X.name),1)]))),128))])]))])):B("",!0),P(d.value)?(g(),y("div",lS,[u("label",cS,[u("input",{type:"checkbox",checked:Se(),onChange:Re},null,40,uS),u("span",null,[u("strong",null,"All "+E(z(i).checkpoints),1),Ve(" (includes future "+E(z(i).checkpoints)+")",1)])]),Se()?B("",!0):(g(),y("div",dS,[$e(u("input",{"onUpdate:modelValue":Y[2]||(Y[2]=X=>h.value=X),type:"text",placeholder:`Search ${z(i).checkpoints}...`,class:"search-input"},null,8,hS),[[st,h.value]]),u("div",fS,[(g(!0),y(be,null,Pe(de.value,X=>(g(),y("label",{key:X.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:ve(X.id),onChange:ke=>le(X.id)},null,40,pS),u("div",mS,[u("span",vS,E(X.name),1),X.description?(g(),y("span",gS," - "+E(X.description),1)):B("",!0)])]))),128))])]))])):B("",!0)]),u("div",{class:"modal-footer"},[u("button",{onClick:Te,class:"btn btn-secondary",type:"button"},"Deselect all"),u("button",{onClick:ge,class:"btn btn-primary",type:"button"},"Done")])])])):B("",!0)]))}},lc=Ze(_S,[["__scopeId","data-v-e1e2471d"]]),yS=["innerHTML"],bS={__name:"InfoModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Information"},message:{type:String,required:!0},okText:{type:String,default:"OK"}},emits:["close"],setup(e,{emit:n}){const i=n,r=()=>{i("close")};return(s,a)=>(g(),tt(Nt,{show:e.show,title:e.title,size:"small","z-index":2e3,onClose:r},{actions:Ke(()=>[u("button",{onClick:r,class:"btn btn-primary"},E(e.okText),1)]),default:Ke(()=>[u("div",{class:"info-content",innerHTML:e.message},null,8,yS)]),_:1},8,["show","title"]))}},Cr=Ze(bS,[["__scopeId","data-v-897177d3"]]),kS={class:"tab-headers"},wS={class:"tab-content"},CS={class:"form-group"},LS=["placeholder"],xS={key:0,class:"checkbox-label-inline create-separate-items"},AS={class:"tab-content"},ES={class:"custom-footer"},TS={__name:"EditChecklistItemModal",props:{show:{type:Boolean,default:!1},checklistItem:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=D(!1),a=D(""),l=D("details"),d=D({text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0}),h=ne(()=>!!i.checklistItem);We(()=>i.show,T=>{T&&(l.value=i.initialTab,i.checklistItem?d.value={text:i.checklistItem.text||"",scopeConfigurations:i.checklistItem.scopeConfigurations?JSON.parse(JSON.stringify(i.checklistItem.scopeConfigurations)):[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:i.checklistItem.displayOrder||0,isRequired:i.checklistItem.isRequired!==!1,visibleFrom:i.checklistItem.visibleFrom?m(i.checklistItem.visibleFrom):null,visibleUntil:i.checklistItem.visibleUntil?m(i.checklistItem.visibleUntil):null,mustCompleteBy:i.checklistItem.mustCompleteBy?m(i.checklistItem.mustCompleteBy):null,createSeparateItems:!1}:d.value={text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0},r("update:isDirty",!1))});const m=T=>{if(!T)return null;const x=new Date(T),w=x.getTimezoneOffset();return new Date(x.getTime()-w*60*1e3).toISOString().slice(0,16)},f=T=>T?new Date(T).toISOString():null,v=()=>{r("update:isDirty",!0)},b=()=>{r("close")},A=()=>{l.value="visibility"},M=T=>{a.value=T,s.value=!0},$=()=>{if(!d.value.text||!d.value.text.trim()){M("Please enter checklist item text");return}if(!d.value.scopeConfigurations||d.value.scopeConfigurations.length===0){M("Please select at least one scope");return}if(!d.value.scopeConfigurations.some(w=>!(w.itemType!==null&&(!w.ids||w.ids.length===0)))){M("Please configure at least one scope with valid selections");return}const x={text:d.value.text,scopeConfigurations:d.value.scopeConfigurations,displayOrder:d.value.displayOrder||0,isRequired:d.value.isRequired,visibleFrom:f(d.value.visibleFrom),visibleUntil:f(d.value.visibleUntil),mustCompleteBy:f(d.value.mustCompleteBy)};h.value||(x.createSeparateItems=d.value.createSeparateItems),r("save",x)},O=()=>{r("delete",i.checklistItem.itemId)};return(T,x)=>(g(),y(be,null,[De(Nt,{show:e.show,title:h.value?"Edit checklist item":"Create checklist item",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:b},{footer:Ke(()=>[u("div",ES,[h.value?(g(),y("button",{key:0,type:"button",onClick:O,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(g(),y("button",{key:1,type:"button",onClick:A,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(g(),y("button",{key:2,type:"button",onClick:$,class:"btn btn-primary"},E(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ke(()=>[u("div",kS,[u("button",{type:"button",class:Ue(["tab-header",{active:l.value==="details"}]),onClick:x[0]||(x[0]=w=>l.value="details")}," Details ",2),u("button",{type:"button",class:Ue(["tab-header",{active:l.value==="visibility"}]),onClick:x[1]||(x[1]=w=>l.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:xt($,["prevent"]),class:"checklist-form"},[$e(u("div",wS,[u("div",CS,[x[7]||(x[7]=u("label",{for:"text"},"Checklist text: *",-1)),$e(u("textarea",{id:"text","onUpdate:modelValue":x[2]||(x[2]=w=>d.value.text=w),onInput:v,required:"",rows:"3",placeholder:d.value.createSeparateItems?"Enter checklist items, one per line...":"Enter the checklist item text..."},null,40,LS),[[st,d.value.text]]),h.value?B("",!0):(g(),y("label",xS,[$e(u("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=w=>d.value.createSeparateItems=w),onChange:v},null,544),[[Ti,d.value.createSeparateItems]]),x[6]||(x[6]=u("span",null,"Each line creates a new item",-1))]))])],512),[[Ss,l.value==="details"]]),$e(u("div",AS,[De(lc,{modelValue:d.value.scopeConfigurations,"onUpdate:modelValue":x[4]||(x[4]=w=>d.value.scopeConfigurations=w),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,onUserChanged:v},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ss,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),De(Cr,{show:s.value,title:"Validation Error",message:a.value,onClose:x[5]||(x[5]=w=>s.value=!1)},null,8,["show","message"])],64))}},IS=Ze(TS,[["__scopeId","data-v-2c532f20"]]),SS={class:"tab-headers"},MS={class:"tab-content"},PS={class:"form-group"},$S={class:"form-group"},OS={class:"form-row"},DS={class:"form-group"},RS={class:"form-group"},NS={class:"form-row"},BS={class:"form-group"},FS={class:"form-group checkbox-group-inline"},zS={class:"checkbox-label-inline"},US={class:"tab-content"},HS={class:"custom-footer"},VS={__name:"EditNoteModal",props:{show:{type:Boolean,default:!1},note:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,r=n,s=D(!1),a=D(""),l=D("details"),d=D({title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1}),h=ne(()=>!!i.note);We(()=>i.show,$=>{$&&(l.value=i.initialTab,i.note?d.value={title:i.note.title||"",content:i.note.content||"",scopeConfigurations:i.note.scopeConfigurations?JSON.parse(JSON.stringify(i.note.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:i.note.displayOrder||0,priority:i.note.priority||"Normal",category:i.note.category||"",isPinned:i.note.isPinned||!1}:d.value={title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1},r("update:isDirty",!1))});const m=()=>{r("update:isDirty",!0)},f=()=>{r("close")},v=()=>{l.value="visibility"},b=$=>{a.value=$,s.value=!0},A=()=>{if(!d.value.title||!d.value.title.trim()){b("Please enter a note title");return}if(!d.value.scopeConfigurations||d.value.scopeConfigurations.length===0){b("Please select at least one visibility scope");return}if(!d.value.scopeConfigurations.some(T=>!(T.itemType!==null&&(!T.ids||T.ids.length===0)))){b("Please configure at least one scope with valid selections");return}const O={title:d.value.title.trim(),content:d.value.content||"",scopeConfigurations:d.value.scopeConfigurations,displayOrder:d.value.displayOrder||0,priority:d.value.priority||"Normal",category:d.value.category?.trim()||null,isPinned:d.value.isPinned||!1};r("save",O)},M=()=>{r("delete",i.note.noteId)};return($,O)=>(g(),y(be,null,[De(Nt,{show:e.show,title:h.value?"Edit note":"Create note",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:f},{footer:Ke(()=>[u("div",HS,[h.value?(g(),y("button",{key:0,type:"button",onClick:M,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(g(),y("button",{key:1,type:"button",onClick:v,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(g(),y("button",{key:2,type:"button",onClick:A,class:"btn btn-primary"},E(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ke(()=>[u("div",SS,[u("button",{type:"button",class:Ue(["tab-header",{active:l.value==="details"}]),onClick:O[0]||(O[0]=T=>l.value="details")}," Details ",2),u("button",{type:"button",class:Ue(["tab-header",{active:l.value==="visibility"}]),onClick:O[1]||(O[1]=T=>l.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:xt(A,["prevent"]),class:"note-form"},[$e(u("div",MS,[u("div",PS,[O[10]||(O[10]=u("label",{for:"title"},"Title: *",-1)),$e(u("input",{id:"title","onUpdate:modelValue":O[2]||(O[2]=T=>d.value.title=T),type:"text",onInput:m,required:"",placeholder:"Enter note title..."},null,544),[[st,d.value.title]])]),u("div",$S,[O[11]||(O[11]=u("label",{for:"content"},"Content:",-1)),$e(u("textarea",{id:"content","onUpdate:modelValue":O[3]||(O[3]=T=>d.value.content=T),onInput:m,rows:"6",placeholder:"Enter note content (supports markdown)..."},null,544),[[st,d.value.content]])]),u("div",OS,[u("div",DS,[O[13]||(O[13]=u("label",{for:"priority"},"Priority:",-1)),$e(u("select",{id:"priority","onUpdate:modelValue":O[4]||(O[4]=T=>d.value.priority=T),onChange:m},[...O[12]||(O[12]=[u("option",{value:"Urgent"},"Urgent",-1),u("option",{value:"High"},"High",-1),u("option",{value:"Normal"},"Normal",-1),u("option",{value:"Low"},"Low",-1)])],544),[[mn,d.value.priority]])]),u("div",RS,[O[14]||(O[14]=u("label",{for:"category"},"Category:",-1)),$e(u("input",{id:"category","onUpdate:modelValue":O[5]||(O[5]=T=>d.value.category=T),type:"text",onInput:m,placeholder:"e.g., Safety, Logistics..."},null,544),[[st,d.value.category]])])]),u("div",NS,[u("div",BS,[O[15]||(O[15]=u("label",{for:"displayOrder"},"Display order:",-1)),$e(u("input",{id:"displayOrder","onUpdate:modelValue":O[6]||(O[6]=T=>d.value.displayOrder=T),type:"number",onInput:m,min:"0"},null,544),[[st,d.value.displayOrder,void 0,{number:!0}]]),O[16]||(O[16]=u("span",{class:"help-text"},"Lower numbers appear first",-1))]),u("div",FS,[u("label",zS,[$e(u("input",{type:"checkbox","onUpdate:modelValue":O[7]||(O[7]=T=>d.value.isPinned=T),onChange:m},null,544),[[Ti,d.value.isPinned]]),O[17]||(O[17]=u("span",null,"Pin to top",-1))]),O[18]||(O[18]=u("span",{class:"help-text"},"Pinned notes always appear at the top",-1))])])],512),[[Ss,l.value==="details"]]),$e(u("div",US,[De(lc,{modelValue:d.value.scopeConfigurations,"onUpdate:modelValue":O[8]||(O[8]=T=>d.value.scopeConfigurations=T),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this note?",onUserChanged:m},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ss,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),De(Cr,{show:s.value,title:"Validation Error",message:a.value,onClose:O[9]||(O[9]=T=>s.value=!1)},null,8,["show","message"])],64))}},ZS=Ze(VS,[["__scopeId","data-v-0ffed598"]]),qS={class:"tab-headers"},WS={class:"tab-content"},jS={class:"form-group"},GS={for:"marshalId"},KS=["value"],YS={class:"help-text"},JS={class:"form-group"},XS=["disabled"],QS={class:"form-group"},eM={class:"role-input-group"},tM={key:0,label:"Built-in Roles"},nM=["value"],sM={key:1,label:"Custom Roles"},iM=["value"],oM={class:"form-row"},aM={class:"form-group"},rM={class:"form-group"},lM={class:"form-group"},cM={class:"tab-content"},uM={class:"custom-footer"},dM={__name:"EditContactModal",props:{show:{type:Boolean,default:!1},contact:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})},isDirty:{type:Boolean,default:!1},preselectedArea:{type:Object,default:null}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const{terms:i}=dt(),r=e,s=n,a=D(!1),l=D(""),d=D("details"),h=D(!1),m=D({role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}),f=ne(()=>!!r.contact),v=ne(()=>!!m.value.marshalId),b=ne(()=>[...r.marshals].sort((k,C)=>dn(k.name,C.name)));We(()=>r.show,k=>{if(k){if(d.value=r.initialTab,r.contact){const C=[...r.availableRoles.builtInRoles||[],...r.availableRoles.customRoles||[]];h.value=r.contact.role&&!C.includes(r.contact.role),m.value={role:r.contact.role||"",name:r.contact.name||"",phone:r.contact.phone||"",email:r.contact.email||"",notes:r.contact.notes||"",marshalId:r.contact.marshalId||null,scopeConfigurations:r.contact.scopeConfigurations?JSON.parse(JSON.stringify(r.contact.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}}else{h.value=!1;const C=r.preselectedArea?[{scope:"EveryoneInAreas",itemType:"Area",ids:[r.preselectedArea.id]}]:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}];m.value={role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:C}}s("update:isDirty",!1)}});const A=k=>k?k==="AreaLead"?`${i.value.area} Lead`:k.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase()).trim():"",M=()=>{s("update:isDirty",!0)},$=()=>{if(m.value.marshalId){const k=r.marshals.find(C=>C.id===m.value.marshalId);k&&(m.value.name=k.name,!m.value.phone&&k.phoneNumber&&(m.value.phone=k.phoneNumber),!m.value.email&&k.email&&(m.value.email=k.email))}M()},O=()=>{s("close")},T=()=>{if(!m.value.role||!m.value.role.trim()){x("Please select or enter a role");return}if(!m.value.name||!m.value.name.trim()){x("Please enter a contact name");return}d.value="visibility"},x=k=>{l.value=k,a.value=!0},w=()=>{if(!m.value.role||!m.value.role.trim()){x("Please select or enter a role");return}if(!m.value.name||!m.value.name.trim()){x("Please enter a contact name");return}if(!m.value.scopeConfigurations||m.value.scopeConfigurations.length===0){x("Please select at least one visibility scope");return}if(!m.value.scopeConfigurations.some(I=>!(I.itemType!==null&&(!I.ids||I.ids.length===0)))){x("Please configure at least one scope with valid selections");return}const C={role:m.value.role.trim(),name:m.value.name.trim(),phone:m.value.phone?.trim()||null,email:m.value.email?.trim()||null,notes:m.value.notes?.trim()||null,marshalId:m.value.marshalId||null,scopeConfigurations:m.value.scopeConfigurations};s("save",C)},P=()=>{s("delete",r.contact.contactId)};return(k,C)=>(g(),y(be,null,[De(Nt,{show:e.show,title:f.value?"Edit contact":"Create contact",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:O},{footer:Ke(()=>[u("div",uM,[f.value?(g(),y("button",{key:0,type:"button",onClick:P,class:"btn btn-danger"}," Delete ")):B("",!0),!f.value&&d.value==="details"?(g(),y("button",{key:1,type:"button",onClick:T,class:"btn btn-primary"}," Next ")):B("",!0),f.value||d.value==="visibility"?(g(),y("button",{key:2,type:"button",onClick:w,class:"btn btn-primary"},E(f.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ke(()=>[u("div",qS,[u("button",{type:"button",class:Ue(["tab-header",{active:d.value==="details"}]),onClick:C[0]||(C[0]=I=>d.value="details")}," Details ",2),u("button",{type:"button",class:Ue(["tab-header",{active:d.value==="visibility"}]),onClick:C[1]||(C[1]=I=>d.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:xt(w,["prevent"]),class:"contact-form"},[$e(u("div",WS,[u("div",jS,[u("label",GS,"Link to "+E(z(i).person.toLowerCase())+":",1),$e(u("select",{id:"marshalId","onUpdate:modelValue":C[2]||(C[2]=I=>m.value.marshalId=I),onChange:$},[C[12]||(C[12]=u("option",{value:null},"-- Not linked --",-1)),(g(!0),y(be,null,Pe(b.value,I=>(g(),y("option",{key:I.id,value:I.id},E(I.name),9,KS))),128))],544),[[mn,m.value.marshalId]]),u("span",YS,"Optionally link to an existing "+E(z(i).person.toLowerCase())+" in the system",1)]),u("div",JS,[C[13]||(C[13]=u("label",{for:"name"},"Name: *",-1)),$e(u("input",{id:"name","onUpdate:modelValue":C[3]||(C[3]=I=>m.value.name=I),type:"text",onInput:M,disabled:v.value,class:Ue({"input-disabled":v.value}),placeholder:"Contact name..."},null,42,XS),[[st,m.value.name]])]),u("div",QS,[C[15]||(C[15]=u("label",{for:"role"},"Role: *",-1)),u("div",eM,[h.value?$e((g(),y("input",{key:1,id:"customRole","onUpdate:modelValue":C[5]||(C[5]=I=>m.value.role=I),type:"text",onInput:M,placeholder:"Enter custom role name..."},null,544)),[[st,m.value.role]]):$e((g(),y("select",{key:0,id:"role","onUpdate:modelValue":C[4]||(C[4]=I=>m.value.role=I),onChange:M},[C[14]||(C[14]=u("option",{value:"",disabled:""},"Select a role...",-1)),e.availableRoles.builtInRoles?.length>0?(g(),y("optgroup",tM,[(g(!0),y(be,null,Pe(e.availableRoles.builtInRoles,I=>(g(),y("option",{key:I,value:I},E(A(I)),9,nM))),128))])):B("",!0),e.availableRoles.customRoles?.length>0?(g(),y("optgroup",sM,[(g(!0),y(be,null,Pe(e.availableRoles.customRoles,I=>(g(),y("option",{key:I,value:I},E(A(I)),9,iM))),128))])):B("",!0)],544)),[[mn,m.value.role]]),u("button",{type:"button",class:"toggle-custom-btn",onClick:C[6]||(C[6]=I=>h.value=!h.value)},E(h.value?"Use existing":"Custom"),1)])]),u("div",oM,[u("div",aM,[C[16]||(C[16]=u("label",{for:"phone"},"Phone:",-1)),$e(u("input",{id:"phone","onUpdate:modelValue":C[7]||(C[7]=I=>m.value.phone=I),type:"tel",onInput:M,placeholder:"Phone number..."},null,544),[[st,m.value.phone]])]),u("div",rM,[C[17]||(C[17]=u("label",{for:"email"},"Email:",-1)),$e(u("input",{id:"email","onUpdate:modelValue":C[8]||(C[8]=I=>m.value.email=I),type:"email",onInput:M,placeholder:"Email address..."},null,544),[[st,m.value.email]])])]),u("div",lM,[C[18]||(C[18]=u("label",{for:"notes"},"Notes / Instructions:",-1)),$e(u("textarea",{id:"notes","onUpdate:modelValue":C[9]||(C[9]=I=>m.value.notes=I),onInput:M,rows:"3",placeholder:"Additional notes or instructions for when to contact..."},null,544),[[st,m.value.notes]])])],512),[[Ss,d.value==="details"]]),$e(u("div",cM,[De(lc,{modelValue:m.value.scopeConfigurations,"onUpdate:modelValue":C[10]||(C[10]=I=>m.value.scopeConfigurations=I),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":f.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this contact?",onUserChanged:M},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ss,d.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),De(Cr,{show:a.value,title:"Validation Error",message:l.value,onClose:C[11]||(C[11]=I=>a.value=!1)},null,8,["show","message"])],64))}},hM=Ze(dM,[["__scopeId","data-v-cc705819"]]),fM={key:0,class:"fullscreen-map-overlay"},pM={class:"fullscreen-map-header"},mM={class:"context-info"},vM={key:0},gM={class:"action-buttons"},_M=["disabled"],yM={class:"fullscreen-map-container"},bM=Object.assign({inheritAttrs:!1},{__name:"FullscreenMapOverlay",props:{show:{type:Boolean,required:!0},mode:{type:String,validator:e=>["place-checkpoint","move-checkpoint","draw-area","add-multiple"].includes(e)},contextTitle:{type:String,default:""},contextDescription:{type:String,default:""},canComplete:{type:Boolean,default:!1}},emits:["done","cancel","map-click","polygon-complete","polygon-drawing","location-click","area-click"],setup(e,{emit:n}){const i=e,r=n,s=()=>{r("done")},a=()=>{r("cancel")},l=d=>{d.key==="Escape"&&i.show&&a()};return On(()=>{document.addEventListener("keydown",l)}),$s(()=>{document.removeEventListener("keydown",l)}),(d,h)=>(g(),tt(Up,{to:"body"},[e.show?(g(),y("div",fM,[u("div",pM,[u("div",mM,[u("h3",null,E(e.contextTitle),1),e.contextDescription?(g(),y("p",vM,E(e.contextDescription),1)):B("",!0)]),u("div",gM,[u("button",{onClick:a,class:"btn btn-cancel"}," Cancel "),u("button",{onClick:s,class:"btn btn-done",disabled:!e.canComplete}," Done ",8,_M)])]),u("div",yM,[De(zo,ah(d.$attrs,{onMapClick:h[0]||(h[0]=m=>d.$emit("map-click",m)),onPolygonComplete:h[1]||(h[1]=m=>d.$emit("polygon-complete",m)),onPolygonDrawing:h[2]||(h[2]=m=>d.$emit("polygon-drawing",m)),onLocationClick:h[3]||(h[3]=m=>d.$emit("location-click",m)),onAreaClick:h[4]||(h[4]=m=>d.$emit("area-click",m))}),null,16)])])):B("",!0)]))}}),kM=Ze(bM,[["__scopeId","data-v-b1a57a82"]]),wM={class:"form-group"},CM={class:"form-group"},LM={class:"form-group"},xM={key:0,class:"form-error"},AM={class:"form-row"},EM={class:"form-group",style:{flex:"1"}},TM={class:"form-group",style:{flex:"1"}},IM={class:"form-group",style:{flex:"0 0 auto"}},SM={class:"form-group"},MM={__name:"AddLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:()=>({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""})},isDirty:{type:Boolean,default:!1}},emits:["close","save","set-on-map","update:isDirty","update:location"],setup(e,{emit:n}){const{termsLower:i}=dt(),r=e,s=n,a=D({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""});We(()=>r.location,m=>{m&&(a.value={...m})},{immediate:!0,deep:!0});const l=()=>{s("update:isDirty",!0),s("update:location",{...a.value})},d=()=>{if(!Ja(a.value.what3Words)&&a.value.what3Words){alert("Invalid What3Words format.");return}s("save",a.value)},h=()=>{s("close")};return(m,f)=>(g(),tt(Nt,{show:e.show,title:`Add ${z(i).checkpoint}`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:h},{actions:Ke(()=>[u("button",{type:"button",onClick:h,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:d,class:"btn btn-primary"}," Add "+E(z(i).checkpoint),1)]),default:Ke(()=>[u("form",{onSubmit:xt(d,["prevent"])},[u("div",wM,[f[7]||(f[7]=u("label",null,"Name",-1)),$e(u("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>a.value.name=v),type:"text",required:"",class:"form-input",onInput:l},null,544),[[st,a.value.name]])]),u("div",CM,[f[8]||(f[8]=u("label",null,"Description",-1)),$e(u("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>a.value.description=v),type:"text",class:"form-input",onInput:l},null,544),[[st,a.value.description]])]),u("div",LM,[f[9]||(f[9]=u("label",null,"What3Words (optional)",-1)),$e(u("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>a.value.what3Words=v),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap",onInput:l},null,544),[[st,a.value.what3Words]]),a.value.what3Words&&!z(Ja)(a.value.what3Words)?(g(),y("small",xM," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),u("div",AM,[u("div",EM,[f[10]||(f[10]=u("label",null,"Longitude",-1)),$e(u("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>a.value.longitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[st,a.value.longitude,void 0,{number:!0}]])]),u("div",TM,[f[11]||(f[11]=u("label",null,"Latitude",-1)),$e(u("input",{"onUpdate:modelValue":f[4]||(f[4]=v=>a.value.latitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[st,a.value.latitude,void 0,{number:!0}]])]),u("div",IM,[f[12]||(f[12]=u("label",null,"",-1)),u("button",{type:"button",class:"icon-btn",title:"Set location on map",onClick:f[5]||(f[5]=v=>m.$emit("set-on-map"))},"  ")])]),u("div",SM,[u("label",null,"Required "+E(z(i).people),1),$e(u("input",{"onUpdate:modelValue":f[6]||(f[6]=v=>a.value.requiredMarshals=v),type:"number",min:"1",required:"",class:"form-input",onInput:l},null,544),[[st,a.value.requiredMarshals,void 0,{number:!0}]])])],32)]),_:1},8,["show","title","is-dirty"]))}},PM=Ze(MM,[["__scopeId","data-v-dcbdc216"]]),$M={class:"admin-event-manage"},OM={class:"header"},DM={class:"header-left"},RM={key:0},NM={class:"event-date"},BM={class:"header-actions"},FM={class:"container"},zM={class:"tabs-nav"},UM={class:"tab-content-wrapper"},HM={key:1,class:"tab-panel"},VM={key:2,class:"tab-panel"},ZM={__name:"AdminEventManage",setup(e){const n=nc(),i=qo(),r=tf(),{activeTab:s,switchTab:a}=nf("details",["details","course","areas","checkpoints","marshals","notes","checklists","contacts"]),{showConfirmModal:l,confirmModalTitle:d,confirmModalMessage:h,showConfirm:m,handleConfirmModalConfirm:f,handleConfirmModalCancel:v}=Yb(),{tabLabels:b,termsLower:A}=dt(),M=ne(()=>[{value:"details",label:"Event details",icon:"details"},{value:"course",label:b.value.course,icon:"course"},{value:"areas",label:b.value.areas,icon:"area"},{value:"checkpoints",label:b.value.checkpoints,icon:"checkpoint"},{value:"marshals",label:b.value.marshals,icon:"marshal"},{value:"notes",label:"Notes",icon:"notes"},{value:"checklists",label:b.value.checklists,icon:"checklist"},{value:"contacts",label:"Contacts",icon:"contacts"}]),$=D(null),O=D([]),T=D([]),x=D(null),w=D(!1),P=D(null),k=D(!1),C=D(!1),I=D(null),Z=D(""),V=D([]),ae=D(!1),ge=D(!1),Te=D(!1),fe=D(null),j=D(!1),G=D(!1),se=D(!1),Ee=D(!1),pe=D(null),Le=D(null),J=D(null),he=D(!1),Se=D(!1),Re=D({id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),ve=D(!1),le=D(!1),de=D({marshalName:"",locations:[],marshal:null}),H=D(null),Y=D([]),X=D(!1),ke=D(null),Xe=D({id:"",name:"",email:"",phoneNumber:"",notes:""}),R=D(!1),F=D([]),q=D([]),ie=D([]),ce=D([]),oe=D(!1),Ae=D(""),xe=D(""),Ce=D({name:"",description:"",eventDate:"",timeZoneId:"UTC",peopleTerm:"Marshals",checkpointTerm:"Checkpoints",areaTerm:"Areas",checklistTerm:"Checklists",courseTerm:"Course"}),me=D(!1),ze=D(!1),Me=D(""),Fe=D(""),qe=D(0),Ge=D({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),Je=D([]),He=D(null),vt=D(!1),Lt=D(null),wt=D(!1),mt=D(null),en=D(!1),zt=D(1),gt=D(!1),it=D(null),Et=D({}),_t=D(null),ue=D(null),te=D(null),re=D([]),Be=D(null),Ut=D(null),_n=D([]),rn=D(null),vs=D(!1),Fi=D("details"),Yo=D(null),qn=D([]),Wn=D(null),si=D(!1),zi=D("details"),Ui=D([]),ln=D({builtInRoles:[],customRoles:[]}),Ne=D(null),jn=D(!1),gs=D("details"),Os=D(null),Hi=D(null),Vi=ne(()=>Hi.value?.marshalId!=null),Jo=()=>{i.push(`/event/${n.params.eventId}`)},_s=ne(()=>`${window.location.origin}/#/event/${n.params.eventId}`),Zi=ne(()=>{const N=[];return T.value.forEach(W=>{W.assignments&&N.push(...W.assignments)}),N}),Lr=ne(()=>{if(!ke.value)return T.value;const N=ke.value.assignedLocationIds||[],W=ie.value.map(we=>we.locationId),ye=ce.value;return T.value.filter(we=>!N.includes(we.id)&&!W.includes(we.id)||ye.includes(we.id))}),Xo=ne(()=>{let N=Y.value;if(x.value){const W=x.value.assignments.map(we=>we.marshalName),ye=F.value.map(we=>we.marshalName);N=Y.value.filter(we=>!W.includes(we.name)&&!ye.includes(we.name))}return N.slice().sort((W,ye)=>W.name.localeCompare(ye.name))}),xr=ne(()=>it.value==="place-checkpoint"||it.value==="move-checkpoint"?_t.value!==null:it.value==="draw-area"?He.value?.polygon?.length>0||te.value&&te.value.length>=3:it.value==="add-multiple"),Ar=ne(()=>{const N=[...T.value];return it.value==="place-checkpoint"&&_t.value&&N.push({id:"temp-single",name:Ge.value.name||"New Checkpoint",latitude:_t.value.lat,longitude:_t.value.lng,requiredMarshals:Ge.value.requiredMarshals||1,assignments:[],isTemporary:!0}),it.value==="move-checkpoint"&&_t.value&&x.value&&N.push({id:"temp-move",name:x.value.name+" (new position)",latitude:_t.value.lat,longitude:_t.value.lng,requiredMarshals:x.value.requiredMarshals,assignments:[],isTemporary:!0}),it.value==="add-multiple"&&N.push(...re.value),N}),Qo=ne(()=>{const N=[...Je.value];if(it.value==="draw-area"&&He.value?.polygon?.length>0){const W=N.findIndex(ye=>ye.id===He.value.id);W>=0?N[W]={...He.value}:N.push({...He.value,id:He.value.id||"temp-area"})}return N}),Er=()=>{i.push("/admin/dashboard")},ii=()=>{i.push({name:"AdminProfile"})},Ot=(N=!0)=>{R.value=N},Tr=()=>{me.value=!0},Ir=async N=>{try{N&&(Ce.value={...N});const W=$.value.eventDate,ye=Ce.value.eventDate;if(W!==ye){const we=O.value.filter(lt=>lt.startTime||lt.endTime);if(we.length>0){Me.value=W,Fe.value=ye,qe.value=we.length,ze.value=!0;return}}await ea(!1,null)}catch(W){console.error("Failed to update event:",W),alert("Failed to update event. Please try again.")}},ea=async(N,W)=>{try{if(await r.updateEvent(n.params.eventId,{...Ce.value}),N&&W!==null){const ye=Math.floor(Math.abs(W)/1e3),we=W<0,lt=Math.floor(ye/3600),Bt=Math.floor(ye%3600/60),St=ye%60,bs=`${we?"-":""}${lt.toString().padStart(2,"0")}:${Bt.toString().padStart(2,"0")}:${St.toString().padStart(2,"0")}`;await r.bulkUpdateLocationTimes(n.params.eventId,bs)}await Tt(),me.value=!1}catch(ye){console.error("Failed to update event:",ye),alert("Failed to update event. Please try again.")}},Sr=async({shouldShift:N,timeDelta:W})=>{ze.value=!1,await ea(N,W)},qi=()=>{ze.value=!1,Tt()},Tt=async()=>{try{await r.fetchEvent(n.params.eventId),$.value=r.currentEvent,$.value&&(Ce.value={name:$.value.name||"",description:$.value.description||"",eventDate:Ya($.value.eventDate),timeZoneId:$.value.timeZoneId||"UTC",peopleTerm:$.value.peopleTerm||"Marshals",checkpointTerm:$.value.checkpointTerm||"Checkpoints",areaTerm:$.value.areaTerm||"Areas",checklistTerm:$.value.checklistTerm||"Checklists",courseTerm:$.value.courseTerm||"Course"},me.value=!1,of($.value)),await r.fetchLocations(n.params.eventId),O.value=r.locations,await r.fetchEventStatus(n.params.eventId),T.value=r.eventStatus.locations,await Qi(),await Wi(),await oi(),await Gn(),await ct(),await yt()}catch(N){console.error("Failed to load event data:",N)}},Wi=async()=>{try{const N=await Hn.getByEvent(n.params.eventId);Y.value=N.data}catch(N){console.error("Failed to load marshals:",N)}},oi=async()=>{try{const N=await Ks.getByEvent(n.params.eventId);Je.value=N.data}catch(N){console.error("Failed to load areas:",N)}},Gn=async()=>{try{const[N,W]=await Promise.all([Pt.getByEvent(n.params.eventId),Pt.getReport(n.params.eventId)]);_n.value=N.data,Yo.value=W.data}catch(N){console.error("Failed to load checklists:",N)}},ct=async()=>{try{const N=await os.getByEvent(n.params.eventId);qn.value=N.data}catch(N){console.error("Failed to load notes:",N)}},yt=async()=>{try{const[N,W]=await Promise.all([wi.getByEvent(n.params.eventId),wi.getRoles(n.params.eventId)]);Ui.value=N.data,ln.value=W.data}catch(N){console.error("Failed to load contacts:",N)}},Ds=()=>{He.value=null,R.value=!1,vt.value=!0},Rn=N=>{He.value=N,Lt.value=N.id,R.value=!1,vt.value=!0},ys=async N=>{try{if(He.value&&He.value.id){if(await Ks.update(n.params.eventId,He.value.id,N),N.checklistChanges&&N.checklistChanges.length>0)for(const W of N.checklistChanges)try{W.complete?await Pt.complete(n.params.eventId,W.itemId,{marshalId:W.marshalId,contextType:W.contextType,contextId:W.contextId}):await Pt.uncomplete(n.params.eventId,W.itemId,{marshalId:W.marshalId,contextType:W.contextType,contextId:W.contextId})}catch(ye){console.error("Failed to update checklist item:",W,ye)}}else await Ks.create({eventId:n.params.eventId,...N});await oi(),await Tt(),Qe()}catch(W){console.error("Failed to save area:",W),alert(W.response?.data?.message||"Failed to save area. Please try again.")}},ji=async N=>{m("Delete Area","Are you sure you want to delete this area? Checkpoints will be automatically reassigned.",async()=>{try{await Ks.delete(n.params.eventId,N),await Ks.recalculate(n.params.eventId),await oi(),await Tt(),Qe()}catch(W){console.error("Failed to delete area:",W),alert(W.response?.data?.message||"Failed to delete area. Please try again.")}})},Qe=()=>{vt.value=!1,He.value=null,Lt.value=null,R.value=!1,wt.value=!1,mt.value=null},At=N=>{Qe(),Ne.value=null,gs.value="details",R.value=!1,Os.value=N,jn.value=!0},Gi=N=>{Qe(),Ne.value=N,gs.value="details",R.value=!1,jn.value=!0},ai=()=>{rn.value=null,Fi.value="details",R.value=!1,vs.value=!0},cn=(N,W="details")=>{rn.value=N,Fi.value=W,R.value=!1,vs.value=!0},Mr=async N=>{try{if(rn.value&&rn.value.itemId)await Pt.update(n.params.eventId,rn.value.itemId,N);else{const W=await Pt.create(n.params.eventId,N);W.data.count&&W.data.count>1&&(Ae.value="Checklist Items Created",xe.value=`Successfully created ${W.data.count} checklist items.`,oe.value=!0)}await Gn(),xn()}catch(W){console.error("Failed to save checklist item:",W);const ye=W.response?.data?.message||"Failed to save checklist item. Please try again.";alert(ye)}},ri=async N=>{m("Delete Checklist Item","Are you sure you want to delete this checklist item?",async()=>{try{await Pt.delete(n.params.eventId,N),await Gn(),xn()}catch(W){console.error("Failed to delete checklist item:",W),alert(W.response?.data?.message||"Failed to delete checklist item. Please try again.")}})},xn=()=>{vs.value=!1,rn.value=null,R.value=!1},It=()=>{Wn.value=null,zi.value="details",R.value=!1,si.value=!0},Kn=N=>{Wn.value=N,zi.value="details",R.value=!1,si.value=!0},Rs=async N=>{try{Wn.value&&Wn.value.noteId?await os.update(n.params.eventId,Wn.value.noteId,N):await os.create(n.params.eventId,N),await ct(),Bs()}catch(W){console.error("Failed to save note:",W);const ye=W.response?.data?.message||"Failed to save note. Please try again.";alert(ye)}},Ns=async N=>{m("Delete Note","Are you sure you want to delete this note?",async()=>{try{await os.delete(n.params.eventId,N),await ct(),Bs()}catch(W){console.error("Failed to delete note:",W),alert(W.response?.data?.message||"Failed to delete note. Please try again.")}})},Bs=()=>{si.value=!1,Wn.value=null,R.value=!1},Fs=()=>{Ne.value=null,gs.value="details",Os.value=null,R.value=!1,jn.value=!0},Ki=N=>{Ne.value=N,gs.value="details",R.value=!1,jn.value=!0},Yi=async N=>{try{Ne.value&&Ne.value.contactId?await wi.update(n.params.eventId,Ne.value.contactId,N):await wi.create(n.params.eventId,N),await yt(),zs()}catch(W){console.error("Failed to save contact:",W);const ye=W.response?.data?.message||"Failed to save contact. Please try again.";alert(ye)}},li=async N=>{m("Delete Contact","Are you sure you want to delete this contact?",async()=>{try{await wi.delete(n.params.eventId,N),await yt(),zs()}catch(W){console.error("Failed to delete contact:",W),alert(W.response?.data?.message||"Failed to delete contact. Please try again.")}})},zs=()=>{jn.value=!1,Ne.value=null,Os.value=null,R.value=!1},Ji=N=>{if(mt.value=N,vt.value=!1,P.value){const W=P.value.getMapCenter(),ye=P.value.getMapZoom();W&&ye!==null&&(Be.value=W,Ut.value=ye)}gt.value=!0,it.value="draw-area",wt.value=!0,Et.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},Us=N=>{mt.value?He.value={...He.value||{},...mt.value,polygon:N}:He.value={...He.value,polygon:N}},ta=N=>{te.value=N},Xi=()=>{wt.value=!1,mt.value&&(He.value=mt.value,vt.value=!0,mt.value=null)},Qi=async()=>{try{const N=await hl.getAdmins(n.params.eventId);V.value=N.data}catch(N){console.error("Failed to load event admins:",N)}},et=async N=>{try{await hl.addAdmin(n.params.eventId,N),await Qi(),pt()}catch(W){console.error("Failed to add admin:",W),alert(W.response?.data?.message||"Failed to add administrator. Please try again.")}},yn=async N=>{m("Remove Administrator",`Remove ${N} as an administrator?`,async()=>{try{await hl.removeAdmin(n.params.eventId,N),await Qi()}catch(W){console.error("Failed to remove admin:",W),alert(W.response?.data?.message||"Failed to remove administrator. Please try again.")}})},pt=()=>{ae.value=!1,R.value=!1},na=async N=>{if(!N){fe.value="Please select a GPX file";return}Te.value=!0,fe.value=null;try{await Gs.uploadGpx(n.params.eventId,N),await Tt(),ci()}catch(W){console.error("Failed to upload route:",W),fe.value=W.response?.data?.message||"Failed to upload route. Please try again."}finally{Te.value=!1}},ci=()=>{ge.value=!1,fe.value=null},eo=async({file:N,deleteExisting:W})=>{if(!N){pe.value="Please select a CSV file";return}se.value=!0,pe.value=null,Le.value=null;try{const ye=await Ts.importCsv(n.params.eventId,N,W);Le.value=ye.data,await Tt(),ui();const we=ye.data;let lt=`<p>Created <strong>${we.locationsCreated}</strong> location(s) and <strong>${we.assignmentsCreated}</strong> assignment(s)</p>`;we.errors&&we.errors.length>0&&(lt+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',we.errors.forEach(Bt=>{lt+=`<li>${Bt}</li>`}),lt+="</ul>"),Ae.value="Import Complete",xe.value=lt,oe.value=!0}catch(ye){console.error("Failed to import locations:",ye),pe.value=ye.response?.data?.message||"Failed to import locations. Please try again."}finally{se.value=!1}},ui=()=>{j.value=!1,pe.value=null,Le.value=null},Yn=async N=>{if(w.value)Ge.value.latitude=N.lat,Ge.value.longitude=N.lng;else if(Se.value)Re.value.latitude=N.lat,Re.value.longitude=N.lng,x.value&&(x.value={...x.value,latitude:N.lat,longitude:N.lng}),Se.value=!1,he.value=!0,Ot();else if(en.value)try{await r.createLocation({eventId:n.params.eventId,name:`Checkpoint ${zt.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""}),zt.value++,await Tt()}catch(W){console.error("Failed to create checkpoint:",W),alert("Failed to create checkpoint. Please try again.")}},to=N=>{it.value==="place-checkpoint"||it.value==="move-checkpoint"?_t.value=N:it.value==="add-multiple"&&oa(N)},Hs=N=>{Ge.value={...N}},Ht=()=>{w.value=!1,_t.value=null,gt.value=!0,it.value="place-checkpoint",Et.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},Jn=()=>{if(P.value){const N=P.value.getMapCenter(),W=P.value.getMapZoom();N&&W!==null&&(Be.value=N,Ut.value=W)}Ge.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},_t.value=null,gt.value=!0,it.value="place-checkpoint",Et.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},sa=()=>{if(P.value){const N=P.value.getMapCenter(),W=P.value.getMapZoom();N&&W!==null&&(Be.value=N,Ut.value=W)}He.value={id:null,name:"",description:"",color:"#667eea",polygon:[],checkpointIds:[],marshalIds:[],displayOrder:Je.value.length},gt.value=!0,it.value="draw-area",wt.value=!0,Et.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},ia=()=>{x.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},Re.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},F.value=[],q.value=[],R.value=!1,he.value=!0},Pr=()=>{const N=T.value.map(W=>{const ye=W.name.match(/^Checkpoint (\d+)$/);return ye?parseInt(ye[1]):0}).filter(W=>W>0);if(zt.value=N.length>0?Math.max(...N)+1:1,P.value){const W=P.value.getMapCenter(),ye=P.value.getMapZoom();W&&ye!==null&&(Be.value=W,Ut.value=ye)}gt.value=!0,it.value="add-multiple",en.value=!0,Et.value={title:"Add multiple checkpoints",description:`Click on map to add checkpoints. Next: Checkpoint ${zt.value}`}},oa=N=>{re.value.push({id:`temp-${zt.value}`,name:`Checkpoint ${zt.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",assignments:[],isTemporary:!0}),zt.value++,Et.value={...Et.value,description:`Click on map to add checkpoints. Next: Checkpoint ${zt.value}`}},no=()=>{if(it.value==="place-checkpoint"){const N=_t.value||{lat:0,lng:0};x.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},Re.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""},F.value=[],q.value=[],R.value=!1,at(),he.value=!0}else if(it.value==="move-checkpoint")_t.value&&(Re.value.latitude=_t.value.lat,Re.value.longitude=_t.value.lng,x.value&&(x.value={...x.value,...ue.value||{},latitude:_t.value.lat,longitude:_t.value.lng}),Ot()),ue.value=null,at(),he.value=!0;else if(it.value==="draw-area"){if(te.value&&te.value.length>=3){const N=te.value.map(W=>({lat:W.lat,lng:W.lng}));mt.value?He.value={...He.value||{},...mt.value,polygon:N}:He.value={...He.value||{},polygon:N}}wt.value=!1,at(),vt.value=!0,mt.value=null,te.value=null}else it.value==="add-multiple"&&$r()},$r=async()=>{const N=[...re.value];try{for(const W of N)await r.createLocation({eventId:n.params.eventId,name:W.name,description:W.description,latitude:W.latitude,longitude:W.longitude,requiredMarshals:W.requiredMarshals,what3Words:W.what3Words});re.value=[],en.value=!1,at(),await Tt()}catch(W){console.error("Failed to create checkpoints:",W),alert("Failed to create checkpoints. Please try again.")}},aa=()=>{it.value==="draw-area"?(mt.value&&(He.value=mt.value,vt.value=!0,mt.value=null),wt.value=!1,te.value=null):it.value==="add-multiple"&&(re.value=[],en.value=!1),at()},at=()=>{gt.value=!1,it.value=null,Et.value={},_t.value=null,Be.value=null,Ut.value=null,wt.value&&(wt.value=!1)},Or=N=>{jt(N)},jt=N=>{x.value=N,Re.value={id:N.id,name:N.name,description:N.description||"",latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||""},F.value=[],q.value=[],R.value=!1,he.value=!0,setTimeout(()=>{P.value?.scrollMapIntoView()},100)},Vs=async N=>{if(!Ja(N.what3Words)){alert("Invalid What3Words format. Please use word.word.word or word/word/word (lowercase letters only, 1-20 characters each)");return}try{await r.createLocation({eventId:n.params.eventId,...N}),await Tt(),so()}catch(W){console.error("Failed to save location:",W),alert("Failed to save location. Please try again.")}},so=()=>{w.value=!1,Ge.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},R.value=!1,R.value=!1},io=()=>{he.value=!1,x.value=null,Se.value=!1,ve.value=!1,ue.value=null,Re.value={id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},F.value=[],q.value=[],R.value=!1},Zs=()=>{ve.value=!1},Dr=N=>{if(N?.formData&&(ue.value=N.formData),he.value=!1,_t.value=null,P.value){const ye=P.value.getMapCenter(),we=P.value.getMapZoom();ye&&we!==null&&(Be.value=ye,Ut.value=we)}const W=ue.value?.name||x.value?.name;gt.value=!0,it.value="move-checkpoint",Et.value={title:`Move ${A.value.checkpoint}: ${W}`,description:"Click on the map to set the new location"}},ra=async N=>{if(!Ja(N.what3Words)){alert("Invalid What3Words format.");return}try{const W=!x.value.id;if(W){const ye=await r.createLocation({eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const we of N.pendingAssignments)await r.createAssignment({eventId:n.params.eventId,locationId:ye.id,marshalId:we.marshalId})}else{const ye=x.value.id;if(await Ts.update(n.params.eventId,ye,{eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const we of N.pendingNewChecklistItems)we.text?.trim()&&await Pt.create(n.params.eventId,{text:we.text,scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[ye]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const we of N.pendingNewNotes)!we.title?.trim()&&!we.content?.trim()||await os.create(n.params.eventId,{title:we.title||"Untitled",content:we.content||"",scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[ye]}],displayOrder:0,priority:"Normal",isPinned:!1});for(const we of q.value)await r.deleteAssignment(n.params.eventId,we);for(const we of F.value)await r.createAssignment({eventId:n.params.eventId,locationId:x.value.id,marshalId:we.marshalId});if(N.checkInChanges&&N.checkInChanges.length>0)for(const we of N.checkInChanges){const lt=x.value.assignments.find(Bt=>Bt.id===we.assignmentId);lt&&lt.isCheckedIn!==we.shouldBeCheckedIn&&await Ci.adminCheckIn(n.params.eventId,we.assignmentId)}}if(!W&&N.checklistChanges&&N.checklistChanges.length>0)for(const ye of N.checklistChanges)try{ye.complete?await Pt.complete(n.params.eventId,ye.itemId,{marshalId:ye.marshalId,contextType:ye.contextType,contextId:ye.contextId}):await Pt.uncomplete(n.params.eventId,ye.itemId,{marshalId:ye.marshalId,contextType:ye.contextType,contextId:ye.contextId})}catch(we){console.error("Failed to update checklist item:",ye,we)}await Tt(),io()}catch(W){console.error("Failed to update location:",W),alert("Failed to update location. Please try again.")}},Rr=async N=>{m("Delete Location","Are you sure you want to delete this location?",async()=>{try{await Ts.delete(n.params.eventId,N),await Tt(),io()}catch(W){console.error("Failed to delete location:",W),alert("Failed to delete location. Please try again.")}})},Nr=N=>{if(N.toString().startsWith("temp-")){const W=x.value.assignments.find(ye=>ye.id===N);W&&(F.value=F.value.filter(ye=>ye.marshalId!==W.marshalId)),x.value.assignments=x.value.assignments.filter(ye=>ye.id!==N),Ot()}else q.value.includes(N)||(q.value.push(N),x.value.assignments=x.value.assignments.filter(W=>W.id!==N),Ot())},oo=async N=>{await la(N)},la=async N=>{const W=Y.value.find(we=>we.id===N);if(!W)return;const ye=T.value.filter(we=>we.assignments?.some(lt=>lt.marshalId===N&&we.id!==x.value.id));if(ye.length>0){de.value={marshalName:W.name,locations:ye.map(lt=>lt.name),marshal:W};const we=await new Promise(lt=>{H.value=lt,le.value=!0});if(we==="cancel"||we==="choose-other")return;if(we==="move")for(const lt of ye){const Bt=lt.assignments.find(St=>St.marshalId===N);if(Bt){q.value.push(Bt.id);const St=T.value.findIndex(bs=>bs.id===lt.id);St!==-1&&(T.value[St].assignments=T.value[St].assignments.filter(bs=>bs.id!==Bt.id))}}}F.value.push({marshalId:W.id,marshalName:W.name}),x.value.assignments||(x.value.assignments=[]),x.value.assignments.push({id:`temp-${Date.now()}`,marshalId:W.id,marshalName:W.name,locationId:x.value.id,isCheckedIn:!1,isPending:!0}),Ot(),Zs()},bn=async N=>{try{const ye=(await Hn.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber})).data;await Wi(),F.value.push({marshalId:ye.id,marshalName:ye.name}),Ot(),Zs()}catch(W){console.error("Failed to create marshal:",W),alert("Failed to create marshal. Please try again.")}},Br=()=>{ke.value=null,Xe.value={id:"",name:"",email:"",phoneNumber:"",notes:""},ie.value=[],ce.value=[],R.value=!1,X.value=!0},ca=N=>{ke.value=N,Xe.value={id:N.id,name:N.name,email:N.email||"",phoneNumber:N.phoneNumber||"",notes:N.notes||""},ie.value=[],ce.value=[],R.value=!1,X.value=!0},An=()=>{if(!ke.value)return[];const N=[];return T.value.forEach(W=>{W.assignments.filter(we=>we.marshalName===ke.value.name).forEach(we=>{N.push({...we,locationName:W.name})})}),N},ua=async N=>{try{let W=ke.value?.id,ye=!1;if(ke.value){if(await Hn.update(n.params.eventId,ke.value.id,{name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const we of N.pendingNewChecklistItems)we.text?.trim()&&await Pt.create(n.params.eventId,{text:we.text,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[W]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const we of N.pendingNewNotes)!we.title?.trim()&&!we.content?.trim()||await os.create(n.params.eventId,{title:we.title||"Untitled",content:we.content||"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[W]}],displayOrder:0,priority:"Normal",isPinned:!1})}else W=(await Hn.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]})).data.id,ye=!0;for(const we of ce.value)await r.deleteAssignment(n.params.eventId,we);for(const we of ie.value)await r.createAssignment({eventId:n.params.eventId,locationId:we.locationId,marshalId:W});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const we of N.pendingAssignments)await r.createAssignment({eventId:n.params.eventId,locationId:we.locationId,marshalId:W});if(N.checkInChanges&&N.checkInChanges.length>0){const we=An();for(const lt of N.checkInChanges){const Bt=we.find(St=>St.id===lt.assignmentId);Bt&&Bt.isCheckedIn!==lt.shouldBeCheckedIn&&await Ci.adminCheckIn(n.params.eventId,lt.assignmentId)}}if(N.checklistChanges&&N.checklistChanges.length>0)for(const we of N.checklistChanges)try{const lt={marshalId:W};we.contextType&&we.contextId&&(lt.contextType=we.contextType,lt.contextId=we.contextId),we.complete?await Pt.complete(n.params.eventId,we.itemId,lt):await Pt.uncomplete(n.params.eventId,we.itemId,lt)}catch(lt){console.error("Failed to process checklist change:",lt);const Bt=lt.response?.data?.message||"Failed to update checklist item";alert(`Error: ${Bt}`)}await Tt(),di(),ye&&(I.value=W,Z.value=N.name,C.value=!0)}catch(W){console.error("Failed to save marshal:",W),alert("Failed to save marshal. Please try again.")}},ao=async N=>{m("Delete Marshal","Are you sure you want to delete this marshal?",async()=>{try{await Hn.delete(n.params.eventId,N),await Tt(),di()}catch(W){console.error("Failed to delete marshal:",W),alert("Failed to delete marshal. Please try again.")}})},ro=N=>{ao(N.id)},Fr=N=>{ce.value.includes(N)||(ce.value.push(N),Ot())},da=N=>{ie.value.push({locationId:N}),Ot()},di=()=>{X.value=!1,ke.value=null,Xe.value={id:"",name:"",email:"",phoneNumber:"",notes:""},ie.value=[],ce.value=[],R.value=!1},zr=async({file:N})=>{if(!N){pe.value="Please select a CSV file";return}Ee.value=!0,pe.value=null,J.value=null;try{const W=await Hn.importCsv(n.params.eventId,N);J.value=W.data,await Tt(),ha();const ye=W.data;let we=`<p>Created <strong>${ye.marshalsCreated}</strong> marshal(s) and <strong>${ye.assignmentsCreated}</strong> assignment(s)</p>`;ye.errors&&ye.errors.length>0&&(we+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',ye.errors.forEach(lt=>{we+=`<li>${lt}</li>`}),we+="</ul>"),Ae.value="Import Complete",xe.value=we,oe.value=!0}catch(W){console.error("Failed to import marshals:",W),pe.value=W.response?.data?.message||"Failed to import marshals. Please try again."}finally{Ee.value=!1}},ha=()=>{G.value=!1,pe.value=null,J.value=null},lo=N=>{H.value&&(H.value(N),H.value=null),le.value=!1},Ur=async({assignment:N,status:W})=>{try{if(W==="not-checked-in"?N.isCheckedIn&&await Ci.adminCheckIn(n.params.eventId,N.id):N.isCheckedIn||await Ci.adminCheckIn(n.params.eventId,N.id),await Tt(),x.value){const ye=T.value.find(we=>we.id===x.value.id);ye&&(x.value=ye)}}catch(ye){console.error("Failed to change assignment status:",ye),alert("Failed to change status. Please try again.")}};return On(async()=>{await Tt();try{const N=await cs.getMe(n.params.eventId);Hi.value=N.data}catch(N){console.warn("Failed to fetch user claims:",N)}}),(N,W)=>(g(),y("div",$M,[u("header",OM,[u("div",DM,[u("button",{onClick:Er,class:"btn-back",title:"Back to Dashboard"}," Dashboard"),$.value?(g(),y("div",RM,[u("h1",null,E($.value.name),1),u("p",NM,E(z(Jb)($.value.eventDate)),1)])):B("",!0)]),u("div",BM,[Vi.value?(g(),y("button",{key:0,onClick:Jo,class:"btn btn-marshal-mode"}," Switch to Marshal ")):B("",!0),u("button",{onClick:ii,class:"btn btn-secondary"},"Profile")])]),u("div",FM,[u("div",zM,[De(z1,{tabs:M.value,"model-value":z(s),"onUpdate:modelValue":z(a)},null,8,["tabs","model-value","onUpdate:modelValue"])]),u("div",UM,[z(s)==="course"?(g(),tt(Ck,{key:0,ref_key:"courseAreasTab",ref:P,checkpoints:T.value,areas:Je.value,route:$.value?.route||[],selectedAreaId:Lt.value,drawingMode:wt.value,onMapClick:Yn,onLocationClick:Or,onAreaClick:Rn,onImportCheckpoints:W[0]||(W[0]=ye=>j.value=!0),onUploadRoute:W[1]||(W[1]=ye=>ge.value=!0),onSelectLocation:jt,onAddArea:Ds,onSelectArea:Rn,onPolygonComplete:Us,onCancelDrawing:Xi,onAddCheckpointFromMap:Jn,onAddManyCheckpointsFromMap:Pr,onAddAreaFromMap:sa},null,8,["checkpoints","areas","route","selectedAreaId","drawingMode"])):B("",!0),z(s)==="checkpoints"?(g(),y("div",HM,[De(m1,{locations:T.value,areas:Je.value,onAddCheckpointManually:ia,onImportCheckpoints:W[2]||(W[2]=ye=>j.value=!0),onSelectLocation:jt},null,8,["locations","areas"])])):B("",!0),z(s)==="areas"?(g(),y("div",VM,[De(T1,{areas:Je.value,checkpoints:T.value,onAddArea:Ds,onSelectArea:Rn},null,8,["areas","checkpoints"])])):B("",!0),z(s)==="marshals"?(g(),tt(zk,{key:3,marshals:Y.value,assignments:Zi.value,locations:T.value,onAddMarshal:Br,onImportMarshals:W[3]||(W[3]=ye=>G.value=!0),onSelectMarshal:ca,onDeleteMarshal:ro,onChangeAssignmentStatus:Ur},null,8,["marshals","assignments","locations"])):B("",!0),z(s)==="checklists"?(g(),tt(yw,{key:4,"checklist-items":_n.value,areas:Je.value,locations:T.value,marshals:Y.value,"completion-report":Yo.value,onAddChecklistItem:ai,onSelectChecklistItem:cn},null,8,["checklist-items","areas","locations","marshals","completion-report"])):B("",!0),z(s)==="notes"?(g(),tt(qw,{key:5,notes:qn.value,areas:Je.value,locations:T.value,marshals:Y.value,onAddNote:It,onSelectNote:Kn},null,8,["notes","areas","locations","marshals"])):B("",!0),z(s)==="contacts"?(g(),tt(mC,{key:6,contacts:Ui.value,areas:Je.value,locations:T.value,marshals:Y.value,"available-roles":ln.value,onAddContact:Fs,onSelectContact:Ki},null,8,["contacts","areas","locations","marshals","available-roles"])):B("",!0),z(s)==="details"?(g(),tt(t1,{key:7,"event-data":Ce.value,admins:V.value,"form-dirty":me.value,onSubmit:Ir,onAddAdmin:W[4]||(W[4]=ye=>ae.value=!0),onRemoveAdmin:yn,"onUpdate:formDirty":Tr},null,8,["event-data","admins","form-dirty"])):B("",!0)])]),De(PM,{show:w.value,location:Ge.value,isDirty:R.value,onClose:so,onSave:Vs,onSetOnMap:Ht,"onUpdate:isDirty":Ot,"onUpdate:location":Hs},null,8,["show","location","isDirty"]),De(vA,{show:he.value,location:x.value,assignments:x.value?.assignments||[],"event-date":$.value?.eventDate||"",areas:Je.value,"event-id":z(n).params.eventId,"all-locations":T.value,notes:qn.value,"available-marshals":Xo.value,"all-checklist-items":_n.value,isDirty:R.value,onClose:io,onSave:ra,onDelete:Rr,onMoveLocation:Dr,onRemoveAssignment:Nr,onAssignMarshal:oo,"onUpdate:isDirty":Ot},null,8,["show","location","assignments","event-date","areas","event-id","all-locations","notes","available-marshals","all-checklist-items","isDirty"]),De(Z1,{show:k.value,link:_s.value,isDirty:!1,onClose:W[5]||(W[5]=ye=>k.value=!1)},null,8,["show","link"]),De(iL,{show:C.value,"event-id":z(n).params.eventId,"marshal-id":I.value,"marshal-name":Z.value,onClose:W[6]||(W[6]=ye=>C.value=!1)},null,8,["show","event-id","marshal-id","marshal-name"]),De(rL,{show:ae.value,isDirty:R.value,onClose:pt,onSubmit:et,"onUpdate:isDirty":Ot},null,8,["show","isDirty"]),De(hL,{show:ge.value,uploading:Te.value,error:fe.value,isDirty:R.value,onClose:ci,onSubmit:na,"onUpdate:isDirty":Ot},null,8,["show","uploading","error","isDirty"]),De(wL,{show:j.value,importing:se.value,error:pe.value,result:Le.value,isDirty:R.value,onClose:ui,onSubmit:eo,"onUpdate:isDirty":Ot},null,8,["show","importing","error","result","isDirty"]),De(yT,{show:X.value,marshal:ke.value,"event-id":z(n).params.eventId,assignments:An(),availableLocations:Lr.value,allLocations:T.value,areas:Je.value,isEditing:!!ke.value,eventNotes:qn.value,allChecklistItems:_n.value,isDirty:R.value,onClose:di,onSave:ua,onDelete:ao,onRemoveAssignment:Fr,onAssignToLocation:da,"onUpdate:isDirty":Ot},null,8,["show","marshal","event-id","assignments","availableLocations","allLocations","areas","isEditing","eventNotes","allChecklistItems","isDirty"]),De(SL,{show:G.value,importing:Ee.value,error:pe.value,result:J.value,isDirty:R.value,onClose:ha,onSubmit:zr,"onUpdate:isDirty":Ot},null,8,["show","importing","error","result","isDirty"]),De(CT,{show:le.value,conflictData:de.value,onClose:W[7]||(W[7]=ye=>le.value=!1),onChoice:lo},null,8,["show","conflictData"]),De($T,{show:ve.value,locationName:x.value?.name||"",marshals:Xo.value,onClose:Zs,onAssignExisting:la,onCreateAndAssign:bn},null,8,["show","locationName","marshals"]),De(qT,{show:ze.value,"old-event-date":Me.value,"new-event-date":Fe.value,"affected-checkpoints-count":qe.value,onConfirm:Sr,onCancel:qi},null,8,["show","old-event-date","new-event-date","affected-checkpoints-count"]),De(RI,{show:vt.value,area:He.value,checkpoints:T.value,marshals:Y.value,areas:Je.value,isDirty:R.value,"event-id":z(n).params.eventId,"all-locations":T.value,assignments:Zi.value,notes:qn.value,contacts:Ui.value,onClose:Qe,onSave:ys,onDelete:ji,onDrawBoundary:Ji,"onUpdate:isDirty":Ot,onSelectCheckpoint:jt,onAddAreaContact:At,onEditContact:Gi},null,8,["show","area","checkpoints","marshals","areas","isDirty","event-id","all-locations","assignments","notes","contacts"]),De(IS,{show:vs.value,"checklist-item":rn.value,"initial-tab":Fi.value,areas:Je.value,locations:T.value,marshals:Y.value,isDirty:R.value,onClose:xn,onSave:Mr,onDelete:ri,"onUpdate:isDirty":Ot},null,8,["show","checklist-item","initial-tab","areas","locations","marshals","isDirty"]),De(ZS,{show:si.value,note:Wn.value,"initial-tab":zi.value,areas:Je.value,locations:T.value,marshals:Y.value,isDirty:R.value,onClose:Bs,onSave:Rs,onDelete:Ns,"onUpdate:isDirty":Ot},null,8,["show","note","initial-tab","areas","locations","marshals","isDirty"]),De(hM,{show:jn.value,contact:Ne.value,"initial-tab":gs.value,areas:Je.value,locations:T.value,marshals:Y.value,"available-roles":ln.value,isDirty:R.value,"preselected-area":Os.value,onClose:zs,onSave:Yi,onDelete:li,"onUpdate:isDirty":Ot},null,8,["show","contact","initial-tab","areas","locations","marshals","available-roles","isDirty","preselected-area"]),De(kM,{show:gt.value,mode:it.value,"context-title":Et.value.title,"context-description":Et.value.description,"can-complete":xr.value,clickable:it.value!=="draw-area","drawing-mode":it.value==="draw-area"&&wt.value,locations:Ar.value,areas:Qo.value,route:$.value?.route||[],"selected-area-id":Lt.value,center:Be.value,zoom:Ut.value,onMapClick:to,onPolygonComplete:Us,onPolygonDrawing:ta,onDone:no,onCancel:aa},null,8,["show","mode","context-title","context-description","can-complete","clickable","drawing-mode","locations","areas","route","selected-area-id","center","zoom"]),De(Cr,{show:oe.value,title:Ae.value,message:xe.value,onClose:W[8]||(W[8]=ye=>oe.value=!1)},null,8,["show","title","message"]),De(kr,{show:z(l),title:z(d),message:z(h),onConfirm:z(f),onCancel:z(v)},null,8,["show","title","message","onConfirm","onCancel"])]))}},qM=Ze(ZM,[["__scopeId","data-v-c6104681"]]),WM={key:0,class:"emergency-contacts-list"},jM={class:"contact-header"},GM={key:0,class:"role-badge"},KM={class:"contact-details"},YM={key:0,class:"info-section"},JM=["href"],XM={key:1,class:"info-section"},QM=["href"],eP={key:2,class:"info-section"},tP=["href"],nP={key:1,class:"no-contacts"},sP={__name:"EmergencyContactModal",props:{show:{type:Boolean,default:!1},contacts:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n}){const i=n,r=()=>{i("close")},s=a=>a?{EmergencyContact:"Emergency Contact",EventDirector:"Event Director",MedicalLead:"Medical Lead",SafetyOfficer:"Safety Officer",Logistics:"Logistics"}[a]||a.replace(/([A-Z])/g," $1").trim():"";return(a,l)=>(g(),tt(Nt,{show:e.show,title:"Emergency Contact Information",size:"medium",onClose:r},{actions:Ke(()=>[u("button",{onClick:r,class:"btn btn-secondary"},"Close")]),default:Ke(()=>[e.contacts&&e.contacts.length>0?(g(),y("div",WM,[(g(!0),y(be,null,Pe(e.contacts,d=>(g(),y("div",{key:d.contactId||d.name,class:"emergency-contact-item"},[u("div",jM,[u("h3",null,E(d.name),1),d.role?(g(),y("span",GM,E(s(d.role)),1)):B("",!0)]),u("div",KM,[d.phone?(g(),y("div",YM,[l[0]||(l[0]=u("label",null,"Phone Number",-1)),u("a",{href:`tel:${d.phone}`,class:"phone-link"},E(d.phone),9,JM)])):B("",!0),d.email?(g(),y("div",XM,[l[1]||(l[1]=u("label",null,"Email",-1)),u("a",{href:`mailto:${d.email}`,class:"email-link"},E(d.email),9,QM)])):B("",!0),d.notes||d.details?(g(),y("div",eP,[l[2]||(l[2]=u("label",null,"Details",-1)),u("p",null,E(d.notes||d.details),1)])):B("",!0)]),d.phone?(g(),y("a",{key:0,href:`tel:${d.phone}`,class:"btn btn-danger btn-full"}," Call "+E(d.name),9,tP)):B("",!0)]))),128))])):(g(),y("div",nP,[...l[3]||(l[3]=[u("p",null,"No emergency contacts have been set up for this event.",-1)])]))]),_:1},8,["show"]))}},iP=Ze(sP,[["__scopeId","data-v-8b9139a4"]]),oP={class:"area-lead-content"},aP={key:0,class:"loading-state"},rP={key:1,class:"error-state"},lP={key:2,class:"empty-state"},cP={key:3,class:"checkpoint-accordion"},uP=["onClick"],dP={class:"checkpoint-header-content"},hP={class:"checkpoint-title-row"},fP={class:"checkpoint-name"},pP={key:0,class:"area-badge"},mP={key:0,class:"checkpoint-description-preview"},vP={class:"checkpoint-status-row"},gP={class:"status-badge marshals-status"},_P={key:0,class:"status-badge tasks-status"},yP={class:"accordion-icon"},bP={key:0,class:"checkpoint-accordion-content"},kP={class:"checkpoint-mini-map"},wP={class:"checkpoint-marshals-section"},CP={class:"marshals-label"},LP={key:0,class:"empty-state"},xP={key:1,class:"marshals-list"},AP=["onClick"],EP={class:"marshal-header"},TP={class:"marshal-name-row"},IP={class:"marshal-name"},SP={key:0,class:"task-count"},MP={key:0,class:"check-in-time"},PP={key:0},$P={key:0,class:"checkpoint-tasks-section"},OP={class:"marshals-label"},DP={class:"tasks-list"},RP=["disabled","onChange"],NP={class:"task-text"},BP={key:0,class:"marshal-details-modal"},FP={class:"details-section"},zP={class:"contact-info"},UP={key:0,class:"contact-row"},HP=["href"],VP={key:1,class:"contact-row"},ZP=["href"],qP={key:2,class:"no-contact"},WP={class:"details-section"},jP={key:0,class:"checked-in-details"},GP={class:"check-time-detail"},KP={key:0,class:"check-method"},YP={key:1,class:"not-checked-in"},JP={class:"details-section"},XP={key:0,class:"no-tasks"},QP={key:1,class:"tasks-list modal-tasks"},e$=["disabled","onChange"],t$={class:"task-text"},n$={class:"details-section contact-actions-section"},s$={class:"contact-buttons"},i$=["href"],o$=["href"],a$=["href"],r$={__name:"AreaLeadSection",props:{eventId:{type:String,required:!0},areaIds:{type:Array,default:()=>[]},marshalId:{type:String,required:!0},route:{type:Array,default:()=>[]}},emits:["checklist-updated","loaded"],setup(e,{expose:n,emit:i}){const{terms:r,termsLower:s}=dt(),a=e,l=i,d=D(!1),h=D(null),m=D([]),f=D([]),v=D(null),b=D(!1),A=ne(()=>[...f.value].sort((fe,j)=>dn(fe.name,j.name))),M=(fe,j=60)=>fe?fe.length<=j?fe:fe.substring(0,j).trim()+"...":"";n({areas:m,checkpoints:f,loading:d});const $=D(!1),O=D(null),T=D(null),x=async()=>{if(!(!a.eventId||a.areaIds.length===0)){d.value=!0,h.value=null;try{const fe=await Ks.getAreaLeadDashboard(a.eventId);m.value=fe.data.areas||[],f.value=fe.data.checkpoints||[]}catch(fe){console.error("Failed to load area lead dashboard:",fe),h.value=fe.response?.data?.message||"Failed to load dashboard"}finally{d.value=!1}}},w=fe=>{v.value=v.value===fe?null:fe},P=fe=>fe.marshals.filter(j=>j.isCheckedIn).length,k=fe=>{const j=fe.marshals.reduce((G,se)=>G+se.outstandingTaskCount,0);return fe.outstandingTaskCount+j},C=(fe,j)=>{O.value=fe,T.value=j,$.value=!0},I=()=>{$.value=!1,O.value=null,T.value=null},Z=async(fe,j)=>{if(!b.value){b.value=!0;try{const G=j.marshals.length>0?j.marshals[0].marshalId:a.marshalId;await Pt.complete(a.eventId,fe.itemId,{marshalId:G,contextType:fe.contextType,contextId:fe.contextId}),await x(),l("checklist-updated")}catch(G){console.error("Failed to complete task:",G)}finally{b.value=!1}}},V=async fe=>{if(!(b.value||!O.value)){b.value=!0;try{if(await Pt.complete(a.eventId,fe.itemId,{marshalId:O.value.marshalId,contextType:fe.contextType,contextId:fe.contextId}),await x(),O.value&&T.value){const j=f.value.find(G=>G.checkpointId===T.value.checkpointId);if(j){const G=j.marshals.find(se=>se.marshalId===O.value.marshalId);G&&(O.value=G)}}l("checklist-updated")}catch(j){console.error("Failed to complete task:",j)}finally{b.value=!1}}},ae=fe=>fe?new Date(fe).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",ge=fe=>fe?new Date(fe).toLocaleString():"",Te=fe=>({GPS:"GPS",Manual:"Manual",Admin:"Admin"})[fe]||fe;return We(()=>[a.eventId,a.areaIds],()=>{x()},{immediate:!0}),(fe,j)=>(g(),y("div",oP,[d.value?(g(),y("div",aP," Loading dashboard... ")):h.value?(g(),y("div",rP,[u("p",null,E(h.value),1),u("button",{onClick:x,class:"btn btn-secondary"},"Retry")])):A.value.length===0?(g(),y("div",lP,[u("p",null,"No "+E(z(s).checkpoints)+" in your "+E(z(s).areas)+".",1)])):(g(),y("div",cP,[(g(!0),y(be,null,Pe(A.value,G=>(g(),y("div",{key:G.checkpointId,class:"checkpoint-accordion-section"},[u("button",{class:Ue(["checkpoint-accordion-header",{active:v.value===G.checkpointId}]),onClick:se=>w(G.checkpointId)},[u("div",dP,[u("div",hP,[u("span",fP,E(G.name),1),G.areaName?(g(),y("span",pP,E(G.areaName),1)):B("",!0)]),G.description?(g(),y("div",mP,E(M(G.description)),1)):B("",!0),u("div",vP,[u("span",gP,E(P(G))+" / "+E(G.marshals.length)+" checked in ",1),k(G)>0?(g(),y("span",_P,E(k(G))+" tasks ",1)):B("",!0)])]),u("span",yP,E(v.value===G.checkpointId?"":"+"),1)],10,uP),v.value===G.checkpointId?(g(),y("div",bP,[u("div",kP,[De(zo,{locations:[{id:G.checkpointId,name:G.name,description:G.description,latitude:G.latitude,longitude:G.longitude}],route:e.route,center:{lat:G.latitude,lng:G.longitude},zoom:16,"highlight-location-id":G.checkpointId,"marshal-mode":!0},null,8,["locations","route","center","highlight-location-id"])]),u("div",wP,[u("div",CP,E(z(r).people)+" ("+E(G.marshals.length)+")",1),G.marshals.length===0?(g(),y("div",LP," No "+E(z(s).people)+" assigned to this "+E(z(s).checkpoint)+". ",1)):(g(),y("div",xP,[(g(!0),y(be,null,Pe(G.marshals,se=>(g(),y("div",{key:se.marshalId,class:Ue(["marshal-card",{"is-checked-in":se.isCheckedIn}]),onClick:Ee=>C(se,G)},[u("div",EP,[u("div",TP,[u("span",IP,E(se.name),1),se.outstandingTaskCount>0?(g(),y("span",SP,E(se.outstandingTaskCount)+" tasks ",1)):B("",!0)]),u("div",{class:Ue(["check-status",{"checked-in":se.isCheckedIn}])},E(se.isCheckedIn?" Checked In":"Not Checked In"),3)]),se.isCheckedIn&&se.checkInTime?(g(),y("div",MP,[Ve(E(ae(se.checkInTime))+" ",1),se.checkInMethod?(g(),y("span",PP," ("+E(Te(se.checkInMethod))+")",1)):B("",!0)])):B("",!0)],10,AP))),128))]))]),G.outstandingTaskCount>0?(g(),y("div",$P,[u("div",OP,"Outstanding "+E(z(s).checkpoint)+" tasks ("+E(G.outstandingTaskCount)+")",1),u("div",DP,[(g(!0),y(be,null,Pe(G.outstandingTasks,se=>(g(),y("div",{key:se.itemId,class:"task-item"},[u("input",{type:"checkbox",disabled:b.value,onChange:Ee=>Z(se,G)},null,40,RP),u("span",NP,E(se.text),1)]))),128))])])):B("",!0)])):B("",!0)]))),128))])),De(Nt,{show:$.value,title:O.value?.name||"Marshal Details",size:"large",onClose:I},{actions:Ke(()=>[u("button",{onClick:I,class:"btn btn-secondary"},"Close")]),default:Ke(()=>[O.value?(g(),y("div",BP,[u("div",FP,[j[2]||(j[2]=u("h4",null,"Contact Details",-1)),u("div",zP,[O.value.email?(g(),y("div",UP,[j[0]||(j[0]=u("span",{class:"contact-label"},"Email:",-1)),u("a",{href:`mailto:${O.value.email}`},E(O.value.email),9,HP)])):B("",!0),O.value.phoneNumber?(g(),y("div",VP,[j[1]||(j[1]=u("span",{class:"contact-label"},"Phone:",-1)),u("a",{href:`tel:${O.value.phoneNumber}`},E(O.value.phoneNumber),9,ZP)])):B("",!0),!O.value.email&&!O.value.phoneNumber?(g(),y("div",qP," No contact details available. ")):B("",!0)])]),u("div",WP,[j[6]||(j[6]=u("h4",null,"Check-in Status",-1)),O.value.isCheckedIn?(g(),y("div",jP,[j[4]||(j[4]=u("span",{class:"check-icon"},"",-1)),u("div",null,[j[3]||(j[3]=u("strong",null,"Checked In",-1)),u("p",GP,E(ge(O.value.checkInTime)),1),O.value.checkInMethod?(g(),y("p",KP," Method: "+E(Te(O.value.checkInMethod)),1)):B("",!0)])])):(g(),y("div",YP,[...j[5]||(j[5]=[u("span",{class:"not-checked-icon"},"",-1),u("span",null,"Not checked in",-1)])]))]),u("div",JP,[u("h4",null,E(z(r).checklists)+" ("+E(O.value.outstandingTasks?.length||0)+" outstanding)",1),!O.value.outstandingTasks||O.value.outstandingTasks.length===0?(g(),y("div",XP," No outstanding tasks. ")):(g(),y("div",QP,[(g(!0),y(be,null,Pe(O.value.outstandingTasks,G=>(g(),y("div",{key:G.itemId,class:"task-item"},[u("input",{type:"checkbox",disabled:b.value,onChange:se=>V(G)},null,40,e$),u("span",t$,E(G.text),1)]))),128))]))]),u("div",n$,[u("div",s$,[O.value.phoneNumber?(g(),y("a",{key:0,href:`tel:${O.value.phoneNumber}`,class:"btn btn-primary"}," Call ",8,i$)):B("",!0),O.value.phoneNumber?(g(),y("a",{key:1,href:`sms:${O.value.phoneNumber}`,class:"btn btn-secondary"}," Text ",8,o$)):B("",!0),O.value.email?(g(),y("a",{key:2,href:`mailto:${O.value.email}`,class:"btn btn-secondary"}," Email ",8,a$)):B("",!0)])])])):B("",!0)]),_:1},8,["show","title"])]))}},l$=Ze(r$,[["__scopeId","data-v-667e230b"]]),c$={class:"marshal-view"},u$={class:"header"},d$={key:0},h$={class:"header-actions"},f$={class:"container"},p$={key:0,class:"selection-card"},m$={key:1,class:"selection-card"},v$={key:0,class:"loading"},g$={key:2,class:"selection-card error-card"},_$={class:"error"},y$={key:3,class:"dashboard"},b$={key:0,class:"welcome-bar"},k$={class:"welcome-info"},w$={key:0,class:"welcome-email"},C$={key:0,class:"mode-switch"},L$={key:1,class:"mode-switch"},x$={class:"accordion"},A$={key:0,class:"accordion-section"},E$={class:"accordion-title"},T$=["innerHTML"],I$={class:"accordion-icon"},S$={key:0,class:"accordion-content"},M$={class:"event-details"},P$={key:0,class:"event-detail-row"},$$={class:"detail-value"},O$={key:1,class:"event-description"},D$={class:"detail-value"},R$={class:"accordion-section"},N$={class:"accordion-title"},B$=["innerHTML"],F$={key:0,class:"location-status active"},z$={key:1,class:"location-status"},U$={class:"accordion-icon"},H$={key:0,class:"accordion-content map-content"},V$={class:"accordion-section"},Z$={class:"accordion-title"},q$=["innerHTML"],W$={class:"accordion-icon"},j$={key:0,class:"accordion-content assignments-accordion-content"},G$={key:0,class:"empty-state"},K$={key:1,class:"checkpoint-accordion"},Y$=["onClick"],J$={class:"checkpoint-header-content"},X$={class:"checkpoint-title-row"},Q$={key:0,class:"checkpoint-check-icon"},e2={class:"checkpoint-name"},t2={key:1,class:"area-badge"},n2={key:2,class:"checkpoint-time-badge"},s2={key:0,class:"checkpoint-description-preview"},i2={class:"accordion-icon"},o2={key:0,class:"checkpoint-accordion-content"},a2={key:0,class:"checkpoint-mini-map"},r2={class:"checkpoint-marshals"},l2={class:"marshals-label"},c2={class:"marshals-list"},u2={key:0,class:"check-badge"},d2={key:1,class:"checkpoint-area-contacts"},h2={class:"marshals-label"},f2={class:"contact-list"},p2={class:"contact-info"},m2={class:"contact-name"},v2={key:0,class:"contact-role"},g2={key:1,class:"contact-detail"},_2={key:2,class:"contact-detail"},y2={class:"contact-actions"},b2=["href"],k2=["href"],w2=["href"],C2={key:2,class:"checked-in-status"},L2={class:"check-time"},x2={key:3,class:"check-in-actions"},A2=["onClick","disabled"],E2=["onClick","disabled"],T2={key:4,class:"error"},I2={class:"accordion-section"},S2={class:"accordion-title"},M2=["innerHTML"],P2={class:"accordion-icon"},$2={key:0,class:"accordion-content"},O2={key:0,class:"loading"},D2={key:1,class:"error"},R2={key:2,class:"empty-state"},N2={key:3,class:"checklist-items"},B2={class:"item-checkbox"},F2=["checked","disabled","onChange"],z2={class:"item-content"},U2={key:0,class:"item-context"},H2={key:1,class:"completion-info"},V2={class:"completion-text"},Z2={class:"completion-time"},q2={key:1,class:"accordion-section"},W2={class:"accordion-title"},j2=["innerHTML"],G2={class:"accordion-icon"},K2={key:0,class:"accordion-content"},Y2={key:0,class:"loading"},J2={key:1,class:"contact-list"},X2={class:"contact-info"},Q2={class:"contact-name-row"},eO={key:0,class:"primary-badge"},tO={class:"contact-name"},nO={key:1,class:"contact-role-badge"},sO={key:0,class:"contact-notes-text"},iO={key:1,class:"contact-detail"},oO={key:2,class:"contact-detail"},aO={class:"contact-actions"},rO=["href"],lO=["href"],cO=["href"],uO={class:"accordion-section"},dO={class:"accordion-title"},hO=["innerHTML"],fO={class:"accordion-icon"},pO={key:0,class:"accordion-content"},mO={key:2,class:"accordion-section"},vO={class:"accordion-title"},gO=["innerHTML"],_O={key:0,class:"area-lead-badges"},yO={class:"accordion-icon"},bO={key:0,class:"accordion-content area-lead-accordion-content"},kO={__name:"MarshalView",setup(e){const{terms:n,termsLower:i}=dt(),r=nc(),s=qo(),a=D(!1),l=D(!1),d=D(null),h=D(null),m=D(null),f=D(null),v=ne(()=>f.value?.eventRoles?f.value.eventRoles.filter(te=>te.role==="EventAreaLead").flatMap(te=>te.areaIds||[]):[]),b=ne(()=>v.value.length>0),A=ne(()=>f.value?.eventRoles?f.value.eventRoles.some(ue=>ue.role==="EventAdmin"):!1),M=ne(()=>f.value?.authMethod==="SecureEmailLink"&&A.value),$=ne(()=>f.value?.authMethod==="MarshalMagicCode"&&A.value),O=()=>{s.push(`/admin/events/${r.params.eventId}`)},T=D(null),x=D([]),w=D([]),P=D([]),k=D(!0),C=D("assignments"),I=D(null),Z=D(null),V=D(null),ae=D([]),ge=D(!1),Te=D(null),fe=D(!1),j=D([]),G=D(null),se=D(!1),Ee=D(!1),pe=D(""),Le=D(""),J=D(null),he=D(null);let Se=null;const Re=ue=>{C.value=C.value===ue?null:ue},ve=D(null),le=ue=>{ve.value=ve.value===ue?null:ue},de=ne(()=>w.value.map(ue=>{const te=x.value.find(rn=>rn.id===ue.locationId),re=te?.areaIds||te?.AreaIds||[];let Be=null;re.length>0&&P.value.length>0&&(Be=P.value.find(vs=>re.includes(vs.id))?.name);const Ut=te?.assignments||[],_n=oe.value.filter(rn=>re.includes(rn.areaId));return{...ue,location:te,areaName:Be,areaIds:re,allMarshals:Ut,areaContacts:_n,locationName:te?.name||"Unknown Location"}})),H=ne(()=>w.value.length>0?w.value[0]:null),Y=ne(()=>w.value.map(ue=>ue.locationId)),X=ne(()=>T.value?.route?(typeof T.value.route=="string"?JSON.parse(T.value.route):T.value.route)||[]:[]),ke=ne(()=>!H.value||!x.value.length?null:x.value.find(ue=>ue.id===H.value.locationId)),Xe=ne(()=>ae.value.filter(ue=>ue.isCompleted?!["OnePerCheckpoint","OnePerArea","OneLeadPerArea"].includes(ue.matchedScope):!0)),R=ne(()=>Xe.value.filter(ue=>ue.isCompleted).length),F=D([]),q=D(!1),ie=ne(()=>F.value),ce=ne(()=>{const ue=["EmergencyContact","EventDirector","MedicalLead","SafetyOfficer"];return F.value.filter(te=>ue.includes(te.role))}),oe=D([]);ne(()=>{if(oe.value.length===0)return[];const ue={};for(const te of oe.value){const re=te.areaId||"unknown";ue[re]||(ue[re]={areaId:te.areaId,areaName:te.areaName||"Unknown Area",contacts:[]}),ue[re].contacts.push(te)}return Object.values(ue)}),ne(()=>oe.value.length);const Ae=ne(()=>ke.value?{lat:ke.value.latitude,lng:ke.value.longitude}:he.value?he.value:x.value.length>0?{lat:x.value[0].latitude,lng:x.value[0].longitude}:{lat:51.505,lng:-.09}),xe=async(ue,te)=>{l.value=!0,d.value=null,console.log("Authenticating with magic code:",{eventId:ue,code:te});try{const re=await cs.marshalLogin(ue,te);if(console.log("Auth response:",re.data),re.data.success){localStorage.setItem("sessionToken",re.data.sessionToken),localStorage.setItem(`marshal_${ue}`,re.data.marshalId),h.value=re.data.person,m.value=re.data.marshalId,a.value=!0,console.log("Authenticated as marshal:",m.value,h.value?.name);try{const Be=await cs.getMe(ue);f.value=Be.data,console.log("User claims:",f.value)}catch(Be){console.warn("Failed to fetch claims:",Be)}s.replace({path:r.path,query:{}}),await me()}else d.value=re.data.message||"Authentication failed"}catch(re){console.error("Authentication failed:",re),d.value=re.response?.data?.message||"Invalid or expired login link"}finally{l.value=!1}},Ce=async ue=>{const te=localStorage.getItem("sessionToken"),re=localStorage.getItem(`marshal_${ue}`);if(!te||!re)return!1;try{const Be=await cs.getMe(ue);if(Be.data&&Be.data.marshalId)return f.value=Be.data,h.value={personId:Be.data.personId,name:Be.data.personName,email:Be.data.personEmail},m.value=Be.data.marshalId,a.value=!0,!0}catch{localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${ue}`)}return!1},me=async()=>{const ue=r.params.eventId;console.log("Loading event data for:",{eventId:ue,marshalId:m.value});try{console.log("Fetching event...");const te=await Gs.getById(ue);T.value=te.data,console.log("Event loaded:",T.value?.name),T.value&&of(T.value)}catch(te){console.error("Failed to load event:",te.response?.status,te.response?.data)}try{console.log("Fetching areas...");const te=await Ks.getByEvent(ue);P.value=te.data||[],console.log("Areas loaded:",P.value.length)}catch(te){console.error("Failed to load areas:",te.response?.status,te.response?.data)}try{console.log("Fetching event status (locations + assignments)...");const te=await wo.getEventStatus(ue);if(x.value=te.data?.locations||[],console.log("Locations loaded:",x.value.length),m.value){const re=[];for(const Be of x.value){const Ut=Be.assignments?.find(_n=>_n.marshalId===m.value);Ut&&(re.push(Ut),console.log("Assignment found:",Ut.id,"at location:",Be.name))}w.value=re,console.log("Total assignments found:",w.value.length)}}catch(te){console.error("Failed to load event status:",te.response?.status,te.response?.data)}await Fe(),await Me(),await ze()},ze=async()=>{const ue=r.params.eventId;try{const te=await os.getMyNotes(ue);j.value=te.data||[],console.log("Notes loaded:",j.value.length)}catch(te){console.error("Failed to load notes:",te)}},Me=async()=>{const ue=r.params.eventId;q.value=!0;try{const te=await wi.getMyContacts(ue);F.value=te.data,console.log("Contacts loaded:",F.value.length)}catch(te){console.warn("Failed to load contacts:",te),F.value=[]}finally{q.value=!1}},Fe=async()=>{if(!m.value){console.warn("No marshal ID, skipping checklist load");return}ge.value=!0,Te.value=null;try{console.log("Fetching checklist for marshal:",m.value);const ue=await Pt.getMarshalChecklist(r.params.eventId,m.value);ae.value=ue.data||[],console.log("Checklist loaded:",ae.value.length,"items")}catch(ue){console.error("Failed to load checklist:",ue.response?.status,ue.response?.data),Te.value=ue.response?.data?.message||"Failed to load checklist"}finally{ge.value=!1}},qe=async ue=>{if(!fe.value){fe.value=!0;try{ue.isCompleted?await Pt.uncomplete(r.params.eventId,ue.itemId,{marshalId:m.value,contextType:ue.completionContextType,contextId:ue.completionContextId}):await Pt.complete(r.params.eventId,ue.itemId,{marshalId:m.value,contextType:ue.completionContextType,contextId:ue.completionContextId}),await Fe()}catch(te){console.error("Failed to toggle checklist item:",te),Te.value=te.response?.data?.message||"Failed to update checklist",setTimeout(()=>{Te.value=null},3e3)}finally{fe.value=!1}}},Ge=ue=>{if(!ue.completionContextType||!ue.completionContextId)return null;if(ue.completionContextType==="Checkpoint"){const te=x.value.find(Be=>Be.id===ue.completionContextId);if(!te)return null;const re=te.description?` - ${te.description}`:"";return`At ${i.value.checkpoint} ${te.name}${re}`}if(ue.completionContextType==="Area"){const te=P.value.find(re=>re.id===ue.completionContextId);return te?`At ${i.value.area} ${te.name}`:null}return ue.completionContextType==="Personal"?"Personal item":null},Je=()=>{if(!("geolocation"in navigator)){console.warn("Geolocation not supported");return}console.log("Starting location tracking..."),Se=navigator.geolocation.watchPosition(ue=>{he.value={lat:ue.coords.latitude,lng:ue.coords.longitude},console.log("Location updated:",he.value)},ue=>{console.warn("Geolocation error:",{1:"Location permission denied. Please allow location access in your browser settings.",2:"Location unavailable. Make sure GPS is enabled on your device.",3:"Location request timed out. Please try again."}[ue.code]||ue.message)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4})},He=()=>{Se!==null&&(navigator.geolocation.clearWatch(Se),Se=null)},vt=async ue=>{I.value=ue.id,Z.value=ue.id,V.value=null;try{if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by your browser");const te=await new Promise((Ut,_n)=>{navigator.geolocation.getCurrentPosition(Ut,_n,{enableHighAccuracy:!0,timeout:1e4})}),re=await Ci.checkIn({eventId:r.params.eventId,assignmentId:ue.id,latitude:te.coords.latitude,longitude:te.coords.longitude,manualCheckIn:!1}),Be=w.value.findIndex(Ut=>Ut.id===ue.id);Be!==-1&&(w.value[Be]=re.data)}catch(te){te.response?.data?.message?V.value=te.response.data.message:te.message?V.value=te.message:V.value="Failed to check in. Please try manual check-in."}finally{I.value=null,Z.value=null}},Lt=ue=>{pe.value="Manual Check-In",Le.value="Are you sure you want to check in manually? This should only be used if GPS is not available.",J.value=async()=>{I.value=ue.id,Z.value=ue.id,V.value=null;try{const te=await Ci.checkIn({eventId:r.params.eventId,assignmentId:ue.id,latitude:null,longitude:null,manualCheckIn:!0}),re=w.value.findIndex(Be=>Be.id===ue.id);re!==-1&&(w.value[re]=te.data)}catch{V.value="Failed to check in manually. Please contact the admin."}finally{I.value=null,Z.value=null}},Ee.value=!0},wt=()=>{Ee.value=!1,J.value&&(J.value(),J.value=null)},mt=()=>{Ee.value=!1,J.value=null},en=async()=>{try{await cs.logout()}catch{}localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${r.params.eventId}`),a.value=!1,h.value=null,m.value=null,w.value=[],ae.value=[],oe.value=[],s.push("/")},zt=ue=>ue?new Date(ue).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",gt=ue=>ue?new Date(ue).toLocaleString():"",it=(ue,te)=>{if(!ue&&!te)return"";const re=ue?zt(ue):"?",Be=te?zt(te):"?";return`${re} - ${Be}`},Et=ue=>ue?new Date(ue).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",_t=ue=>ue?ue.replace(/([A-Z])/g," $1").replace(/^./,te=>te.toUpperCase()).trim():"";return On(async()=>{const ue=r.params.eventId,te=r.query.code;k.value=!0;try{te?await xe(ue,te):await Ce(ue)&&await me()}finally{k.value=!1}a.value&&Je()}),We(a,ue=>{ue?Je():He()}),We(()=>r.query.code,async ue=>{if(ue&&a.value){k.value=!0;try{await xe(r.params.eventId,ue)}finally{k.value=!1}}}),$s(()=>{He()}),(ue,te)=>(g(),y("div",c$,[u("header",u$,[T.value?(g(),y("h1",d$,E(T.value.name),1)):B("",!0),u("div",h$,[a.value?(g(),y("button",{key:0,onClick:te[0]||(te[0]=re=>se.value=!0),class:"btn-emergency"}," Emergency Info ")):B("",!0),a.value?(g(),y("button",{key:1,onClick:en,class:"btn-logout"}," Logout "+E(h.value?.name||""),1)):B("",!0)])]),u("div",f$,[k.value?(g(),y("div",p$,[...te[9]||(te[9]=[u("div",{class:"loading"},"Loading...",-1)])])):!a.value&&!d.value?(g(),y("div",m$,[te[10]||(te[10]=u("h2",null,"Welcome",-1)),te[11]||(te[11]=u("p",{class:"instruction"},"Please use the login link sent to you to access your marshal dashboard.",-1)),l.value?(g(),y("p",v$,"Authenticating...")):B("",!0)])):d.value?(g(),y("div",g$,[te[12]||(te[12]=u("h2",null,"Login Failed",-1)),u("p",_$,E(d.value),1),te[13]||(te[13]=u("p",{class:"instruction"},"Please contact the event organizer for a new login link.",-1))])):(g(),y("div",y$,[M.value||$.value?(g(),y("div",b$,[u("div",k$,[h.value?.email?(g(),y("span",w$,E(h.value.email),1)):B("",!0)]),M.value?(g(),y("div",C$,[u("button",{onClick:O,class:"btn-mode-switch"}," Switch to Admin ")])):$.value?(g(),y("div",L$,[...te[14]||(te[14]=[u("span",{class:"reauth-hint",title:"Login via admin flow to access admin features"}," Admin access requires re-login ",-1)])])):B("",!0)])):B("",!0),u("div",x$,[T.value?.startDate||T.value?.description?(g(),y("div",A$,[u("button",{class:Ue(["accordion-header",{active:C.value==="eventDetails"}]),onClick:te[1]||(te[1]=re=>Re("eventDetails"))},[u("span",E$,[u("span",{class:"section-icon",innerHTML:z(pn)("event")},null,8,T$),te[15]||(te[15]=Ve(" Event details ",-1))]),u("span",I$,E(C.value==="eventDetails"?"":"+"),1)],2),C.value==="eventDetails"?(g(),y("div",S$,[u("div",M$,[T.value.startDate?(g(),y("div",P$,[te[16]||(te[16]=u("span",{class:"detail-label"},"Start time",-1)),u("span",$$,E(Et(T.value.startDate)),1)])):B("",!0),T.value.description?(g(),y("div",O$,[te[17]||(te[17]=u("span",{class:"detail-label"},"Description",-1)),u("p",D$,E(T.value.description),1)])):B("",!0)])])):B("",!0)])):B("",!0),u("div",R$,[u("button",{class:Ue(["accordion-header",{active:C.value==="map"}]),onClick:te[2]||(te[2]=re=>Re("map"))},[u("span",N$,[u("span",{class:"section-icon",innerHTML:z(pn)("course")},null,8,B$),Ve(" "+E(z(n).course)+" ",1),he.value?(g(),y("span",F$,"GPS Active")):(g(),y("span",z$,"GPS Inactive"))]),u("span",U$,E(C.value==="map"?"":"+"),1)],2),C.value==="map"?(g(),y("div",H$,[De(zo,{locations:x.value,route:X.value,center:Ae.value,zoom:15,"user-location":he.value,"highlight-location-ids":Y.value,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-ids"])])):B("",!0)]),u("div",V$,[u("button",{class:Ue(["accordion-header",{active:C.value==="assignments"}]),onClick:te[3]||(te[3]=re=>Re("assignments"))},[u("span",Z$,[u("span",{class:"section-icon",innerHTML:z(pn)("checkpoint")},null,8,q$),Ve(" Your "+E(z(i).checkpoints)+" ("+E(w.value.length)+") ",1)]),u("span",W$,E(C.value==="assignments"?"":"+"),1)],2),C.value==="assignments"?(g(),y("div",j$,[w.value.length===0?(g(),y("div",G$,[u("p",null,"You don't have any "+E(z(i).checkpoint)+" assignments yet.",1)])):(g(),y("div",K$,[(g(!0),y(be,null,Pe(de.value,re=>(g(),y("div",{key:re.id,class:"checkpoint-accordion-section"},[u("button",{class:Ue(["checkpoint-accordion-header",{active:ve.value===re.id,"checked-in":re.isCheckedIn}]),onClick:Be=>le(re.id)},[u("div",J$,[u("div",X$,[re.isCheckedIn?(g(),y("span",Q$,"")):B("",!0),u("span",e2,E(re.location?.name||re.locationName),1),re.areaName?(g(),y("span",t2,E(re.areaName),1)):B("",!0),re.location?.startTime||re.location?.endTime?(g(),y("span",n2,E(it(re.location.startTime,re.location.endTime)),1)):B("",!0)]),re.location?.description?(g(),y("div",s2,E(re.location.description),1)):B("",!0)]),u("span",i2,E(ve.value===re.id?"":"+"),1)],10,Y$),ve.value===re.id?(g(),y("div",o2,[re.location?(g(),y("div",a2,[De(zo,{locations:x.value,route:X.value,center:{lat:re.location.latitude,lng:re.location.longitude},zoom:16,"user-location":he.value,"highlight-location-id":re.locationId,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-id"])])):B("",!0),u("div",r2,[u("div",l2,E(z(n).people)+":",1),u("div",c2,[(g(!0),y(be,null,Pe(re.allMarshals,Be=>(g(),y("span",{key:Be.marshalId,class:Ue(["marshal-tag",{"is-you":Be.marshalId===m.value,"checked-in":Be.isCheckedIn}])},[Ve(E(Be.marshalName)+E(Be.marshalId===m.value?" (you)":"")+" ",1),Be.isCheckedIn?(g(),y("span",u2,"")):B("",!0)],2))),128))])]),re.areaContacts.length>0?(g(),y("div",d2,[u("div",h2,E(z(n).area)+" contacts:",1),u("div",f2,[(g(!0),y(be,null,Pe(re.areaContacts,Be=>(g(),y("div",{key:Be.marshalId,class:"contact-item"},[u("div",p2,[u("div",m2,E(Be.marshalName),1),Be.role?(g(),y("div",v2,E(Be.role),1)):B("",!0),Be.phone?(g(),y("div",g2,E(Be.phone),1)):B("",!0),Be.email?(g(),y("div",_2,E(Be.email),1)):B("",!0)]),u("div",y2,[Be.phone?(g(),y("a",{key:0,href:`tel:${Be.phone}`,class:"contact-link"},[...te[18]||(te[18]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Ve(" Call ",-1)])],8,b2)):B("",!0),Be.phone?(g(),y("a",{key:1,href:`sms:${Be.phone}`,class:"contact-link"},[...te[19]||(te[19]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Ve(" Text ",-1)])],8,k2)):B("",!0),Be.email?(g(),y("a",{key:2,href:`mailto:${Be.email}`,class:"contact-link"},[...te[20]||(te[20]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Ve(" Email ",-1)])],8,w2)):B("",!0)])]))),128))])])):B("",!0),re.isCheckedIn?(g(),y("div",C2,[te[22]||(te[22]=u("span",{class:"check-icon"},"",-1)),u("div",null,[te[21]||(te[21]=u("strong",null,"Checked In",-1)),u("p",L2,E(zt(re.checkInTime)),1)])])):(g(),y("div",x2,[u("button",{onClick:Be=>vt(re),class:"btn btn-primary",disabled:I.value===re.id},E(I.value===re.id?"Checking in...":"GPS Check-In"),9,A2),u("button",{onClick:Be=>Lt(re),class:"btn btn-secondary",disabled:I.value===re.id}," Manual ",8,E2)])),V.value&&Z.value===re.id?(g(),y("div",T2,E(V.value),1)):B("",!0)])):B("",!0)]))),128))]))])):B("",!0)]),u("div",I2,[u("button",{class:Ue(["accordion-header",{active:C.value==="checklist"}]),onClick:te[4]||(te[4]=re=>Re("checklist"))},[u("span",S2,[u("span",{class:"section-icon",innerHTML:z(pn)("checklist")},null,8,M2),Ve(" Your "+E(z(i).checklists)+" ("+E(R.value)+" of "+E(Xe.value.length)+" complete) ",1)]),u("span",P2,E(C.value==="checklist"?"":"+"),1)],2),C.value==="checklist"?(g(),y("div",$2,[ge.value?(g(),y("div",O2,"Loading checklist...")):Te.value?(g(),y("div",D2,E(Te.value),1)):Xe.value.length===0?(g(),y("div",R2,[u("p",null,"No "+E(z(i).checklists)+" for you.",1)])):(g(),y("div",N2,[(g(!0),y(be,null,Pe(Xe.value,re=>(g(),y("div",{key:re.itemId,class:Ue(["checklist-item",{"item-completed":re.isCompleted}])},[u("div",B2,[u("input",{type:"checkbox",checked:re.isCompleted,disabled:!re.canBeCompletedByMe||fe.value,onChange:Be=>qe(re)},null,40,F2)]),u("div",z2,[u("div",{class:Ue(["item-text",{"text-completed":re.isCompleted}])},E(re.text),3),Ge(re)?(g(),y("div",U2,E(Ge(re)),1)):B("",!0),re.isCompleted?(g(),y("div",H2,[u("span",V2," Completed by "+E(re.completedByActorName||"Unknown"),1),u("span",Z2,E(gt(re.completedAt)),1)])):B("",!0)])],2))),128))]))])):B("",!0)]),ie.value.length>0||q.value?(g(),y("div",q2,[u("button",{class:Ue(["accordion-header",{active:C.value==="eventContacts"}]),onClick:te[5]||(te[5]=re=>Re("eventContacts"))},[u("span",W2,[u("span",{class:"section-icon",innerHTML:z(pn)("contacts")},null,8,j2),Ve(" Your contacts ("+E(ie.value.length)+") ",1)]),u("span",G2,E(C.value==="eventContacts"?"":"+"),1)],2),C.value==="eventContacts"?(g(),y("div",K2,[q.value?(g(),y("div",Y2,"Loading contacts...")):(g(),y("div",J2,[(g(!0),y(be,null,Pe(ie.value,re=>(g(),y("div",{key:re.contactId,class:Ue(["contact-item",{"primary-contact":re.isPrimary}])},[u("div",X2,[u("div",Q2,[re.isPrimary?(g(),y("span",eO,"")):B("",!0),u("span",tO,E(re.name),1),re.role?(g(),y("span",nO,E(_t(re.role)),1)):B("",!0)]),re.notes?(g(),y("div",sO,E(re.notes),1)):B("",!0),re.phone?(g(),y("div",iO,E(re.phone),1)):B("",!0),re.email?(g(),y("div",oO,E(re.email),1)):B("",!0)]),u("div",aO,[re.phone?(g(),y("a",{key:0,href:`tel:${re.phone}`,class:"contact-link"},[...te[23]||(te[23]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),Ve(" Call ",-1)])],8,rO)):B("",!0),re.phone?(g(),y("a",{key:1,href:`sms:${re.phone}`,class:"contact-link"},[...te[24]||(te[24]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),Ve(" Text ",-1)])],8,lO)):B("",!0),re.email?(g(),y("a",{key:2,href:`mailto:${re.email}`,class:"contact-link"},[...te[25]||(te[25]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),Ve(" Email ",-1)])],8,cO)):B("",!0)])],2))),128))]))])):B("",!0)])):B("",!0),u("div",uO,[u("button",{class:Ue(["accordion-header",{active:C.value==="notes"}]),onClick:te[6]||(te[6]=re=>Re("notes"))},[u("span",dO,[u("span",{class:"section-icon",innerHTML:z(pn)("notes")},null,8,hO),Ve(" Your notes ("+E(j.value.length)+") ",1)]),u("span",fO,E(C.value==="notes"?"":"+"),1)],2),C.value==="notes"?(g(),y("div",pO,[De(wr,{"event-id":z(r).params.eventId,"all-notes":j.value,locations:x.value,areas:P.value,assignments:w.value,"show-scope":!1,onNotesChanged:ze},null,8,["event-id","all-notes","locations","areas","assignments"])])):B("",!0)]),b.value?(g(),y("div",mO,[u("button",{class:Ue(["accordion-header",{active:C.value==="areaLead"}]),onClick:te[7]||(te[7]=re=>Re("areaLead"))},[u("span",vO,[u("span",{class:"section-icon",innerHTML:z(pn)("checkpoint")},null,8,gO),Ve(" "+E(z(n).checkpoints)+" in your "+E(z(i).areas)+" ",1),G.value?.areas?.length>0?(g(),y("span",_O,[(g(!0),y(be,null,Pe(G.value.areas,re=>(g(),y("span",{key:re.areaId,class:"area-lead-badge",style:Qt({backgroundColor:re.color||"#667eea"})},E(re.name),5))),128))])):B("",!0)]),u("span",yO,E(C.value==="areaLead"?"":"+"),1)],2),C.value==="areaLead"?(g(),y("div",bO,[De(l$,{ref_key:"areaLeadRef",ref:G,"event-id":z(r).params.eventId,"area-ids":v.value,"marshal-id":m.value,route:X.value,onChecklistUpdated:Fe},null,8,["event-id","area-ids","marshal-id","route"])])):B("",!0)])):B("",!0)])]))]),De(iP,{show:se.value,contacts:ce.value,onClose:te[8]||(te[8]=re=>se.value=!1)},null,8,["show","contacts"]),De(kr,{show:Ee.value,title:pe.value,message:Le.value,onConfirm:wt,onCancel:mt},null,8,["show","title","message"])]))}},wO=Ze(kO,[["__scopeId","data-v-c6e922eb"]]),CO=[{path:"/",name:"Home",component:Bg},{path:"/admin/login",name:"AdminLogin",component:wy},{path:"/admin/verify",name:"AdminVerify",component:Iy},{path:"/admin/dashboard",name:"AdminDashboard",component:Cb,meta:{requiresAuth:!0}},{path:"/admin/profile",name:"AdminProfile",component:Kb,meta:{requiresAuth:!0}},{path:"/admin/event/:eventId",name:"AdminEventManage",component:qM,meta:{requiresAuth:!0}},{path:"/event/:eventId",name:"MarshalView",component:wO},{path:"/:pathMatch(.*)*",redirect:"/"}],df=Pg({history:ug("/VolunteerCheckin/testing/"),routes:CO});df.beforeEach((e,n,i)=>{const r=localStorage.getItem("adminEmail");e.meta.requiresAuth&&!r?i({name:"AdminLogin"}):i()});const cc=fv(xv);cc.use(vv());cc.use(df);cc.mount("#app");
