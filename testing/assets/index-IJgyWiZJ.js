(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function Rl(e){const n=Object.create(null);for(const i of e.split(","))n[i]=1;return i=>i in n}const yt={},xi=[],Un=()=>{},ed=()=>!1,Xa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Nl=e=>e.startsWith("onUpdate:"),Kt=Object.assign,Bl=(e,n)=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)},qf=Object.prototype.hasOwnProperty,dt=(e,n)=>qf.call(e,n),je=Array.isArray,Ai=e=>zo(e)==="[object Map]",Ni=e=>zo(e)==="[object Set]",Oc=e=>zo(e)==="[object Date]",nt=e=>typeof e=="function",$t=e=>typeof e=="string",Mn=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",td=e=>(bt(e)||nt(e))&&nt(e.then)&&nt(e.catch),nd=Object.prototype.toString,zo=e=>nd.call(e),Wf=e=>zo(e).slice(8,-1),sd=e=>zo(e)==="[object Object]",Qa=e=>$t(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lo=Rl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),er=e=>{const n=Object.create(null);return(i=>n[i]||(n[i]=e(i)))},jf=/-\w/g,kn=er(e=>e.replace(jf,n=>n.slice(1).toUpperCase())),Gf=/\B([A-Z])/g,Ss=er(e=>e.replace(Gf,"-$1").toLowerCase()),tr=er(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kr=er(e=>e?`on${tr(e)}`:""),Es=(e,n)=>!Object.is(e,n),Ia=(e,...n)=>{for(let i=0;i<e.length;i++)e[i](...n)},id=(e,n,i,a=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:a,value:i})},nr=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Dc;const sr=()=>Dc||(Dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yt(e){if(je(e)){const n={};for(let i=0;i<e.length;i++){const a=e[i],s=$t(a)?Xf(a):Yt(a);if(s)for(const r in s)n[r]=s[r]}return n}else if($t(e)||bt(e))return e}const Kf=/;(?![^(]*\))/g,Yf=/:([^]+)/,Jf=/\/\*[^]*?\*\//g;function Xf(e){const n={};return e.replace(Jf,"").split(Kf).forEach(i=>{if(i){const a=i.split(Yf);a.length>1&&(n[a[0].trim()]=a[1].trim())}}),n}function Ve(e){let n="";if($t(e))n=e;else if(je(e))for(let i=0;i<e.length;i++){const a=Ve(e[i]);a&&(n+=a+" ")}else if(bt(e))for(const i in e)e[i]&&(n+=i+" ");return n.trim()}const Qf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ep=Rl(Qf);function od(e){return!!e||e===""}function tp(e,n){if(e.length!==n.length)return!1;let i=!0;for(let a=0;i&&a<e.length;a++)i=Qs(e[a],n[a]);return i}function Qs(e,n){if(e===n)return!0;let i=Oc(e),a=Oc(n);if(i||a)return i&&a?e.getTime()===n.getTime():!1;if(i=Mn(e),a=Mn(n),i||a)return e===n;if(i=je(e),a=je(n),i||a)return i&&a?tp(e,n):!1;if(i=bt(e),a=bt(n),i||a){if(!i||!a)return!1;const s=Object.keys(e).length,r=Object.keys(n).length;if(s!==r)return!1;for(const l in e){const d=e.hasOwnProperty(l),h=n.hasOwnProperty(l);if(d&&!h||!d&&h||!Qs(e[l],n[l]))return!1}}return String(e)===String(n)}function Fl(e,n){return e.findIndex(i=>Qs(i,n))}const ad=e=>!!(e&&e.__v_isRef===!0),I=e=>$t(e)?e:e==null?"":je(e)||bt(e)&&(e.toString===nd||!nt(e.toString))?ad(e)?I(e.value):JSON.stringify(e,rd,2):String(e),rd=(e,n)=>ad(n)?rd(e,n.value):Ai(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[a,s],r)=>(i[Yr(a,r)+" =>"]=s,i),{})}:Ni(n)?{[`Set(${n.size})`]:[...n.values()].map(i=>Yr(i))}:Mn(n)?Yr(n):bt(n)&&!je(n)&&!sd(n)?String(n):n,Yr=(e,n="")=>{var i;return Mn(e)?`Symbol(${(i=e.description)!=null?i:n})`:e};let qt;class ld{constructor(n=!1){this.detached=n,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qt,!n&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].pause();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,i;if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].resume();for(n=0,i=this.effects.length;n<i;n++)this.effects[n].resume()}}run(n){if(this._active){const i=qt;try{return qt=this,n()}finally{qt=i}}}on(){++this._on===1&&(this.prevScope=qt,qt=this)}off(){this._on>0&&--this._on===0&&(qt=this.prevScope,this.prevScope=void 0)}stop(n){if(this._active){this._active=!1;let i,a;for(i=0,a=this.effects.length;i<a;i++)this.effects[i].stop();for(this.effects.length=0,i=0,a=this.cleanups.length;i<a;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function cd(e){return new ld(e)}function ud(){return qt}function np(e,n=!1){qt&&qt.cleanups.push(e)}let kt;const Jr=new WeakSet;class dd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qt&&qt.active&&qt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jr.has(this)&&(Jr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Rc(this),pd(this);const n=kt,i=Sn;kt=this,Sn=!0;try{return this.fn()}finally{md(this),kt=n,Sn=i,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Hl(n);this.deps=this.depsTail=void 0,Rc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pl(this)&&this.run()}get dirty(){return pl(this)}}let hd=0,xo,Ao;function fd(e,n=!1){if(e.flags|=8,n){e.next=Ao,Ao=e;return}e.next=xo,xo=e}function zl(){hd++}function Ul(){if(--hd>0)return;if(Ao){let n=Ao;for(Ao=void 0;n;){const i=n.next;n.next=void 0,n.flags&=-9,n=i}}let e;for(;xo;){let n=xo;for(xo=void 0;n;){const i=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(a){e||(e=a)}n=i}}if(e)throw e}function pd(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function md(e){let n,i=e.depsTail,a=i;for(;a;){const s=a.prevDep;a.version===-1?(a===i&&(i=s),Hl(a),sp(a)):n=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=s}e.deps=n,e.depsTail=i}function pl(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(vd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function vd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$o)||(e.globalVersion=$o,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!pl(e))))return;e.flags|=2;const n=e.dep,i=kt,a=Sn;kt=e,Sn=!0;try{pd(e);const s=e.fn(e._value);(n.version===0||Es(s,e._value))&&(e.flags|=128,e._value=s,n.version++)}catch(s){throw n.version++,s}finally{kt=i,Sn=a,md(e),e.flags&=-3}}function Hl(e,n=!1){const{dep:i,prevSub:a,nextSub:s}=e;if(a&&(a.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=a,e.nextSub=void 0),i.subs===e&&(i.subs=a,!a&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Hl(r,!0)}!n&&!--i.sc&&i.map&&i.map.delete(i.key)}function sp(e){const{prevDep:n,nextDep:i}=e;n&&(n.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=n,e.nextDep=void 0)}let Sn=!0;const gd=[];function ds(){gd.push(Sn),Sn=!1}function hs(){const e=gd.pop();Sn=e===void 0?!0:e}function Rc(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const i=kt;kt=void 0;try{n()}finally{kt=i}}}let $o=0;class ip{constructor(n,i){this.sub=n,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vl{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(n){if(!kt||!Sn||kt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==kt)i=this.activeLink=new ip(kt,this),kt.deps?(i.prevDep=kt.depsTail,kt.depsTail.nextDep=i,kt.depsTail=i):kt.deps=kt.depsTail=i,_d(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const a=i.nextDep;a.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=a),i.prevDep=kt.depsTail,i.nextDep=void 0,kt.depsTail.nextDep=i,kt.depsTail=i,kt.deps===i&&(kt.deps=a)}return i}trigger(n){this.version++,$o++,this.notify(n)}notify(n){zl();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Ul()}}}function _d(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let a=n.deps;a;a=a.nextDep)_d(a)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Fa=new WeakMap,Ys=Symbol(""),ml=Symbol(""),Oo=Symbol("");function Wt(e,n,i){if(Sn&&kt){let a=Fa.get(e);a||Fa.set(e,a=new Map);let s=a.get(i);s||(a.set(i,s=new Vl),s.map=a,s.key=i),s.track()}}function os(e,n,i,a,s,r){const l=Fa.get(e);if(!l){$o++;return}const d=h=>{h&&h.trigger()};if(zl(),n==="clear")l.forEach(d);else{const h=je(e),m=h&&Qa(i);if(h&&i==="length"){const f=Number(a);l.forEach((v,k)=>{(k==="length"||k===Oo||!Mn(k)&&k>=f)&&d(v)})}else switch((i!==void 0||l.has(void 0))&&d(l.get(i)),m&&d(l.get(Oo)),n){case"add":h?m&&d(l.get("length")):(d(l.get(Ys)),Ai(e)&&d(l.get(ml)));break;case"delete":h||(d(l.get(Ys)),Ai(e)&&d(l.get(ml)));break;case"set":Ai(e)&&d(l.get(Ys));break}}Ul()}function op(e,n){const i=Fa.get(e);return i&&i.get(n)}function _i(e){const n=ct(e);return n===e?n:(Wt(n,"iterate",Oo),pn(e)?n:n.map(Pn))}function ir(e){return Wt(e=ct(e),"iterate",Oo),e}function Cs(e,n){return fs(e)?us(e)?Si(Pn(n)):Si(n):Pn(n)}const ap={__proto__:null,[Symbol.iterator](){return Xr(this,Symbol.iterator,e=>Cs(this,e))},concat(...e){return _i(this).concat(...e.map(n=>je(n)?_i(n):n))},entries(){return Xr(this,"entries",e=>(e[1]=Cs(this,e[1]),e))},every(e,n){return ts(this,"every",e,n,void 0,arguments)},filter(e,n){return ts(this,"filter",e,n,i=>i.map(a=>Cs(this,a)),arguments)},find(e,n){return ts(this,"find",e,n,i=>Cs(this,i),arguments)},findIndex(e,n){return ts(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return ts(this,"findLast",e,n,i=>Cs(this,i),arguments)},findLastIndex(e,n){return ts(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return ts(this,"forEach",e,n,void 0,arguments)},includes(...e){return Qr(this,"includes",e)},indexOf(...e){return Qr(this,"indexOf",e)},join(e){return _i(this).join(e)},lastIndexOf(...e){return Qr(this,"lastIndexOf",e)},map(e,n){return ts(this,"map",e,n,void 0,arguments)},pop(){return mo(this,"pop")},push(...e){return mo(this,"push",e)},reduce(e,...n){return Nc(this,"reduce",e,n)},reduceRight(e,...n){return Nc(this,"reduceRight",e,n)},shift(){return mo(this,"shift")},some(e,n){return ts(this,"some",e,n,void 0,arguments)},splice(...e){return mo(this,"splice",e)},toReversed(){return _i(this).toReversed()},toSorted(e){return _i(this).toSorted(e)},toSpliced(...e){return _i(this).toSpliced(...e)},unshift(...e){return mo(this,"unshift",e)},values(){return Xr(this,"values",e=>Cs(this,e))}};function Xr(e,n,i){const a=ir(e),s=a[n]();return a!==e&&!pn(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=i(r.value)),r}),s}const rp=Array.prototype;function ts(e,n,i,a,s,r){const l=ir(e),d=l!==e&&!pn(e),h=l[n];if(h!==rp[n]){const v=h.apply(e,r);return d?Pn(v):v}let m=i;l!==e&&(d?m=function(v,k){return i.call(this,Cs(e,v),k,e)}:i.length>2&&(m=function(v,k){return i.call(this,v,k,e)}));const f=h.call(l,m,a);return d&&s?s(f):f}function Nc(e,n,i,a){const s=ir(e);let r=i;return s!==e&&(pn(e)?i.length>3&&(r=function(l,d,h){return i.call(this,l,d,h,e)}):r=function(l,d,h){return i.call(this,l,Cs(e,d),h,e)}),s[n](r,...a)}function Qr(e,n,i){const a=ct(e);Wt(a,"iterate",Oo);const s=a[n](...i);return(s===-1||s===!1)&&or(i[0])?(i[0]=ct(i[0]),a[n](...i)):s}function mo(e,n,i=[]){ds(),zl();const a=ct(e)[n].apply(e,i);return Ul(),hs(),a}const lp=Rl("__proto__,__v_isRef,__isVue"),yd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mn));function cp(e){Mn(e)||(e=String(e));const n=ct(this);return Wt(n,"has",e),n.hasOwnProperty(e)}class bd{constructor(n=!1,i=!1){this._isReadonly=n,this._isShallow=i}get(n,i,a){if(i==="__v_skip")return n.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return a===(s?r?yp:Ld:r?Cd:wd).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(a)?n:void 0;const l=je(n);if(!s){let h;if(l&&(h=ap[i]))return h;if(i==="hasOwnProperty")return cp}const d=Reflect.get(n,i,St(n)?n:a);if((Mn(i)?yd.has(i):lp(i))||(s||Wt(n,"get",i),r))return d;if(St(d)){const h=l&&Qa(i)?d:d.value;return s&&bt(h)?gl(h):h}return bt(d)?s?gl(d):Uo(d):d}}class kd extends bd{constructor(n=!1){super(!1,n)}set(n,i,a,s){let r=n[i];const l=je(n)&&Qa(i);if(!this._isShallow){const m=fs(r);if(!pn(a)&&!fs(a)&&(r=ct(r),a=ct(a)),!l&&St(r)&&!St(a))return m||(r.value=a),!0}const d=l?Number(i)<n.length:dt(n,i),h=Reflect.set(n,i,a,St(n)?n:s);return n===ct(s)&&(d?Es(a,r)&&os(n,"set",i,a):os(n,"add",i,a)),h}deleteProperty(n,i){const a=dt(n,i);n[i];const s=Reflect.deleteProperty(n,i);return s&&a&&os(n,"delete",i,void 0),s}has(n,i){const a=Reflect.has(n,i);return(!Mn(i)||!yd.has(i))&&Wt(n,"has",i),a}ownKeys(n){return Wt(n,"iterate",je(n)?"length":Ys),Reflect.ownKeys(n)}}class up extends bd{constructor(n=!1){super(!0,n)}set(n,i){return!0}deleteProperty(n,i){return!0}}const dp=new kd,hp=new up,fp=new kd(!0);const vl=e=>e,Ca=e=>Reflect.getPrototypeOf(e);function pp(e,n,i){return function(...a){const s=this.__v_raw,r=ct(s),l=Ai(r),d=e==="entries"||e===Symbol.iterator&&l,h=e==="keys"&&l,m=s[e](...a),f=i?vl:n?Si:Pn;return!n&&Wt(r,"iterate",h?ml:Ys),{next(){const{value:v,done:k}=m.next();return k?{value:v,done:k}:{value:d?[f(v[0]),f(v[1])]:f(v),done:k}},[Symbol.iterator](){return this}}}}function La(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function mp(e,n){const i={get(s){const r=this.__v_raw,l=ct(r),d=ct(s);e||(Es(s,d)&&Wt(l,"get",s),Wt(l,"get",d));const{has:h}=Ca(l),m=n?vl:e?Si:Pn;if(h.call(l,s))return m(r.get(s));if(h.call(l,d))return m(r.get(d));r!==l&&r.get(s)},get size(){const s=this.__v_raw;return!e&&Wt(ct(s),"iterate",Ys),s.size},has(s){const r=this.__v_raw,l=ct(r),d=ct(s);return e||(Es(s,d)&&Wt(l,"has",s),Wt(l,"has",d)),s===d?r.has(s):r.has(s)||r.has(d)},forEach(s,r){const l=this,d=l.__v_raw,h=ct(d),m=n?vl:e?Si:Pn;return!e&&Wt(h,"iterate",Ys),d.forEach((f,v)=>s.call(r,m(f),m(v),l))}};return Kt(i,e?{add:La("add"),set:La("set"),delete:La("delete"),clear:La("clear")}:{add(s){!n&&!pn(s)&&!fs(s)&&(s=ct(s));const r=ct(this);return Ca(r).has.call(r,s)||(r.add(s),os(r,"add",s,s)),this},set(s,r){!n&&!pn(r)&&!fs(r)&&(r=ct(r));const l=ct(this),{has:d,get:h}=Ca(l);let m=d.call(l,s);m||(s=ct(s),m=d.call(l,s));const f=h.call(l,s);return l.set(s,r),m?Es(r,f)&&os(l,"set",s,r):os(l,"add",s,r),this},delete(s){const r=ct(this),{has:l,get:d}=Ca(r);let h=l.call(r,s);h||(s=ct(s),h=l.call(r,s)),d&&d.call(r,s);const m=r.delete(s);return h&&os(r,"delete",s,void 0),m},clear(){const s=ct(this),r=s.size!==0,l=s.clear();return r&&os(s,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=pp(s,e,n)}),i}function Zl(e,n){const i=mp(e,n);return(a,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?a:Reflect.get(dt(i,s)&&s in a?i:a,s,r)}const vp={get:Zl(!1,!1)},gp={get:Zl(!1,!0)},_p={get:Zl(!0,!1)};const wd=new WeakMap,Cd=new WeakMap,Ld=new WeakMap,yp=new WeakMap;function bp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kp(e){return e.__v_skip||!Object.isExtensible(e)?0:bp(Wf(e))}function Uo(e){return fs(e)?e:ql(e,!1,dp,vp,wd)}function xd(e){return ql(e,!1,fp,gp,Cd)}function gl(e){return ql(e,!0,hp,_p,Ld)}function ql(e,n,i,a,s){if(!bt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const r=kp(e);if(r===0)return e;const l=s.get(e);if(l)return l;const d=new Proxy(e,r===2?a:i);return s.set(e,d),d}function us(e){return fs(e)?us(e.__v_raw):!!(e&&e.__v_isReactive)}function fs(e){return!!(e&&e.__v_isReadonly)}function pn(e){return!!(e&&e.__v_isShallow)}function or(e){return e?!!e.__v_raw:!1}function ct(e){const n=e&&e.__v_raw;return n?ct(n):e}function Wl(e){return!dt(e,"__v_skip")&&Object.isExtensible(e)&&id(e,"__v_skip",!0),e}const Pn=e=>bt(e)?Uo(e):e,Si=e=>bt(e)?gl(e):e;function St(e){return e?e.__v_isRef===!0:!1}function $(e){return Ad(e,!1)}function wp(e){return Ad(e,!0)}function Ad(e,n){return St(e)?e:new Cp(e,n)}class Cp{constructor(n,i){this.dep=new Vl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?n:ct(n),this._value=i?n:Pn(n),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(n){const i=this._rawValue,a=this.__v_isShallow||pn(n)||fs(n);n=a?n:ct(n),Es(n,i)&&(this._rawValue=n,this._value=a?n:Pn(n),this.dep.trigger())}}function H(e){return St(e)?e.value:e}const Lp={get:(e,n,i)=>n==="__v_raw"?e:H(Reflect.get(e,n,i)),set:(e,n,i,a)=>{const s=e[n];return St(s)&&!St(i)?(s.value=i,!0):Reflect.set(e,n,i,a)}};function Ed(e){return us(e)?e:new Proxy(e,Lp)}function xp(e){const n=je(e)?new Array(e.length):{};for(const i in e)n[i]=Ep(e,i);return n}class Ap{constructor(n,i,a){this._object=n,this._key=i,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0,this._raw=ct(n);let s=!0,r=n;if(!je(n)||!Qa(String(i)))do s=!or(r)||pn(r);while(s&&(r=r.__v_raw));this._shallow=s}get value(){let n=this._object[this._key];return this._shallow&&(n=H(n)),this._value=n===void 0?this._defaultValue:n}set value(n){if(this._shallow&&St(this._raw[this._key])){const i=this._object[this._key];if(St(i)){i.value=n;return}}this._object[this._key]=n}get dep(){return op(this._raw,this._key)}}function Ep(e,n,i){return new Ap(e,n,i)}class Tp{constructor(n,i,a){this.fn=n,this.setter=i,this._value=void 0,this.dep=new Vl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&kt!==this)return fd(this,!0),!0}get value(){const n=this.dep.track();return vd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Ip(e,n,i=!1){let a,s;return nt(e)?a=e:(a=e.get,s=e.set),new Tp(a,s,i)}const xa={},za=new WeakMap;let qs;function Sp(e,n=!1,i=qs){if(i){let a=za.get(i);a||za.set(i,a=[]),a.push(e)}}function Mp(e,n,i=yt){const{immediate:a,deep:s,once:r,scheduler:l,augmentJob:d,call:h}=i,m=C=>s?C:pn(C)||s===!1||s===0?as(C,1):as(C);let f,v,k,x,M=!1,P=!1;if(St(e)?(v=()=>e.value,M=pn(e)):us(e)?(v=()=>m(e),M=!0):je(e)?(P=!0,M=e.some(C=>us(C)||pn(C)),v=()=>e.map(C=>{if(St(C))return C.value;if(us(C))return m(C);if(nt(C))return h?h(C,2):C()})):nt(e)?n?v=h?()=>h(e,2):e:v=()=>{if(k){ds();try{k()}finally{hs()}}const C=qs;qs=f;try{return h?h(e,3,[x]):e(x)}finally{qs=C}}:v=Un,n&&s){const C=v,w=s===!0?1/0:s;v=()=>as(C(),w)}const R=ud(),T=()=>{f.stop(),R&&R.active&&Bl(R.effects,f)};if(r&&n){const C=n;n=(...w)=>{C(...w),T()}}let A=P?new Array(e.length).fill(xa):xa;const g=C=>{if(!(!(f.flags&1)||!f.dirty&&!C))if(n){const w=f.run();if(s||M||(P?w.some((E,O)=>Es(E,A[O])):Es(w,A))){k&&k();const E=qs;qs=f;try{const O=[w,A===xa?void 0:P&&A[0]===xa?[]:A,x];A=w,h?h(n,3,O):n(...O)}finally{qs=E}}}else f.run()};return d&&d(g),f=new dd(v),f.scheduler=l?()=>l(g,!1):g,x=C=>Sp(C,!1,f),k=f.onStop=()=>{const C=za.get(f);if(C){if(h)h(C,4);else for(const w of C)w();za.delete(f)}},n?a?g(!0):A=f.run():l?l(g.bind(null,!0),!0):f.run(),T.pause=f.pause.bind(f),T.resume=f.resume.bind(f),T.stop=T,T}function as(e,n=1/0,i){if(n<=0||!bt(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=n))return e;if(i.set(e,n),n--,St(e))as(e.value,n,i);else if(je(e))for(let a=0;a<e.length;a++)as(e[a],n,i);else if(Ni(e)||Ai(e))e.forEach(a=>{as(a,n,i)});else if(sd(e)){for(const a in e)as(e[a],n,i);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&as(e[a],n,i)}return e}function Ho(e,n,i,a){try{return a?e(...a):e()}catch(s){ar(s,n,i)}}function Hn(e,n,i,a){if(nt(e)){const s=Ho(e,n,i,a);return s&&td(s)&&s.catch(r=>{ar(r,n,i)}),s}if(je(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Hn(e[r],n,i,a));return s}}function ar(e,n,i,a=!0){const s=n?n.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=n&&n.appContext.config||yt;if(n){let d=n.parent;const h=n.proxy,m=`https://vuejs.org/error-reference/#runtime-${i}`;for(;d;){const f=d.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](e,h,m)===!1)return}d=d.parent}if(r){ds(),Ho(r,null,10,[e,h,m]),hs();return}}Pp(e,i,s,a,l)}function Pp(e,n,i,a=!0,s=!1){if(s)throw e;console.error(e)}const sn=[];let Fn=-1;const Ei=[];let Ls=null,bi=0;const Td=Promise.resolve();let Ua=null;function Mi(e){const n=Ua||Td;return e?n.then(this?e.bind(this):e):n}function $p(e){let n=Fn+1,i=sn.length;for(;n<i;){const a=n+i>>>1,s=sn[a],r=Do(s);r<e||r===e&&s.flags&2?n=a+1:i=a}return n}function jl(e){if(!(e.flags&1)){const n=Do(e),i=sn[sn.length-1];!i||!(e.flags&2)&&n>=Do(i)?sn.push(e):sn.splice($p(n),0,e),e.flags|=1,Id()}}function Id(){Ua||(Ua=Td.then(Md))}function Op(e){je(e)?Ei.push(...e):Ls&&e.id===-1?Ls.splice(bi+1,0,e):e.flags&1||(Ei.push(e),e.flags|=1),Id()}function Bc(e,n,i=Fn+1){for(;i<sn.length;i++){const a=sn[i];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;sn.splice(i,1),i--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function Sd(e){if(Ei.length){const n=[...new Set(Ei)].sort((i,a)=>Do(i)-Do(a));if(Ei.length=0,Ls){Ls.push(...n);return}for(Ls=n,bi=0;bi<Ls.length;bi++){const i=Ls[bi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Ls=null,bi=0}}const Do=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Md(e){try{for(Fn=0;Fn<sn.length;Fn++){const n=sn[Fn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Ho(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Fn<sn.length;Fn++){const n=sn[Fn];n&&(n.flags&=-2)}Fn=-1,sn.length=0,Sd(),Ua=null,(sn.length||Ei.length)&&Md()}}let Vt=null,Pd=null;function Ha(e){const n=Vt;return Vt=e,Pd=e&&e.type.__scopeId||null,n}function Ye(e,n=Vt,i){if(!n||e._n)return e;const a=(...s)=>{a._d&&qa(-1);const r=Ha(n);let l;try{l=e(...s)}finally{Ha(r),a._d&&qa(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function Pe(e,n){if(Vt===null)return e;const i=dr(Vt),a=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[r,l,d,h=yt]=n[s];r&&(nt(r)&&(r={mounted:r,updated:r}),r.deep&&as(l),a.push({dir:r,instance:i,value:l,oldValue:void 0,arg:d,modifiers:h}))}return e}function Vs(e,n,i,a){const s=e.dirs,r=n&&n.dirs;for(let l=0;l<s.length;l++){const d=s[l];r&&(d.oldValue=r[l].value);let h=d.dir[a];h&&(ds(),Hn(h,i,8,[e.el,d,e,n]),hs())}}function Sa(e,n){if(jt){let i=jt.provides;const a=jt.parent&&jt.parent.provides;a===i&&(i=jt.provides=Object.create(a)),i[e]=n}}function yn(e,n,i=!1){const a=rh();if(a||Js){let s=Js?Js._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&nt(n)?n.call(a&&a.proxy):n}}function Dp(){return!!(rh()||Js)}const Rp=Symbol.for("v-scx"),Np=()=>yn(Rp);function We(e,n,i){return $d(e,n,i)}function $d(e,n,i=yt){const{immediate:a,deep:s,flush:r,once:l}=i,d=Kt({},i),h=n&&a||!n&&r!=="post";let m;if(Bo){if(r==="sync"){const x=Np();m=x.__watcherHandles||(x.__watcherHandles=[])}else if(!h){const x=()=>{};return x.stop=Un,x.resume=Un,x.pause=Un,x}}const f=jt;d.call=(x,M,P)=>Hn(x,f,M,P);let v=!1;r==="post"?d.scheduler=x=>{tn(x,f&&f.suspense)}:r!=="sync"&&(v=!0,d.scheduler=(x,M)=>{M?x():jl(x)}),d.augmentJob=x=>{n&&(x.flags|=4),v&&(x.flags|=2,f&&(x.id=f.uid,x.i=f))};const k=Mp(e,n,d);return Bo&&(m?m.push(k):h&&k()),k}function Bp(e,n,i){const a=this.proxy,s=$t(e)?e.includes(".")?Od(a,e):()=>a[e]:e.bind(a,a);let r;nt(n)?r=n:(r=n.handler,i=n);const l=Vo(this),d=$d(s,r.bind(a),i);return l(),d}function Od(e,n){const i=n.split(".");return()=>{let a=e;for(let s=0;s<i.length&&a;s++)a=a[i[s]];return a}}const Dd=Symbol("_vte"),Fp=e=>e.__isTeleport,Eo=e=>e&&(e.disabled||e.disabled===""),Fc=e=>e&&(e.defer||e.defer===""),zc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Uc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,_l=(e,n)=>{const i=e&&e.to;return $t(i)?n?n(i):null:i},Rd={name:"Teleport",__isTeleport:!0,process(e,n,i,a,s,r,l,d,h,m){const{mc:f,pc:v,pbc:k,o:{insert:x,querySelector:M,createText:P,createComment:R}}=m,T=Eo(n.props);let{shapeFlag:A,children:g,dynamicChildren:C}=n;if(e==null){const w=n.el=P(""),E=n.anchor=P("");x(w,i,a),x(E,i,a);const O=(V,se)=>{A&16&&f(g,V,se,s,r,l,d,h)},W=()=>{const V=n.target=_l(n.props,M),se=Nd(V,n,P,x);V&&(l!=="svg"&&zc(V)?l="svg":l!=="mathml"&&Uc(V)&&(l="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(V),T||(O(V,se),Ma(n,!1)))};T&&(O(i,E),Ma(n,!0)),Fc(n.props)?(n.el.__isMounted=!1,tn(()=>{W(),delete n.el.__isMounted},r)):W()}else{if(Fc(n.props)&&e.el.__isMounted===!1){tn(()=>{Rd.process(e,n,i,a,s,r,l,d,h,m)},r);return}n.el=e.el,n.targetStart=e.targetStart;const w=n.anchor=e.anchor,E=n.target=e.target,O=n.targetAnchor=e.targetAnchor,W=Eo(e.props),V=W?i:E,se=W?w:O;if(l==="svg"||zc(E)?l="svg":(l==="mathml"||Uc(E))&&(l="mathml"),C?(k(e.dynamicChildren,C,V,s,r,l,d),Jl(e,n,!0)):h||v(e,n,V,se,s,r,l,d,!1),T)W?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Aa(n,i,w,m,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const ge=n.target=_l(n.props,M);ge&&Aa(n,ge,null,m,0)}else W&&Aa(n,E,O,m,1);Ma(n,T)}},remove(e,n,i,{um:a,o:{remove:s}},r){const{shapeFlag:l,children:d,anchor:h,targetStart:m,targetAnchor:f,target:v,props:k}=e;if(v&&(s(m),s(f)),r&&s(h),l&16){const x=r||!Eo(k);for(let M=0;M<d.length;M++){const P=d[M];a(P,n,i,x,!!P.dynamicChildren)}}},move:Aa,hydrate:zp};function Aa(e,n,i,{o:{insert:a},m:s},r=2){r===0&&a(e.targetAnchor,n,i);const{el:l,anchor:d,shapeFlag:h,children:m,props:f}=e,v=r===2;if(v&&a(l,n,i),(!v||Eo(f))&&h&16)for(let k=0;k<m.length;k++)s(m[k],n,i,2);v&&a(d,n,i)}function zp(e,n,i,a,s,r,{o:{nextSibling:l,parentNode:d,querySelector:h,insert:m,createText:f}},v){function k(P,R,T,A){R.anchor=v(l(P),R,d(P),i,a,s,r),R.targetStart=T,R.targetAnchor=A}const x=n.target=_l(n.props,h),M=Eo(n.props);if(x){const P=x._lpa||x.firstChild;if(n.shapeFlag&16)if(M)k(e,n,P,P&&l(P));else{n.anchor=l(e);let R=P;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")n.targetStart=R;else if(R.data==="teleport anchor"){n.targetAnchor=R,x._lpa=n.targetAnchor&&l(n.targetAnchor);break}}R=l(R)}n.targetAnchor||Nd(x,n,f,m),v(P&&l(P),n,x,i,a,s,r)}Ma(n,M)}else M&&n.shapeFlag&16&&k(e,n,e,l(e));return n.anchor&&l(n.anchor)}const Up=Rd;function Ma(e,n){const i=e.ctx;if(i&&i.ut){let a,s;for(n?(a=e.el,s=e.anchor):(a=e.targetStart,s=e.targetAnchor);a&&a!==s;)a.nodeType===1&&a.setAttribute("data-v-owner",i.uid),a=a.nextSibling;i.ut()}}function Nd(e,n,i,a){const s=n.targetStart=i(""),r=n.targetAnchor=i("");return s[Dd]=r,e&&(a(s,e),a(r,e)),r}const Hp=Symbol("_leaveCb");function Gl(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Gl(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Bd(e,n){return nt(e)?Kt({name:e.name},n,{setup:e}):e}function Fd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Va=new WeakMap;function To(e,n,i,a,s=!1){if(je(e)){e.forEach((M,P)=>To(M,n&&(je(n)?n[P]:n),i,a,s));return}if(Ti(a)&&!s){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&To(e,n,i,a.component.subTree);return}const r=a.shapeFlag&4?dr(a.component):a.el,l=s?null:r,{i:d,r:h}=e,m=n&&n.r,f=d.refs===yt?d.refs={}:d.refs,v=d.setupState,k=ct(v),x=v===yt?ed:M=>dt(k,M);if(m!=null&&m!==h){if(Hc(n),$t(m))f[m]=null,x(m)&&(v[m]=null);else if(St(m)){m.value=null;const M=n;M.k&&(f[M.k]=null)}}if(nt(h))Ho(h,d,12,[l,f]);else{const M=$t(h),P=St(h);if(M||P){const R=()=>{if(e.f){const T=M?x(h)?v[h]:f[h]:h.value;if(s)je(T)&&Bl(T,r);else if(je(T))T.includes(r)||T.push(r);else if(M)f[h]=[r],x(h)&&(v[h]=f[h]);else{const A=[r];h.value=A,e.k&&(f[e.k]=A)}}else M?(f[h]=l,x(h)&&(v[h]=l)):P&&(h.value=l,e.k&&(f[e.k]=l))};if(l){const T=()=>{R(),Va.delete(e)};T.id=-1,Va.set(e,T),tn(T,i)}else Hc(e),R()}}}function Hc(e){const n=Va.get(e);n&&(n.flags|=8,Va.delete(e))}sr().requestIdleCallback;sr().cancelIdleCallback;const Ti=e=>!!e.type.__asyncLoader,zd=e=>e.type.__isKeepAlive;function Vp(e,n){Ud(e,"a",n)}function Zp(e,n){Ud(e,"da",n)}function Ud(e,n,i=jt){const a=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(rr(n,a,i),i){let s=i.parent;for(;s&&s.parent;)zd(s.parent.vnode)&&qp(a,n,i,s),s=s.parent}}function qp(e,n,i,a){const s=rr(n,e,a,!0);Ms(()=>{Bl(a[n],s)},i)}function rr(e,n,i=jt,a=!1){if(i){const s=i[e]||(i[e]=[]),r=n.__weh||(n.__weh=(...l)=>{ds();const d=Vo(i),h=Hn(n,i,e,l);return d(),hs(),h});return a?s.unshift(r):s.push(r),r}}const ms=e=>(n,i=jt)=>{(!Bo||e==="sp")&&rr(e,(...a)=>n(...a),i)},Wp=ms("bm"),wn=ms("m"),jp=ms("bu"),Gp=ms("u"),Kp=ms("bum"),Ms=ms("um"),Yp=ms("sp"),Jp=ms("rtg"),Xp=ms("rtc");function Qp(e,n=jt){rr("ec",e,n)}const em="components";function lr(e,n){return nm(em,e,!0,n)||e}const tm=Symbol.for("v-ndc");function nm(e,n,i=!0,a=!1){const s=Vt||jt;if(s){const r=s.type;{const d=zm(r,!1);if(d&&(d===n||d===kn(n)||d===tr(kn(n))))return r}const l=Vc(s[e]||r[e],n)||Vc(s.appContext[e],n);return!l&&a?r:l}}function Vc(e,n){return e&&(e[n]||e[kn(n)]||e[tr(kn(n))])}function $e(e,n,i,a){let s;const r=i,l=je(e);if(l||$t(e)){const d=l&&us(e);let h=!1,m=!1;d&&(h=!pn(e),m=fs(e),e=ir(e)),s=new Array(e.length);for(let f=0,v=e.length;f<v;f++)s[f]=n(h?m?Si(Pn(e[f])):Pn(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=n(d+1,d,void 0,r)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(d,h)=>n(d,h,void 0,r));else{const d=Object.keys(e);s=new Array(d.length);for(let h=0,m=d.length;h<m;h++){const f=d[h];s[h]=n(e[f],f,h,r)}}else s=[];return s}function vo(e,n,i={},a,s){if(Vt.ce||Vt.parent&&Ti(Vt.parent)&&Vt.parent.ce){const m=Object.keys(i).length>0;return n!=="default"&&(i.name=n),_(),et(be,null,[Ne("slot",i,a&&a())],m?-2:64)}let r=e[n];r&&r._c&&(r._d=!1),_();const l=r&&Hd(r(i)),d=i.key||l&&l.key,h=et(be,{key:(d&&!Mn(d)?d:`_${n}`)+(!l&&a?"_fb":"")},l||(a?a():[]),l&&e._===1?64:-2);return r&&r._c&&(r._d=!0),h}function Hd(e){return e.some(n=>No(n)?!(n.type===ps||n.type===be&&!Hd(n.children)):!0)?e:null}const yl=e=>e?lh(e)?dr(e):yl(e.parent):null,Io=Kt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>yl(e.parent),$root:e=>yl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Zd(e),$forceUpdate:e=>e.f||(e.f=()=>{jl(e.update)}),$nextTick:e=>e.n||(e.n=Mi.bind(e.proxy)),$watch:e=>Bp.bind(e)}),el=(e,n)=>e!==yt&&!e.__isScriptSetup&&dt(e,n),sm={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:i,setupState:a,data:s,props:r,accessCache:l,type:d,appContext:h}=e;if(n[0]!=="$"){const k=l[n];if(k!==void 0)switch(k){case 1:return a[n];case 2:return s[n];case 4:return i[n];case 3:return r[n]}else{if(el(a,n))return l[n]=1,a[n];if(s!==yt&&dt(s,n))return l[n]=2,s[n];if(dt(r,n))return l[n]=3,r[n];if(i!==yt&&dt(i,n))return l[n]=4,i[n];bl&&(l[n]=0)}}const m=Io[n];let f,v;if(m)return n==="$attrs"&&Wt(e.attrs,"get",""),m(e);if((f=d.__cssModules)&&(f=f[n]))return f;if(i!==yt&&dt(i,n))return l[n]=4,i[n];if(v=h.config.globalProperties,dt(v,n))return v[n]},set({_:e},n,i){const{data:a,setupState:s,ctx:r}=e;return el(s,n)?(s[n]=i,!0):a!==yt&&dt(a,n)?(a[n]=i,!0):dt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(r[n]=i,!0)},has({_:{data:e,setupState:n,accessCache:i,ctx:a,appContext:s,props:r,type:l}},d){let h;return!!(i[d]||e!==yt&&d[0]!=="$"&&dt(e,d)||el(n,d)||dt(r,d)||dt(a,d)||dt(Io,d)||dt(s.config.globalProperties,d)||(h=l.__cssModules)&&h[d])},defineProperty(e,n,i){return i.get!=null?e._.accessCache[n]=0:dt(i,"value")&&this.set(e,n,i.value,null),Reflect.defineProperty(e,n,i)}};function Zc(e){return je(e)?e.reduce((n,i)=>(n[i]=null,n),{}):e}let bl=!0;function im(e){const n=Zd(e),i=e.proxy,a=e.ctx;bl=!1,n.beforeCreate&&qc(n.beforeCreate,e,"bc");const{data:s,computed:r,methods:l,watch:d,provide:h,inject:m,created:f,beforeMount:v,mounted:k,beforeUpdate:x,updated:M,activated:P,deactivated:R,beforeDestroy:T,beforeUnmount:A,destroyed:g,unmounted:C,render:w,renderTracked:E,renderTriggered:O,errorCaptured:W,serverPrefetch:V,expose:se,inheritAttrs:ge,components:Se,directives:Me,filters:ie}=n;if(m&&om(m,a,null),l)for(const Ae in l){const pe=l[Ae];nt(pe)&&(a[Ae]=pe.bind(i))}if(s){const Ae=s.call(i,i);bt(Ae)&&(e.data=Uo(Ae))}if(bl=!0,r)for(const Ae in r){const pe=r[Ae],Ce=nt(pe)?pe.bind(i,i):nt(pe.get)?pe.get.bind(i,i):Un,K=!nt(pe)&&nt(pe.set)?pe.set.bind(i):Un,he=ne({get:Ce,set:K});Object.defineProperty(a,Ae,{enumerable:!0,configurable:!0,get:()=>he.value,set:Ee=>he.value=Ee})}if(d)for(const Ae in d)Vd(d[Ae],a,i,Ae);if(h){const Ae=nt(h)?h.call(i):h;Reflect.ownKeys(Ae).forEach(pe=>{Sa(pe,Ae[pe])})}f&&qc(f,e,"c");function de(Ae,pe){je(pe)?pe.forEach(Ce=>Ae(Ce.bind(i))):pe&&Ae(pe.bind(i))}if(de(Wp,v),de(wn,k),de(jp,x),de(Gp,M),de(Vp,P),de(Zp,R),de(Qp,W),de(Xp,E),de(Jp,O),de(Kp,A),de(Ms,C),de(Yp,V),je(se))if(se.length){const Ae=e.exposed||(e.exposed={});se.forEach(pe=>{Object.defineProperty(Ae,pe,{get:()=>i[pe],set:Ce=>i[pe]=Ce,enumerable:!0})})}else e.exposed||(e.exposed={});w&&e.render===Un&&(e.render=w),ge!=null&&(e.inheritAttrs=ge),Se&&(e.components=Se),Me&&(e.directives=Me),V&&Fd(e)}function om(e,n,i=Un){je(e)&&(e=kl(e));for(const a in e){const s=e[a];let r;bt(s)?"default"in s?r=yn(s.from||a,s.default,!0):r=yn(s.from||a):r=yn(s),St(r)?Object.defineProperty(n,a,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):n[a]=r}}function qc(e,n,i){Hn(je(e)?e.map(a=>a.bind(n.proxy)):e.bind(n.proxy),n,i)}function Vd(e,n,i,a){let s=a.includes(".")?Od(i,a):()=>i[a];if($t(e)){const r=n[e];nt(r)&&We(s,r)}else if(nt(e))We(s,e.bind(i));else if(bt(e))if(je(e))e.forEach(r=>Vd(r,n,i,a));else{const r=nt(e.handler)?e.handler.bind(i):n[e.handler];nt(r)&&We(s,r,e)}}function Zd(e){const n=e.type,{mixins:i,extends:a}=n,{mixins:s,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,d=r.get(n);let h;return d?h=d:!s.length&&!i&&!a?h=n:(h={},s.length&&s.forEach(m=>Za(h,m,l,!0)),Za(h,n,l)),bt(n)&&r.set(n,h),h}function Za(e,n,i,a=!1){const{mixins:s,extends:r}=n;r&&Za(e,r,i,!0),s&&s.forEach(l=>Za(e,l,i,!0));for(const l in n)if(!(a&&l==="expose")){const d=am[l]||i&&i[l];e[l]=d?d(e[l],n[l]):n[l]}return e}const am={data:Wc,props:jc,emits:jc,methods:wo,computed:wo,beforeCreate:en,created:en,beforeMount:en,mounted:en,beforeUpdate:en,updated:en,beforeDestroy:en,beforeUnmount:en,destroyed:en,unmounted:en,activated:en,deactivated:en,errorCaptured:en,serverPrefetch:en,components:wo,directives:wo,watch:lm,provide:Wc,inject:rm};function Wc(e,n){return n?e?function(){return Kt(nt(e)?e.call(this,this):e,nt(n)?n.call(this,this):n)}:n:e}function rm(e,n){return wo(kl(e),kl(n))}function kl(e){if(je(e)){const n={};for(let i=0;i<e.length;i++)n[e[i]]=e[i];return n}return e}function en(e,n){return e?[...new Set([].concat(e,n))]:n}function wo(e,n){return e?Kt(Object.create(null),e,n):n}function jc(e,n){return e?je(e)&&je(n)?[...new Set([...e,...n])]:Kt(Object.create(null),Zc(e),Zc(n??{})):n}function lm(e,n){if(!e)return n;if(!n)return e;const i=Kt(Object.create(null),e);for(const a in n)i[a]=en(e[a],n[a]);return i}function qd(){return{app:null,config:{isNativeTag:ed,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cm=0;function um(e,n){return function(a,s=null){nt(a)||(a=Kt({},a)),s!=null&&!bt(s)&&(s=null);const r=qd(),l=new WeakSet,d=[];let h=!1;const m=r.app={_uid:cm++,_component:a,_props:s,_container:null,_context:r,_instance:null,version:Hm,get config(){return r.config},set config(f){},use(f,...v){return l.has(f)||(f&&nt(f.install)?(l.add(f),f.install(m,...v)):nt(f)&&(l.add(f),f(m,...v))),m},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),m},component(f,v){return v?(r.components[f]=v,m):r.components[f]},directive(f,v){return v?(r.directives[f]=v,m):r.directives[f]},mount(f,v,k){if(!h){const x=m._ceVNode||Ne(a,s);return x.appContext=r,k===!0?k="svg":k===!1&&(k=void 0),e(x,f,k),h=!0,m._container=f,f.__vue_app__=m,dr(x.component)}},onUnmount(f){d.push(f)},unmount(){h&&(Hn(d,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(f,v){return r.provides[f]=v,m},runWithContext(f){const v=Js;Js=m;try{return f()}finally{Js=v}}};return m}}let Js=null;const dm=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${kn(n)}Modifiers`]||e[`${Ss(n)}Modifiers`];function hm(e,n,...i){if(e.isUnmounted)return;const a=e.vnode.props||yt;let s=i;const r=n.startsWith("update:"),l=r&&dm(a,n.slice(7));l&&(l.trim&&(s=i.map(f=>$t(f)?f.trim():f)),l.number&&(s=i.map(nr)));let d,h=a[d=Kr(n)]||a[d=Kr(kn(n))];!h&&r&&(h=a[d=Kr(Ss(n))]),h&&Hn(h,e,6,s);const m=a[d+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,Hn(m,e,6,s)}}const fm=new WeakMap;function Wd(e,n,i=!1){const a=i?fm:n.emitsCache,s=a.get(e);if(s!==void 0)return s;const r=e.emits;let l={},d=!1;if(!nt(e)){const h=m=>{const f=Wd(m,n,!0);f&&(d=!0,Kt(l,f))};!i&&n.mixins.length&&n.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!r&&!d?(bt(e)&&a.set(e,null),null):(je(r)?r.forEach(h=>l[h]=null):Kt(l,r),bt(e)&&a.set(e,l),l)}function cr(e,n){return!e||!Xa(n)?!1:(n=n.slice(2).replace(/Once$/,""),dt(e,n[0].toLowerCase()+n.slice(1))||dt(e,Ss(n))||dt(e,n))}function Gc(e){const{type:n,vnode:i,proxy:a,withProxy:s,propsOptions:[r],slots:l,attrs:d,emit:h,render:m,renderCache:f,props:v,data:k,setupState:x,ctx:M,inheritAttrs:P}=e,R=Ha(e);let T,A;try{if(i.shapeFlag&4){const C=s||a,w=C;T=zn(m.call(w,C,f,v,x,k,M)),A=d}else{const C=n;T=zn(C.length>1?C(v,{attrs:d,slots:l,emit:h}):C(v,null)),A=n.props?d:pm(d)}}catch(C){So.length=0,ar(C,e,1),T=Ne(ps)}let g=T;if(A&&P!==!1){const C=Object.keys(A),{shapeFlag:w}=g;C.length&&w&7&&(r&&C.some(Nl)&&(A=mm(A,r)),g=Pi(g,A,!1,!0))}return i.dirs&&(g=Pi(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(i.dirs):i.dirs),i.transition&&Gl(g,i.transition),T=g,Ha(R),T}const pm=e=>{let n;for(const i in e)(i==="class"||i==="style"||Xa(i))&&((n||(n={}))[i]=e[i]);return n},mm=(e,n)=>{const i={};for(const a in e)(!Nl(a)||!(a.slice(9)in n))&&(i[a]=e[a]);return i};function vm(e,n,i){const{props:a,children:s,component:r}=e,{props:l,children:d,patchFlag:h}=n,m=r.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return a?Kc(a,l,m):!!l;if(h&8){const f=n.dynamicProps;for(let v=0;v<f.length;v++){const k=f[v];if(l[k]!==a[k]&&!cr(m,k))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:a===l?!1:a?l?Kc(a,l,m):!0:!!l;return!1}function Kc(e,n,i){const a=Object.keys(n);if(a.length!==Object.keys(e).length)return!0;for(let s=0;s<a.length;s++){const r=a[s];if(n[r]!==e[r]&&!cr(i,r))return!0}return!1}function gm({vnode:e,parent:n},i){for(;n;){const a=n.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=n.vnode).el=i,n=n.parent;else break}}const jd={},Gd=()=>Object.create(jd),Kd=e=>Object.getPrototypeOf(e)===jd;function _m(e,n,i,a=!1){const s={},r=Gd();e.propsDefaults=Object.create(null),Yd(e,n,s,r);for(const l in e.propsOptions[0])l in s||(s[l]=void 0);i?e.props=a?s:xd(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function ym(e,n,i,a){const{props:s,attrs:r,vnode:{patchFlag:l}}=e,d=ct(s),[h]=e.propsOptions;let m=!1;if((a||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let v=0;v<f.length;v++){let k=f[v];if(cr(e.emitsOptions,k))continue;const x=n[k];if(h)if(dt(r,k))x!==r[k]&&(r[k]=x,m=!0);else{const M=kn(k);s[M]=wl(h,d,M,x,e,!1)}else x!==r[k]&&(r[k]=x,m=!0)}}}else{Yd(e,n,s,r)&&(m=!0);let f;for(const v in d)(!n||!dt(n,v)&&((f=Ss(v))===v||!dt(n,f)))&&(h?i&&(i[v]!==void 0||i[f]!==void 0)&&(s[v]=wl(h,d,v,void 0,e,!0)):delete s[v]);if(r!==d)for(const v in r)(!n||!dt(n,v))&&(delete r[v],m=!0)}m&&os(e.attrs,"set","")}function Yd(e,n,i,a){const[s,r]=e.propsOptions;let l=!1,d;if(n)for(let h in n){if(Lo(h))continue;const m=n[h];let f;s&&dt(s,f=kn(h))?!r||!r.includes(f)?i[f]=m:(d||(d={}))[f]=m:cr(e.emitsOptions,h)||(!(h in a)||m!==a[h])&&(a[h]=m,l=!0)}if(r){const h=ct(i),m=d||yt;for(let f=0;f<r.length;f++){const v=r[f];i[v]=wl(s,h,v,m[v],e,!dt(m,v))}}return l}function wl(e,n,i,a,s,r){const l=e[i];if(l!=null){const d=dt(l,"default");if(d&&a===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&nt(h)){const{propsDefaults:m}=s;if(i in m)a=m[i];else{const f=Vo(s);a=m[i]=h.call(null,n),f()}}else a=h;s.ce&&s.ce._setProp(i,a)}l[0]&&(r&&!d?a=!1:l[1]&&(a===""||a===Ss(i))&&(a=!0))}return a}const bm=new WeakMap;function Jd(e,n,i=!1){const a=i?bm:n.propsCache,s=a.get(e);if(s)return s;const r=e.props,l={},d=[];let h=!1;if(!nt(e)){const f=v=>{h=!0;const[k,x]=Jd(v,n,!0);Kt(l,k),x&&d.push(...x)};!i&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!h)return bt(e)&&a.set(e,xi),xi;if(je(r))for(let f=0;f<r.length;f++){const v=kn(r[f]);Yc(v)&&(l[v]=yt)}else if(r)for(const f in r){const v=kn(f);if(Yc(v)){const k=r[f],x=l[v]=je(k)||nt(k)?{type:k}:Kt({},k),M=x.type;let P=!1,R=!0;if(je(M))for(let T=0;T<M.length;++T){const A=M[T],g=nt(A)&&A.name;if(g==="Boolean"){P=!0;break}else g==="String"&&(R=!1)}else P=nt(M)&&M.name==="Boolean";x[0]=P,x[1]=R,(P||dt(x,"default"))&&d.push(v)}}const m=[l,d];return bt(e)&&a.set(e,m),m}function Yc(e){return e[0]!=="$"&&!Lo(e)}const Kl=e=>e==="_"||e==="_ctx"||e==="$stable",Yl=e=>je(e)?e.map(zn):[zn(e)],km=(e,n,i)=>{if(n._n)return n;const a=Ye((...s)=>Yl(n(...s)),i);return a._c=!1,a},Xd=(e,n,i)=>{const a=e._ctx;for(const s in e){if(Kl(s))continue;const r=e[s];if(nt(r))n[s]=km(s,r,a);else if(r!=null){const l=Yl(r);n[s]=()=>l}}},Qd=(e,n)=>{const i=Yl(n);e.slots.default=()=>i},eh=(e,n,i)=>{for(const a in n)(i||!Kl(a))&&(e[a]=n[a])},wm=(e,n,i)=>{const a=e.slots=Gd();if(e.vnode.shapeFlag&32){const s=n._;s?(eh(a,n,i),i&&id(a,"_",s,!0)):Xd(n,a)}else n&&Qd(e,n)},Cm=(e,n,i)=>{const{vnode:a,slots:s}=e;let r=!0,l=yt;if(a.shapeFlag&32){const d=n._;d?i&&d===1?r=!1:eh(s,n,i):(r=!n.$stable,Xd(n,s)),l=n}else n&&(Qd(e,n),l={default:1});if(r)for(const d in s)!Kl(d)&&l[d]==null&&delete s[d]},tn=Tm;function Lm(e){return xm(e)}function xm(e,n){const i=sr();i.__VUE__=!0;const{insert:a,remove:s,patchProp:r,createElement:l,createText:d,createComment:h,setText:m,setElementText:f,parentNode:v,nextSibling:k,setScopeId:x=Un,insertStaticContent:M}=e,P=(D,F,Z,oe=null,le=null,ae=null,xe=void 0,Le=null,we=!!F.dynamicChildren)=>{if(D===F)return;D&&!go(D,F)&&(oe=U(D),Ee(D,le,ae,!0),D=null),F.patchFlag===-2&&(we=!1,F.dynamicChildren=null);const{type:fe,ref:ze,shapeFlag:Te}=F;switch(fe){case ur:R(D,F,Z,oe);break;case ps:T(D,F,Z,oe);break;case Pa:D==null&&A(F,Z,oe,xe);break;case be:Se(D,F,Z,oe,le,ae,xe,Le,we);break;default:Te&1?w(D,F,Z,oe,le,ae,xe,Le,we):Te&6?Me(D,F,Z,oe,le,ae,xe,Le,we):(Te&64||Te&128)&&fe.process(D,F,Z,oe,le,ae,xe,Le,we,ke)}ze!=null&&le?To(ze,D&&D.ref,ae,F||D,!F):ze==null&&D&&D.ref!=null&&To(D.ref,null,ae,D,!0)},R=(D,F,Z,oe)=>{if(D==null)a(F.el=d(F.children),Z,oe);else{const le=F.el=D.el;F.children!==D.children&&m(le,F.children)}},T=(D,F,Z,oe)=>{D==null?a(F.el=h(F.children||""),Z,oe):F.el=D.el},A=(D,F,Z,oe)=>{[D.el,D.anchor]=M(D.children,F,Z,oe,D.el,D.anchor)},g=({el:D,anchor:F},Z,oe)=>{let le;for(;D&&D!==F;)le=k(D),a(D,Z,oe),D=le;a(F,Z,oe)},C=({el:D,anchor:F})=>{let Z;for(;D&&D!==F;)Z=k(D),s(D),D=Z;s(F)},w=(D,F,Z,oe,le,ae,xe,Le,we)=>{if(F.type==="svg"?xe="svg":F.type==="math"&&(xe="mathml"),D==null)E(F,Z,oe,le,ae,xe,Le,we);else{const fe=D.el&&D.el._isVueCE?D.el:null;try{fe&&fe._beginPatch(),V(D,F,le,ae,xe,Le,we)}finally{fe&&fe._endPatch()}}},E=(D,F,Z,oe,le,ae,xe,Le)=>{let we,fe;const{props:ze,shapeFlag:Te,transition:Be,dirs:qe}=D;if(we=D.el=l(D.type,ae,ze&&ze.is,ze),Te&8?f(we,D.children):Te&16&&W(D.children,we,null,oe,le,tl(D,ae),xe,Le),qe&&Vs(D,null,oe,"created"),O(we,D,D.scopeId,xe,oe),ze){for(const Xe in ze)Xe!=="value"&&!Lo(Xe)&&r(we,Xe,null,ze[Xe],ae,oe);"value"in ze&&r(we,"value",null,ze.value,ae),(fe=ze.onVnodeBeforeMount)&&Nn(fe,oe,D)}qe&&Vs(D,null,oe,"beforeMount");const Ge=Am(le,Be);Ge&&Be.beforeEnter(we),a(we,F,Z),((fe=ze&&ze.onVnodeMounted)||Ge||qe)&&tn(()=>{fe&&Nn(fe,oe,D),Ge&&Be.enter(we),qe&&Vs(D,null,oe,"mounted")},le)},O=(D,F,Z,oe,le)=>{if(Z&&x(D,Z),oe)for(let ae=0;ae<oe.length;ae++)x(D,oe[ae]);if(le){let ae=le.subTree;if(F===ae||sh(ae.type)&&(ae.ssContent===F||ae.ssFallback===F)){const xe=le.vnode;O(D,xe,xe.scopeId,xe.slotScopeIds,le.parent)}}},W=(D,F,Z,oe,le,ae,xe,Le,we=0)=>{for(let fe=we;fe<D.length;fe++){const ze=D[fe]=Le?xs(D[fe]):zn(D[fe]);P(null,ze,F,Z,oe,le,ae,xe,Le)}},V=(D,F,Z,oe,le,ae,xe)=>{const Le=F.el=D.el;let{patchFlag:we,dynamicChildren:fe,dirs:ze}=F;we|=D.patchFlag&16;const Te=D.props||yt,Be=F.props||yt;let qe;if(Z&&Zs(Z,!1),(qe=Be.onVnodeBeforeUpdate)&&Nn(qe,Z,F,D),ze&&Vs(F,D,Z,"beforeUpdate"),Z&&Zs(Z,!0),(Te.innerHTML&&Be.innerHTML==null||Te.textContent&&Be.textContent==null)&&f(Le,""),fe?se(D.dynamicChildren,fe,Le,Z,oe,tl(F,le),ae):xe||pe(D,F,Le,null,Z,oe,tl(F,le),ae,!1),we>0){if(we&16)ge(Le,Te,Be,Z,le);else if(we&2&&Te.class!==Be.class&&r(Le,"class",null,Be.class,le),we&4&&r(Le,"style",Te.style,Be.style,le),we&8){const Ge=F.dynamicProps;for(let Xe=0;Xe<Ge.length;Xe++){const Ue=Ge[Xe],vt=Te[Ue],Ct=Be[Ue];(Ct!==vt||Ue==="value")&&r(Le,Ue,vt,Ct,le,Z)}}we&1&&D.children!==F.children&&f(Le,F.children)}else!xe&&fe==null&&ge(Le,Te,Be,Z,le);((qe=Be.onVnodeUpdated)||ze)&&tn(()=>{qe&&Nn(qe,Z,F,D),ze&&Vs(F,D,Z,"updated")},oe)},se=(D,F,Z,oe,le,ae,xe)=>{for(let Le=0;Le<F.length;Le++){const we=D[Le],fe=F[Le],ze=we.el&&(we.type===be||!go(we,fe)||we.shapeFlag&198)?v(we.el):Z;P(we,fe,ze,null,oe,le,ae,xe,!0)}},ge=(D,F,Z,oe,le)=>{if(F!==Z){if(F!==yt)for(const ae in F)!Lo(ae)&&!(ae in Z)&&r(D,ae,F[ae],null,le,oe);for(const ae in Z){if(Lo(ae))continue;const xe=Z[ae],Le=F[ae];xe!==Le&&ae!=="value"&&r(D,ae,Le,xe,le,oe)}"value"in Z&&r(D,"value",F.value,Z.value,le)}},Se=(D,F,Z,oe,le,ae,xe,Le,we)=>{const fe=F.el=D?D.el:d(""),ze=F.anchor=D?D.anchor:d("");let{patchFlag:Te,dynamicChildren:Be,slotScopeIds:qe}=F;qe&&(Le=Le?Le.concat(qe):qe),D==null?(a(fe,Z,oe),a(ze,Z,oe),W(F.children||[],Z,ze,le,ae,xe,Le,we)):Te>0&&Te&64&&Be&&D.dynamicChildren&&D.dynamicChildren.length===Be.length?(se(D.dynamicChildren,Be,Z,le,ae,xe,Le),(F.key!=null||le&&F===le.subTree)&&Jl(D,F,!0)):pe(D,F,Z,ze,le,ae,xe,Le,we)},Me=(D,F,Z,oe,le,ae,xe,Le,we)=>{F.slotScopeIds=Le,D==null?F.shapeFlag&512?le.ctx.activate(F,Z,oe,xe,we):ie(F,Z,oe,le,ae,xe,we):ue(D,F,we)},ie=(D,F,Z,oe,le,ae,xe)=>{const Le=D.component=Dm(D,oe,le);if(zd(D)&&(Le.ctx.renderer=ke),Rm(Le,!1,xe),Le.asyncDep){if(le&&le.registerDep(Le,de,xe),!D.el){const we=Le.subTree=Ne(ps);T(null,we,F,Z),D.placeholder=we.el}}else de(Le,D,F,Z,le,ae,xe)},ue=(D,F,Z)=>{const oe=F.component=D.component;if(vm(D,F,Z))if(oe.asyncDep&&!oe.asyncResolved){Ae(oe,F,Z);return}else oe.next=F,oe.update();else F.el=D.el,oe.vnode=F},de=(D,F,Z,oe,le,ae,xe)=>{const Le=()=>{if(D.isMounted){let{next:Te,bu:Be,u:qe,parent:Ge,vnode:Xe}=D;{const pt=th(D);if(pt){Te&&(Te.el=Xe.el,Ae(D,Te,xe)),pt.asyncDep.then(()=>{D.isUnmounted||Le()});return}}let Ue=Te,vt;Zs(D,!1),Te?(Te.el=Xe.el,Ae(D,Te,xe)):Te=Xe,Be&&Ia(Be),(vt=Te.props&&Te.props.onVnodeBeforeUpdate)&&Nn(vt,Ge,Te,Xe),Zs(D,!0);const Ct=Gc(D),ft=D.subTree;D.subTree=Ct,P(ft,Ct,v(ft.el),U(ft),D,le,ae),Te.el=Ct.el,Ue===null&&gm(D,Ct.el),qe&&tn(qe,le),(vt=Te.props&&Te.props.onVnodeUpdated)&&tn(()=>Nn(vt,Ge,Te,Xe),le)}else{let Te;const{el:Be,props:qe}=F,{bm:Ge,m:Xe,parent:Ue,root:vt,type:Ct}=D,ft=Ti(F);Zs(D,!1),Ge&&Ia(Ge),!ft&&(Te=qe&&qe.onVnodeBeforeMount)&&Nn(Te,Ue,F),Zs(D,!0);{vt.ce&&vt.ce._def.shadowRoot!==!1&&vt.ce._injectChildStyle(Ct);const pt=D.subTree=Gc(D);P(null,pt,Z,oe,D,le,ae),F.el=pt.el}if(Xe&&tn(Xe,le),!ft&&(Te=qe&&qe.onVnodeMounted)){const pt=F;tn(()=>Nn(Te,Ue,pt),le)}(F.shapeFlag&256||Ue&&Ti(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&D.a&&tn(D.a,le),D.isMounted=!0,F=Z=oe=null}};D.scope.on();const we=D.effect=new dd(Le);D.scope.off();const fe=D.update=we.run.bind(we),ze=D.job=we.runIfDirty.bind(we);ze.i=D,ze.id=D.uid,we.scheduler=()=>jl(ze),Zs(D,!0),fe()},Ae=(D,F,Z)=>{F.component=D;const oe=D.vnode.props;D.vnode=F,D.next=null,ym(D,F.props,oe,Z),Cm(D,F.children,Z),ds(),Bc(D),hs()},pe=(D,F,Z,oe,le,ae,xe,Le,we=!1)=>{const fe=D&&D.children,ze=D?D.shapeFlag:0,Te=F.children,{patchFlag:Be,shapeFlag:qe}=F;if(Be>0){if(Be&128){K(fe,Te,Z,oe,le,ae,xe,Le,we);return}else if(Be&256){Ce(fe,Te,Z,oe,le,ae,xe,Le,we);return}}qe&8?(ze&16&&ce(fe,le,ae),Te!==fe&&f(Z,Te)):ze&16?qe&16?K(fe,Te,Z,oe,le,ae,xe,Le,we):ce(fe,le,ae,!0):(ze&8&&f(Z,""),qe&16&&W(Te,Z,oe,le,ae,xe,Le,we))},Ce=(D,F,Z,oe,le,ae,xe,Le,we)=>{D=D||xi,F=F||xi;const fe=D.length,ze=F.length,Te=Math.min(fe,ze);let Be;for(Be=0;Be<Te;Be++){const qe=F[Be]=we?xs(F[Be]):zn(F[Be]);P(D[Be],qe,Z,null,le,ae,xe,Le,we)}fe>ze?ce(D,le,ae,!0,!1,Te):W(F,Z,oe,le,ae,xe,Le,we,Te)},K=(D,F,Z,oe,le,ae,xe,Le,we)=>{let fe=0;const ze=F.length;let Te=D.length-1,Be=ze-1;for(;fe<=Te&&fe<=Be;){const qe=D[fe],Ge=F[fe]=we?xs(F[fe]):zn(F[fe]);if(go(qe,Ge))P(qe,Ge,Z,null,le,ae,xe,Le,we);else break;fe++}for(;fe<=Te&&fe<=Be;){const qe=D[Te],Ge=F[Be]=we?xs(F[Be]):zn(F[Be]);if(go(qe,Ge))P(qe,Ge,Z,null,le,ae,xe,Le,we);else break;Te--,Be--}if(fe>Te){if(fe<=Be){const qe=Be+1,Ge=qe<ze?F[qe].el:oe;for(;fe<=Be;)P(null,F[fe]=we?xs(F[fe]):zn(F[fe]),Z,Ge,le,ae,xe,Le,we),fe++}}else if(fe>Be)for(;fe<=Te;)Ee(D[fe],le,ae,!0),fe++;else{const qe=fe,Ge=fe,Xe=new Map;for(fe=Ge;fe<=Be;fe++){const gt=F[fe]=we?xs(F[fe]):zn(F[fe]);gt.key!=null&&Xe.set(gt.key,fe)}let Ue,vt=0;const Ct=Be-Ge+1;let ft=!1,pt=0;const Jt=new Array(Ct);for(fe=0;fe<Ct;fe++)Jt[fe]=0;for(fe=qe;fe<=Te;fe++){const gt=D[fe];if(vt>=Ct){Ee(gt,le,ae,!0);continue}let X;if(gt.key!=null)X=Xe.get(gt.key);else for(Ue=Ge;Ue<=Be;Ue++)if(Jt[Ue-Ge]===0&&go(gt,F[Ue])){X=Ue;break}X===void 0?Ee(gt,le,ae,!0):(Jt[X-Ge]=fe+1,X>=pt?pt=X:ft=!0,P(gt,F[X],Z,null,le,ae,xe,Le,we),vt++)}const Ut=ft?Em(Jt):xi;for(Ue=Ut.length-1,fe=Ct-1;fe>=0;fe--){const gt=Ge+fe,X=F[gt],J=F[gt+1],te=gt+1<ze?J.el||nh(J):oe;Jt[fe]===0?P(null,X,Z,te,le,ae,xe,Le,we):ft&&(Ue<0||fe!==Ut[Ue]?he(X,Z,te,2):Ue--)}}},he=(D,F,Z,oe,le=null)=>{const{el:ae,type:xe,transition:Le,children:we,shapeFlag:fe}=D;if(fe&6){he(D.component.subTree,F,Z,oe);return}if(fe&128){D.suspense.move(F,Z,oe);return}if(fe&64){xe.move(D,F,Z,ke);return}if(xe===be){a(ae,F,Z);for(let Te=0;Te<we.length;Te++)he(we[Te],F,Z,oe);a(D.anchor,F,Z);return}if(xe===Pa){g(D,F,Z);return}if(oe!==2&&fe&1&&Le)if(oe===0)Le.beforeEnter(ae),a(ae,F,Z),tn(()=>Le.enter(ae),le);else{const{leave:Te,delayLeave:Be,afterLeave:qe}=Le,Ge=()=>{D.ctx.isUnmounted?s(ae):a(ae,F,Z)},Xe=()=>{ae._isLeaving&&ae[Hp](!0),Te(ae,()=>{Ge(),qe&&qe()})};Be?Be(ae,Ge,Xe):Xe()}else a(ae,F,Z)},Ee=(D,F,Z,oe=!1,le=!1)=>{const{type:ae,props:xe,ref:Le,children:we,dynamicChildren:fe,shapeFlag:ze,patchFlag:Te,dirs:Be,cacheIndex:qe}=D;if(Te===-2&&(le=!1),Le!=null&&(ds(),To(Le,null,Z,D,!0),hs()),qe!=null&&(F.renderCache[qe]=void 0),ze&256){F.ctx.deactivate(D);return}const Ge=ze&1&&Be,Xe=!Ti(D);let Ue;if(Xe&&(Ue=xe&&xe.onVnodeBeforeUnmount)&&Nn(Ue,F,D),ze&6)re(D.component,Z,oe);else{if(ze&128){D.suspense.unmount(Z,oe);return}Ge&&Vs(D,null,F,"beforeUnmount"),ze&64?D.type.remove(D,F,Z,ke,oe):fe&&!fe.hasOnce&&(ae!==be||Te>0&&Te&64)?ce(fe,F,Z,!1,!0):(ae===be&&Te&384||!le&&ze&16)&&ce(we,F,Z),oe&&Re(D)}(Xe&&(Ue=xe&&xe.onVnodeUnmounted)||Ge)&&tn(()=>{Ue&&Nn(Ue,F,D),Ge&&Vs(D,null,F,"unmounted")},Z)},Re=D=>{const{type:F,el:Z,anchor:oe,transition:le}=D;if(F===be){me(Z,oe);return}if(F===Pa){C(D);return}const ae=()=>{s(Z),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(D.shapeFlag&1&&le&&!le.persisted){const{leave:xe,delayLeave:Le}=le,we=()=>xe(Z,ae);Le?Le(D.el,ae,we):we()}else ae()},me=(D,F)=>{let Z;for(;D!==F;)Z=k(D),s(D),D=Z;s(F)},re=(D,F,Z)=>{const{bum:oe,scope:le,job:ae,subTree:xe,um:Le,m:we,a:fe}=D;Jc(we),Jc(fe),oe&&Ia(oe),le.stop(),ae&&(ae.flags|=8,Ee(xe,D,F,Z)),Le&&tn(Le,F),tn(()=>{D.isUnmounted=!0},F)},ce=(D,F,Z,oe=!1,le=!1,ae=0)=>{for(let xe=ae;xe<D.length;xe++)Ee(D[xe],F,Z,oe,le)},U=D=>{if(D.shapeFlag&6)return U(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const F=k(D.anchor||D.el),Z=F&&F[Dd];return Z?k(Z):F};let G=!1;const Y=(D,F,Z)=>{let oe;D==null?F._vnode&&(Ee(F._vnode,null,null,!0),oe=F._vnode.component):P(F._vnode||null,D,F,null,null,null,Z),F._vnode=D,G||(G=!0,Bc(oe),Sd(),G=!1)},ke={p:P,um:Ee,m:he,r:Re,mt:ie,mc:W,pc:pe,pbc:se,n:U,o:e};return{render:Y,hydrate:void 0,createApp:um(Y)}}function tl({type:e,props:n},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:i}function Zs({effect:e,job:n},i){i?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function Am(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Jl(e,n,i=!1){const a=e.children,s=n.children;if(je(a)&&je(s))for(let r=0;r<a.length;r++){const l=a[r];let d=s[r];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[r]=xs(s[r]),d.el=l.el),!i&&d.patchFlag!==-2&&Jl(l,d)),d.type===ur&&(d.patchFlag!==-1?d.el=l.el:d.__elIndex=r+(e.type===be?1:0)),d.type===ps&&!d.el&&(d.el=l.el)}}function Em(e){const n=e.slice(),i=[0];let a,s,r,l,d;const h=e.length;for(a=0;a<h;a++){const m=e[a];if(m!==0){if(s=i[i.length-1],e[s]<m){n[a]=s,i.push(a);continue}for(r=0,l=i.length-1;r<l;)d=r+l>>1,e[i[d]]<m?r=d+1:l=d;m<e[i[r]]&&(r>0&&(n[a]=i[r-1]),i[r]=a)}}for(r=i.length,l=i[r-1];r-- >0;)i[r]=l,l=n[l];return i}function th(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:th(n)}function Jc(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}function nh(e){if(e.placeholder)return e.placeholder;const n=e.component;return n?nh(n.subTree):null}const sh=e=>e.__isSuspense;function Tm(e,n){n&&n.pendingBranch?je(e)?n.effects.push(...e):n.effects.push(e):Op(e)}const be=Symbol.for("v-fgt"),ur=Symbol.for("v-txt"),ps=Symbol.for("v-cmt"),Pa=Symbol.for("v-stc"),So=[];let hn=null;function _(e=!1){So.push(hn=e?null:[])}function Im(){So.pop(),hn=So[So.length-1]||null}let Ro=1;function qa(e,n=!1){Ro+=e,e<0&&hn&&n&&(hn.hasOnce=!0)}function ih(e){return e.dynamicChildren=Ro>0?hn||xi:null,Im(),Ro>0&&hn&&hn.push(e),e}function b(e,n,i,a,s,r){return ih(u(e,n,i,a,s,r,!0))}function et(e,n,i,a,s){return ih(Ne(e,n,i,a,s,!0))}function No(e){return e?e.__v_isVNode===!0:!1}function go(e,n){return e.type===n.type&&e.key===n.key}const oh=({key:e})=>e??null,$a=({ref:e,ref_key:n,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?$t(e)||St(e)||nt(e)?{i:Vt,r:e,k:n,f:!!i}:e:null);function u(e,n=null,i=null,a=0,s=null,r=e===be?0:1,l=!1,d=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&oh(n),ref:n&&$a(n),scopeId:Pd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:a,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Vt};return d?(Xl(h,i),r&128&&e.normalize(h)):i&&(h.shapeFlag|=$t(i)?8:16),Ro>0&&!l&&hn&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&hn.push(h),h}const Ne=Sm;function Sm(e,n=null,i=null,a=0,s=null,r=!1){if((!e||e===tm)&&(e=ps),No(e)){const d=Pi(e,n,!0);return i&&Xl(d,i),Ro>0&&!r&&hn&&(d.shapeFlag&6?hn[hn.indexOf(e)]=d:hn.push(d)),d.patchFlag=-2,d}if(Um(e)&&(e=e.__vccOpts),n){n=Mm(n);let{class:d,style:h}=n;d&&!$t(d)&&(n.class=Ve(d)),bt(h)&&(or(h)&&!je(h)&&(h=Kt({},h)),n.style=Yt(h))}const l=$t(e)?1:sh(e)?128:Fp(e)?64:bt(e)?4:nt(e)?2:0;return u(e,n,i,a,s,l,r,!0)}function Mm(e){return e?or(e)||Kd(e)?Kt({},e):e:null}function Pi(e,n,i=!1,a=!1){const{props:s,ref:r,patchFlag:l,children:d,transition:h}=e,m=n?ah(s||{},n):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&oh(m),ref:n&&n.ref?i&&r?je(r)?r.concat($a(n)):[r,$a(n)]:$a(n):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==be?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pi(e.ssContent),ssFallback:e.ssFallback&&Pi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&a&&Gl(f,h.clone(f)),f}function He(e=" ",n=0){return Ne(ur,null,e,n)}function Pm(e,n){const i=Ne(Pa,null,e);return i.staticCount=n,i}function B(e="",n=!1){return n?(_(),et(ps,null,e)):Ne(ps,null,e)}function zn(e){return e==null||typeof e=="boolean"?Ne(ps):je(e)?Ne(be,null,e.slice()):No(e)?xs(e):Ne(ur,null,String(e))}function xs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pi(e)}function Xl(e,n){let i=0;const{shapeFlag:a}=e;if(n==null)n=null;else if(je(n))i=16;else if(typeof n=="object")if(a&65){const s=n.default;s&&(s._c&&(s._d=!1),Xl(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=n._;!s&&!Kd(n)?n._ctx=Vt:s===3&&Vt&&(Vt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else nt(n)?(n={default:n,_ctx:Vt},i=32):(n=String(n),a&64?(i=16,n=[He(n)]):i=8);e.children=n,e.shapeFlag|=i}function ah(...e){const n={};for(let i=0;i<e.length;i++){const a=e[i];for(const s in a)if(s==="class")n.class!==a.class&&(n.class=Ve([n.class,a.class]));else if(s==="style")n.style=Yt([n.style,a.style]);else if(Xa(s)){const r=n[s],l=a[s];l&&r!==l&&!(je(r)&&r.includes(l))&&(n[s]=r?[].concat(r,l):l)}else s!==""&&(n[s]=a[s])}return n}function Nn(e,n,i,a=null){Hn(e,n,7,[i,a])}const $m=qd();let Om=0;function Dm(e,n,i){const a=e.type,s=(n?n.appContext:e.appContext)||$m,r={uid:Om++,vnode:e,type:a,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ld(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jd(a,s),emitsOptions:Wd(a,s),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:a.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=n?n.root:r,r.emit=hm.bind(null,r),e.ce&&e.ce(r),r}let jt=null;const rh=()=>jt||Vt;let Wa,Cl;{const e=sr(),n=(i,a)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(a),r=>{s.length>1?s.forEach(l=>l(r)):s[0](r)}};Wa=n("__VUE_INSTANCE_SETTERS__",i=>jt=i),Cl=n("__VUE_SSR_SETTERS__",i=>Bo=i)}const Vo=e=>{const n=jt;return Wa(e),e.scope.on(),()=>{e.scope.off(),Wa(n)}},Xc=()=>{jt&&jt.scope.off(),Wa(null)};function lh(e){return e.vnode.shapeFlag&4}let Bo=!1;function Rm(e,n=!1,i=!1){n&&Cl(n);const{props:a,children:s}=e.vnode,r=lh(e);_m(e,a,r,n),wm(e,s,i||n);const l=r?Nm(e,n):void 0;return n&&Cl(!1),l}function Nm(e,n){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,sm);const{setup:a}=i;if(a){ds();const s=e.setupContext=a.length>1?Fm(e):null,r=Vo(e),l=Ho(a,e,0,[e.props,s]),d=td(l);if(hs(),r(),(d||e.sp)&&!Ti(e)&&Fd(e),d){if(l.then(Xc,Xc),n)return l.then(h=>{Qc(e,h)}).catch(h=>{ar(h,e,0)});e.asyncDep=l}else Qc(e,l)}else ch(e)}function Qc(e,n,i){nt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:bt(n)&&(e.setupState=Ed(n)),ch(e)}function ch(e,n,i){const a=e.type;e.render||(e.render=a.render||Un);{const s=Vo(e);ds();try{im(e)}finally{hs(),s()}}}const Bm={get(e,n){return Wt(e,"get",""),e[n]}};function Fm(e){const n=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Bm),slots:e.slots,emit:e.emit,expose:n}}function dr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ed(Wl(e.exposed)),{get(n,i){if(i in n)return n[i];if(i in Io)return Io[i](e)},has(n,i){return i in n||i in Io}})):e.proxy}function zm(e,n=!0){return nt(e)?e.displayName||e.name:e.name||n&&e.__name}function Um(e){return nt(e)&&"__vccOpts"in e}const ne=(e,n)=>Ip(e,n,Bo);function uh(e,n,i){try{qa(-1);const a=arguments.length;return a===2?bt(n)&&!je(n)?No(n)?Ne(e,null,[n]):Ne(e,n):Ne(e,null,n):(a>3?i=Array.prototype.slice.call(arguments,2):a===3&&No(i)&&(i=[i]),Ne(e,n,i))}finally{qa(1)}}const Hm="3.5.26";let Ll;const eu=typeof window<"u"&&window.trustedTypes;if(eu)try{Ll=eu.createPolicy("vue",{createHTML:e=>e})}catch{}const dh=Ll?e=>Ll.createHTML(e):e=>e,Vm="http://www.w3.org/2000/svg",Zm="http://www.w3.org/1998/Math/MathML",ss=typeof document<"u"?document:null,tu=ss&&ss.createElement("template"),qm={insert:(e,n,i)=>{n.insertBefore(e,i||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,i,a)=>{const s=n==="svg"?ss.createElementNS(Vm,e):n==="mathml"?ss.createElementNS(Zm,e):i?ss.createElement(e,{is:i}):ss.createElement(e);return e==="select"&&a&&a.multiple!=null&&s.setAttribute("multiple",a.multiple),s},createText:e=>ss.createTextNode(e),createComment:e=>ss.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ss.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,i,a,s,r){const l=i?i.previousSibling:n.lastChild;if(s&&(s===r||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{tu.innerHTML=dh(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const d=tu.content;if(a==="svg"||a==="mathml"){const h=d.firstChild;for(;h.firstChild;)d.appendChild(h.firstChild);d.removeChild(h)}n.insertBefore(d,i)}return[l?l.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}},Wm=Symbol("_vtc");function jm(e,n,i){const a=e[Wm];a&&(n=(n?[n,...a]:[...a]).join(" ")),n==null?e.removeAttribute("class"):i?e.setAttribute("class",n):e.className=n}const ja=Symbol("_vod"),hh=Symbol("_vsh"),Ts={name:"show",beforeMount(e,{value:n},{transition:i}){e[ja]=e.style.display==="none"?"":e.style.display,i&&n?i.beforeEnter(e):_o(e,n)},mounted(e,{value:n},{transition:i}){i&&n&&i.enter(e)},updated(e,{value:n,oldValue:i},{transition:a}){!n!=!i&&(a?n?(a.beforeEnter(e),_o(e,!0),a.enter(e)):a.leave(e,()=>{_o(e,!1)}):_o(e,n))},beforeUnmount(e,{value:n}){_o(e,n)}};function _o(e,n){e.style.display=n?e[ja]:"none",e[hh]=!n}const Gm=Symbol(""),Km=/(?:^|;)\s*display\s*:/;function Ym(e,n,i){const a=e.style,s=$t(i);let r=!1;if(i&&!s){if(n)if($t(n))for(const l of n.split(";")){const d=l.slice(0,l.indexOf(":")).trim();i[d]==null&&Oa(a,d,"")}else for(const l in n)i[l]==null&&Oa(a,l,"");for(const l in i)l==="display"&&(r=!0),Oa(a,l,i[l])}else if(s){if(n!==i){const l=a[Gm];l&&(i+=";"+l),a.cssText=i,r=Km.test(i)}}else n&&e.removeAttribute("style");ja in e&&(e[ja]=r?a.display:"",e[hh]&&(a.display="none"))}const nu=/\s*!important$/;function Oa(e,n,i){if(je(i))i.forEach(a=>Oa(e,n,a));else if(i==null&&(i=""),n.startsWith("--"))e.setProperty(n,i);else{const a=Jm(e,n);nu.test(i)?e.setProperty(Ss(a),i.replace(nu,""),"important"):e[a]=i}}const su=["Webkit","Moz","ms"],nl={};function Jm(e,n){const i=nl[n];if(i)return i;let a=kn(n);if(a!=="filter"&&a in e)return nl[n]=a;a=tr(a);for(let s=0;s<su.length;s++){const r=su[s]+a;if(r in e)return nl[n]=r}return n}const iu="http://www.w3.org/1999/xlink";function ou(e,n,i,a,s,r=ep(n)){a&&n.startsWith("xlink:")?i==null?e.removeAttributeNS(iu,n.slice(6,n.length)):e.setAttributeNS(iu,n,i):i==null||r&&!od(i)?e.removeAttribute(n):e.setAttribute(n,r?"":Mn(i)?String(i):i)}function au(e,n,i,a,s){if(n==="innerHTML"||n==="textContent"){i!=null&&(e[n]=n==="innerHTML"?dh(i):i);return}const r=e.tagName;if(n==="value"&&r!=="PROGRESS"&&!r.includes("-")){const d=r==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(d!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(n),e._value=i;return}let l=!1;if(i===""||i==null){const d=typeof e[n];d==="boolean"?i=od(i):i==null&&d==="string"?(i="",l=!0):d==="number"&&(i=0,l=!0)}try{e[n]=i}catch{}l&&e.removeAttribute(s||n)}function rs(e,n,i,a){e.addEventListener(n,i,a)}function Xm(e,n,i,a){e.removeEventListener(n,i,a)}const ru=Symbol("_vei");function Qm(e,n,i,a,s=null){const r=e[ru]||(e[ru]={}),l=r[n];if(a&&l)l.value=a;else{const[d,h]=ev(n);if(a){const m=r[n]=sv(a,s);rs(e,d,m,h)}else l&&(Xm(e,d,l,h),r[n]=void 0)}}const lu=/(?:Once|Passive|Capture)$/;function ev(e){let n;if(lu.test(e)){n={};let a;for(;a=e.match(lu);)e=e.slice(0,e.length-a[0].length),n[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ss(e.slice(2)),n]}let sl=0;const tv=Promise.resolve(),nv=()=>sl||(tv.then(()=>sl=0),sl=Date.now());function sv(e,n){const i=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=i.attached)return;Hn(iv(a,i.value),n,5,[a])};return i.value=e,i.attached=nv(),i}function iv(e,n){if(je(n)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},n.map(a=>s=>!s._stopped&&a&&a(s))}else return n}const cu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ov=(e,n,i,a,s,r)=>{const l=s==="svg";n==="class"?jm(e,a,l):n==="style"?Ym(e,i,a):Xa(n)?Nl(n)||Qm(e,n,i,a,r):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):av(e,n,a,l))?(au(e,n,a),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&ou(e,n,a,l,r,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!$t(a))?au(e,kn(n),a,r,n):(n==="true-value"?e._trueValue=a:n==="false-value"&&(e._falseValue=a),ou(e,n,a,l))};function av(e,n,i,a){if(a)return!!(n==="innerHTML"||n==="textContent"||n in e&&cu(n)&&nt(i));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="autocorrect"||n==="sandbox"&&e.tagName==="IFRAME"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return cu(n)&&$t(i)?!1:n in e}const Is=e=>{const n=e.props["onUpdate:modelValue"]||!1;return je(n)?i=>Ia(n,i):n};function rv(e){e.target.composing=!0}function uu(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const bn=Symbol("_assign");function du(e,n,i){return n&&(e=e.trim()),i&&(e=nr(e)),e}const st={created(e,{modifiers:{lazy:n,trim:i,number:a}},s){e[bn]=Is(s);const r=a||s.props&&s.props.type==="number";rs(e,n?"change":"input",l=>{l.target.composing||e[bn](du(e.value,i,r))}),(i||r)&&rs(e,"change",()=>{e.value=du(e.value,i,r)}),n||(rs(e,"compositionstart",rv),rs(e,"compositionend",uu),rs(e,"change",uu))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:i,modifiers:{lazy:a,trim:s,number:r}},l){if(e[bn]=Is(l),e.composing)return;const d=(r||e.type==="number")&&!/^0\d/.test(e.value)?nr(e.value):e.value,h=n??"";d!==h&&(document.activeElement===e&&e.type!=="range"&&(a&&n===i||s&&e.value.trim()===h)||(e.value=h))}},Ii={deep:!0,created(e,n,i){e[bn]=Is(i),rs(e,"change",()=>{const a=e._modelValue,s=$i(e),r=e.checked,l=e[bn];if(je(a)){const d=Fl(a,s),h=d!==-1;if(r&&!h)l(a.concat(s));else if(!r&&h){const m=[...a];m.splice(d,1),l(m)}}else if(Ni(a)){const d=new Set(a);r?d.add(s):d.delete(s),l(d)}else l(fh(e,r))})},mounted:hu,beforeUpdate(e,n,i){e[bn]=Is(i),hu(e,n,i)}};function hu(e,{value:n,oldValue:i},a){e._modelValue=n;let s;if(je(n))s=Fl(n,a.props.value)>-1;else if(Ni(n))s=n.has(a.props.value);else{if(n===i)return;s=Qs(n,fh(e,!0))}e.checked!==s&&(e.checked=s)}const fu={created(e,{value:n},i){e.checked=Qs(n,i.props.value),e[bn]=Is(i),rs(e,"change",()=>{e[bn]($i(e))})},beforeUpdate(e,{value:n,oldValue:i},a){e[bn]=Is(a),n!==i&&(e.checked=Qs(n,a.props.value))}},dn={deep:!0,created(e,{value:n,modifiers:{number:i}},a){const s=Ni(n);rs(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>i?nr($i(l)):$i(l));e[bn](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,Mi(()=>{e._assigning=!1})}),e[bn]=Is(a)},mounted(e,{value:n}){pu(e,n)},beforeUpdate(e,n,i){e[bn]=Is(i)},updated(e,{value:n}){e._assigning||pu(e,n)}};function pu(e,n){const i=e.multiple,a=je(n);if(!(i&&!a&&!Ni(n))){for(let s=0,r=e.options.length;s<r;s++){const l=e.options[s],d=$i(l);if(i)if(a){const h=typeof d;h==="string"||h==="number"?l.selected=n.some(m=>String(m)===String(d)):l.selected=Fl(n,d)>-1}else l.selected=n.has(d);else if(Qs($i(l),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function $i(e){return"_value"in e?e._value:e.value}function fh(e,n){const i=n?"_trueValue":"_falseValue";return i in e?e[i]:n}const lv=["ctrl","shift","alt","meta"],cv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>lv.some(i=>e[`${i}Key`]&&!n.includes(i))},wt=(e,n)=>{const i=e._withMods||(e._withMods={}),a=n.join(".");return i[a]||(i[a]=((s,...r)=>{for(let l=0;l<n.length;l++){const d=cv[n[l]];if(d&&d(s,n))return}return e(s,...r)}))},uv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ph=(e,n)=>{const i=e._withKeys||(e._withKeys={}),a=n.join(".");return i[a]||(i[a]=(s=>{if(!("key"in s))return;const r=Ss(s.key);if(n.some(l=>l===r||uv[l]===r))return e(s)}))},dv=Kt({patchProp:ov},qm);let mu;function hv(){return mu||(mu=Lm(dv))}const fv=((...e)=>{const n=hv().createApp(...e),{mount:i}=n;return n.mount=a=>{const s=mv(a);if(!s)return;const r=n._component;!nt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const l=i(s,!1,pv(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},n});function pv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function mv(e){return $t(e)?document.querySelector(e):e}let mh;const hr=e=>mh=e,vh=Symbol();function xl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Mo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Mo||(Mo={}));function vv(){const e=cd(!0),n=e.run(()=>$({}));let i=[],a=[];const s=Wl({install(r){hr(s),s._a=r,r.provide(vh,s),r.config.globalProperties.$pinia=s,a.forEach(l=>i.push(l)),a=[]},use(r){return this._a?i.push(r):a.push(r),this},_p:i,_a:null,_e:e,_s:new Map,state:n});return s}const gh=()=>{};function vu(e,n,i,a=gh){e.add(n);const s=()=>{e.delete(n)&&a()};return!i&&ud()&&np(s),s}function yi(e,...n){e.forEach(i=>{i(...n)})}const gv=e=>e(),gu=Symbol(),il=Symbol();function Al(e,n){e instanceof Map&&n instanceof Map?n.forEach((i,a)=>e.set(a,i)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const i in n){if(!n.hasOwnProperty(i))continue;const a=n[i],s=e[i];xl(s)&&xl(a)&&e.hasOwnProperty(i)&&!St(a)&&!us(a)?e[i]=Al(s,a):e[i]=a}return e}const _v=Symbol();function yv(e){return!xl(e)||!Object.prototype.hasOwnProperty.call(e,_v)}const{assign:ws}=Object;function bv(e){return!!(St(e)&&e.effect)}function kv(e,n,i,a){const{state:s,actions:r,getters:l}=n,d=i.state.value[e];let h;function m(){d||(i.state.value[e]=s?s():{});const f=xp(i.state.value[e]);return ws(f,r,Object.keys(l||{}).reduce((v,k)=>(v[k]=Wl(ne(()=>{hr(i);const x=i._s.get(e);return l[k].call(x,x)})),v),{}))}return h=_h(e,m,n,i,a,!0),h}function _h(e,n,i={},a,s,r){let l;const d=ws({actions:{}},i),h={deep:!0};let m,f,v=new Set,k=new Set,x;const M=a.state.value[e];!r&&!M&&(a.state.value[e]={}),$({});let P;function R(W){let V;m=f=!1,typeof W=="function"?(W(a.state.value[e]),V={type:Mo.patchFunction,storeId:e,events:x}):(Al(a.state.value[e],W),V={type:Mo.patchObject,payload:W,storeId:e,events:x});const se=P=Symbol();Mi().then(()=>{P===se&&(m=!0)}),f=!0,yi(v,V,a.state.value[e])}const T=r?function(){const{state:V}=i,se=V?V():{};this.$patch(ge=>{ws(ge,se)})}:gh;function A(){l.stop(),v.clear(),k.clear(),a._s.delete(e)}const g=(W,V="")=>{if(gu in W)return W[il]=V,W;const se=function(){hr(a);const ge=Array.from(arguments),Se=new Set,Me=new Set;function ie(Ae){Se.add(Ae)}function ue(Ae){Me.add(Ae)}yi(k,{args:ge,name:se[il],store:w,after:ie,onError:ue});let de;try{de=W.apply(this&&this.$id===e?this:w,ge)}catch(Ae){throw yi(Me,Ae),Ae}return de instanceof Promise?de.then(Ae=>(yi(Se,Ae),Ae)).catch(Ae=>(yi(Me,Ae),Promise.reject(Ae))):(yi(Se,de),de)};return se[gu]=!0,se[il]=V,se},C={_p:a,$id:e,$onAction:vu.bind(null,k),$patch:R,$reset:T,$subscribe(W,V={}){const se=vu(v,W,V.detached,()=>ge()),ge=l.run(()=>We(()=>a.state.value[e],Se=>{(V.flush==="sync"?f:m)&&W({storeId:e,type:Mo.direct,events:x},Se)},ws({},h,V)));return se},$dispose:A},w=Uo(C);a._s.set(e,w);const O=(a._a&&a._a.runWithContext||gv)(()=>a._e.run(()=>(l=cd()).run(()=>n({action:g}))));for(const W in O){const V=O[W];if(St(V)&&!bv(V)||us(V))r||(M&&yv(V)&&(St(V)?V.value=M[W]:Al(V,M[W])),a.state.value[e][W]=V);else if(typeof V=="function"){const se=g(V,W);O[W]=se,d.actions[W]=V}}return ws(w,O),ws(ct(w),O),Object.defineProperty(w,"$state",{get:()=>a.state.value[e],set:W=>{R(V=>{ws(V,W)})}}),a._p.forEach(W=>{ws(w,l.run(()=>W({store:w,app:a._a,pinia:a,options:d})))}),M&&r&&i.hydrate&&i.hydrate(w.$state,M),m=!0,f=!0,w}function Ql(e,n,i){let a;const s=typeof n=="function";a=s?i:n;function r(l,d){const h=Dp();return l=l||(h?yn(vh,null):null),l&&hr(l),l=mh,l._s.has(e)||(s?_h(e,n,a,l):kv(e,a,l)),l._s.get(e)}return r.$id=e,r}const Ze=(e,n)=>{const i=e.__vccOpts||e;for(const[a,s]of n)i[a]=s;return i},wv={},Cv={id:"app"};function Lv(e,n){const i=lr("router-view");return _(),b("div",Cv,[Ne(i)])}const xv=Ze(wv,[["render",Lv]]);const ki=typeof document<"u";function yh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Av(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&yh(e.default)}const ut=Object.assign;function ol(e,n){const i={};for(const a in n){const s=n[a];i[a]=$n(s)?s.map(e):e(s)}return i}const Po=()=>{},$n=Array.isArray;function _u(e,n){const i={};for(const a in e)i[a]=a in n?n[a]:e[a];return i}const bh=/#/g,Ev=/&/g,Tv=/\//g,Iv=/=/g,Sv=/\?/g,kh=/\+/g,Mv=/%5B/g,Pv=/%5D/g,wh=/%5E/g,$v=/%60/g,Ch=/%7B/g,Ov=/%7C/g,Lh=/%7D/g,Dv=/%20/g;function ec(e){return e==null?"":encodeURI(""+e).replace(Ov,"|").replace(Mv,"[").replace(Pv,"]")}function Rv(e){return ec(e).replace(Ch,"{").replace(Lh,"}").replace(wh,"^")}function El(e){return ec(e).replace(kh,"%2B").replace(Dv,"+").replace(bh,"%23").replace(Ev,"%26").replace($v,"`").replace(Ch,"{").replace(Lh,"}").replace(wh,"^")}function Nv(e){return El(e).replace(Iv,"%3D")}function Bv(e){return ec(e).replace(bh,"%23").replace(Sv,"%3F")}function Fv(e){return Bv(e).replace(Tv,"%2F")}function Fo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const zv=/\/$/,Uv=e=>e.replace(zv,"");function al(e,n,i="/"){let a,s={},r="",l="";const d=n.indexOf("#");let h=n.indexOf("?");return h=d>=0&&h>d?-1:h,h>=0&&(a=n.slice(0,h),r=n.slice(h,d>0?d:n.length),s=e(r.slice(1))),d>=0&&(a=a||n.slice(0,d),l=n.slice(d,n.length)),a=qv(a??n,i),{fullPath:a+r+l,path:a,query:s,hash:Fo(l)}}function Hv(e,n){const i=n.query?e(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function yu(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function Vv(e,n,i){const a=n.matched.length-1,s=i.matched.length-1;return a>-1&&a===s&&Oi(n.matched[a],i.matched[s])&&xh(n.params,i.params)&&e(n.query)===e(i.query)&&n.hash===i.hash}function Oi(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function xh(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!Zv(e[i],n[i]))return!1;return!0}function Zv(e,n){return $n(e)?bu(e,n):$n(n)?bu(n,e):e?.valueOf()===n?.valueOf()}function bu(e,n){return $n(n)?e.length===n.length&&e.every((i,a)=>i===n[a]):e.length===1&&e[0]===n}function qv(e,n){if(e.startsWith("/"))return e;if(!e)return n;const i=n.split("/"),a=e.split("/"),s=a[a.length-1];(s===".."||s===".")&&a.push("");let r=i.length-1,l,d;for(l=0;l<a.length;l++)if(d=a[l],d!==".")if(d==="..")r>1&&r--;else break;return i.slice(0,r).join("/")+"/"+a.slice(l).join("/")}const ks={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Tl=(function(e){return e.pop="pop",e.push="push",e})({}),rl=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Wv(e){if(!e)if(ki){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Uv(e)}const jv=/^[^#]+#/;function Gv(e,n){return e.replace(jv,"#")+n}function Kv(e,n){const i=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:n.behavior,left:a.left-i.left-(n.left||0),top:a.top-i.top-(n.top||0)}}const fr=()=>({left:window.scrollX,top:window.scrollY});function Yv(e){let n;if("el"in e){const i=e.el,a=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?a?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;n=Kv(s,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function ku(e,n){return(history.state?history.state.position-n:-1)+e}const Il=new Map;function Jv(e,n){Il.set(e,n)}function Xv(e){const n=Il.get(e);return Il.delete(e),n}function Qv(e){return typeof e=="string"||e&&typeof e=="object"}function Ah(e){return typeof e=="string"||typeof e=="symbol"}let It=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Eh=Symbol("");It.MATCHER_NOT_FOUND+"",It.NAVIGATION_GUARD_REDIRECT+"",It.NAVIGATION_ABORTED+"",It.NAVIGATION_CANCELLED+"",It.NAVIGATION_DUPLICATED+"";function Di(e,n){return ut(new Error,{type:e,[Eh]:!0},n)}function ns(e,n){return e instanceof Error&&Eh in e&&(n==null||!!(e.type&n))}const eg=["params","query","hash"];function tg(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const n={};for(const i of eg)i in e&&(n[i]=e[i]);return JSON.stringify(n,null,2)}function ng(e){const n={};if(e===""||e==="?")return n;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<i.length;++a){const s=i[a].replace(kh," "),r=s.indexOf("="),l=Fo(r<0?s:s.slice(0,r)),d=r<0?null:Fo(s.slice(r+1));if(l in n){let h=n[l];$n(h)||(h=n[l]=[h]),h.push(d)}else n[l]=d}return n}function wu(e){let n="";for(let i in e){const a=e[i];if(i=Nv(i),a==null){a!==void 0&&(n+=(n.length?"&":"")+i);continue}($n(a)?a.map(s=>s&&El(s)):[a&&El(a)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+i,s!=null&&(n+="="+s))})}return n}function sg(e){const n={};for(const i in e){const a=e[i];a!==void 0&&(n[i]=$n(a)?a.map(s=>s==null?null:""+s):a==null?a:""+a)}return n}const ig=Symbol(""),Cu=Symbol(""),pr=Symbol(""),tc=Symbol(""),Sl=Symbol("");function yo(){let e=[];function n(a){return e.push(a),()=>{const s=e.indexOf(a);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:n,list:()=>e.slice(),reset:i}}function As(e,n,i,a,s,r=l=>l()){const l=a&&(a.enterCallbacks[s]=a.enterCallbacks[s]||[]);return()=>new Promise((d,h)=>{const m=k=>{k===!1?h(Di(It.NAVIGATION_ABORTED,{from:i,to:n})):k instanceof Error?h(k):Qv(k)?h(Di(It.NAVIGATION_GUARD_REDIRECT,{from:n,to:k})):(l&&a.enterCallbacks[s]===l&&typeof k=="function"&&l.push(k),d())},f=r(()=>e.call(a&&a.instances[s],n,i,m));let v=Promise.resolve(f);e.length<3&&(v=v.then(m)),v.catch(k=>h(k))})}function ll(e,n,i,a,s=r=>r()){const r=[];for(const l of e)for(const d in l.components){let h=l.components[d];if(!(n!=="beforeRouteEnter"&&!l.instances[d]))if(yh(h)){const m=(h.__vccOpts||h)[n];m&&r.push(As(m,i,a,l,d,s))}else{let m=h();r.push(()=>m.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${d}" at "${l.path}"`);const v=Av(f)?f.default:f;l.mods[d]=f,l.components[d]=v;const k=(v.__vccOpts||v)[n];return k&&As(k,i,a,l,d,s)()}))}}return r}function og(e,n){const i=[],a=[],s=[],r=Math.max(n.matched.length,e.matched.length);for(let l=0;l<r;l++){const d=n.matched[l];d&&(e.matched.find(m=>Oi(m,d))?a.push(d):i.push(d));const h=e.matched[l];h&&(n.matched.find(m=>Oi(m,h))||s.push(h))}return[i,a,s]}let ag=()=>location.protocol+"//"+location.host;function Th(e,n){const{pathname:i,search:a,hash:s}=n,r=e.indexOf("#");if(r>-1){let l=s.includes(e.slice(r))?e.slice(r).length:1,d=s.slice(l);return d[0]!=="/"&&(d="/"+d),yu(d,"")}return yu(i,e)+a+s}function rg(e,n,i,a){let s=[],r=[],l=null;const d=({state:k})=>{const x=Th(e,location),M=i.value,P=n.value;let R=0;if(k){if(i.value=x,n.value=k,l&&l===M){l=null;return}R=P?k.position-P.position:0}else a(x);s.forEach(T=>{T(i.value,M,{delta:R,type:Tl.pop,direction:R?R>0?rl.forward:rl.back:rl.unknown})})};function h(){l=i.value}function m(k){s.push(k);const x=()=>{const M=s.indexOf(k);M>-1&&s.splice(M,1)};return r.push(x),x}function f(){if(document.visibilityState==="hidden"){const{history:k}=window;if(!k.state)return;k.replaceState(ut({},k.state,{scroll:fr()}),"")}}function v(){for(const k of r)k();r=[],window.removeEventListener("popstate",d),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",d),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:h,listen:m,destroy:v}}function Lu(e,n,i,a=!1,s=!1){return{back:e,current:n,forward:i,replaced:a,position:window.history.length,scroll:s?fr():null}}function lg(e){const{history:n,location:i}=window,a={value:Th(e,i)},s={value:n.state};s.value||r(a.value,{back:null,current:a.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function r(h,m,f){const v=e.indexOf("#"),k=v>-1?(i.host&&document.querySelector("base")?e:e.slice(v))+h:ag()+e+h;try{n[f?"replaceState":"pushState"](m,"",k),s.value=m}catch(x){console.error(x),i[f?"replace":"assign"](k)}}function l(h,m){r(h,ut({},n.state,Lu(s.value.back,h,s.value.forward,!0),m,{position:s.value.position}),!0),a.value=h}function d(h,m){const f=ut({},s.value,n.state,{forward:h,scroll:fr()});r(f.current,f,!0),r(h,ut({},Lu(a.value,h,null),{position:f.position+1},m),!1),a.value=h}return{location:a,state:s,push:d,replace:l}}function cg(e){e=Wv(e);const n=lg(e),i=rg(e,n.state,n.location,n.replace);function a(r,l=!0){l||i.pauseListeners(),history.go(r)}const s=ut({location:"",base:e,go:a,createHref:Gv.bind(null,e)},n,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>n.state.value}),s}function ug(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),cg(e)}let Gs=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Ft=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Ft||{});const dg={type:Gs.Static,value:""},hg=/[a-zA-Z0-9_]/;function fg(e){if(!e)return[[]];if(e==="/")return[[dg]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(x){throw new Error(`ERR (${i})/"${m}": ${x}`)}let i=Ft.Static,a=i;const s=[];let r;function l(){r&&s.push(r),r=[]}let d=0,h,m="",f="";function v(){m&&(i===Ft.Static?r.push({type:Gs.Static,value:m}):i===Ft.Param||i===Ft.ParamRegExp||i===Ft.ParamRegExpEnd?(r.length>1&&(h==="*"||h==="+")&&n(`A repeatable param (${m}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Gs.Param,value:m,regexp:f,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):n("Invalid state to consume buffer"),m="")}function k(){m+=h}for(;d<e.length;){if(h=e[d++],h==="\\"&&i!==Ft.ParamRegExp){a=i,i=Ft.EscapeNext;continue}switch(i){case Ft.Static:h==="/"?(m&&v(),l()):h===":"?(v(),i=Ft.Param):k();break;case Ft.EscapeNext:k(),i=a;break;case Ft.Param:h==="("?i=Ft.ParamRegExp:hg.test(h)?k():(v(),i=Ft.Static,h!=="*"&&h!=="?"&&h!=="+"&&d--);break;case Ft.ParamRegExp:h===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+h:i=Ft.ParamRegExpEnd:f+=h;break;case Ft.ParamRegExpEnd:v(),i=Ft.Static,h!=="*"&&h!=="?"&&h!=="+"&&d--,f="";break;default:n("Unknown state");break}}return i===Ft.ParamRegExp&&n(`Unfinished custom RegExp for param "${m}"`),v(),l(),s}const xu="[^/]+?",pg={sensitive:!1,strict:!1,start:!0,end:!0};var nn=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(nn||{});const mg=/[.+*?^${}()[\]/\\]/g;function vg(e,n){const i=ut({},pg,n),a=[];let s=i.start?"^":"";const r=[];for(const m of e){const f=m.length?[]:[nn.Root];i.strict&&!m.length&&(s+="/");for(let v=0;v<m.length;v++){const k=m[v];let x=nn.Segment+(i.sensitive?nn.BonusCaseSensitive:0);if(k.type===Gs.Static)v||(s+="/"),s+=k.value.replace(mg,"\\$&"),x+=nn.Static;else if(k.type===Gs.Param){const{value:M,repeatable:P,optional:R,regexp:T}=k;r.push({name:M,repeatable:P,optional:R});const A=T||xu;if(A!==xu){x+=nn.BonusCustomRegExp;try{`${A}`}catch(C){throw new Error(`Invalid custom RegExp for param "${M}" (${A}): `+C.message)}}let g=P?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;v||(g=R&&m.length<2?`(?:/${g})`:"/"+g),R&&(g+="?"),s+=g,x+=nn.Dynamic,R&&(x+=nn.BonusOptional),P&&(x+=nn.BonusRepeatable),A===".*"&&(x+=nn.BonusWildcard)}f.push(x)}a.push(f)}if(i.strict&&i.end){const m=a.length-1;a[m][a[m].length-1]+=nn.BonusStrict}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const l=new RegExp(s,i.sensitive?"":"i");function d(m){const f=m.match(l),v={};if(!f)return null;for(let k=1;k<f.length;k++){const x=f[k]||"",M=r[k-1];v[M.name]=x&&M.repeatable?x.split("/"):x}return v}function h(m){let f="",v=!1;for(const k of e){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const x of k)if(x.type===Gs.Static)f+=x.value;else if(x.type===Gs.Param){const{value:M,repeatable:P,optional:R}=x,T=M in m?m[M]:"";if($n(T)&&!P)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const A=$n(T)?T.join("/"):T;if(!A)if(R)k.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${M}"`);f+=A}}return f||"/"}return{re:l,score:a,keys:r,parse:d,stringify:h}}function gg(e,n){let i=0;for(;i<e.length&&i<n.length;){const a=n[i]-e[i];if(a)return a;i++}return e.length<n.length?e.length===1&&e[0]===nn.Static+nn.Segment?-1:1:e.length>n.length?n.length===1&&n[0]===nn.Static+nn.Segment?1:-1:0}function Ih(e,n){let i=0;const a=e.score,s=n.score;for(;i<a.length&&i<s.length;){const r=gg(a[i],s[i]);if(r)return r;i++}if(Math.abs(s.length-a.length)===1){if(Au(a))return 1;if(Au(s))return-1}return s.length-a.length}function Au(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const _g={strict:!1,end:!0,sensitive:!1};function yg(e,n,i){const a=vg(fg(e.path),i),s=ut(a,{record:e,parent:n,children:[],alias:[]});return n&&!s.record.aliasOf==!n.record.aliasOf&&n.children.push(s),s}function bg(e,n){const i=[],a=new Map;n=_u(_g,n);function s(v){return a.get(v)}function r(v,k,x){const M=!x,P=Tu(v);P.aliasOf=x&&x.record;const R=_u(n,v),T=[P];if("alias"in v){const C=typeof v.alias=="string"?[v.alias]:v.alias;for(const w of C)T.push(Tu(ut({},P,{components:x?x.record.components:P.components,path:w,aliasOf:x?x.record:P})))}let A,g;for(const C of T){const{path:w}=C;if(k&&w[0]!=="/"){const E=k.record.path,O=E[E.length-1]==="/"?"":"/";C.path=k.record.path+(w&&O+w)}if(A=yg(C,k,R),x?x.alias.push(A):(g=g||A,g!==A&&g.alias.push(A),M&&v.name&&!Iu(A)&&l(v.name)),Sh(A)&&h(A),P.children){const E=P.children;for(let O=0;O<E.length;O++)r(E[O],A,x&&x.children[O])}x=x||A}return g?()=>{l(g)}:Po}function l(v){if(Ah(v)){const k=a.get(v);k&&(a.delete(v),i.splice(i.indexOf(k),1),k.children.forEach(l),k.alias.forEach(l))}else{const k=i.indexOf(v);k>-1&&(i.splice(k,1),v.record.name&&a.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function d(){return i}function h(v){const k=Cg(v,i);i.splice(k,0,v),v.record.name&&!Iu(v)&&a.set(v.record.name,v)}function m(v,k){let x,M={},P,R;if("name"in v&&v.name){if(x=a.get(v.name),!x)throw Di(It.MATCHER_NOT_FOUND,{location:v});R=x.record.name,M=ut(Eu(k.params,x.keys.filter(g=>!g.optional).concat(x.parent?x.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),v.params&&Eu(v.params,x.keys.map(g=>g.name))),P=x.stringify(M)}else if(v.path!=null)P=v.path,x=i.find(g=>g.re.test(P)),x&&(M=x.parse(P),R=x.record.name);else{if(x=k.name?a.get(k.name):i.find(g=>g.re.test(k.path)),!x)throw Di(It.MATCHER_NOT_FOUND,{location:v,currentLocation:k});R=x.record.name,M=ut({},k.params,v.params),P=x.stringify(M)}const T=[];let A=x;for(;A;)T.unshift(A.record),A=A.parent;return{name:R,path:P,params:M,matched:T,meta:wg(T)}}e.forEach(v=>r(v));function f(){i.length=0,a.clear()}return{addRoute:r,resolve:m,removeRoute:l,clearRoutes:f,getRoutes:d,getRecordMatcher:s}}function Eu(e,n){const i={};for(const a of n)a in e&&(i[a]=e[a]);return i}function Tu(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:kg(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function kg(e){const n={},i=e.props||!1;if("component"in e)n.default=i;else for(const a in e.components)n[a]=typeof i=="object"?i[a]:i;return n}function Iu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wg(e){return e.reduce((n,i)=>ut(n,i.meta),{})}function Cg(e,n){let i=0,a=n.length;for(;i!==a;){const r=i+a>>1;Ih(e,n[r])<0?a=r:i=r+1}const s=Lg(e);return s&&(a=n.lastIndexOf(s,a-1)),a}function Lg(e){let n=e;for(;n=n.parent;)if(Sh(n)&&Ih(e,n)===0)return n}function Sh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Su(e){const n=yn(pr),i=yn(tc),a=ne(()=>{const h=H(e.to);return n.resolve(h)}),s=ne(()=>{const{matched:h}=a.value,{length:m}=h,f=h[m-1],v=i.matched;if(!f||!v.length)return-1;const k=v.findIndex(Oi.bind(null,f));if(k>-1)return k;const x=Mu(h[m-2]);return m>1&&Mu(f)===x&&v[v.length-1].path!==x?v.findIndex(Oi.bind(null,h[m-2])):k}),r=ne(()=>s.value>-1&&Ig(i.params,a.value.params)),l=ne(()=>s.value>-1&&s.value===i.matched.length-1&&xh(i.params,a.value.params));function d(h={}){if(Tg(h)){const m=n[H(e.replace)?"replace":"push"](H(e.to)).catch(Po);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>m),m}return Promise.resolve()}return{route:a,href:ne(()=>a.value.href),isActive:r,isExactActive:l,navigate:d}}function xg(e){return e.length===1?e[0]:e}const Ag=Bd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Su,setup(e,{slots:n}){const i=Uo(Su(e)),{options:a}=yn(pr),s=ne(()=>({[Pu(e.activeClass,a.linkActiveClass,"router-link-active")]:i.isActive,[Pu(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const r=n.default&&xg(n.default(i));return e.custom?r:uh("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},r)}}}),Eg=Ag;function Tg(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function Ig(e,n){for(const i in n){const a=n[i],s=e[i];if(typeof a=="string"){if(a!==s)return!1}else if(!$n(s)||s.length!==a.length||a.some((r,l)=>r.valueOf()!==s[l].valueOf()))return!1}return!0}function Mu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Pu=(e,n,i)=>e??n??i,Sg=Bd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:i}){const a=yn(Sl),s=ne(()=>e.route||a.value),r=yn(Cu,0),l=ne(()=>{let m=H(r);const{matched:f}=s.value;let v;for(;(v=f[m])&&!v.components;)m++;return m}),d=ne(()=>s.value.matched[l.value]);Sa(Cu,ne(()=>l.value+1)),Sa(ig,d),Sa(Sl,s);const h=$();return We(()=>[h.value,d.value,e.name],([m,f,v],[k,x,M])=>{f&&(f.instances[v]=m,x&&x!==f&&m&&m===k&&(f.leaveGuards.size||(f.leaveGuards=x.leaveGuards),f.updateGuards.size||(f.updateGuards=x.updateGuards))),m&&f&&(!x||!Oi(f,x)||!k)&&(f.enterCallbacks[v]||[]).forEach(P=>P(m))},{flush:"post"}),()=>{const m=s.value,f=e.name,v=d.value,k=v&&v.components[f];if(!k)return $u(i.default,{Component:k,route:m});const x=v.props[f],M=x?x===!0?m.params:typeof x=="function"?x(m):x:null,R=uh(k,ut({},M,n,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(v.instances[f]=null)},ref:h}));return $u(i.default,{Component:R,route:m})||R}}});function $u(e,n){if(!e)return null;const i=e(n);return i.length===1?i[0]:i}const Mg=Sg;function Pg(e){const n=bg(e.routes,e),i=e.parseQuery||ng,a=e.stringifyQuery||wu,s=e.history,r=yo(),l=yo(),d=yo(),h=wp(ks);let m=ks;ki&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=ol.bind(null,U=>""+U),v=ol.bind(null,Fv),k=ol.bind(null,Fo);function x(U,G){let Y,ke;return Ah(U)?(Y=n.getRecordMatcher(U),ke=G):ke=U,n.addRoute(ke,Y)}function M(U){const G=n.getRecordMatcher(U);G&&n.removeRoute(G)}function P(){return n.getRoutes().map(U=>U.record)}function R(U){return!!n.getRecordMatcher(U)}function T(U,G){if(G=ut({},G||h.value),typeof U=="string"){const Z=al(i,U,G.path),oe=n.resolve({path:Z.path},G),le=s.createHref(Z.fullPath);return ut(Z,oe,{params:k(oe.params),hash:Fo(Z.hash),redirectedFrom:void 0,href:le})}let Y;if(U.path!=null)Y=ut({},U,{path:al(i,U.path,G.path).path});else{const Z=ut({},U.params);for(const oe in Z)Z[oe]==null&&delete Z[oe];Y=ut({},U,{params:v(Z)}),G.params=v(G.params)}const ke=n.resolve(Y,G),Je=U.hash||"";ke.params=f(k(ke.params));const D=Hv(a,ut({},U,{hash:Rv(Je),path:ke.path})),F=s.createHref(D);return ut({fullPath:D,hash:Je,query:a===wu?sg(U.query):U.query||{}},ke,{redirectedFrom:void 0,href:F})}function A(U){return typeof U=="string"?al(i,U,h.value.path):ut({},U)}function g(U,G){if(m!==U)return Di(It.NAVIGATION_CANCELLED,{from:G,to:U})}function C(U){return O(U)}function w(U){return C(ut(A(U),{replace:!0}))}function E(U,G){const Y=U.matched[U.matched.length-1];if(Y&&Y.redirect){const{redirect:ke}=Y;let Je=typeof ke=="function"?ke(U,G):ke;return typeof Je=="string"&&(Je=Je.includes("?")||Je.includes("#")?Je=A(Je):{path:Je},Je.params={}),ut({query:U.query,hash:U.hash,params:Je.path!=null?{}:U.params},Je)}}function O(U,G){const Y=m=T(U),ke=h.value,Je=U.state,D=U.force,F=U.replace===!0,Z=E(Y,ke);if(Z)return O(ut(A(Z),{state:typeof Z=="object"?ut({},Je,Z.state):Je,force:D,replace:F}),G||Y);const oe=Y;oe.redirectedFrom=G;let le;return!D&&Vv(a,ke,Y)&&(le=Di(It.NAVIGATION_DUPLICATED,{to:oe,from:ke}),he(ke,ke,!0,!1)),(le?Promise.resolve(le):se(oe,ke)).catch(ae=>ns(ae)?ns(ae,It.NAVIGATION_GUARD_REDIRECT)?ae:K(ae):pe(ae,oe,ke)).then(ae=>{if(ae){if(ns(ae,It.NAVIGATION_GUARD_REDIRECT))return O(ut({replace:F},A(ae.to),{state:typeof ae.to=="object"?ut({},Je,ae.to.state):Je,force:D}),G||oe)}else ae=Se(oe,ke,!0,F,Je);return ge(oe,ke,ae),ae})}function W(U,G){const Y=g(U,G);return Y?Promise.reject(Y):Promise.resolve()}function V(U){const G=me.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(U):U()}function se(U,G){let Y;const[ke,Je,D]=og(U,G);Y=ll(ke.reverse(),"beforeRouteLeave",U,G);for(const Z of ke)Z.leaveGuards.forEach(oe=>{Y.push(As(oe,U,G))});const F=W.bind(null,U,G);return Y.push(F),ce(Y).then(()=>{Y=[];for(const Z of r.list())Y.push(As(Z,U,G));return Y.push(F),ce(Y)}).then(()=>{Y=ll(Je,"beforeRouteUpdate",U,G);for(const Z of Je)Z.updateGuards.forEach(oe=>{Y.push(As(oe,U,G))});return Y.push(F),ce(Y)}).then(()=>{Y=[];for(const Z of D)if(Z.beforeEnter)if($n(Z.beforeEnter))for(const oe of Z.beforeEnter)Y.push(As(oe,U,G));else Y.push(As(Z.beforeEnter,U,G));return Y.push(F),ce(Y)}).then(()=>(U.matched.forEach(Z=>Z.enterCallbacks={}),Y=ll(D,"beforeRouteEnter",U,G,V),Y.push(F),ce(Y))).then(()=>{Y=[];for(const Z of l.list())Y.push(As(Z,U,G));return Y.push(F),ce(Y)}).catch(Z=>ns(Z,It.NAVIGATION_CANCELLED)?Z:Promise.reject(Z))}function ge(U,G,Y){d.list().forEach(ke=>V(()=>ke(U,G,Y)))}function Se(U,G,Y,ke,Je){const D=g(U,G);if(D)return D;const F=G===ks,Z=ki?history.state:{};Y&&(ke||F?s.replace(U.fullPath,ut({scroll:F&&Z&&Z.scroll},Je)):s.push(U.fullPath,Je)),h.value=U,he(U,G,Y,F),K()}let Me;function ie(){Me||(Me=s.listen((U,G,Y)=>{if(!re.listening)return;const ke=T(U),Je=E(ke,re.currentRoute.value);if(Je){O(ut(Je,{replace:!0,force:!0}),ke).catch(Po);return}m=ke;const D=h.value;ki&&Jv(ku(D.fullPath,Y.delta),fr()),se(ke,D).catch(F=>ns(F,It.NAVIGATION_ABORTED|It.NAVIGATION_CANCELLED)?F:ns(F,It.NAVIGATION_GUARD_REDIRECT)?(O(ut(A(F.to),{force:!0}),ke).then(Z=>{ns(Z,It.NAVIGATION_ABORTED|It.NAVIGATION_DUPLICATED)&&!Y.delta&&Y.type===Tl.pop&&s.go(-1,!1)}).catch(Po),Promise.reject()):(Y.delta&&s.go(-Y.delta,!1),pe(F,ke,D))).then(F=>{F=F||Se(ke,D,!1),F&&(Y.delta&&!ns(F,It.NAVIGATION_CANCELLED)?s.go(-Y.delta,!1):Y.type===Tl.pop&&ns(F,It.NAVIGATION_ABORTED|It.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),ge(ke,D,F)}).catch(Po)}))}let ue=yo(),de=yo(),Ae;function pe(U,G,Y){K(U);const ke=de.list();return ke.length?ke.forEach(Je=>Je(U,G,Y)):console.error(U),Promise.reject(U)}function Ce(){return Ae&&h.value!==ks?Promise.resolve():new Promise((U,G)=>{ue.add([U,G])})}function K(U){return Ae||(Ae=!U,ie(),ue.list().forEach(([G,Y])=>U?Y(U):G()),ue.reset()),U}function he(U,G,Y,ke){const{scrollBehavior:Je}=e;if(!ki||!Je)return Promise.resolve();const D=!Y&&Xv(ku(U.fullPath,0))||(ke||!Y)&&history.state&&history.state.scroll||null;return Mi().then(()=>Je(U,G,D)).then(F=>F&&Yv(F)).catch(F=>pe(F,U,G))}const Ee=U=>s.go(U);let Re;const me=new Set,re={currentRoute:h,listening:!0,addRoute:x,removeRoute:M,clearRoutes:n.clearRoutes,hasRoute:R,getRoutes:P,resolve:T,options:e,push:C,replace:w,go:Ee,back:()=>Ee(-1),forward:()=>Ee(1),beforeEach:r.add,beforeResolve:l.add,afterEach:d.add,onError:de.add,isReady:Ce,install(U){U.component("RouterLink",Eg),U.component("RouterView",Mg),U.config.globalProperties.$router=re,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>H(h)}),ki&&!Re&&h.value===ks&&(Re=!0,C(s.location).catch(ke=>{}));const G={};for(const ke in ks)Object.defineProperty(G,ke,{get:()=>h.value[ke],enumerable:!0});U.provide(pr,re),U.provide(tc,xd(G)),U.provide(Sl,h);const Y=U.unmount;me.add(U),U.unmount=function(){me.delete(U),me.size<1&&(m=ks,Me&&Me(),Me=null,h.value=ks,Re=!1,Ae=!1),Y()}}};function ce(U){return U.reduce((G,Y)=>G.then(()=>V(Y)),Promise.resolve())}return re}function Zo(){return yn(pr)}function nc(e){return yn(tc)}const $g={},Og={class:"home"},Dg={class:"container"},Rg={class:"actions"};function Ng(e,n){const i=lr("router-link");return _(),b("div",Og,[u("div",Dg,[n[1]||(n[1]=u("h1",null,"Volunteer Check-in System ",-1)),n[2]||(n[2]=u("p",{class:"subtitle"},"Manage race marshals and volunteers with ease",-1)),u("div",Rg,[Ne(i,{to:"/admin/login",class:"btn btn-primary"},{default:Ye(()=>[...n[0]||(n[0]=[He(" Admin Portal ",-1)])]),_:1})]),n[3]||(n[3]=Pm('<div class="features" data-v-536ab6a4><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Admins</h3><ul data-v-536ab6a4><li data-v-536ab6a4>Create and manage events</li><li data-v-536ab6a4>Define marshal locations</li><li data-v-536ab6a4>Assign marshals to locations</li><li data-v-536ab6a4>Real-time check-in monitoring</li><li data-v-536ab6a4>Map view of all locations</li></ul></div><div class="feature-card" data-v-536ab6a4><h3 data-v-536ab6a4>For Marshals</h3><ul data-v-536ab6a4><li data-v-536ab6a4>View your assigned location</li><li data-v-536ab6a4>Check in with GPS verification</li><li data-v-536ab6a4>Access emergency contact info</li><li data-v-536ab6a4>View all marshal locations</li></ul></div></div>',1))])])}const Bg=Ze($g,[["render",Ng],["__scopeId","data-v-536ab6a4"]]);function Mh(e,n){return function(){return e.apply(n,arguments)}}const{toString:Fg}=Object.prototype,{getPrototypeOf:sc}=Object,{iterator:mr,toStringTag:Ph}=Symbol,vr=(e=>n=>{const i=Fg.call(n);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),On=e=>(e=e.toLowerCase(),n=>vr(n)===e),gr=e=>n=>typeof n===e,{isArray:Bi}=Array,Ri=gr("undefined");function qo(e){return e!==null&&!Ri(e)&&e.constructor!==null&&!Ri(e.constructor)&&cn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $h=On("ArrayBuffer");function zg(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&$h(e.buffer),n}const Ug=gr("string"),cn=gr("function"),Oh=gr("number"),Wo=e=>e!==null&&typeof e=="object",Hg=e=>e===!0||e===!1,Da=e=>{if(vr(e)!=="object")return!1;const n=sc(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ph in e)&&!(mr in e)},Vg=e=>{if(!Wo(e)||qo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zg=On("Date"),qg=On("File"),Wg=On("Blob"),jg=On("FileList"),Gg=e=>Wo(e)&&cn(e.pipe),Kg=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||cn(e.append)&&((n=vr(e))==="formdata"||n==="object"&&cn(e.toString)&&e.toString()==="[object FormData]"))},Yg=On("URLSearchParams"),[Jg,Xg,Qg,e_]=["ReadableStream","Request","Response","Headers"].map(On),t_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jo(e,n,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),Bi(e))for(a=0,s=e.length;a<s;a++)n.call(null,e[a],a,e);else{if(qo(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),l=r.length;let d;for(a=0;a<l;a++)d=r[a],n.call(null,e[d],d,e)}}function Dh(e,n){if(qo(e))return null;n=n.toLowerCase();const i=Object.keys(e);let a=i.length,s;for(;a-- >0;)if(s=i[a],n===s.toLowerCase())return s;return null}const Ks=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rh=e=>!Ri(e)&&e!==Ks;function Ml(){const{caseless:e,skipUndefined:n}=Rh(this)&&this||{},i={},a=(s,r)=>{const l=e&&Dh(i,r)||r;Da(i[l])&&Da(s)?i[l]=Ml(i[l],s):Da(s)?i[l]=Ml({},s):Bi(s)?i[l]=s.slice():(!n||!Ri(s))&&(i[l]=s)};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&jo(arguments[s],a);return i}const n_=(e,n,i,{allOwnKeys:a}={})=>(jo(n,(s,r)=>{i&&cn(s)?e[r]=Mh(s,i):e[r]=s},{allOwnKeys:a}),e),s_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),i_=(e,n,i,a)=>{e.prototype=Object.create(n.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),i&&Object.assign(e.prototype,i)},o_=(e,n,i,a)=>{let s,r,l;const d={};if(n=n||{},e==null)return n;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)l=s[r],(!a||a(l,e,n))&&!d[l]&&(n[l]=e[l],d[l]=!0);e=i!==!1&&sc(e)}while(e&&(!i||i(e,n))&&e!==Object.prototype);return n},a_=(e,n,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=n.length;const a=e.indexOf(n,i);return a!==-1&&a===i},r_=e=>{if(!e)return null;if(Bi(e))return e;let n=e.length;if(!Oh(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=e[n];return i},l_=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&sc(Uint8Array)),c_=(e,n)=>{const a=(e&&e[mr]).call(e);let s;for(;(s=a.next())&&!s.done;){const r=s.value;n.call(e,r[0],r[1])}},u_=(e,n)=>{let i;const a=[];for(;(i=e.exec(n))!==null;)a.push(i);return a},d_=On("HTMLFormElement"),h_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,a,s){return a.toUpperCase()+s}),Ou=(({hasOwnProperty:e})=>(n,i)=>e.call(n,i))(Object.prototype),f_=On("RegExp"),Nh=(e,n)=>{const i=Object.getOwnPropertyDescriptors(e),a={};jo(i,(s,r)=>{let l;(l=n(s,r,e))!==!1&&(a[r]=l||s)}),Object.defineProperties(e,a)},p_=e=>{Nh(e,(n,i)=>{if(cn(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=e[i];if(cn(a)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},m_=(e,n)=>{const i={},a=s=>{s.forEach(r=>{i[r]=!0})};return Bi(e)?a(e):a(String(e).split(n)),i},v_=()=>{},g_=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function __(e){return!!(e&&cn(e.append)&&e[Ph]==="FormData"&&e[mr])}const y_=e=>{const n=new Array(10),i=(a,s)=>{if(Wo(a)){if(n.indexOf(a)>=0)return;if(qo(a))return a;if(!("toJSON"in a)){n[s]=a;const r=Bi(a)?[]:{};return jo(a,(l,d)=>{const h=i(l,s+1);!Ri(h)&&(r[d]=h)}),n[s]=void 0,r}}return a};return i(e,0)},b_=On("AsyncFunction"),k_=e=>e&&(Wo(e)||cn(e))&&cn(e.then)&&cn(e.catch),Bh=((e,n)=>e?setImmediate:n?((i,a)=>(Ks.addEventListener("message",({source:s,data:r})=>{s===Ks&&r===i&&a.length&&a.shift()()},!1),s=>{a.push(s),Ks.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",cn(Ks.postMessage)),w_=typeof queueMicrotask<"u"?queueMicrotask.bind(Ks):typeof process<"u"&&process.nextTick||Bh,C_=e=>e!=null&&cn(e[mr]),ee={isArray:Bi,isArrayBuffer:$h,isBuffer:qo,isFormData:Kg,isArrayBufferView:zg,isString:Ug,isNumber:Oh,isBoolean:Hg,isObject:Wo,isPlainObject:Da,isEmptyObject:Vg,isReadableStream:Jg,isRequest:Xg,isResponse:Qg,isHeaders:e_,isUndefined:Ri,isDate:Zg,isFile:qg,isBlob:Wg,isRegExp:f_,isFunction:cn,isStream:Gg,isURLSearchParams:Yg,isTypedArray:l_,isFileList:jg,forEach:jo,merge:Ml,extend:n_,trim:t_,stripBOM:s_,inherits:i_,toFlatObject:o_,kindOf:vr,kindOfTest:On,endsWith:a_,toArray:r_,forEachEntry:c_,matchAll:u_,isHTMLForm:d_,hasOwnProperty:Ou,hasOwnProp:Ou,reduceDescriptors:Nh,freezeMethods:p_,toObjectSet:m_,toCamelCase:h_,noop:v_,toFiniteNumber:g_,findKey:Dh,global:Ks,isContextDefined:Rh,isSpecCompliantForm:__,toJSONObject:y_,isAsyncFn:b_,isThenable:k_,setImmediate:Bh,asap:w_,isIterable:C_};function it(e,n,i,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const Fh=it.prototype,zh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{zh[e]={value:e}});Object.defineProperties(it,zh);Object.defineProperty(Fh,"isAxiosError",{value:!0});it.from=(e,n,i,a,s,r)=>{const l=Object.create(Fh);ee.toFlatObject(e,l,function(f){return f!==Error.prototype},m=>m!=="isAxiosError");const d=e&&e.message?e.message:"Error",h=n==null&&e?e.code:n;return it.call(l,d,h,i,a,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",r&&Object.assign(l,r),l};const L_=null;function Pl(e){return ee.isPlainObject(e)||ee.isArray(e)}function Uh(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function Du(e,n,i){return e?e.concat(n).map(function(s,r){return s=Uh(s),!i&&r?"["+s+"]":s}).join(i?".":""):n}function x_(e){return ee.isArray(e)&&!e.some(Pl)}const A_=ee.toFlatObject(ee,{},null,function(n){return/^is[A-Z]/.test(n)});function _r(e,n,i){if(!ee.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,i=ee.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,R){return!ee.isUndefined(R[P])});const a=i.metaTokens,s=i.visitor||f,r=i.dots,l=i.indexes,h=(i.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(n);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function m(M){if(M===null)return"";if(ee.isDate(M))return M.toISOString();if(ee.isBoolean(M))return M.toString();if(!h&&ee.isBlob(M))throw new it("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(M)||ee.isTypedArray(M)?h&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function f(M,P,R){let T=M;if(M&&!R&&typeof M=="object"){if(ee.endsWith(P,"{}"))P=a?P:P.slice(0,-2),M=JSON.stringify(M);else if(ee.isArray(M)&&x_(M)||(ee.isFileList(M)||ee.endsWith(P,"[]"))&&(T=ee.toArray(M)))return P=Uh(P),T.forEach(function(g,C){!(ee.isUndefined(g)||g===null)&&n.append(l===!0?Du([P],C,r):l===null?P:P+"[]",m(g))}),!1}return Pl(M)?!0:(n.append(Du(R,P,r),m(M)),!1)}const v=[],k=Object.assign(A_,{defaultVisitor:f,convertValue:m,isVisitable:Pl});function x(M,P){if(!ee.isUndefined(M)){if(v.indexOf(M)!==-1)throw Error("Circular reference detected in "+P.join("."));v.push(M),ee.forEach(M,function(T,A){(!(ee.isUndefined(T)||T===null)&&s.call(n,T,ee.isString(A)?A.trim():A,P,k))===!0&&x(T,P?P.concat(A):[A])}),v.pop()}}if(!ee.isObject(e))throw new TypeError("data must be an object");return x(e),n}function Ru(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return n[a]})}function ic(e,n){this._pairs=[],e&&_r(e,this,n)}const Hh=ic.prototype;Hh.append=function(n,i){this._pairs.push([n,i])};Hh.toString=function(n){const i=n?function(a){return n.call(this,a,Ru)}:Ru;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function E_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Vh(e,n,i){if(!n)return e;const a=i&&i.encode||E_;ee.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let r;if(s?r=s(n,i):r=ee.isURLSearchParams(n)?n.toString():new ic(n,i).toString(a),r){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Nu{constructor(){this.handlers=[]}use(n,i,a){return this.handlers.push({fulfilled:n,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ee.forEach(this.handlers,function(a){a!==null&&n(a)})}}const Zh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},T_=typeof URLSearchParams<"u"?URLSearchParams:ic,I_=typeof FormData<"u"?FormData:null,S_=typeof Blob<"u"?Blob:null,M_={isBrowser:!0,classes:{URLSearchParams:T_,FormData:I_,Blob:S_},protocols:["http","https","file","blob","url","data"]},oc=typeof window<"u"&&typeof document<"u",$l=typeof navigator=="object"&&navigator||void 0,P_=oc&&(!$l||["ReactNative","NativeScript","NS"].indexOf($l.product)<0),$_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",O_=oc&&window.location.href||"http://localhost",D_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:oc,hasStandardBrowserEnv:P_,hasStandardBrowserWebWorkerEnv:$_,navigator:$l,origin:O_},Symbol.toStringTag,{value:"Module"})),Gt={...D_,...M_};function R_(e,n){return _r(e,new Gt.classes.URLSearchParams,{visitor:function(i,a,s,r){return Gt.isNode&&ee.isBuffer(i)?(this.append(a,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...n})}function N_(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function B_(e){const n={},i=Object.keys(e);let a;const s=i.length;let r;for(a=0;a<s;a++)r=i[a],n[r]=e[r];return n}function qh(e){function n(i,a,s,r){let l=i[r++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),h=r>=i.length;return l=!l&&ee.isArray(s)?s.length:l,h?(ee.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!d):((!s[l]||!ee.isObject(s[l]))&&(s[l]=[]),n(i,a,s[l],r)&&ee.isArray(s[l])&&(s[l]=B_(s[l])),!d)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const i={};return ee.forEachEntry(e,(a,s)=>{n(N_(a),s,i,0)}),i}return null}function F_(e,n,i){if(ee.isString(e))try{return(n||JSON.parse)(e),ee.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}const Go={transitional:Zh,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const a=i.getContentType()||"",s=a.indexOf("application/json")>-1,r=ee.isObject(n);if(r&&ee.isHTMLForm(n)&&(n=new FormData(n)),ee.isFormData(n))return s?JSON.stringify(qh(n)):n;if(ee.isArrayBuffer(n)||ee.isBuffer(n)||ee.isStream(n)||ee.isFile(n)||ee.isBlob(n)||ee.isReadableStream(n))return n;if(ee.isArrayBufferView(n))return n.buffer;if(ee.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let d;if(r){if(a.indexOf("application/x-www-form-urlencoded")>-1)return R_(n,this.formSerializer).toString();if((d=ee.isFileList(n))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return _r(d?{"files[]":n}:n,h&&new h,this.formSerializer)}}return r||s?(i.setContentType("application/json",!1),F_(n)):n}],transformResponse:[function(n){const i=this.transitional||Go.transitional,a=i&&i.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(n)||ee.isReadableStream(n))return n;if(n&&ee.isString(n)&&(a&&!this.responseType||s)){const l=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(n,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?it.from(d,it.ERR_BAD_RESPONSE,this,null,this.response):d}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],e=>{Go.headers[e]={}});const z_=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U_=e=>{const n={};let i,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),i=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!i||n[i]&&z_[i])&&(i==="set-cookie"?n[i]?n[i].push(a):n[i]=[a]:n[i]=n[i]?n[i]+", "+a:a)}),n},Bu=Symbol("internals");function bo(e){return e&&String(e).trim().toLowerCase()}function Ra(e){return e===!1||e==null?e:ee.isArray(e)?e.map(Ra):String(e)}function H_(e){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(e);)n[a[1]]=a[2];return n}const V_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function cl(e,n,i,a,s){if(ee.isFunction(a))return a.call(this,n,i);if(s&&(n=i),!!ee.isString(n)){if(ee.isString(a))return n.indexOf(a)!==-1;if(ee.isRegExp(a))return a.test(n)}}function Z_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,a)=>i.toUpperCase()+a)}function q_(e,n){const i=ee.toCamelCase(" "+n);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+i,{value:function(s,r,l){return this[a].call(this,n,s,r,l)},configurable:!0})})}let un=class{constructor(n){n&&this.set(n)}set(n,i,a){const s=this;function r(d,h,m){const f=bo(h);if(!f)throw new Error("header name must be a non-empty string");const v=ee.findKey(s,f);(!v||s[v]===void 0||m===!0||m===void 0&&s[v]!==!1)&&(s[v||h]=Ra(d))}const l=(d,h)=>ee.forEach(d,(m,f)=>r(m,f,h));if(ee.isPlainObject(n)||n instanceof this.constructor)l(n,i);else if(ee.isString(n)&&(n=n.trim())&&!V_(n))l(U_(n),i);else if(ee.isObject(n)&&ee.isIterable(n)){let d={},h,m;for(const f of n){if(!ee.isArray(f))throw TypeError("Object iterator must return a key-value pair");d[m=f[0]]=(h=d[m])?ee.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}l(d,i)}else n!=null&&r(i,n,a);return this}get(n,i){if(n=bo(n),n){const a=ee.findKey(this,n);if(a){const s=this[a];if(!i)return s;if(i===!0)return H_(s);if(ee.isFunction(i))return i.call(this,s,a);if(ee.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=bo(n),n){const a=ee.findKey(this,n);return!!(a&&this[a]!==void 0&&(!i||cl(this,this[a],a,i)))}return!1}delete(n,i){const a=this;let s=!1;function r(l){if(l=bo(l),l){const d=ee.findKey(a,l);d&&(!i||cl(a,a[d],d,i))&&(delete a[d],s=!0)}}return ee.isArray(n)?n.forEach(r):r(n),s}clear(n){const i=Object.keys(this);let a=i.length,s=!1;for(;a--;){const r=i[a];(!n||cl(this,this[r],r,n,!0))&&(delete this[r],s=!0)}return s}normalize(n){const i=this,a={};return ee.forEach(this,(s,r)=>{const l=ee.findKey(a,r);if(l){i[l]=Ra(s),delete i[r];return}const d=n?Z_(r):String(r).trim();d!==r&&delete i[r],i[d]=Ra(s),a[d]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ee.forEach(this,(a,s)=>{a!=null&&a!==!1&&(i[s]=n&&ee.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const a=new this(n);return i.forEach(s=>a.set(s)),a}static accessor(n){const a=(this[Bu]=this[Bu]={accessors:{}}).accessors,s=this.prototype;function r(l){const d=bo(l);a[d]||(q_(s,l),a[d]=!0)}return ee.isArray(n)?n.forEach(r):r(n),this}};un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(un.prototype,({value:e},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(a){this[i]=a}}});ee.freezeMethods(un);function ul(e,n){const i=this||Go,a=n||i,s=un.from(a.headers);let r=a.data;return ee.forEach(e,function(d){r=d.call(i,r,s.normalize(),n?n.status:void 0)}),s.normalize(),r}function Wh(e){return!!(e&&e.__CANCEL__)}function Fi(e,n,i){it.call(this,e??"canceled",it.ERR_CANCELED,n,i),this.name="CanceledError"}ee.inherits(Fi,it,{__CANCEL__:!0});function jh(e,n,i){const a=i.config.validateStatus;!i.status||!a||a(i.status)?e(i):n(new it("Request failed with status code "+i.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function W_(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function j_(e,n){e=e||10;const i=new Array(e),a=new Array(e);let s=0,r=0,l;return n=n!==void 0?n:1e3,function(h){const m=Date.now(),f=a[r];l||(l=m),i[s]=h,a[s]=m;let v=r,k=0;for(;v!==s;)k+=i[v++],v=v%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),m-l<n)return;const x=f&&m-f;return x?Math.round(k*1e3/x):void 0}}function G_(e,n){let i=0,a=1e3/n,s,r;const l=(m,f=Date.now())=>{i=f,s=null,r&&(clearTimeout(r),r=null),e(...m)};return[(...m)=>{const f=Date.now(),v=f-i;v>=a?l(m,f):(s=m,r||(r=setTimeout(()=>{r=null,l(s)},a-v)))},()=>s&&l(s)]}const Ga=(e,n,i=3)=>{let a=0;const s=j_(50,250);return G_(r=>{const l=r.loaded,d=r.lengthComputable?r.total:void 0,h=l-a,m=s(h),f=l<=d;a=l;const v={loaded:l,total:d,progress:d?l/d:void 0,bytes:h,rate:m||void 0,estimated:m&&d&&f?(d-l)/m:void 0,event:r,lengthComputable:d!=null,[n?"download":"upload"]:!0};e(v)},i)},Fu=(e,n)=>{const i=e!=null;return[a=>n[0]({lengthComputable:i,total:e,loaded:a}),n[1]]},zu=e=>(...n)=>ee.asap(()=>e(...n)),K_=Gt.hasStandardBrowserEnv?((e,n)=>i=>(i=new URL(i,Gt.origin),e.protocol===i.protocol&&e.host===i.host&&(n||e.port===i.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,Y_=Gt.hasStandardBrowserEnv?{write(e,n,i,a,s,r,l){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(n)}`];ee.isNumber(i)&&d.push(`expires=${new Date(i).toUTCString()}`),ee.isString(a)&&d.push(`path=${a}`),ee.isString(s)&&d.push(`domain=${s}`),r===!0&&d.push("secure"),ee.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function J_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function X_(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Gh(e,n,i){let a=!J_(n);return e&&(a||i==!1)?X_(e,n):n}const Uu=e=>e instanceof un?{...e}:e;function ei(e,n){n=n||{};const i={};function a(m,f,v,k){return ee.isPlainObject(m)&&ee.isPlainObject(f)?ee.merge.call({caseless:k},m,f):ee.isPlainObject(f)?ee.merge({},f):ee.isArray(f)?f.slice():f}function s(m,f,v,k){if(ee.isUndefined(f)){if(!ee.isUndefined(m))return a(void 0,m,v,k)}else return a(m,f,v,k)}function r(m,f){if(!ee.isUndefined(f))return a(void 0,f)}function l(m,f){if(ee.isUndefined(f)){if(!ee.isUndefined(m))return a(void 0,m)}else return a(void 0,f)}function d(m,f,v){if(v in n)return a(m,f);if(v in e)return a(void 0,m)}const h={url:r,method:r,data:r,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(m,f,v)=>s(Uu(m),Uu(f),v,!0)};return ee.forEach(Object.keys({...e,...n}),function(f){const v=h[f]||s,k=v(e[f],n[f],f);ee.isUndefined(k)&&v!==d||(i[f]=k)}),i}const Kh=e=>{const n=ei({},e);let{data:i,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:r,headers:l,auth:d}=n;if(n.headers=l=un.from(l),n.url=Vh(Gh(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),ee.isFormData(i)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ee.isFunction(i.getHeaders)){const h=i.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([f,v])=>{m.includes(f.toLowerCase())&&l.set(f,v)})}}if(Gt.hasStandardBrowserEnv&&(a&&ee.isFunction(a)&&(a=a(n)),a||a!==!1&&K_(n.url))){const h=s&&r&&Y_.read(r);h&&l.set(s,h)}return n},Q_=typeof XMLHttpRequest<"u",ey=Q_&&function(e){return new Promise(function(i,a){const s=Kh(e);let r=s.data;const l=un.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:m}=s,f,v,k,x,M;function P(){x&&x(),M&&M(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let R=new XMLHttpRequest;R.open(s.method.toUpperCase(),s.url,!0),R.timeout=s.timeout;function T(){if(!R)return;const g=un.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),w={data:!d||d==="text"||d==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:g,config:e,request:R};jh(function(O){i(O),P()},function(O){a(O),P()},w),R=null}"onloadend"in R?R.onloadend=T:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(T)},R.onabort=function(){R&&(a(new it("Request aborted",it.ECONNABORTED,e,R)),R=null)},R.onerror=function(C){const w=C&&C.message?C.message:"Network Error",E=new it(w,it.ERR_NETWORK,e,R);E.event=C||null,a(E),R=null},R.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const w=s.transitional||Zh;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),a(new it(C,w.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,e,R)),R=null},r===void 0&&l.setContentType(null),"setRequestHeader"in R&&ee.forEach(l.toJSON(),function(C,w){R.setRequestHeader(w,C)}),ee.isUndefined(s.withCredentials)||(R.withCredentials=!!s.withCredentials),d&&d!=="json"&&(R.responseType=s.responseType),m&&([k,M]=Ga(m,!0),R.addEventListener("progress",k)),h&&R.upload&&([v,x]=Ga(h),R.upload.addEventListener("progress",v),R.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(f=g=>{R&&(a(!g||g.type?new Fi(null,e,R):g),R.abort(),R=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const A=W_(s.url);if(A&&Gt.protocols.indexOf(A)===-1){a(new it("Unsupported protocol "+A+":",it.ERR_BAD_REQUEST,e));return}R.send(r||null)})},ty=(e,n)=>{const{length:i}=e=e?e.filter(Boolean):[];if(n||i){let a=new AbortController,s;const r=function(m){if(!s){s=!0,d();const f=m instanceof Error?m:this.reason;a.abort(f instanceof it?f:new Fi(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,r(new it(`timeout ${n} of ms exceeded`,it.ETIMEDOUT))},n);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(r):m.removeEventListener("abort",r)}),e=null)};e.forEach(m=>m.addEventListener("abort",r));const{signal:h}=a;return h.unsubscribe=()=>ee.asap(d),h}},ny=function*(e,n){let i=e.byteLength;if(i<n){yield e;return}let a=0,s;for(;a<i;)s=a+n,yield e.slice(a,s),a=s},sy=async function*(e,n){for await(const i of iy(e))yield*ny(i,n)},iy=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:i,value:a}=await n.read();if(i)break;yield a}}finally{await n.cancel()}},Hu=(e,n,i,a)=>{const s=sy(e,n);let r=0,l,d=h=>{l||(l=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:m,value:f}=await s.next();if(m){d(),h.close();return}let v=f.byteLength;if(i){let k=r+=v;i(k)}h.enqueue(new Uint8Array(f))}catch(m){throw d(m),m}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},Vu=64*1024,{isFunction:Ea}=ee,oy=(({Request:e,Response:n})=>({Request:e,Response:n}))(ee.global),{ReadableStream:Zu,TextEncoder:qu}=ee.global,Wu=(e,...n)=>{try{return!!e(...n)}catch{return!1}},ay=e=>{e=ee.merge.call({skipUndefined:!0},oy,e);const{fetch:n,Request:i,Response:a}=e,s=n?Ea(n):typeof fetch=="function",r=Ea(i),l=Ea(a);if(!s)return!1;const d=s&&Ea(Zu),h=s&&(typeof qu=="function"?(M=>P=>M.encode(P))(new qu):async M=>new Uint8Array(await new i(M).arrayBuffer())),m=r&&d&&Wu(()=>{let M=!1;const P=new i(Gt.origin,{body:new Zu,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!P}),f=l&&d&&Wu(()=>ee.isReadableStream(new a("").body)),v={stream:f&&(M=>M.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!v[M]&&(v[M]=(P,R)=>{let T=P&&P[M];if(T)return T.call(P);throw new it(`Response type '${M}' is not supported`,it.ERR_NOT_SUPPORT,R)})});const k=async M=>{if(M==null)return 0;if(ee.isBlob(M))return M.size;if(ee.isSpecCompliantForm(M))return(await new i(Gt.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(M)||ee.isArrayBuffer(M))return M.byteLength;if(ee.isURLSearchParams(M)&&(M=M+""),ee.isString(M))return(await h(M)).byteLength},x=async(M,P)=>{const R=ee.toFiniteNumber(M.getContentLength());return R??k(P)};return async M=>{let{url:P,method:R,data:T,signal:A,cancelToken:g,timeout:C,onDownloadProgress:w,onUploadProgress:E,responseType:O,headers:W,withCredentials:V="same-origin",fetchOptions:se}=Kh(M),ge=n||fetch;O=O?(O+"").toLowerCase():"text";let Se=ty([A,g&&g.toAbortSignal()],C),Me=null;const ie=Se&&Se.unsubscribe&&(()=>{Se.unsubscribe()});let ue;try{if(E&&m&&R!=="get"&&R!=="head"&&(ue=await x(W,T))!==0){let he=new i(P,{method:"POST",body:T,duplex:"half"}),Ee;if(ee.isFormData(T)&&(Ee=he.headers.get("content-type"))&&W.setContentType(Ee),he.body){const[Re,me]=Fu(ue,Ga(zu(E)));T=Hu(he.body,Vu,Re,me)}}ee.isString(V)||(V=V?"include":"omit");const de=r&&"credentials"in i.prototype,Ae={...se,signal:Se,method:R.toUpperCase(),headers:W.normalize().toJSON(),body:T,duplex:"half",credentials:de?V:void 0};Me=r&&new i(P,Ae);let pe=await(r?ge(Me,se):ge(P,Ae));const Ce=f&&(O==="stream"||O==="response");if(f&&(w||Ce&&ie)){const he={};["status","statusText","headers"].forEach(re=>{he[re]=pe[re]});const Ee=ee.toFiniteNumber(pe.headers.get("content-length")),[Re,me]=w&&Fu(Ee,Ga(zu(w),!0))||[];pe=new a(Hu(pe.body,Vu,Re,()=>{me&&me(),ie&&ie()}),he)}O=O||"text";let K=await v[ee.findKey(v,O)||"text"](pe,M);return!Ce&&ie&&ie(),await new Promise((he,Ee)=>{jh(he,Ee,{data:K,headers:un.from(pe.headers),status:pe.status,statusText:pe.statusText,config:M,request:Me})})}catch(de){throw ie&&ie(),de&&de.name==="TypeError"&&/Load failed|fetch/i.test(de.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,M,Me),{cause:de.cause||de}):it.from(de,de&&de.code,M,Me)}}},ry=new Map,Yh=e=>{let n=e&&e.env||{};const{fetch:i,Request:a,Response:s}=n,r=[a,s,i];let l=r.length,d=l,h,m,f=ry;for(;d--;)h=r[d],m=f.get(h),m===void 0&&f.set(h,m=d?new Map:ay(n)),f=m;return m};Yh();const ac={http:L_,xhr:ey,fetch:{get:Yh}};ee.forEach(ac,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const ju=e=>`- ${e}`,ly=e=>ee.isFunction(e)||e===null||e===!1;function cy(e,n){e=ee.isArray(e)?e:[e];const{length:i}=e;let a,s;const r={};for(let l=0;l<i;l++){a=e[l];let d;if(s=a,!ly(a)&&(s=ac[(d=String(a)).toLowerCase()],s===void 0))throw new it(`Unknown adapter '${d}'`);if(s&&(ee.isFunction(s)||(s=s.get(n))))break;r[d||"#"+l]=s}if(!s){const l=Object.entries(r).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=i?l.length>1?`since :
`+l.map(ju).join(`
`):" "+ju(l[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const Jh={getAdapter:cy,adapters:ac};function dl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fi(null,e)}function Gu(e){return dl(e),e.headers=un.from(e.headers),e.data=ul.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Jh.getAdapter(e.adapter||Go.adapter,e)(e).then(function(a){return dl(e),a.data=ul.call(e,e.transformResponse,a),a.headers=un.from(a.headers),a},function(a){return Wh(a)||(dl(e),a&&a.response&&(a.response.data=ul.call(e,e.transformResponse,a.response),a.response.headers=un.from(a.response.headers))),Promise.reject(a)})}const Xh="1.13.2",yr={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{yr[e]=function(a){return typeof a===e||"a"+(n<1?"n ":" ")+e}});const Ku={};yr.transitional=function(n,i,a){function s(r,l){return"[Axios v"+Xh+"] Transitional option '"+r+"'"+l+(a?". "+a:"")}return(r,l,d)=>{if(n===!1)throw new it(s(l," has been removed"+(i?" in "+i:"")),it.ERR_DEPRECATED);return i&&!Ku[l]&&(Ku[l]=!0,console.warn(s(l," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(r,l,d):!0}};yr.spelling=function(n){return(i,a)=>(console.warn(`${a} is likely a misspelling of ${n}`),!0)};function uy(e,n,i){if(typeof e!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const r=a[s],l=n[r];if(l){const d=e[r],h=d===void 0||l(d,r,e);if(h!==!0)throw new it("option "+r+" must be "+h,it.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new it("Unknown option "+r,it.ERR_BAD_OPTION)}}const Na={assertOptions:uy,validators:yr},Bn=Na.validators;let Xs=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Nu,response:new Nu}}async request(n,i){try{return await this._request(n,i)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?r&&!String(a.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+r):a.stack=r}catch{}}throw a}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=ei(this.defaults,i);const{transitional:a,paramsSerializer:s,headers:r}=i;a!==void 0&&Na.assertOptions(a,{silentJSONParsing:Bn.transitional(Bn.boolean),forcedJSONParsing:Bn.transitional(Bn.boolean),clarifyTimeoutError:Bn.transitional(Bn.boolean)},!1),s!=null&&(ee.isFunction(s)?i.paramsSerializer={serialize:s}:Na.assertOptions(s,{encode:Bn.function,serialize:Bn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Na.assertOptions(i,{baseUrl:Bn.spelling("baseURL"),withXsrfToken:Bn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=r&&ee.merge(r.common,r[i.method]);r&&ee.forEach(["delete","get","head","post","put","patch","common"],M=>{delete r[M]}),i.headers=un.concat(l,r);const d=[];let h=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(i)===!1||(h=h&&P.synchronous,d.unshift(P.fulfilled,P.rejected))});const m=[];this.interceptors.response.forEach(function(P){m.push(P.fulfilled,P.rejected)});let f,v=0,k;if(!h){const M=[Gu.bind(this),void 0];for(M.unshift(...d),M.push(...m),k=M.length,f=Promise.resolve(i);v<k;)f=f.then(M[v++],M[v++]);return f}k=d.length;let x=i;for(;v<k;){const M=d[v++],P=d[v++];try{x=M(x)}catch(R){P.call(this,R);break}}try{f=Gu.call(this,x)}catch(M){return Promise.reject(M)}for(v=0,k=m.length;v<k;)f=f.then(m[v++],m[v++]);return f}getUri(n){n=ei(this.defaults,n);const i=Gh(n.baseURL,n.url,n.allowAbsoluteUrls);return Vh(i,n.params,n.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(n){Xs.prototype[n]=function(i,a){return this.request(ei(a||{},{method:n,url:i,data:(a||{}).data}))}});ee.forEach(["post","put","patch"],function(n){function i(a){return function(r,l,d){return this.request(ei(d||{},{method:n,headers:a?{"Content-Type":"multipart/form-data"}:{},url:r,data:l}))}}Xs.prototype[n]=i(),Xs.prototype[n+"Form"]=i(!0)});let dy=class Qh{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const a=this;this.promise.then(s=>{if(!a._listeners)return;let r=a._listeners.length;for(;r-- >0;)a._listeners[r](s);a._listeners=null}),this.promise.then=s=>{let r;const l=new Promise(d=>{a.subscribe(d),r=d}).then(s);return l.cancel=function(){a.unsubscribe(r)},l},n(function(r,l,d){a.reason||(a.reason=new Fi(r,l,d),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=a=>{n.abort(a)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Qh(function(s){n=s}),cancel:n}}};function hy(e){return function(i){return e.apply(null,i)}}function fy(e){return ee.isObject(e)&&e.isAxiosError===!0}const Ol={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ol).forEach(([e,n])=>{Ol[n]=e});function ef(e){const n=new Xs(e),i=Mh(Xs.prototype.request,n);return ee.extend(i,Xs.prototype,n,{allOwnKeys:!0}),ee.extend(i,n,null,{allOwnKeys:!0}),i.create=function(s){return ef(ei(e,s))},i}const Ot=ef(Go);Ot.Axios=Xs;Ot.CanceledError=Fi;Ot.CancelToken=dy;Ot.isCancel=Wh;Ot.VERSION=Xh;Ot.toFormData=_r;Ot.AxiosError=it;Ot.Cancel=Ot.CanceledError;Ot.all=function(n){return Promise.all(n)};Ot.spread=hy;Ot.isAxiosError=fy;Ot.mergeConfig=ei;Ot.AxiosHeaders=un;Ot.formToJSON=e=>qh(ee.isHTMLForm(e)?new FormData(e):e);Ot.getAdapter=Jh.getAdapter;Ot.HttpStatusCode=Ol;Ot.default=Ot;const{Axios:K2,AxiosError:Y2,CanceledError:J2,isCancel:X2,CancelToken:Q2,VERSION:eO,all:tO,Cancel:nO,isAxiosError:sO,spread:iO,toFormData:oO,AxiosHeaders:aO,HttpStatusCode:rO,formToJSON:lO,getAdapter:cO,mergeConfig:uO}=Ot,py="https://sterobson-volunteercheckin-testing.azurewebsites.net/api",Ie=Ot.create({baseURL:py,headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(e=>{const n=localStorage.getItem("adminEmail");n&&(e.headers["X-Admin-Email"]=n);const i=localStorage.getItem("sessionToken");return i&&(e.headers.Authorization=`Bearer ${i}`),e});const cs={requestLogin:e=>Ie.post("/auth/request-login",{email:e}),verifyToken:e=>Ie.post("/auth/verify-token",{token:e}),instantLogin:e=>Ie.post("/auth/instant-login",{email:e}),createAdmin:e=>Ie.post("/auth/create-admin",{email:e}),marshalLogin:(e,n)=>Ie.post("/auth/marshal-login",{eventId:e,magicCode:n}),getMe:e=>Ie.get("/auth/me",{params:{eventId:e}}),logout:()=>Ie.post("/auth/logout")},Ta={getProfile:()=>Ie.get("/auth/profile"),updateProfile:e=>Ie.put("/auth/profile",e),getPerson:(e,n)=>Ie.get(`/people/${e}`,{params:{eventId:n}}),updatePerson:(e,n,i)=>Ie.put(`/people/${e}`,i,{params:{eventId:n}})},Ws={create:e=>Ie.post("/events",e),getAll:()=>Ie.get("/events"),getById:e=>Ie.get(`/events/${e}`),update:(e,n)=>Ie.put(`/events/${e}`,n),delete:e=>Ie.delete(`/events/${e}`),uploadGpx:(e,n)=>{const i=new FormData;return i.append("gpx",n),Ie.post(`/events/${e}/upload-gpx`,i,{headers:{"Content-Type":"multipart/form-data"}})}},ls={create:e=>Ie.post("/locations",e),getById:(e,n)=>Ie.get(`/locations/${e}/${n}`),getByEvent:e=>Ie.get(`/events/${e}/locations`),update:(e,n,i)=>Ie.put(`/locations/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/locations/${e}/${n}`),importCsv:(e,n,i)=>{const a=new FormData;return a.append("csv",n),Ie.post(`/locations/import/${e}?deleteExisting=${i}`,a,{headers:{"Content-Type":"multipart/form-data"}})},bulkUpdateTimes:(e,n)=>Ie.post(`/locations/bulk-update-times/${e}`,{timeDelta:n})},Ci={create:e=>Ie.post("/assignments",e),getById:(e,n)=>Ie.get(`/assignments/${e}/${n}`),getByEvent:e=>Ie.get(`/assignments/event/${e}`),delete:(e,n)=>Ie.delete(`/assignments/${e}/${n}`),getEventStatus:e=>Ie.get(`/events/${e}/status`)},Li={checkIn:e=>Ie.post("/checkin",e),adminCheckIn:(e,n)=>Ie.post(`/checkin/admin/${e}/${n}`)},hl={getAdmins:e=>Ie.get(`/events/${e}/admins`),addAdmin:(e,n)=>Ie.post(`/events/${e}/admins`,{userEmail:n}),removeAdmin:(e,n)=>Ie.delete(`/events/${e}/admins/${n}`)},In={create:e=>Ie.post("/marshals",e),getByEvent:e=>Ie.get(`/events/${e}/marshals`),getById:(e,n)=>Ie.get(`/marshals/${e}/${n}`),update:(e,n,i)=>Ie.put(`/marshals/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/marshals/${e}/${n}`),getMagicLink:(e,n)=>Ie.get(`/marshals/${e}/${n}/magic-link`),sendMagicLink:(e,n)=>Ie.post(`/marshals/${e}/${n}/send-magic-link`),importCsv:(e,n)=>{const i=new FormData;return i.append("csv",n),Ie.post(`/marshals/import/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})}},js={create:e=>Ie.post("/areas",e),getByEvent:e=>Ie.get(`/events/${e}/areas`),getById:(e,n)=>Ie.get(`/areas/${e}/${n}`),update:(e,n,i)=>Ie.put(`/areas/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/areas/${e}/${n}`),recalculate:e=>Ie.post(`/areas/recalculate/${e}`),getCheckpoints:(e,n)=>Ie.get(`/areas/${e}/${n}/locations`),getAreaLeads:(e,n)=>Ie.get(`/areas/${e}/${n}/leads`)},Lt={create:(e,n)=>Ie.post(`/events/${e}/checklist-items`,n),getByEvent:e=>Ie.get(`/events/${e}/checklist-items`),getById:(e,n)=>Ie.get(`/checklist-items/${e}/${n}`),update:(e,n,i)=>Ie.put(`/checklist-items/${e}/${n}`,i),delete:(e,n)=>Ie.delete(`/checklist-items/${e}/${n}`),getReport:e=>Ie.get(`/events/${e}/checklist-report`),getMarshalChecklist:(e,n)=>Ie.get(`/events/${e}/marshals/${n}/checklist`),getCheckpointChecklist:(e,n)=>Ie.get(`/events/${e}/locations/${n}/checklist`),getAreaChecklist:(e,n)=>Ie.get(`/events/${e}/areas/${n}/checklist`),complete:(e,n,i)=>Ie.post(`/checklist-items/${e}/${n}/complete`,i),uncomplete:(e,n,i)=>Ie.post(`/checklist-items/${e}/${n}/uncomplete`,i)},is={create:(e,n)=>Ie.post(`/events/${e}/notes`,n),getByEvent:e=>Ie.get(`/events/${e}/notes`),getById:(e,n)=>Ie.get(`/events/${e}/notes/${n}`),update:(e,n,i)=>Ie.put(`/events/${e}/notes/${n}`,i),delete:(e,n)=>Ie.delete(`/events/${e}/notes/${n}`),getMarshalNotes:(e,n)=>Ie.get(`/events/${e}/marshals/${n}/notes`),getMyNotes:e=>Ie.get(`/events/${e}/my-notes`)},wi={create:(e,n)=>Ie.post(`/events/${e}/contacts`,n),getByEvent:e=>Ie.get(`/events/${e}/contacts`),getById:(e,n)=>Ie.get(`/events/${e}/contacts/${n}`),update:(e,n,i)=>Ie.put(`/events/${e}/contacts/${n}`,i),delete:(e,n)=>Ie.delete(`/events/${e}/contacts/${n}`),getRoles:e=>Ie.get(`/events/${e}/contact-roles`),getMarshalContacts:(e,n)=>Ie.get(`/events/${e}/marshals/${n}/contacts`),getMyContacts:e=>Ie.get(`/events/${e}/my-contacts`)},br=Ql("auth",()=>{const e=$(localStorage.getItem("adminEmail")||null),n=$(!!e.value),i=$(!1);return{adminEmail:e,isAuthenticated:n,loginPending:i,requestLogin:async d=>{const h=await cs.requestLogin(d);return h.data.success&&(i.value=!0),h.data},verifyToken:async d=>{const h=await cs.verifyToken(d);return h.data.success&&(e.value=h.data.person?.email,n.value=!0,i.value=!1,localStorage.setItem("adminEmail",h.data.person?.email),localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},instantLogin:async d=>{const h=await cs.instantLogin(d);return h.data.success&&(e.value=h.data.email,n.value=!0,localStorage.setItem("adminEmail",h.data.email),h.data.sessionToken&&localStorage.setItem("sessionToken",h.data.sessionToken)),h.data},logout:async()=>{try{await cs.logout()}catch{}e.value=null,n.value=!1,i.value=!1,localStorage.removeItem("adminEmail"),localStorage.removeItem("sessionToken")}}}),my={class:"admin-login"},vy={class:"login-card"},gy={key:0,class:"email-sent"},_y={class:"form-group"},yy=["disabled"],by={key:0,class:"error"},ky={__name:"AdminLogin",setup(e){const n=br(),i=$(""),a=$(!1),s=$(null),r=$(!1),l=async()=>{a.value=!0,s.value=null;try{const h=await n.requestLogin(i.value);h.success?r.value=!0:s.value=h.message||"Failed to send login link. Please try again."}catch{s.value="Failed to send login link. Please try again."}finally{a.value=!1}},d=()=>{i.value="",r.value=!1,s.value=null};return(h,m)=>{const f=lr("router-link");return _(),b("div",my,[u("div",vy,[m[7]||(m[7]=u("h2",null,"Admin Login",-1)),r.value?(_(),b("div",gy,[m[2]||(m[2]=u("div",{class:"check-icon"},"",-1)),m[3]||(m[3]=u("h3",null,"Check your email!",-1)),u("p",null,[m[1]||(m[1]=He("We've sent a login link to ",-1)),u("strong",null,I(i.value),1)]),m[4]||(m[4]=u("p",{class:"hint"},"The link will expire in 15 minutes.",-1)),u("button",{onClick:d,class:"btn btn-secondary"}," Use a different email ")])):(_(),b(be,{key:1},[m[5]||(m[5]=u("p",{class:"instruction"},"Enter your email to receive a login link",-1)),u("form",{onSubmit:wt(l,["prevent"])},[u("div",_y,[Pe(u("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>i.value=v),type:"email",placeholder:"admin@example.com",required:"",class:"form-input"},null,512),[[st,i.value]])]),u("button",{type:"submit",class:"btn btn-primary",disabled:a.value},I(a.value?"Sending...":"Send login link"),9,yy)],32),s.value?(_(),b("div",by,I(s.value),1)):B("",!0)],64)),Ne(f,{to:"/",class:"back-link"},{default:Ye(()=>[...m[6]||(m[6]=[He(" Back to Home",-1)])]),_:1})])])}}},wy=Ze(ky,[["__scopeId","data-v-50552d01"]]),Cy={class:"admin-verify"},Ly={class:"verify-card"},xy={key:0,class:"status"},Ay={key:1,class:"status error"},Ey={key:2,class:"status success"},Ty={__name:"AdminVerify",setup(e){const n=Zo(),i=nc(),a=br(),s=$(!0),r=$(null);return wn(async()=>{const l=i.query.token;if(!l){r.value="No login token provided. Please request a new login link.",s.value=!1;return}try{const d=await a.verifyToken(l);d.success?setTimeout(()=>{n.push({name:"AdminDashboard"})},1e3):r.value=d.message||"Invalid or expired login link. Please request a new one."}catch(d){console.error("Verification error:",d),r.value="Failed to verify login. Please try again."}finally{s.value=!1}}),(l,d)=>{const h=lr("router-link");return _(),b("div",Cy,[u("div",Ly,[s.value?(_(),b("div",xy,[...d[0]||(d[0]=[u("div",{class:"spinner"},null,-1),u("h2",null,"Verifying your login...",-1),u("p",null,"Please wait while we confirm your identity.",-1)])])):r.value?(_(),b("div",Ay,[d[2]||(d[2]=u("h2",null,"Login Failed",-1)),u("p",null,I(r.value),1),Ne(h,{to:"/admin/login",class:"btn btn-primary"},{default:Ye(()=>[...d[1]||(d[1]=[He(" Try Again ",-1)])]),_:1})])):(_(),b("div",Ey,[...d[3]||(d[3]=[u("h2",null,"Login Successful!",-1),u("p",null,"Redirecting to dashboard...",-1)])]))])])}}},Iy=Ze(Ty,[["__scopeId","data-v-7bb86bfc"]]),tf=Ql("events",()=>{const e=$([]),n=$(null),i=$([]),a=$([]),s=$(null),r=$(!1),l=$(null),d=async()=>{r.value=!0,l.value=null;try{const E=await Ws.getAll();e.value=E.data}catch(E){throw l.value=E.message,E}finally{r.value=!1}},h=async E=>{r.value=!0,l.value=null;try{const O=await Ws.getById(E);n.value=O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}},m=async E=>{r.value=!0,l.value=null;try{const O=await Ws.create(E);return e.value.push(O.data),O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}},f=async(E,O)=>{r.value=!0,l.value=null;try{const W=await Ws.update(E,O),V=e.value.findIndex(se=>se.id===E);return V!==-1&&(e.value[V]=W.data),n.value?.id===E&&(n.value=W.data),W.data}catch(W){throw l.value=W.message,W}finally{r.value=!1}},v=async E=>{r.value=!0,l.value=null;try{await Ws.delete(E),e.value=e.value.filter(O=>O.id!==E)}catch(O){throw l.value=O.message,O}finally{r.value=!1}},k=async E=>{r.value=!0,l.value=null;try{const O=await ls.getByEvent(E);i.value=O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}};return{events:e,currentEvent:n,locations:i,assignments:a,eventStatus:s,loading:r,error:l,fetchEvents:d,fetchEvent:h,createEvent:m,updateEvent:f,deleteEvent:v,fetchLocations:k,createLocation:async E=>{r.value=!0,l.value=null;try{const O=await ls.create(E);return i.value.push(O.data),O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}},updateLocation:async(E,O,W)=>{r.value=!0,l.value=null;try{const V=await ls.update(E,O,W),se=i.value.findIndex(ge=>ge.id===O);return se!==-1&&(i.value[se]=V.data),V.data}catch(V){throw l.value=V.message,V}finally{r.value=!1}},deleteLocation:async(E,O)=>{r.value=!0,l.value=null;try{await ls.delete(E,O),i.value=i.value.filter(W=>W.id!==O)}catch(W){throw l.value=W.message,W}finally{r.value=!1}},bulkUpdateLocationTimes:async(E,O)=>{r.value=!0,l.value=null;try{const W=await ls.bulkUpdateTimes(E,O);return await k(E),W.data}catch(W){throw l.value=W.message,W}finally{r.value=!1}},fetchAssignments:async E=>{r.value=!0,l.value=null;try{const O=await Ci.getByEvent(E);a.value=O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}},createAssignment:async E=>{r.value=!0,l.value=null;try{const O=await Ci.create(E);return a.value.push(O.data),O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}},deleteAssignment:async(E,O)=>{r.value=!0,l.value=null;try{await Ci.delete(E,O),a.value=a.value.filter(W=>W.id!==O)}catch(W){throw l.value=W.message,W}finally{r.value=!1}},fetchEventStatus:async E=>{r.value=!0,l.value=null;try{const O=await Ci.getEventStatus(E);return s.value=O.data,O.data}catch(O){throw l.value=O.message,O}finally{r.value=!1}},updateAssignmentCheckIn:E=>{const O=a.value.findIndex(W=>W.id===E.id);O!==-1&&(a.value[O]=E),s.value&&s.value.locations.forEach(W=>{const V=W.assignments.findIndex(se=>se.id===E.id);V!==-1&&(W.assignments[V]=E,W.checkedInCount=W.assignments.filter(se=>se.isCheckedIn).length)})}}}),Sy={class:"confirm-modal"},My={class:"confirm-actions"},Py={__name:"ConfirmModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Confirm"},message:{type:String,required:!0},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"}},emits:["confirm","cancel"],setup(e,{emit:n}){const i=n,a=()=>{i("confirm")},s=()=>{i("cancel")};return(r,l)=>e.show?(_(),b("div",{key:0,class:"modal-overlay",onClick:wt(s,["self"])},[u("div",Sy,[u("h3",null,I(e.title),1),u("p",null,I(e.message),1),u("div",My,[u("button",{onClick:s,class:"btn btn-secondary"},I(e.cancelText),1),u("button",{onClick:a,class:"btn btn-primary"},I(e.confirmText),1)])])])):B("",!0)}},kr=Ze(Py,[["__scopeId","data-v-4bd2c256"]]),$y={class:"base-modal-header"},Oy={key:0,class:"base-modal-title"},Dy={key:0,class:"base-modal-tab-header"},Ry={class:"base-modal-body"},Ny={key:1,class:"base-modal-footer"},By={key:0,class:"base-modal-actions"},Fy={__name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:""},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)},variant:{type:String,default:"center",validator:e=>["center","sidebar"].includes(e)},zIndex:{type:Number,default:1e3},closeOnOverlay:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},confirmOnClose:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=e,a=n,s=$(!1),r=$(!1),l=()=>{i.closeOnOverlay&&d()},d=()=>{i.confirmOnClose&&i.isDirty?s.value=!0:a("close")},h=()=>{s.value=!1,a("close")},m=()=>{s.value=!1};return(f,v)=>e.show?(_(),b("div",{key:0,class:"base-modal-overlay",style:Yt({zIndex:e.zIndex}),onClick:wt(l,["self"])},[u("div",{class:Ve(["base-modal",[`base-modal--${e.size}`,`base-modal--${e.variant}`]])},[u("div",$y,[vo(f.$slots,"header",{},()=>[e.title?(_(),b("h2",Oy,I(e.title),1)):B("",!0)]),e.showCloseButton?(_(),b("button",{key:0,onClick:d,class:"base-modal-close",type:"button","aria-label":"Close"},"  ")):B("",!0)]),f.$slots["tab-header"]?(_(),b("div",Dy,[vo(f.$slots,"tab-header",{},void 0)])):B("",!0),u("div",Ry,[vo(f.$slots,"default",{},void 0)]),f.$slots.footer||f.$slots.actions?(_(),b("div",Ny,[vo(f.$slots,"footer",{},()=>[f.$slots.actions?(_(),b("div",By,[vo(f.$slots,"actions",{},void 0,!0)])):B("",!0)])])):B("",!0)],2),e.confirmOnClose&&!r.value?(_(),et(kr,{key:0,show:s.value,title:"Unsaved Changes",message:"You have unsaved changes. Are you sure you want to close?",onConfirm:h,onCancel:m},null,8,["show"])):B("",!0)],4)):B("",!0)}},Nt=Ze(Fy,[["__scopeId","data-v-45873bc7"]]);function nf(e="details",n=[]){const i=$(e),a=v=>{i.value=v},s=()=>{i.value=e},r=v=>i.value===v,l=ne(()=>n.length===0?-1:n.indexOf(i.value)),d=(v=!1)=>{if(n.length===0)return;const k=l.value;if(k===-1)return;const x=k+1;x<n.length?i.value=n[x]:v&&(i.value=n[0])},h=(v=!1)=>{if(n.length===0)return;const k=l.value;if(k===-1)return;const x=k-1;x>=0?i.value=n[x]:v&&(i.value=n[n.length-1])},m=ne(()=>{if(n.length===0)return!1;const v=l.value;return v!==-1&&v<n.length-1}),f=ne(()=>n.length===0?!1:l.value>0);return{activeTab:i,activeTabIndex:l,hasNextTab:m,hasPreviousTab:f,switchTab:a,resetTab:s,isActiveTab:r,nextTab:d,previousTab:h}}const sf=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Australia/Sydney",label:"Sydney (AEDT/AEST)"}],zy={class:"tabs"},Uy={class:"tab-content"},Hy={class:"form-group"},Vy={class:"form-group"},Zy={class:"form-group"},qy={class:"form-group"},Wy=["value"],jy={class:"tab-content"},Gy={class:"emergency-contacts-section"},Ky={key:0,class:"empty-state"},Yy={class:"card-header"},Jy=["onClick"],Xy={class:"form-group"},Qy=["onUpdate:modelValue"],eb={class:"form-group"},tb=["onUpdate:modelValue"],nb={class:"form-group"},sb=["onUpdate:modelValue"],ib={__name:"EventFormModal",props:{show:{type:Boolean,default:!1},eventData:{type:Object,default:()=>({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]})},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:n}){const i=e,a=n,{activeTab:s,switchTab:r,resetTab:l}=nf("basic",["basic","emergency"]),d=$({...i.eventData});We(()=>i.eventData,k=>{d.value={...k},d.value.emergencyContacts||(d.value.emergencyContacts=[])},{deep:!0}),We(()=>i.show,k=>{k&&l()});const h=()=>{d.value.emergencyContacts.push({name:"",phone:"",details:""})},m=k=>{d.value.emergencyContacts.splice(k,1)},f=()=>{a("submit",{...d.value})},v=()=>{a("close")};return(k,x)=>(_(),et(Nt,{show:e.show,title:e.isEditing?"Edit Event":"Create New Event",size:"large",onClose:v},{"tab-header":Ye(()=>[u("div",zy,[u("button",{type:"button",onClick:x[0]||(x[0]=M=>H(r)("basic")),class:Ve(["tab-button",{active:H(s)==="basic"}])}," Basic Details ",2),u("button",{type:"button",onClick:x[1]||(x[1]=M=>H(r)("emergency")),class:Ve(["tab-button",{active:H(s)==="emergency"}])}," Emergency Contacts ",2)])]),actions:Ye(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary"},I(e.isEditing?"Update":"Create"),1)]),default:Ye(()=>[u("form",{onSubmit:wt(f,["prevent"])},[Pe(u("div",Uy,[u("div",Hy,[x[6]||(x[6]=u("label",null,"Event Name *",-1)),Pe(u("input",{"onUpdate:modelValue":x[2]||(x[2]=M=>d.value.name=M),type:"text",required:"",class:"form-input"},null,512),[[st,d.value.name]])]),u("div",Vy,[x[7]||(x[7]=u("label",null,"Description",-1)),Pe(u("textarea",{"onUpdate:modelValue":x[3]||(x[3]=M=>d.value.description=M),rows:"3",class:"form-input"},null,512),[[st,d.value.description]])]),u("div",Zy,[x[8]||(x[8]=u("label",null,"Event Date *",-1)),Pe(u("input",{"onUpdate:modelValue":x[4]||(x[4]=M=>d.value.eventDate=M),type:"datetime-local",required:"",class:"form-input"},null,512),[[st,d.value.eventDate]])]),u("div",qy,[x[9]||(x[9]=u("label",null,"Time Zone *",-1)),Pe(u("select",{"onUpdate:modelValue":x[5]||(x[5]=M=>d.value.timeZoneId=M),required:"",class:"form-input"},[(_(!0),b(be,null,$e(H(sf),M=>(_(),b("option",{key:M.value,value:M.value},I(M.label),9,Wy))),128))],512),[[dn,d.value.timeZoneId]])])],512),[[Ts,H(s)==="basic"]]),Pe(u("div",jy,[u("div",Gy,[u("div",{class:"section-header-small"},[x[10]||(x[10]=u("h3",null,"Emergency Contacts",-1)),u("button",{type:"button",onClick:h,class:"btn btn-small btn-primary"}," + Add Contact ")]),d.value.emergencyContacts.length===0?(_(),b("div",Ky,[...x[11]||(x[11]=[u("p",null,'No emergency contacts added yet. Click "Add Contact" to add one.',-1)])])):B("",!0),(_(!0),b(be,null,$e(d.value.emergencyContacts,(M,P)=>(_(),b("div",{key:P,class:"emergency-contact-card"},[u("div",Yy,[u("h4",null,"Contact "+I(P+1),1),u("button",{type:"button",onClick:R=>m(P),class:"btn-remove"},"  ",8,Jy)]),u("div",Xy,[x[12]||(x[12]=u("label",null,"Name *",-1)),Pe(u("input",{"onUpdate:modelValue":R=>M.name=R,type:"text",required:"",class:"form-input",placeholder:"Contact person name"},null,8,Qy),[[st,M.name]])]),u("div",eb,[x[13]||(x[13]=u("label",null,"Phone *",-1)),Pe(u("input",{"onUpdate:modelValue":R=>M.phone=R,type:"tel",required:"",class:"form-input",placeholder:"+1 (555) 123-4567"},null,8,tb),[[st,M.phone]])]),u("div",nb,[x[14]||(x[14]=u("label",null,"Additional Details",-1)),Pe(u("textarea",{"onUpdate:modelValue":R=>M.details=R,rows:"2",class:"form-input",placeholder:"Role, availability, or other important information..."},null,8,sb),[[st,M.details]])])]))),128))])],512),[[Ts,H(s)==="emergency"]])],32)]),_:1},8,["show","title"]))}},ob=Ze(ib,[["__scopeId","data-v-35885c7a"]]),ab={class:"admin-dashboard"},rb={class:"header"},lb={class:"header-actions"},cb={class:"user-email"},ub={class:"container"},db={class:"section"},hb={class:"section-header"},fb={key:0,class:"loading"},pb={key:1,class:"empty"},mb={key:2,class:"events-grid"},vb=["onClick"],gb={class:"event-date"},_b={class:"event-desc"},yb={class:"event-actions"},bb=["onClick"],kb=["onClick"],wb={__name:"AdminDashboard",setup(e){const n=Zo(),i=br(),a=tf(),s=$(!0),r=$(!1),l=$(null),d=$({name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}),h=$([]),m=$(!1),f=$(""),v=$(""),k=$(null),x=async()=>{s.value=!0;try{await a.fetchEvents(),h.value=a.events}catch(V){console.error("Failed to load events:",V)}finally{s.value=!1}},M=async V=>{try{const se={...V,adminEmail:i.adminEmail};l.value?await a.updateEvent(l.value.id,se):await a.createEvent(se),h.value=a.events,g()}catch(se){console.error("Failed to save event:",se),alert("Failed to save event. Please try again.")}},P=V=>{l.value=V,d.value={name:V.name,description:V.description,eventDate:W(V.eventDate),timeZoneId:V.timeZoneId||"UTC",emergencyContacts:V.emergencyContacts?JSON.parse(JSON.stringify(V.emergencyContacts)):[]}},R=async V=>{f.value="Delete Event",v.value=`Are you sure you want to delete "${V.name}"?`,k.value=async()=>{try{await a.deleteEvent(V.id),h.value=a.events}catch(se){console.error("Failed to delete event:",se),alert("Failed to delete event. Please try again.")}},m.value=!0},T=()=>{m.value=!1,k.value&&(k.value(),k.value=null)},A=()=>{m.value=!1,k.value=null},g=()=>{r.value=!1,l.value=null,d.value={name:"",description:"",eventDate:"",timeZoneId:"UTC",emergencyContacts:[]}},C=V=>{if(!V){console.error("Cannot navigate to event: eventId is undefined");return}n.push({name:"AdminEventManage",params:{eventId:V}})},w=()=>{n.push({name:"AdminProfile"})},E=()=>{i.logout(),n.push({name:"Home"})},O=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),W=V=>{const se=new Date(V),ge=se.getFullYear(),Se=String(se.getMonth()+1).padStart(2,"0"),Me=String(se.getDate()).padStart(2,"0"),ie=String(se.getHours()).padStart(2,"0"),ue=String(se.getMinutes()).padStart(2,"0");return`${ge}-${Se}-${Me}T${ie}:${ue}`};return wn(()=>{x()}),(V,se)=>(_(),b("div",ab,[u("header",rb,[se[1]||(se[1]=u("h1",null,"Admin Dashboard",-1)),u("div",lb,[u("span",cb,I(H(i).adminEmail),1),u("button",{onClick:w,class:"btn btn-secondary"},"Profile"),u("button",{onClick:E,class:"btn btn-secondary"},"Logout")])]),u("div",ub,[u("div",db,[u("div",hb,[se[2]||(se[2]=u("h2",null,"Your Events",-1)),u("button",{onClick:se[0]||(se[0]=ge=>r.value=!0),class:"btn btn-primary"}," Create New Event ")]),s.value?(_(),b("div",fb,"Loading events...")):h.value.length===0?(_(),b("div",pb,[...se[3]||(se[3]=[u("p",null,"No events yet. Create your first event to get started!",-1)])])):(_(),b("div",mb,[(_(!0),b(be,null,$e(h.value,ge=>(_(),b("div",{key:ge.id,class:"event-card",onClick:Se=>C(ge.id)},[u("h3",null,I(ge.name),1),u("p",gb,I(O(ge.eventDate)),1),u("p",_b,I(ge.description),1),u("div",yb,[u("button",{onClick:wt(Se=>P(ge),["stop"]),class:"btn btn-small btn-secondary"}," Edit ",8,bb),u("button",{onClick:wt(Se=>R(ge),["stop"]),class:"btn btn-small btn-danger"}," Delete ",8,kb)])],8,vb))),128))]))])]),Ne(ob,{show:r.value||!!l.value,eventData:d.value,isEditing:!!l.value,onClose:g,onSubmit:M},null,8,["show","eventData","isEditing"]),Ne(kr,{show:m.value,title:f.value,message:v.value,onConfirm:T,onCancel:A},null,8,["show","title","message"])]))}},Cb=Ze(wb,[["__scopeId","data-v-c3a3ad82"]]),Lb=Ql("profile",()=>{const e=$(null),n=$(!1),i=$(null);return{profile:e,loading:n,error:i,fetchProfile:async()=>{n.value=!0,i.value=null;try{const h=await Ta.getProfile();return e.value=h.data,h.data}catch(h){throw i.value=h.response?.data?.message||"Failed to load profile",h}finally{n.value=!1}},updateProfile:async h=>{n.value=!0,i.value=null;try{const m=await Ta.updateProfile(h);return e.value=m.data,m.data}catch(m){throw i.value=m.response?.data?.message||"Failed to update profile",m}finally{n.value=!1}},fetchPerson:async(h,m)=>{n.value=!0,i.value=null;try{return(await Ta.getPerson(h,m)).data}catch(f){throw i.value=f.response?.data?.message||"Failed to load person",f}finally{n.value=!1}},updatePerson:async(h,m,f)=>{n.value=!0,i.value=null;try{return(await Ta.updatePerson(h,m,f)).data}catch(v){throw i.value=v.response?.data?.message||"Failed to update person",v}finally{n.value=!1}},clearProfile:()=>{e.value=null,i.value=null}}}),xb={class:"form-group"},Ab={class:"form-group"},Eb={class:"form-group"},Tb={__name:"EditProfileModal",props:{show:{type:Boolean,default:!1},profile:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=$({name:"",email:"",phone:""});We(()=>i.profile,h=>{h&&(s.value={name:h.name||"",email:h.email||"",phone:h.phone||""})},{immediate:!0,deep:!0}),We(()=>i.show,h=>{h&&i.profile&&(s.value={name:i.profile.name||"",email:i.profile.email||"",phone:i.profile.phone||""})});const r=()=>{a("update:isDirty",!0)},l=()=>{if(!s.value.name.trim()){alert("Name is required");return}if(!s.value.email.trim()){alert("Email is required");return}a("submit",{name:s.value.name.trim(),email:s.value.email.trim(),phone:s.value.phone?.trim()||""})},d=()=>{a("close")};return(h,m)=>(_(),et(Nt,{show:e.show,title:"Edit Profile",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:d},{actions:Ye(()=>[u("button",{type:"button",onClick:d,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary"}," Save changes ")]),default:Ye(()=>[u("form",{onSubmit:wt(l,["prevent"])},[u("div",xb,[m[3]||(m[3]=u("label",null,"Name *",-1)),Pe(u("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>s.value.name=f),type:"text",required:"",class:"form-input",placeholder:"Your name",onInput:r},null,544),[[st,s.value.name]])]),u("div",Ab,[m[4]||(m[4]=u("label",null,"Email *",-1)),Pe(u("input",{"onUpdate:modelValue":m[1]||(m[1]=f=>s.value.email=f),type:"email",required:"",class:"form-input",placeholder:"Your email address",onInput:r},null,544),[[st,s.value.email]])]),u("div",Eb,[m[5]||(m[5]=u("label",null,"Phone",-1)),Pe(u("input",{"onUpdate:modelValue":m[2]||(m[2]=f=>s.value.phone=f),type:"tel",class:"form-input",placeholder:"Your phone number",onInput:r},null,544),[[st,s.value.phone]])])],32)]),_:1},8,["show","is-dirty"]))}},Ib=Ze(Tb,[["__scopeId","data-v-2ce1a930"]]),Sb={class:"admin-profile"},Mb={class:"header"},Pb={class:"header-actions"},$b={class:"user-email"},Ob={class:"container"},Db={class:"section"},Rb={class:"section-header"},Nb={key:0,class:"loading"},Bb={key:1,class:"error"},Fb={key:2,class:"profile-details"},zb={class:"profile-field"},Ub={class:"field-value"},Hb={class:"profile-field"},Vb={class:"field-value"},Zb={class:"profile-field"},qb={class:"field-value"},Wb={class:"profile-field"},jb={class:"field-value"},Gb={__name:"AdminProfile",setup(e){const n=Zo(),i=br(),a=Lb(),s=$(!1),r=async()=>{try{await a.fetchProfile()}catch(m){console.error("Failed to load profile:",m)}},l=async m=>{try{await a.updateProfile(m),s.value=!1}catch(f){console.error("Failed to save profile:",f),alert("Failed to save profile. Please try again.")}},d=()=>{i.logout(),n.push({name:"Home"})},h=()=>{n.push({name:"AdminDashboard"})};return wn(()=>{r()}),(m,f)=>(_(),b("div",Sb,[u("header",Mb,[f[2]||(f[2]=u("h1",null,"My Profile",-1)),u("div",Pb,[u("span",$b,I(H(i).adminEmail),1),u("button",{onClick:d,class:"btn btn-secondary"},"Logout")])]),u("div",Ob,[u("div",Db,[u("div",Rb,[f[3]||(f[3]=u("h2",null,"Profile Information",-1)),u("button",{onClick:f[0]||(f[0]=v=>s.value=!0),class:"btn btn-primary"}," Edit Profile ")]),H(a).loading?(_(),b("div",Nb,"Loading profile...")):H(a).error?(_(),b("div",Bb,[u("p",null,I(H(a).error),1),u("button",{onClick:r,class:"btn btn-secondary"},"Retry")])):H(a).profile?(_(),b("div",Fb,[u("div",zb,[f[4]||(f[4]=u("label",null,"Name",-1)),u("div",Ub,I(H(a).profile.name||""),1)]),u("div",Hb,[f[5]||(f[5]=u("label",null,"Email",-1)),u("div",Vb,I(H(a).profile.email||""),1)]),u("div",Zb,[f[6]||(f[6]=u("label",null,"Phone",-1)),u("div",qb,I(H(a).profile.phone||""),1)]),u("div",Wb,[f[7]||(f[7]=u("label",null,"System Admin",-1)),u("div",jb,[u("span",{class:Ve(["badge",H(a).profile.isSystemAdmin?"badge-success":"badge-secondary"])},I(H(a).profile.isSystemAdmin?"Yes":"No"),3)])])])):B("",!0)]),u("div",{class:"section"},[u("button",{onClick:h,class:"btn btn-secondary"}," Back to Dashboard ")])]),Ne(Ib,{show:s.value,profile:H(a).profile,onClose:f[1]||(f[1]=v=>s.value=!1),onSubmit:l},null,8,["show","profile"])]))}},Kb=Ze(Gb,[["__scopeId","data-v-e8d20355"]]);function Yb(){const e=$(!1),n=$(""),i=$(""),a=$(null);return{showConfirmModal:e,confirmModalTitle:n,confirmModalMessage:i,showConfirm:(h,m,f)=>{n.value=h,i.value=m,a.value=f,e.value=!0},handleConfirmModalConfirm:()=>{e.value=!1,a.value&&(a.value(),a.value=null)},handleConfirmModalCancel:()=>{e.value=!1,a.value=null},closeConfirmModal:()=>{e.value=!1,a.value=null}}}const Ba=$({people:"Marshals",checkpoint:"Checkpoints",area:"Areas",checklist:"Checklists",course:"Course"}),Yu={people:{People:{singular:"Person",plural:"People"},Marshals:{singular:"Marshal",plural:"Marshals"},Volunteers:{singular:"Volunteer",plural:"Volunteers"},Helpers:{singular:"Helper",plural:"Helpers"},Staff:{singular:"Staff member",plural:"Staff"},Stewards:{singular:"Steward",plural:"Stewards"}},checkpoint:{Checkpoints:{singular:"Checkpoint",plural:"Checkpoints"},Stations:{singular:"Station",plural:"Stations"},Locations:{singular:"Location",plural:"Locations"}},area:{Areas:{singular:"Area",plural:"Areas"},Regions:{singular:"Region",plural:"Regions"},Zones:{singular:"Zone",plural:"Zones"}},checklist:{Checklists:{singular:"Checklist",plural:"Checklists"},Tasks:{singular:"Task",plural:"Tasks"}},course:{Course:{singular:"Course",plural:"Courses"},Route:{singular:"Route",plural:"Routes"},Track:{singular:"Track",plural:"Tracks"},Trail:{singular:"Trail",plural:"Trails"},Path:{singular:"Path",plural:"Paths"}}},ko={people:["Helpers","Marshals","People","Staff","Stewards","Volunteers"],checkpoint:["Checkpoints","Locations","Stations"],area:["Areas","Regions","Zones"],checklist:["Checklists","Tasks"],course:["Course","Path","Route","Track","Trail"]};function of(e){e&&(Ba.value={people:e.peopleTerm||"Marshals",checkpoint:e.checkpointTerm||"Checkpoints",area:e.areaTerm||"Areas",checklist:e.checklistTerm||"Checklists",course:e.courseTerm||"Course"})}const En=e=>e.toLowerCase(),Tn=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function mt(){const e=f=>{const v=Ba.value[f];return Yu[f]?.[v]?.singular||v},n=f=>{const v=Ba.value[f];return Yu[f]?.[v]?.plural||v},i=ne(()=>({person:e("people"),checkpoint:e("checkpoint"),area:e("area"),checklist:e("checklist"),course:e("course"),people:n("people"),checkpoints:n("checkpoint"),areas:n("area"),checklists:n("checklist"),courses:n("course")})),a=ne(()=>({person:En(e("people")),checkpoint:En(e("checkpoint")),area:En(e("area")),checklist:En(e("checklist")),course:En(e("course")),people:En(n("people")),checkpoints:En(n("checkpoint")),areas:En(n("area")),checklists:En(n("checklist")),courses:En(n("course"))})),s=ne(()=>({person:Tn(e("people")),checkpoint:Tn(e("checkpoint")),area:Tn(e("area")),checklist:Tn(e("checklist")),course:Tn(e("course")),people:Tn(n("people")),checkpoints:Tn(n("checkpoint")),areas:Tn(n("area")),checklists:Tn(n("checklist")),courses:Tn(n("course"))})),r=ne(()=>({course:i.value.course,checkpoints:i.value.checkpoints,areas:i.value.areas,marshals:i.value.people,checklists:i.value.checklists,notes:"Notes",details:"Event details"}));return{terms:i,termsLower:a,termsSentence:s,tabLabels:r,singular:e,plural:n,formatCount:(f,v)=>v===1?`1 ${e(f)}`:`${v} ${n(f)}`,lower:(f,v=!0)=>En(v?n(f):e(f)),title:(f,v=!0)=>v?n(f):e(f),sentence:(f,v=!0)=>Tn(v?n(f):e(f)),terminology:Ba}}const Jb=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Ka=e=>{if(!e)return"";const n=new Date(e),i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),r=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return`${i}-${a}-${s}T${r}:${l}`},Ya=e=>{if(!e||e.trim()==="")return!0;if(!/^[a-z]{1,20}[./][a-z]{1,20}[./][a-z]{1,20}$/.test(e))return!1;const i=e.includes("."),a=e.includes("/");return i!==a};function Xb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Co={exports:{}};var Qb=Co.exports,Ju;function ek(){return Ju||(Ju=1,(function(e,n){(function(i,a){a(n)})(Qb,(function(i){var a="1.9.4";function s(t){var o,c,p,y;for(c=1,p=arguments.length;c<p;c++){y=arguments[c];for(o in y)t[o]=y[o]}return t}var r=Object.create||(function(){function t(){}return function(o){return t.prototype=o,new t}})();function l(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var p=c.call(arguments,2);return function(){return t.apply(o,p.length?p.concat(c.call(arguments)):arguments)}}var d=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,o,c){var p,y,S,z;return z=function(){p=!1,y&&(S.apply(c,y),y=!1)},S=function(){p?y=arguments:(t.apply(c,arguments),setTimeout(z,o),p=!0)},S}function f(t,o,c){var p=o[1],y=o[0],S=p-y;return t===p&&c?t:((t-y)%S+S)%S+y}function v(){return!1}function k(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function x(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return x(t).split(/\s+/)}function P(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function R(t,o,c){var p=[];for(var y in t)p.push(encodeURIComponent(c?y.toUpperCase():y)+"="+encodeURIComponent(t[y]));return(!o||o.indexOf("?")===-1?"?":"&")+p.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function A(t,o){return t.replace(T,function(c,p){var y=o[p];if(y===void 0)throw new Error("No value provided for variable "+c);return typeof y=="function"&&(y=y(o)),y})}var g=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function C(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var w="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var O=0;function W(t){var o=+new Date,c=Math.max(0,16-(o-O));return O=o+c,window.setTimeout(t,c)}var V=window.requestAnimationFrame||E("RequestAnimationFrame")||W,se=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ge(t,o,c){if(c&&V===W)t.call(o);else return V.call(window,l(t,o))}function Se(t){t&&se.call(window,t)}var Me={__proto__:null,extend:s,create:r,bind:l,get lastId(){return d},stamp:h,throttle:m,wrapNum:f,falseFn:v,formatNum:k,trim:x,splitWords:M,setOptions:P,getParamString:R,template:A,isArray:g,indexOf:C,emptyImageUrl:w,requestFn:V,cancelFn:se,requestAnimFrame:ge,cancelAnimFrame:Se};function ie(){}ie.extend=function(t){var o=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,p=r(c);p.constructor=o,o.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(o[y]=this[y]);return t.statics&&s(o,t.statics),t.includes&&(ue(t.includes),s.apply(null,[p].concat(t.includes))),s(p,t),delete p.statics,delete p.includes,p.options&&(p.options=c.options?r(c.options):{},s(p.options,t.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,z=p._initHooks.length;S<z;S++)p._initHooks[S].call(this)}},o},ie.include=function(t){var o=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},ie.mergeOptions=function(t){return s(this.prototype.options,t),this},ie.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ue(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=g(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(t,o,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],o);else{t=M(t);for(var y=0,S=t.length;y<S;y++)this._on(t[y],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var p in t)this._off(p,t[p],o);else{t=M(t);for(var y=arguments.length===1,S=0,z=t.length;S<z;S++)y?this._off(t[S]):this._off(t[S],o,c)}return this},_on:function(t,o,c,p){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var y={fn:o,ctx:c};p&&(y.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(y)}},_off:function(t,o,c){var p,y,S;if(this._events&&(p=this._events[t],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,S=p.length;y<S;y++)p[y].fn=v;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var z=this._listens(t,o,c);if(z!==!1){var j=p[z];this._firingCount&&(j.fn=v,this._events[t]=p=p.slice()),p.splice(z,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var p=s({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var y=this._events[t];if(y){this._firingCount=this._firingCount+1||1;for(var S=0,z=y.length;S<z;S++){var j=y[S],Q=j.fn;j.once&&this.off(t,Q,j.ctx),Q.call(j.ctx||this,p)}this._firingCount--}}return c&&this._propagateEvent(p),this},listens:function(t,o,c,p){typeof t!="string"&&console.warn('"string" type argument expected');var y=o;typeof o!="function"&&(p=!!o,y=void 0,c=void 0);var S=this._events&&this._events[t];if(S&&S.length&&this._listens(t,y,c)!==!1)return!0;if(p){for(var z in this._eventParents)if(this._eventParents[z].listens(t,o,c,p))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var p=this._events[t]||[];if(!o)return!!p.length;c===this&&(c=void 0);for(var y=0,S=p.length;y<S;y++)if(p[y].fn===o&&p[y].ctx===c)return y;return!1},once:function(t,o,c){if(typeof t=="object")for(var p in t)this._on(p,t[p],o,!0);else{t=M(t);for(var y=0,S=t.length;y<S;y++)this._on(t[y],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var Ae=ie.extend(de);function pe(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var Ce=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};pe.prototype={clone:function(){return new pe(this.x,this.y)},add:function(t){return this.clone()._add(K(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(K(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new pe(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new pe(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ce(this.x),this.y=Ce(this.y),this},distanceTo:function(t){t=K(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=K(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=K(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function K(t,o,c){return t instanceof pe?t:g(t)?new pe(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new pe(t.x,t.y):new pe(t,o,c)}function he(t,o){if(t)for(var c=o?[t,o]:t,p=0,y=c.length;p<y;p++)this.extend(c[p])}he.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof pe||typeof t[0]=="number"||"x"in t)o=c=K(t);else if(t=Ee(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof pe?t=K(t):t=Ee(t),t instanceof he?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=Ee(t);var o=this.min,c=this.max,p=t.min,y=t.max,S=y.x>=o.x&&p.x<=c.x,z=y.y>=o.y&&p.y<=c.y;return S&&z},overlaps:function(t){t=Ee(t);var o=this.min,c=this.max,p=t.min,y=t.max,S=y.x>o.x&&p.x<c.x,z=y.y>o.y&&p.y<c.y;return S&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,p=Math.abs(o.x-c.x)*t,y=Math.abs(o.y-c.y)*t;return Ee(K(o.x-p,o.y-y),K(c.x+p,c.y+y))},equals:function(t){return t?(t=Ee(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Ee(t,o){return!t||t instanceof he?t:new he(t,o)}function Re(t,o){if(t)for(var c=o?[t,o]:t,p=0,y=c.length;p<y;p++)this.extend(c[p])}Re.prototype={extend:function(t){var o=this._southWest,c=this._northEast,p,y;if(t instanceof re)p=t,y=t;else if(t instanceof Re){if(p=t._southWest,y=t._northEast,!p||!y)return this}else return t?this.extend(ce(t)||me(t)):this;return!o&&!c?(this._southWest=new re(p.lat,p.lng),this._northEast=new re(y.lat,y.lng)):(o.lat=Math.min(p.lat,o.lat),o.lng=Math.min(p.lng,o.lng),c.lat=Math.max(y.lat,c.lat),c.lng=Math.max(y.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,p=Math.abs(o.lat-c.lat)*t,y=Math.abs(o.lng-c.lng)*t;return new Re(new re(o.lat-p,o.lng-y),new re(c.lat+p,c.lng+y))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof re||"lat"in t?t=ce(t):t=me(t);var o=this._southWest,c=this._northEast,p,y;return t instanceof Re?(p=t.getSouthWest(),y=t.getNorthEast()):p=y=t,p.lat>=o.lat&&y.lat<=c.lat&&p.lng>=o.lng&&y.lng<=c.lng},intersects:function(t){t=me(t);var o=this._southWest,c=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),S=y.lat>=o.lat&&p.lat<=c.lat,z=y.lng>=o.lng&&p.lng<=c.lng;return S&&z},overlaps:function(t){t=me(t);var o=this._southWest,c=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),S=y.lat>o.lat&&p.lat<c.lat,z=y.lng>o.lng&&p.lng<c.lng;return S&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=me(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function me(t,o){return t instanceof Re?t:new Re(t,o)}function re(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}re.prototype={equals:function(t,o){if(!t)return!1;t=ce(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+k(this.lat,t)+", "+k(this.lng,t)+")"},distanceTo:function(t){return G.distance(this,ce(t))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return me([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function ce(t,o,c){return t instanceof re?t:g(t)&&typeof t[0]!="object"?t.length===3?new re(t[0],t[1],t[2]):t.length===2?new re(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new re(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new re(t,o,c)}var U={latLngToPoint:function(t,o){var c=this.projection.project(t),p=this.scale(o);return this.transformation._transform(c,p)},pointToLatLng:function(t,o){var c=this.scale(o),p=this.transformation.untransform(t,c);return this.projection.unproject(p)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),p=this.transformation.transform(o.min,c),y=this.transformation.transform(o.max,c);return new he(p,y)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?f(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?f(t.lat,this.wrapLat,!0):t.lat,p=t.alt;return new re(c,o,p)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),p=o.lat-c.lat,y=o.lng-c.lng;if(p===0&&y===0)return t;var S=t.getSouthWest(),z=t.getNorthEast(),j=new re(S.lat-p,S.lng-y),Q=new re(z.lat-p,z.lng-y);return new Re(j,Q)}},G=s({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,p=t.lat*c,y=o.lat*c,S=Math.sin((o.lat-t.lat)*c/2),z=Math.sin((o.lng-t.lng)*c/2),j=S*S+Math.cos(p)*Math.cos(y)*z*z,Q=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*Q}}),Y=6378137,ke={R:Y,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,p=Math.max(Math.min(c,t.lat),-c),y=Math.sin(p*o);return new pe(this.R*t.lng*o,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(t){var o=180/Math.PI;return new re((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:(function(){var t=Y*Math.PI;return new he([-t,-t],[t,t])})()};function Je(t,o,c,p){if(g(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=p}Je.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new pe((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function D(t,o,c,p){return new Je(t,o,c,p)}var F=s({},G,{code:"EPSG:3857",projection:ke,transformation:(function(){var t=.5/(Math.PI*ke.R);return D(t,.5,-t,.5)})()}),Z=s({},F,{code:"EPSG:900913"});function oe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function le(t,o){var c="",p,y,S,z,j,Q;for(p=0,S=t.length;p<S;p++){for(j=t[p],y=0,z=j.length;y<z;y++)Q=j[y],c+=(y?"L":"M")+Q.x+" "+Q.y;c+=o?De.svg?"z":"x":""}return c||"M0 0"}var ae=document.documentElement.style,xe="ActiveXObject"in window,Le=xe&&!document.addEventListener,we="msLaunchUri"in navigator&&!("documentMode"in document),fe=an("webkit"),ze=an("android"),Te=an("android 2")||an("android 3"),Be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qe=ze&&an("Google")&&Be<537&&!("AudioNode"in window),Ge=!!window.opera,Xe=!we&&an("chrome"),Ue=an("gecko")&&!fe&&!Ge&&!xe,vt=!Xe&&an("safari"),Ct=an("phantom"),ft="OTransition"in ae,pt=navigator.platform.indexOf("Win")===0,Jt=xe&&"transition"in ae,Ut="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Te,gt="MozPerspective"in ae,X=!window.L_DISABLE_3D&&(Jt||Ut||gt)&&!ft&&!Ct,J=typeof orientation<"u"||an("mobile"),te=J&&fe,Fe=J&&Ut,Mt=!window.PointerEvent&&window.MSPointerEvent,on=!!(window.PointerEvent||Mt),Xt="ontouchstart"in window||!!window.TouchEvent,Cn=!window.L_NO_TOUCH&&(Xt||on),ti=J&&Ge,Vn=J&&Ue,ni=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zi=(function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return t})(),Ko=(function(){return!!document.createElement("canvas").getContext})(),Zn=!!(document.createElementNS&&oe("svg").createSVGRect),qn=!!Zn&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),si=!Zn&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}})(),Ui=navigator.platform.indexOf("Mac")===0,Hi=navigator.platform.indexOf("Linux")===0;function an(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var De={ie:xe,ielt9:Le,edge:we,webkit:fe,android:ze,android23:Te,androidStock:qe,opera:Ge,chrome:Xe,gecko:Ue,safari:vt,phantom:Ct,opera12:ft,win:pt,ie3d:Jt,webkit3d:Ut,gecko3d:gt,any3d:X,mobile:J,mobileWebkit:te,mobileWebkit3d:Fe,msPointer:Mt,pointer:on,touch:Cn,touchNative:Xt,mobileOpera:ti,mobileGecko:Vn,retina:ni,passiveEvents:zi,canvas:Ko,svg:Zn,vml:si,inlineSvg:qn,mac:Ui,linux:Hi},Wn=De.msPointer?"MSPointerDown":"pointerdown",vs=De.msPointer?"MSPointerMove":"pointermove",Ps=De.msPointer?"MSPointerUp":"pointerup",Vi=De.msPointer?"MSPointerCancel":"pointercancel",Zi={touchstart:Wn,touchmove:vs,touchend:Ps,touchcancel:Vi},Yo={touchstart:Pt,touchmove:ii,touchend:ii,touchcancel:ii},gs={},qi=!1;function Lr(t,o,c){return o==="touchstart"&&Er(),Yo[o]?(c=Yo[o].bind(this,c),t.addEventListener(Zi[o],c,!1),c):(console.warn("wrong event specified:",o),v)}function Jo(t,o,c){if(!Zi[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(Zi[o],c,!1)}function xr(t){gs[t.pointerId]=t}function Ar(t){gs[t.pointerId]&&(gs[t.pointerId]=t)}function Xo(t){delete gs[t.pointerId]}function Er(){qi||(document.addEventListener(Wn,xr,!0),document.addEventListener(vs,Ar,!0),document.addEventListener(Ps,Xo,!0),document.addEventListener(Vi,Xo,!0),qi=!0)}function ii(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in gs)o.touches.push(gs[c]);o.changedTouches=[o],t(o)}}function Pt(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Bt(o),ii(t,o)}function Tr(t){var o={},c,p;for(p in t)c=t[p],o[p]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Ir=200;function Qo(t,o){t.addEventListener("dblclick",o);var c=0,p;function y(S){if(S.detail!==1){p=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var z=na(S);if(!(z.some(function(Q){return Q instanceof HTMLLabelElement&&Q.attributes.for})&&!z.some(function(Q){return Q instanceof HTMLInputElement||Q instanceof HTMLSelectElement}))){var j=Date.now();j-c<=Ir?(p++,p===2&&o(Tr(S))):p=1,c=j}}}return t.addEventListener("click",y),{dblclick:o,simDblclick:y}}function Sr(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Wi=ri(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),At=ri(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ji=At==="webkitTransition"||At==="OTransition"?At+"End":"transitionend";function oi(t){return typeof t=="string"?document.getElementById(t):t}function jn(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(t,null);c=p?p[o]:null}return c==="auto"?null:c}function lt(t,o,c){var p=document.createElement(t);return p.className=o||"",c&&c.appendChild(p),p}function _t(t){var o=t.parentNode;o&&o.removeChild(t)}function $s(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Dn(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function _s(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function Gi(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=ai(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function Qe(t,o){if(t.classList!==void 0)for(var c=M(o),p=0,y=c.length;p<y;p++)t.classList.add(c[p]);else if(!Gi(t,o)){var S=ai(t);Ki(t,(S?S+" ":"")+o)}}function xt(t,o){t.classList!==void 0?t.classList.remove(o):Ki(t,x((" "+ai(t)+" ").replace(" "+o+" "," ")))}function Ki(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function ai(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function rn(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&Mr(t,o)}function Mr(t,o){var c=!1,p="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(p)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+p+"(opacity="+o+")"}function ri(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function Ln(t,o,c){var p=o||new pe(0,0);t.style[Wi]=(De.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(c?" scale("+c+")":"")}function Et(t,o){t._leaflet_pos=o,De.any3d?Ln(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Gn(t){return t._leaflet_pos||new pe(0,0)}var Os,Ds,Rs;if("onselectstart"in document)Os=function(){tt(window,"selectstart",Bt)},Ds=function(){ht(window,"selectstart",Bt)};else{var Ns=ri(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Os=function(){if(Ns){var t=document.documentElement.style;Rs=t[Ns],t[Ns]="none"}},Ds=function(){Ns&&(document.documentElement.style[Ns]=Rs,Rs=void 0)}}function Yi(){tt(window,"dragstart",Bt)}function Ji(){ht(window,"dragstart",Bt)}var li,Bs;function Xi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Fs(),li=t,Bs=t.style.outlineStyle,t.style.outlineStyle="none",tt(window,"keydown",Fs))}function Fs(){li&&(li.style.outlineStyle=Bs,li=void 0,Bs=void 0,ht(window,"keydown",Fs))}function ea(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Qi(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var eo={__proto__:null,TRANSFORM:Wi,TRANSITION:At,TRANSITION_END:ji,get:oi,getStyle:jn,create:lt,remove:_t,empty:$s,toFront:Dn,toBack:_s,hasClass:Gi,addClass:Qe,removeClass:xt,setClass:Ki,getClass:ai,setOpacity:rn,testProp:ri,setTransform:Ln,setPosition:Et,getPosition:Gn,get disableTextSelection(){return Os},get enableTextSelection(){return Ds},disableImageDrag:Yi,enableImageDrag:Ji,preventOutline:Xi,restoreOutline:Fs,getSizedParentNode:ea,getScale:Qi};function tt(t,o,c,p){if(o&&typeof o=="object")for(var y in o)to(t,y,o[y],c);else{o=M(o);for(var S=0,z=o.length;S<z;S++)to(t,o[S],c,p)}return this}var mn="_leaflet_events";function ht(t,o,c,p){if(arguments.length===1)ta(t),delete t[mn];else if(o&&typeof o=="object")for(var y in o)ui(t,y,o[y],c);else if(o=M(o),arguments.length===2)ta(t,function(j){return C(o,j)!==-1});else for(var S=0,z=o.length;S<z;S++)ui(t,o[S],c,p);return this}function ta(t,o){for(var c in t[mn]){var p=c.split(/\d/)[0];(!o||o(p))&&ui(t,p,null,null,c)}}var ci={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function to(t,o,c,p){var y=o+h(c)+(p?"_"+h(p):"");if(t[mn]&&t[mn][y])return this;var S=function(j){return c.call(p||t,j||window.event)},z=S;!De.touchNative&&De.pointer&&o.indexOf("touch")===0?S=Lr(t,o,S):De.touch&&o==="dblclick"?S=Qo(t,S):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(ci[o]||o,S,De.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(S=function(j){j=j||window.event,so(t,j)&&z(j)},t.addEventListener(ci[o],S,!1)):t.addEventListener(o,z,!1):t.attachEvent("on"+o,S),t[mn]=t[mn]||{},t[mn][y]=S}function ui(t,o,c,p,y){y=y||o+h(c)+(p?"_"+h(p):"");var S=t[mn]&&t[mn][y];if(!S)return this;!De.touchNative&&De.pointer&&o.indexOf("touch")===0?Jo(t,o,S):De.touch&&o==="dblclick"?Sr(t,S):"removeEventListener"in t?t.removeEventListener(ci[o]||o,S,!1):t.detachEvent("on"+o,S),t[mn][y]=null}function Kn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function no(t){return to(t,"wheel",Kn),this}function zs(t){return tt(t,"mousedown touchstart dblclick contextmenu",Kn),t._leaflet_disable_click=!0,this}function Bt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Yn(t){return Bt(t),Kn(t),this}function na(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function sa(t,o){if(!o)return new pe(t.clientX,t.clientY);var c=Qi(o),p=c.boundingClientRect;return new pe((t.clientX-p.left)/c.x-o.clientLeft,(t.clientY-p.top)/c.y-o.clientTop)}var Pr=De.linux&&De.chrome?window.devicePixelRatio:De.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ia(t){return De.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Pr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function so(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var $r={__proto__:null,on:tt,off:ht,stopPropagation:Kn,disableScrollPropagation:no,disableClickPropagation:zs,preventDefault:Bt,stop:Yn,getPropagationPath:na,getMousePosition:sa,getWheelDelta:ia,isExternalTarget:so,addListener:tt,removeListener:ht},oa=Ae.extend({run:function(t,o,c,p){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Gn(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ge(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),Et(this._el,c),this.fire("step")},_complete:function(){Se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ot=Ae.extend({options:{crs:F,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=P(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(ce(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=At&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),tt(this._proxy,ji,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(ce(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var p=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var p=this.getZoomScale(o),y=this.getSize().divideBy(2),S=t instanceof pe?t:this.latLngToContainerPoint(t),z=S.subtract(y).multiplyBy(1-1/p),j=this.containerPointToLatLng(y.add(z));return this.setView(j,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():me(t);var c=K(o.paddingTopLeft||o.padding||[0,0]),p=K(o.paddingBottomRight||o.padding||[0,0]),y=this.getBoundsZoom(t,!1,c.add(p));if(y=typeof o.maxZoom=="number"?Math.min(o.maxZoom,y):y,y===1/0)return{center:t.getCenter(),zoom:y};var S=p.subtract(c).divideBy(2),z=this.project(t.getSouthWest(),y),j=this.project(t.getNorthEast(),y),Q=this.unproject(z.add(j).divideBy(2).add(S),y);return{center:Q,zoom:y}},fitBounds:function(t,o){if(t=me(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=K(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new oa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){Qe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!De.any3d)return this.setView(t,o,c);this._stop();var p=this.project(this.getCenter()),y=this.project(t),S=this.getSize(),z=this._zoom;t=ce(t),o=o===void 0?z:o;var j=Math.max(S.x,S.y),Q=j*this.getZoomScale(z,o),ve=y.distanceTo(p)||1,Oe=1.42,Ke=Oe*Oe;function at(Rt){var wa=Rt?-1:1,Uf=Rt?Q:j,Hf=Q*Q-j*j+wa*Ke*Ke*ve*ve,Vf=2*Uf*Ke*ve,Gr=Hf/Vf,$c=Math.sqrt(Gr*Gr+1)-Gr,Zf=$c<1e-9?-18:Math.log($c);return Zf}function Qt(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function zt(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}function gn(Rt){return Qt(Rt)/zt(Rt)}var ln=at(0);function gi(Rt){return j*(zt(ln)/zt(ln+Oe*Rt))}function Nf(Rt){return j*(zt(ln)*gn(ln+Oe*Rt)-Qt(ln))/Ke}function Bf(Rt){return 1-Math.pow(1-Rt,1.5)}var Ff=Date.now(),Mc=(at(1)-ln)/Oe,zf=c.duration?1e3*c.duration:1e3*Mc*.8;function Pc(){var Rt=(Date.now()-Ff)/zf,wa=Bf(Rt)*Mc;Rt<=1?(this._flyToFrame=ge(Pc,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(Nf(wa)/ve)),z),this.getScaleZoom(j/gi(wa),z),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Pc.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=me(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),p=this._limitCenter(c,this._zoom,me(t));return c.equals(p)||this.panTo(p,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=K(o.paddingTopLeft||o.padding||[0,0]),p=K(o.paddingBottomRight||o.padding||[0,0]),y=this.project(this.getCenter()),S=this.project(t),z=this.getPixelBounds(),j=Ee([z.min.add(c),z.max.subtract(p)]),Q=j.getSize();if(!j.contains(S)){this._enforcingBounds=!0;var ve=S.subtract(j.getCenter()),Oe=j.extend(S).getSize().subtract(Q);y.x+=ve.x<0?-Oe.x:Oe.x,y.y+=ve.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(y),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),p=o.divideBy(2).round(),y=c.divideBy(2).round(),S=p.subtract(y);return!S.x&&!S.y?this:(t.animate&&t.pan?this.panBy(S):(t.pan&&this._rawPanBy(S),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,p=new re(o,c),y=p.toBounds(t.coords.accuracy*2),S=this._locateOptions;if(S.setView){var z=this.getBoundsZoom(y);this.setView(p,S.maxZoom?Math.min(z,S.maxZoom):z)}var j={latlng:p,bounds:y,timestamp:t.timestamp};for(var Q in t.coords)typeof t.coords[Q]=="number"&&(j[Q]=t.coords[Q]);this.fire("locationfound",j)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)_t(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),p=lt("div",c,o||this._mapPane);return t&&(this._panes[t]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new Re(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=me(t),c=K(c||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),S=this.getMaxZoom(),z=t.getNorthWest(),j=t.getSouthEast(),Q=this.getSize().subtract(c),ve=Ee(this.project(j,p),this.project(z,p)).getSize(),Oe=De.any3d?this.options.zoomSnap:1,Ke=Q.x/ve.x,at=Q.y/ve.y,Qt=o?Math.max(Ke,at):Math.min(Ke,at);return p=this.getScaleZoom(Qt,p),Oe&&(p=Math.round(p/(Oe/100))*(Oe/100),p=o?Math.ceil(p/Oe)*Oe:Math.floor(p/Oe)*Oe),Math.max(y,Math.min(S,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new pe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var p=c.zoom(t*c.scale(o));return isNaN(p)?1/0:p},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(ce(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(K(t),o)},layerPointToLatLng:function(t){var o=K(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(ce(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ce(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(me(t))},distance:function(t,o){return this.options.crs.distance(ce(t),ce(o))},containerPointToLayerPoint:function(t){return K(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return K(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(K(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(t)))},mouseEventToContainerPoint:function(t){return sa(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=oi(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");tt(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,Qe(t,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=jn(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Et(this._mapPane,new pe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qe(t.markerPane,"leaflet-zoom-hide"),Qe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){Et(this._mapPane,new pe(0,0));var p=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var y=this._zoom!==o;this._moveStart(y,c)._move(t,o)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,p){o===void 0&&(o=this._zoom);var y=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),p?c&&c.pinch&&this.fire("zoom",c):((y||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Et(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var o=t?ht:tt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Se(this._resizeRequest),this._resizeRequest=ge(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],p,y=o==="mouseout"||o==="mouseover",S=t.target||t.srcElement,z=!1;S;){if(p=this._targets[h(S)],p&&(o==="click"||o==="preclick")&&this._draggableMoved(p)){z=!0;break}if(p&&p.listens(o,!0)&&(y&&!so(S,t)||(c.push(p),y))||S===this._container)break;S=S.parentNode}return!c.length&&!z&&!y&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&Xi(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var p=s({},t);p.type="preclick",this._fireDOMEvent(p,p.type,c)}var y=this._findEventTargets(t,o);if(c){for(var S=[],z=0;z<c.length;z++)c[z].listens(o,!0)&&S.push(c[z]);y=S.concat(y)}if(y.length){o==="contextmenu"&&Bt(t);var j=y[0],Q={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ve=j.getLatLng&&(!j._radius||j._radius<=10);Q.containerPoint=ve?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(t),Q.layerPoint=this.containerPointToLayerPoint(Q.containerPoint),Q.latlng=ve?j.getLatLng():this.layerPointToLatLng(Q.layerPoint)}for(z=0;z<y.length;z++)if(y[z].fire(o,Q,!0),Q.originalEvent._stopped||y[z].options.bubblingMouseEvents===!1&&C(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Gn(this._mapPane)||new pe(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var p=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(p)},_latLngBoundsToNewLayerBounds:function(t,o,c){var p=this._getNewPixelOrigin(c,o);return Ee([this.project(t.getSouthWest(),o)._subtract(p),this.project(t.getNorthWest(),o)._subtract(p),this.project(t.getSouthEast(),o)._subtract(p),this.project(t.getNorthEast(),o)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var p=this.project(t,o),y=this.getSize().divideBy(2),S=new he(p.subtract(y),p.add(y)),z=this._getBoundsOffset(S,c,o);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?t:this.unproject(p.add(z),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),p=new he(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(p,o))},_getBoundsOffset:function(t,o,c){var p=Ee(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),y=p.min.subtract(t.min),S=p.max.subtract(t.max),z=this._rebound(y.x,-S.x),j=this._rebound(y.y,-S.y);return new pe(z,j)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),p=De.any3d?this.options.zoomSnap:1;return p&&(t=Math.round(t/p)*p),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=Wi,p=this._proxy.style[c];Ln(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),p===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();Ln(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(o),y=this._getCenterOffset(t)._divideBy(1-1/p);return c.animate!==!0&&!this.getSize().contains(y)?!1:(ge(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,p){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,Qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Or(t,o){return new ot(t,o)}var Zt=ie.extend({options:{position:"topright"},initialize:function(t){P(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),p=t._controlCorners[c];return Qe(o,"leaflet-control"),c.indexOf("bottom")!==-1?p.insertBefore(o,p.firstChild):p.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Us=function(t){return new Zt(t)};ot.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=lt("div",o+"control-container",this._container);function p(y,S){var z=o+y+" "+o+S;t[y+S]=lt("div",z,c)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)_t(this._controlCorners[t]);_t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var io=Zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,p){return c<p?-1:p<c?1:0}},initialize:function(t,o,c){P(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in t)this._addLayer(t[p],p);for(p in o)this._addLayer(o[p],p,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Zt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){Qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=lt("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),zs(o),no(o);var p=this._section=lt("section",t+"-list");c&&(this._map.on("click",this.collapse,this),tt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=lt("a",t+"-toggle",o);y.href="#",y.title="Layers",y.setAttribute("role","button"),tt(y,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Bt(S),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=lt("div",t+"-base",p),this._separator=lt("div",t+"-separator",p),this._overlaysList=lt("div",t+"-overlays",p),o.appendChild(p)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$s(this._baseLayersList),$s(this._overlaysList),this._layerControlInputs=[];var t,o,c,p,y=0;for(c=0;c<this._layers.length;c++)p=this._layers[c],this._addItem(p),o=o||p.overlay,t=t||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(t=t&&y>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(h(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=c,p.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),p;t.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=c):p=this._createRadioElement("leaflet-base-layers_"+h(this),c),this._layerControlInputs.push(p),p.layerId=h(t.layer),tt(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+t.name;var S=document.createElement("span");o.appendChild(S),S.appendChild(p),S.appendChild(y);var z=t.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,p=[],y=[];this._handlingClick=!0;for(var S=t.length-1;S>=0;S--)o=t[S],c=this._getLayer(o.layerId).layer,o.checked?p.push(c):o.checked||y.push(c);for(S=0;S<y.length;S++)this._map.hasLayer(y[S])&&this._map.removeLayer(y[S]);for(S=0;S<p.length;S++)this._map.hasLayer(p[S])||this._map.addLayer(p[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,p=this._map.getZoom(),y=t.length-1;y>=0;y--)o=t[y],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&p<c.options.minZoom||c.options.maxZoom!==void 0&&p>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,tt(t,"click",Bt),this.expand();var o=this;setTimeout(function(){ht(t,"click",Bt),o._preventClick=!1})}}),oo=function(t,o,c){return new io(t,o,c)},Hs=Zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=lt("div",o+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,p,y){var S=lt("a",c,p);return S.innerHTML=t,S.href="#",S.title=o,S.setAttribute("role","button"),S.setAttribute("aria-label",o),zs(S),tt(S,"click",Yn),tt(S,"click",y,this),tt(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";xt(this._zoomInButton,o),xt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Qe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Qe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});ot.mergeOptions({zoomControl:!0}),ot.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hs,this.addControl(this.zoomControl))});var Dr=function(t){return new Hs(t)},aa=Zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=lt("div",o),p=this.options;return this._addScales(p,o+"-line",c),t.on(p.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=lt("div",o,c)),t.imperial&&(this._iScale=lt("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,p,y;o>5280?(c=o/5280,p=this._getRoundNum(c),this._updateScale(this._iScale,p+" mi",p/c)):(y=this._getRoundNum(o),this._updateScale(this._iScale,y+" ft",y/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),Rr=function(t){return new aa(t)},Nr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ao=Zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?Nr+" ":"")+"Leaflet</a>"},initialize:function(t){P(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),zs(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});ot.mergeOptions({attributionControl:!0}),ot.addInitHook(function(){this.options.attributionControl&&new ao().addTo(this)});var ra=function(t){return new ao(t)};Zt.Layers=io,Zt.Zoom=Hs,Zt.Scale=aa,Zt.Attribution=ao,Us.layers=oo,Us.zoom=Dr,Us.scale=Rr,Us.attribution=ra;var vn=ie.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vn.addTo=function(t,o){return t.addHandler(o,this),this};var Br={Events:de},la=De.touch?"touchstart mousedown":"mousedown",xn=Ae.extend({options:{clickTolerance:3},initialize:function(t,o,c,p){P(this,p),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(tt(this._dragStartTarget,la,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),ht(this._dragStartTarget,la,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Gi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){xn._dragging===this&&this.finishDrag();return}if(!(xn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(xn._dragging=this,this._preventOutline&&Xi(this._element),Yi(),Os(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=ea(this._element);this._startPoint=new pe(o.clientX,o.clientY),this._startPos=Gn(this._element),this._parentScale=Qi(c);var p=t.type==="mousedown";tt(document,p?"mousemove":"touchmove",this._onMove,this),tt(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new pe(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Bt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Qe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Et(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){xt(document.body,"leaflet-dragging"),this._lastTarget&&(xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ht(document,"mousemove touchmove",this._onMove,this),ht(document,"mouseup touchend touchcancel",this._onUp,this),Ji(),Ds();var o=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ca(t,o,c){var p,y=[1,4,2,8],S,z,j,Q,ve,Oe,Ke,at;for(S=0,Oe=t.length;S<Oe;S++)t[S]._code=ye(t[S],o);for(j=0;j<4;j++){for(Ke=y[j],p=[],S=0,Oe=t.length,z=Oe-1;S<Oe;z=S++)Q=t[S],ve=t[z],Q._code&Ke?ve._code&Ke||(at=_e(ve,Q,Ke,o,c),at._code=ye(at,o),p.push(at)):(ve._code&Ke&&(at=_e(ve,Q,Ke,o,c),at._code=ye(at,o),p.push(at)),p.push(Q));t=p}return t}function ro(t,o){var c,p,y,S,z,j,Q,ve,Oe;if(!t||t.length===0)throw new Error("latlngs not passed");Tt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Ke=ce([0,0]),at=me(t),Qt=at.getNorthWest().distanceTo(at.getSouthWest())*at.getNorthEast().distanceTo(at.getNorthWest());Qt<1700&&(Ke=lo(t));var zt=t.length,gn=[];for(c=0;c<zt;c++){var ln=ce(t[c]);gn.push(o.project(ce([ln.lat-Ke.lat,ln.lng-Ke.lng])))}for(j=Q=ve=0,c=0,p=zt-1;c<zt;p=c++)y=gn[c],S=gn[p],z=y.y*S.x-S.y*y.x,Q+=(y.x+S.x)*z,ve+=(y.y+S.y)*z,j+=z*3;j===0?Oe=gn[0]:Oe=[Q/j,ve/j];var gi=o.unproject(K(Oe));return ce([gi.lat+Ke.lat,gi.lng+Ke.lng])}function lo(t){for(var o=0,c=0,p=0,y=0;y<t.length;y++){var S=ce(t[y]);o+=S.lat,c+=S.lng,p++}return ce([o/p,c/p])}var Fr={__proto__:null,clipPolygon:ca,polygonCenter:ro,centroid:lo};function ua(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=Ur(t,c),t=da(t,c),t}function di(t,o,c){return Math.sqrt(Dt(t,o,c,!0))}function zr(t,o,c){return Dt(t,o,c)}function da(t,o){var c=t.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(c);y[0]=y[c-1]=1,co(t,y,o,0,c-1);var S,z=[];for(S=0;S<c;S++)y[S]&&z.push(t[S]);return z}function co(t,o,c,p,y){var S=0,z,j,Q;for(j=p+1;j<=y-1;j++)Q=Dt(t[j],t[p],t[y],!0),Q>S&&(z=j,S=Q);S>c&&(o[z]=1,co(t,o,c,p,z),co(t,o,c,z,y))}function Ur(t,o){for(var c=[t[0]],p=1,y=0,S=t.length;p<S;p++)rt(t[p],t[y])>o&&(c.push(t[p]),y=p);return y<S-1&&c.push(t[S-1]),c}var N;function q(t,o,c,p,y){var S=p?N:ye(t,c),z=ye(o,c),j,Q,ve;for(N=z;;){if(!(S|z))return[t,o];if(S&z)return!1;j=S||z,Q=_e(t,o,j,c,y),ve=ye(Q,c),j===S?(t=Q,S=ve):(o=Q,z=ve)}}function _e(t,o,c,p,y){var S=o.x-t.x,z=o.y-t.y,j=p.min,Q=p.max,ve,Oe;return c&8?(ve=t.x+S*(Q.y-t.y)/z,Oe=Q.y):c&4?(ve=t.x+S*(j.y-t.y)/z,Oe=j.y):c&2?(ve=Q.x,Oe=t.y+z*(Q.x-t.x)/S):c&1&&(ve=j.x,Oe=t.y+z*(j.x-t.x)/S),new pe(ve,Oe,y)}function ye(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function rt(t,o){var c=o.x-t.x,p=o.y-t.y;return c*c+p*p}function Dt(t,o,c,p){var y=o.x,S=o.y,z=c.x-y,j=c.y-S,Q=z*z+j*j,ve;return Q>0&&(ve=((t.x-y)*z+(t.y-S)*j)/Q,ve>1?(y=c.x,S=c.y):ve>0&&(y+=z*ve,S+=j*ve)),z=t.x-y,j=t.y-S,p?z*z+j*j:new pe(y,S)}function Tt(t){return!g(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function ys(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tt(t)}function uc(t,o){var c,p,y,S,z,j,Q,ve;if(!t||t.length===0)throw new Error("latlngs not passed");Tt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Oe=ce([0,0]),Ke=me(t),at=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());at<1700&&(Oe=lo(t));var Qt=t.length,zt=[];for(c=0;c<Qt;c++){var gn=ce(t[c]);zt.push(o.project(ce([gn.lat-Oe.lat,gn.lng-Oe.lng])))}for(c=0,p=0;c<Qt-1;c++)p+=zt[c].distanceTo(zt[c+1])/2;if(p===0)ve=zt[0];else for(c=0,S=0;c<Qt-1;c++)if(z=zt[c],j=zt[c+1],y=z.distanceTo(j),S+=y,S>p){Q=(S-p)/y,ve=[j.x-Q*(j.x-z.x),j.y-Q*(j.y-z.y)];break}var ln=o.unproject(K(ve));return ce([ln.lat+Oe.lat,ln.lng+Oe.lng])}var hf={__proto__:null,simplify:ua,pointToSegmentDistance:di,closestPointOnSegment:zr,clipSegment:q,_getEdgeIntersection:_e,_getBitCode:ye,_sqClosestPointOnSegment:Dt,isFlat:Tt,_flat:ys,polylineCenter:uc},Hr={project:function(t){return new pe(t.lng,t.lat)},unproject:function(t){return new re(t.y,t.x)},bounds:new he([-180,-90],[180,90])},Vr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,p=t.lat*o,y=this.R_MINOR/c,S=Math.sqrt(1-y*y),z=S*Math.sin(p),j=Math.tan(Math.PI/4-p/2)/Math.pow((1-z)/(1+z),S/2);return p=-c*Math.log(Math.max(j,1e-10)),new pe(t.lng*o*c,p)},unproject:function(t){for(var o=180/Math.PI,c=this.R,p=this.R_MINOR/c,y=Math.sqrt(1-p*p),S=Math.exp(-t.y/c),z=Math.PI/2-2*Math.atan(S),j=0,Q=.1,ve;j<15&&Math.abs(Q)>1e-7;j++)ve=y*Math.sin(z),ve=Math.pow((1-ve)/(1+ve),y/2),Q=Math.PI/2-2*Math.atan(S*ve)-z,z+=Q;return new re(z*o,t.x*o/c)}},ff={__proto__:null,LonLat:Hr,Mercator:Vr,SphericalMercator:ke},pf=s({},G,{code:"EPSG:3395",projection:Vr,transformation:(function(){var t=.5/(Math.PI*Vr.R);return D(t,.5,-t,.5)})()}),dc=s({},G,{code:"EPSG:4326",projection:Hr,transformation:D(1/180,1,-1/180,.5)}),mf=s({},U,{projection:Hr,transformation:D(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,p=o.lat-t.lat;return Math.sqrt(c*c+p*p)},infinite:!0});U.Earth=G,U.EPSG3395=pf,U.EPSG3857=F,U.EPSG900913=Z,U.EPSG4326=dc,U.Simple=mf;var An=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});ot.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=h(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?g(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=h(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;t=y.minZoom===void 0?t:Math.min(t,y.minZoom),o=y.maxZoom===void 0?o:Math.max(o,y.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hi=An.extend({initialize:function(t,o){P(this,o),this._layers={};var c,p;if(t)for(c=0,p=t.length;c<p;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,p;for(c in this._layers)p=this._layers[c],p[t]&&p[t].apply(p,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),vf=function(t,o){return new hi(t,o)},Jn=hi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),hi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),hi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Re;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),gf=function(t,o){return new Jn(t,o)},fi=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){P(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(p,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(t,o){var c=this.options,p=c[o+"Size"];typeof p=="number"&&(p=[p,p]);var y=K(p),S=K(o==="shadow"&&c.shadowAnchor||c.iconAnchor||y&&y.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),S&&(t.style.marginLeft=-S.x+"px",t.style.marginTop=-S.y+"px"),y&&(t.style.width=y.x+"px",t.style.height=y.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return De.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function _f(t){return new fi(t)}var uo=fi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof uo.imagePath!="string"&&(uo.imagePath=this._detectIconPath()),(this.options.imagePath||uo.imagePath)+fi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,p,y){var S=p.exec(c);return S&&S[y]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=lt("div","leaflet-default-icon-path",document.body),o=jn(t,"background-image")||jn(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),hc=vn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new xn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,S=Gn(o._icon),z=c.getPixelBounds(),j=c.getPixelOrigin(),Q=Ee(z.min._subtract(j).add(y),z.max._subtract(j).subtract(y));if(!Q.contains(S)){var ve=K((Math.max(Q.max.x,S.x)-Q.max.x)/(z.max.x-Q.max.x)-(Math.min(Q.min.x,S.x)-Q.min.x)/(z.min.x-Q.min.x),(Math.max(Q.max.y,S.y)-Q.max.y)/(z.max.y-Q.max.y)-(Math.min(Q.min.y,S.y)-Q.min.y)/(z.min.y-Q.min.y)).multiplyBy(p);c.panBy(ve,{animate:!1}),this._draggable._newPos._add(ve),this._draggable._startPos._add(ve),Et(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ge(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Se(this._panRequest),this._panRequest=ge(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,p=Gn(o._icon),y=o._map.layerPointToLatLng(p);c&&Et(c,p),o._latlng=y,t.latlng=y,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ha=An.extend({options:{icon:new uo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){P(this,o),this._latlng=ce(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=ce(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),p=!1;c!==this._icon&&(this._icon&&this._removeIcon(),p=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),Qe(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&tt(c,"focus",this._panOnFocus,this);var y=t.icon.createShadow(this._shadow),S=!1;y!==this._shadow&&(this._removeShadow(),S=!0),y&&(Qe(y,o),y.alt=""),this._shadow=y,t.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&S&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(this._icon,"focus",this._panOnFocus,this),_t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_t(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Et(this._icon,t),this._shadow&&Et(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(Qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hc)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hc(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&rn(this._icon,t),this._shadow&&rn(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?K(o.iconSize):K(0,0),p=o.iconAnchor?K(o.iconAnchor):K(0,0);t.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:c.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yf(t,o){return new ha(t,o)}var bs=An.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return P(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fa=bs.extend({options:{fill:!0,radius:10},initialize:function(t,o){P(this,o),this._latlng=ce(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=ce(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return bs.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),p=[t+c,o+c];this._pxBounds=new he(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bf(t,o){return new fa(t,o)}var Zr=fa.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),P(this,o),this._latlng=ce(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Re(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:bs.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,p=c.options.crs;if(p.distance===G.distance){var y=Math.PI/180,S=this._mRadius/G.R/y,z=c.project([o+S,t]),j=c.project([o-S,t]),Q=z.add(j).divideBy(2),ve=c.unproject(Q).lat,Oe=Math.acos((Math.cos(S*y)-Math.sin(o*y)*Math.sin(ve*y))/(Math.cos(o*y)*Math.cos(ve*y)))/y;(isNaN(Oe)||Oe===0)&&(Oe=S/Math.cos(Math.PI/180*o)),this._point=Q.subtract(c.getPixelOrigin()),this._radius=isNaN(Oe)?0:Q.x-c.project([ve,t-Oe]).x,this._radiusY=Q.y-z.y}else{var Ke=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Ke).x}this._updateBounds()}});function kf(t,o,c){return new Zr(t,o,c)}var Xn=bs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){P(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,p=Dt,y,S,z=0,j=this._parts.length;z<j;z++)for(var Q=this._parts[z],ve=1,Oe=Q.length;ve<Oe;ve++){y=Q[ve-1],S=Q[ve];var Ke=p(t,y,S,!0);Ke<o&&(o=Ke,c=p(t,y,S))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=ce(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Re,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Tt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=Tt(t),p=0,y=t.length;p<y;p++)c?(o[p]=ce(t[p]),this._bounds.extend(o[p])):o[p]=this._convertLatLngs(t[p]);return o},_project:function(){var t=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new pe(t,t);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var p=t[0]instanceof re,y=t.length,S,z;if(p){for(z=[],S=0;S<y;S++)z[S]=this._map.latLngToLayerPoint(t[S]),c.extend(z[S]);o.push(z)}else for(S=0;S<y;S++)this._projectLatlngs(t[S],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,p,y,S,z,j,Q;for(c=0,y=0,S=this._rings.length;c<S;c++)for(Q=this._rings[c],p=0,z=Q.length;p<z-1;p++)j=q(Q[p],Q[p+1],t,p,!0),j&&(o[y]=o[y]||[],o[y].push(j[0]),(j[1]!==Q[p+1]||p===z-2)&&(o[y].push(j[1]),y++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,p=t.length;c<p;c++)t[c]=ua(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,p,y,S,z,j,Q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,S=this._parts.length;c<S;c++)for(j=this._parts[c],p=0,z=j.length,y=z-1;p<z;y=p++)if(!(!o&&p===0)&&di(t,j[y],j[p])<=Q)return!0;return!1}});function wf(t,o){return new Xn(t,o)}Xn._flat=ys;var pi=Xn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=Xn.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof re&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){Xn.prototype._setLatLngs.call(this,t),Tt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new pe(o,o);if(t=new he(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,S;p<y;p++)S=ca(this._rings[p],t,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,p,y,S,z,j,Q,ve;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(S=0,Q=this._parts.length;S<Q;S++)for(c=this._parts[S],z=0,ve=c.length,j=ve-1;z<ve;j=z++)p=c[z],y=c[j],p.y>t.y!=y.y>t.y&&t.x<(y.x-p.x)*(t.y-p.y)/(y.y-p.y)+p.x&&(o=!o);return o||Xn.prototype._containsPoint.call(this,t,!0)}});function Cf(t,o){return new pi(t,o)}var Qn=Jn.extend({initialize:function(t,o){P(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=g(t)?t:t.features,c,p,y;if(o){for(c=0,p=o.length;c<p;c++)y=o[c],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var S=this.options;if(S.filter&&!S.filter(t))return this;var z=pa(t,S);return z?(z.feature=ga(t),z.defaultOptions=z.options,this.resetStyle(z),S.onEachFeature&&S.onEachFeature(t,z),this.addLayer(z)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function pa(t,o){var c=t.type==="Feature"?t.geometry:t,p=c?c.coordinates:null,y=[],S=o&&o.pointToLayer,z=o&&o.coordsToLatLng||qr,j,Q,ve,Oe;if(!p&&!c)return null;switch(c.type){case"Point":return j=z(p),fc(S,t,j,o);case"MultiPoint":for(ve=0,Oe=p.length;ve<Oe;ve++)j=z(p[ve]),y.push(fc(S,t,j,o));return new Jn(y);case"LineString":case"MultiLineString":return Q=ma(p,c.type==="LineString"?0:1,z),new Xn(Q,o);case"Polygon":case"MultiPolygon":return Q=ma(p,c.type==="Polygon"?1:2,z),new pi(Q,o);case"GeometryCollection":for(ve=0,Oe=c.geometries.length;ve<Oe;ve++){var Ke=pa({geometry:c.geometries[ve],type:"Feature",properties:t.properties},o);Ke&&y.push(Ke)}return new Jn(y);case"FeatureCollection":for(ve=0,Oe=c.features.length;ve<Oe;ve++){var at=pa(c.features[ve],o);at&&y.push(at)}return new Jn(y);default:throw new Error("Invalid GeoJSON object.")}}function fc(t,o,c,p){return t?t(o,c):new ha(c,p&&p.markersInheritOptions&&p)}function qr(t){return new re(t[1],t[0],t[2])}function ma(t,o,c){for(var p=[],y=0,S=t.length,z;y<S;y++)z=o?ma(t[y],o-1,c):(c||qr)(t[y]),p.push(z);return p}function Wr(t,o){return t=ce(t),t.alt!==void 0?[k(t.lng,o),k(t.lat,o),k(t.alt,o)]:[k(t.lng,o),k(t.lat,o)]}function va(t,o,c,p){for(var y=[],S=0,z=t.length;S<z;S++)y.push(o?va(t[S],Tt(t[S])?0:o-1,c,p):Wr(t[S],p));return!o&&c&&y.length>0&&y.push(y[0].slice()),y}function mi(t,o){return t.feature?s({},t.feature,{geometry:o}):ga(o)}function ga(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var jr={toGeoJSON:function(t){return mi(this,{type:"Point",coordinates:Wr(this.getLatLng(),t)})}};ha.include(jr),Zr.include(jr),fa.include(jr),Xn.include({toGeoJSON:function(t){var o=!Tt(this._latlngs),c=va(this._latlngs,o?1:0,!1,t);return mi(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),pi.include({toGeoJSON:function(t){var o=!Tt(this._latlngs),c=o&&!Tt(this._latlngs[0]),p=va(this._latlngs,c?2:o?1:0,!0,t);return o||(p=[p]),mi(this,{type:(c?"Multi":"")+"Polygon",coordinates:p})}}),hi.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),mi(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var S=y.toGeoJSON(t);if(c)p.push(S.geometry);else{var z=ga(S);z.type==="FeatureCollection"?p.push.apply(p,z.features):p.push(z)}}}),c?mi(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function pc(t,o){return new Qn(t,o)}var Lf=pc,_a=An.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=me(o),P(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Dn(this._image),this},bringToBack:function(){return this._map&&_s(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=me(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:lt("img");if(Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ln(this._image,c,o)},_reset:function(){var t=this._image,o=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Et(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),xf=function(t,o,c){return new _a(t,o,c)},mc=_a.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:lt("video");if(Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),p=[],y=0;y<c.length;y++)p.push(c[y].src);this._url=c.length>0?p:[o.src];return}g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var z=lt("source");z.src=this._url[S],o.appendChild(z)}}});function Af(t,o,c){return new mc(t,o,c)}var vc=_a.extend({_initImage:function(){var t=this._image=this._url;Qe(t,"leaflet-image-layer"),this._zoomAnimated&&Qe(t,"leaflet-zoom-animated"),this.options.className&&Qe(t,this.options.className),t.onselectstart=v,t.onmousemove=v}});function Ef(t,o,c){return new vc(t,o,c)}var Rn=An.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof re||g(t))?(this._latlng=ce(t),P(this,o)):(P(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(l(_t,void 0,this._container),200)):_t(this._container),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ce(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Dn(this._container),this},bringToBack:function(){return this._map&&_s(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Jn){o=null;var c=this._source._layers;for(var p in c)if(c[p]._map){o=c[p];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=K(this.options.offset),c=this._getAnchor();this._zoomAnimated?Et(this._container,t.add(c)):o=o.add(t).add(c);var p=this._containerBottom=-o.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ot.include({_initOverlay:function(t,o,c,p){var y=o;return y instanceof t||(y=new t(p).setContent(o)),c&&y.setLatLng(c),y}}),An.include({_initOverlay:function(t,o,c,p){var y=c;return y instanceof t?(P(y,p),y._source=this):(y=o&&!p?o:new t(p,this),y.setContent(c)),y}});var ya=Rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Rn.prototype.openOn.call(this,t)},onAdd:function(t){Rn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bs||this._source.on("preclick",Kn))},onRemove:function(t){Rn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bs||this._source.off("preclick",Kn))},getEvents:function(){var t=Rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=lt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=lt("div",t+"-content-wrapper",o);if(this._contentNode=lt("div",t+"-content",c),zs(o),no(this._contentNode),tt(o,"contextmenu",Kn),this._tipContainer=lt("div",t+"-tip-container",o),this._tip=lt("div",t+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=lt("a",t+"-close-button",o);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',tt(p,"click",function(y){Bt(y),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var p=t.offsetHeight,y=this.options.maxHeight,S="leaflet-popup-scrolled";y&&p>y?(o.height=y+"px",Qe(t,S)):xt(t,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();Et(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(jn(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,p=this._containerWidth,y=new pe(this._containerLeft,-c-this._containerBottom);y._add(Gn(this._container));var S=t.layerPointToContainerPoint(y),z=K(this.options.autoPanPadding),j=K(this.options.autoPanPaddingTopLeft||z),Q=K(this.options.autoPanPaddingBottomRight||z),ve=t.getSize(),Oe=0,Ke=0;S.x+p+Q.x>ve.x&&(Oe=S.x+p-ve.x+Q.x),S.x-Oe-j.x<0&&(Oe=S.x-j.x),S.y+c+Q.y>ve.y&&(Ke=S.y+c-ve.y+Q.y),S.y-Ke-j.y<0&&(Ke=S.y-j.y),(Oe||Ke)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Oe,Ke]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Tf=function(t,o){return new ya(t,o)};ot.mergeOptions({closePopupOnClick:!0}),ot.include({openPopup:function(t,o,c){return this._initOverlay(ya,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),An.include({bindPopup:function(t,o){return this._popup=this._initOverlay(ya,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Jn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Yn(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof bs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ba=Rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Rn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Rn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Rn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,p=this._map,y=this._container,S=p.latLngToContainerPoint(p.getCenter()),z=p.layerPointToContainerPoint(t),j=this.options.direction,Q=y.offsetWidth,ve=y.offsetHeight,Oe=K(this.options.offset),Ke=this._getAnchor();j==="top"?(o=Q/2,c=ve):j==="bottom"?(o=Q/2,c=0):j==="center"?(o=Q/2,c=ve/2):j==="right"?(o=0,c=ve/2):j==="left"?(o=Q,c=ve/2):z.x<S.x?(j="right",o=0,c=ve/2):(j="left",o=Q+(Oe.x+Ke.x)*2,c=ve/2),t=t.subtract(K(o,c,!0)).add(Oe).add(Ke),xt(y,"leaflet-tooltip-right"),xt(y,"leaflet-tooltip-left"),xt(y,"leaflet-tooltip-top"),xt(y,"leaflet-tooltip-bottom"),Qe(y,"leaflet-tooltip-"+j),Et(y,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&rn(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),If=function(t,o){return new ba(t,o)};ot.include({openTooltip:function(t,o,c){return this._initOverlay(ba,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),An.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ba,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Jn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(tt(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),tt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,p;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),p=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(o)}});var gc=fi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?($s(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var p=K(c.bgPos);o.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Sf(t){return new gc(t)}fi.Default=uo;var ho=An.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){P(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),_t(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Dn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_s(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof pe?t:new pe(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),p=0,y=o.length,S;p<y;p++)S=o[p].style.zIndex,o[p]!==this._container&&S&&(c=t(c,+S));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){rn(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var S=Math.min(1,(t-y.loaded)/200);rn(y.el,S),S<1?o=!0:(y.active?c=!0:this._onOpaqueTile(y),y.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Se(this._fadeFrame),this._fadeFrame=ge(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(_t(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var p=this._levels[t],y=this._map;return p||(p=this._levels[t]={},p.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=o,p.origin=y.project(y.unproject(y.getPixelOrigin()),t).round(),p.zoom=t,this._setZoomTransform(p,y.getCenter(),y.getZoom()),v(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var p=o.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)_t(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,p){var y=Math.floor(t/2),S=Math.floor(o/2),z=c-1,j=new pe(+y,+S);j.z=+z;var Q=this._tileCoordsToKey(j),ve=this._tiles[Q];return ve&&ve.active?(ve.retain=!0,!0):(ve&&ve.loaded&&(ve.retain=!0),z>p?this._retainParent(y,S,z,p):!1)},_retainChildren:function(t,o,c,p){for(var y=2*t;y<2*t+2;y++)for(var S=2*o;S<2*o+2;S++){var z=new pe(y,S);z.z=c+1;var j=this._tileCoordsToKey(z),Q=this._tiles[j];if(Q&&Q.active){Q.retain=!0;continue}else Q&&Q.loaded&&(Q.retain=!0);c+1<p&&this._retainChildren(y,S,c+1,p)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,p){var y=Math.round(o);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var S=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||S)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var p=this._map.getZoomScale(c,t.zoom),y=t.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(o,c)).round();De.any3d?Ln(t.el,y,p):Et(t.el,y)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],p).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],p).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],p).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],p).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),p=o.getZoomScale(c,this._tileZoom),y=o.project(t,this._tileZoom).floor(),S=o.getSize().divideBy(p*2);return new he(y.subtract(S),y.add(S))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(t),y=this._pxBoundsToTileRange(p),S=y.getCenter(),z=[],j=this.options.keepBuffer,Q=new he(y.getBottomLeft().subtract([j,-j]),y.getTopRight().add([j,-j]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ve in this._tiles){var Oe=this._tiles[ve].coords;(Oe.z!==this._tileZoom||!Q.contains(new pe(Oe.x,Oe.y)))&&(this._tiles[ve].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var Ke=y.min.y;Ke<=y.max.y;Ke++)for(var at=y.min.x;at<=y.max.x;at++){var Qt=new pe(at,Ke);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var zt=this._tiles[this._tileCoordsToKey(Qt)];zt?zt.current=!0:z.push(Qt)}}if(z.sort(function(ln,gi){return ln.distanceTo(S)-gi.distanceTo(S)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gn=document.createDocumentFragment();for(at=0;at<z.length;at++)this._addTile(z[at],gn);this._level.el.appendChild(gn)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(t);return me(this.options.bounds).overlaps(p)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),p=t.scaleBy(c),y=p.add(c),S=o.unproject(p,t.z),z=o.unproject(y,t.z);return[S,z]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new Re(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new pe(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(_t(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Qe(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=v,t.onmousemove=v,De.ielt9&&this.options.opacity<1&&rn(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),p=this._tileCoordsToKey(t),y=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(y),this.createTile.length<2&&ge(l(this._tileReady,this,t,null,y)),Et(y,c),this._tiles[p]={el:y,coords:t,current:!0},o.appendChild(y),this.fire("tileloadstart",{tile:y,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var p=this._tileCoordsToKey(t);c=this._tiles[p],c&&(c.loaded=+new Date,this._map._fadeAnimated?(rn(c.el,0),Se(this._fadeFrame),this._fadeFrame=ge(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(Qe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?ge(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new pe(this._wrapX?f(t.x,this._wrapX):t.x,this._wrapY?f(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new he(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Mf(t){return new ho(t)}var vi=ho.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=P(this,o),o.detectRetina&&De.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return tt(c,"load",l(this._tileOnLoad,this,o,c)),tt(c,"error",l(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:De.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return A(this._url,s(o,this.options))},_tileOnLoad:function(t,o){De.ielt9?setTimeout(l(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var p=this.options.errorTileUrl;p&&o.getAttribute("src")!==p&&(o.src=p),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,p=this.options.zoomOffset;return c&&(t=o-t),t+p},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=v,o.onerror=v,!o.complete)){o.src=w;var c=this._tiles[t].coords;_t(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",w),ho.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===w))return ho.prototype._tileReady.call(this,t,o,c)}});function _c(t,o){return new vi(t,o)}var yc=vi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=s({},this.defaultWmsParams);for(var p in o)p in this.options||(c[p]=o[p]);o=P(this,o);var y=o.detectRetina&&De.retina?2:1,S=this.getTileSize();c.width=S.x*y,c.height=S.y*y,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,vi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,p=Ee(c.project(o[0]),c.project(o[1])),y=p.min,S=p.max,z=(this._wmsVersion>=1.3&&this._crs===dc?[y.y,y.x,S.y,S.x]:[y.x,y.y,S.x,S.y]).join(","),j=vi.prototype.getTileUrl.call(this,t);return j+R(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(t,o){return s(this.wmsParams,t),o||this.redraw(),this}});function Pf(t,o){return new yc(t,o)}vi.WMS=yc,_c.wms=Pf;var es=An.extend({options:{padding:.1},initialize:function(t){P(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,o),S=p.multiplyBy(-c).add(y).subtract(this._map._getNewPixelOrigin(t,o));De.any3d?Ln(this._container,S,c):Et(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new he(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bc=es.extend({options:{tolerance:0},getEvents:function(){var t=es.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){es.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");tt(t,"mousemove",this._onMouseMove,this),tt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),tt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Se(this._redrawRequest),delete this._ctx,_t(this._container),ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){es.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),p=De.retina?2:1;Et(o,t.min),o.width=p*c.x,o.height=p*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){es.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,p=o.prev;c?c.prev=p:this._drawLast=p,p?p.next=c:this._drawFirst=c,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],p,y;for(y=0;y<o.length;y++){if(p=Number(o[y]),isNaN(p))return;c.push(p)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ge(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)t=p.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,p,y,S,z=t._parts,j=z.length,Q=this._ctx;if(j){for(Q.beginPath(),c=0;c<j;c++){for(p=0,y=z[c].length;p<y;p++)S=z[c][p],Q[p?"lineTo":"moveTo"](S.x,S.y);o&&Q.closePath()}this._fillStroke(Q,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,p=Math.max(Math.round(t._radius),1),y=(Math.max(Math.round(t._radiusY),1)||p)/p;y!==1&&(c.save(),c.scale(1,y)),c.beginPath(),c.arc(o.x,o.y/y,p,0,Math.PI*2,!1),y!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,p,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(p=c);this._fireEvent(p?[p]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(xt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,p,y=this._drawFirst;y;y=y.next)c=y.layer,c.options.interactive&&c._containsPoint(o)&&(p=c);p!==this._hoveredLayer&&(this._handleMouseOut(t),p&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([p],t,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,p=o.prev;if(c)c.prev=p;else return;p?p.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,p=o.prev;if(p)p.next=c;else return;c?c.prev=p:p&&(this._drawLast=p),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function kc(t){return De.canvas?new bc(t):null}var fo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),$f={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(es.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=fo("shape");Qe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=fo("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;_t(o),t.removeInteractiveTarget(o),delete this._layers[h(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,p=t.options,y=t._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(o||(o=t._stroke=fo("stroke")),y.appendChild(o),o.weight=p.weight+"px",o.color=p.color,o.opacity=p.opacity,p.dashArray?o.dashStyle=g(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=p.lineCap.replace("butt","flat"),o.joinstyle=p.lineJoin):o&&(y.removeChild(o),t._stroke=null),p.fill?(c||(c=t._fill=fo("fill")),y.appendChild(c),c.color=p.fillColor||p.color,c.opacity=p.fillOpacity):c&&(y.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),p=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+p+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){Dn(t._container)},_bringToBack:function(t){_s(t._container)}},ka=De.vml?fo:oe,po=es.extend({_initContainer:function(){this._container=ka("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ka("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_t(this._container),ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){es.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Et(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=ka("path");t.options.className&&Qe(o,t.options.className),t.options.interactive&&Qe(o,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){_t(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,le(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),p=Math.max(Math.round(t._radiusY),1)||c,y="a"+c+","+p+" 0 1,0 ",S=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+y+c*2+",0 "+y+-c*2+",0 ";this._setPath(t,S)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){Dn(t._path)},_bringToBack:function(t){_s(t._path)}});De.vml&&po.include($f);function wc(t){return De.svg||De.vml?new po(t):null}ot.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&kc(t)||wc(t)}});var Cc=pi.extend({initialize:function(t,o){pi.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=me(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Of(t,o){return new Cc(t,o)}po.create=ka,po.pointsToPath=le,Qn.geometryToLayer=pa,Qn.coordsToLatLng=qr,Qn.coordsToLatLngs=ma,Qn.latLngToCoords=Wr,Qn.latLngsToCoords=va,Qn.getFeature=mi,Qn.asFeature=ga,ot.mergeOptions({boxZoom:!0});var Lc=vn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Os(),Yi(),this._startPoint=this._map.mouseEventToContainerPoint(t),tt(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),Qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new he(this._point,this._startPoint),c=o.getSize();Et(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(_t(this._box),xt(this._container,"leaflet-crosshair")),Ds(),Ji(),ht(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new Re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ot.addInitHook("addHandler","boxZoom",Lc),ot.mergeOptions({doubleClickZoom:!0});var xc=vn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),p=o.options.zoomDelta,y=t.originalEvent.shiftKey?c-p:c+p;o.options.doubleClickZoom==="center"?o.setZoom(y):o.setZoomAround(t.containerPoint,y)}});ot.addInitHook("addHandler","doubleClickZoom",xc),ot.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ac=vn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new xn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xt(this._map._container,"leaflet-grab"),xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=me(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-o+c)%t+o-c,S=(p+o+c)%t-o-c,z=Math.abs(y+c)<Math.abs(S+c)?y:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(t){var o=this._map,c=o.options,p=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),p)o.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,z=c.easeLinearity,j=y.multiplyBy(z/S),Q=j.distanceTo([0,0]),ve=Math.min(c.inertiaMaxSpeed,Q),Oe=j.multiplyBy(ve/Q),Ke=ve/(c.inertiaDeceleration*z),at=Oe.multiplyBy(-Ke/2).round();!at.x&&!at.y?o.fire("moveend"):(at=o._limitOffset(at,o.options.maxBounds),ge(function(){o.panBy(at,{duration:Ke,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});ot.addInitHook("addHandler","dragging",Ac),ot.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ec=vn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),tt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,p=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(p,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,p,y;for(p=0,y=c.left.length;p<y;p++)o[c.left[p]]=[-1*t,0];for(p=0,y=c.right.length;p<y;p++)o[c.right[p]]=[t,0];for(p=0,y=c.down.length;p<y;p++)o[c.down[p]]=[0,t];for(p=0,y=c.up.length;p<y;p++)o[c.up[p]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,p,y;for(p=0,y=c.zoomIn.length;p<y;p++)o[c.zoomIn[p]]=t;for(p=0,y=c.zoomOut.length;p<y;p++)o[c.zoomOut[p]]=-t},_addHooks:function(){tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,p;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(p=this._panKeys[o],t.shiftKey&&(p=K(p).multiplyBy(3)),c.options.maxBounds&&(p=c._limitOffset(K(p),c.options.maxBounds)),c.options.worldCopyJump){var y=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(p)));c.panTo(y)}else c.panBy(p)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Yn(t)}}});ot.addInitHook("addHandler","keyboard",Ec),ot.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tc=vn.extend({addHooks:function(){tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=ia(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var p=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),Yn(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,S=c?Math.ceil(y/c)*c:y,z=t._limitZoom(o+(this._delta>0?S:-S))-o;this._delta=0,this._startTime=null,z&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+z):t.setZoomAround(this._lastMousePos,o+z))}});ot.addInitHook("addHandler","scrollWheelZoom",Tc);var Df=600;ot.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var Ic=vn.extend({addHooks:function(){tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new pe(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(tt(document,"touchend",Bt),tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Df),tt(document,"touchend touchcancel contextmenu",this._cancel,this),tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ht(document,"touchend",Bt),ht(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new pe(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});ot.addInitHook("addHandler","tapHold",Ic),ot.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var Sc=vn.extend({addHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),p=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(p)._divideBy(2))),this._startDist=c.distanceTo(p),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),tt(document,"touchmove",this._onTouchMove,this),tt(document,"touchend touchcancel",this._onTouchEnd,this),Bt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),p=o.mouseEventToContainerPoint(t.touches[1]),y=c.distanceTo(p)/this._startDist;if(this._zoom=o.getScaleZoom(y,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&y<1||this._zoom>o.getMaxZoom()&&y>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var S=c._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&S.x===0&&S.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Se(this._animRequest);var z=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ge(z,this,!0),Bt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Se(this._animRequest),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ot.addInitHook("addHandler","touchZoom",Sc),ot.BoxZoom=Lc,ot.DoubleClickZoom=xc,ot.Drag=Ac,ot.Keyboard=Ec,ot.ScrollWheelZoom=Tc,ot.TapHold=Ic,ot.TouchZoom=Sc,i.Bounds=he,i.Browser=De,i.CRS=U,i.Canvas=bc,i.Circle=Zr,i.CircleMarker=fa,i.Class=ie,i.Control=Zt,i.DivIcon=gc,i.DivOverlay=Rn,i.DomEvent=$r,i.DomUtil=eo,i.Draggable=xn,i.Evented=Ae,i.FeatureGroup=Jn,i.GeoJSON=Qn,i.GridLayer=ho,i.Handler=vn,i.Icon=fi,i.ImageOverlay=_a,i.LatLng=re,i.LatLngBounds=Re,i.Layer=An,i.LayerGroup=hi,i.LineUtil=hf,i.Map=ot,i.Marker=ha,i.Mixin=Br,i.Path=bs,i.Point=pe,i.PolyUtil=Fr,i.Polygon=pi,i.Polyline=Xn,i.Popup=ya,i.PosAnimation=oa,i.Projection=ff,i.Rectangle=Cc,i.Renderer=es,i.SVG=po,i.SVGOverlay=vc,i.TileLayer=vi,i.Tooltip=ba,i.Transformation=Je,i.Util=Me,i.VideoOverlay=mc,i.bind=l,i.bounds=Ee,i.canvas=kc,i.circle=kf,i.circleMarker=bf,i.control=Us,i.divIcon=Sf,i.extend=s,i.featureGroup=gf,i.geoJSON=pc,i.geoJson=Lf,i.gridLayer=Mf,i.icon=_f,i.imageOverlay=xf,i.latLng=ce,i.latLngBounds=me,i.layerGroup=vf,i.map=Or,i.marker=yf,i.point=K,i.polygon=Cf,i.polyline=wf,i.popup=Tf,i.rectangle=Of,i.setOptions=P,i.stamp=h,i.svg=wc,i.svgOverlay=Ef,i.tileLayer=_c,i.tooltip=If,i.transformation=D,i.version=a,i.videoOverlay=Af;var Rf=window.L;i.noConflict=function(){return window.L=Rf,this},window.L=i}))})(Co,Co.exports)),Co.exports}var tk=ek();const Ht=Xb(tk);(function(e,n,i){function a(s,r){for(;(s=s.parentElement)&&!s.classList.contains(r););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,r){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),r=this._poly,l=r.getLatLngs(),d=l.splice(-1,1)[0];this._poly.setLatLngs(l),this._markerGroup.removeLayer(s),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(d,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent),l=this._map.layerPointToLatLng(r);this._currentLatLng=l,this._updateTooltip(l),this._updateGuide(r),this._mouseMarker.setLatLng(l),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var r=s.originalEvent,l=r.clientX,d=r.clientY;this._startPoint.call(this,l,d)}},_startPoint:function(s,r){this._mouseDownOrigin=L.point(s,r)},_onMouseUp:function(s){var r=s.originalEvent,l=r.clientX,d=r.clientY;this._endPoint.call(this,l,d,s),this._clickHandled=null},_endPoint:function(s,r,l){if(this._mouseDownOrigin){var d=L.point(s,r).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(l.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(l.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(d)<9*(e.devicePixelRatio||1)&&this.addVertex(l.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var r,l,d=s.originalEvent;!d.touches||!d.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=d.touches[0].clientX,l=d.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,l),this._endPoint.call(this,r,l,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var r;if(this._markers.length>0){var l;if(this.type===L.Draw.Polyline.TYPE)l=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;l=this._markers[0]}var d=this._map.latLngToContainerPoint(l.getLatLng()),h=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(h.getLatLng());r=d.distanceTo(m)}else r=1/0;return r},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var r=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(s){var r=this._markers?this._markers.length:0;r>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),s))},_updateTooltip:function(s){var r=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(s,r){var l,d,h,m=Math.floor(Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))),f=this.options.guidelineDistance,v=this.options.maxGuideLineLength,k=m>v?m-v:f;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));k<m;k+=this.options.guidelineDistance)l=k/m,d={x:Math.floor(s.x*(1-l)+l*r.x),y:Math.floor(s.y*(1-l)+l*r.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,d)},_updateGuideColor:function(s){if(this._guidesContainer)for(var r=0,l=this._guidesContainer.childNodes.length;r<l;r++)this._guidesContainer.childNodes[r].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,r,l=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=l?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),s},_updateRunningMeasure:function(s,r){var l,d,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(l=h-(r?2:1),d=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[l].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[l].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=d*(r?1:-1))},_getMeasurementString:function(){var s,r=this._currentLatLng,l=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?l&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(l)*(this.options.factor||1):this._measurementRunningTotal||0:l&&r?this._measurementRunningTotal+this._map.distance(r,l)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,r){L.Draw.Polyline.prototype.initialize.call(this,s,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,r;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:s,subtext:r}},_getMeasurementString:function(){var s=this._area,r="";return s||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(r+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,r){var l;!this.options.allowIntersection&&this.options.showArea&&(l=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(l)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,r)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var r=s.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!a(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,r,l,d=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,m=this.options.showArea;return h&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(s),l=m?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:d.text,subtext:l}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var r=s.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,r)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,r)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(s);else var r=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var r,l=s.latlng,d=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(l),this._isDrawing){this._drawShape(l),r=this._shape.getRadius().toFixed(1);var m="";d&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,r){this._marker=s,L.setOptions(this,r)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var r=s.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,r){var l=parseInt(s.style.marginTop,10)-r,d=parseInt(s.style.marginLeft,10)-r;s.style.marginTop=l+"px",s.style.marginLeft=d+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var r=0;r<this._verticesHandlers.length;r++)s(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,r,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this._latlngs=r,L.setOptions(this,l)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,r=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),r&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.removeClass(r,l)}),s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.addClass(r,l)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,r=s._path;r&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(l){L.DomUtil.removeClass(r,l)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(l){L.DomUtil.addClass(r,l)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,r,l,d,h=this._defaultShape();for(s=0,l=h.length;s<l;s++)d=this._createMarker(h[s],s),d.on("click",this._onMarkerClick,this),d.on("contextmenu",this._onContextMenu,this),this._markers.push(d);var m,f;for(s=0,r=l-1;s<l;r=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[r],f=this._markers[s],this._createMiddleMarker(m,f),this._updatePrevNext(m,f))},_createMarker:function(s,r){var l=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return l._origLatLng=s,l._index=r,l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(l),l},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),r=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),r},_removeMarker:function(s){var r=s._index;this._markerGroup.removeLayer(s),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var r=s.target,l=this._poly,d=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),l.options.poly){var h=l._map._editTooltip;if(!l.options.poly.allowIntersection&&l.intersects()){L.extend(r._origLatLng,d),r.setLatLng(d);var m=l.options.color;l.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){l.setStyle({color:m}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var f=this._poly.getLatLngs();this._poly._convertLatLngs(f,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,l=s.target;this._defaultShape().length<r||(this._removeMarker(l),this._updatePrevNext(l._prev,l._next),l._middleLeft&&this._markerGroup.removeLayer(l._middleLeft),l._middleRight&&this._markerGroup.removeLayer(l._middleRight),l._prev&&l._next?this._createMiddleMarker(l._prev,l._next):l._prev?l._next||(l._prev._middleRight=null):l._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var r=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(r),d=s.target;L.extend(d._origLatLng,l),d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,r){this._markerGroup.eachLayer(function(l){l._index>s&&(l._index+=r)})},_createMiddleMarker:function(s,r){var l,d,h,m=this._getMiddleLatLng(s,r),f=this._createMarker(m);f.setOpacity(.6),s._middleRight=r._middleLeft=f,d=function(){f.off("touchmove",d,this);var v=r._index;f._index=v,f.off("click",l,this).on("click",this._onMarkerClick,this),m.lat=f.getLatLng().lat,m.lng=f.getLatLng().lng,this._spliceLatLngs(v,0,m),this._markers.splice(v,0,f),f.setOpacity(1),this._updateIndexes(v,1),r._index++,this._updatePrevNext(s,f),this._updatePrevNext(f,r),this._poly.fire("editstart")},h=function(){f.off("dragstart",d,this),f.off("dragend",h,this),f.off("touchmove",d,this),this._createMiddleMarker(s,f),this._createMiddleMarker(f,r)},l=function(){d.call(this),h.call(this),this._fireEdit()},f.on("click",l,this).on("dragstart",d,this).on("dragend",h,this).on("touchmove",d,this),this._markerGroup.addLayer(f)},_updatePrevNext:function(s,r){s&&(s._next=r),r&&(r._prev=s)},_getMiddleLatLng:function(s,r){var l=this._poly._map,d=l.project(s.getLatLng()),h=l.project(r.getLatLng());return l.unproject(d._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,r)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var r=0,l=this._resizeMarkers.length;r<l;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,r){var l=new L.Marker.Touch(s,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(l),this._markerGroup.addLayer(l),l},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var r=s.target,l=r.getLatLng();r===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var r=this._getCorners(),l=s.target,d=l._cornerIndex;l.setOpacity(0),this._oppositeCorner=r[(d+2)%4],this._toggleCornerMarkers(0,d)}this._shape.fire("editstart")},_onTouchMove:function(s){var r=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),l=this._map.layerPointToLatLng(r);return s.target===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),r=s.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var r=0,l=s.length;r<l;r++)this._resizeMarkers.push(this._createMarker(s[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var r=this._getCorners(),l=s.target,d=l._cornerIndex;this._oppositeCorner=r[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(s){var r,l,d=s.target;d===this._moveMarker&&(r=this._shape.getBounds(),l=r.getCenter(),d.setLatLng(l)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var r,l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=this._shape.getBounds(),h=d.getCenter(),m=[],f=0,v=l.length;f<v;f++)r=[l[f].lat-h.lat,l[f].lng-h.lng],m.push([s.lat+r[0],s.lng+r[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var r;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var r=0,l=this._resizeMarkers.length;r<l;r++)this._resizeMarkers[r].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),r=0,l=this._resizeMarkers.length;r<l;r++)this._resizeMarkers[r].setLatLng(s[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),r=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var r=this._shape._radius*Math.cos(Math.PI/4),l=this._map.project(s);return this._map.unproject([l.x+r,l.y-r])},_resize:function(s){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(s):radius=this._map.distance(r,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,r){var l={};if(s.touches!==void 0){if(!s.touches.length)return;l=s.touches[0]}else if(s.pointerType!=="touch"||(l=s,!this._filterClick(s)))return;var d=this._map.mouseEventToContainerPoint(l),h=this._map.mouseEventToLayerPoint(l),m=this._map.layerPointToLatLng(h);this._map.fire(r,{latlng:m,layerPoint:h,containerPoint:d,pageX:l.pageX,pageY:l.pageY,originalEvent:s})},_filterClick:function(s){var r=s.timeStamp||s.originalEvent.timeStamp,l=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return l&&l>100&&l<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(s,r)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,r=s.indexOf("MSIE ");if(r>0)return parseInt(s.substring(r+5,s.indexOf(".",r)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var l=0;l<r.length;l++)L.DomEvent.on(s,r[l],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,r=s.indexOf("MSIE ");if(r>0)return parseInt(s.substring(r+5,s.indexOf(".",r)),10);if(s.indexOf("Trident/")>0){var l=s.indexOf("rv:");return parseInt(s.substring(l+3,s.indexOf(".",l)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var r=[],l=0,d=s.length;l<d;l++)Array.isArray(s[l])?r.push(L.LatLngUtil.cloneLatLngs(s[l])):r.push(this.cloneLatLng(s[l]));return r},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},(function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var l,d,h=r.length,m=0,f=Math.PI/180;if(h>2){for(var v=0;v<h;v++)l=r[v],d=r[(v+1)%h],m+=(d.lng-l.lng)*f*(2+Math.sin(l.lat*f)+Math.sin(d.lat*f));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(r,l){var d=parseFloat(r).toFixed(l),h=L.drawLocal.format&&L.drawLocal.format.numeric,m=h&&h.delimiters,f=m&&m.thousands,v=m&&m.decimal;if(f||v){var k=d.split(".");d=f?k[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f):k[0],v=v||".",k.length>1&&(d=d+v+k[1])}return d},readableArea:function(r,l,f){var h,m,f=L.Util.extend({},s,f);return l?(m=["ha","m"],type=typeof l,type==="string"?m=[l]:type!=="boolean"&&(m=l),h=r>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,f.km)+" km":r>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,f.ha)+" ha":L.GeometryUtil.formattedNumber(r,f.m)+" m"):(r/=.836127,h=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,f.mi)+" mi":r>=4840?L.GeometryUtil.formattedNumber(r/4840,f.ac)+" acres":L.GeometryUtil.formattedNumber(r,f.yd)+" yd"),h},readableDistance:function(r,l,d,h,v){var f,v=L.Util.extend({},s,v);switch(l?typeof l=="string"?l:"metric":d?"feet":h?"nauticalMile":"yards"){case"metric":f=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(r,v.m)+" m";break;case"feet":r*=3.28083,f=L.GeometryUtil.formattedNumber(r,v.ft)+" ft";break;case"nauticalMile":r*=.53996,f=L.GeometryUtil.formattedNumber(r/1e3,v.nm)+" nm";break;default:r*=1.09361,f=r>1760?L.GeometryUtil.formattedNumber(r/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(r,v.yd)+" yd"}return f},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,r,l,d){return this._checkCounterclockwise(s,l,d)!==this._checkCounterclockwise(r,l,d)&&this._checkCounterclockwise(s,r,l)!==this._checkCounterclockwise(s,r,d)},_checkCounterclockwise:function(s,r,l){return(l.y-s.y)*(r.x-s.x)>(r.y-s.y)*(l.x-s.x)}}),L.Polyline.include({intersects:function(){var s,r,l,d=this._getProjectedPoints(),h=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=h-1;s>=3;s--)if(r=d[s-1],l=d[s],this._lineSegmentsIntersectsRange(r,l,s-2))return!0;return!1},newLatLngIntersects:function(s,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),r)},newPointIntersects:function(s,r){var l=this._getProjectedPoints(),d=l?l.length:0,h=l?l[d-1]:null,m=d-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,s,m,r?1:0)},_tooFewPointsForIntersection:function(s){var r=this._getProjectedPoints(),l=r?r.length:0;return l+=s||0,!r||l<=3},_lineSegmentsIntersectsRange:function(s,r,l,d){var h,m,f=this._getProjectedPoints();d=d||0;for(var v=l;v>d;v--)if(h=f[v-1],m=f[v],L.LineUtil.segmentsIntersect(s,r,h,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],r=this._defaultShape(),l=0;l<r.length;l++)s.push(this._map.latLngToLayerPoint(r[l]));return s}}),L.Polygon.include({intersects:function(){var s,r,l,d,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=h.length,r=h[0],l=h[s-1],d=s-2,this._lineSegmentsIntersectsRange(l,r,d,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var r,l=L.DomUtil.create("div","leaflet-draw"),d=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(r=this._toolbars[h].addToolbar(s))&&(d||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),d=!0),l.appendChild(r));return l},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(s)},_toolbarEnabled:function(s){var r=s.target;for(var l in this._toolbars)this._toolbars[l]!==r&&this._toolbars[l].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var r,l=L.DomUtil.create("div","leaflet-draw-section"),d=0,h=this._toolbarClass||"",m=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,r=0;r<m.length;r++)m[r].enabled&&this._initModeHandler(m[r].handler,this._toolbarContainer,d++,h,m[r].title);if(d)return this._lastButtonIndex=--d,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),l.appendChild(this._toolbarContainer),l.appendChild(this._actionsContainer),l},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,l=this._actionButtons.length;r<l;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,r,l,d,h){var m=s.type;this._modes[m]={},this._modes[m].handler=s,this._modes[m].button=this._createButton({type:m,title:h,className:d+"-"+m,container:r,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=l,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var r=L.DomUtil.create("a",s.className||"",s.container),l=L.DomUtil.create("span","sr-only",s.container);r.href="#",r.appendChild(l),s.title&&(r.title=s.title,l.innerHTML=s.title),s.text&&(r.innerHTML=s.text,l.innerHTML=s.text);var d=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,d,s.callback,s.context),r},_disposeButton:function(s,r){var l=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,l,r)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var r,l,d,h,m=this._actionsContainer,f=this.getActions(s),v=f.length;for(l=0,d=this._actionButtons.length;l<d;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var k=0;k<v;k++)"enabled"in f[k]&&!f[k].enabled||(r=L.DomUtil.create("li","",m),h=this._createButton({title:f[k].title,text:f[k].text,container:r,callback:f[k].callback,context:f[k].context}),this._actionButtons.push({button:h,callback:f[k].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,r=this._lastButtonIndex,l=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=l+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var r=this._map.latLngToLayerPoint(s),l=this._container;return this._container&&(this._visible&&(l.style.visibility="inherit"),L.DomUtil.setPosition(l,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var r in this.options)this.options.hasOwnProperty(r)&&s[r]&&(s[r]=L.extend({},this.options[r],s[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var r in this._modes)this._modes.hasOwnProperty(r)&&s.hasOwnProperty(r)&&this._modes[r].handler.setOptions(s[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(s){var r=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,r=this.options.featureGroup,l=r.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,l?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,r){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(s.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var r=L.Util.stamp(s);this._uneditedLayerProps[r]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var r=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[r].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[r].latlng),s.setRadius(this._uneditedLayerProps[r].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[r].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var r,l,d=s.layer||s.target||s;this._backupLayer(d),this.options.poly&&(l=L.Util.extend({},this.options.poly),d.options.poly=l),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=d.options.color,r.fillColor=d.options.fillColor),d.options.original=L.extend({},d.options),d.options.editing=r),d instanceof L.Marker?(d.editing&&d.editing.enable(),d.dragging.enable(),d.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.enable()},_disableLayerEdit:function(s){var r=s.layer||s.target||s;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var r=s.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(s){var r=s.originalEvent.changedTouches[0],l=this._map.mouseEventToLayerPoint(r),d=this._map.layerPointToLatLng(l);s.target.setLatLng(d)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,r){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var r=s.layer||s.target||s;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(s){var r=s.layer||s.target||s;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);const af=(e,n)=>e?e.length<=n?e:e.substring(0,n)+"...":"",Xu=e=>e.length*6+12,fl=(e,n)=>!(e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom),nk=(e,n)=>{if(!e||n.length===0)return new Set;const i=[],a=e.getBounds();n.forEach(l=>{if(a.contains(l.getLatLng())){const d=e.latLngToContainerPoint(l.getLatLng()),h=l.locationData;h&&i.push({marker:l,pixelPos:d,location:h})}});const s=i.map(({marker:l,pixelPos:d,location:h})=>{const v=Xu(h.name),k=h.description?Xu(`${h.name}: ${af(h.description,50)}`):v;return{marker:l,location:h,markerBox:{left:d.x-15,right:d.x+15,top:d.y-15,bottom:d.y+15},baseLabelBox:{left:d.x-v/2,right:d.x+v/2,top:d.y+15+2,bottom:d.y+15+2+20},descLabelBox:h.description?{left:d.x-k/2,right:d.x+k/2,top:d.y+15+2,bottom:d.y+15+2+20}:null}}),r=new Set;return s.forEach(({marker:l,location:d,markerBox:h,baseLabelBox:m,descLabelBox:f},v)=>{if(!d.description)return;let k=!1;for(let x=0;x<s.length;x++){if(v===x)continue;const M=s[x];if(fl(f,M.markerBox)||fl(f,M.baseLabelBox)){k=!0;break}if(M.descLabelBox&&r.has(M.location.id)&&fl(f,M.descLabelBox)){k=!0;break}}k||r.add(d.id)}),r},sk={__name:"MapView",props:{locations:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},center:{type:Object,default:null},zoom:{type:Number,default:13},clickable:{type:Boolean,default:!1},areas:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1},userLocation:{type:Object,default:null},highlightLocationId:{type:String,default:null},highlightLocationIds:{type:Array,default:()=>[]},allLocationsForBounds:{type:Array,default:()=>[]},marshalMode:{type:Boolean,default:!1}},emits:["location-click","map-click","area-click","polygon-complete","polygon-drawing"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=$(null);let l=null;n({getMapCenter:()=>{if(l){const V=l.getCenter();return{lat:V.lat,lng:V.lng}}return null},getMapZoom:()=>l?l.getZoom():null});const m=$([]);let f=null;const v=$(!0),k=$(!1),x=$(new Set),M=$([]);let P=null,R=null,T=null;const A=()=>{if(!l)return;const V=nk(l,m.value),se=Array.from(x.value).sort().join(","),ge=Array.from(V).sort().join(",");se!==ge&&(x.value=V,W())},g=()=>{if(T&&(T.remove(),T=null),!l||!a.userLocation)return;const V=Ht.divIcon({className:"user-location-marker",html:`
      <div style="
        position: relative;
        width: 20px;
        height: 20px;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 20px;
          height: 20px;
          background-color: #4285f4;
          border: 3px solid white;
          border-radius: 50%;
          box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        "></div>
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 40px;
          height: 40px;
          background-color: rgba(66, 133, 244, 0.2);
          border-radius: 50%;
          animation: pulse 2s ease-out infinite;
        "></div>
      </div>
    `,iconSize:[40,40],iconAnchor:[20,20]});T=Ht.marker([a.userLocation.lat,a.userLocation.lng],{icon:V}).addTo(l).bindPopup("Your location")},C=()=>{if(!r.value)return;let V=51.505,se=-.09,ge=13;const Se=a.allLocationsForBounds.length>0?a.allLocationsForBounds:a.locations,Me=[];Se.length>0&&Me.push(...Se.map(ie=>({lat:ie.latitude,lng:ie.longitude}))),a.route&&a.route.length>0&&Me.push(...a.route.map(ie=>({lat:ie.lat,lng:ie.lng}))),a.center?(V=a.center.lat,se=a.center.lng,ge=a.zoom??13):Me.length>0&&(V=Me.reduce((ie,ue)=>ie+ue.lat,0)/Me.length,se=Me.reduce((ie,ue)=>ie+ue.lng,0)/Me.length,ge=10),l=Ht.map(r.value).setView([V,se],ge),Ht.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(l),a.clickable&&l.on("click",ie=>{a.drawingMode||s("map-click",{lat:ie.latlng.lat,lng:ie.latlng.lng})}),l.on("zoomend moveend",()=>{A()}),W(),w(),E(),g(),O()},w=()=>{if(f&&(f.remove(),f=null),!l||a.route.length===0)return;const V=a.route.map(se=>[se.lat,se.lng]);f=Ht.polyline(V,{color:"blue",weight:4,opacity:.7}).addTo(l)},E=()=>{M.value.forEach(V=>V.remove()),M.value=[],!(!l||a.areas.length===0)&&a.areas.forEach(V=>{const se=typeof V.polygon=="string"?JSON.parse(V.polygon):V.polygon;if(!se||se.length===0)return;const ge=se.map(ue=>[ue.lat,ue.lng]),Se=V.id===a.selectedAreaId,Me=V.color||"#667eea",ie=Ht.polygon(ge,{color:Me,fillColor:Me,fillOpacity:Se?.4:.2,weight:Se?3:2,opacity:.8}).addTo(l);ie.setStyle({pane:"overlayPane"}),a.drawingMode||(ie.on("click",()=>s("area-click",V)),ie.on("mouseover",()=>{ie.setStyle({fillOpacity:.4})}),ie.on("mouseout",()=>{ie.setStyle({fillOpacity:Se?.4:.2})})),M.value.push(ie)})},O=()=>{if(l)if(R||(R=new Ht.FeatureGroup,l.addLayer(R)),P&&(l.removeControl(P),P=null),a.drawingMode){P=new Ht.Control.Draw({draw:{polygon:{allowIntersection:!1,showArea:!1,shapeOptions:{color:"#667eea",weight:3,opacity:.8,fillOpacity:.3},repeatMode:!1,touchExtend:!0,metric:!0,feet:!1,nautic:!1},polyline:!1,rectangle:!1,circle:!1,marker:!1,circlemarker:!1},edit:{featureGroup:R,remove:!1}}),l.addControl(P);let V=null;const se=ue=>{V={x:ue.originalEvent.clientX,y:ue.originalEvent.clientY}},ge=ue=>{V&&(ue.originalEvent.clientX-V.x,ue.originalEvent.clientY-V.y)},Se=()=>{V=null};l.on("mousedown",se),l.on("mousemove",ge),l.on("mouseup",Se),new Ht.Draw.Polygon(l,P.options.draw.polygon).enable(),l._drawingHandlers={handleMouseDown:se,handleMouseMove:ge,handleMouseUp:Se};const ie=ue=>{if(ue.layers&&ue.layers.getLayers().length>0){const de=ue.layers.getLayers()[0];if(de&&de.getLatLngs){const Ae=de.getLatLngs()[0]||[];s("polygon-drawing",Ae)}}};l.on(Ht.Draw.Event.DRAWVERTEX,ie),l._drawVertexHandler=ie,l.on(Ht.Draw.Event.CREATED,ue=>{const Ae=ue.layer.getLatLngs()[0].map(pe=>({lat:pe.lat,lng:pe.lng}));s("polygon-complete",Ae),R.clearLayers(),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(Ht.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)})}else R&&R.clearLayers(),l.off(Ht.Draw.Event.CREATED),l._drawingHandlers&&(l.off("mousedown",l._drawingHandlers.handleMouseDown),l.off("mousemove",l._drawingHandlers.handleMouseMove),l.off("mouseup",l._drawingHandlers.handleMouseUp),delete l._drawingHandlers),l._drawVertexHandler&&(l.off(Ht.Draw.Event.DRAWVERTEX,l._drawVertexHandler),delete l._drawVertexHandler)},W=()=>{if(!(l&&l._animatingZoom)&&(m.value.forEach(V=>V.remove()),m.value=[],!!l)){if(a.locations.forEach(V=>{const se=V.checkedInCount||0,ge=V.requiredMarshals||1,Se=se>=ge,Me=se===0,ie=a.highlightLocationId===V.id||a.highlightLocationIds.includes(V.id),ue=a.marshalMode&&!ie;let de;a.marshalMode?de=ie?"#667eea":"#999":de=Se?"green":Me?"red":"orange";const Ae=V.areaColor||"#999",pe=V.areaId&&!a.marshalMode,K=x.value.has(V.id)&&V.description?`${V.name}: ${af(V.description,50)}`:V.name,he=ie?`
      <div style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        border: 3px solid #667eea;
        border-radius: 50%;
        animation: highlight-pulse 1.5s ease-out infinite;
      "></div>
    `:"",Ee=ue?"0.6":"1",Re=ie?"36px":a.marshalMode?"20px":"30px",me=ie?"#667eea":ue?"#e0e0e0":"white",re=ie?"white":ue?"#888":"#333",ce=ie?"#667eea":"white",U=a.marshalMode&&!ie||a.marshalMode?"":`${se}/${ge}`,G=Ht.divIcon({className:"custom-marker",html:`
        <div style="display: flex; flex-direction: column; align-items: center; position: relative; opacity: ${Ee};">
          ${he}
          <div style="position: relative; display: flex; align-items: center; gap: 4px;">
            ${pe?`<div style="
              width: 8px;
              height: 8px;
              border-radius: 50%;
              background-color: ${Ae};
              border: 2px solid white;
              box-shadow: 0 1px 2px rgba(0,0,0,0.3);
            "></div>`:""}
            <div style="
              background-color: ${de};
              width: ${Re};
              height: ${Re};
              border-radius: 50%;
              border: 3px solid ${ce};
              box-shadow: 0 2px 5px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
              color: white;
              font-weight: bold;
              font-size: ${ie?"14px":"12px"};
            ">
              ${U}
            </div>
          </div>
          <div style="
            background-color: ${me};
            padding: 2px 6px;
            border-radius: 3px;
            font-size: ${ie?"12px":"11px"};
            font-weight: bold;
            color: ${re};
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            margin-top: 2px;
          ">
            ${K}
          </div>
        </div>
      `,iconSize:[30,50],iconAnchor:[15,25]}),Y=a.marshalMode?`<b>${V.name}</b>${V.description?`<br>${V.description}`:""}`:`<b>${V.name}</b><br>${V.description||""}<br>Checked in: ${se}/${ge}`,ke=Ht.marker([V.latitude,V.longitude],{icon:G}).addTo(l).bindPopup(Y);ke.on("click",()=>{s("location-click",V)}),ke.locationData=V,m.value.push(ke)}),l&&v.value&&!a.center&&!k.value){const V=[],se=a.allLocationsForBounds.length>0?a.allLocationsForBounds:a.locations;if(se.length>0&&V.push(...se.map(ge=>[ge.latitude,ge.longitude])),a.route.length>0&&V.push(...a.route.map(ge=>[ge.lat,ge.lng])),V.length>0){const ge=Ht.latLngBounds(V);l.fitBounds(ge,{padding:[50,50]}),v.value=!1,k.value=!0}}else a.center&&(v.value=!1);setTimeout(()=>{l&&!l._animatingZoom&&A()},100)}};return wn(()=>{k.value=!1,v.value=!0,C();let V,se=0,ge=0;const Se=new ResizeObserver(Me=>{if(l&&Me.length>0){const{width:ie,height:ue}=Me[0].contentRect;(Math.abs(ie-se)>10||Math.abs(ue-ge)>10)&&(se=ie,ge=ue,clearTimeout(V),V=setTimeout(()=>{l.invalidateSize()},150))}});r.value&&Se.observe(r.value),Ms(()=>{clearTimeout(V),Se.disconnect()})}),We(()=>a.locations,V=>{if(W(),l&&!k.value&&V.length>0&&!a.center){const se=V.map(ie=>ie.latitude),ge=V.map(ie=>ie.longitude),Se=se.reduce((ie,ue)=>ie+ue,0)/se.length,Me=ge.reduce((ie,ue)=>ie+ue,0)/ge.length;l.setView([Se,Me],10),k.value=!0,v.value=!1}},{deep:!0}),We(()=>a.route,V=>{if(w(),W(),l&&!k.value&&V&&V.length>0&&!a.center){const se=V.map(ie=>ie.lat),ge=V.map(ie=>ie.lng),Se=se.reduce((ie,ue)=>ie+ue,0)/se.length,Me=ge.reduce((ie,ue)=>ie+ue,0)/ge.length;l.setView([Se,Me],10),k.value=!0,v.value=!1}},{deep:!0}),We(()=>a.center,V=>{l&&l.setView([V.lat,V.lng],a.zoom)}),We(()=>a.areas,()=>{E()},{deep:!0}),We(()=>a.selectedAreaId,()=>{E()}),We(()=>a.drawingMode,()=>{O()}),We(()=>a.userLocation,()=>{g()},{deep:!0}),We(()=>a.highlightLocationId,()=>{W()}),We(()=>a.highlightLocationIds,()=>{W()},{deep:!0}),We(()=>a.marshalMode,()=>{W()}),(V,se)=>(_(),b("div",{ref_key:"mapContainer",ref:r,class:"map-container"},null,512))}},Ja=Ze(sk,[["__scopeId","data-v-1cdd9dc1"]]);function fn(e,n){return e.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"})}const ik={class:"areas-selection"},ok={key:0,class:"areas-selection-header"},ak={class:"areas-list"},rk=["checked","onChange"],lk={__name:"AreasSelection",props:{areas:{type:Array,default:()=>[]},selectedAreaIds:{type:Array,default:()=>[]}},emits:["update:selectedAreaIds"],setup(e,{emit:n}){const i=e,a=n,s=ne(()=>[...i.areas].sort((h,m)=>h.displayOrder!==m.displayOrder?h.displayOrder-m.displayOrder:fn(h.name,m.name))),r=ne(()=>i.areas.length>0&&i.selectedAreaIds.length===i.areas.length),l=h=>{const m=[...i.selectedAreaIds],f=m.indexOf(h);f>=0?m.splice(f,1):m.push(h),a("update:selectedAreaIds",m)},d=()=>{r.value?a("update:selectedAreaIds",[]):a("update:selectedAreaIds",i.areas.map(h=>h.id))};return(h,m)=>(_(),b("div",ik,[e.areas.length>1?(_(),b("div",ok,[u("button",{onClick:d,class:"toggle-all-btn"},I(r.value?"Deselect all":"Select all"),1)])):B("",!0),u("div",ak,[(_(!0),b(be,null,$e(s.value,f=>(_(),b("label",{class:"area-checkbox",key:f.id},[u("input",{type:"checkbox",checked:e.selectedAreaIds.includes(f.id),onChange:v=>l(f.id)},null,40,rk),u("span",{class:"area-color-dot",style:Yt({backgroundColor:f.color||"#667eea"})},null,4),He(" "+I(f.name),1)]))),128))])]))}},rf=Ze(lk,[["__scopeId","data-v-46364246"]]),ck={class:"course-areas-tab"},uk={class:"map-wrapper"},dk={key:0},hk={key:1},fk={key:0,class:"filters-content"},pk={class:"filter-section"},mk={class:"filter-checkbox"},vk={class:"filter-checkbox"},gk={class:"filter-checkbox"},_k={key:0,class:"filter-section"},yk={key:0},bk={key:1},kk={key:0,class:"add-menu-content"},wk={__name:"CourseAreasTab",props:{checkpoints:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},route:{type:Array,default:()=>[]},selectedAreaId:{type:String,default:null},drawingMode:{type:Boolean,default:!1}},emits:["map-click","location-click","area-click","import-checkpoints","upload-route","select-location","add-area","select-area","polygon-complete","cancel-drawing","add-checkpoint-from-map","add-many-checkpoints-from-map","add-area-from-map"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=$(null),l=$(null),d=$(!0),h=$(!1),m=$(null),f=$({showRoute:!0,showCheckpoints:!0,showAreas:!0,selectedAreas:[]}),v=()=>{d.value=!d.value,d.value||(h.value=!1)},k=()=>{h.value=!h.value,h.value&&(d.value=!0)},x=E=>{h.value=!1,E==="checkpoint"?(s("add-checkpoint-from-map"),R()):E==="many-checkpoints"?(s("add-many-checkpoints-from-map"),R()):E==="area"&&(s("add-area-from-map"),R())},M=()=>{h.value=!1,s("import-checkpoints")},P=()=>{h.value=!1,s("upload-route")},R=()=>{r.value&&r.value.scrollIntoView({behavior:"smooth",block:"start"})};n({scrollMapIntoView:R,getMapCenter:()=>l.value?.getMapCenter()||null,getMapZoom:()=>l.value?.getMapZoom()||null}),We(()=>a.areas,E=>{if(E.length>0){const O=new Set(f.value.selectedAreas);E.forEach(W=>{O.has(W.id)||f.value.selectedAreas.push(W.id)}),f.value.selectedAreas=f.value.selectedAreas.filter(W=>E.some(V=>V.id===W))}},{immediate:!0}),ne(()=>[...a.areas].sort((E,O)=>E.displayOrder!==O.displayOrder?E.displayOrder-O.displayOrder:fn(E.name,O.name)));const g=ne(()=>f.value.showRoute?a.route:[]),C=ne(()=>f.value.showCheckpoints?a.checkpoints.filter(E=>{const O=E.areaIds||E.AreaIds;return O&&Array.isArray(O)?O.some(W=>f.value.selectedAreas.includes(W)):E.areaId?f.value.selectedAreas.includes(E.areaId):!1}):[]),w=ne(()=>f.value.showAreas?a.areas.filter(E=>f.value.selectedAreas.includes(E.id)):[]);return(E,O)=>(_(),b("div",ck,[u("div",{class:"map-section",ref_key:"mapSection",ref:r},[u("div",uk,[Ne(Ja,{ref_key:"mapView",ref:l,locations:C.value,route:g.value,areas:w.value,allLocationsForBounds:e.checkpoints,selectedAreaId:e.selectedAreaId,clickable:!0,drawingMode:e.drawingMode,onMapClick:O[0]||(O[0]=W=>E.$emit("map-click",W)),onLocationClick:O[1]||(O[1]=W=>E.$emit("location-click",W)),onAreaClick:O[2]||(O[2]=W=>E.$emit("area-click",W)),onPolygonComplete:O[3]||(O[3]=W=>E.$emit("polygon-complete",W))},null,8,["locations","route","areas","allLocationsForBounds","selectedAreaId","drawingMode"])]),h.value?B("",!0):(_(),b("div",{key:0,class:Ve(["visibility-filters",{collapsed:d.value}])},[u("button",{onClick:v,class:"filters-toggle"},[d.value?(_(),b("span",dk,"Show...")):(_(),b("span",hk,""))]),d.value?B("",!0):(_(),b("div",fk,[u("div",pk,[O[14]||(O[14]=u("h4",null,"Show on map:",-1)),u("label",mk,[Pe(u("input",{type:"checkbox","onUpdate:modelValue":O[4]||(O[4]=W=>f.value.showRoute=W)},null,512),[[Ii,f.value.showRoute]]),O[11]||(O[11]=He(" Route ",-1))]),u("label",vk,[Pe(u("input",{type:"checkbox","onUpdate:modelValue":O[5]||(O[5]=W=>f.value.showCheckpoints=W)},null,512),[[Ii,f.value.showCheckpoints]]),O[12]||(O[12]=He(" Checkpoints ",-1))]),u("label",gk,[Pe(u("input",{type:"checkbox","onUpdate:modelValue":O[6]||(O[6]=W=>f.value.showAreas=W)},null,512),[[Ii,f.value.showAreas]]),O[13]||(O[13]=He(" Areas ",-1))])]),e.areas.length>0&&f.value.showAreas?(_(),b("div",_k,[O[15]||(O[15]=u("h4",null,"Filter areas:",-1)),Ne(rf,{areas:e.areas,"selected-area-ids":f.value.selectedAreas,"onUpdate:selectedAreaIds":O[7]||(O[7]=W=>f.value.selectedAreas=W)},null,8,["areas","selected-area-ids"])])):B("",!0)]))],2)),d.value?(_(),b("div",{key:1,class:Ve(["add-menu",{expanded:h.value}])},[u("button",{onClick:k,class:"add-toggle",ref_key:"addButtonRef",ref:m},[h.value?(_(),b("span",yk,"")):(_(),b("span",bk,"Add..."))],512),h.value?(_(),b("div",kk,[u("button",{onClick:O[8]||(O[8]=W=>x("checkpoint")),class:"add-menu-item"}," Checkpoint "),u("button",{onClick:O[9]||(O[9]=W=>x("many-checkpoints")),class:"add-menu-item"}," Many checkpoints "),u("button",{onClick:O[10]||(O[10]=W=>x("area")),class:"add-menu-item"}," Area "),u("button",{onClick:M,class:"add-menu-item"}," Import checkpoints... "),u("button",{onClick:P,class:"add-menu-item"}," Upload route... ")])):B("",!0)],2)):B("",!0)],512)]))}},Ck=Ze(wk,[["__scopeId","data-v-aa8741b6"]]),Lk=(e,n)=>{const i=String(e).trim(),a=String(n).trim(),s=parseFloat(i),r=parseFloat(a),l=!isNaN(s)&&String(s)===i,d=!isNaN(r)&&String(r)===a;return l&&d?s-r:i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"})},xk=e=>e&&e.isCheckedIn?"":"",Ak={class:"marshals-tab"},Ek={class:"marshals-tab-header"},Tk={class:"button-group"},Ik={class:"marshals-grid"},Sk={class:"marshals-table"},Mk={key:0,class:"sort-indicator"},Pk={key:0,class:"sort-indicator"},$k={key:0,class:"sort-indicator"},Ok=["onClick"],Dk=["rowspan"],Rk=["value","onChange"],Nk=["rowspan"],Bk=["onClick"],Fk=["onClick"],zk=["onClick"],Uk={style:{color:"#999","font-style":"italic"}},Hk={class:"hide-on-mobile"},Vk=["onClick"],Zk=["onClick"],qk={__name:"MarshalsTab",props:{marshals:{type:Array,required:!0},assignments:{type:Array,required:!0},locations:{type:Array,required:!0}},emits:["add-marshal","import-marshals","select-marshal","delete-marshal","change-assignment-status"],setup(e,{emit:n}){const{terms:i}=mt(),a=e,s=$("name"),r=$("asc"),l=k=>{s.value===k?r.value=r.value==="asc"?"desc":"asc":(s.value=k,r.value="asc")},d=k=>a.assignments.filter(x=>x.marshalId===k),h=k=>{const x=a.locations.find(M=>M.id===k);return x?x.name:"Unknown"},m=ne(()=>{const k=[...a.marshals];return k.sort((x,M)=>{let P=0;if(s.value==="name")P=x.name.localeCompare(M.name);else if(s.value==="checkpoint"){const R=d(x.id),T=d(M.id),A=R.length>0?h(R[0].locationId):"",g=T.length>0?h(T[0].locationId):"";P=Lk(A,g)}else if(s.value==="status"){const R=d(x.id),T=d(M.id),A=R.length>0&&R[0].isCheckedIn?1:0;P=(T.length>0&&T[0].isCheckedIn?1:0)-A}return r.value==="asc"?P:-P}),k}),f=k=>k.isAdminCheckedIn?"admin-checked-in":k.isWrongLocation?"wrong-location":k.isCheckedIn?"checked-in":"not-checked-in",v=k=>k.isCheckedIn?"status-checked-in":"status-not-checked-in";return(k,x)=>(_(),b("div",Ak,[u("div",Ek,[u("h2",null,I(H(i).people)+" management",1),u("div",Tk,[u("button",{onClick:x[0]||(x[0]=M=>k.$emit("add-marshal")),class:"btn btn-primary"}," Add "+I(H(i).person.toLowerCase()),1),u("button",{onClick:x[1]||(x[1]=M=>k.$emit("import-marshals")),class:"btn btn-secondary"}," Import CSV ")])]),u("div",Ik,[u("table",Sk,[u("thead",null,[u("tr",null,[u("th",{onClick:x[2]||(x[2]=M=>l("name")),class:"sortable"},[x[8]||(x[8]=He(" Name ",-1)),s.value==="name"?(_(),b("span",Mk,I(r.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:x[3]||(x[3]=M=>l("checkpoint")),class:"sortable"},[He(I(H(i).checkpoint)+" ",1),s.value==="checkpoint"?(_(),b("span",Pk,I(r.value==="asc"?"":""),1)):B("",!0)]),u("th",{onClick:x[4]||(x[4]=M=>l("status")),class:"sortable"},[x[9]||(x[9]=He(" Status ",-1)),s.value==="status"?(_(),b("span",$k,I(r.value==="asc"?"":""),1)):B("",!0)]),x[10]||(x[10]=u("th",{class:"hide-on-mobile"},"Actions",-1))])]),u("tbody",null,[(_(!0),b(be,null,$e(m.value,M=>(_(),b(be,{key:M.id},[d(M.id).length>0?(_(!0),b(be,{key:0},$e(d(M.id),(P,R)=>(_(),b("tr",{key:`${M.id}-${P.id}`,class:"marshal-row",onClick:T=>k.$emit("select-marshal",M)},[R===0?(_(),b("td",{key:0,rowspan:d(M.id).length},I(M.name),9,Dk)):B("",!0),u("td",null,I(h(P.locationId)),1),u("td",{onClick:x[5]||(x[5]=wt(()=>{},["stop"]))},[u("select",{value:f(P),onChange:T=>k.$emit("change-assignment-status",{assignment:P,status:T.target.value}),class:Ve(["status-select hide-on-mobile",v(P)])},[...x[11]||(x[11]=[u("option",{value:"not-checked-in"},"Not checked-in",-1),u("option",{value:"checked-in"},"Checked-in",-1),u("option",{value:"admin-checked-in"},"Admin checked-in",-1),u("option",{value:"wrong-location"},"Checked-in but not at correct location",-1)])],42,Rk),u("span",{class:Ve(["status-icon show-on-mobile",v(P)])},I(H(xk)(P)),3)]),R===0?(_(),b("td",{key:1,rowspan:d(M.id).length,class:"hide-on-mobile"},[u("div",{class:"action-buttons",onClick:x[6]||(x[6]=wt(()=>{},["stop"]))},[u("button",{onClick:T=>k.$emit("select-marshal",M),class:"btn btn-small btn-secondary"}," Edit ",8,Bk),u("button",{onClick:T=>k.$emit("delete-marshal",M),class:"btn btn-small btn-danger"}," Delete ",8,Fk)])],8,Nk)):B("",!0)],8,Ok))),128)):(_(),b("tr",{key:1,class:"marshal-row",onClick:P=>k.$emit("select-marshal",M)},[u("td",null,I(M.name),1),u("td",Uk,"No "+I(H(i).checkpoint.toLowerCase())+" assigned",1),x[12]||(x[12]=u("td",null,[u("span",{class:"hide-on-mobile"},"-"),u("span",{class:"status-icon show-on-mobile",style:{color:"#999"}},"-")],-1)),u("td",Hk,[u("div",{class:"action-buttons",onClick:x[7]||(x[7]=wt(()=>{},["stop"]))},[u("button",{onClick:P=>k.$emit("select-marshal",M),class:"btn btn-small btn-secondary"}," Edit ",8,Vk),u("button",{onClick:P=>k.$emit("delete-marshal",M),class:"btn btn-small btn-danger"}," Delete ",8,Zk)])])],8,zk))],64))),128))])])])]))}},Wk=Ze(qk,[["__scopeId","data-v-47bbd924"]]),jk={class:"checklists-tab"},Gk={class:"checklists-tab-header"},Kk={class:"button-group"},Yk={class:"filters-section"},Jk={class:"filter-group"},Xk={class:"filter-checkbox"},Qk=["checked"],ew={key:0,class:"checkbox-dropdown"},tw={class:"checkbox-dropdown-header"},nw={class:"checkbox-list"},sw=["checked","onChange"],iw={class:"filter-group"},ow={class:"filter-checkbox"},aw=["checked"],rw={key:0,class:"checkbox-dropdown"},lw={class:"checkbox-dropdown-header"},cw={class:"checkbox-list"},uw=["checked","onChange"],dw={class:"filter-group"},hw={class:"filter-checkbox"},fw=["checked"],pw={key:0,class:"checkbox-dropdown"},mw={class:"checkbox-dropdown-header"},vw={class:"checkbox-list"},gw=["checked","onChange"],_w={class:"checklist-items-list"},yw={key:0,class:"empty-state"},bw={class:"checklist-item-content"},kw=["onClick"],ww={class:"checklist-item-scopes"},Cw=["onClick"],Lw={__name:"ChecklistsTab",props:{checklistItems:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},completionReport:{type:Object,default:null}},emits:["add-checklist-item","select-checklist-item"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=$(!0),l=$(!0),d=$(!0),h=$([]),m=$([]),f=$([]),v=ne(()=>[...s.areas].sort((Ce,K)=>Ce.displayOrder!==K.displayOrder?Ce.displayOrder-K.displayOrder:fn(Ce.name,K.name))),k=ne(()=>[...s.locations].sort((Ce,K)=>fn(Ce.name,K.name))),x=ne(()=>[...s.marshals].sort((Ce,K)=>fn(Ce.name,K.name))),M=ne(()=>s.areas.length>0&&h.value.length===s.areas.length),P=ne(()=>s.locations.length>0&&m.value.length===s.locations.length),R=ne(()=>s.marshals.length>0&&f.value.length===s.marshals.length),T=ne(()=>!r.value||!l.value||!d.value),A=()=>{r.value=!r.value,!r.value&&h.value.length===0&&(h.value=s.areas.map(Ce=>Ce.id))},g=()=>{l.value=!l.value,!l.value&&m.value.length===0&&(m.value=s.locations.map(Ce=>Ce.id))},C=()=>{d.value=!d.value,!d.value&&f.value.length===0&&(f.value=s.marshals.map(Ce=>Ce.id))},w=Ce=>{const K=h.value.indexOf(Ce);K>=0?h.value.splice(K,1):h.value.push(Ce)},E=Ce=>{const K=m.value.indexOf(Ce);K>=0?m.value.splice(K,1):m.value.push(Ce)},O=Ce=>{const K=f.value.indexOf(Ce);K>=0?f.value.splice(K,1):f.value.push(Ce)},W=()=>{M.value?h.value=[]:h.value=s.areas.map(Ce=>Ce.id)},V=()=>{P.value?m.value=[]:m.value=s.locations.map(Ce=>Ce.id)},se=()=>{R.value?f.value=[]:f.value=s.marshals.map(Ce=>Ce.id)},ge=()=>{r.value=!0,l.value=!0,d.value=!0,h.value=[],m.value=[],f.value=[]},Se=Ce=>{const K=s.marshals.find(he=>he.id===Ce);return!K||!K.assignments?[]:K.assignments.map(he=>he.locationId)},Me=Ce=>{const K=new Set;return Ce.forEach(he=>{const Ee=s.locations.find(Re=>Re.id===he);Ee&&Ee.areaIds&&Ee.areaIds.forEach(Re=>K.add(Re))}),Array.from(K)},ie=(Ce,K)=>{if(!K)return!1;const he=Se(Ce),Ee=Me(he);return K.scope==="SpecificPeople"&&K.itemType==="Marshal"?K.ids.includes(Ce)||K.ids.includes("ALL_MARSHALS"):K.scope==="EveryoneAtCheckpoints"&&K.itemType==="Checkpoint"?K.ids.includes("ALL_CHECKPOINTS")||he.some(Re=>K.ids.includes(Re)):K.scope==="OnePerCheckpoint"&&K.itemType==="Checkpoint"?K.ids.includes("ALL_CHECKPOINTS")||he.some(Re=>K.ids.includes(Re)):K.scope==="OnePerCheckpoint"&&K.itemType==="Area"?K.ids.includes("ALL_AREAS")||Ee.some(Re=>K.ids.includes(Re)):K.scope==="EveryoneInAreas"&&K.itemType==="Area"?K.ids.includes("ALL_AREAS")||Ee.some(Re=>K.ids.includes(Re)):K.scope==="OnePerArea"&&K.itemType==="Area"?K.ids.includes("ALL_AREAS")||Ee.some(Re=>K.ids.includes(Re)):(K.scope==="EveryAreaLead"||K.scope==="OneLeadPerArea")&&K.itemType==="Area"?K.ids.includes("ALL_AREAS")||Ee.some(Re=>K.ids.includes(Re)):!1},ue=ne(()=>{let Ce=s.checklistItems;return!r.value&&h.value.length>0&&(Ce=Ce.filter(K=>K.scopeConfigurations?K.scopeConfigurations.some(he=>he.itemType==="Area"&&h.value.some(Ee=>he.ids.includes(Ee))):!1)),!l.value&&m.value.length>0&&(Ce=Ce.filter(K=>K.scopeConfigurations?K.scopeConfigurations.some(he=>he.itemType==="Checkpoint"&&m.value.some(Ee=>he.ids.includes(Ee))):!1)),!d.value&&f.value.length>0&&(Ce=Ce.filter(K=>K.scopeConfigurations?f.value.some(he=>K.scopeConfigurations.some(Ee=>ie(he,Ee))):!1)),Ce}),de=ne(()=>[...ue.value].sort((Ce,K)=>Ce.displayOrder!==K.displayOrder?Ce.displayOrder-K.displayOrder:fn(Ce.text,K.text))),Ae=Ce=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${a.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${a.value.checkpoints}`,SpecificPeople:`Specific ${a.value.people}`,OnePerArea:`One per ${a.value.area}`,OnePerCheckpoint:`One per ${a.value.checkpoint}`,EveryAreaLead:`Every ${a.value.area} lead`,OneLeadPerArea:`One lead per ${a.value.area}`,AreaLead:`${i.value.area} lead`})[Ce]||Ce,pe=Ce=>{if(!Ce)return"";const K=Ae(Ce.scope);if(Ce.itemType===null)return K;const he=Ce.ids||[];if(he.includes("ALL_MARSHALS"))return`${K} (Everyone)`;if(he.includes("ALL_AREAS"))return`${K} (All ${a.value.areas})`;if(he.includes("ALL_CHECKPOINTS"))return`${K} (All ${a.value.checkpoints})`;const Ee=he.length;return Ee===0?K:`${K} (${Ee})`};return(Ce,K)=>(_(),b("div",jk,[u("div",Gk,[u("h2",null,I(H(i).checklists),1),u("div",Kk,[u("button",{onClick:K[0]||(K[0]=he=>Ce.$emit("add-checklist-item")),class:"btn btn-primary"}," Add "+I(H(a).checklist),1)])]),u("div",Yk,[u("div",Jk,[u("h4",null,"Filter by "+I(H(a).area)+":",1),u("label",Xk,[u("input",{type:"checkbox",checked:r.value,onChange:A},null,40,Qk),He(" All "+I(H(a).areas),1)]),r.value?B("",!0):(_(),b("div",ew,[u("div",tw,[u("button",{onClick:W,class:"toggle-all-btn"},I(M.value?"Deselect all":"Select all"),1)]),u("div",nw,[(_(!0),b(be,null,$e(v.value,he=>(_(),b("label",{key:he.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:h.value.includes(he.id),onChange:Ee=>w(he.id)},null,40,sw),u("span",{class:"area-color-dot",style:Yt({backgroundColor:he.color||"#667eea"})},null,4),He(" "+I(he.name),1)]))),128))])]))]),u("div",iw,[u("h4",null,"Filter by "+I(H(a).checkpoint)+":",1),u("label",ow,[u("input",{type:"checkbox",checked:l.value,onChange:g},null,40,aw),He(" All "+I(H(a).checkpoints),1)]),l.value?B("",!0):(_(),b("div",rw,[u("div",lw,[u("button",{onClick:V,class:"toggle-all-btn"},I(P.value?"Deselect all":"Select all"),1)]),u("div",cw,[(_(!0),b(be,null,$e(k.value,he=>(_(),b("label",{key:he.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:m.value.includes(he.id),onChange:Ee=>E(he.id)},null,40,uw),He(" "+I(he.name),1)]))),128))])]))]),u("div",dw,[u("h4",null,"Filter by "+I(H(a).person)+":",1),u("label",hw,[u("input",{type:"checkbox",checked:d.value,onChange:C},null,40,fw),He(" All "+I(H(a).people),1)]),d.value?B("",!0):(_(),b("div",pw,[u("div",mw,[u("button",{onClick:se,class:"toggle-all-btn"},I(R.value?"Deselect all":"Select all"),1)]),u("div",vw,[(_(!0),b(be,null,$e(x.value,he=>(_(),b("label",{key:he.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:f.value.includes(he.id),onChange:Ee=>O(he.id)},null,40,gw),He(" "+I(he.name),1)]))),128))])]))]),T.value?(_(),b("button",{key:0,onClick:ge,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",_w,[ue.value.length===0?(_(),b("div",yw,[u("p",null,I(T.value?"No checklist items match the selected filters.":"No checklist items yet. Create one to get started!"),1)])):B("",!0),(_(!0),b(be,null,$e(de.value,he=>(_(),b("div",{key:he.itemId,class:"checklist-item-card"},[u("div",bw,[u("div",{class:"checklist-item-title",onClick:Ee=>Ce.$emit("select-checklist-item",he,"details")},[u("strong",null,I(he.text),1)],8,kw),u("div",ww,[(_(!0),b(be,null,$e(he.scopeConfigurations,(Ee,Re)=>(_(),b("span",{key:Re,class:"scope-badge",onClick:me=>Ce.$emit("select-checklist-item",he,"visibility")},I(pe(Ee)),9,Cw))),128))])])]))),128))])]))}},xw=Ze(Lw,[["__scopeId","data-v-5b51ce47"]]),Aw={class:"notes-tab"},Ew={class:"notes-tab-header"},Tw={class:"button-group"},Iw={class:"filters-section"},Sw={class:"filter-group"},Mw={class:"priority-filters"},Pw=["checked","onChange"],$w={class:"filter-group"},Ow={class:"filter-checkbox"},Dw=["checked"],Rw={key:0,class:"checkbox-dropdown"},Nw={class:"checkbox-list"},Bw=["checked","onChange"],Fw={class:"notes-list"},zw={key:0,class:"empty-state"},Uw=["onClick"],Hw={class:"note-header"},Vw={class:"note-title-row"},Zw={key:0,class:"pin-icon",title:"Pinned"},qw={class:"note-meta"},Ww={key:0,class:"category-badge"},jw={class:"created-info"},Gw={key:0,class:"note-preview"},Kw={class:"note-scopes"},Yw={__name:"NotesTab",props:{notes:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]}},emits:["add-note","select-note"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=[{value:"Urgent",label:"Urgent"},{value:"High",label:"High"},{value:"Normal",label:"Normal"},{value:"Low",label:"Low"}],r=$(!0),l=$([]),d=$(["Urgent","High","Normal","Low"]),h=ne(()=>[...a.areas].sort((C,w)=>C.displayOrder!==w.displayOrder?C.displayOrder-w.displayOrder:fn(C.name,w.name))),m=ne(()=>!r.value||d.value.length<4),f=()=>{r.value=!r.value,!r.value&&l.value.length===0&&(l.value=a.areas.map(C=>C.id))},v=C=>{const w=l.value.indexOf(C);w>=0?l.value.splice(w,1):l.value.push(C)},k=C=>{const w=d.value.indexOf(C);w>=0?d.value.splice(w,1):d.value.push(C)},x=()=>{r.value=!0,l.value=[],d.value=["Urgent","High","Normal","Low"]},M=ne(()=>{let C=a.notes;return d.value.length<4&&(C=C.filter(w=>d.value.includes(w.priority||"Normal"))),!r.value&&l.value.length>0&&(C=C.filter(w=>w.scopeConfigurations?w.scopeConfigurations.some(E=>E.itemType==="Area"&&l.value.some(O=>E.ids.includes(O))):!1)),C}),P=ne(()=>{const C={Urgent:0,High:1,Normal:2,Low:3};return[...M.value].sort((w,E)=>{if(w.isPinned!==E.isPinned)return w.isPinned?-1:1;const O=C[w.priority]??2,W=C[E.priority]??2;return O!==W?O-W:w.displayOrder!==E.displayOrder?w.displayOrder-E.displayOrder:fn(w.title,E.title)})}),R=C=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,OnePerArea:`One per ${i.value.area}`,OneLeadPerArea:`One lead per ${i.value.area}`})[C]||C,T=C=>{if(!C)return"";const w=R(C.scope);if(C.itemType===null)return w;const E=C.ids||[];if(E.includes("ALL_MARSHALS"))return`${w} (Everyone)`;if(E.includes("ALL_AREAS"))return`${w} (All ${i.value.areas})`;if(E.includes("ALL_CHECKPOINTS"))return`${w} (All ${i.value.checkpoints})`;const O=E.length;return O===0?w:`${w} (${O})`},A=C=>{if(!C)return"";const w=150;return C.length<=w?C:C.substring(0,w)+"..."},g=C=>{if(!C)return"";const w=new Date(C),O=new Date-w,W=Math.floor(O/6e4),V=Math.floor(O/36e5),se=Math.floor(O/864e5);return W<1?"Just now":W<60?`${W}m ago`:V<24?`${V}h ago`:se<7?`${se}d ago`:w.toLocaleDateString()};return(C,w)=>(_(),b("div",Aw,[u("div",Ew,[w[1]||(w[1]=u("h2",null,"Notes",-1)),u("div",Tw,[u("button",{onClick:w[0]||(w[0]=E=>C.$emit("add-note")),class:"btn btn-primary"}," Add note ")])]),u("div",Iw,[u("div",Sw,[w[2]||(w[2]=u("h4",null,"Filter by priority:",-1)),u("div",Mw,[(_(),b(be,null,$e(s,E=>u("label",{key:E.value,class:"filter-checkbox"},[u("input",{type:"checkbox",checked:d.value.includes(E.value),onChange:O=>k(E.value)},null,40,Pw),u("span",{class:Ve(["priority-dot",E.value.toLowerCase()])},null,2),He(" "+I(E.label),1)])),64))])]),u("div",$w,[w[4]||(w[4]=u("h4",null,"Filter by area:",-1)),u("label",Ow,[u("input",{type:"checkbox",checked:r.value,onChange:f},null,40,Dw),w[3]||(w[3]=He(" All areas ",-1))]),r.value?B("",!0):(_(),b("div",Rw,[u("div",Nw,[(_(!0),b(be,null,$e(h.value,E=>(_(),b("label",{key:E.id,class:"checkbox-item"},[u("input",{type:"checkbox",checked:l.value.includes(E.id),onChange:O=>v(E.id)},null,40,Bw),u("span",{class:"area-color-dot",style:Yt({backgroundColor:E.color||"#667eea"})},null,4),He(" "+I(E.name),1)]))),128))])]))]),m.value?(_(),b("button",{key:0,onClick:x,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",Fw,[M.value.length===0?(_(),b("div",zw,[u("p",null,I(m.value?"No notes match the selected filters.":"No notes yet. Create one to get started!"),1)])):B("",!0),(_(!0),b(be,null,$e(P.value,E=>(_(),b("div",{key:E.noteId,class:Ve(["note-card",{pinned:E.isPinned}]),onClick:O=>C.$emit("select-note",E)},[u("div",Hw,[u("div",Vw,[E.isPinned?(_(),b("span",Zw,"")):B("",!0),u("span",{class:Ve(["priority-indicator",E.priority?.toLowerCase()||"normal"])},null,2),u("strong",null,I(E.title),1)]),u("div",qw,[E.category?(_(),b("span",Ww,I(E.category),1)):B("",!0),u("span",jw,I(g(E.createdAt)),1)])]),E.content?(_(),b("div",Gw,I(A(E.content)),1)):B("",!0),u("div",Kw,[(_(!0),b(be,null,$e(E.scopeConfigurations,(O,W)=>(_(),b("span",{key:W,class:"scope-badge"},I(T(O)),1))),128))])],10,Uw))),128))])]))}},Jw=Ze(Yw,[["__scopeId","data-v-f0d2cbb3"]]),Xw={class:"contacts-tab"},Qw={class:"contacts-tab-header"},eC={class:"button-group"},tC={class:"filters-section"},nC={class:"filter-group"},sC={class:"filter-checkbox"},iC=["checked"],oC={key:0,class:"checkbox-dropdown"},aC={class:"checkbox-list"},rC=["checked","onChange"],lC={class:"contacts-list"},cC={key:0,class:"empty-state"},uC=["onClick"],dC={class:"contact-header"},hC={class:"contact-title-row"},fC={key:0,class:"primary-badge",title:"Primary contact"},pC={class:"role-badge"},mC={class:"contact-details"},vC={key:0,class:"contact-phone"},gC={key:1,class:"contact-email"},_C={key:0,class:"contact-notes"},yC={class:"contact-scopes"},bC={__name:"ContactsTab",props:{contacts:{type:Array,required:!0},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})}},emits:["add-contact","select-contact"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=$(!0),r=$([]),l=ne(()=>{const T=new Set([...a.availableRoles.builtInRoles||[],...a.availableRoles.customRoles||[],...a.contacts.map(A=>A.role)]);return Array.from(T).sort()}),d=ne(()=>!s.value),h=()=>{s.value=!s.value,!s.value&&r.value.length===0&&(r.value=[...l.value])},m=T=>{const A=r.value.indexOf(T);A>=0?r.value.splice(A,1):r.value.push(T)},f=()=>{s.value=!0,r.value=[]},v=ne(()=>{let T=a.contacts;return!s.value&&r.value.length>0&&(T=T.filter(A=>r.value.includes(A.role))),T}),k=ne(()=>[...v.value].sort((T,A)=>{if(T.isPrimary!==A.isPrimary)return T.isPrimary?-1:1;const g=T.role.localeCompare(A.role);return g!==0?g:T.displayOrder!==A.displayOrder?T.displayOrder-A.displayOrder:fn(T.name,A.name)})),x=T=>T?T.replace(/([A-Z])/g," $1").replace(/^./,A=>A.toUpperCase()).trim():"",M=T=>({Everyone:"Everyone",EveryoneInAreas:`Everyone in ${i.value.areas}`,EveryoneAtCheckpoints:`Everyone at ${i.value.checkpoints}`,SpecificPeople:`Specific ${i.value.people}`,EveryAreaLead:`Every ${i.value.area} lead`})[T]||T,P=T=>{if(!T)return"";const A=M(T.scope);if(T.itemType===null)return A;const g=T.ids||[];if(g.includes("ALL_MARSHALS"))return`${A} (Everyone)`;if(g.includes("ALL_AREAS"))return`${A} (All ${i.value.areas})`;if(g.includes("ALL_CHECKPOINTS"))return`${A} (All ${i.value.checkpoints})`;const C=g.length;return C===0?A:`${A} (${C})`},R=T=>{if(!T)return"";const A=100;return T.length<=A?T:T.substring(0,A)+"..."};return(T,A)=>(_(),b("div",Xw,[u("div",Qw,[A[1]||(A[1]=u("h2",null,"Contacts",-1)),u("div",eC,[u("button",{onClick:A[0]||(A[0]=g=>T.$emit("add-contact")),class:"btn btn-primary"}," Add contact ")])]),u("div",tC,[u("div",nC,[A[3]||(A[3]=u("h4",null,"Filter by role:",-1)),u("label",sC,[u("input",{type:"checkbox",checked:s.value,onChange:h},null,40,iC),A[2]||(A[2]=He(" All roles ",-1))]),s.value?B("",!0):(_(),b("div",oC,[u("div",aC,[(_(!0),b(be,null,$e(l.value,g=>(_(),b("label",{key:g,class:"checkbox-item"},[u("input",{type:"checkbox",checked:r.value.includes(g),onChange:C=>m(g)},null,40,rC),He(" "+I(x(g)),1)]))),128))])]))]),d.value?(_(),b("button",{key:0,onClick:f,class:"btn btn-secondary btn-small"}," Clear filters ")):B("",!0)]),u("div",lC,[v.value.length===0?(_(),b("div",cC,[u("p",null,I(d.value?"No contacts match the selected filters.":"No contacts yet. Create one to get started!"),1)])):B("",!0),(_(!0),b(be,null,$e(k.value,g=>(_(),b("div",{key:g.contactId,class:Ve(["contact-card",{primary:g.isPrimary}]),onClick:C=>T.$emit("select-contact",g)},[u("div",dC,[u("div",hC,[g.isPrimary?(_(),b("span",fC,"")):B("",!0),u("strong",null,I(g.name),1),u("span",pC,I(x(g.role)),1)]),u("div",mC,[g.phone?(_(),b("span",vC,I(g.phone),1)):B("",!0),g.email?(_(),b("span",gC,I(g.email),1)):B("",!0)])]),g.notes?(_(),b("div",_C,I(R(g.notes)),1)):B("",!0),u("div",yC,[(_(!0),b(be,null,$e(g.scopeConfigurations,(C,w)=>(_(),b("span",{key:w,class:"scope-badge"},I(P(C)),1))),128))])],10,uC))),128))])]))}},kC=Ze(bC,[["__scopeId","data-v-8c624795"]]),wC={class:"admins-list"},CC={class:"admin-info"},LC={class:"admin-role"},xC=["onClick"],AC={__name:"AdminsList",props:{admins:{type:Array,required:!0}},emits:["add-admin","remove-admin"],setup(e){return(n,i)=>(_(),b("div",null,[i[1]||(i[1]=u("h3",null,"Event administrators",-1)),u("button",{onClick:i[0]||(i[0]=a=>n.$emit("add-admin")),class:"btn btn-small btn-primary"}," Add administrator "),u("div",wC,[(_(!0),b(be,null,$e(e.admins,a=>(_(),b("div",{key:a.userEmail,class:"admin-item"},[u("div",CC,[u("strong",null,I(a.userEmail),1),u("span",LC,I(a.role),1)]),e.admins.length>1?(_(),b("button",{key:0,onClick:s=>n.$emit("remove-admin",a.userEmail),class:"btn btn-small btn-danger"}," Remove ",8,xC)):B("",!0)]))),128))])]))}},EC=Ze(AC,[["__scopeId","data-v-c76441fb"]]),TC={class:"event-details-tab"},IC={class:"accordion"},SC={class:"accordion-section"},MC={class:"accordion-icon"},PC={key:0,class:"accordion-content"},$C={class:"form-group"},OC={class:"form-group"},DC={class:"form-group"},RC={class:"form-group"},NC=["value"],BC={class:"form-actions"},FC=["disabled"],zC={class:"accordion-section"},UC={class:"accordion-title"},HC={class:"accordion-icon"},VC={key:0,class:"accordion-content"},ZC={class:"accordion-section"},qC={class:"accordion-icon"},WC={key:0,class:"accordion-content"},jC={class:"terminology-grid"},GC={class:"term-group"},KC=["value"],YC={class:"term-group"},JC=["value"],XC={class:"term-group"},QC=["value"],eL={class:"term-group"},tL=["value"],nL={class:"term-group"},sL=["value"],iL={class:"form-actions"},oL=["disabled"],aL={__name:"EventDetailsTab",props:{eventData:{type:Object,required:!0},admins:{type:Array,default:()=>[]},formDirty:{type:Boolean,default:!1}},emits:["submit","add-admin","remove-admin","update:formDirty"],setup(e,{emit:n}){const{terms:i}=mt(),a=e,s=n,r=$({...a.eventData}),l=$(null),d=f=>{l.value=l.value===f?null:f};We(()=>a.eventData,f=>{r.value={...f}},{deep:!0});const h=()=>{s("update:formDirty",!0)},m=()=>{s("submit",{...r.value})};return(f,v)=>(_(),b("div",TC,[u("div",IC,[u("div",SC,[u("button",{class:Ve(["accordion-header",{active:l.value==="info"}]),onClick:v[0]||(v[0]=k=>d("info"))},[v[14]||(v[14]=u("span",{class:"accordion-title"},"Event Information",-1)),u("span",MC,I(l.value==="info"?"":"+"),1)],2),l.value==="info"?(_(),b("div",PC,[u("form",{onSubmit:wt(m,["prevent"]),class:"event-details-form"},[u("div",$C,[v[15]||(v[15]=u("label",null,"Event Name",-1)),Pe(u("input",{"onUpdate:modelValue":v[1]||(v[1]=k=>r.value.name=k),type:"text",required:"",class:"form-input",onInput:h},null,544),[[st,r.value.name]])]),u("div",OC,[v[16]||(v[16]=u("label",null,"Description",-1)),Pe(u("textarea",{"onUpdate:modelValue":v[2]||(v[2]=k=>r.value.description=k),rows:"3",class:"form-input",onInput:h},null,544),[[st,r.value.description]])]),u("div",DC,[v[17]||(v[17]=u("label",null,"Event Date & Time",-1)),Pe(u("input",{"onUpdate:modelValue":v[3]||(v[3]=k=>r.value.eventDate=k),type:"datetime-local",required:"",class:"form-input",onInput:h},null,544),[[st,r.value.eventDate]])]),u("div",RC,[v[18]||(v[18]=u("label",null,"Time Zone",-1)),Pe(u("select",{"onUpdate:modelValue":v[4]||(v[4]=k=>r.value.timeZoneId=k),required:"",class:"form-input",onChange:h},[(_(!0),b(be,null,$e(H(sf),k=>(_(),b("option",{key:k.value,value:k.value},I(k.label),9,NC))),128))],544),[[dn,r.value.timeZoneId]])]),u("div",BC,[u("button",{type:"submit",class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,FC)])],32)])):B("",!0)]),u("div",zC,[u("button",{class:Ve(["accordion-header",{active:l.value==="admins"}]),onClick:v[5]||(v[5]=k=>d("admins"))},[u("span",UC,"Administrators ("+I(e.admins.length)+")",1),u("span",HC,I(l.value==="admins"?"":"+"),1)],2),l.value==="admins"?(_(),b("div",VC,[Ne(EC,{admins:e.admins,onAddAdmin:v[6]||(v[6]=k=>f.$emit("add-admin")),onRemoveAdmin:v[7]||(v[7]=k=>f.$emit("remove-admin",k))},null,8,["admins"])])):B("",!0)]),u("div",ZC,[u("button",{class:Ve(["accordion-header",{active:l.value==="terminology"}]),onClick:v[8]||(v[8]=k=>d("terminology"))},[v[19]||(v[19]=u("span",{class:"accordion-title"},"Terminology Settings",-1)),u("span",qC,I(l.value==="terminology"?"":"+"),1)],2),l.value==="terminology"?(_(),b("div",WC,[v[20]||(v[20]=u("p",{class:"section-description"}," Customise how things are named throughout the application. ",-1)),u("div",jC,[u("div",GC,[u("label",null,I(H(i).people)+" are called",1),Pe(u("select",{"onUpdate:modelValue":v[9]||(v[9]=k=>r.value.peopleTerm=k),class:"form-input",onChange:h},[(_(!0),b(be,null,$e(H(ko).people,k=>(_(),b("option",{key:k,value:k},I(k),9,KC))),128))],544),[[dn,r.value.peopleTerm]])]),u("div",YC,[u("label",null,I(H(i).checkpoints)+" are called",1),Pe(u("select",{"onUpdate:modelValue":v[10]||(v[10]=k=>r.value.checkpointTerm=k),class:"form-input",onChange:h},[(_(!0),b(be,null,$e(H(ko).checkpoint,k=>(_(),b("option",{key:k,value:k},I(k),9,JC))),128))],544),[[dn,r.value.checkpointTerm]])]),u("div",XC,[u("label",null,I(H(i).areas)+" are called",1),Pe(u("select",{"onUpdate:modelValue":v[11]||(v[11]=k=>r.value.areaTerm=k),class:"form-input",onChange:h},[(_(!0),b(be,null,$e(H(ko).area,k=>(_(),b("option",{key:k,value:k},I(k),9,QC))),128))],544),[[dn,r.value.areaTerm]])]),u("div",eL,[u("label",null,I(H(i).checklists)+" are called",1),Pe(u("select",{"onUpdate:modelValue":v[12]||(v[12]=k=>r.value.checklistTerm=k),class:"form-input",onChange:h},[(_(!0),b(be,null,$e(H(ko).checklist,k=>(_(),b("option",{key:k,value:k},I(k),9,tL))),128))],544),[[dn,r.value.checklistTerm]])]),u("div",nL,[u("label",null,I(H(i).course)+" is called",1),Pe(u("select",{"onUpdate:modelValue":v[13]||(v[13]=k=>r.value.courseTerm=k),class:"form-input",onChange:h},[(_(!0),b(be,null,$e(H(ko).course,k=>(_(),b("option",{key:k,value:k},I(k),9,sL))),128))],544),[[dn,r.value.courseTerm]])])]),u("div",iL,[u("button",{onClick:m,class:"btn btn-primary",disabled:!e.formDirty}," Save Changes ",8,oL)])])):B("",!0)])])]))}},rL=Ze(aL,[["__scopeId","data-v-2b66b552"]]),lL={class:"button-group"},cL={key:0,class:"add-dropdown"},uL={key:0,class:"filter-group"},dL={class:"filter-checkbox"},hL=["checked"],fL={class:"locations-list"},pL=["onClick"],mL={class:"location-info"},vL={class:"location-header"},gL={class:"location-description"},_L={class:"location-status"},yL={class:"location-assignments"},bL={__name:"CheckpointsList",props:{locations:{type:Array,required:!0},areas:{type:Array,default:()=>[]}},emits:["add-checkpoint-manually","import-checkpoints","select-location"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$(!0),d=$([]),h=$(null),m=$(null),f=$(!1),v=()=>{f.value=!f.value},k=()=>{f.value=!1,r("add-checkpoint-manually")},x=()=>{f.value=!1,r("import-checkpoints")},M=g=>{m.value&&!m.value.contains(g.target)&&(f.value=!1)};wn(()=>{document.addEventListener("click",M)}),Ms(()=>{document.removeEventListener("click",M)});const P=()=>{l.value=!l.value,!l.value&&d.value.length===0&&(d.value=s.areas.map(g=>g.id))},R=ne(()=>{let g=s.locations;return!l.value&&d.value.length>0&&(g=g.filter(C=>(C.areaIds||C.AreaIds||[]).some(E=>d.value.includes(E)))),[...g].sort((C,w)=>fn(C.name,w.name))}),T=g=>{const C=s.areas.find(w=>w.id===g);return C?C.name:null},A=g=>{const C=s.areas.find(w=>w.id===g);return C?C.color:"#999"};return(g,C)=>(_(),b("div",null,[u("h3",null,I(H(i).checkpoints)+" ("+I(e.locations.length)+")",1),u("div",lL,[u("div",{class:"add-menu-wrapper",ref_key:"menuWrapperRef",ref:m},[u("button",{ref_key:"addButtonRef",ref:h,onClick:v,class:"btn btn-small btn-primary"}," Add... ",512),f.value?(_(),b("div",cL,[u("button",{onClick:k,class:"dropdown-item"}," Add "+I(H(a).checkpoint)+" manually ",1),u("button",{onClick:x,class:"dropdown-item"}," Import from CSV... ")])):B("",!0)],512)]),e.areas.length>0?(_(),b("div",uL,[u("h4",null,"Filter by "+I(H(i).area.toLowerCase())+":",1),u("label",dL,[u("input",{type:"checkbox",checked:l.value,onChange:P},null,40,hL),He(" All "+I(H(i).areas.toLowerCase())+" ("+I(e.locations.length)+") ",1)]),l.value?B("",!0):(_(),et(rf,{key:0,areas:e.areas,"selected-area-ids":d.value,"onUpdate:selectedAreaIds":C[0]||(C[0]=w=>d.value=w)},null,8,["areas","selected-area-ids"]))])):B("",!0),u("div",fL,[(_(!0),b(be,null,$e(R.value,w=>(_(),b("div",{key:w.id,class:Ve(["location-item",{"location-full":w.checkedInCount>=w.requiredMarshals,"location-missing":w.checkedInCount===0}]),onClick:E=>g.$emit("select-location",w)},[u("div",mL,[u("div",vL,[u("strong",null,I(w.name),1),(_(!0),b(be,null,$e(w.areaIds||w.AreaIds||[],E=>(_(),b("span",{key:E,class:"area-badge",style:Yt({backgroundColor:A(E)})},I(T(E)),5))),128))]),u("span",gL,I(w.description),1),u("span",_L,I(w.checkedInCount)+"/"+I(w.requiredMarshals),1)]),u("div",yL,[(_(!0),b(be,null,$e(w.assignments,E=>(_(),b("span",{key:E.id,class:Ve(["assignment-badge",{"checked-in":E.isCheckedIn}])},I(E.marshalName),3))),128))])],10,pL))),128))])]))}},kL=Ze(bL,[["__scopeId","data-v-6e64a151"]]),wL={class:"button-group"},CL={class:"areas-list"},LL=["onClick"],xL={class:"area-info"},AL={class:"area-header"},EL={key:0,class:"default-badge"},TL={key:0,class:"area-description"},IL={class:"area-stats"},SL={class:"stat-badge"},ML={class:"stat-badge"},PL={key:0,class:"empty-state"},$L={__name:"AreasList",props:{areas:{type:Array,required:!0},checkpoints:{type:Array,default:()=>[]}},emits:["add-area","select-area"],setup(e){const{terms:n,formatCount:i}=mt(),a=e,s=ne(()=>[...a.areas].sort((d,h)=>d.displayOrder!==h.displayOrder?d.displayOrder-h.displayOrder:fn(d.name,h.name))),r=d=>d.checkpointCount!==void 0?d.checkpointCount:a.checkpoints.filter(h=>h.areaId===d.id).length,l=d=>{if(!d.contacts)return 0;const h=typeof d.contacts=="string"?JSON.parse(d.contacts):d.contacts;return Array.isArray(h)?h.length:0};return(d,h)=>(_(),b("div",null,[u("h3",null,I(H(n).areas)+" ("+I(e.areas.length)+")",1),u("div",wL,[u("button",{onClick:h[0]||(h[0]=m=>d.$emit("add-area")),class:"btn btn-small btn-primary"}," Add "+I(H(n).area.toLowerCase()),1)]),u("div",CL,[(_(!0),b(be,null,$e(s.value,m=>(_(),b("div",{key:m.id,class:"area-item",style:Yt({borderLeftColor:m.color||"#667eea"}),onClick:f=>d.$emit("select-area",m)},[u("div",xL,[u("div",AL,[u("strong",null,I(m.name),1),m.isDefault?(_(),b("span",EL,"Default")):B("",!0)]),m.description?(_(),b("p",TL,I(m.description),1)):B("",!0),u("div",IL,[u("span",SL,I(H(i)("checkpoint",r(m))),1),u("span",ML,I(l(m))+" contact"+I(l(m)===1?"":"s"),1)])])],12,LL))),128)),e.areas.length===0?(_(),b("div",PL,[u("p",null,"No "+I(H(n).areas.toLowerCase())+' yet. Click "Add '+I(H(n).area.toLowerCase())+'" to create one.',1)])):B("",!0)])]))}},OL=Ze($L,[["__scopeId","data-v-1ef45bfd"]]),DL={course:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/><circle cx="18" cy="5" r="3"/></svg>',checkpoint:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>',area:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',marshal:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',checklist:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>',notes:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="16" y2="17"/></svg>',details:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M9 16h6"/></svg>',location:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>',map:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>',contacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',eventContacts:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 8V6a2 2 0 0 0-2-2h-2"/><path d="M22 12v2a2 2 0 0 1-2 2h-2"/></svg>',event:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>'},_n=e=>DL[e]||"",RL={class:"responsive-tabs"},NL={class:"visible-tabs"},BL=["onClick"],FL=["innerHTML"],zL={class:"hamburger-only"},UL=["innerHTML"],HL={class:"hamburger-label"},VL=["onClick"],ZL=["innerHTML"],qL={__name:"ResponsiveTabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,a=n,s=$(null),r=$(null),l=$(!1),d=$({}),h=ne(()=>i.tabs.find(x=>x.value===i.modelValue)),m=ne(()=>h.value?h.value.label:"Menu"),f=()=>{if(l.value=!l.value,l.value&&r.value){const x=r.value.getBoundingClientRect();d.value={top:`${x.bottom+4}px`}}},v=x=>{a("update:modelValue",x),l.value=!1},k=x=>{if(!s.value)return;const M=s.value.contains(x.target);l.value&&!M&&(l.value=!1)};return wn(()=>{document.addEventListener("click",k)}),Ms(()=>{document.removeEventListener("click",k)}),(x,M)=>(_(),b("div",RL,[u("div",NL,[(_(!0),b(be,null,$e(e.tabs,P=>(_(),b("button",{key:P.value,class:Ve(["tab-button",{active:e.modelValue===P.value}]),onClick:R=>x.$emit("update:modelValue",P.value),type:"button"},[P.icon?(_(),b("span",{key:0,class:"tab-icon",innerHTML:H(_n)(P.icon)},null,8,FL)):B("",!0),He(" "+I(P.label),1)],10,BL))),128))]),u("div",zL,[u("div",{class:"hamburger-menu",ref_key:"hamburgerMenu",ref:s},[u("button",{ref_key:"hamburgerButton",ref:r,class:Ve(["hamburger-button",{active:l.value}]),onClick:wt(f,["stop"]),type:"button"},[M[1]||(M[1]=u("span",{class:"hamburger-icon"},"",-1)),h.value?.icon?(_(),b("span",{key:0,class:"tab-icon",innerHTML:H(_n)(h.value.icon)},null,8,UL)):B("",!0),u("span",HL,I(m.value),1)],2),l.value?(_(),b("div",{key:0,class:"hamburger-dropdown",style:Yt(d.value),onClick:M[0]||(M[0]=wt(()=>{},["stop"]))},[(_(!0),b(be,null,$e(e.tabs,P=>(_(),b("button",{key:P.value,class:Ve(["dropdown-item",{active:e.modelValue===P.value}]),onClick:wt(R=>v(P.value),["stop"]),type:"button"},[P.icon?(_(),b("span",{key:0,class:"tab-icon",innerHTML:H(_n)(P.icon)},null,8,ZL)):B("",!0),He(" "+I(P.label),1)],10,VL))),128))],4)):B("",!0)],512)])]))}},WL=Ze(qL,[["__scopeId","data-v-1710ea17"]]),jL={class:"share-link-container"},GL=["value"],KL={__name:"ShareLinkModal",props:{show:{type:Boolean,default:!1},link:{type:String,required:!0},isDirty:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const i=n,a=$(!1),s=$(null),r=()=>{s.value&&(s.value.select(),document.execCommand("copy"),a.value=!0,setTimeout(()=>{a.value=!1},2e3))},l=()=>{i("close")};return(d,h)=>(_(),et(Nt,{show:e.show,title:"Marshal check-in link",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:l},{actions:Ye(()=>[u("button",{onClick:l,class:"btn btn-secondary"},"Close")]),default:Ye(()=>[h[0]||(h[0]=u("p",{class:"instruction"},"Share this link with marshals so they can check in:",-1)),u("div",jL,[u("input",{value:e.link,readonly:"",class:"form-input",ref_key:"linkInput",ref:s},null,8,GL),u("button",{onClick:r,class:"btn btn-primary"},I(a.value?"Copied!":"Copy"),1)])]),_:1},8,["show","is-dirty"]))}},YL=Ze(KL,[["__scopeId","data-v-e3c38c66"]]),JL={class:"success-content"},XL={class:"success-message"},QL={class:"link-section"},e1={class:"help-text"},t1={key:0,class:"loading-text"},n1={key:1,class:"magic-link-container"},s1=["value"],i1={class:"magic-link-actions"},o1=["disabled"],a1={key:0,class:"success-text"},r1={key:1,class:"error-text"},l1={key:2,class:"error-text"},c1={__name:"MarshalCreatedModal",props:{show:{type:Boolean,default:!1},eventId:{type:String,required:!0},marshalId:{type:String,default:null},marshalName:{type:String,default:""}},emits:["close"],setup(e,{emit:n}){const{terms:i}=mt(),a=e,s=n,r=$(""),l=$(!1),d=$(!1),h=$(""),m=$(!1),f=$(!1),v=$(!1),k=$(""),x=async()=>{if(!(!a.eventId||!a.marshalId)){d.value=!0,h.value="";try{const T=await In.getMagicLink(a.eventId,a.marshalId);r.value=T.data.magicLink,l.value=T.data.hasEmail}catch(T){console.error("Failed to fetch magic link:",T),h.value="Failed to load login link"}finally{d.value=!1}}},M=async()=>{try{await navigator.clipboard.writeText(r.value),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch(T){console.error("Failed to copy:",T)}},P=async()=>{if(!(!a.eventId||!a.marshalId)){f.value=!0,v.value=!1,k.value="";try{await In.sendMagicLink(a.eventId,a.marshalId),v.value=!0,setTimeout(()=>{v.value=!1},3e3)}catch(T){console.error("Failed to send email:",T),k.value=T.response?.data?.message||"Failed to send email"}finally{f.value=!1}}},R=()=>{s("close")};return We(()=>a.show,T=>{T&&a.marshalId?x():(r.value="",l.value=!1,h.value="",m.value=!1,v.value=!1,k.value="")},{immediate:!0}),(T,A)=>(_(),et(Nt,{show:e.show,title:`${H(i).person} created`,size:"medium","confirm-on-close":!1,"is-dirty":!1,onClose:R},{actions:Ye(()=>[u("button",{onClick:R,class:"btn btn-primary"},"Done")]),default:Ye(()=>[u("div",JL,[A[2]||(A[2]=u("div",{class:"success-icon"},"",-1)),u("p",XL,[u("strong",null,I(e.marshalName),1),A[1]||(A[1]=He(" has been added successfully. ",-1))])]),u("div",QL,[A[3]||(A[3]=u("label",null,"Login Link",-1)),u("p",e1," Share this unique link with "+I(e.marshalName)+" so they can access their dashboard and check in. ",1),d.value?(_(),b("div",t1,"Loading link...")):r.value?(_(),b("div",n1,[u("input",{type:"text",value:r.value,readonly:"",class:"form-input magic-link-input",onFocus:A[0]||(A[0]=g=>g.target.select())},null,40,s1),u("div",i1,[u("button",{type:"button",class:"btn btn-secondary",onClick:M},I(m.value?"Copied!":"Copy link"),1),l.value?(_(),b("button",{key:0,type:"button",class:"btn btn-primary",disabled:f.value,onClick:P},I(f.value?"Sending...":"Send via email"),9,o1)):B("",!0)]),v.value?(_(),b("p",a1,"Email sent successfully!")):B("",!0),k.value?(_(),b("p",r1,I(k.value),1)):B("",!0)])):h.value?(_(),b("div",l1,I(h.value),1)):B("",!0)])]),_:1},8,["show","title"]))}},u1=Ze(c1,[["__scopeId","data-v-f28f1004"]]),d1={class:"form-group"},h1={__name:"AddAdminModal",props:{show:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=$("");We(()=>i.show,h=>{h||(s.value="")});const r=()=>{a("update:isDirty",!0)},l=()=>{a("submit",s.value)},d=()=>{a("close")};return(h,m)=>(_(),et(Nt,{show:e.show,title:"Add event administrator",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:d},{actions:Ye(()=>[u("button",{type:"button",onClick:d,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary"}," Add administrator ")]),default:Ye(()=>[m[2]||(m[2]=u("p",{class:"instruction"},"Enter the email address of the administrator to add",-1)),u("form",{onSubmit:wt(l,["prevent"])},[u("div",d1,[m[1]||(m[1]=u("label",null,"Email address",-1)),Pe(u("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>s.value=f),type:"email",required:"",class:"form-input",placeholder:"admin@example.com",onInput:r},null,544),[[st,s.value]])])],32)]),_:1},8,["show","is-dirty"]))}},f1=Ze(h1,[["__scopeId","data-v-43ad537f"]]),p1={class:"form-group"},m1={key:0,class:"error"},v1=["disabled"],g1={__name:"UploadRouteModal",props:{show:{type:Boolean,default:!1},uploading:{type:Boolean,default:!1},error:{type:String,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=$(null);We(()=>i.show,h=>{h||(s.value=null)});const r=h=>{s.value=h.target.files[0],a("update:isDirty",!0)},l=()=>{s.value&&a("submit",s.value)},d=()=>{a("close")};return(h,m)=>(_(),et(Nt,{show:e.show,title:"Upload GPX route",size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:d},{actions:Ye(()=>[u("button",{type:"button",onClick:d,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:l,class:"btn btn-primary",disabled:e.uploading},I(e.uploading?"Uploading...":"Upload route"),9,v1)]),default:Ye(()=>[m[1]||(m[1]=u("p",{class:"instruction"},"Upload a GPX file to display the event route on the map",-1)),u("form",{onSubmit:wt(l,["prevent"])},[u("div",p1,[m[0]||(m[0]=u("label",null,"GPX file",-1)),u("input",{type:"file",accept:".gpx",onChange:r,required:"",class:"form-input"},null,32)]),e.error?(_(),b("div",m1,I(e.error),1)):B("",!0)],32)]),_:1},8,["show","is-dirty"]))}},_1=Ze(g1,[["__scopeId","data-v-1c1d3033"]]),y1={class:"instruction"},b1={class:"form-group"},k1={class:"form-group"},w1={class:"checkbox-label"},C1={key:0,class:"error"},L1={key:1,class:"import-result"},x1={key:0,class:"import-errors"},A1=["disabled"],E1={__name:"ImportLocationsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$(null),d=$(!1);We(()=>s.show,k=>{k||(l.value=null,d.value=!1)});const h=k=>{l.value=k.target.files[0],r("update:isDirty",!0)},m=()=>{r("update:isDirty",!0)},f=()=>{l.value&&r("submit",{file:l.value,deleteExisting:d.value})},v=()=>{r("close")};return(k,x)=>(_(),et(Nt,{show:e.show,title:`Import ${H(a).checkpoints} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:v},{actions:Ye(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary",disabled:e.importing},I(e.importing?"Importing...":`Import ${H(a).checkpoints}`),9,A1)]),default:Ye(()=>[u("p",y1,"Upload a CSV file with columns: Label, Lat/Latitude, Long/Longitude, What3Words (optional), "+I(H(i).people)+" (optional)",1),x[3]||(x[3]=u("div",{class:"csv-example"},[u("strong",null,"Example CSV format:"),u("pre",null,`Label,Latitude,Longitude,What3Words,Marshals
Checkpoint 1,51.505,-0.09,filled.count.soap,"John Doe, Jane Smith"
Checkpoint 2,51.510,-0.10,index.home.raft,Bob Wilson`)],-1)),u("form",{onSubmit:wt(f,["prevent"])},[u("div",b1,[x[1]||(x[1]=u("label",null,"CSV file",-1)),u("input",{type:"file",accept:".csv",onChange:h,required:"",class:"form-input"},null,32)]),u("div",k1,[u("label",w1,[Pe(u("input",{type:"checkbox","onUpdate:modelValue":x[0]||(x[0]=M=>d.value=M),onChange:m},null,544),[[Ii,d.value]]),He(" Delete existing "+I(H(a).checkpoints)+" before import ",1)])]),e.error?(_(),b("div",C1,I(e.error),1)):B("",!0),e.result?(_(),b("div",L1,[u("p",null,"Created "+I(e.result.locationsCreated)+" "+I(H(a).checkpoints)+" and "+I(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(_(),b("div",x1,[x[2]||(x[2]=u("strong",null,"Errors:",-1)),u("ul",null,[(_(!0),b(be,null,$e(e.result.errors,(M,P)=>(_(),b("li",{key:P},I(M),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},T1=Ze(E1,[["__scopeId","data-v-e0a01848"]]),I1={class:"instruction"},S1={class:"form-group"},M1={key:0,class:"error"},P1={key:1,class:"import-result"},$1={key:0,class:"import-errors"},O1=["disabled"],D1={__name:"ImportMarshalsModal",props:{show:{type:Boolean,default:!1},importing:{type:Boolean,default:!1},error:{type:String,default:null},result:{type:Object,default:null},isDirty:{type:Boolean,default:!1}},emits:["close","submit","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$(null);We(()=>s.show,f=>{f||(l.value=null)});const d=f=>{l.value=f.target.files[0],r("update:isDirty",!0)},h=()=>{l.value&&r("submit",l.value)},m=()=>{r("close")};return(f,v)=>(_(),et(Nt,{show:e.show,title:`Import ${H(a).people} from CSV`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:m},{actions:Ye(()=>[u("button",{type:"button",onClick:m,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:h,class:"btn btn-primary",disabled:e.importing},I(e.importing?"Importing...":`Import ${H(a).people}`),9,O1)]),default:Ye(()=>[u("p",I1,"Upload a CSV file with columns: Name, Email (optional), Phone (optional), "+I(H(i).checkpoint)+" (optional)",1),v[2]||(v[2]=u("div",{class:"csv-example"},[u("strong",null,"Example CSV format:"),u("pre",null,`Name,Email,Phone,Checkpoint
John Doe,john@example.com,555-1234,Checkpoint 1
Jane Smith,jane@example.com,555-5678,Checkpoint 2`)],-1)),u("form",{onSubmit:wt(h,["prevent"])},[u("div",S1,[v[0]||(v[0]=u("label",null,"CSV file",-1)),u("input",{type:"file",accept:".csv",onChange:d,required:"",class:"form-input"},null,32)]),e.error?(_(),b("div",M1,I(e.error),1)):B("",!0),e.result?(_(),b("div",P1,[u("p",null,"Imported "+I(e.result.marshalsCreated)+" "+I(H(a).people)+" and "+I(e.result.assignmentsCreated)+" assignments",1),e.result.errors&&e.result.errors.length>0?(_(),b("div",$1,[v[1]||(v[1]=u("strong",null,"Errors:",-1)),u("ul",null,[(_(!0),b(be,null,$e(e.result.errors,(k,x)=>(_(),b("li",{key:x},I(k),1))),128))])])):B("",!0)])):B("",!0)],32)]),_:1},8,["show","title","is-dirty"]))}},R1=Ze(D1,[["__scopeId","data-v-dcaed17c"]]),N1={key:0,class:"tabs"},B1=["onClick"],F1=["innerHTML"],z1=["innerHTML"],U1={class:"current-tab-label"},H1={key:0,class:"hamburger-menu"},V1=["onClick"],Z1=["innerHTML"],q1=400,W1={__name:"TabHeader",props:{tabs:{type:Array,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,a=n,s=$(null),r=$(null),l=$(!1),d=$(!1),h=ne(()=>{const P=i.tabs.find(R=>R.value===i.modelValue);return P?P.label:""}),m=ne(()=>i.tabs.find(R=>R.value===i.modelValue)?.icon||null),f=()=>{if(!s.value)return;const P=s.value.clientWidth,R=i.tabs.length*100;l.value=R>P||P<q1},v=()=>{d.value=!d.value},k=P=>{a("update:modelValue",P),d.value=!1},x=P=>{r.value&&!r.value.contains(P.target)&&(d.value=!1)};let M=null;return wn(()=>{Mi(()=>{f(),s.value&&typeof ResizeObserver<"u"&&(M=new ResizeObserver(()=>{f()}),M.observe(s.value)),document.addEventListener("click",x)})}),Ms(()=>{M&&M.disconnect(),document.removeEventListener("click",x)}),We(()=>i.tabs,()=>{Mi(()=>{f()})},{deep:!0}),(P,R)=>(_(),b("div",{class:"tabs-container",ref_key:"containerRef",ref:s},[l.value?(_(),b("div",{key:1,class:"hamburger-container",ref_key:"hamburgerRef",ref:r},[u("button",{class:"hamburger-button",onClick:v,type:"button","aria-label":"Tab menu"},[m.value?(_(),b("span",{key:0,class:"current-tab-icon",innerHTML:H(_n)(m.value)},null,8,z1)):B("",!0),u("span",U1,I(h.value),1),R[0]||(R[0]=u("span",{class:"hamburger-chevron"},"",-1))]),d.value?(_(),b("div",H1,[(_(!0),b(be,null,$e(e.tabs,T=>(_(),b("button",{key:T.value,class:Ve(["menu-item",{active:e.modelValue===T.value}]),onClick:A=>k(T.value),type:"button"},[T.icon?(_(),b("span",{key:0,class:"tab-icon",innerHTML:H(_n)(T.icon)},null,8,Z1)):B("",!0),He(" "+I(T.label),1)],10,V1))),128))])):B("",!0)],512)):(_(),b("div",N1,[(_(!0),b(be,null,$e(e.tabs,T=>(_(),b("button",{key:T.value,class:Ve(["tab-button",{active:e.modelValue===T.value}]),onClick:A=>P.$emit("update:modelValue",T.value),type:"button"},[T.icon?(_(),b("span",{key:0,class:"tab-icon",innerHTML:H(_n)(T.icon)},null,8,F1)):B("",!0),He(" "+I(T.label),1)],10,B1))),128))]))],512))}},rc=Ze(W1,[["__scopeId","data-v-5c12f1ab"]]),j1={class:"tab-content"},G1={class:"form-group"},K1=["value"],Y1={class:"form-group"},J1=["value"],X1={class:"form-group"},Q1={class:"area-display"},e0={key:0,class:"no-area"},t0={class:"form-group"},n0={class:"checkbox-label"},s0=["checked"],i0={key:0,class:"custom-times-section"},o0={class:"form-group"},a0=["value"],r0={class:"form-group"},l0=["value"],c0={__name:"LocationDetailsTab",props:{form:{type:Object,required:!0},areas:{type:Array,default:()=>[]},eventDate:{type:String,default:""}},emits:["update:form","input","save"],setup(e,{emit:n}){const i=e,a=n,s=ne(()=>(i.form.areaIds||i.form.AreaIds||[]).map(h=>i.areas.find(m=>m.id===h)).filter(h=>h!==void 0)),r=(d,h)=>{a("update:form",{...i.form,[d]:h}),a("input")},l=d=>{const h={...i.form,useCustomTimes:d};if(!d)h.startTime="",h.endTime="";else if(!h.startTime&&!h.endTime&&i.eventDate){const m=Ka(i.eventDate);h.startTime=m,h.endTime=m}a("update:form",h),a("input")};return(d,h)=>(_(),b("div",j1,[u("form",{onSubmit:h[5]||(h[5]=wt(m=>d.$emit("save"),["prevent"]))},[u("div",G1,[h[6]||(h[6]=u("label",null,"Name",-1)),u("input",{value:e.form.name,onInput:h[0]||(h[0]=m=>r("name",m.target.value)),type:"text",required:"",class:"form-input"},null,40,K1)]),u("div",Y1,[h[7]||(h[7]=u("label",null,"Description (optional)",-1)),u("input",{value:e.form.description,onInput:h[1]||(h[1]=m=>r("description",m.target.value)),type:"text",class:"form-input"},null,40,J1)]),u("div",X1,[h[8]||(h[8]=u("label",null,"Area (auto-assigned by location)",-1)),u("div",Q1,[s.value.length===0?(_(),b("span",e0," Not in any area polygon ")):B("",!0),(_(!0),b(be,null,$e(s.value,m=>(_(),b("span",{key:m.id,class:"area-badge",style:Yt({backgroundColor:m.color||"#667eea"})},I(m.name),5))),128))]),h[9]||(h[9]=u("small",{class:"form-help"}," Areas are automatically assigned based on checkpoint location within area boundaries ",-1))]),u("div",t0,[u("label",n0,[u("input",{checked:e.form.useCustomTimes,onChange:h[2]||(h[2]=m=>l(m.target.checked)),type:"checkbox"},null,40,s0),h[10]||(h[10]=He(" Use custom date/time for this checkpoint ",-1))]),h[11]||(h[11]=u("small",{class:"form-help"}," By default, marshals are expected during the event date/time. Enable this to set a specific time range. ",-1))]),e.form.useCustomTimes?(_(),b("div",i0,[u("div",o0,[h[12]||(h[12]=u("label",null,"Start Date & Time (optional)",-1)),u("input",{value:e.form.startTime,onInput:h[3]||(h[3]=m=>r("startTime",m.target.value)),type:"datetime-local",class:"form-input"},null,40,a0),h[13]||(h[13]=u("small",{class:"form-help"}," When marshal should arrive at this checkpoint ",-1))]),u("div",r0,[h[14]||(h[14]=u("label",null,"End Date & Time (optional)",-1)),u("input",{value:e.form.endTime,onInput:h[4]||(h[4]=m=>r("endTime",m.target.value)),type:"datetime-local",class:"form-input"},null,40,l0),h[15]||(h[15]=u("small",{class:"form-help"}," When marshal can leave this checkpoint ",-1))])])):B("",!0)],32)]))}},u0=Ze(c0,[["__scopeId","data-v-60977929"]]),d0={class:"tab-content"},h0={class:"form-group"},f0=["value"],p0={key:0,class:"form-error"},m0={class:"form-row"},v0={class:"form-group"},g0=["value","disabled"],_0={class:"form-group"},y0=["value","disabled"],b0={class:"form-group"},k0={__name:"LocationCoordinatesTab",props:{form:{type:Object,required:!0},isMoving:{type:Boolean,default:!1}},emits:["update:form","input","save","move-location"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=m=>m==null||m===""?"":Number(m).toFixed(6),l=(m,f)=>{s("update:form",{...a.form,[m]:f}),s("input")},d=(m,f)=>{s("update:form",{...a.form,[m]:Number(f)}),s("input")},h=m=>{if(!m)return!0;const f=m.includes(".")?m.split("."):m.split("/");if(f.length!==3)return!1;const v=/^[a-z]{1,20}$/;return f.every(k=>v.test(k))};return(m,f)=>(_(),b("div",d0,[u("form",{onSubmit:f[4]||(f[4]=wt(v=>m.$emit("save"),["prevent"]))},[u("div",h0,[f[5]||(f[5]=u("label",null,"What3Words (optional)",-1)),u("input",{value:e.form.what3Words,onInput:f[0]||(f[0]=v=>l("what3Words",v.target.value)),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap"},null,40,f0),e.form.what3Words&&!h(e.form.what3Words)?(_(),b("small",p0," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),u("div",m0,[u("div",v0,[f[6]||(f[6]=u("label",null,"Longitude",-1)),u("input",{value:r(e.form.longitude),onInput:f[1]||(f[1]=v=>d("longitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., -0.091234"},null,40,g0)]),u("div",_0,[f[7]||(f[7]=u("label",null,"Latitude",-1)),u("input",{value:r(e.form.latitude),onInput:f[2]||(f[2]=v=>d("latitude",v.target.value)),type:"number",step:"0.000001",required:"",class:"form-input",disabled:e.isMoving,placeholder:"e.g., 51.505123"},null,40,y0)])]),u("div",b0,[u("button",{type:"button",onClick:f[3]||(f[3]=v=>m.$emit("move-location")),class:Ve(["btn btn-secondary btn-with-icon",{"btn-primary":e.isMoving}])},[f[8]||(f[8]=u("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),He(" "+I(e.isMoving?"Click on map to set new location...":`Move ${H(i).checkpoint}...`),1)],2)])],32)]))}},w0=Ze(k0,[["__scopeId","data-v-86bee5e5"]]);function lf(e){const n=$(new Map),i=f=>n.value.has(f.id)?n.value.get(f.id):f.isCheckedIn;return{pendingCheckInChanges:n,getEffectiveCheckInStatus:i,handleToggleCheckIn:f=>{const k=!i(f);k===f.isCheckedIn?n.value.delete(f.id):n.value.set(f.id,k),e&&e()},getStatusIcon:f=>i(f)?"":"",getStatusColor:f=>i(f)?"#28a745":"#dc3545",getStatusText:f=>i(f)?"Checked in":"Not checked in",formatTime:f=>f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",clearPendingChanges:()=>{n.value.clear()},getPendingChanges:()=>Array.from(n.value.entries()).map(([f,v])=>({assignmentId:f,shouldBeCheckedIn:v}))}}const C0={class:"tab-content"},L0={class:"form-group"},x0=["value"],A0={class:"section-title"},E0={class:"assignments-list"},T0={class:"assignment-info"},I0={class:"assignment-header"},S0=["title"],M0={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},P0={key:2,class:"pending-badge"},$0={key:3,class:"pending-badge"},O0={key:0,class:"check-in-info"},D0={class:"check-in-method"},R0={class:"assignment-actions"},N0=["onClick"],B0=["onClick"],F0={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},z0={value:""},U0=["value"],H0={__name:"LocationAssignmentsTab",props:{form:{type:Object,required:!0},assignments:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]}},emits:["update:form","input","remove-assignment","assign-marshal"],setup(e,{expose:n,emit:i}){const{termsLower:a}=mt(),s=e,r=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:d,handleToggleCheckIn:h,getStatusIcon:m,getStatusColor:f,getStatusText:v,formatTime:k}=lf(()=>r("input")),x=$(""),M=ne(()=>s.assignments?.length||0),P=ne(()=>s.assignments?[...s.assignments].sort((g,C)=>{const w=g.marshalName?.toLowerCase()||"",E=C.marshalName?.toLowerCase()||"";return w.localeCompare(E)}):[]),R=ne(()=>{const g=[...s.availableMarshals];return g.sort((C,w)=>(C.name||"").localeCompare(w.name||"",void 0,{numeric:!0,sensitivity:"base"})),g}),T=()=>{x.value&&(r("assign-marshal",x.value),x.value="")},A=(g,C)=>{r("update:form",{...s.form,[g]:Number(C)}),r("input")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),x.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([g,C])=>({assignmentId:g,shouldBeCheckedIn:C}))}),(g,C)=>(_(),b("div",C0,[u("div",L0,[u("label",null,"Required "+I(H(a).people),1),u("input",{value:e.form.requiredMarshals,onInput:C[0]||(C[0]=w=>A("requiredMarshals",w.target.value)),type:"number",min:"1",required:"",class:"form-input"},null,40,x0)]),u("h3",A0,"Assigned "+I(H(a).people)+" ("+I(M.value)+")",1),u("div",E0,[(_(!0),b(be,null,$e(P.value,w=>(_(),b("div",{key:w.id,class:Ve(["assignment-item",{"checked-in":!w.isPending&&H(d)(w),"is-pending":w.isPending}])},[u("div",T0,[u("div",I0,[w.isPending?(_(),b("span",M0,"  ")):(_(),b("span",{key:0,class:"status-indicator",style:Yt({color:H(f)(w)}),title:H(v)(w)},I(H(m)(w)),13,S0)),u("strong",null,I(w.marshalName),1),w.isPending?(_(),b("span",P0," (will be assigned on save) ")):H(l).has(w.id)?(_(),b("span",$0," (unsaved) ")):B("",!0)]),!w.isPending&&H(d)(w)?(_(),b("span",O0,[w.isCheckedIn&&!H(l).has(w.id)?(_(),b(be,{key:0},[He(I(H(k)(w.checkInTime))+" ",1),u("span",D0,"("+I(w.checkInMethod)+")",1)],64)):(_(),b(be,{key:1},[He(" Will be checked in on save ")],64))])):B("",!0)]),u("div",R0,[w.isPending?B("",!0):(_(),b("button",{key:0,onClick:E=>H(h)(w),class:Ve(["btn btn-small",H(d)(w)?"btn-danger":"btn-secondary"])},I(H(d)(w)?"Undo":"Check in"),11,N0)),u("button",{onClick:E=>g.$emit("remove-assignment",w),class:"btn btn-small btn-danger"}," Remove ",8,B0)])],2))),128)),R.value.length>0?(_(),b("div",F0,[u("label",null,"Assign "+I(H(a).person),1),Pe(u("select",{"onUpdate:modelValue":C[1]||(C[1]=w=>x.value=w),class:"form-input",onChange:T},[u("option",z0,"Select a "+I(H(a).person)+"...",1),(_(!0),b(be,null,$e(R.value,w=>(_(),b("option",{key:w.id,value:w.id},I(w.name),9,U0))),128))],544),[[dn,x.value]])])):B("",!0)])]))}},V0=Ze(H0,[["__scopeId","data-v-2c486110"]]),Z0={class:"checkpoint-checklist-view"},q0={key:0,class:"loading-state"},W0={key:1,class:"error-state"},j0={key:2,class:"empty-state"},G0={key:3,class:"empty-state"},K0={key:4,class:"checklist-items"},Y0={class:"item-checkbox"},J0=["checked","disabled","onChange"],X0={class:"item-content"},Q0={class:"item-header"},ex={class:"item-text-wrapper"},tx={class:"item-text"},nx={key:0,class:"item-context"},sx={class:"item-scope"},ix=["title"],ox={key:0,class:"completion-info"},ax={key:0,class:"pending-text"},rx={class:"completion-text"},lx={class:"completion-time"},cx={key:1,class:"uncomplete-info"},ux={key:2,class:"disabled-reason"},dx={__name:"CheckpointChecklistView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=$([]),l=$(!1),d=$(null),h=$(new Map),m=ne(()=>a.assignments.length===0),f=ne(()=>r.value.map(g=>{const C=h.value.get(`${g.itemId}|||${g.completionContextId}`),w=C!==void 0?C.complete:g.isCompleted,E=C!==void 0&&C.complete!==g.isCompleted;return{...g,localIsCompleted:w,isModified:E}})),v=async()=>{if(!(!a.eventId||!a.locationId&&!a.areaId)){l.value=!0,d.value=null;try{const g=a.locationId?await Lt.getCheckpointChecklist(a.eventId,a.locationId):await Lt.getAreaChecklist(a.eventId,a.areaId);if(r.value=g.data||[],a.modelValue&&a.modelValue.length>0){const C=new Map;a.modelValue.forEach(w=>{C.set(`${w.itemId}|||${w.contextId}`,{complete:w.complete,contextType:w.contextType,contextId:w.contextId})}),h.value=C}}catch(g){console.error("Failed to load checklist:",g),d.value=g.response?.data?.message||"Failed to load checklist"}finally{l.value=!1}}},k=g=>{const C=g.contextOwnerMarshalId||(a.assignments.length>0?a.assignments[0].marshalId:null);if(!C)return;const w=`${g.itemId}|||${g.completionContextId}`,E=h.value.get(w),O=E!==void 0?E.complete:g.isCompleted;h.value.set(w,{complete:!O,contextType:g.completionContextType,contextId:g.completionContextId,marshalId:C}),x()},x=()=>{const g=[];for(const[C,w]of h.value.entries()){const[E,O]=C.split("|||"),W=r.value.find(V=>V.itemId===E&&V.completionContextId===O);W&&w.complete!==W.isCompleted&&g.push({itemId:E,complete:w.complete,contextType:w.contextType,contextId:w.contextId,marshalId:w.marshalId})}s("update:modelValue",g),s("change",g)};n({resetLocalState:()=>{if(h.value=new Map,a.modelValue&&a.modelValue.length>0){const g=new Map;a.modelValue.forEach(C=>{g.set(`${C.itemId}|||${C.contextId}`,{complete:C.complete,contextType:C.contextType,contextId:C.contextId,marshalId:C.marshalId})}),h.value=g}},loadChecklist:v});const P=g=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:"Your areas",EveryoneAtCheckpoints:"Your checkpoints",OnePerCheckpoint:"One per checkpoint",OnePerArea:"One per area",EveryAreaLead:"Area lead",OneLeadPerArea:"One lead per area"})[g.matchedScope]||g.matchedScope,R=g=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to certain people",EveryoneInAreas:"This item is for everyone in certain areas",EveryoneAtCheckpoints:"This item is for everyone at certain checkpoints",OnePerCheckpoint:"One person at the checkpoint needs to complete this",OnePerArea:"One person in the area needs to complete this",EveryAreaLead:"This item is for area leads only",OneLeadPerArea:"One area lead needs to complete this"})[g.matchedScope]||"",T=g=>{if(!g.completionContextType||!g.completionContextId)return null;if(g.completionContextType==="Checkpoint"){const C=a.locations.find(E=>E.id===g.completionContextId);return C?`at checkpoint ${C.description?`${C.name} - ${C.description}`:C.name}`:null}if(g.completionContextType==="Area"){const C=a.areas.find(w=>w.id===g.completionContextId);return C?`in area ${C.name}`:null}return g.completionContextType==="Personal"?g.contextOwnerName?`for ${g.contextOwnerName}`:"assigned individually":null},A=g=>g?new Date(g).toLocaleString():"";return We(()=>[a.eventId,a.locationId,a.areaId],()=>{v()},{immediate:!0}),(g,C)=>(_(),b("div",Z0,[l.value?(_(),b("div",q0," Loading checklist... ")):d.value?(_(),b("div",W0,[u("p",null,I(d.value),1),u("button",{onClick:v,class:"btn btn-secondary btn-small"}," Retry ")])):m.value?(_(),b("div",j0,[...C[0]||(C[0]=[u("p",null,"No marshals assigned to this checkpoint yet.",-1),u("p",{class:"help-text"},"Assign marshals to enable checklist completion.",-1)])])):r.value.length===0?(_(),b("div",G0,[...C[1]||(C[1]=[u("p",null,"No checklist items for this checkpoint.",-1)])])):(_(),b("div",K0,[(_(!0),b(be,null,$e(f.value,w=>(_(),b("div",{key:`${w.itemId}-${w.completionContextId}`,class:Ve(["checklist-item",{"item-completed":w.localIsCompleted,"item-modified":w.isModified}])},[u("div",Y0,[u("input",{type:"checkbox",checked:w.localIsCompleted,disabled:!w.canBeCompletedByMe&&!w.localIsCompleted,onChange:E=>k(w)},null,40,J0)]),u("div",X0,[u("div",Q0,[u("div",ex,[u("div",tx,I(w.text),1),T(w)?(_(),b("div",nx,I(T(w)),1)):B("",!0)]),u("div",sx,[u("span",{class:"scope-pill",title:R(w)},I(P(w)),9,ix)])]),w.localIsCompleted?(_(),b("div",ox,[w.isModified&&!w.isCompleted?(_(),b("span",ax," Will be marked as completed (pending save) ")):(_(),b(be,{key:1},[u("span",rx," Completed by "+I(w.completedByActorName||"Unknown"),1),u("span",lx,I(A(w.completedAt)),1)],64))])):B("",!0),w.isModified&&w.isCompleted&&!w.localIsCompleted?(_(),b("div",cx,[...C[2]||(C[2]=[u("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!w.canBeCompletedByMe&&!w.localIsCompleted?(_(),b("div",ux," Already completed by someone else ")):B("",!0)])],2))),128))]))]))}},cf=Ze(dx,[["__scopeId","data-v-cde14adb"]]),hx={class:"notes-view"},fx={key:0,class:"loading-state"},px={key:1,class:"error-state"},mx={key:2,class:"empty-state"},vx={key:3,class:"notes-list"},gx={class:"note-header"},_x={class:"note-title-row"},yx={key:0,class:"pin-icon",title:"Pinned"},bx={class:"note-title"},kx={class:"note-meta"},wx={key:0,class:"category-badge"},Cx={key:0,class:"note-content"},Lx={class:"note-footer"},xx={class:"created-info"},Ax={key:0,class:"scope-info"},Ex={__name:"NotesView",props:{eventId:{type:String,required:!0},locationId:{type:String,default:null},areaId:{type:String,default:null},marshalId:{type:String,default:null},allNotes:{type:Array,default:null},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},showScope:{type:Boolean,default:!0}},setup(e,{expose:n}){const i=e,a=$([]),s=$(!1),r=$(null),l=ne(()=>i.marshalId?"No notes for this marshal.":i.areaId?"No notes for this area.":i.locationId?"No notes for this checkpoint.":"No notes available."),d=ne(()=>i.areaId?i.locations.filter(T=>T.areaIds&&T.areaIds.includes(i.areaId)):[]),h=ne(()=>d.value.map(T=>T.id)),m=ne(()=>{if(!i.areaId)return[];const T=new Set;return i.assignments.filter(A=>h.value.includes(A.locationId)).forEach(A=>T.add(A.marshalId)),Array.from(T)}),f=T=>i.assignments.filter(A=>A.marshalId===T).map(A=>A.locationId),v=T=>{const A=f(T),g=new Set;for(const C of A){const w=i.locations.find(E=>E.id===C);w?.areaIds&&w.areaIds.forEach(E=>g.add(E))}return Array.from(g)},k=(T,A)=>{if(!T.scopeConfigurations)return null;for(const g of T.scopeConfigurations){if(g.itemType==="Area"){if(A.type==="area"&&(g.ids.includes(A.areaId)||g.ids.includes("ALL_AREAS")))return{matched:!0,scope:g.scope==="EveryAreaLead"?"Area leads":"Area"};if(A.type==="checkpoint"){const w=i.locations.find(E=>E.id===A.locationId)?.areaIds||[];if(g.ids.includes("ALL_AREAS")||w.some(E=>g.ids.includes(E)))return{matched:!0,scope:g.scope==="EveryAreaLead"?"Area leads":"Area"}}}if(g.itemType==="Checkpoint"){if(A.type==="checkpoint"&&(g.ids.includes(A.locationId)||g.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint"};if(A.type==="area"&&A.checkpointIds.some(w=>g.ids.includes(w)||g.ids.includes("ALL_CHECKPOINTS")))return{matched:!0,scope:"Checkpoint in area"}}if(g.itemType==="Marshal"){if(A.type==="marshal"&&(g.ids.includes(A.marshalId)||g.ids.includes("ALL_MARSHALS")))return{matched:!0,scope:"Marshal"};if(A.type==="checkpoint"){const C=i.assignments.filter(E=>E.locationId===A.locationId).map(E=>E.marshalId);if(g.ids.includes("ALL_MARSHALS")||C.some(E=>g.ids.includes(E)))return{matched:!0,scope:"Marshal at checkpoint"}}if(A.type==="area"&&(g.ids.includes("ALL_MARSHALS")||A.marshalIds.some(w=>g.ids.includes(w))))return{matched:!0,scope:"Marshal in area"}}if(A.type==="marshal"&&A.checkpointIds&&A.areaIds){if(g.itemType==="Checkpoint"&&(g.ids.includes("ALL_CHECKPOINTS")||A.checkpointIds.some(w=>g.ids.includes(w))))return{matched:!0,scope:"Assigned checkpoint"};if(g.itemType==="Area"&&(g.ids.includes("ALL_AREAS")||A.areaIds.some(w=>g.ids.includes(w))))return{matched:!0,scope:g.scope==="EveryAreaLead"?"Area lead":"Area"}}}return null},x=ne(()=>{let T=i.allNotes||a.value;if(!T||T.length===0)return[];if(i.areaId&&i.allNotes){const A={type:"area",areaId:i.areaId,checkpointIds:h.value,marshalIds:m.value},g=[],C=new Set;for(const w of T){if(C.has(w.noteId))continue;const E=k(w,A);E&&(C.add(w.noteId),g.push({...w,matchedScope:E.scope}))}return g}if(i.locationId&&i.allNotes){const A={type:"checkpoint",locationId:i.locationId},g=[],C=new Set;for(const w of T){if(C.has(w.noteId))continue;const E=k(w,A);E&&(C.add(w.noteId),g.push({...w,matchedScope:E.scope}))}return g}if(i.marshalId&&i.allNotes){const A=f(i.marshalId),g=v(i.marshalId),C={type:"marshal",marshalId:i.marshalId,checkpointIds:A,areaIds:g},w=[],E=new Set;for(const O of T){if(E.has(O.noteId))continue;const W=k(O,C);W&&(E.add(O.noteId),w.push({...O,matchedScope:W.scope}))}return w}return T}),M=ne(()=>{const T={Urgent:0,High:1,Normal:2,Low:3};return[...x.value].sort((A,g)=>{if(A.isPinned!==g.isPinned)return A.isPinned?-1:1;const C=T[A.priority]??2,w=T[g.priority]??2;return C!==w?C-w:A.displayOrder!==g.displayOrder?A.displayOrder-g.displayOrder:new Date(g.createdAt)-new Date(A.createdAt)})}),P=async()=>{if(i.allNotes===null&&i.eventId){s.value=!0,r.value=null;try{let T;i.marshalId?T=await is.getMarshalNotes(i.eventId,i.marshalId):T=await is.getByEvent(i.eventId),a.value=T.data||[]}catch(T){console.error("Failed to load notes:",T),r.value=T.response?.data?.message||"Failed to load notes"}finally{s.value=!1}}};We(()=>[i.eventId,i.locationId,i.areaId,i.marshalId],()=>{i.allNotes===null&&P()},{immediate:!0});const R=T=>{if(!T)return"";const A=new Date(T),C=new Date-A,w=Math.floor(C/6e4),E=Math.floor(C/36e5),O=Math.floor(C/864e5);return w<1?"just now":w<60?`${w}m ago`:E<24?`${E}h ago`:O<7?`${O}d ago`:A.toLocaleDateString()};return n({loadNotes:P}),(T,A)=>(_(),b("div",hx,[s.value?(_(),b("div",fx," Loading notes... ")):r.value?(_(),b("div",px,[u("p",null,I(r.value),1),u("button",{onClick:P,class:"btn btn-secondary btn-small"}," Retry ")])):x.value.length===0?(_(),b("div",mx,[u("p",null,I(l.value),1)])):(_(),b("div",vx,[(_(!0),b(be,null,$e(M.value,g=>(_(),b("div",{key:g.noteId,class:Ve(["note-item",{pinned:g.isPinned}])},[u("div",gx,[u("div",_x,[g.isPinned?(_(),b("span",yx,"")):B("",!0),u("span",{class:Ve(["priority-indicator",(g.priority||"Normal").toLowerCase()])},null,2),u("strong",bx,I(g.title),1)]),u("div",kx,[g.category?(_(),b("span",wx,I(g.category),1)):B("",!0),u("span",{class:Ve(["priority-badge",(g.priority||"Normal").toLowerCase()])},I(g.priority||"Normal"),3)])]),g.content?(_(),b("div",Cx,I(g.content),1)):B("",!0),u("div",Lx,[u("span",xx," Created by "+I(g.createdByName||"Unknown")+"  "+I(R(g.createdAt)),1),g.matchedScope&&e.showScope?(_(),b("span",Ax,I(g.matchedScope),1)):B("",!0)])],2))),128))]))]))}},wr=Ze(Ex,[["__scopeId","data-v-bd15ca42"]]),Tx={class:"checklist-preview"},Ix={class:"preview-actions"},Sx={class:"preview-header"},Mx={key:0,class:"add-item-form"},Px=["placeholder"],$x=["disabled"],Ox={key:1,class:"pending-items"},Dx={class:"item-content"},Rx={class:"item-header"},Nx={class:"item-text"},Bx={class:"item-scope"},Fx=["onClick"],zx={key:2,class:"empty-state"},Ux={key:0,class:"help-text"},Hx={key:3,class:"checklist-items"},Vx={class:"item-content"},Zx={class:"item-header"},qx={class:"item-text"},Wx={class:"item-scope"},jx=["title"],Gx={key:0,class:"item-context"},Kx={__name:"ChecklistPreviewForLocation",props:{allChecklistItems:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=$(!1),l=$(""),d=$([...a.modelValue]);We(()=>a.modelValue,T=>{d.value=[...T]},{deep:!0});const h=()=>{l.value.trim()&&(d.value.push({text:l.value.trim(),isNew:!0}),l.value="",r.value=!1,f())},m=T=>{d.value.splice(T,1),f()},f=()=>{s("update:modelValue",[...d.value]),s("change")},v=T=>{const A=T.scope,g=T.itemType,C=T.ids||[];return(A==="EveryoneAtCheckpoints"||A==="OnePerCheckpoint")&&g==="Checkpoint"?C.includes("ALL_CHECKPOINTS"):A==="OnePerCheckpoint"&&g==="Area"?C.includes("ALL_AREAS")?!0:C.some(w=>a.pendingAreaIds.includes(w)):(A==="EveryoneInAreas"||A==="OnePerArea"||A==="EveryAreaLead"||A==="OneLeadPerArea")&&g==="Area"?C.includes("ALL_AREAS")?!0:C.some(w=>a.pendingAreaIds.includes(w)):!1},k=ne(()=>a.allChecklistItems.filter(T=>T.scopeConfigurations&&T.scopeConfigurations.length>0?T.scopeConfigurations.some(A=>v(A)):!1)),x=T=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[T]||T,M=T=>{if(!T.scopeConfigurations||T.scopeConfigurations.length===0)return"Unknown";const A=T.scopeConfigurations.find(C=>v(C));if(!A)return x(T.scopeConfigurations[0].scope);const g=A.ids||[];return g.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:g.includes("ALL_AREAS")?`All ${i.value.areas}`:x(A.scope)},P=T=>{if(!T.scopeConfigurations||T.scopeConfigurations.length===0)return"";const A=T.scopeConfigurations.find(C=>v(C));return A&&{EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[A.scope]||""},R=T=>{if(!T.scopeConfigurations||T.scopeConfigurations.length===0)return null;const A=T.scopeConfigurations.find(w=>v(w));if(!A)return null;const g=A.itemType,C=A.ids||[];if(C.includes("ALL_CHECKPOINTS")||C.includes("ALL_AREAS"))return null;if(g==="Area"){const w=a.areas.filter(E=>C.includes(E.id)&&a.pendingAreaIds.includes(E.id)).map(E=>E.name);if(w.length>0)return`In: ${w.join(", ")}`}return null};return(T,A)=>(_(),b("div",Tx,[u("div",Ix,[u("p",Sx,I(H(i).checklists)+" that will apply at this "+I(H(i).checkpoint)+": ",1),u("button",{type:"button",class:"add-item-btn",onClick:A[0]||(A[0]=g=>r.value=!r.value)},I(r.value?"Cancel":`+ Add ${H(i).checklist}`),1)]),r.value?(_(),b("div",Mx,[Pe(u("input",{"onUpdate:modelValue":A[1]||(A[1]=g=>l.value=g),type:"text",placeholder:`Enter ${H(i).checklist} text...`,class:"add-item-input",onKeyup:ph(h,["enter"])},null,40,Px),[[st,l.value]]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,$x)])):B("",!0),d.value.length>0?(_(),b("div",Ox,[(_(!0),b(be,null,$e(d.value,(g,C)=>(_(),b("div",{key:`pending-${C}`,class:"checklist-item pending"},[A[3]||(A[3]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",Dx,[u("div",Rx,[u("div",Nx,I(g.text),1),u("div",Bx,[A[2]||(A[2]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:w=>m(C),title:"Remove"},"  ",8,Fx)])])])]))),128))])):B("",!0),k.value.length===0&&d.value.length===0?(_(),b("div",zx,[u("p",null,"No "+I(H(i).checklists)+" will apply based on the current "+I(H(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(_(),b("p",Ux," Assign "+I(H(i).areas)+" to see relevant "+I(H(i).checklists)+". ",1)):B("",!0)])):B("",!0),k.value.length>0?(_(),b("div",Hx,[(_(!0),b(be,null,$e(k.value,g=>(_(),b("div",{key:g.id,class:"checklist-item"},[A[4]||(A[4]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",Vx,[u("div",Zx,[u("div",qx,I(g.text),1),u("div",Wx,[u("span",{class:"scope-pill",title:P(g)},I(M(g)),9,jx)])]),R(g)?(_(),b("div",Gx,I(R(g)),1)):B("",!0)])]))),128))])):B("",!0)]))}},Yx=Ze(Kx,[["__scopeId","data-v-d0fcf36b"]]),Jx={class:"notes-preview"},Xx={class:"preview-actions"},Qx={class:"preview-header"},eA={key:0,class:"add-item-form"},tA={class:"add-form-fields"},nA=["disabled"],sA={key:1,class:"pending-items"},iA={class:"note-header"},oA={class:"note-title"},aA={class:"note-actions"},rA=["onClick"],lA={key:0,class:"note-content"},cA={key:2,class:"empty-state"},uA={key:0,class:"help-text"},dA={key:3,class:"notes-list"},hA={class:"note-header"},fA={class:"note-title"},pA=["title"],mA={key:0,class:"note-content"},vA={key:1,class:"note-context"},gA={__name:"NotesPreviewForLocation",props:{allNotes:{type:Array,default:()=>[]},pendingAreaIds:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=$(!1),l=$(""),d=$(""),h=$([...a.modelValue]);We(()=>a.modelValue,A=>{h.value=[...A]},{deep:!0});const m=()=>{!l.value.trim()&&!d.value.trim()||(h.value.push({title:l.value.trim(),content:d.value.trim(),isNew:!0}),l.value="",d.value="",r.value=!1,v())},f=A=>{h.value.splice(A,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},k=A=>{const g=A.scope,C=A.itemType,w=A.ids||[];return g==="EveryoneAtCheckpoints"&&C==="Checkpoint"?w.includes("ALL_CHECKPOINTS"):g==="EveryoneInAreas"&&C==="Area"?w.includes("ALL_AREAS")?!0:w.some(E=>a.pendingAreaIds.includes(E)):!1},x=ne(()=>a.allNotes.filter(A=>A.scopeConfigurations&&A.scopeConfigurations.length>0?A.scopeConfigurations.some(g=>k(g)):!1)),M=A=>({EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[A]||A,P=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"Unknown";const g=A.scopeConfigurations.find(w=>k(w));if(!g)return M(A.scopeConfigurations[0].scope);const C=g.ids||[];return C.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:C.includes("ALL_AREAS")?`All ${i.value.areas}`:M(g.scope)},R=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"";const g=A.scopeConfigurations.find(w=>k(w));return g&&{EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[g.scope]||""},T=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return null;const g=A.scopeConfigurations.find(E=>k(E));if(!g)return null;const C=g.itemType,w=g.ids||[];if(w.includes("ALL_CHECKPOINTS")||w.includes("ALL_AREAS"))return null;if(C==="Area"){const E=a.areas.filter(O=>w.includes(O.id)&&a.pendingAreaIds.includes(O.id)).map(O=>O.name);if(E.length>0)return`In: ${E.join(", ")}`}return null};return(A,g)=>(_(),b("div",Jx,[u("div",Xx,[u("p",Qx," Notes that will be visible at this "+I(H(i).checkpoint)+": ",1),u("button",{type:"button",class:"add-item-btn",onClick:g[0]||(g[0]=C=>r.value=!r.value)},I(r.value?"Cancel":"+ Add note"),1)]),r.value?(_(),b("div",eA,[u("div",tA,[Pe(u("input",{"onUpdate:modelValue":g[1]||(g[1]=C=>l.value=C),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[st,l.value]]),Pe(u("textarea",{"onUpdate:modelValue":g[2]||(g[2]=C=>d.value=C),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[st,d.value]])]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!d.value.trim(),onClick:m}," Add ",8,nA)])):B("",!0),h.value.length>0?(_(),b("div",sA,[(_(!0),b(be,null,$e(h.value,(C,w)=>(_(),b("div",{key:`pending-${w}`,class:"note-item pending"},[u("div",iA,[u("span",oA,I(C.title||"Untitled"),1),u("div",aA,[g[3]||(g[3]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:E=>f(w),title:"Remove"},"  ",8,rA)])]),C.content?(_(),b("div",lA,I(C.content),1)):B("",!0)]))),128))])):B("",!0),x.value.length===0&&h.value.length===0?(_(),b("div",cA,[u("p",null,"No notes will apply based on the current "+I(H(i).area)+" assignments.",1),e.pendingAreaIds.length===0?(_(),b("p",uA," Assign "+I(H(i).areas)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),x.value.length>0?(_(),b("div",dA,[(_(!0),b(be,null,$e(x.value,C=>(_(),b("div",{key:C.id,class:"note-item"},[u("div",hA,[u("span",fA,I(C.title||"Untitled"),1),u("span",{class:"scope-pill",title:R(C)},I(P(C)),9,pA)]),C.content?(_(),b("div",mA,I(C.content),1)):B("",!0),T(C)?(_(),b("div",vA,I(T(C)),1)):B("",!0)]))),128))])):B("",!0)]))}},_A=Ze(gA,[["__scopeId","data-v-19f4446b"]]),yA={class:"custom-footer"},bA={key:1},kA={__name:"EditLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:null},assignments:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventDate:{type:String,default:""},areas:{type:Array,default:()=>[]},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},availableMarshals:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","move-location","toggle-check-in","remove-assignment","assign-marshal","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$("details"),d=$(!1),h=$(null),m=$(null),f=$([]),v=$([]),k=$([]),x=$({name:"",description:"",what3Words:"",latitude:0,longitude:0,requiredMarshals:1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:[]}),M=ne(()=>s.location&&s.location.id),P=ne(()=>M.value?`Edit ${a.value.checkpoint}: ${s.location?.name||""}`:`Add ${a.value.checkpoint}`),R=ne(()=>[{value:"details",label:"Details",icon:"details"},{value:"location",label:"Location",icon:"location"},{value:"marshals",label:i.value.people,icon:"marshal"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),T=ne(()=>R.value.findIndex(ie=>ie.value===l.value)),A=ne(()=>T.value===R.value.length-1),g=ne(()=>A.value?null:R.value[T.value+1]),C=ne(()=>A.value?`Create ${a.value.checkpoint}`:`Add ${g.value.label.toLowerCase()}...`);We(()=>s.location,ie=>{if(ie){let ue="",de="";ie.startTime&&(ue=Ka(ie.startTime)),ie.endTime&&(de=Ka(ie.endTime)),x.value={name:ie.name||"",description:ie.description||"",what3Words:ie.what3Words||"",latitude:ie.latitude||0,longitude:ie.longitude||0,requiredMarshals:ie.requiredMarshals||1,useCustomTimes:!!(ie.startTime||ie.endTime),startTime:ue,endTime:de,areaIds:ie.areaIds||ie.AreaIds||[]}}},{immediate:!0,deep:!0}),We(()=>s.show,ie=>{ie&&(l.value="details",d.value=!1,f.value=[],v.value=[],k.value=[],M.value||(x.value={name:s.location?.name||"",description:s.location?.description||"",what3Words:s.location?.what3Words||"",latitude:s.location?.latitude||0,longitude:s.location?.longitude||0,requiredMarshals:s.location?.requiredMarshals||1,useCustomTimes:!1,startTime:"",endTime:"",areaIds:s.location?.areaIds||[]}),h.value?.clearPendingChanges&&h.value.clearPendingChanges(),m.value?.resetLocalState&&m.value.resetLocalState())});const w=()=>{r("update:isDirty",!0)},E=()=>{d.value=!d.value,r("move-location",{isMoving:d.value,formData:{...x.value}})},O=ie=>{f.value=ie,w()},W=()=>{M.value||A.value?V():l.value=g.value.value},V=()=>{const ie={...x.value,startTime:x.value.useCustomTimes&&x.value.startTime?new Date(x.value.startTime).toISOString():null,endTime:x.value.useCustomTimes&&x.value.endTime?new Date(x.value.endTime).toISOString():null,checkInChanges:h.value?.getPendingChanges?.()||[],checklistChanges:f.value||[],pendingAssignments:s.assignments.filter(ue=>ue.isPending).map(ue=>({marshalId:ue.marshalId})),pendingNewChecklistItems:v.value,pendingNewNotes:k.value};r("save",ie)},se=()=>{s.location&&s.location.id&&r("delete",s.location.id)},ge=ie=>{r("remove-assignment",ie)},Se=ie=>{r("assign-marshal",ie)},Me=()=>{r("close")};return(ie,ue)=>(_(),et(Nt,{show:e.show,title:P.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Me},{"tab-header":Ye(()=>[Ne(rc,{modelValue:l.value,"onUpdate:modelValue":ue[0]||(ue[0]=de=>l.value=de),tabs:R.value},null,8,["modelValue","tabs"])]),footer:Ye(()=>[u("div",yA,[M.value?(_(),b("button",{key:0,type:"button",onClick:se,class:"btn btn-danger"}," Delete "+I(H(a).checkpoint),1)):(_(),b("div",bA)),u("button",{type:"button",onClick:W,class:"btn btn-primary"},I(M.value?"Save changes":C.value),1)])]),default:Ye(()=>[l.value==="details"?(_(),et(u0,{key:0,form:x.value,areas:e.areas,"event-date":e.eventDate,"onUpdate:form":ue[1]||(ue[1]=de=>x.value=de),onInput:w,onSave:V},null,8,["form","areas","event-date"])):B("",!0),l.value==="location"?(_(),et(w0,{key:1,form:x.value,"is-moving":d.value,"onUpdate:form":ue[2]||(ue[2]=de=>x.value=de),onInput:w,onSave:V,onMoveLocation:E},null,8,["form","is-moving"])):B("",!0),l.value==="marshals"?(_(),et(V0,{key:2,ref_key:"assignmentsTabRef",ref:h,form:x.value,assignments:e.assignments,"available-marshals":e.availableMarshals,"onUpdate:form":ue[3]||(ue[3]=de=>x.value=de),onInput:w,onRemoveAssignment:ge,onAssignMarshal:Se},null,8,["form","assignments","available-marshals"])):B("",!0),l.value==="checklists"&&M.value?(_(),et(cf,{key:3,ref_key:"checklistTabRef",ref:m,modelValue:f.value,"onUpdate:modelValue":ue[4]||(ue[4]=de=>f.value=de),"event-id":e.eventId,"location-id":e.location.id,locations:e.allLocations,areas:e.areas,assignments:e.assignments,onChange:O},null,8,["modelValue","event-id","location-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"?(_(),et(Yx,{key:4,modelValue:v.value,"onUpdate:modelValue":ue[5]||(ue[5]=de=>v.value=de),"all-checklist-items":e.allChecklistItems,"pending-area-ids":x.value.areaIds,areas:e.areas,"is-editing":M.value,onChange:w},null,8,["modelValue","all-checklist-items","pending-area-ids","areas","is-editing"])):B("",!0),l.value==="notes"&&M.value?(_(),et(wr,{key:5,"event-id":e.eventId,"location-id":e.location?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","location-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(_(),et(_A,{key:6,modelValue:k.value,"onUpdate:modelValue":ue[6]||(ue[6]=de=>k.value=de),"all-notes":e.notes,"pending-area-ids":x.value.areaIds,areas:e.areas,"is-editing":M.value,onChange:w},null,8,["modelValue","all-notes","pending-area-ids","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},wA=Ze(kA,[["__scopeId","data-v-b2783ab5"]]),CA={class:"tab-content"},LA={class:"form-group"},xA=["value"],AA={class:"form-group"},EA=["value"],TA={class:"form-group"},IA=["value"],SA={class:"form-group"},MA=["value"],PA={key:0,class:"magic-link-section"},$A={key:0,class:"loading-text"},OA={key:1,class:"magic-link-container"},DA=["value"],RA={class:"magic-link-actions"},NA=["disabled"],BA={key:0,class:"success-text"},FA={key:1,class:"error-text"},zA={key:2,class:"error-text"},UA={__name:"MarshalDetailsTab",props:{form:{type:Object,required:!0},eventId:{type:String,default:null},marshalId:{type:String,default:null}},emits:["update:form","input"],setup(e,{emit:n}){const i=e,a=n,s=$(""),r=$(!1),l=$(!1),d=$(""),h=$(!1),m=$(!1),f=$(!1),v=$(""),k=(R,T)=>{a("update:form",{...i.form,[R]:T}),a("input")},x=async()=>{if(!(!i.eventId||!i.marshalId)){l.value=!0,d.value="";try{const R=await In.getMagicLink(i.eventId,i.marshalId);s.value=R.data.magicLink,r.value=R.data.hasEmail}catch(R){console.error("Failed to fetch magic link:",R),d.value="Failed to load login link"}finally{l.value=!1}}},M=async()=>{try{await navigator.clipboard.writeText(s.value),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch(R){console.error("Failed to copy:",R)}},P=async()=>{if(!(!i.eventId||!i.marshalId)){m.value=!0,f.value=!1,v.value="";try{await In.sendMagicLink(i.eventId,i.marshalId),f.value=!0,setTimeout(()=>{f.value=!1},3e3)}catch(R){console.error("Failed to send email:",R),v.value=R.response?.data?.message||"Failed to send email"}finally{m.value=!1}}};return We(()=>i.marshalId,R=>{R?x():(s.value="",r.value=!1)},{immediate:!0}),(R,T)=>(_(),b("div",CA,[u("div",LA,[T[5]||(T[5]=u("label",null,"Name *",-1)),u("input",{value:e.form.name,onInput:T[0]||(T[0]=A=>k("name",A.target.value)),type:"text",required:"",class:"form-input"},null,40,xA)]),u("div",AA,[T[6]||(T[6]=u("label",null,"Email",-1)),u("input",{value:e.form.email,onInput:T[1]||(T[1]=A=>k("email",A.target.value)),type:"email",class:"form-input"},null,40,EA)]),u("div",TA,[T[7]||(T[7]=u("label",null,"Phone number",-1)),u("input",{value:e.form.phoneNumber,onInput:T[2]||(T[2]=A=>k("phoneNumber",A.target.value)),type:"tel",class:"form-input"},null,40,IA)]),u("div",SA,[T[8]||(T[8]=u("label",null,"Notes",-1)),u("textarea",{value:e.form.notes,onInput:T[3]||(T[3]=A=>k("notes",A.target.value)),class:"form-input",rows:"3",placeholder:"e.g., Needs to leave by 11am"},null,40,MA)]),e.marshalId?(_(),b("div",PA,[T[9]||(T[9]=u("label",null,"Login Link",-1)),T[10]||(T[10]=u("p",{class:"help-text"},"Share this unique link with the marshal so they can access their dashboard.",-1)),l.value?(_(),b("div",$A,"Loading link...")):s.value?(_(),b("div",OA,[u("input",{type:"text",value:s.value,readonly:"",class:"form-input magic-link-input",onFocus:T[4]||(T[4]=A=>A.target.select())},null,40,DA),u("div",RA,[u("button",{type:"button",class:"btn btn-secondary",onClick:M},I(h.value?"Copied!":"Copy link"),1),r.value?(_(),b("button",{key:0,type:"button",class:"btn btn-primary",disabled:m.value,onClick:P},I(m.value?"Sending...":"Send via email"),9,NA)):B("",!0)]),f.value?(_(),b("p",BA,"Email sent successfully!")):B("",!0),v.value?(_(),b("p",FA,I(v.value),1)):B("",!0)])):d.value?(_(),b("div",zA,I(d.value),1)):B("",!0)])):B("",!0)]))}},HA=Ze(UA,[["__scopeId","data-v-59f2e8cd"]]),VA={class:"tab-content"},ZA={class:"section-title"},qA={class:"assignments-list"},WA={class:"assignment-info"},jA={class:"assignment-header"},GA=["title"],KA={key:1,class:"status-indicator pending-indicator",title:"Will be assigned on save"},YA={key:2,class:"pending-badge"},JA={key:3,class:"pending-badge"},XA={key:0,class:"check-in-info"},QA={class:"check-in-method"},eE={class:"assignment-actions"},tE=["onClick"],nE=["onClick"],sE={key:0,class:"form-group",style:{"margin-top":"1.5rem"}},iE={value:""},oE=["value"],aE={__name:"MarshalCheckpointsTab",props:{assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},isNewMarshal:{type:Boolean,default:!1}},emits:["input","remove-assignment","assign-to-location"],setup(e,{expose:n,emit:i}){const{termsLower:a}=mt(),s=e,r=i,{pendingCheckInChanges:l,getEffectiveCheckInStatus:d,handleToggleCheckIn:h,getStatusIcon:m,getStatusColor:f,getStatusText:v,formatTime:k}=lf(()=>r("input")),x=$(""),M=ne(()=>s.assignments?.length||0),P=ne(()=>{const T=[...s.availableLocations];return T.sort((A,g)=>A.name.localeCompare(g.name,void 0,{numeric:!0,sensitivity:"base"})),T}),R=()=>{x.value&&(r("assign-to-location",x.value),x.value="")};return n({pendingCheckInChanges:l,clearPendingChanges:()=>{l.value.clear(),x.value=""},getPendingChanges:()=>Array.from(l.value.entries()).map(([T,A])=>({assignmentId:T,shouldBeCheckedIn:A}))}),(T,A)=>(_(),b("div",VA,[u("h3",ZA,"Assigned "+I(H(a).checkpoints)+" ("+I(M.value)+")",1),u("div",qA,[(_(!0),b(be,null,$e(e.assignments,g=>(_(),b("div",{key:g.id,class:Ve(["assignment-item",{"checked-in":!g.isPending&&H(d)(g),"is-pending":g.isPending}])},[u("div",WA,[u("div",jA,[g.isPending?(_(),b("span",KA,"  ")):(_(),b("span",{key:0,class:"status-indicator",style:Yt({color:H(f)(g)}),title:H(v)(g)},I(H(m)(g)),13,GA)),u("strong",null,I(g.locationName),1),g.isPending?(_(),b("span",YA," (will be assigned on save) ")):H(l).has(g.id)?(_(),b("span",JA," (unsaved) ")):B("",!0)]),!g.isPending&&H(d)(g)?(_(),b("span",XA,[g.isCheckedIn&&!H(l).has(g.id)?(_(),b(be,{key:0},[He(I(H(k)(g.checkInTime))+" ",1),u("span",QA,"("+I(g.checkInMethod)+")",1)],64)):(_(),b(be,{key:1},[He(" Will be checked in on save ")],64))])):B("",!0)]),u("div",eE,[g.isPending?B("",!0):(_(),b("button",{key:0,onClick:C=>H(h)(g),class:Ve(["btn btn-small",H(d)(g)?"btn-danger":"btn-secondary"])},I(H(d)(g)?"Undo":"Check in"),11,tE)),u("button",{onClick:C=>T.$emit("remove-assignment",g),class:"btn btn-small btn-danger"}," Remove ",8,nE)])],2))),128)),P.value.length>0?(_(),b("div",sE,[u("label",null,"Assign to "+I(H(a).checkpoint),1),Pe(u("select",{"onUpdate:modelValue":A[0]||(A[0]=g=>x.value=g),class:"form-input",onChange:R},[u("option",iE,"Select a "+I(H(a).checkpoint)+"...",1),(_(!0),b(be,null,$e(P.value,g=>(_(),b("option",{key:g.id,value:g.id},I(g.name),9,oE))),128))],544),[[dn,x.value]])])):B("",!0)])]))}},rE=Ze(aE,[["__scopeId","data-v-5b6e7012"]]),lE={class:"marshal-checklist-view"},cE={key:0,class:"loading-state"},uE={key:1,class:"error-state"},dE={key:2,class:"empty-state"},hE={key:3,class:"checklist-items"},fE={class:"item-checkbox"},pE=["checked","disabled","onChange"],mE={class:"item-content"},vE={class:"item-header"},gE={class:"item-text-wrapper"},_E={class:"item-text"},yE={key:0,class:"item-context"},bE={class:"item-scope"},kE=["title"],wE={key:0,class:"completion-info"},CE={key:0,class:"pending-text"},LE={class:"completion-text"},xE={class:"completion-time"},AE={key:1,class:"uncomplete-info"},EE={key:2,class:"disabled-reason"},TE={__name:"MarshalChecklistView",props:{eventId:{type:String,required:!0},marshalId:{type:String,required:!0},locations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{expose:n,emit:i}){const a=e,s=i,r=$([]),l=$(!1),d=$(null),h=$(new Map),m=ne(()=>r.value.map(g=>{const C=h.value.get(g.itemId),w=C!==void 0?C.complete:g.isCompleted,E=C!==void 0&&C.complete!==g.isCompleted;return{...g,localIsCompleted:w,isModified:E}})),f=async()=>{if(!(!a.eventId||!a.marshalId)){l.value=!0,d.value=null;try{const g=await Lt.getMarshalChecklist(a.eventId,a.marshalId);if(r.value=g.data||[],a.modelValue&&a.modelValue.length>0){const C=new Map;a.modelValue.forEach(w=>{C.set(w.itemId,{complete:w.complete,contextType:w.contextType,contextId:w.contextId})}),h.value=C}}catch(g){console.error("Failed to load checklist:",g),d.value=g.response?.data?.message||"Failed to load checklist"}finally{l.value=!1}}},v=g=>{const C=h.value.get(g.itemId),w=C!==void 0?C.complete:g.isCompleted;h.value.set(g.itemId,{complete:!w,contextType:g.completionContextType,contextId:g.completionContextId}),k()},k=()=>{const g=[];for(const[C,w]of h.value.entries()){const E=r.value.find(O=>O.itemId===C);E&&w.complete!==E.isCompleted&&g.push({itemId:C,complete:w.complete,contextType:w.contextType,contextId:w.contextId})}s("update:modelValue",g),s("change",g)};n({resetLocalState:()=>{if(h.value=new Map,a.modelValue&&a.modelValue.length>0){const g=new Map;a.modelValue.forEach(C=>{g.set(C.itemId,{complete:C.complete,contextType:C.contextType,contextId:C.contextId})}),h.value=g}},loadChecklist:f});const M=g=>({Everyone:"Everyone",SpecificPeople:"Assigned to you",EveryoneInAreas:"Your areas",EveryoneAtCheckpoints:"Your checkpoints",OnePerCheckpoint:"One per checkpoint",OnePerArea:"One per area",EveryAreaLead:"Area lead",OneLeadPerArea:"One lead per area"})[g.matchedScope]||g.matchedScope,P=g=>({Everyone:"This item is for everyone at the event",SpecificPeople:"This item is specifically assigned to this person",EveryoneInAreas:"This item is for everyone in certain areas",EveryoneAtCheckpoints:"This item is for everyone at certain checkpoints",OnePerCheckpoint:"One person at the checkpoint needs to complete this",OnePerArea:"One person in the area needs to complete this",EveryAreaLead:"This item is for area leads only",OneLeadPerArea:"One area lead needs to complete this"})[g.matchedScope]||"",R=g=>g.completionContextType==="Checkpoint"||g.completionContextType==="Area"?"Already completed by someone else":"Cannot be completed",T=g=>{if(!g.completionContextType||!g.completionContextId)return null;if(g.completionContextType==="Checkpoint"){const C=a.locations.find(E=>E.id===g.completionContextId);return C?`at checkpoint ${C.description?`${C.name} - ${C.description}`:C.name}`:null}if(g.completionContextType==="Area"){const C=a.areas.find(w=>w.id===g.completionContextId);return C?`in area ${C.name}`:null}return g.completionContextType==="Personal"?g.contextOwnerName?`for ${g.contextOwnerName}`:"assigned individually":null},A=g=>g?new Date(g).toLocaleString():"";return We(()=>[a.eventId,a.marshalId],()=>{f()},{immediate:!0}),(g,C)=>(_(),b("div",lE,[l.value?(_(),b("div",cE," Loading checklist... ")):d.value?(_(),b("div",uE,[u("p",null,I(d.value),1),u("button",{onClick:f,class:"btn btn-secondary btn-small"}," Retry ")])):r.value.length===0?(_(),b("div",dE,[...C[0]||(C[0]=[u("p",null,"No checklist items for this person.",-1)])])):(_(),b("div",hE,[(_(!0),b(be,null,$e(m.value,w=>(_(),b("div",{key:w.itemId,class:Ve(["checklist-item",{"item-completed":w.localIsCompleted,"item-modified":w.isModified}])},[u("div",fE,[u("input",{type:"checkbox",checked:w.localIsCompleted,disabled:!w.canBeCompletedByMe,onChange:E=>v(w)},null,40,pE)]),u("div",mE,[u("div",vE,[u("div",gE,[u("div",_E,I(w.text),1),T(w)?(_(),b("div",yE,I(T(w)),1)):B("",!0)]),u("div",bE,[u("span",{class:"scope-pill",title:P(w)},I(M(w)),9,kE)])]),w.localIsCompleted?(_(),b("div",wE,[w.isModified&&!w.isCompleted?(_(),b("span",CE," Will be marked as completed (pending save) ")):(_(),b(be,{key:1},[u("span",LE," Completed by "+I(w.completedByActorName||"Unknown"),1),u("span",xE,I(A(w.completedAt)),1)],64))])):B("",!0),w.isModified&&w.isCompleted&&!w.localIsCompleted?(_(),b("div",AE,[...C[1]||(C[1]=[u("span",{class:"pending-text"},"Will be marked as incomplete (pending save)",-1)])])):B("",!0),!w.canBeCompletedByMe&&!w.localIsCompleted?(_(),b("div",EE,I(R(w)),1)):B("",!0)])],2))),128))]))]))}},IE=Ze(TE,[["__scopeId","data-v-d020f56e"]]),SE={class:"checklist-preview"},ME={class:"preview-actions"},PE={class:"preview-header"},$E={key:0,class:"add-item-form"},OE=["placeholder"],DE=["disabled"],RE={key:1,class:"pending-items"},NE={class:"item-content"},BE={class:"item-header"},FE={class:"item-text"},zE={class:"item-scope"},UE=["onClick"],HE={key:2,class:"empty-state"},VE={key:0,class:"help-text"},ZE={key:3,class:"checklist-items"},qE={class:"item-content"},WE={class:"item-header"},jE={class:"item-text"},GE={class:"item-scope"},KE=["title"],YE={key:0,class:"item-context"},JE={__name:"ChecklistPreview",props:{allChecklistItems:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=$(!1),l=$(""),d=$([...a.modelValue]);We(()=>a.modelValue,A=>{d.value=[...A]},{deep:!0});const h=()=>{l.value.trim()&&(d.value.push({text:l.value.trim(),isNew:!0}),l.value="",r.value=!1,f())},m=A=>{d.value.splice(A,1),f()},f=()=>{s("update:modelValue",[...d.value]),s("change")},v=ne(()=>{const A=new Set;for(const g of a.pendingLocationIds){const C=a.allLocations.find(w=>w.id===g);C&&(C.areaIds||C.AreaIds||[]).forEach(E=>A.add(E))}return[...A]}),k=A=>{const g=A.scope,C=A.itemType,w=A.ids||[];return g==="SpecificPeople"&&C==="Marshal"?w.includes("ALL_MARSHALS"):(g==="EveryoneAtCheckpoints"||g==="OnePerCheckpoint")&&C==="Checkpoint"?w.includes("ALL_CHECKPOINTS")?!0:w.some(E=>a.pendingLocationIds.includes(E)):g==="OnePerCheckpoint"&&C==="Area"?w.includes("ALL_AREAS")?!0:w.some(E=>v.value.includes(E)):(g==="EveryoneInAreas"||g==="OnePerArea"||g==="EveryAreaLead"||g==="OneLeadPerArea")&&C==="Area"?w.includes("ALL_AREAS")?!0:w.some(E=>v.value.includes(E)):!1},x=ne(()=>a.allChecklistItems.filter(A=>A.scopeConfigurations&&A.scopeConfigurations.length>0?A.scopeConfigurations.some(g=>k(g)):!1)),M=A=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,OnePerCheckpoint:`One per ${i.value.checkpoint}`,EveryoneInAreas:`All in ${i.value.areas}`,OnePerArea:`One per ${i.value.area}`,EveryAreaLead:`${i.value.area} leads`,OneLeadPerArea:`One lead per ${i.value.area}`})[A]||A,P=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"Unknown";const g=A.scopeConfigurations.find(w=>k(w));if(!g)return M(A.scopeConfigurations[0].scope);const C=g.ids||[];return C.includes("ALL_MARSHALS")?"Everyone":C.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:C.includes("ALL_AREAS")?`All ${i.value.areas}`:M(g.scope)},R=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return"";const g=A.scopeConfigurations.find(w=>k(w));return g&&{SpecificPeople:"This item is for everyone at the event",EveryoneAtCheckpoints:`This item is for everyone at specified ${i.value.checkpoints}`,OnePerCheckpoint:`One person at each ${i.value.checkpoint} needs to complete this`,EveryoneInAreas:`This item is for everyone in specified ${i.value.areas}`,OnePerArea:`One person in each ${i.value.area} needs to complete this`,EveryAreaLead:`This item is for ${i.value.area} leads only`,OneLeadPerArea:`One ${i.value.area} lead needs to complete this`}[g.scope]||""},T=A=>{if(!A.scopeConfigurations||A.scopeConfigurations.length===0)return null;const g=A.scopeConfigurations.find(E=>k(E));if(!g)return null;const C=g.itemType,w=g.ids||[];if(w.includes("ALL_MARSHALS")||w.includes("ALL_CHECKPOINTS")||w.includes("ALL_AREAS"))return null;if(C==="Checkpoint"){const E=a.allLocations.filter(O=>w.includes(O.id)&&a.pendingLocationIds.includes(O.id)).map(O=>O.name);if(E.length>0)return`At: ${E.join(", ")}`}if(C==="Area"){const E=a.areas.filter(O=>w.includes(O.id)&&v.value.includes(O.id)).map(O=>O.name);if(E.length>0)return`In: ${E.join(", ")}`}return null};return(A,g)=>(_(),b("div",SE,[u("div",ME,[u("p",PE,I(e.isEditing?`Add new ${H(i).checklist} for this ${H(i).person}:`:`${H(i).checklists} that will apply to this ${H(i).person}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:g[0]||(g[0]=C=>r.value=!r.value)},I(r.value?"Cancel":`+ Add ${H(i).checklist}`),1)]),r.value?(_(),b("div",$E,[Pe(u("input",{"onUpdate:modelValue":g[1]||(g[1]=C=>l.value=C),type:"text",placeholder:`Enter ${H(i).checklist} text...`,class:"add-item-input",onKeyup:ph(h,["enter"])},null,40,OE),[[st,l.value]]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim(),onClick:h}," Add ",8,DE)])):B("",!0),d.value.length>0?(_(),b("div",RE,[(_(!0),b(be,null,$e(d.value,(C,w)=>(_(),b("div",{key:`pending-${w}`,class:"checklist-item pending"},[g[3]||(g[3]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",NE,[u("div",BE,[u("div",FE,I(C.text),1),u("div",zE,[g[2]||(g[2]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:E=>m(w),title:"Remove"},"  ",8,UE)])])])]))),128))])):B("",!0),!e.isEditing&&x.value.length===0&&d.value.length===0?(_(),b("div",HE,[u("p",null,"No "+I(H(i).checklists)+" will apply based on the current "+I(H(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(_(),b("p",VE," Assign "+I(H(i).checkpoints)+" to see relevant "+I(H(i).checklists)+". ",1)):B("",!0)])):B("",!0),!e.isEditing&&x.value.length>0?(_(),b("div",ZE,[(_(!0),b(be,null,$e(x.value,C=>(_(),b("div",{key:C.id,class:"checklist-item"},[g[4]||(g[4]=u("div",{class:"item-checkbox"},[u("input",{type:"checkbox",checked:!1,disabled:""})],-1)),u("div",qE,[u("div",WE,[u("div",jE,I(C.text),1),u("div",GE,[u("span",{class:"scope-pill",title:R(C)},I(P(C)),9,KE)])]),T(C)?(_(),b("div",YE,I(T(C)),1)):B("",!0)])]))),128))])):B("",!0)]))}},XE=Ze(JE,[["__scopeId","data-v-1c92d629"]]),QE={class:"notes-preview"},eT={class:"preview-actions"},tT={class:"preview-header"},nT={key:0,class:"add-item-form"},sT={class:"add-form-fields"},iT=["disabled"],oT={key:1,class:"pending-items"},aT={class:"note-header"},rT={class:"note-title"},lT={class:"note-actions"},cT=["onClick"],uT={key:0,class:"note-content"},dT={key:2,class:"empty-state"},hT={key:0,class:"help-text"},fT={key:3,class:"notes-list"},pT={class:"note-header"},mT={class:"note-title"},vT=["title"],gT={key:0,class:"note-content"},_T={key:1,class:"note-context"},yT={__name:"NotesPreview",props:{allNotes:{type:Array,default:()=>[]},pendingLocationIds:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=$(!1),l=$(""),d=$(""),h=$([...a.modelValue]);We(()=>a.modelValue,g=>{h.value=[...g]},{deep:!0});const m=()=>{!l.value.trim()&&!d.value.trim()||(h.value.push({title:l.value.trim(),content:d.value.trim(),isNew:!0}),l.value="",d.value="",r.value=!1,v())},f=g=>{h.value.splice(g,1),v()},v=()=>{s("update:modelValue",[...h.value]),s("change")},k=ne(()=>{const g=new Set;for(const C of a.pendingLocationIds){const w=a.allLocations.find(E=>E.id===C);w&&(w.areaIds||w.AreaIds||[]).forEach(O=>g.add(O))}return[...g]}),x=g=>{const C=g.scope,w=g.itemType,E=g.ids||[];return C==="SpecificPeople"&&w==="Marshal"?E.includes("ALL_MARSHALS"):C==="EveryoneAtCheckpoints"&&w==="Checkpoint"?E.includes("ALL_CHECKPOINTS")?!0:E.some(O=>a.pendingLocationIds.includes(O)):C==="EveryoneInAreas"&&w==="Area"?E.includes("ALL_AREAS")?!0:E.some(O=>k.value.includes(O)):!1},M=ne(()=>a.allNotes.filter(g=>g.scopeConfigurations&&g.scopeConfigurations.length>0?g.scopeConfigurations.some(C=>x(C)):!1)),P=g=>({SpecificPeople:"Everyone",EveryoneAtCheckpoints:`All at ${i.value.checkpoints}`,EveryoneInAreas:`All in ${i.value.areas}`})[g]||g,R=g=>{if(!g.scopeConfigurations||g.scopeConfigurations.length===0)return"Unknown";const C=g.scopeConfigurations.find(E=>x(E));if(!C)return P(g.scopeConfigurations[0].scope);const w=C.ids||[];return w.includes("ALL_MARSHALS")?"Everyone":w.includes("ALL_CHECKPOINTS")?`All ${i.value.checkpoints}`:w.includes("ALL_AREAS")?`All ${i.value.areas}`:P(C.scope)},T=g=>{if(!g.scopeConfigurations||g.scopeConfigurations.length===0)return"";const C=g.scopeConfigurations.find(E=>x(E));return C&&{SpecificPeople:"This note is for everyone at the event",EveryoneAtCheckpoints:`This note is for everyone at specified ${i.value.checkpoints}`,EveryoneInAreas:`This note is for everyone in specified ${i.value.areas}`}[C.scope]||""},A=g=>{if(!g.scopeConfigurations||g.scopeConfigurations.length===0)return null;const C=g.scopeConfigurations.find(O=>x(O));if(!C)return null;const w=C.itemType,E=C.ids||[];if(E.includes("ALL_MARSHALS")||E.includes("ALL_CHECKPOINTS")||E.includes("ALL_AREAS"))return null;if(w==="Checkpoint"){const O=a.allLocations.filter(W=>E.includes(W.id)&&a.pendingLocationIds.includes(W.id)).map(W=>W.name);if(O.length>0)return`At: ${O.join(", ")}`}if(w==="Area"){const O=a.areas.filter(W=>E.includes(W.id)&&k.value.includes(W.id)).map(W=>W.name);if(O.length>0)return`In: ${O.join(", ")}`}return null};return(g,C)=>(_(),b("div",QE,[u("div",eT,[u("p",tT,I(e.isEditing?`Add new note for this ${H(i).person}:`:`Notes that will be visible to this ${H(i).person}:`),1),u("button",{type:"button",class:"add-item-btn",onClick:C[0]||(C[0]=w=>r.value=!r.value)},I(r.value?"Cancel":"+ Add note"),1)]),r.value?(_(),b("div",nT,[u("div",sT,[Pe(u("input",{"onUpdate:modelValue":C[1]||(C[1]=w=>l.value=w),type:"text",placeholder:"Note title...",class:"add-item-input title-input"},null,512),[[st,l.value]]),Pe(u("textarea",{"onUpdate:modelValue":C[2]||(C[2]=w=>d.value=w),placeholder:"Note content...",class:"add-item-input content-input",rows:"3"},null,512),[[st,d.value]])]),u("button",{type:"button",class:"save-item-btn",disabled:!l.value.trim()&&!d.value.trim(),onClick:m}," Add ",8,iT)])):B("",!0),h.value.length>0?(_(),b("div",oT,[(_(!0),b(be,null,$e(h.value,(w,E)=>(_(),b("div",{key:`pending-${E}`,class:"note-item pending"},[u("div",aT,[u("span",rT,I(w.title||"Untitled"),1),u("div",lT,[C[3]||(C[3]=u("span",{class:"scope-pill new-pill",title:"Will be created when saved"}," New ",-1)),u("button",{type:"button",class:"remove-item-btn",onClick:O=>f(E),title:"Remove"},"  ",8,cT)])]),w.content?(_(),b("div",uT,I(w.content),1)):B("",!0)]))),128))])):B("",!0),!e.isEditing&&M.value.length===0&&h.value.length===0?(_(),b("div",dT,[u("p",null,"No notes will be visible based on the current "+I(H(i).checkpoint)+" assignments.",1),e.pendingLocationIds.length===0?(_(),b("p",hT," Assign "+I(H(i).checkpoints)+" to see relevant notes. ",1)):B("",!0)])):B("",!0),!e.isEditing&&M.value.length>0?(_(),b("div",fT,[(_(!0),b(be,null,$e(M.value,w=>(_(),b("div",{key:w.id,class:"note-item"},[u("div",pT,[u("span",mT,I(w.title||"Untitled"),1),u("span",{class:"scope-pill",title:T(w)},I(R(w)),9,vT)]),w.content?(_(),b("div",gT,I(w.content),1)):B("",!0),A(w)?(_(),b("div",_T,I(A(w)),1)):B("",!0)]))),128))])):B("",!0)]))}},bT=Ze(yT,[["__scopeId","data-v-dc8ac5e7"]]),kT={class:"custom-footer"},wT={key:1},CT={__name:"EditMarshalModal",props:{show:{type:Boolean,default:!1},marshal:{type:Object,default:null},eventId:{type:String,required:!0},assignments:{type:Array,default:()=>[]},availableLocations:{type:Array,default:()=>[]},allLocations:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},eventNotes:{type:Array,default:()=>[]},allChecklistItems:{type:Array,default:()=>[]}},emits:["close","save","delete","toggle-check-in","remove-assignment","assign-to-location","update:isDirty"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$("details"),d=$(null),h=$(null),m=$([]),f=$([]),v=$([]),k=$([]),x=$({name:"",email:"",phoneNumber:"",notes:""}),M=ne(()=>{const ue=s.isEditing?`Edit ${a.value.person}`:`Create ${a.value.person}`,de=x.value.name?.trim();return de?`${ue} - ${de}`:ue}),P=ne(()=>[{value:"details",label:"Details",icon:"details"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),R=ne(()=>P.value.findIndex(ue=>ue.value===l.value)),T=ne(()=>R.value===P.value.length-1),A=ne(()=>T.value?null:P.value[R.value+1]),g=ne(()=>T.value?`Create ${a.value.person}`:`Add ${A.value.label.toLowerCase()}...`),C=ne(()=>f.value.map(ue=>ue.locationId)),w=ne(()=>s.isEditing?s.assignments:f.value.map(ue=>({id:`pending-${ue.locationId}`,locationId:ue.locationId,locationName:s.allLocations.find(de=>de.id===ue.locationId)?.name||"Unknown",isPending:!0}))),E=ne(()=>{if(s.isEditing)return s.availableLocations;const ue=f.value.map(de=>de.locationId);return s.allLocations.filter(de=>!ue.includes(de.id))});We(()=>s.marshal,ue=>{ue?x.value={name:ue.name||"",email:ue.email||"",phoneNumber:ue.phoneNumber||"",notes:ue.notes||""}:x.value={name:"",email:"",phoneNumber:"",notes:""}},{immediate:!0,deep:!0}),We(()=>s.show,ue=>{ue&&(l.value="details",m.value=[],f.value=[],v.value=[],k.value=[],s.isEditing||(x.value={name:"",email:"",phoneNumber:"",notes:""}),d.value?.clearPendingChanges&&d.value.clearPendingChanges(),h.value?.resetLocalState&&h.value.resetLocalState())});const O=()=>{r("update:isDirty",!0)},W=()=>{r("update:isDirty",!0)},V=()=>{s.isEditing||T.value?se():l.value=A.value.value},se=()=>{const ue={...x.value,checkInChanges:d.value?.getPendingChanges?.()||[],checklistChanges:m.value||[],pendingAssignments:s.isEditing?[]:f.value,pendingNewChecklistItems:v.value,pendingNewNotes:k.value};r("save",ue)},ge=()=>{r("delete")},Se=ue=>{!s.isEditing&&ue.isPending?f.value=f.value.filter(de=>de.locationId!==ue.locationId):r("remove-assignment",ue)},Me=ue=>{s.isEditing?r("assign-to-location",ue):(f.value.push({locationId:ue}),r("update:isDirty",!0))},ie=()=>{r("close")};return(ue,de)=>(_(),et(Nt,{show:e.show,title:M.value,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:ie},{"tab-header":Ye(()=>[Ne(rc,{modelValue:l.value,"onUpdate:modelValue":de[0]||(de[0]=Ae=>l.value=Ae),tabs:P.value},null,8,["modelValue","tabs"])]),footer:Ye(()=>[u("div",kT,[e.isEditing?(_(),b("button",{key:0,type:"button",onClick:ge,class:"btn btn-danger"}," Delete "+I(H(a).person),1)):(_(),b("div",wT)),u("button",{type:"button",onClick:V,class:"btn btn-primary"},I(e.isEditing?"Save changes":g.value),1)])]),default:Ye(()=>[l.value==="details"?(_(),et(HA,{key:0,form:x.value,"event-id":e.eventId,"marshal-id":e.isEditing?e.marshal?.id:null,"onUpdate:form":de[1]||(de[1]=Ae=>x.value=Ae),onInput:O},null,8,["form","event-id","marshal-id"])):B("",!0),l.value==="checkpoints"?(_(),et(rE,{key:1,ref_key:"checkpointsTabRef",ref:d,assignments:w.value,"available-locations":E.value,"is-new-marshal":!e.isEditing,onInput:O,onRemoveAssignment:Se,onAssignToLocation:Me},null,8,["assignments","available-locations","is-new-marshal"])):B("",!0),l.value==="checklists"&&e.isEditing?(_(),et(IE,{key:2,ref_key:"checklistTabRef",ref:h,modelValue:m.value,"onUpdate:modelValue":de[2]||(de[2]=Ae=>m.value=Ae),"event-id":e.eventId,"marshal-id":e.marshal.id,locations:e.allLocations,areas:e.areas,onChange:W},null,8,["modelValue","event-id","marshal-id","locations","areas"])):B("",!0),l.value==="checklists"?(_(),et(XE,{key:3,modelValue:v.value,"onUpdate:modelValue":de[3]||(de[3]=Ae=>v.value=Ae),"all-checklist-items":e.allChecklistItems,"pending-location-ids":C.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:O},null,8,["modelValue","all-checklist-items","pending-location-ids","all-locations","areas","is-editing"])):B("",!0),l.value==="notes"&&e.isEditing?(_(),et(wr,{key:4,"event-id":e.eventId,"marshal-id":e.marshal?.id,"all-notes":e.eventNotes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","marshal-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"?(_(),et(bT,{key:5,modelValue:k.value,"onUpdate:modelValue":de[4]||(de[4]=Ae=>k.value=Ae),"all-notes":e.eventNotes,"pending-location-ids":C.value,"all-locations":e.allLocations,areas:e.areas,"is-editing":e.isEditing,onChange:O},null,8,["modelValue","all-notes","pending-location-ids","all-locations","areas","is-editing"])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},LT=Ze(CT,[["__scopeId","data-v-3cd98423"]]),xT={class:"locations-list"},AT={class:"conflict-actions"},ET={__name:"AssignmentConflictModal",props:{show:{type:Boolean,default:!1},conflictData:{type:Object,default:()=>({marshalName:"",locations:[]})}},emits:["close","choice"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=n,r=d=>{s("choice",d)},l=()=>{s("close")};return(d,h)=>(_(),et(Nt,{show:e.show,title:`${H(i).person} already assigned`,size:"medium","z-index":1100,onClose:l},{actions:Ye(()=>[u("div",AT,[u("button",{onClick:h[0]||(h[0]=m=>r("move")),class:"btn btn-primary btn-full"}," Move to this "+I(H(a).checkpoint)+" (remove from others) ",1),u("button",{onClick:h[1]||(h[1]=m=>r("both")),class:"btn btn-secondary btn-full"}," Assign to both (keep existing assignments) "),u("button",{onClick:h[2]||(h[2]=m=>r("choose-other")),class:"btn btn-secondary btn-full"}," Choose someone else "),u("button",{onClick:h[3]||(h[3]=m=>r("cancel")),class:"btn btn-secondary btn-full"}," Cancel ")])]),default:Ye(()=>[u("p",null,[u("strong",null,I(e.conflictData.marshalName),1),h[4]||(h[4]=He(" is currently assigned to: ",-1))]),u("ul",xT,[(_(!0),b(be,null,$e(e.conflictData.locations,m=>(_(),b("li",{key:m},I(m),1))),128))]),h[5]||(h[5]=u("p",null,"What would you like to do?",-1))]),_:1},8,["show","title"]))}},TT=Ze(ET,[["__scopeId","data-v-b64e5b37"]]),IT={key:0,class:"assign-marshal-section"},ST={value:""},MT=["value"],PT=["disabled"],$T={key:1,class:"assign-marshal-section create-mode"},OT={class:"form-group"},DT={class:"form-group"},RT={class:"form-group"},NT={__name:"AssignMarshalModal",props:{show:{type:Boolean,default:!1},locationName:{type:String,default:""},marshals:{type:Array,default:()=>[]}},emits:["close","assign-existing","create-and-assign"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=$(!1),l=$(""),d=$({name:"",email:"",phoneNumber:""});We(()=>a.show,x=>{x||(r.value=!1,l.value="",d.value={name:"",email:"",phoneNumber:""})});const h=()=>{r.value=!0},m=()=>{l.value&&s("assign-existing",l.value)},f=()=>{d.value.name&&s("create-and-assign",{...d.value})},v=()=>{r.value=!1,d.value={name:"",email:"",phoneNumber:""}},k=()=>{s("close")};return(x,M)=>(_(),et(Nt,{show:e.show,title:r.value?`Create new ${H(i).person}`:`Assign ${H(i).person} to ${e.locationName}`,size:"medium",onClose:k},{actions:Ye(()=>[r.value?(_(),b(be,{key:0},[u("button",{onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{onClick:f,class:"btn btn-primary"}," Create & assign ")],64)):B("",!0)]),default:Ye(()=>[r.value?(_(),b("div",$T,[u("h3",null,"Create new "+I(H(i).person),1),u("div",OT,[M[5]||(M[5]=u("label",null,"Name *",-1)),Pe(u("input",{"onUpdate:modelValue":M[1]||(M[1]=P=>d.value.name=P),type:"text",required:"",class:"form-input"},null,512),[[st,d.value.name]])]),u("div",DT,[M[6]||(M[6]=u("label",null,"Email",-1)),Pe(u("input",{"onUpdate:modelValue":M[2]||(M[2]=P=>d.value.email=P),type:"email",class:"form-input"},null,512),[[st,d.value.email]])]),u("div",RT,[M[7]||(M[7]=u("label",null,"Phone",-1)),Pe(u("input",{"onUpdate:modelValue":M[3]||(M[3]=P=>d.value.phoneNumber=P),type:"tel",class:"form-input"},null,512),[[st,d.value.phoneNumber]])])])):(_(),b("div",IT,[u("h3",null,"Select existing "+I(H(i).person),1),Pe(u("select",{"onUpdate:modelValue":M[0]||(M[0]=P=>l.value=P),class:"form-input"},[u("option",ST,"Choose a "+I(H(i).person)+"...",1),(_(!0),b(be,null,$e(e.marshals,P=>(_(),b("option",{key:P.id,value:P.id},[He(I(P.name)+" ",1),P.assignedLocationIds&&P.assignedLocationIds.length>0?(_(),b(be,{key:0},[He(" (assigned to "+I(P.assignedLocationIds.length)+" "+I(P.assignedLocationIds.length>1?H(i).checkpoints:H(i).checkpoint)+") ",1)],64)):B("",!0)],8,MT))),128))],512),[[dn,l.value]]),u("button",{onClick:m,class:"btn btn-primary btn-full",style:{"margin-top":"1rem"},disabled:!l.value}," Assign selected "+I(H(i).person),9,PT),M[4]||(M[4]=u("div",{class:"divider"},"OR",-1)),u("button",{onClick:h,class:"btn btn-secondary btn-full"}," Create new "+I(H(i).person),1)]))]),_:1},8,["show","title"]))}},BT=Ze(NT,[["__scopeId","data-v-f95e76a2"]]),FT={class:"shift-times-content"},zT={class:"info-text"},UT={class:"time-delta-info"},HT={class:"delta-detail"},VT={class:"delta-detail"},ZT={class:"delta-summary"},qT={class:"affected-checkpoints"},WT={class:"option-selection"},jT={class:"radio-option"},GT={class:"radio-option"},KT={__name:"ShiftCheckpointTimesModal",props:{show:{type:Boolean,default:!1},oldEventDate:{type:String,required:!0},newEventDate:{type:String,required:!0},affectedCheckpointsCount:{type:Number,default:0}},emits:["confirm","cancel"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$("shift"),d=ne(()=>{const k=new Date(s.oldEventDate);return new Date(s.newEventDate)-k}),h=k=>new Date(k).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=k=>{const x=Math.abs(k),M=k>=0?"+":"-",P=Math.floor(x/(1e3*60*60*24)),R=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),T=Math.floor(x%(1e3*60*60)/(1e3*60)),A=[];return P>0&&A.push(`${P}d`),R>0&&A.push(`${R}h`),T>0&&A.push(`${T}m`),`${M}${A.join(" ")}`},f=()=>{r("confirm",{shouldShift:l.value==="shift",timeDelta:d.value})},v=()=>{r("cancel")};return(k,x)=>(_(),et(Nt,{show:e.show,title:`Shift ${H(i).checkpoint} Times?`,size:"medium",onClose:v},{actions:Ye(()=>[u("button",{type:"button",onClick:v,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:f,class:"btn btn-primary"},I(l.value==="shift"?"Shift Times":"Keep Times"),1)]),default:Ye(()=>[u("div",FT,[u("p",zT," You've changed the event date/time. Some "+I(H(a).checkpoints)+" have custom times set. ",1),u("div",UT,[x[2]||(x[2]=u("strong",null,"Event time change:",-1)),u("div",HT," Old: "+I(h(e.oldEventDate)),1),u("div",VT," New: "+I(h(e.newEventDate)),1),u("div",ZT," Delta: "+I(m(d.value)),1)]),u("p",qT,[u("strong",null,I(e.affectedCheckpointsCount)+" "+I(e.affectedCheckpointsCount===1?H(a).checkpoint:H(a).checkpoints),1),x[3]||(x[3]=He(" with custom times will be shifted by the same amount. ",-1))]),u("div",WT,[u("label",jT,[Pe(u("input",{"onUpdate:modelValue":x[0]||(x[0]=M=>l.value=M),type:"radio",value:"shift",name:"shift-option"},null,512),[[fu,l.value]]),u("div",null,[u("strong",null,"Shift all "+I(H(a).checkpoint)+" times",1),x[4]||(x[4]=u("small",null,"Recommended: Maintains relative timing",-1))])]),u("label",GT,[Pe(u("input",{"onUpdate:modelValue":x[1]||(x[1]=M=>l.value=M),type:"radio",value:"keep",name:"shift-option"},null,512),[[fu,l.value]]),u("div",null,[u("strong",null,"Keep "+I(H(a).checkpoint)+" times unchanged",1),u("small",null,I(H(i).checkpoint)+" times will stay at their current values",1)])])])])]),_:1},8,["show","title"]))}},YT=Ze(KT,[["__scopeId","data-v-0e706cff"]]),uf=[{name:"Charcoal",hex:"#2d3748"},{name:"Dark Gray",hex:"#4a5568"},{name:"Gray",hex:"#718096"},{name:"Red",hex:"#f56565"},{name:"Coral",hex:"#ff6b6b"},{name:"Rose",hex:"#fb7185"},{name:"Pink",hex:"#ed64a6"},{name:"Magenta",hex:"#d946ef"},{name:"Fuchsia",hex:"#e879f9"},{name:"Purple",hex:"#9f7aea"},{name:"Violet",hex:"#a78bfa"},{name:"Lavender",hex:"#b197fc"},{name:"Indigo",hex:"#5a67d8"},{name:"Navy",hex:"#4263eb"},{name:"Blue",hex:"#667eea"},{name:"Sky",hex:"#0ea5e9"},{name:"Cyan",hex:"#0bc5ea"},{name:"Aqua",hex:"#22d3ee"},{name:"Teal",hex:"#38b2ac"},{name:"Emerald",hex:"#10b981"},{name:"Green",hex:"#48bb78"},{name:"Mint",hex:"#51cf66"},{name:"Lime",hex:"#84cc16"},{name:"Olive",hex:"#a3b18a"},{name:"Yellow",hex:"#ecc94b"},{name:"Amber",hex:"#f59e0b"},{name:"Orange",hex:"#ed8936"},{name:"Peach",hex:"#ff922b"},{name:"Light Gray",hex:"#cbd5e0"},{name:"Silver",hex:"#e2e8f0"},{name:"Cream",hex:"#f7fafc"}],Dl="#667eea";function Qu(e){const n=e.map(a=>a.color);return uf.find(a=>!n.includes(a.hex))?.hex||Dl}const JT={key:0,class:"tab-content"},XT={class:"form-group"},QT=["disabled"],eI={class:"form-group"},tI={class:"form-group"},nI={class:"color-picker"},sI=["title","onClick"],iI={key:1,class:"tab-content"},oI={class:"boundary-section"},aI={class:"boundary-actions"},rI={key:2,class:"tab-content"},lI={class:"section-title"},cI={class:"contacts-actions"},uI={key:0,class:"area-contacts-list"},dI=["onClick"],hI={class:"contact-info"},fI={key:0,class:"contact-role-badge"},pI={key:1,class:"contact-details"},mI={key:0},vI={key:1},gI={key:3,class:"tab-content"},_I={class:"section-title"},yI={key:0,class:"empty-state"},bI={key:1,class:"checkpoints-list"},kI=["onClick"],wI={class:"checkpoint-header"},CI={class:"checkpoint-name-section"},LI={key:0,class:"checkpoint-description"},xI={class:"checkpoint-stats"},AI={class:"checkpoint-details"},EI={class:"detail-row"},TI={class:"detail-label"},II={class:"detail-value"},SI={key:0,class:"warning-text"},MI={class:"detail-row"},PI={class:"detail-value"},$I={key:0,class:"detail-row"},OI={key:1,class:"detail-row"},DI={key:4,class:"placeholder-message"},RI={key:6,class:"placeholder-message"},NI={key:8,class:"placeholder-message"},BI={class:"custom-footer"},FI={key:1},zI={__name:"EditAreaModal",props:{show:{type:Boolean,default:!1},area:{type:Object,default:null},checkpoints:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1},eventId:{type:String,required:!0},allLocations:{type:Array,default:()=>[]},assignments:{type:Array,default:()=>[]},notes:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]}},emits:["close","save","delete","draw-boundary","update:isDirty","select-checkpoint","add-area-contact","edit-contact"],setup(e,{emit:n}){const{terms:i,termsLower:a}=mt(),s=e,r=n,l=$("details"),d=$(null),h=$([]),m=$({}),f=$({}),v=$({name:"",description:"",color:Dl,displayOrder:0,isDefault:!1,polygon:[]}),k=ne(()=>s.area&&s.area.id),x=ne(()=>[{value:"details",label:"Details",icon:"details"},{value:"boundary",label:"Boundary",icon:"area"},{value:"contacts",label:"Contacts",icon:"marshal"},{value:"checkpoints",label:i.value.checkpoints,icon:"checkpoint"},{value:"checklists",label:i.value.checklists,icon:"checklist"},{value:"notes",label:"Notes",icon:"notes"}]),M=ne(()=>x.value.findIndex(me=>me.value===l.value)),P=ne(()=>M.value===x.value.length-1),R=ne(()=>P.value?null:x.value[M.value+1]),T=ne(()=>P.value?`Create ${a.value.area}`:`Add ${R.value.label.toLowerCase()}...`),A=ne(()=>{if(!s.area||!s.area.id)return[];const me=s.checkpoints.filter(re=>re.areaIds&&re.areaIds.includes(s.area.id)).map(re=>re.id);return s.assignments.filter(re=>me.includes(re.locationId))}),g=ne(()=>!s.area||!s.area.id?[]:s.checkpoints.filter(me=>me.areaIds&&me.areaIds.includes(s.area.id))),C=ne(()=>{const me=[...g.value];return me.sort((re,ce)=>{const U=re.name.match(/^(\d+)/),G=ce.name.match(/^(\d+)/);if(U&&G){const Y=parseInt(U[1]),ke=parseInt(G[1]);if(Y!==ke)return Y-ke}return re.name.localeCompare(ce.name,void 0,{numeric:!0,sensitivity:"base"})}),me}),w=ne(()=>!s.area||!s.area.id?[]:s.contacts.filter(me=>me.scopeConfigurations?me.scopeConfigurations.some(re=>re.scope==="EveryoneInAreas"&&re.itemType==="Area"?re.ids?.includes("ALL_AREAS")?!0:re.ids?.includes(s.area.id):!1):!1)),E=me=>s.assignments.filter(re=>re.locationId===me),O=me=>E(me.id).filter(ce=>ce.isCheckedIn).length,W=me=>{const re=E(me.id);if(re.length===0)return"status-none";const ce=re.filter(U=>U.isCheckedIn).length;return ce===0?"status-none":ce===re.length?"status-complete":"status-partial"},V=me=>{const re=E(me.id);if(re.length===0)return`No ${a.value.people}`;const ce=re.filter(U=>U.isCheckedIn).length;return ce===0?"Not checked in":ce===re.length?"Fully checked in":`Partially checked in (${ce}/${re.length})`},se=me=>{const re=m.value[me];return!re||re.total===0?"":re.completed===re.total?"status-complete":re.completed===0?"status-none":"status-partial"},ge=me=>{const re=m.value[me];return re?re.total===0?"No tasks":re.completed===re.total?"All tasks completed":`${re.completed}/${re.total} completed`:""},Se=async me=>{if(!(m.value[me]||f.value[me])){f.value[me]=!0;try{const ce=(await Lt.getCheckpointChecklist(s.eventId,me)).data||[];m.value[me]={total:ce.length,completed:ce.filter(U=>U.isCompleted).length}}catch(re){console.error("Failed to load checklist status for checkpoint:",me,re),m.value[me]={total:0,completed:0}}finally{f.value[me]=!1}}};We(()=>s.area,me=>{if(me){const re=me.polygon?typeof me.polygon=="string"?JSON.parse(me.polygon):me.polygon:[];v.value={name:me.name||"",description:me.description||"",color:me.color||Dl,displayOrder:me.displayOrder||0,isDefault:me.isDefault||!1,polygon:re}}else v.value={name:"",description:"",color:Qu(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[]}},{immediate:!0,deep:!0}),We(()=>s.show,me=>{me&&(l.value="details",h.value=[],m.value={},f.value={},k.value||(v.value={name:"",description:"",color:Qu(s.areas),displayOrder:s.areas.length,isDefault:!1,polygon:[]}),d.value?.resetLocalState&&d.value.resetLocalState())}),We(l,me=>{me==="checkpoints"&&s.area&&s.area.id&&g.value.forEach(re=>{setTimeout(()=>Se(re.id),0)})});const Me=()=>{r("update:isDirty",!0)},ie=me=>{v.value.color=me,Me()},ue=()=>{r("draw-boundary",v.value)},de=()=>{v.value.polygon=[],Me()},Ae=()=>{r("add-area-contact",s.area)},pe=me=>me?me.replace(/([A-Z])/g," $1").replace(/^./,re=>re.toUpperCase()).trim():"",Ce=me=>{h.value=me,Me()},K=()=>{k.value||P.value?he():l.value=R.value.value},he=()=>{const me=s.area?{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null,displayOrder:v.value.displayOrder,checklistChanges:h.value||[]}:{name:v.value.name,description:v.value.description,color:v.value.color,polygon:v.value.polygon.length>0?v.value.polygon:null};r("save",me)},Ee=()=>{r("delete",s.area.id)},Re=()=>{r("close")};return(me,re)=>(_(),et(Nt,{show:e.show,title:e.area&&e.area.id?`Edit ${H(a).area}: ${e.area.name}`:`Create new ${H(a).area}`,size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:Re},{"tab-header":Ye(()=>[Ne(rc,{modelValue:l.value,"onUpdate:modelValue":re[0]||(re[0]=ce=>l.value=ce),tabs:x.value},null,8,["modelValue","tabs"])]),footer:Ye(()=>[u("div",BI,[k.value&&!v.value.isDefault?(_(),b("button",{key:0,type:"button",onClick:Ee,class:"btn btn-danger"}," Delete "+I(H(a).area),1)):(_(),b("div",FI)),u("button",{type:"button",onClick:K,class:"btn btn-primary"},I(k.value?"Save changes":T.value),1)])]),default:Ye(()=>[l.value==="details"?(_(),b("div",JT,[u("form",{onSubmit:wt(he,["prevent"])},[u("div",XT,[re[4]||(re[4]=u("label",null,"Name *",-1)),Pe(u("input",{"onUpdate:modelValue":re[1]||(re[1]=ce=>v.value.name=ce),type:"text",required:"",class:"form-input",disabled:v.value.isDefault,onInput:Me},null,40,QT),[[st,v.value.name]])]),u("div",eI,[re[5]||(re[5]=u("label",null,"Description",-1)),Pe(u("textarea",{"onUpdate:modelValue":re[2]||(re[2]=ce=>v.value.description=ce),class:"form-input",rows:"3",onInput:Me},null,544),[[st,v.value.description]])]),u("div",tI,[re[6]||(re[6]=u("label",null,"Color *",-1)),u("div",nI,[(_(!0),b(be,null,$e(H(uf),ce=>(_(),b("div",{key:ce.hex,class:Ve(["color-swatch",{selected:v.value.color===ce.hex}]),style:Yt({backgroundColor:ce.hex}),title:ce.name,onClick:U=>ie(ce.hex)},null,14,sI))),128))])])],32)])):B("",!0),l.value==="boundary"?(_(),b("div",iI,[u("div",oI,[re[7]||(re[7]=u("div",{class:"instructions-card"},[u("p",null,[u("strong",null,"Draw a polygon on the map to define this area's boundary")]),u("p",null,' Click "Draw on Map" to activate drawing mode. Click on the map to add vertices, and double-click to complete the polygon. ')],-1)),u("div",aI,[u("button",{onClick:ue,class:"btn btn-primary btn-full"}," Draw on Map "),v.value.polygon&&v.value.polygon.length>0?(_(),b("button",{key:0,onClick:de,class:"btn btn-danger btn-full"}," Clear Boundary ")):B("",!0)])])])):B("",!0),l.value==="contacts"?(_(),b("div",rI,[u("h3",lI,I(H(i).area)+" contacts",1),u("div",cI,[u("button",{onClick:Ae,class:"btn btn-primary btn-full"}," Add contact for this "+I(H(a).area),1)]),w.value.length>0?(_(),b("div",uI,[u("h4",null,"Contacts visible in this "+I(H(a).area)+" ("+I(w.value.length)+")",1),(_(!0),b(be,null,$e(w.value,ce=>(_(),b("div",{key:ce.contactId,class:"contact-item",onClick:U=>me.$emit("edit-contact",ce)},[u("div",hI,[u("strong",null,I(ce.name),1),ce.role?(_(),b("span",fI,I(pe(ce.role)),1)):B("",!0),ce.phone||ce.email?(_(),b("div",pI,[ce.phone?(_(),b("span",mI,I(ce.phone),1)):B("",!0),ce.email?(_(),b("span",vI,I(ce.email),1)):B("",!0)])):B("",!0)])],8,dI))),128))])):B("",!0)])):B("",!0),l.value==="checkpoints"&&k.value?(_(),b("div",gI,[u("h3",_I,I(H(i).checkpoints)+" in "+I(e.area?.name)+" ("+I(g.value.length)+")",1),g.value.length===0?(_(),b("div",yI,[u("p",null,"No "+I(H(a).checkpoints)+" in this "+I(H(a).area)+" yet.",1)])):(_(),b("div",bI,[(_(!0),b(be,null,$e(C.value,ce=>(_(),b("div",{key:ce.id,class:"checkpoint-card",onClick:U=>me.$emit("select-checkpoint",ce)},[u("div",wI,[u("div",CI,[u("h4",null,I(ce.name),1),ce.description?(_(),b("p",LI,I(ce.description),1)):B("",!0)]),u("div",xI,[u("div",{class:Ve(["stat-badge",W(ce)])},I(V(ce)),3)])]),u("div",AI,[u("div",EI,[u("span",TI,I(H(i).people)+":",1),u("span",II,[He(I(E(ce.id).length)+" / "+I(ce.requiredMarshals)+" ",1),E(ce.id).length<ce.requiredMarshals?(_(),b("span",SI," ("+I(ce.requiredMarshals-E(ce.id).length)+" needed) ",1)):B("",!0)])]),u("div",MI,[re[8]||(re[8]=u("span",{class:"detail-label"},"Checked in:",-1)),u("span",PI,I(O(ce))+" / "+I(E(ce.id).length),1)]),m.value[ce.id]?(_(),b("div",$I,[re[9]||(re[9]=u("span",{class:"detail-label"},"Tasks:",-1)),u("span",{class:Ve(["detail-value",se(ce.id)])},I(ge(ce.id)),3)])):f.value[ce.id]?(_(),b("div",OI,[...re[10]||(re[10]=[u("span",{class:"detail-label"},"Tasks:",-1),u("span",{class:"detail-value loading-text"},"Loading...",-1)])])):B("",!0)])],8,kI))),128))]))])):B("",!0),l.value==="checkpoints"&&!k.value?(_(),b("div",DI,[u("p",null,I(H(i).checkpoints)+" will be automatically assigned based on boundaries after the "+I(H(a).area)+" is created.",1)])):B("",!0),l.value==="checklists"&&k.value?(_(),et(cf,{key:5,ref_key:"checklistTabRef",ref:d,modelValue:h.value,"onUpdate:modelValue":re[3]||(re[3]=ce=>h.value=ce),"event-id":e.eventId,"area-id":e.area.id,locations:e.allLocations,areas:e.areas,assignments:A.value,onChange:Ce},null,8,["modelValue","event-id","area-id","locations","areas","assignments"])):B("",!0),l.value==="checklists"&&!k.value?(_(),b("div",RI,[u("p",null,I(H(i).checklists)+" can be assigned after the "+I(H(a).area)+" is created.",1)])):B("",!0),l.value==="notes"&&k.value?(_(),et(wr,{key:7,"event-id":e.eventId,"area-id":e.area?.id,"all-notes":e.notes,locations:e.allLocations,areas:e.areas,assignments:e.assignments},null,8,["event-id","area-id","all-notes","locations","areas","assignments"])):B("",!0),l.value==="notes"&&!k.value?(_(),b("div",NI,[u("p",null,"Notes can be viewed after the "+I(H(a).area)+" is created.",1)])):B("",!0)]),_:1},8,["show","title","is-dirty"]))}},UI=Ze(zI,[["__scopeId","data-v-ad57309b"]]),HI={class:"scope-configuration-editor"},VI={class:"editor-header"},ZI={class:"scope-types-list"},qI=["onClick"],WI={class:"scope-type-label"},jI={class:"scope-type-pill"},GI={class:"expand-label"},KI={class:"expand-icon"},YI={class:"modal-content"},JI={class:"modal-header"},XI={class:"modal-body"},QI={class:"scope-help"},eS={key:0,class:"form-group"},tS={class:"checkbox-label special-option"},nS=["checked"],sS={key:0,class:"specific-selection"},iS=["placeholder"],oS={class:"checkbox-group scrollable"},aS=["checked","onChange"],rS={key:1,class:"form-group"},lS={class:"checkbox-label special-option"},cS=["checked"],uS={key:0,class:"specific-selection"},dS={class:"checkbox-group scrollable"},hS=["checked","onChange"],fS={key:2,class:"form-group"},pS={class:"checkbox-label special-option"},mS=["checked"],vS={key:0,class:"specific-selection"},gS=["placeholder"],_S={class:"checkbox-group scrollable"},yS=["checked","onChange"],bS={class:"checkpoint-info"},kS={class:"checkpoint-name"},wS={key:0,class:"checkpoint-description"},CS={__name:"ScopeConfigurationEditor",props:{modelValue:{type:Array,default:()=>[]},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isEditing:{type:Boolean,default:!1},excludeScopes:{type:Array,default:()=>[]},headerText:{type:String,default:"Who can see and complete this item?"}},emits:["update:modelValue","user-changed"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=ne(()=>[{scope:"SpecificPeople",label:`Specific ${i.value.people}`},{scope:"EveryoneAtCheckpoints",label:`Every ${i.value.person} at specified ${i.value.checkpoints}`},{scope:"OnePerCheckpoint",label:`One ${i.value.person} at each specified ${i.value.checkpoint}`},{scope:"OnePerArea",label:`One ${i.value.person} in specified ${i.value.areas}`},{scope:"EveryoneInAreas",label:`Everyone in specified ${i.value.areas}`},{scope:"EveryAreaLead",label:`Every ${i.value.area} lead at specified ${i.value.areas}`},{scope:"OneLeadPerArea",label:`One lead per specified ${i.value.area}`}]),l=$({SpecificPeople:{enabled:!0,ids:["ALL_MARSHALS"]},EveryoneInAreas:{enabled:!1,ids:[]},EveryoneAtCheckpoints:{enabled:!1,ids:[]},OnePerCheckpoint:{enabled:!1,ids:[]},OnePerArea:{enabled:!1,ids:[]},EveryAreaLead:{enabled:!1,ids:[]},OneLeadPerArea:{enabled:!1,ids:[]}}),d=$(null),h=$(""),m=$(""),f=$(!a.isEditing);let v=!0,k=!1;const x=ne(()=>r.value.filter(U=>!a.excludeScopes.includes(U.scope))),M=ne(()=>f.value?x.value:x.value.filter(U=>W(U.scope))),P=ne(()=>x.value.filter(G=>W(G.scope)).length<x.value.length),R=ne(()=>{const U=x.value.filter(G=>W(G.scope)).length;return x.value.length-U});We(()=>a.modelValue,U=>{if(U){if(k){k=!1;return}v=!0,Object.keys(l.value).forEach(G=>{l.value[G]={enabled:!1,ids:[]}}),U.forEach(G=>{G.scope==="Everyone"?l.value.SpecificPeople={enabled:!0,ids:["ALL_MARSHALS"]}:G.scope==="AreaLead"?l.value.EveryAreaLead={enabled:!0,ids:[...G.ids]}:l.value[G.scope]&&(l.value[G.scope]={enabled:!0,ids:[...G.ids]})}),v=!1}},{immediate:!0});const T=()=>{const U=[];return Object.keys(l.value).forEach(G=>{const Y=l.value[G];if(Y.enabled){const ke={scope:G,itemType:A(G),ids:[...Y.ids]};U.push(ke)}}),U};We(l,()=>{if(v)return;if(Object.keys(l.value).some(Y=>Y!=="SpecificPeople"&&l.value[Y].enabled)&&l.value.SpecificPeople?.ids.includes("ALL_MARSHALS")){const Y=l.value.SpecificPeople.ids.indexOf("ALL_MARSHALS");l.value.SpecificPeople.ids.splice(Y,1),l.value.SpecificPeople.ids.length===0&&(l.value.SpecificPeople.enabled=!1)}k=!0;const G=T();s("update:modelValue",G),s("user-changed")},{deep:!0});const A=U=>g(U)?"Area":C(U)?"Checkpoint":w(U)?"Marshal":null,g=U=>U==="EveryoneInAreas"||U==="OnePerArea"||U==="EveryAreaLead"||U==="OneLeadPerArea",C=U=>U==="EveryoneAtCheckpoints"||U==="OnePerCheckpoint",w=U=>U==="SpecificPeople",E=U=>{const G=r.value.find(Y=>Y.scope===U);return G?G.label:U},O=U=>({SpecificPeople:`Select "Everyone at the event" or choose specific ${i.value.people} who must complete this (personal completion)`,EveryoneAtCheckpoints:`Every ${i.value.person} at the selected ${i.value.checkpoints} must complete this (personal completion)`,OnePerCheckpoint:`One completion needed at each selected ${i.value.checkpoint} (shared completion)`,OnePerArea:`One completion needed in each selected ${i.value.area} (shared completion)`,EveryoneInAreas:`Every ${i.value.person} in the selected ${i.value.areas} must complete this (personal completion)`,EveryAreaLead:`Every ${i.value.area} lead at the selected ${i.value.areas} must complete this individually (personal completion)`,OneLeadPerArea:`One completion per ${i.value.area}, only ${i.value.area} leads can complete (shared among leads)`})[U]||"",W=U=>l.value[U]?.enabled||!1,V=U=>{const G=l.value[U];if(!G||!G.enabled)return"No";const Y=G.ids||[];if(g(U)){if(Y.includes("ALL_AREAS"))return`All ${i.value.areas}`;const ke=Y.length;return ke>0?`${ke} ${ke!==1?i.value.areas:i.value.area}`:`Select ${i.value.areas}...`}if(C(U)){if(Y.includes("ALL_CHECKPOINTS"))return`All ${i.value.checkpoints}`;const ke=Y.length;return ke>0?`${ke} ${ke!==1?i.value.checkpoints:i.value.checkpoint}`:`Select ${i.value.checkpoints}...`}if(w(U)){if(Y.includes("ALL_MARSHALS"))return"Everyone";const ke=Y.length;return ke>0?`${ke} ${ke!==1?i.value.people:i.value.person}`:`Select ${i.value.people}...`}return"Configured"},se=U=>{d.value=U,h.value="",m.value=""},ge=()=>{d.value=null},Se=()=>{d.value&&(l.value[d.value]={enabled:!1,ids:[]}),ge()},Me=()=>d.value&&l.value[d.value]?.ids.includes("ALL_MARSHALS"),ie=()=>{if(!d.value)return;const U=l.value[d.value];Me()?(U.ids=[],U.enabled=!1):(U.ids=["ALL_MARSHALS"],U.enabled=!0)},ue=U=>d.value&&l.value[d.value]?.ids.includes(U),de=U=>{if(!d.value)return;const G=l.value[d.value],Y=G.ids.indexOf(U);Y>=0?(G.ids.splice(Y,1),G.ids.length===0&&(G.enabled=!1)):(G.ids.push(U),G.enabled=!0)},Ae=ne(()=>{if(!m.value)return a.marshals;const U=m.value.toLowerCase();return a.marshals.filter(G=>G.name.toLowerCase().includes(U)||G.email&&G.email.toLowerCase().includes(U))}),pe=()=>d.value&&l.value[d.value]?.ids.includes("ALL_AREAS"),Ce=()=>{if(!d.value)return;const U=l.value[d.value];pe()?(U.ids=[],U.enabled=!1):(U.ids=["ALL_AREAS"],U.enabled=!0)},K=U=>d.value&&l.value[d.value]?.ids.includes(U),he=U=>{if(!d.value)return;const G=l.value[d.value],Y=G.ids.indexOf(U);Y>=0?(G.ids.splice(Y,1),G.ids.length===0&&(G.enabled=!1)):(G.ids.push(U),G.enabled=!0)},Ee=()=>d.value&&l.value[d.value]?.ids.includes("ALL_CHECKPOINTS"),Re=()=>{if(!d.value)return;const U=l.value[d.value];Ee()?(U.ids=[],U.enabled=!1):(U.ids=["ALL_CHECKPOINTS"],U.enabled=!0)},me=U=>d.value&&l.value[d.value]?.ids.includes(U),re=U=>{if(!d.value)return;const G=l.value[d.value],Y=G.ids.indexOf(U);Y>=0?(G.ids.splice(Y,1),G.ids.length===0&&(G.enabled=!1)):(G.ids.push(U),G.enabled=!0)},ce=ne(()=>{let U=a.locations;if(h.value){const G=h.value.toLowerCase();U=U.filter(Y=>Y.name.toLowerCase().includes(G)||Y.description&&Y.description.toLowerCase().includes(G))}return[...U].sort((G,Y)=>fn(G.name,Y.name))});return(U,G)=>(_(),b("div",HI,[u("div",VI,[u("h4",null,I(e.headerText),1)]),u("div",ZI,[(_(!0),b(be,null,$e(M.value,Y=>(_(),b("div",{key:Y.scope,class:Ve(["scope-type-row",{active:W(Y.scope)}]),onClick:ke=>se(Y.scope)},[u("div",WI,I(Y.label),1),u("div",jI,I(V(Y.scope)),1)],10,qI))),128)),P.value?(_(),b("div",{key:0,class:"expand-row",onClick:G[0]||(G[0]=Y=>f.value=!f.value)},[u("div",GI,I(f.value?"Show less":`Show ${R.value} more option${R.value!==1?"s":""}...`),1),u("div",KI,I(f.value?"":""),1)])):B("",!0)]),d.value?(_(),b("div",{key:0,class:"scope-config-modal",onClick:wt(ge,["self"])},[u("div",YI,[u("div",JI,[u("h5",null,I(E(d.value)),1),u("button",{onClick:ge,class:"btn-close",type:"button"},"")]),u("div",XI,[u("p",QI,I(O(d.value)),1),w(d.value)?(_(),b("div",eS,[u("label",tS,[u("input",{type:"checkbox",checked:Me(),onChange:ie},null,40,nS),u("span",null,[G[3]||(G[3]=u("strong",null,"Everyone at the event",-1)),He(" (all current and future "+I(H(i).people)+")",1)])]),Me()?B("",!0):(_(),b("div",sS,[Pe(u("input",{"onUpdate:modelValue":G[1]||(G[1]=Y=>m.value=Y),type:"text",placeholder:`Search ${H(i).people}...`,class:"search-input"},null,8,iS),[[st,m.value]]),u("div",oS,[(_(!0),b(be,null,$e(Ae.value,Y=>(_(),b("label",{key:Y.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:ue(Y.id),onChange:ke=>de(Y.id)},null,40,aS),u("span",null,I(Y.name),1)]))),128))])]))])):B("",!0),g(d.value)?(_(),b("div",rS,[u("label",lS,[u("input",{type:"checkbox",checked:pe(),onChange:Ce},null,40,cS),u("span",null,[u("strong",null,"All "+I(H(i).areas),1),He(" (includes future "+I(H(i).areas)+")",1)])]),pe()?B("",!0):(_(),b("div",uS,[u("div",dS,[(_(!0),b(be,null,$e(e.areas,Y=>(_(),b("label",{key:Y.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:K(Y.id),onChange:ke=>he(Y.id)},null,40,hS),u("span",{class:"area-color-dot",style:Yt({backgroundColor:Y.color||"#667eea"})},null,4),u("span",null,I(Y.name),1)]))),128))])]))])):B("",!0),C(d.value)?(_(),b("div",fS,[u("label",pS,[u("input",{type:"checkbox",checked:Ee(),onChange:Re},null,40,mS),u("span",null,[u("strong",null,"All "+I(H(i).checkpoints),1),He(" (includes future "+I(H(i).checkpoints)+")",1)])]),Ee()?B("",!0):(_(),b("div",vS,[Pe(u("input",{"onUpdate:modelValue":G[2]||(G[2]=Y=>h.value=Y),type:"text",placeholder:`Search ${H(i).checkpoints}...`,class:"search-input"},null,8,gS),[[st,h.value]]),u("div",_S,[(_(!0),b(be,null,$e(ce.value,Y=>(_(),b("label",{key:Y.id,class:"checkbox-label"},[u("input",{type:"checkbox",checked:me(Y.id),onChange:ke=>re(Y.id)},null,40,yS),u("div",bS,[u("span",kS,I(Y.name),1),Y.description?(_(),b("span",wS," - "+I(Y.description),1)):B("",!0)])]))),128))])]))])):B("",!0)]),u("div",{class:"modal-footer"},[u("button",{onClick:Se,class:"btn btn-secondary",type:"button"},"Deselect all"),u("button",{onClick:ge,class:"btn btn-primary",type:"button"},"Done")])])])):B("",!0)]))}},lc=Ze(CS,[["__scopeId","data-v-e1e2471d"]]),LS=["innerHTML"],xS={__name:"InfoModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Information"},message:{type:String,required:!0},okText:{type:String,default:"OK"}},emits:["close"],setup(e,{emit:n}){const i=n,a=()=>{i("close")};return(s,r)=>(_(),et(Nt,{show:e.show,title:e.title,size:"small","z-index":2e3,onClose:a},{actions:Ye(()=>[u("button",{onClick:a,class:"btn btn-primary"},I(e.okText),1)]),default:Ye(()=>[u("div",{class:"info-content",innerHTML:e.message},null,8,LS)]),_:1},8,["show","title"]))}},Cr=Ze(xS,[["__scopeId","data-v-897177d3"]]),AS={class:"tab-headers"},ES={class:"tab-content"},TS={class:"form-group"},IS=["placeholder"],SS={key:0,class:"checkbox-label-inline create-separate-items"},MS={class:"tab-content"},PS={class:"custom-footer"},$S={__name:"EditChecklistItemModal",props:{show:{type:Boolean,default:!1},checklistItem:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=$(!1),r=$(""),l=$("details"),d=$({text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0}),h=ne(()=>!!i.checklistItem);We(()=>i.show,T=>{T&&(l.value=i.initialTab,i.checklistItem?d.value={text:i.checklistItem.text||"",scopeConfigurations:i.checklistItem.scopeConfigurations?JSON.parse(JSON.stringify(i.checklistItem.scopeConfigurations)):[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:i.checklistItem.displayOrder||0,isRequired:i.checklistItem.isRequired!==!1,visibleFrom:i.checklistItem.visibleFrom?m(i.checklistItem.visibleFrom):null,visibleUntil:i.checklistItem.visibleUntil?m(i.checklistItem.visibleUntil):null,mustCompleteBy:i.checklistItem.mustCompleteBy?m(i.checklistItem.mustCompleteBy):null,createSeparateItems:!1}:d.value={text:"",scopeConfigurations:[{scope:"Everyone",itemType:null,ids:[]}],displayOrder:0,isRequired:!0,visibleFrom:null,visibleUntil:null,mustCompleteBy:null,createSeparateItems:!0},a("update:isDirty",!1))});const m=T=>{if(!T)return null;const A=new Date(T),g=A.getTimezoneOffset();return new Date(A.getTime()-g*60*1e3).toISOString().slice(0,16)},f=T=>T?new Date(T).toISOString():null,v=()=>{a("update:isDirty",!0)},k=()=>{a("close")},x=()=>{l.value="visibility"},M=T=>{r.value=T,s.value=!0},P=()=>{if(!d.value.text||!d.value.text.trim()){M("Please enter checklist item text");return}if(!d.value.scopeConfigurations||d.value.scopeConfigurations.length===0){M("Please select at least one scope");return}if(!d.value.scopeConfigurations.some(g=>!(g.itemType!==null&&(!g.ids||g.ids.length===0)))){M("Please configure at least one scope with valid selections");return}const A={text:d.value.text,scopeConfigurations:d.value.scopeConfigurations,displayOrder:d.value.displayOrder||0,isRequired:d.value.isRequired,visibleFrom:f(d.value.visibleFrom),visibleUntil:f(d.value.visibleUntil),mustCompleteBy:f(d.value.mustCompleteBy)};h.value||(A.createSeparateItems=d.value.createSeparateItems),a("save",A)},R=()=>{a("delete",i.checklistItem.itemId)};return(T,A)=>(_(),b(be,null,[Ne(Nt,{show:e.show,title:h.value?"Edit checklist item":"Create checklist item",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:k},{footer:Ye(()=>[u("div",PS,[h.value?(_(),b("button",{key:0,type:"button",onClick:R,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(_(),b("button",{key:1,type:"button",onClick:x,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(_(),b("button",{key:2,type:"button",onClick:P,class:"btn btn-primary"},I(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ye(()=>[u("div",AS,[u("button",{type:"button",class:Ve(["tab-header",{active:l.value==="details"}]),onClick:A[0]||(A[0]=g=>l.value="details")}," Details ",2),u("button",{type:"button",class:Ve(["tab-header",{active:l.value==="visibility"}]),onClick:A[1]||(A[1]=g=>l.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:wt(P,["prevent"]),class:"checklist-form"},[Pe(u("div",ES,[u("div",TS,[A[7]||(A[7]=u("label",{for:"text"},"Checklist text: *",-1)),Pe(u("textarea",{id:"text","onUpdate:modelValue":A[2]||(A[2]=g=>d.value.text=g),onInput:v,required:"",rows:"3",placeholder:d.value.createSeparateItems?"Enter checklist items, one per line...":"Enter the checklist item text..."},null,40,IS),[[st,d.value.text]]),h.value?B("",!0):(_(),b("label",SS,[Pe(u("input",{type:"checkbox","onUpdate:modelValue":A[3]||(A[3]=g=>d.value.createSeparateItems=g),onChange:v},null,544),[[Ii,d.value.createSeparateItems]]),A[6]||(A[6]=u("span",null,"Each line creates a new item",-1))]))])],512),[[Ts,l.value==="details"]]),Pe(u("div",MS,[Ne(lc,{modelValue:d.value.scopeConfigurations,"onUpdate:modelValue":A[4]||(A[4]=g=>d.value.scopeConfigurations=g),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,onUserChanged:v},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ts,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Ne(Cr,{show:s.value,title:"Validation Error",message:r.value,onClose:A[5]||(A[5]=g=>s.value=!1)},null,8,["show","message"])],64))}},OS=Ze($S,[["__scopeId","data-v-2c532f20"]]),DS={class:"tab-headers"},RS={class:"tab-content"},NS={class:"form-group"},BS={class:"form-group"},FS={class:"form-row"},zS={class:"form-group"},US={class:"form-group"},HS={class:"form-row"},VS={class:"form-group"},ZS={class:"form-group checkbox-group-inline"},qS={class:"checkbox-label-inline"},WS={class:"tab-content"},jS={class:"custom-footer"},GS={__name:"EditNoteModal",props:{show:{type:Boolean,default:!1},note:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!1}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const i=e,a=n,s=$(!1),r=$(""),l=$("details"),d=$({title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1}),h=ne(()=>!!i.note);We(()=>i.show,P=>{P&&(l.value=i.initialTab,i.note?d.value={title:i.note.title||"",content:i.note.content||"",scopeConfigurations:i.note.scopeConfigurations?JSON.parse(JSON.stringify(i.note.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:i.note.displayOrder||0,priority:i.note.priority||"Normal",category:i.note.category||"",isPinned:i.note.isPinned||!1}:d.value={title:"",content:"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}],displayOrder:0,priority:"Normal",category:"",isPinned:!1},a("update:isDirty",!1))});const m=()=>{a("update:isDirty",!0)},f=()=>{a("close")},v=()=>{l.value="visibility"},k=P=>{r.value=P,s.value=!0},x=()=>{if(!d.value.title||!d.value.title.trim()){k("Please enter a note title");return}if(!d.value.scopeConfigurations||d.value.scopeConfigurations.length===0){k("Please select at least one visibility scope");return}if(!d.value.scopeConfigurations.some(T=>!(T.itemType!==null&&(!T.ids||T.ids.length===0)))){k("Please configure at least one scope with valid selections");return}const R={title:d.value.title.trim(),content:d.value.content||"",scopeConfigurations:d.value.scopeConfigurations,displayOrder:d.value.displayOrder||0,priority:d.value.priority||"Normal",category:d.value.category?.trim()||null,isPinned:d.value.isPinned||!1};a("save",R)},M=()=>{a("delete",i.note.noteId)};return(P,R)=>(_(),b(be,null,[Ne(Nt,{show:e.show,title:h.value?"Edit note":"Create note",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:f},{footer:Ye(()=>[u("div",jS,[h.value?(_(),b("button",{key:0,type:"button",onClick:M,class:"btn btn-danger"}," Delete ")):B("",!0),!h.value&&l.value==="details"?(_(),b("button",{key:1,type:"button",onClick:v,class:"btn btn-primary"}," Next ")):B("",!0),h.value||l.value==="visibility"?(_(),b("button",{key:2,type:"button",onClick:x,class:"btn btn-primary"},I(h.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ye(()=>[u("div",DS,[u("button",{type:"button",class:Ve(["tab-header",{active:l.value==="details"}]),onClick:R[0]||(R[0]=T=>l.value="details")}," Details ",2),u("button",{type:"button",class:Ve(["tab-header",{active:l.value==="visibility"}]),onClick:R[1]||(R[1]=T=>l.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:wt(x,["prevent"]),class:"note-form"},[Pe(u("div",RS,[u("div",NS,[R[10]||(R[10]=u("label",{for:"title"},"Title: *",-1)),Pe(u("input",{id:"title","onUpdate:modelValue":R[2]||(R[2]=T=>d.value.title=T),type:"text",onInput:m,required:"",placeholder:"Enter note title..."},null,544),[[st,d.value.title]])]),u("div",BS,[R[11]||(R[11]=u("label",{for:"content"},"Content:",-1)),Pe(u("textarea",{id:"content","onUpdate:modelValue":R[3]||(R[3]=T=>d.value.content=T),onInput:m,rows:"6",placeholder:"Enter note content (supports markdown)..."},null,544),[[st,d.value.content]])]),u("div",FS,[u("div",zS,[R[13]||(R[13]=u("label",{for:"priority"},"Priority:",-1)),Pe(u("select",{id:"priority","onUpdate:modelValue":R[4]||(R[4]=T=>d.value.priority=T),onChange:m},[...R[12]||(R[12]=[u("option",{value:"Urgent"},"Urgent",-1),u("option",{value:"High"},"High",-1),u("option",{value:"Normal"},"Normal",-1),u("option",{value:"Low"},"Low",-1)])],544),[[dn,d.value.priority]])]),u("div",US,[R[14]||(R[14]=u("label",{for:"category"},"Category:",-1)),Pe(u("input",{id:"category","onUpdate:modelValue":R[5]||(R[5]=T=>d.value.category=T),type:"text",onInput:m,placeholder:"e.g., Safety, Logistics..."},null,544),[[st,d.value.category]])])]),u("div",HS,[u("div",VS,[R[15]||(R[15]=u("label",{for:"displayOrder"},"Display order:",-1)),Pe(u("input",{id:"displayOrder","onUpdate:modelValue":R[6]||(R[6]=T=>d.value.displayOrder=T),type:"number",onInput:m,min:"0"},null,544),[[st,d.value.displayOrder,void 0,{number:!0}]]),R[16]||(R[16]=u("span",{class:"help-text"},"Lower numbers appear first",-1))]),u("div",ZS,[u("label",qS,[Pe(u("input",{type:"checkbox","onUpdate:modelValue":R[7]||(R[7]=T=>d.value.isPinned=T),onChange:m},null,544),[[Ii,d.value.isPinned]]),R[17]||(R[17]=u("span",null,"Pin to top",-1))]),R[18]||(R[18]=u("span",{class:"help-text"},"Pinned notes always appear at the top",-1))])])],512),[[Ts,l.value==="details"]]),Pe(u("div",WS,[Ne(lc,{modelValue:d.value.scopeConfigurations,"onUpdate:modelValue":R[8]||(R[8]=T=>d.value.scopeConfigurations=T),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":h.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this note?",onUserChanged:m},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ts,l.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Ne(Cr,{show:s.value,title:"Validation Error",message:r.value,onClose:R[9]||(R[9]=T=>s.value=!1)},null,8,["show","message"])],64))}},KS=Ze(GS,[["__scopeId","data-v-0ffed598"]]),YS={class:"tab-headers"},JS={class:"tab-content"},XS={class:"form-group"},QS={for:"marshalId"},eM=["value"],tM={class:"help-text"},nM={class:"form-group"},sM=["disabled"],iM={class:"form-group"},oM={class:"role-input-group"},aM={key:0,label:"Built-in Roles"},rM=["value"],lM={key:1,label:"Custom Roles"},cM=["value"],uM={class:"form-row"},dM={class:"form-group"},hM={class:"form-group"},fM={class:"form-group"},pM={class:"tab-content"},mM={class:"custom-footer"},vM={__name:"EditContactModal",props:{show:{type:Boolean,default:!1},contact:{type:Object,default:null},initialTab:{type:String,default:"details"},areas:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},marshals:{type:Array,default:()=>[]},availableRoles:{type:Object,default:()=>({builtInRoles:[],customRoles:[]})},isDirty:{type:Boolean,default:!1},preselectedArea:{type:Object,default:null}},emits:["close","save","delete","update:isDirty"],setup(e,{emit:n}){const{terms:i}=mt(),a=e,s=n,r=$(!1),l=$(""),d=$("details"),h=$(!1),m=$({role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}),f=ne(()=>!!a.contact),v=ne(()=>!!m.value.marshalId),k=ne(()=>[...a.marshals].sort((w,E)=>fn(w.name,E.name)));We(()=>a.show,w=>{if(w){if(d.value=a.initialTab,a.contact){const E=[...a.availableRoles.builtInRoles||[],...a.availableRoles.customRoles||[]];h.value=a.contact.role&&!E.includes(a.contact.role),m.value={role:a.contact.role||"",name:a.contact.name||"",phone:a.contact.phone||"",email:a.contact.email||"",notes:a.contact.notes||"",marshalId:a.contact.marshalId||null,scopeConfigurations:a.contact.scopeConfigurations?JSON.parse(JSON.stringify(a.contact.scopeConfigurations)):[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}]}}else{h.value=!1;const E=a.preselectedArea?[{scope:"EveryoneInAreas",itemType:"Area",ids:[a.preselectedArea.id]}]:[{scope:"SpecificPeople",itemType:"Marshal",ids:["ALL_MARSHALS"]}];m.value={role:"",name:"",phone:"",email:"",notes:"",marshalId:null,scopeConfigurations:E}}s("update:isDirty",!1)}});const x=w=>w?w.replace(/([A-Z])/g," $1").replace(/^./,E=>E.toUpperCase()).trim():"",M=()=>{s("update:isDirty",!0)},P=()=>{if(m.value.marshalId){const w=a.marshals.find(E=>E.id===m.value.marshalId);w&&(m.value.name=w.name,!m.value.phone&&w.phoneNumber&&(m.value.phone=w.phoneNumber),!m.value.email&&w.email&&(m.value.email=w.email))}M()},R=()=>{s("close")},T=()=>{if(!m.value.role||!m.value.role.trim()){A("Please select or enter a role");return}if(!m.value.name||!m.value.name.trim()){A("Please enter a contact name");return}d.value="visibility"},A=w=>{l.value=w,r.value=!0},g=()=>{if(!m.value.role||!m.value.role.trim()){A("Please select or enter a role");return}if(!m.value.name||!m.value.name.trim()){A("Please enter a contact name");return}if(!m.value.scopeConfigurations||m.value.scopeConfigurations.length===0){A("Please select at least one visibility scope");return}if(!m.value.scopeConfigurations.some(O=>!(O.itemType!==null&&(!O.ids||O.ids.length===0)))){A("Please configure at least one scope with valid selections");return}const E={role:m.value.role.trim(),name:m.value.name.trim(),phone:m.value.phone?.trim()||null,email:m.value.email?.trim()||null,notes:m.value.notes?.trim()||null,marshalId:m.value.marshalId||null,scopeConfigurations:m.value.scopeConfigurations};s("save",E)},C=()=>{s("delete",a.contact.contactId)};return(w,E)=>(_(),b(be,null,[Ne(Nt,{show:e.show,title:f.value?"Edit contact":"Create contact",size:"large","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:R},{footer:Ye(()=>[u("div",mM,[f.value?(_(),b("button",{key:0,type:"button",onClick:C,class:"btn btn-danger"}," Delete ")):B("",!0),!f.value&&d.value==="details"?(_(),b("button",{key:1,type:"button",onClick:T,class:"btn btn-primary"}," Next ")):B("",!0),f.value||d.value==="visibility"?(_(),b("button",{key:2,type:"button",onClick:g,class:"btn btn-primary"},I(f.value?"Save changes":"Create"),1)):B("",!0)])]),default:Ye(()=>[u("div",YS,[u("button",{type:"button",class:Ve(["tab-header",{active:d.value==="details"}]),onClick:E[0]||(E[0]=O=>d.value="details")}," Details ",2),u("button",{type:"button",class:Ve(["tab-header",{active:d.value==="visibility"}]),onClick:E[1]||(E[1]=O=>d.value="visibility")}," Visibility ",2)]),u("form",{onSubmit:wt(g,["prevent"]),class:"contact-form"},[Pe(u("div",JS,[u("div",XS,[u("label",QS,"Link to "+I(H(i).person.toLowerCase())+":",1),Pe(u("select",{id:"marshalId","onUpdate:modelValue":E[2]||(E[2]=O=>m.value.marshalId=O),onChange:P},[E[12]||(E[12]=u("option",{value:null},"-- Not linked --",-1)),(_(!0),b(be,null,$e(k.value,O=>(_(),b("option",{key:O.id,value:O.id},I(O.name),9,eM))),128))],544),[[dn,m.value.marshalId]]),u("span",tM,"Optionally link to an existing "+I(H(i).person.toLowerCase())+" in the system",1)]),u("div",nM,[E[13]||(E[13]=u("label",{for:"name"},"Name: *",-1)),Pe(u("input",{id:"name","onUpdate:modelValue":E[3]||(E[3]=O=>m.value.name=O),type:"text",onInput:M,disabled:v.value,class:Ve({"input-disabled":v.value}),placeholder:"Contact name..."},null,42,sM),[[st,m.value.name]])]),u("div",iM,[E[15]||(E[15]=u("label",{for:"role"},"Role: *",-1)),u("div",oM,[h.value?Pe((_(),b("input",{key:1,id:"customRole","onUpdate:modelValue":E[5]||(E[5]=O=>m.value.role=O),type:"text",onInput:M,placeholder:"Enter custom role name..."},null,544)),[[st,m.value.role]]):Pe((_(),b("select",{key:0,id:"role","onUpdate:modelValue":E[4]||(E[4]=O=>m.value.role=O),onChange:M},[E[14]||(E[14]=u("option",{value:"",disabled:""},"Select a role...",-1)),e.availableRoles.builtInRoles?.length>0?(_(),b("optgroup",aM,[(_(!0),b(be,null,$e(e.availableRoles.builtInRoles,O=>(_(),b("option",{key:O,value:O},I(x(O)),9,rM))),128))])):B("",!0),e.availableRoles.customRoles?.length>0?(_(),b("optgroup",lM,[(_(!0),b(be,null,$e(e.availableRoles.customRoles,O=>(_(),b("option",{key:O,value:O},I(x(O)),9,cM))),128))])):B("",!0)],544)),[[dn,m.value.role]]),u("button",{type:"button",class:"toggle-custom-btn",onClick:E[6]||(E[6]=O=>h.value=!h.value)},I(h.value?"Use existing":"Custom"),1)])]),u("div",uM,[u("div",dM,[E[16]||(E[16]=u("label",{for:"phone"},"Phone:",-1)),Pe(u("input",{id:"phone","onUpdate:modelValue":E[7]||(E[7]=O=>m.value.phone=O),type:"tel",onInput:M,placeholder:"Phone number..."},null,544),[[st,m.value.phone]])]),u("div",hM,[E[17]||(E[17]=u("label",{for:"email"},"Email:",-1)),Pe(u("input",{id:"email","onUpdate:modelValue":E[8]||(E[8]=O=>m.value.email=O),type:"email",onInput:M,placeholder:"Email address..."},null,544),[[st,m.value.email]])])]),u("div",fM,[E[18]||(E[18]=u("label",{for:"notes"},"Notes / Instructions:",-1)),Pe(u("textarea",{id:"notes","onUpdate:modelValue":E[9]||(E[9]=O=>m.value.notes=O),onInput:M,rows:"3",placeholder:"Additional notes or instructions for when to contact..."},null,544),[[st,m.value.notes]])])],512),[[Ts,d.value==="details"]]),Pe(u("div",pM,[Ne(lc,{modelValue:m.value.scopeConfigurations,"onUpdate:modelValue":E[10]||(E[10]=O=>m.value.scopeConfigurations=O),areas:e.areas,locations:e.locations,marshals:e.marshals,"is-editing":f.value,"exclude-scopes":["OnePerCheckpoint","OnePerArea","OneLeadPerArea"],"header-text":"Who can see this contact?",onUserChanged:M},null,8,["modelValue","areas","locations","marshals","is-editing"])],512),[[Ts,d.value==="visibility"]])],32)]),_:1},8,["show","title","is-dirty"]),Ne(Cr,{show:r.value,title:"Validation Error",message:l.value,onClose:E[11]||(E[11]=O=>r.value=!1)},null,8,["show","message"])],64))}},gM=Ze(vM,[["__scopeId","data-v-e69e7888"]]),_M={key:0,class:"fullscreen-map-overlay"},yM={class:"fullscreen-map-header"},bM={class:"context-info"},kM={key:0},wM={class:"action-buttons"},CM=["disabled"],LM={class:"fullscreen-map-container"},xM=Object.assign({inheritAttrs:!1},{__name:"FullscreenMapOverlay",props:{show:{type:Boolean,required:!0},mode:{type:String,validator:e=>["place-checkpoint","move-checkpoint","draw-area","add-multiple"].includes(e)},contextTitle:{type:String,default:""},contextDescription:{type:String,default:""},canComplete:{type:Boolean,default:!1}},emits:["done","cancel","map-click","polygon-complete","polygon-drawing","location-click","area-click"],setup(e,{emit:n}){const i=e,a=n,s=()=>{a("done")},r=()=>{a("cancel")},l=d=>{d.key==="Escape"&&i.show&&r()};return wn(()=>{document.addEventListener("keydown",l)}),Ms(()=>{document.removeEventListener("keydown",l)}),(d,h)=>(_(),et(Up,{to:"body"},[e.show?(_(),b("div",_M,[u("div",yM,[u("div",bM,[u("h3",null,I(e.contextTitle),1),e.contextDescription?(_(),b("p",kM,I(e.contextDescription),1)):B("",!0)]),u("div",wM,[u("button",{onClick:r,class:"btn btn-cancel"}," Cancel "),u("button",{onClick:s,class:"btn btn-done",disabled:!e.canComplete}," Done ",8,CM)])]),u("div",LM,[Ne(Ja,ah(d.$attrs,{onMapClick:h[0]||(h[0]=m=>d.$emit("map-click",m)),onPolygonComplete:h[1]||(h[1]=m=>d.$emit("polygon-complete",m)),onPolygonDrawing:h[2]||(h[2]=m=>d.$emit("polygon-drawing",m)),onLocationClick:h[3]||(h[3]=m=>d.$emit("location-click",m)),onAreaClick:h[4]||(h[4]=m=>d.$emit("area-click",m))}),null,16)])])):B("",!0)]))}}),AM=Ze(xM,[["__scopeId","data-v-b1a57a82"]]),EM={class:"form-group"},TM={class:"form-group"},IM={class:"form-group"},SM={key:0,class:"form-error"},MM={class:"form-row"},PM={class:"form-group",style:{flex:"1"}},$M={class:"form-group",style:{flex:"1"}},OM={class:"form-group",style:{flex:"0 0 auto"}},DM={class:"form-group"},RM={__name:"AddLocationModal",props:{show:{type:Boolean,default:!1},location:{type:Object,default:()=>({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""})},isDirty:{type:Boolean,default:!1}},emits:["close","save","set-on-map","update:isDirty","update:location"],setup(e,{emit:n}){const{termsLower:i}=mt(),a=e,s=n,r=$({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""});We(()=>a.location,m=>{m&&(r.value={...m})},{immediate:!0,deep:!0});const l=()=>{s("update:isDirty",!0),s("update:location",{...r.value})},d=()=>{if(!Ya(r.value.what3Words)&&r.value.what3Words){alert("Invalid What3Words format.");return}s("save",r.value)},h=()=>{s("close")};return(m,f)=>(_(),et(Nt,{show:e.show,title:`Add ${H(i).checkpoint}`,size:"medium","confirm-on-close":!0,"is-dirty":e.isDirty,onClose:h},{actions:Ye(()=>[u("button",{type:"button",onClick:h,class:"btn btn-secondary"}," Cancel "),u("button",{type:"button",onClick:d,class:"btn btn-primary"}," Add "+I(H(i).checkpoint),1)]),default:Ye(()=>[u("form",{onSubmit:wt(d,["prevent"])},[u("div",EM,[f[7]||(f[7]=u("label",null,"Name",-1)),Pe(u("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>r.value.name=v),type:"text",required:"",class:"form-input",onInput:l},null,544),[[st,r.value.name]])]),u("div",TM,[f[8]||(f[8]=u("label",null,"Description",-1)),Pe(u("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>r.value.description=v),type:"text",class:"form-input",onInput:l},null,544),[[st,r.value.description]])]),u("div",IM,[f[9]||(f[9]=u("label",null,"What3Words (optional)",-1)),Pe(u("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>r.value.what3Words=v),type:"text",class:"form-input",placeholder:"e.g. filled.count.soap or filled/count/soap",onInput:l},null,544),[[st,r.value.what3Words]]),r.value.what3Words&&!H(Ya)(r.value.what3Words)?(_(),b("small",SM," Invalid format. Must be word.word.word or word/word/word (lowercase letters only, 1-20 characters each) ")):B("",!0)]),u("div",MM,[u("div",PM,[f[10]||(f[10]=u("label",null,"Longitude",-1)),Pe(u("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>r.value.longitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[st,r.value.longitude,void 0,{number:!0}]])]),u("div",$M,[f[11]||(f[11]=u("label",null,"Latitude",-1)),Pe(u("input",{"onUpdate:modelValue":f[4]||(f[4]=v=>r.value.latitude=v),type:"number",step:"0.00001",required:"",class:"form-input",onInput:l},null,544),[[st,r.value.latitude,void 0,{number:!0}]])]),u("div",OM,[f[12]||(f[12]=u("label",null,"",-1)),u("button",{type:"button",class:"icon-btn",title:"Set location on map",onClick:f[5]||(f[5]=v=>m.$emit("set-on-map"))},"  ")])]),u("div",DM,[u("label",null,"Required "+I(H(i).people),1),Pe(u("input",{"onUpdate:modelValue":f[6]||(f[6]=v=>r.value.requiredMarshals=v),type:"number",min:"1",required:"",class:"form-input",onInput:l},null,544),[[st,r.value.requiredMarshals,void 0,{number:!0}]])])],32)]),_:1},8,["show","title","is-dirty"]))}},NM=Ze(RM,[["__scopeId","data-v-dcbdc216"]]),BM={class:"admin-event-manage"},FM={class:"header"},zM={class:"header-left"},UM={key:0},HM={class:"event-date"},VM={class:"header-actions"},ZM={class:"container"},qM={class:"tabs-nav"},WM={class:"tab-content-wrapper"},jM={key:1,class:"tab-panel"},GM={key:2,class:"tab-panel"},KM={__name:"AdminEventManage",setup(e){const n=nc(),i=Zo(),a=tf(),{activeTab:s,switchTab:r}=nf("details",["details","course","areas","checkpoints","marshals","notes","checklists","contacts"]),{showConfirmModal:l,confirmModalTitle:d,confirmModalMessage:h,showConfirm:m,handleConfirmModalConfirm:f,handleConfirmModalCancel:v}=Yb(),{tabLabels:k,termsLower:x}=mt(),M=ne(()=>[{value:"details",label:"Event details",icon:"details"},{value:"course",label:k.value.course,icon:"course"},{value:"areas",label:k.value.areas,icon:"area"},{value:"checkpoints",label:k.value.checkpoints,icon:"checkpoint"},{value:"marshals",label:k.value.marshals,icon:"marshal"},{value:"notes",label:"Notes",icon:"notes"},{value:"checklists",label:k.value.checklists,icon:"checklist"},{value:"contacts",label:"Contacts",icon:"contacts"}]),P=$(null),R=$([]),T=$([]),A=$(null),g=$(!1),C=$(null),w=$(!1),E=$(!1),O=$(null),W=$(""),V=$([]),se=$(!1),ge=$(!1),Se=$(!1),Me=$(null),ie=$(!1),ue=$(!1),de=$(!1),Ae=$(!1),pe=$(null),Ce=$(null),K=$(null),he=$(!1),Ee=$(!1),Re=$({id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),me=$(!1),re=$(!1),ce=$({marshalName:"",locations:[],marshal:null}),U=$(null),G=$([]),Y=$(!1),ke=$(null),Je=$({id:"",name:"",email:"",phoneNumber:"",notes:""}),D=$(!1),F=$([]),Z=$([]),oe=$([]),le=$([]),ae=$(!1),xe=$(""),Le=$(""),we=$({name:"",description:"",eventDate:"",timeZoneId:"UTC"}),fe=$(!1),ze=$(!1),Te=$(""),Be=$(""),qe=$(0),Ge=$({name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""}),Xe=$([]),Ue=$(null),vt=$(!1),Ct=$(null),ft=$(!1),pt=$(null),Jt=$(!1),Ut=$(1),gt=$(!1),X=$(null),J=$({}),te=$(null),Fe=$(null),Mt=$(null),on=$([]),Xt=$(null),Cn=$(null),ti=$([]),Vn=$(null),ni=$(!1),zi=$("details"),Ko=$(null),Zn=$([]),qn=$(null),si=$(!1),Ui=$("details"),Hi=$([]),an=$({builtInRoles:[],customRoles:[]}),De=$(null),Wn=$(!1),vs=$("details"),Ps=$(null),Vi=$(null),Zi=ne(()=>Vi.value?.marshalId!=null),Yo=()=>{i.push(`/event/${n.params.eventId}`)},gs=ne(()=>`${window.location.origin}/#/event/${n.params.eventId}`),qi=ne(()=>{const N=[];return T.value.forEach(q=>{q.assignments&&N.push(...q.assignments)}),N}),Lr=ne(()=>{if(!ke.value)return T.value;const N=ke.value.assignedLocationIds||[],q=oe.value.map(ye=>ye.locationId),_e=le.value;return T.value.filter(ye=>!N.includes(ye.id)&&!q.includes(ye.id)||_e.includes(ye.id))}),Jo=ne(()=>{let N=G.value;if(A.value){const q=A.value.assignments.map(ye=>ye.marshalName),_e=F.value.map(ye=>ye.marshalName);N=G.value.filter(ye=>!q.includes(ye.name)&&!_e.includes(ye.name))}return N.slice().sort((q,_e)=>q.name.localeCompare(_e.name))}),xr=ne(()=>X.value==="place-checkpoint"||X.value==="move-checkpoint"?te.value!==null:X.value==="draw-area"?Ue.value?.polygon?.length>0||Mt.value&&Mt.value.length>=3:X.value==="add-multiple"),Ar=ne(()=>{const N=[...T.value];return X.value==="place-checkpoint"&&te.value&&N.push({id:"temp-single",name:Ge.value.name||"New Checkpoint",latitude:te.value.lat,longitude:te.value.lng,requiredMarshals:Ge.value.requiredMarshals||1,assignments:[],isTemporary:!0}),X.value==="move-checkpoint"&&te.value&&A.value&&N.push({id:"temp-move",name:A.value.name+" (new position)",latitude:te.value.lat,longitude:te.value.lng,requiredMarshals:A.value.requiredMarshals,assignments:[],isTemporary:!0}),X.value==="add-multiple"&&N.push(...on.value),N}),Xo=ne(()=>{const N=[...Xe.value];if(X.value==="draw-area"&&Ue.value?.polygon?.length>0){const q=N.findIndex(_e=>_e.id===Ue.value.id);q>=0?N[q]={...Ue.value}:N.push({...Ue.value,id:Ue.value.id||"temp-area"})}return N}),Er=()=>{i.push("/admin/dashboard")},ii=()=>{i.push({name:"AdminProfile"})},Pt=(N=!0)=>{D.value=N},Tr=()=>{fe.value=!0},Ir=async N=>{try{N&&(we.value={...N});const q=P.value.eventDate,_e=we.value.eventDate;if(q!==_e){const ye=R.value.filter(rt=>rt.startTime||rt.endTime);if(ye.length>0){Te.value=q,Be.value=_e,qe.value=ye.length,ze.value=!0;return}}await Qo(!1,null)}catch(q){console.error("Failed to update event:",q),alert("Failed to update event. Please try again.")}},Qo=async(N,q)=>{try{if(await a.updateEvent(n.params.eventId,{...we.value}),N&&q!==null){const _e=Math.floor(Math.abs(q)/1e3),ye=q<0,rt=Math.floor(_e/3600),Dt=Math.floor(_e%3600/60),Tt=_e%60,ys=`${ye?"-":""}${rt.toString().padStart(2,"0")}:${Dt.toString().padStart(2,"0")}:${Tt.toString().padStart(2,"0")}`;await a.bulkUpdateLocationTimes(n.params.eventId,ys)}await At(),fe.value=!1}catch(_e){console.error("Failed to update event:",_e),alert("Failed to update event. Please try again.")}},Sr=async({shouldShift:N,timeDelta:q})=>{ze.value=!1,await Qo(N,q)},Wi=()=>{ze.value=!1,At()},At=async()=>{try{await a.fetchEvent(n.params.eventId),P.value=a.currentEvent,P.value&&(we.value={name:P.value.name||"",description:P.value.description||"",eventDate:Ka(P.value.eventDate),timeZoneId:P.value.timeZoneId||"UTC",peopleTerm:P.value.peopleTerm||"Marshals",checkpointTerm:P.value.checkpointTerm||"Checkpoints",areaTerm:P.value.areaTerm||"Areas",checklistTerm:P.value.checklistTerm||"Checklists"},fe.value=!1,of(P.value)),await a.fetchLocations(n.params.eventId),R.value=a.locations,await a.fetchEventStatus(n.params.eventId),T.value=a.eventStatus.locations,await eo(),await ji(),await oi(),await jn(),await lt(),await _t()}catch(N){console.error("Failed to load event data:",N)}},ji=async()=>{try{const N=await In.getByEvent(n.params.eventId);G.value=N.data}catch(N){console.error("Failed to load marshals:",N)}},oi=async()=>{try{const N=await js.getByEvent(n.params.eventId);Xe.value=N.data}catch(N){console.error("Failed to load areas:",N)}},jn=async()=>{try{const[N,q]=await Promise.all([Lt.getByEvent(n.params.eventId),Lt.getReport(n.params.eventId)]);ti.value=N.data,Ko.value=q.data}catch(N){console.error("Failed to load checklists:",N)}},lt=async()=>{try{const N=await is.getByEvent(n.params.eventId);Zn.value=N.data}catch(N){console.error("Failed to load notes:",N)}},_t=async()=>{try{const[N,q]=await Promise.all([wi.getByEvent(n.params.eventId),wi.getRoles(n.params.eventId)]);Hi.value=N.data,an.value=q.data}catch(N){console.error("Failed to load contacts:",N)}},$s=()=>{Ue.value=null,D.value=!1,vt.value=!0},Dn=N=>{Ue.value=N,Ct.value=N.id,D.value=!1,vt.value=!0},_s=async N=>{try{if(Ue.value&&Ue.value.id){if(await js.update(n.params.eventId,Ue.value.id,N),N.checklistChanges&&N.checklistChanges.length>0)for(const q of N.checklistChanges)try{q.complete?await Lt.complete(n.params.eventId,q.itemId,{marshalId:q.marshalId,contextType:q.contextType,contextId:q.contextId}):await Lt.uncomplete(n.params.eventId,q.itemId,{marshalId:q.marshalId,contextType:q.contextType,contextId:q.contextId})}catch(_e){console.error("Failed to update checklist item:",q,_e)}}else await js.create({eventId:n.params.eventId,...N});await oi(),await At(),Qe()}catch(q){console.error("Failed to save area:",q),alert(q.response?.data?.message||"Failed to save area. Please try again.")}},Gi=async N=>{m("Delete Area","Are you sure you want to delete this area? Checkpoints will be automatically reassigned.",async()=>{try{await js.delete(n.params.eventId,N),await js.recalculate(n.params.eventId),await oi(),await At(),Qe()}catch(q){console.error("Failed to delete area:",q),alert(q.response?.data?.message||"Failed to delete area. Please try again.")}})},Qe=()=>{vt.value=!1,Ue.value=null,Ct.value=null,D.value=!1,ft.value=!1,pt.value=null},xt=N=>{Qe(),De.value=null,vs.value="details",D.value=!1,Ps.value=N,Wn.value=!0},Ki=N=>{Qe(),De.value=N,vs.value="details",D.value=!1,Wn.value=!0},ai=()=>{Vn.value=null,zi.value="details",D.value=!1,ni.value=!0},rn=(N,q="details")=>{Vn.value=N,zi.value=q,D.value=!1,ni.value=!0},Mr=async N=>{try{if(Vn.value&&Vn.value.itemId)await Lt.update(n.params.eventId,Vn.value.itemId,N);else{const q=await Lt.create(n.params.eventId,N);q.data.count&&q.data.count>1&&(xe.value="Checklist Items Created",Le.value=`Successfully created ${q.data.count} checklist items.`,ae.value=!0)}await jn(),Ln()}catch(q){console.error("Failed to save checklist item:",q);const _e=q.response?.data?.message||"Failed to save checklist item. Please try again.";alert(_e)}},ri=async N=>{m("Delete Checklist Item","Are you sure you want to delete this checklist item?",async()=>{try{await Lt.delete(n.params.eventId,N),await jn(),Ln()}catch(q){console.error("Failed to delete checklist item:",q),alert(q.response?.data?.message||"Failed to delete checklist item. Please try again.")}})},Ln=()=>{ni.value=!1,Vn.value=null,D.value=!1},Et=()=>{qn.value=null,Ui.value="details",D.value=!1,si.value=!0},Gn=N=>{qn.value=N,Ui.value="details",D.value=!1,si.value=!0},Os=async N=>{try{qn.value&&qn.value.noteId?await is.update(n.params.eventId,qn.value.noteId,N):await is.create(n.params.eventId,N),await lt(),Rs()}catch(q){console.error("Failed to save note:",q);const _e=q.response?.data?.message||"Failed to save note. Please try again.";alert(_e)}},Ds=async N=>{m("Delete Note","Are you sure you want to delete this note?",async()=>{try{await is.delete(n.params.eventId,N),await lt(),Rs()}catch(q){console.error("Failed to delete note:",q),alert(q.response?.data?.message||"Failed to delete note. Please try again.")}})},Rs=()=>{si.value=!1,qn.value=null,D.value=!1},Ns=()=>{De.value=null,vs.value="details",Ps.value=null,D.value=!1,Wn.value=!0},Yi=N=>{De.value=N,vs.value="details",D.value=!1,Wn.value=!0},Ji=async N=>{try{De.value&&De.value.contactId?await wi.update(n.params.eventId,De.value.contactId,N):await wi.create(n.params.eventId,N),await _t(),Bs()}catch(q){console.error("Failed to save contact:",q);const _e=q.response?.data?.message||"Failed to save contact. Please try again.";alert(_e)}},li=async N=>{m("Delete Contact","Are you sure you want to delete this contact?",async()=>{try{await wi.delete(n.params.eventId,N),await _t(),Bs()}catch(q){console.error("Failed to delete contact:",q),alert(q.response?.data?.message||"Failed to delete contact. Please try again.")}})},Bs=()=>{Wn.value=!1,De.value=null,Ps.value=null,D.value=!1},Xi=N=>{if(pt.value=N,vt.value=!1,C.value){const q=C.value.getMapCenter(),_e=C.value.getMapZoom();q&&_e!==null&&(Xt.value=q,Cn.value=_e)}gt.value=!0,X.value="draw-area",ft.value=!0,J.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},Fs=N=>{pt.value?Ue.value={...Ue.value||{},...pt.value,polygon:N}:Ue.value={...Ue.value,polygon:N}},ea=N=>{Mt.value=N},Qi=()=>{ft.value=!1,pt.value&&(Ue.value=pt.value,vt.value=!0,pt.value=null)},eo=async()=>{try{const N=await hl.getAdmins(n.params.eventId);V.value=N.data}catch(N){console.error("Failed to load event admins:",N)}},tt=async N=>{try{await hl.addAdmin(n.params.eventId,N),await eo(),ht()}catch(q){console.error("Failed to add admin:",q),alert(q.response?.data?.message||"Failed to add administrator. Please try again.")}},mn=async N=>{m("Remove Administrator",`Remove ${N} as an administrator?`,async()=>{try{await hl.removeAdmin(n.params.eventId,N),await eo()}catch(q){console.error("Failed to remove admin:",q),alert(q.response?.data?.message||"Failed to remove administrator. Please try again.")}})},ht=()=>{se.value=!1,D.value=!1},ta=async N=>{if(!N){Me.value="Please select a GPX file";return}Se.value=!0,Me.value=null;try{await Ws.uploadGpx(n.params.eventId,N),await At(),ci()}catch(q){console.error("Failed to upload route:",q),Me.value=q.response?.data?.message||"Failed to upload route. Please try again."}finally{Se.value=!1}},ci=()=>{ge.value=!1,Me.value=null},to=async({file:N,deleteExisting:q})=>{if(!N){pe.value="Please select a CSV file";return}de.value=!0,pe.value=null,Ce.value=null;try{const _e=await ls.importCsv(n.params.eventId,N,q);Ce.value=_e.data,await At(),ui();const ye=_e.data;let rt=`<p>Created <strong>${ye.locationsCreated}</strong> location(s) and <strong>${ye.assignmentsCreated}</strong> assignment(s)</p>`;ye.errors&&ye.errors.length>0&&(rt+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',ye.errors.forEach(Dt=>{rt+=`<li>${Dt}</li>`}),rt+="</ul>"),xe.value="Import Complete",Le.value=rt,ae.value=!0}catch(_e){console.error("Failed to import locations:",_e),pe.value=_e.response?.data?.message||"Failed to import locations. Please try again."}finally{de.value=!1}},ui=()=>{ie.value=!1,pe.value=null,Ce.value=null},Kn=async N=>{if(g.value)Ge.value.latitude=N.lat,Ge.value.longitude=N.lng;else if(Ee.value)Re.value.latitude=N.lat,Re.value.longitude=N.lng,A.value&&(A.value={...A.value,latitude:N.lat,longitude:N.lng}),Ee.value=!1,he.value=!0,Pt();else if(Jt.value)try{await a.createLocation({eventId:n.params.eventId,name:`Checkpoint ${Ut.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""}),Ut.value++,await At()}catch(q){console.error("Failed to create checkpoint:",q),alert("Failed to create checkpoint. Please try again.")}},no=N=>{X.value==="place-checkpoint"||X.value==="move-checkpoint"?te.value=N:X.value==="add-multiple"&&ia(N)},zs=N=>{Ge.value={...N}},Bt=()=>{g.value=!1,te.value=null,gt.value=!0,X.value="place-checkpoint",J.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},Yn=()=>{if(C.value){const N=C.value.getMapCenter(),q=C.value.getMapZoom();N&&q!==null&&(Xt.value=N,Cn.value=q)}Ge.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},te.value=null,gt.value=!0,X.value="place-checkpoint",J.value={title:"Select checkpoint location",description:"Click on the map to set the location. Click again to reposition."}},na=()=>{if(C.value){const N=C.value.getMapCenter(),q=C.value.getMapZoom();N&&q!==null&&(Xt.value=N,Cn.value=q)}Ue.value={id:null,name:"",description:"",color:"#667eea",polygon:[],checkpointIds:[],marshalIds:[],displayOrder:Xe.value.length},gt.value=!0,X.value="draw-area",ft.value=!0,J.value={title:"Draw area boundary",description:"Click to add points. Click Done when finished to complete the area."}},sa=()=>{A.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},Re.value={id:null,name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},F.value=[],Z.value=[],D.value=!1,he.value=!0},Pr=()=>{const N=T.value.map(q=>{const _e=q.name.match(/^Checkpoint (\d+)$/);return _e?parseInt(_e[1]):0}).filter(q=>q>0);if(Ut.value=N.length>0?Math.max(...N)+1:1,C.value){const q=C.value.getMapCenter(),_e=C.value.getMapZoom();q&&_e!==null&&(Xt.value=q,Cn.value=_e)}gt.value=!0,X.value="add-multiple",Jt.value=!0,J.value={title:"Add multiple checkpoints",description:`Click on map to add checkpoints. Next: Checkpoint ${Ut.value}`}},ia=N=>{on.value.push({id:`temp-${Ut.value}`,name:`Checkpoint ${Ut.value}`,description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",assignments:[],isTemporary:!0}),Ut.value++,J.value={...J.value,description:`Click on map to add checkpoints. Next: Checkpoint ${Ut.value}`}},so=()=>{if(X.value==="place-checkpoint"){const N=te.value||{lat:0,lng:0};A.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:"",areaIds:[],assignments:[]},Re.value={id:null,name:"",description:"",latitude:N.lat,longitude:N.lng,requiredMarshals:1,what3Words:""},F.value=[],Z.value=[],D.value=!1,ot(),he.value=!0}else if(X.value==="move-checkpoint")te.value&&(Re.value.latitude=te.value.lat,Re.value.longitude=te.value.lng,A.value&&(A.value={...A.value,...Fe.value||{},latitude:te.value.lat,longitude:te.value.lng}),Pt()),Fe.value=null,ot(),he.value=!0;else if(X.value==="draw-area"){if(Mt.value&&Mt.value.length>=3){const N=Mt.value.map(q=>({lat:q.lat,lng:q.lng}));pt.value?Ue.value={...Ue.value||{},...pt.value,polygon:N}:Ue.value={...Ue.value||{},polygon:N}}ft.value=!1,ot(),vt.value=!0,pt.value=null,Mt.value=null}else X.value==="add-multiple"&&$r()},$r=async()=>{const N=[...on.value];try{for(const q of N)await a.createLocation({eventId:n.params.eventId,name:q.name,description:q.description,latitude:q.latitude,longitude:q.longitude,requiredMarshals:q.requiredMarshals,what3Words:q.what3Words});on.value=[],Jt.value=!1,ot(),await At()}catch(q){console.error("Failed to create checkpoints:",q),alert("Failed to create checkpoints. Please try again.")}},oa=()=>{X.value==="draw-area"?(pt.value&&(Ue.value=pt.value,vt.value=!0,pt.value=null),ft.value=!1,Mt.value=null):X.value==="add-multiple"&&(on.value=[],Jt.value=!1),ot()},ot=()=>{gt.value=!1,X.value=null,J.value={},te.value=null,Xt.value=null,Cn.value=null,ft.value&&(ft.value=!1)},Or=N=>{Zt(N)},Zt=N=>{A.value=N,Re.value={id:N.id,name:N.name,description:N.description||"",latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||""},F.value=[],Z.value=[],D.value=!1,he.value=!0,setTimeout(()=>{C.value?.scrollMapIntoView()},100)},Us=async N=>{if(!Ya(N.what3Words)){alert("Invalid What3Words format. Please use word.word.word or word/word/word (lowercase letters only, 1-20 characters each)");return}try{await a.createLocation({eventId:n.params.eventId,...N}),await At(),io()}catch(q){console.error("Failed to save location:",q),alert("Failed to save location. Please try again.")}},io=()=>{g.value=!1,Ge.value={name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},D.value=!1,D.value=!1},oo=()=>{he.value=!1,A.value=null,Ee.value=!1,me.value=!1,Fe.value=null,Re.value={id:"",name:"",description:"",latitude:0,longitude:0,requiredMarshals:1,what3Words:""},F.value=[],Z.value=[],D.value=!1},Hs=()=>{me.value=!1},Dr=N=>{if(N?.formData&&(Fe.value=N.formData),he.value=!1,te.value=null,C.value){const _e=C.value.getMapCenter(),ye=C.value.getMapZoom();_e&&ye!==null&&(Xt.value=_e,Cn.value=ye)}const q=Fe.value?.name||A.value?.name;gt.value=!0,X.value="move-checkpoint",J.value={title:`Move ${x.value.checkpoint}: ${q}`,description:"Click on the map to set the new location"}},aa=async N=>{if(!Ya(N.what3Words)){alert("Invalid What3Words format.");return}try{const q=!A.value.id;if(q){const _e=await a.createLocation({eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const ye of N.pendingAssignments)await a.createAssignment({eventId:n.params.eventId,locationId:_e.id,marshalId:ye.marshalId})}else{const _e=A.value.id;if(await ls.update(n.params.eventId,_e,{eventId:n.params.eventId,name:N.name,description:N.description,latitude:N.latitude,longitude:N.longitude,requiredMarshals:N.requiredMarshals,what3Words:N.what3Words||null,startTime:N.startTime,endTime:N.endTime}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const ye of N.pendingNewChecklistItems)ye.text?.trim()&&await Lt.create(n.params.eventId,{text:ye.text,scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[_e]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const ye of N.pendingNewNotes)!ye.title?.trim()&&!ye.content?.trim()||await is.create(n.params.eventId,{title:ye.title||"Untitled",content:ye.content||"",scopeConfigurations:[{scope:"EveryoneAtCheckpoints",itemType:"Checkpoint",ids:[_e]}],displayOrder:0,priority:"Normal",isPinned:!1});for(const ye of Z.value)await a.deleteAssignment(n.params.eventId,ye);for(const ye of F.value)await a.createAssignment({eventId:n.params.eventId,locationId:A.value.id,marshalId:ye.marshalId});if(N.checkInChanges&&N.checkInChanges.length>0)for(const ye of N.checkInChanges){const rt=A.value.assignments.find(Dt=>Dt.id===ye.assignmentId);rt&&rt.isCheckedIn!==ye.shouldBeCheckedIn&&await Li.adminCheckIn(n.params.eventId,ye.assignmentId)}}if(!q&&N.checklistChanges&&N.checklistChanges.length>0)for(const _e of N.checklistChanges)try{_e.complete?await Lt.complete(n.params.eventId,_e.itemId,{marshalId:_e.marshalId,contextType:_e.contextType,contextId:_e.contextId}):await Lt.uncomplete(n.params.eventId,_e.itemId,{marshalId:_e.marshalId,contextType:_e.contextType,contextId:_e.contextId})}catch(ye){console.error("Failed to update checklist item:",_e,ye)}await At(),oo()}catch(q){console.error("Failed to update location:",q),alert("Failed to update location. Please try again.")}},Rr=async N=>{m("Delete Location","Are you sure you want to delete this location?",async()=>{try{await ls.delete(n.params.eventId,N),await At(),oo()}catch(q){console.error("Failed to delete location:",q),alert("Failed to delete location. Please try again.")}})},Nr=N=>{if(N.toString().startsWith("temp-")){const q=A.value.assignments.find(_e=>_e.id===N);q&&(F.value=F.value.filter(_e=>_e.marshalId!==q.marshalId)),A.value.assignments=A.value.assignments.filter(_e=>_e.id!==N),Pt()}else Z.value.includes(N)||(Z.value.push(N),A.value.assignments=A.value.assignments.filter(q=>q.id!==N),Pt())},ao=async N=>{await ra(N)},ra=async N=>{const q=G.value.find(ye=>ye.id===N);if(!q)return;const _e=T.value.filter(ye=>ye.assignments?.some(rt=>rt.marshalId===N&&ye.id!==A.value.id));if(_e.length>0){ce.value={marshalName:q.name,locations:_e.map(rt=>rt.name),marshal:q};const ye=await new Promise(rt=>{U.value=rt,re.value=!0});if(ye==="cancel"||ye==="choose-other")return;if(ye==="move")for(const rt of _e){const Dt=rt.assignments.find(Tt=>Tt.marshalId===N);if(Dt){Z.value.push(Dt.id);const Tt=T.value.findIndex(ys=>ys.id===rt.id);Tt!==-1&&(T.value[Tt].assignments=T.value[Tt].assignments.filter(ys=>ys.id!==Dt.id))}}}F.value.push({marshalId:q.id,marshalName:q.name}),A.value.assignments||(A.value.assignments=[]),A.value.assignments.push({id:`temp-${Date.now()}`,marshalId:q.id,marshalName:q.name,locationId:A.value.id,isCheckedIn:!1,isPending:!0}),Pt(),Hs()},vn=async N=>{try{const _e=(await In.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber})).data;await ji(),F.value.push({marshalId:_e.id,marshalName:_e.name}),Pt(),Hs()}catch(q){console.error("Failed to create marshal:",q),alert("Failed to create marshal. Please try again.")}},Br=()=>{ke.value=null,Je.value={id:"",name:"",email:"",phoneNumber:"",notes:""},oe.value=[],le.value=[],D.value=!1,Y.value=!0},la=N=>{ke.value=N,Je.value={id:N.id,name:N.name,email:N.email||"",phoneNumber:N.phoneNumber||"",notes:N.notes||""},oe.value=[],le.value=[],D.value=!1,Y.value=!0},xn=()=>{if(!ke.value)return[];const N=[];return T.value.forEach(q=>{q.assignments.filter(ye=>ye.marshalName===ke.value.name).forEach(ye=>{N.push({...ye,locationName:q.name})})}),N},ca=async N=>{try{let q=ke.value?.id,_e=!1;if(ke.value){if(await In.update(n.params.eventId,ke.value.id,{name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes}),N.pendingNewChecklistItems&&N.pendingNewChecklistItems.length>0)for(const ye of N.pendingNewChecklistItems)ye.text?.trim()&&await Lt.create(n.params.eventId,{text:ye.text,scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[q]}],displayOrder:0,isRequired:!1});if(N.pendingNewNotes&&N.pendingNewNotes.length>0)for(const ye of N.pendingNewNotes)!ye.title?.trim()&&!ye.content?.trim()||await is.create(n.params.eventId,{title:ye.title||"Untitled",content:ye.content||"",scopeConfigurations:[{scope:"SpecificPeople",itemType:"Marshal",ids:[q]}],displayOrder:0,priority:"Normal",isPinned:!1})}else q=(await In.create({eventId:n.params.eventId,name:N.name,email:N.email,phoneNumber:N.phoneNumber,notes:N.notes,pendingNewChecklistItems:N.pendingNewChecklistItems||[],pendingNewNotes:N.pendingNewNotes||[]})).data.id,_e=!0;for(const ye of le.value)await a.deleteAssignment(n.params.eventId,ye);for(const ye of oe.value)await a.createAssignment({eventId:n.params.eventId,locationId:ye.locationId,marshalId:q});if(N.pendingAssignments&&N.pendingAssignments.length>0)for(const ye of N.pendingAssignments)await a.createAssignment({eventId:n.params.eventId,locationId:ye.locationId,marshalId:q});if(N.checkInChanges&&N.checkInChanges.length>0){const ye=xn();for(const rt of N.checkInChanges){const Dt=ye.find(Tt=>Tt.id===rt.assignmentId);Dt&&Dt.isCheckedIn!==rt.shouldBeCheckedIn&&await Li.adminCheckIn(n.params.eventId,rt.assignmentId)}}if(N.checklistChanges&&N.checklistChanges.length>0)for(const ye of N.checklistChanges)try{const rt={marshalId:q};ye.contextType&&ye.contextId&&(rt.contextType=ye.contextType,rt.contextId=ye.contextId),ye.complete?await Lt.complete(n.params.eventId,ye.itemId,rt):await Lt.uncomplete(n.params.eventId,ye.itemId,rt)}catch(rt){console.error("Failed to process checklist change:",rt);const Dt=rt.response?.data?.message||"Failed to update checklist item";alert(`Error: ${Dt}`)}await At(),di(),_e&&(O.value=q,W.value=N.name,E.value=!0)}catch(q){console.error("Failed to save marshal:",q),alert("Failed to save marshal. Please try again.")}},ro=async N=>{m("Delete Marshal","Are you sure you want to delete this marshal?",async()=>{try{await In.delete(n.params.eventId,N),await At(),di()}catch(q){console.error("Failed to delete marshal:",q),alert("Failed to delete marshal. Please try again.")}})},lo=N=>{ro(N.id)},Fr=N=>{le.value.includes(N)||(le.value.push(N),Pt())},ua=N=>{oe.value.push({locationId:N}),Pt()},di=()=>{Y.value=!1,ke.value=null,Je.value={id:"",name:"",email:"",phoneNumber:"",notes:""},oe.value=[],le.value=[],D.value=!1},zr=async({file:N})=>{if(!N){pe.value="Please select a CSV file";return}Ae.value=!0,pe.value=null,K.value=null;try{const q=await In.importCsv(n.params.eventId,N);K.value=q.data,await At(),da();const _e=q.data;let ye=`<p>Created <strong>${_e.marshalsCreated}</strong> marshal(s) and <strong>${_e.assignmentsCreated}</strong> assignment(s)</p>`;_e.errors&&_e.errors.length>0&&(ye+='<br><p><strong>Errors:</strong></p><ul style="margin: 0; padding-left: 1.5rem;">',_e.errors.forEach(rt=>{ye+=`<li>${rt}</li>`}),ye+="</ul>"),xe.value="Import Complete",Le.value=ye,ae.value=!0}catch(q){console.error("Failed to import marshals:",q),pe.value=q.response?.data?.message||"Failed to import marshals. Please try again."}finally{Ae.value=!1}},da=()=>{ue.value=!1,pe.value=null,K.value=null},co=N=>{U.value&&(U.value(N),U.value=null),re.value=!1},Ur=async({assignment:N,status:q})=>{try{if(q==="not-checked-in"?N.isCheckedIn&&await Li.adminCheckIn(n.params.eventId,N.id):N.isCheckedIn||await Li.adminCheckIn(n.params.eventId,N.id),await At(),A.value){const _e=T.value.find(ye=>ye.id===A.value.id);_e&&(A.value=_e)}}catch(_e){console.error("Failed to change assignment status:",_e),alert("Failed to change status. Please try again.")}};return wn(async()=>{await At();try{const N=await cs.getMe(n.params.eventId);Vi.value=N.data}catch(N){console.warn("Failed to fetch user claims:",N)}}),(N,q)=>(_(),b("div",BM,[u("header",FM,[u("div",zM,[u("button",{onClick:Er,class:"btn-back",title:"Back to Dashboard"}," Dashboard"),P.value?(_(),b("div",UM,[u("h1",null,I(P.value.name),1),u("p",HM,I(H(Jb)(P.value.eventDate)),1)])):B("",!0)]),u("div",VM,[Zi.value?(_(),b("button",{key:0,onClick:Yo,class:"btn btn-marshal-mode"}," Switch to Marshal ")):B("",!0),u("button",{onClick:ii,class:"btn btn-secondary"},"Profile")])]),u("div",ZM,[u("div",qM,[Ne(WL,{tabs:M.value,"model-value":H(s),"onUpdate:modelValue":H(r)},null,8,["tabs","model-value","onUpdate:modelValue"])]),u("div",WM,[H(s)==="course"?(_(),et(Ck,{key:0,ref_key:"courseAreasTab",ref:C,checkpoints:T.value,areas:Xe.value,route:P.value?.route||[],selectedAreaId:Ct.value,drawingMode:ft.value,onMapClick:Kn,onLocationClick:Or,onAreaClick:Dn,onImportCheckpoints:q[0]||(q[0]=_e=>ie.value=!0),onUploadRoute:q[1]||(q[1]=_e=>ge.value=!0),onSelectLocation:Zt,onAddArea:$s,onSelectArea:Dn,onPolygonComplete:Fs,onCancelDrawing:Qi,onAddCheckpointFromMap:Yn,onAddManyCheckpointsFromMap:Pr,onAddAreaFromMap:na},null,8,["checkpoints","areas","route","selectedAreaId","drawingMode"])):B("",!0),H(s)==="checkpoints"?(_(),b("div",jM,[Ne(kL,{locations:T.value,areas:Xe.value,onAddCheckpointManually:sa,onImportCheckpoints:q[2]||(q[2]=_e=>ie.value=!0),onSelectLocation:Zt},null,8,["locations","areas"])])):B("",!0),H(s)==="areas"?(_(),b("div",GM,[Ne(OL,{areas:Xe.value,checkpoints:T.value,onAddArea:$s,onSelectArea:Dn},null,8,["areas","checkpoints"])])):B("",!0),H(s)==="marshals"?(_(),et(Wk,{key:3,marshals:G.value,assignments:qi.value,locations:T.value,onAddMarshal:Br,onImportMarshals:q[3]||(q[3]=_e=>ue.value=!0),onSelectMarshal:la,onDeleteMarshal:lo,onChangeAssignmentStatus:Ur},null,8,["marshals","assignments","locations"])):B("",!0),H(s)==="checklists"?(_(),et(xw,{key:4,"checklist-items":ti.value,areas:Xe.value,locations:T.value,marshals:G.value,"completion-report":Ko.value,onAddChecklistItem:ai,onSelectChecklistItem:rn},null,8,["checklist-items","areas","locations","marshals","completion-report"])):B("",!0),H(s)==="notes"?(_(),et(Jw,{key:5,notes:Zn.value,areas:Xe.value,locations:T.value,marshals:G.value,onAddNote:Et,onSelectNote:Gn},null,8,["notes","areas","locations","marshals"])):B("",!0),H(s)==="contacts"?(_(),et(kC,{key:6,contacts:Hi.value,areas:Xe.value,locations:T.value,marshals:G.value,"available-roles":an.value,onAddContact:Ns,onSelectContact:Yi},null,8,["contacts","areas","locations","marshals","available-roles"])):B("",!0),H(s)==="details"?(_(),et(rL,{key:7,"event-data":we.value,admins:V.value,"form-dirty":fe.value,onSubmit:Ir,onAddAdmin:q[4]||(q[4]=_e=>se.value=!0),onRemoveAdmin:mn,"onUpdate:formDirty":Tr},null,8,["event-data","admins","form-dirty"])):B("",!0)])]),Ne(NM,{show:g.value,location:Ge.value,isDirty:D.value,onClose:io,onSave:Us,onSetOnMap:Bt,"onUpdate:isDirty":Pt,"onUpdate:location":zs},null,8,["show","location","isDirty"]),Ne(wA,{show:he.value,location:A.value,assignments:A.value?.assignments||[],"event-date":P.value?.eventDate||"",areas:Xe.value,"event-id":H(n).params.eventId,"all-locations":T.value,notes:Zn.value,"available-marshals":Jo.value,"all-checklist-items":ti.value,isDirty:D.value,onClose:oo,onSave:aa,onDelete:Rr,onMoveLocation:Dr,onRemoveAssignment:Nr,onAssignMarshal:ao,"onUpdate:isDirty":Pt},null,8,["show","location","assignments","event-date","areas","event-id","all-locations","notes","available-marshals","all-checklist-items","isDirty"]),Ne(YL,{show:w.value,link:gs.value,isDirty:!1,onClose:q[5]||(q[5]=_e=>w.value=!1)},null,8,["show","link"]),Ne(u1,{show:E.value,"event-id":H(n).params.eventId,"marshal-id":O.value,"marshal-name":W.value,onClose:q[6]||(q[6]=_e=>E.value=!1)},null,8,["show","event-id","marshal-id","marshal-name"]),Ne(f1,{show:se.value,isDirty:D.value,onClose:ht,onSubmit:tt,"onUpdate:isDirty":Pt},null,8,["show","isDirty"]),Ne(_1,{show:ge.value,uploading:Se.value,error:Me.value,isDirty:D.value,onClose:ci,onSubmit:ta,"onUpdate:isDirty":Pt},null,8,["show","uploading","error","isDirty"]),Ne(T1,{show:ie.value,importing:de.value,error:pe.value,result:Ce.value,isDirty:D.value,onClose:ui,onSubmit:to,"onUpdate:isDirty":Pt},null,8,["show","importing","error","result","isDirty"]),Ne(LT,{show:Y.value,marshal:ke.value,"event-id":H(n).params.eventId,assignments:xn(),availableLocations:Lr.value,allLocations:T.value,areas:Xe.value,isEditing:!!ke.value,eventNotes:Zn.value,allChecklistItems:ti.value,isDirty:D.value,onClose:di,onSave:ca,onDelete:ro,onRemoveAssignment:Fr,onAssignToLocation:ua,"onUpdate:isDirty":Pt},null,8,["show","marshal","event-id","assignments","availableLocations","allLocations","areas","isEditing","eventNotes","allChecklistItems","isDirty"]),Ne(R1,{show:ue.value,importing:Ae.value,error:pe.value,result:K.value,isDirty:D.value,onClose:da,onSubmit:zr,"onUpdate:isDirty":Pt},null,8,["show","importing","error","result","isDirty"]),Ne(TT,{show:re.value,conflictData:ce.value,onClose:q[7]||(q[7]=_e=>re.value=!1),onChoice:co},null,8,["show","conflictData"]),Ne(BT,{show:me.value,locationName:A.value?.name||"",marshals:Jo.value,onClose:Hs,onAssignExisting:ra,onCreateAndAssign:vn},null,8,["show","locationName","marshals"]),Ne(YT,{show:ze.value,"old-event-date":Te.value,"new-event-date":Be.value,"affected-checkpoints-count":qe.value,onConfirm:Sr,onCancel:Wi},null,8,["show","old-event-date","new-event-date","affected-checkpoints-count"]),Ne(UI,{show:vt.value,area:Ue.value,checkpoints:T.value,marshals:G.value,areas:Xe.value,isDirty:D.value,"event-id":H(n).params.eventId,"all-locations":T.value,assignments:qi.value,notes:Zn.value,contacts:Hi.value,onClose:Qe,onSave:_s,onDelete:Gi,onDrawBoundary:Xi,"onUpdate:isDirty":Pt,onSelectCheckpoint:Zt,onAddAreaContact:xt,onEditContact:Ki},null,8,["show","area","checkpoints","marshals","areas","isDirty","event-id","all-locations","assignments","notes","contacts"]),Ne(OS,{show:ni.value,"checklist-item":Vn.value,"initial-tab":zi.value,areas:Xe.value,locations:T.value,marshals:G.value,isDirty:D.value,onClose:Ln,onSave:Mr,onDelete:ri,"onUpdate:isDirty":Pt},null,8,["show","checklist-item","initial-tab","areas","locations","marshals","isDirty"]),Ne(KS,{show:si.value,note:qn.value,"initial-tab":Ui.value,areas:Xe.value,locations:T.value,marshals:G.value,isDirty:D.value,onClose:Rs,onSave:Os,onDelete:Ds,"onUpdate:isDirty":Pt},null,8,["show","note","initial-tab","areas","locations","marshals","isDirty"]),Ne(gM,{show:Wn.value,contact:De.value,"initial-tab":vs.value,areas:Xe.value,locations:T.value,marshals:G.value,"available-roles":an.value,isDirty:D.value,"preselected-area":Ps.value,onClose:Bs,onSave:Ji,onDelete:li,"onUpdate:isDirty":Pt},null,8,["show","contact","initial-tab","areas","locations","marshals","available-roles","isDirty","preselected-area"]),Ne(AM,{show:gt.value,mode:X.value,"context-title":J.value.title,"context-description":J.value.description,"can-complete":xr.value,clickable:X.value!=="draw-area","drawing-mode":X.value==="draw-area"&&ft.value,locations:Ar.value,areas:Xo.value,route:P.value?.route||[],"selected-area-id":Ct.value,center:Xt.value,zoom:Cn.value,onMapClick:no,onPolygonComplete:Fs,onPolygonDrawing:ea,onDone:so,onCancel:oa},null,8,["show","mode","context-title","context-description","can-complete","clickable","drawing-mode","locations","areas","route","selected-area-id","center","zoom"]),Ne(Cr,{show:ae.value,title:xe.value,message:Le.value,onClose:q[8]||(q[8]=_e=>ae.value=!1)},null,8,["show","title","message"]),Ne(kr,{show:H(l),title:H(d),message:H(h),onConfirm:H(f),onCancel:H(v)},null,8,["show","title","message","onConfirm","onCancel"])]))}},YM=Ze(KM,[["__scopeId","data-v-2d19b908"]]),JM={key:0,class:"emergency-contacts-list"},XM={class:"contact-details"},QM={class:"info-section"},eP=["href"],tP={key:0,class:"info-section"},nP=["href"],sP={key:1,class:"no-contacts"},iP={__name:"EmergencyContactModal",props:{show:{type:Boolean,default:!1},contacts:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:n}){const i=n,a=()=>{i("close")};return(s,r)=>(_(),et(Nt,{show:e.show,title:"Emergency Contact Information",size:"medium",onClose:a},{actions:Ye(()=>[u("button",{onClick:a,class:"btn btn-secondary"},"Close")]),default:Ye(()=>[e.contacts&&e.contacts.length>0?(_(),b("div",JM,[(_(!0),b(be,null,$e(e.contacts,(l,d)=>(_(),b("div",{key:d,class:"emergency-contact-item"},[u("h3",null,I(l.name),1),u("div",XM,[u("div",QM,[r[0]||(r[0]=u("label",null,"Phone Number",-1)),u("a",{href:`tel:${l.phone}`,class:"phone-link"},I(l.phone),9,eP)]),l.details?(_(),b("div",tP,[r[1]||(r[1]=u("label",null,"Details",-1)),u("p",null,I(l.details),1)])):B("",!0)]),u("a",{href:`tel:${l.phone}`,class:"btn btn-danger btn-full"}," Call "+I(l.name),9,nP)]))),128))])):(_(),b("div",sP,[...r[2]||(r[2]=[u("p",null,"No emergency contacts have been set up for this event.",-1)])]))]),_:1},8,["show"]))}},oP=Ze(iP,[["__scopeId","data-v-b8cbbb40"]]),aP={key:0,class:"area-lead-section"},rP={class:"marshals-section"},lP={key:0,class:"loading"},cP={key:1,class:"empty-state"},uP={key:2,class:"marshals-list"},dP={class:"marshal-header"},hP={class:"marshal-name"},fP={class:"marshal-checkpoint"},pP={key:0,class:"checkpoint-desc"},mP={class:"marshal-contact"},vP={key:0,class:"contact-item"},gP=["href"],_P={key:1,class:"contact-item"},yP=["href"],bP={key:0,class:"check-in-info"},kP={key:0},wP={class:"checklist-section"},CP={key:0,class:"loading"},LP={key:1,class:"empty-state"},xP={key:2,class:"checklist-items"},AP={class:"item-checkbox"},EP=["checked","disabled","onChange"],TP={class:"item-content"},IP={class:"item-text"},SP={key:0,class:"item-owner"},MP={key:1,class:"completion-info"},PP={class:"completion-text"},$P={class:"completion-time"},OP={__name:"AreaLeadSection",props:{eventId:{type:String,required:!0},areaIds:{type:Array,default:()=>[]},marshalId:{type:String,required:!0}},emits:["checklist-updated"],setup(e,{emit:n}){const i=e,a=n,s=$([]),r=$([]),l=$([]),d=$([]),h=$({}),m=$(!1),f=$({}),v=$(!1),k=ne(()=>s.value.filter(g=>i.areaIds.includes(g.id))),x=g=>{const C=d.value.filter(O=>O.areaIds&&O.areaIds.includes(g)),w=C.map(O=>O.id);return l.value.filter(O=>w.includes(O.locationId)).map(O=>{const W=r.value.find(se=>se.id===O.marshalId),V=C.find(se=>se.id===O.locationId);return{marshalId:O.marshalId,name:W?.name||O.marshalName||"Unknown",email:W?.email||null,phone:W?.phoneNumber||null,isCheckedIn:O.isCheckedIn,checkInTime:O.checkInTime,checkInMethod:O.checkInMethod,checkpointName:V?.name||"Unknown",checkpointDescription:V?.description||null}})},M=async()=>{if(!(!i.eventId||i.areaIds.length===0)){m.value=!0;try{const g=await js.getByEvent(i.eventId);s.value=g.data||[];const C=await ls.getByEvent(i.eventId);d.value=C.data||[];const w=await Ci.getByEvent(i.eventId);l.value=w.data||[];const E=await In.getByEvent(i.eventId);r.value=E.data||[],await P()}catch(g){console.error("Failed to load area data:",g)}finally{m.value=!1}}},P=async()=>{for(const g of i.areaIds){f.value[g]=!0;try{const C=await Lt.getAreaChecklist(i.eventId,g);h.value[g]=C.data||[]}catch(C){console.error(`Failed to load checklist for area ${g}:`,C),h.value[g]=[]}finally{f.value[g]=!1}}},R=async(g,C)=>{if(!v.value){v.value=!0;try{C.isCompleted?await Lt.uncomplete(i.eventId,C.itemId,{marshalId:i.marshalId,contextType:C.completionContextType,contextId:C.completionContextId}):await Lt.complete(i.eventId,C.itemId,{marshalId:i.marshalId,contextType:C.completionContextType,contextId:C.completionContextId}),f.value[g]=!0;const w=await Lt.getAreaChecklist(i.eventId,g);h.value[g]=w.data||[],f.value[g]=!1,a("checklist-updated")}catch(w){console.error("Failed to toggle checklist item:",w)}finally{v.value=!1}}},T=g=>g?new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",A=g=>g?new Date(g).toLocaleString():"";return We(()=>[i.eventId,i.areaIds],()=>{M()},{immediate:!0}),wn(()=>{M()}),(g,C)=>k.value.length>0?(_(),b("div",aP,[(_(!0),b(be,null,$e(k.value,w=>(_(),b("div",{key:w.id,class:"area-card"},[u("div",{class:"area-header",style:Yt({borderLeftColor:w.color||"#667eea"})},[u("h3",null,I(w.name),1),C[0]||(C[0]=u("span",{class:"area-lead-badge"},"Area Lead",-1))],4),u("div",rP,[u("h4",null,"Marshals in Your Area ("+I(x(w.id).length)+")",1),m.value?(_(),b("div",lP,"Loading marshals...")):x(w.id).length===0?(_(),b("div",cP," No marshals assigned to checkpoints in this area. ")):(_(),b("div",uP,[(_(!0),b(be,null,$e(x(w.id),E=>(_(),b("div",{key:E.marshalId,class:Ve(["marshal-card",{"is-checked-in":E.isCheckedIn}])},[u("div",dP,[u("div",hP,I(E.name),1),u("div",{class:Ve(["check-status",{"checked-in":E.isCheckedIn}])},I(E.isCheckedIn?" Checked In":"Not Checked In"),3)]),u("div",fP,[He(I(E.checkpointName)+" ",1),E.checkpointDescription?(_(),b("span",pP," - "+I(E.checkpointDescription),1)):B("",!0)]),u("div",mP,[E.email?(_(),b("div",vP,[C[1]||(C[1]=u("span",{class:"contact-label"},"Email:",-1)),u("a",{href:`mailto:${E.email}`},I(E.email),9,gP)])):B("",!0),E.phone?(_(),b("div",_P,[C[2]||(C[2]=u("span",{class:"contact-label"},"Phone:",-1)),u("a",{href:`tel:${E.phone}`},I(E.phone),9,yP)])):B("",!0)]),E.isCheckedIn&&E.checkInTime?(_(),b("div",bP,[He(" Checked in at "+I(T(E.checkInTime))+" ",1),E.checkInMethod?(_(),b("span",kP," ("+I(E.checkInMethod)+")",1)):B("",!0)])):B("",!0)],2))),128))]))]),u("div",wP,[C[3]||(C[3]=u("h4",null,"Area Checklist",-1)),f.value[w.id]?(_(),b("div",CP,"Loading checklist...")):!h.value[w.id]||h.value[w.id].length===0?(_(),b("div",LP," No checklist items for this area. ")):(_(),b("div",xP,[(_(!0),b(be,null,$e(h.value[w.id],E=>(_(),b("div",{key:`${w.id}-${E.itemId}-${E.completionContextId}`,class:Ve(["checklist-item",{"item-completed":E.isCompleted}])},[u("div",AP,[u("input",{type:"checkbox",checked:E.isCompleted,disabled:!E.canBeCompletedByMe||v.value,onChange:O=>R(w.id,E)},null,40,EP)]),u("div",TP,[u("div",IP,I(E.text),1),E.contextOwnerName?(_(),b("div",SP," For: "+I(E.contextOwnerName),1)):B("",!0),E.isCompleted?(_(),b("div",MP,[u("span",PP," Completed by "+I(E.completedByActorName||"Unknown"),1),u("span",$P,I(A(E.completedAt)),1)])):B("",!0)])],2))),128))]))])]))),128))])):B("",!0)}},DP=Ze(OP,[["__scopeId","data-v-a7714a9d"]]),RP={class:"marshal-view"},NP={class:"header"},BP={key:0},FP={class:"header-actions"},zP={class:"container"},UP={key:0,class:"selection-card"},HP={key:1,class:"selection-card"},VP={key:0,class:"loading"},ZP={key:2,class:"selection-card error-card"},qP={class:"error"},WP={key:3,class:"dashboard"},jP={class:"welcome-bar"},GP={class:"welcome-info"},KP={class:"welcome-name"},YP={key:0,class:"welcome-email"},JP={key:0,class:"mode-switch"},XP={key:1,class:"mode-switch"},QP={class:"accordion"},e$={key:0,class:"accordion-section"},t$={class:"accordion-title"},n$=["innerHTML"],s$={class:"accordion-icon"},i$={key:0,class:"accordion-content"},o$={class:"event-details"},a$={key:0,class:"event-detail-row"},r$={class:"detail-value"},l$={key:1,class:"event-description"},c$={class:"detail-value"},u$={class:"accordion-section"},d$={class:"accordion-title"},h$=["innerHTML"],f$={class:"accordion-icon"},p$={key:0,class:"accordion-content assignments-accordion-content"},m$={key:0,class:"empty-state"},v$={key:1,class:"checkpoint-accordion"},g$=["onClick"],_$={class:"checkpoint-header-content"},y$={class:"checkpoint-title-row"},b$={key:0,class:"checkpoint-check-icon"},k$={class:"checkpoint-name"},w$={key:1,class:"area-badge"},C$={key:2,class:"checkpoint-time-badge"},L$={key:0,class:"checkpoint-description-preview"},x$={class:"accordion-icon"},A$={key:0,class:"checkpoint-accordion-content"},E$={key:0,class:"checkpoint-mini-map"},T$={class:"checkpoint-marshals"},I$={class:"marshals-label"},S$={class:"marshals-list"},M$={key:0,class:"check-badge"},P$={key:1,class:"checkpoint-area-contacts"},$$={class:"marshals-label"},O$={class:"contact-list"},D$={class:"contact-info"},R$={class:"contact-name"},N$={key:0,class:"contact-role"},B$={key:1,class:"contact-detail"},F$={key:2,class:"contact-detail"},z$={class:"contact-actions"},U$=["href"],H$=["href"],V$=["href"],Z$={key:2,class:"checked-in-status"},q$={class:"check-time"},W$={key:3,class:"check-in-actions"},j$=["onClick","disabled"],G$=["onClick","disabled"],K$={key:4,class:"error"},Y$={class:"accordion-section"},J$={class:"accordion-title"},X$=["innerHTML"],Q$={class:"accordion-icon"},e2={key:0,class:"accordion-content"},t2={key:0,class:"loading"},n2={key:1,class:"error"},s2={key:2,class:"empty-state"},i2={key:3,class:"checklist-items"},o2={class:"item-checkbox"},a2=["checked","disabled","onChange"],r2={class:"item-content"},l2={class:"item-text"},c2={key:0,class:"item-context"},u2={key:1,class:"completion-info"},d2={class:"completion-text"},h2={class:"completion-time"},f2={key:1,class:"accordion-section"},p2={class:"accordion-title"},m2=["innerHTML"],v2={class:"accordion-icon"},g2={key:0,class:"accordion-content"},_2={key:0,class:"loading"},y2={key:1,class:"contact-list"},b2={class:"contact-info"},k2={class:"contact-name-row"},w2={key:0,class:"primary-badge"},C2={class:"contact-name"},L2={key:1,class:"contact-role-badge"},x2={key:0,class:"contact-notes-text"},A2={key:1,class:"contact-detail"},E2={key:2,class:"contact-detail"},T2={class:"contact-actions"},I2=["href"],S2=["href"],M2=["href"],P2={class:"accordion-section"},$2={class:"accordion-title"},O2=["innerHTML"],D2={class:"accordion-icon"},R2={key:0,class:"accordion-content"},N2={class:"accordion-section"},B2={class:"accordion-title"},F2=["innerHTML"],z2={key:0,class:"location-status active"},U2={key:1,class:"location-status"},H2={class:"accordion-icon"},V2={key:0,class:"accordion-content map-content"},Z2={__name:"MarshalView",setup(e){const{terms:n,termsLower:i}=mt(),a=nc(),s=Zo(),r=$(!1),l=$(!1),d=$(null),h=$(null),m=$(null),f=$(null),v=ne(()=>f.value?.eventRoles?f.value.eventRoles.filter(J=>J.role==="EventAreaLead").flatMap(J=>J.areaIds||[]):[]),k=ne(()=>v.value.length>0),x=ne(()=>f.value?.eventRoles?f.value.eventRoles.some(X=>X.role==="EventAdmin"):!1),M=ne(()=>f.value?.authMethod==="SecureEmailLink"&&x.value),P=ne(()=>f.value?.authMethod==="MarshalMagicCode"&&x.value),R=()=>{s.push(`/admin/events/${a.params.eventId}`)},T=$(null),A=$([]),g=$([]),C=$([]),w=$(!0),E=$("assignments"),O=$(null),W=$(null),V=$(null),se=$([]),ge=$(!1),Se=$(null),Me=$(!1),ie=$([]),ue=$(!1),de=$(!1),Ae=$(""),pe=$(""),Ce=$(null),K=$(null);let he=null;const Ee=X=>{E.value=E.value===X?null:X},Re=$(null),me=X=>{Re.value=Re.value===X?null:X},re=ne(()=>g.value.map(X=>{const J=A.value.find(Xt=>Xt.id===X.locationId),te=J?.areaIds||J?.AreaIds||[];let Fe=null;te.length>0&&C.value.length>0&&(Fe=C.value.find(Cn=>te.includes(Cn.id))?.name);const Mt=J?.assignments||[],on=Z.value.filter(Xt=>te.includes(Xt.areaId));return{...X,location:J,areaName:Fe,areaIds:te,allMarshals:Mt,areaContacts:on,locationName:J?.name||"Unknown Location"}})),ce=ne(()=>g.value.length>0?g.value[0]:null),U=ne(()=>g.value.map(X=>X.locationId)),G=ne(()=>T.value?.route?(typeof T.value.route=="string"?JSON.parse(T.value.route):T.value.route)||[]:[]),Y=ne(()=>!ce.value||!A.value.length?null:A.value.find(X=>X.id===ce.value.locationId)),ke=ne(()=>se.value.filter(X=>X.isCompleted).length),Je=$([]),D=$(!1),F=ne(()=>Je.value),Z=$([]);ne(()=>{if(Z.value.length===0)return[];const X={};for(const J of Z.value){const te=J.areaId||"unknown";X[te]||(X[te]={areaId:J.areaId,areaName:J.areaName||"Unknown Area",contacts:[]}),X[te].contacts.push(J)}return Object.values(X)}),ne(()=>Z.value.length);const oe=ne(()=>Y.value?{lat:Y.value.latitude,lng:Y.value.longitude}:K.value?K.value:A.value.length>0?{lat:A.value[0].latitude,lng:A.value[0].longitude}:{lat:51.505,lng:-.09}),le=async(X,J)=>{l.value=!0,d.value=null,console.log("Authenticating with magic code:",{eventId:X,code:J});try{const te=await cs.marshalLogin(X,J);if(console.log("Auth response:",te.data),te.data.success){localStorage.setItem("sessionToken",te.data.sessionToken),localStorage.setItem(`marshal_${X}`,te.data.marshalId),h.value=te.data.person,m.value=te.data.marshalId,r.value=!0,console.log("Authenticated as marshal:",m.value,h.value?.name);try{const Fe=await cs.getMe(X);f.value=Fe.data,console.log("User claims:",f.value)}catch(Fe){console.warn("Failed to fetch claims:",Fe)}s.replace({path:a.path,query:{}}),await xe()}else d.value=te.data.message||"Authentication failed"}catch(te){console.error("Authentication failed:",te),d.value=te.response?.data?.message||"Invalid or expired login link"}finally{l.value=!1}},ae=async X=>{const J=localStorage.getItem("sessionToken"),te=localStorage.getItem(`marshal_${X}`);if(!J||!te)return!1;try{const Fe=await cs.getMe(X);if(Fe.data&&Fe.data.marshalId)return f.value=Fe.data,h.value={personId:Fe.data.personId,name:Fe.data.personName,email:Fe.data.personEmail},m.value=Fe.data.marshalId,r.value=!0,!0}catch{localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${X}`)}return!1},xe=async()=>{const X=a.params.eventId;console.log("Loading event data for:",{eventId:X,marshalId:m.value});try{console.log("Fetching event...");const J=await Ws.getById(X);T.value=J.data,console.log("Event loaded:",T.value?.name),T.value&&of(T.value)}catch(J){console.error("Failed to load event:",J.response?.status,J.response?.data)}try{console.log("Fetching areas...");const J=await js.getByEvent(X);C.value=J.data||[],console.log("Areas loaded:",C.value.length)}catch(J){console.error("Failed to load areas:",J.response?.status,J.response?.data)}try{console.log("Fetching event status (locations + assignments)...");const J=await Ci.getEventStatus(X);if(A.value=J.data?.locations||[],console.log("Locations loaded:",A.value.length),m.value){const te=[];for(const Fe of A.value){const Mt=Fe.assignments?.find(on=>on.marshalId===m.value);Mt&&(te.push(Mt),console.log("Assignment found:",Mt.id,"at location:",Fe.name))}g.value=te,console.log("Total assignments found:",g.value.length)}}catch(J){console.error("Failed to load event status:",J.response?.status,J.response?.data)}await fe(),await we(),await Le()},Le=async()=>{const X=a.params.eventId;try{const J=await is.getMyNotes(X);ie.value=J.data||[],console.log("Notes loaded:",ie.value.length)}catch(J){console.error("Failed to load notes:",J)}},we=async()=>{const X=a.params.eventId;D.value=!0;try{const J=await wi.getMyContacts(X);Je.value=J.data,console.log("Contacts loaded:",Je.value.length)}catch(J){console.warn("Failed to load contacts:",J),Je.value=[]}finally{D.value=!1}},fe=async()=>{if(!m.value){console.warn("No marshal ID, skipping checklist load");return}ge.value=!0,Se.value=null;try{console.log("Fetching checklist for marshal:",m.value);const X=await Lt.getMarshalChecklist(a.params.eventId,m.value);se.value=X.data||[],console.log("Checklist loaded:",se.value.length,"items")}catch(X){console.error("Failed to load checklist:",X.response?.status,X.response?.data),Se.value=X.response?.data?.message||"Failed to load checklist"}finally{ge.value=!1}},ze=async X=>{if(!Me.value){Me.value=!0;try{X.isCompleted?await Lt.uncomplete(a.params.eventId,X.itemId,{marshalId:m.value,contextType:X.completionContextType,contextId:X.completionContextId}):await Lt.complete(a.params.eventId,X.itemId,{marshalId:m.value,contextType:X.completionContextType,contextId:X.completionContextId}),await fe()}catch(J){console.error("Failed to toggle checklist item:",J),Se.value=J.response?.data?.message||"Failed to update checklist",setTimeout(()=>{Se.value=null},3e3)}finally{Me.value=!1}}},Te=X=>{if(!X.completionContextType||!X.completionContextId)return null;if(X.completionContextType==="Checkpoint"){const J=A.value.find(Fe=>Fe.id===X.completionContextId);if(!J)return null;const te=J.description?` - ${J.description}`:"";return`At ${i.value.checkpoint} ${J.name}${te}`}if(X.completionContextType==="Area"){const J=C.value.find(te=>te.id===X.completionContextId);return J?`At ${i.value.area} ${J.name}`:null}return X.completionContextType==="Personal"?"Personal item":null},Be=()=>{if(!("geolocation"in navigator)){console.warn("Geolocation not supported");return}console.log("Starting location tracking..."),he=navigator.geolocation.watchPosition(X=>{K.value={lat:X.coords.latitude,lng:X.coords.longitude},console.log("Location updated:",K.value)},X=>{console.warn("Geolocation error:",{1:"Location permission denied. Please allow location access in your browser settings.",2:"Location unavailable. Make sure GPS is enabled on your device.",3:"Location request timed out. Please try again."}[X.code]||X.message)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4})},qe=()=>{he!==null&&(navigator.geolocation.clearWatch(he),he=null)},Ge=async X=>{O.value=X.id,W.value=X.id,V.value=null;try{if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by your browser");const J=await new Promise((Mt,on)=>{navigator.geolocation.getCurrentPosition(Mt,on,{enableHighAccuracy:!0,timeout:1e4})}),te=await Li.checkIn({eventId:a.params.eventId,assignmentId:X.id,latitude:J.coords.latitude,longitude:J.coords.longitude,manualCheckIn:!1}),Fe=g.value.findIndex(Mt=>Mt.id===X.id);Fe!==-1&&(g.value[Fe]=te.data)}catch(J){J.response?.data?.message?V.value=J.response.data.message:J.message?V.value=J.message:V.value="Failed to check in. Please try manual check-in."}finally{O.value=null,W.value=null}},Xe=X=>{Ae.value="Manual Check-In",pe.value="Are you sure you want to check in manually? This should only be used if GPS is not available.",Ce.value=async()=>{O.value=X.id,W.value=X.id,V.value=null;try{const J=await Li.checkIn({eventId:a.params.eventId,assignmentId:X.id,latitude:null,longitude:null,manualCheckIn:!0}),te=g.value.findIndex(Fe=>Fe.id===X.id);te!==-1&&(g.value[te]=J.data)}catch{V.value="Failed to check in manually. Please contact the admin."}finally{O.value=null,W.value=null}},de.value=!0},Ue=()=>{de.value=!1,Ce.value&&(Ce.value(),Ce.value=null)},vt=()=>{de.value=!1,Ce.value=null},Ct=async()=>{try{await cs.logout()}catch{}localStorage.removeItem("sessionToken"),localStorage.removeItem(`marshal_${a.params.eventId}`),r.value=!1,h.value=null,m.value=null,g.value=[],se.value=[],Z.value=[],s.push("/")},ft=X=>X?new Date(X).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",pt=X=>X?new Date(X).toLocaleString():"",Jt=(X,J)=>{if(!X&&!J)return"";const te=X?ft(X):"?",Fe=J?ft(J):"?";return`${te} - ${Fe}`},Ut=X=>X?new Date(X).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",gt=X=>X?X.replace(/([A-Z])/g," $1").replace(/^./,J=>J.toUpperCase()).trim():"";return wn(async()=>{const X=a.params.eventId,J=a.query.code;w.value=!0;try{J?await le(X,J):await ae(X)&&await xe()}finally{w.value=!1}r.value&&Be()}),We(r,X=>{X?Be():qe()}),We(()=>a.query.code,async X=>{if(X&&r.value){w.value=!0;try{await le(a.params.eventId,X)}finally{w.value=!1}}}),Ms(()=>{qe()}),(X,J)=>(_(),b("div",RP,[u("header",NP,[T.value?(_(),b("h1",BP,I(T.value.name),1)):B("",!0),u("div",FP,[r.value?(_(),b("button",{key:0,onClick:J[0]||(J[0]=te=>ue.value=!0),class:"btn-emergency"}," Emergency Info ")):B("",!0),r.value?(_(),b("button",{key:1,onClick:Ct,class:"btn-logout"}," Logout ")):B("",!0)])]),u("div",zP,[w.value?(_(),b("div",UP,[...J[8]||(J[8]=[u("div",{class:"loading"},"Loading...",-1)])])):!r.value&&!d.value?(_(),b("div",HP,[J[9]||(J[9]=u("h2",null,"Welcome",-1)),J[10]||(J[10]=u("p",{class:"instruction"},"Please use the login link sent to you to access your marshal dashboard.",-1)),l.value?(_(),b("p",VP,"Authenticating...")):B("",!0)])):d.value?(_(),b("div",ZP,[J[11]||(J[11]=u("h2",null,"Login Failed",-1)),u("p",qP,I(d.value),1),J[12]||(J[12]=u("p",{class:"instruction"},"Please contact the event organizer for a new login link.",-1))])):(_(),b("div",WP,[u("div",jP,[u("div",GP,[u("span",KP,I(h.value?.name||"Marshal"),1),h.value?.email?(_(),b("span",YP,I(h.value.email),1)):B("",!0)]),M.value?(_(),b("div",JP,[u("button",{onClick:R,class:"btn-mode-switch"}," Switch to Admin ")])):P.value?(_(),b("div",XP,[...J[13]||(J[13]=[u("span",{class:"reauth-hint",title:"Login via admin flow to access admin features"}," Admin access requires re-login ",-1)])])):B("",!0)]),u("div",QP,[T.value?.startDate||T.value?.description?(_(),b("div",e$,[u("button",{class:Ve(["accordion-header",{active:E.value==="eventDetails"}]),onClick:J[1]||(J[1]=te=>Ee("eventDetails"))},[u("span",t$,[u("span",{class:"section-icon",innerHTML:H(_n)("event")},null,8,n$),J[14]||(J[14]=He(" Event details ",-1))]),u("span",s$,I(E.value==="eventDetails"?"":"+"),1)],2),E.value==="eventDetails"?(_(),b("div",i$,[u("div",o$,[T.value.startDate?(_(),b("div",a$,[J[15]||(J[15]=u("span",{class:"detail-label"},"Start time",-1)),u("span",r$,I(Ut(T.value.startDate)),1)])):B("",!0),T.value.description?(_(),b("div",l$,[J[16]||(J[16]=u("span",{class:"detail-label"},"Description",-1)),u("p",c$,I(T.value.description),1)])):B("",!0)])])):B("",!0)])):B("",!0),u("div",u$,[u("button",{class:Ve(["accordion-header",{active:E.value==="assignments"}]),onClick:J[2]||(J[2]=te=>Ee("assignments"))},[u("span",d$,[u("span",{class:"section-icon",innerHTML:H(_n)("checkpoint")},null,8,h$),He(" Your "+I(H(i).checkpoints)+" ("+I(g.value.length)+") ",1)]),u("span",f$,I(E.value==="assignments"?"":"+"),1)],2),E.value==="assignments"?(_(),b("div",p$,[g.value.length===0?(_(),b("div",m$,[u("p",null,"You don't have any "+I(H(i).checkpoint)+" assignments yet.",1)])):(_(),b("div",v$,[(_(!0),b(be,null,$e(re.value,te=>(_(),b("div",{key:te.id,class:"checkpoint-accordion-section"},[u("button",{class:Ve(["checkpoint-accordion-header",{active:Re.value===te.id,"checked-in":te.isCheckedIn}]),onClick:Fe=>me(te.id)},[u("div",_$,[u("div",y$,[te.isCheckedIn?(_(),b("span",b$,"")):B("",!0),u("span",k$,I(te.location?.name||te.locationName),1),te.areaName?(_(),b("span",w$,I(te.areaName),1)):B("",!0),te.location?.startTime||te.location?.endTime?(_(),b("span",C$,I(Jt(te.location.startTime,te.location.endTime)),1)):B("",!0)]),te.location?.description?(_(),b("div",L$,I(te.location.description),1)):B("",!0)]),u("span",x$,I(Re.value===te.id?"":"+"),1)],10,g$),Re.value===te.id?(_(),b("div",A$,[te.location?(_(),b("div",E$,[Ne(Ja,{locations:A.value,route:G.value,center:{lat:te.location.latitude,lng:te.location.longitude},zoom:16,"user-location":K.value,"highlight-location-id":te.locationId,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-id"])])):B("",!0),u("div",T$,[u("div",I$,I(H(n).people)+":",1),u("div",S$,[(_(!0),b(be,null,$e(te.allMarshals,Fe=>(_(),b("span",{key:Fe.marshalId,class:Ve(["marshal-tag",{"is-you":Fe.marshalId===m.value,"checked-in":Fe.isCheckedIn}])},[He(I(Fe.marshalName)+I(Fe.marshalId===m.value?" (you)":"")+" ",1),Fe.isCheckedIn?(_(),b("span",M$,"")):B("",!0)],2))),128))])]),te.areaContacts.length>0?(_(),b("div",P$,[u("div",$$,I(H(n).area)+" contacts:",1),u("div",O$,[(_(!0),b(be,null,$e(te.areaContacts,Fe=>(_(),b("div",{key:Fe.marshalId,class:"contact-item"},[u("div",D$,[u("div",R$,I(Fe.marshalName),1),Fe.role?(_(),b("div",N$,I(Fe.role),1)):B("",!0),Fe.phone?(_(),b("div",B$,I(Fe.phone),1)):B("",!0),Fe.email?(_(),b("div",F$,I(Fe.email),1)):B("",!0)]),u("div",z$,[Fe.phone?(_(),b("a",{key:0,href:`tel:${Fe.phone}`,class:"contact-link"},[...J[17]||(J[17]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),He(" Call ",-1)])],8,U$)):B("",!0),Fe.phone?(_(),b("a",{key:1,href:`sms:${Fe.phone}`,class:"contact-link"},[...J[18]||(J[18]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),He(" Text ",-1)])],8,H$)):B("",!0),Fe.email?(_(),b("a",{key:2,href:`mailto:${Fe.email}`,class:"contact-link"},[...J[19]||(J[19]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),He(" Email ",-1)])],8,V$)):B("",!0)])]))),128))])])):B("",!0),te.isCheckedIn?(_(),b("div",Z$,[J[21]||(J[21]=u("span",{class:"check-icon"},"",-1)),u("div",null,[J[20]||(J[20]=u("strong",null,"Checked In",-1)),u("p",q$,I(ft(te.checkInTime)),1)])])):(_(),b("div",W$,[u("button",{onClick:Fe=>Ge(te),class:"btn btn-primary",disabled:O.value===te.id},I(O.value===te.id?"Checking in...":"GPS Check-In"),9,j$),u("button",{onClick:Fe=>Xe(te),class:"btn btn-secondary",disabled:O.value===te.id}," Manual ",8,G$)])),V.value&&W.value===te.id?(_(),b("div",K$,I(V.value),1)):B("",!0)])):B("",!0)]))),128))]))])):B("",!0)]),u("div",Y$,[u("button",{class:Ve(["accordion-header",{active:E.value==="checklist"}]),onClick:J[3]||(J[3]=te=>Ee("checklist"))},[u("span",J$,[u("span",{class:"section-icon",innerHTML:H(_n)("checklist")},null,8,X$),He(" Your "+I(H(i).checklists)+" ("+I(ke.value)+" of "+I(se.value.length)+" complete) ",1)]),u("span",Q$,I(E.value==="checklist"?"":"+"),1)],2),E.value==="checklist"?(_(),b("div",e2,[ge.value?(_(),b("div",t2,"Loading checklist...")):Se.value?(_(),b("div",n2,I(Se.value),1)):se.value.length===0?(_(),b("div",s2,[u("p",null,"No "+I(H(i).checklists)+" for you.",1)])):(_(),b("div",i2,[(_(!0),b(be,null,$e(se.value,te=>(_(),b("div",{key:te.itemId,class:Ve(["checklist-item",{"item-completed":te.isCompleted}])},[u("div",o2,[u("input",{type:"checkbox",checked:te.isCompleted,disabled:!te.canBeCompletedByMe||Me.value,onChange:Fe=>ze(te)},null,40,a2)]),u("div",r2,[u("div",l2,I(te.text),1),Te(te)?(_(),b("div",c2,I(Te(te)),1)):B("",!0),te.isCompleted?(_(),b("div",u2,[u("span",d2," Completed by "+I(te.completedByActorName||"Unknown"),1),u("span",h2,I(pt(te.completedAt)),1)])):B("",!0)])],2))),128))]))])):B("",!0)]),F.value.length>0||D.value?(_(),b("div",f2,[u("button",{class:Ve(["accordion-header",{active:E.value==="eventContacts"}]),onClick:J[4]||(J[4]=te=>Ee("eventContacts"))},[u("span",p2,[u("span",{class:"section-icon",innerHTML:H(_n)("contacts")},null,8,m2),He(" Contacts ("+I(F.value.length)+") ",1)]),u("span",v2,I(E.value==="eventContacts"?"":"+"),1)],2),E.value==="eventContacts"?(_(),b("div",g2,[D.value?(_(),b("div",_2,"Loading contacts...")):(_(),b("div",y2,[(_(!0),b(be,null,$e(F.value,te=>(_(),b("div",{key:te.contactId,class:Ve(["contact-item",{"primary-contact":te.isPrimary}])},[u("div",b2,[u("div",k2,[te.isPrimary?(_(),b("span",w2,"")):B("",!0),u("span",C2,I(te.name),1),te.role?(_(),b("span",L2,I(gt(te.role)),1)):B("",!0)]),te.notes?(_(),b("div",x2,I(te.notes),1)):B("",!0),te.phone?(_(),b("div",A2,I(te.phone),1)):B("",!0),te.email?(_(),b("div",E2,I(te.email),1)):B("",!0)]),u("div",T2,[te.phone?(_(),b("a",{key:0,href:`tel:${te.phone}`,class:"contact-link"},[...J[22]||(J[22]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})],-1),He(" Call ",-1)])],8,I2)):B("",!0),te.phone?(_(),b("a",{key:1,href:`sms:${te.phone}`,class:"contact-link"},[...J[23]||(J[23]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1),He(" Text ",-1)])],8,S2)):B("",!0),te.email?(_(),b("a",{key:2,href:`mailto:${te.email}`,class:"contact-link"},[...J[24]||(J[24]=[u("svg",{class:"contact-icon",viewBox:"0 0 24 24",fill:"currentColor"},[u("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1),He(" Email ",-1)])],8,M2)):B("",!0)])],2))),128))]))])):B("",!0)])):B("",!0),u("div",P2,[u("button",{class:Ve(["accordion-header",{active:E.value==="notes"}]),onClick:J[5]||(J[5]=te=>Ee("notes"))},[u("span",$2,[u("span",{class:"section-icon",innerHTML:H(_n)("notes")},null,8,O2),He(" Notes ("+I(ie.value.length)+") ",1)]),u("span",D2,I(E.value==="notes"?"":"+"),1)],2),E.value==="notes"?(_(),b("div",R2,[Ne(wr,{"event-id":H(a).params.eventId,"all-notes":ie.value,locations:A.value,areas:C.value,assignments:g.value,"show-scope":!1,onNotesChanged:Le},null,8,["event-id","all-notes","locations","areas","assignments"])])):B("",!0)]),u("div",N2,[u("button",{class:Ve(["accordion-header",{active:E.value==="map"}]),onClick:J[6]||(J[6]=te=>Ee("map"))},[u("span",B2,[u("span",{class:"section-icon",innerHTML:H(_n)("map")},null,8,F2),J[25]||(J[25]=He(" Map ",-1)),K.value?(_(),b("span",z2,"GPS Active")):(_(),b("span",U2,"GPS Inactive"))]),u("span",H2,I(E.value==="map"?"":"+"),1)],2),E.value==="map"?(_(),b("div",V2,[Ne(Ja,{locations:A.value,route:G.value,center:oe.value,zoom:15,"user-location":K.value,"highlight-location-ids":U.value,"marshal-mode":!0},null,8,["locations","route","center","user-location","highlight-location-ids"])])):B("",!0)])]),k.value?(_(),et(DP,{key:0,"event-id":H(a).params.eventId,"area-ids":v.value,"marshal-id":m.value,onChecklistUpdated:fe},null,8,["event-id","area-ids","marshal-id"])):B("",!0)]))]),Ne(oP,{show:ue.value,contacts:T.value?.emergencyContacts||[],onClose:J[7]||(J[7]=te=>ue.value=!1)},null,8,["show","contacts"]),Ne(kr,{show:de.value,title:Ae.value,message:pe.value,onConfirm:Ue,onCancel:vt},null,8,["show","title","message"])]))}},q2=Ze(Z2,[["__scopeId","data-v-8c833499"]]),W2=[{path:"/",name:"Home",component:Bg},{path:"/admin/login",name:"AdminLogin",component:wy},{path:"/admin/verify",name:"AdminVerify",component:Iy},{path:"/admin/dashboard",name:"AdminDashboard",component:Cb,meta:{requiresAuth:!0}},{path:"/admin/profile",name:"AdminProfile",component:Kb,meta:{requiresAuth:!0}},{path:"/admin/event/:eventId",name:"AdminEventManage",component:YM,meta:{requiresAuth:!0}},{path:"/event/:eventId",name:"MarshalView",component:q2},{path:"/:pathMatch(.*)*",redirect:"/"}],df=Pg({history:ug("/VolunteerCheckin/testing/"),routes:W2});df.beforeEach((e,n,i)=>{const a=localStorage.getItem("adminEmail");e.meta.requiresAuth&&!a?i({name:"AdminLogin"}):i()});const cc=fv(xv);cc.use(vv());cc.use(df);cc.mount("#app");
